/*
 * Copyright (c) 2022 TerraFrame, Inc. All rights reserved.
 *
 * This file is part of Geoprism Registry(tm).
 *
 * Geoprism Registry(tm) is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * Geoprism Registry(tm) is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with Geoprism Registry(tm).  If not, see <http://www.gnu.org/licenses/>.
 */
"use strict";(self.webpackChunkgeoregistry=self.webpackChunkgeoregistry||[]).push([[398],{9398:(Zn,ee,r)=>{r.r(ee),r.d(ee,{AdminModule:()=>G});var p=r(36895),s=r(90433),N=r(63150),H=r(68567),_=r(80529),m=r(28746),d=r(92340),e=r(94650),u=r(44728);class b{constructor(n,t){this.http=n,this.eventService=t}getIcons(){return this.eventService.start(),this.http.get(d.N.apiUrl+"/api/asset/get-all").pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}remove(n){let t=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/asset/get-all",JSON.stringify({oid:n}),{headers:t}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}}b.\u0275fac=function(n){return new(n||b)(e.LFG(_.eN),e.LFG(u.PO))},b.\u0275prov=e.Yz7({token:b,factory:b.\u0275fac});class M{constructor(n,t){this.http=n,this.eventService=t}getInstance(){return this.eventService.start(),this.http.get(d.N.apiUrl+"/email/getInstance").pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}apply(n){let t=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/email/apply",JSON.stringify({setting:n}),{headers:t}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}}M.\u0275fac=function(n){return new(n||M)(e.LFG(_.eN),e.LFG(u.PO))},M.\u0275prov=e.Yz7({token:M,factory:M.\u0275fac});class Z{constructor(n,t){this.http=n,this.eventService=t}page(n,t){let a=new _.LE;return a=a.set("pageNumber",n.toString()),a=a.set("pageSize",t.toString()),this.eventService.start(),this.http.get(d.N.apiUrl+"/api/registryaccount/page",{params:a}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}getSRAs(n,t){let a=new _.LE;return a=a.set("pageNumber",n.toString()),a=a.set("pageSize",t.toString()),this.eventService.start(),this.http.get(d.N.apiUrl+"/api/registryaccount/get-sras",{params:a}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}edit(n){let t=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/registryaccount/edit",JSON.stringify({oid:n}),{headers:t}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}newInstance(n){let t=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/registryaccount/newInstance",JSON.stringify({organizationCodes:n}),{headers:t}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}newUserInstance(){let n=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/registryaccount/newUserInstance",JSON.stringify({}),{headers:n}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}newInvite(n){let t=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/registryaccount/newInvite",JSON.stringify({organizationCodes:n}),{headers:t}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}remove(n){let t=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/registryaccount/remove",JSON.stringify({oid:n}),{headers:t}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}apply(n,t){let a=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/registryaccount/apply",JSON.stringify({account:n,roleNames:t}),{headers:a}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}unlock(n){let t=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/registryaccount/unlock",JSON.stringify({oid:n}),{headers:t}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}inviteUser(n,t){let a=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/registryaccount/inviteUser",JSON.stringify({invite:n,roleIds:t}),{headers:a}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}inviteComplete(n,t){let a=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/registryaccount/inviteComplete",JSON.stringify({user:n,token:t}),{headers:a}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}getRolesForUser(n){let t=new _.LE;return t=t.set("userOID",n),this.eventService.start(),this.http.get(d.N.apiUrl+"/cgr/account/get-roles-for-user",{params:t}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}}Z.\u0275fac=function(n){return new(n||Z)(e.LFG(_.eN),e.LFG(u.PO))},Z.\u0275prov=e.Yz7({token:Z,factory:Z.\u0275fac});class A{constructor(n,t){this.http=n,this.eventService=t}getInitView(){return this.eventService.start(),this.http.get(d.N.apiUrl+"/api/cgr/init-settings").pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}}A.\u0275fac=function(n){return new(n||A)(e.LFG(_.eN),e.LFG(u.PO))},A.\u0275prov=e.Yz7({token:A,factory:A.\u0275fac});class T{constructor(n,t){this.http=n,this.eventService=t}getNewLocaleInfo(){return this.eventService.start(),this.http.get(d.N.apiUrl+"/api/localization/getNewLocaleInformation").pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}editLocale(n){let t=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/localization/editLocale",JSON.stringify({json:n}),{headers:t}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}installLocale(n){let t=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/localization/installLocale",JSON.stringify({json:n}),{headers:t}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}uninstallLocale(n){let t=new _.WM({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/localization/uninstallLocale",JSON.stringify({json:n}),{headers:t}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}installFile(n){let t=new _.WM;return this.eventService.start(),this.http.post(d.N.apiUrl+"/api/localization/importSpreadsheet",n,{headers:t}).pipe((0,m.x)(()=>{this.eventService.complete()})).toPromise()}}T.\u0275fac=function(n){return new(n||T)(e.LFG(_.eN),e.LFG(u.PO))},T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac});var z=r(28091),S=r(57766),g=r(75832),O=r(77579),h=r(80018),v=r(74272),x=r(82698),C=r(3967),te=r(28137),le=r(55546),$=r(53865),se=r(78818);function ce(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"boolean-field",5),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l._roles.SRA.assigned=i)})("change",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onToggleSRA(i))}),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("value",t._roles.SRA.assigned)("label",t._roles.SRA.label.localizedValue)("disable",!t.isSRA)}}function re(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"boolean-field",5),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.RA.assigned=i)})("change",function(i){e.CHM(t);const l=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.onToggleOrgRA(i,l))}),e.qZA()()()}if(2&o){const t=e.oxw().$implicit,a=e.oxw(2);e.xp6(2),e.Q6J("value",t.RA.assigned)("label",t.RA.label.localizedValue)("disable",a._roles.SRA&&a._roles.SRA.assigned||a._raAssigned&&!t.RA.assigned||a._activeOrganization&&a._activeOrganization!==t.CODE)}}const ne=function(o){return{disabled:o}};function de(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"label",12)(1,"input",13),e.NdJ("change",function(i){const c=e.CHM(t).$implicit,f=e.oxw().$implicit,q=e.oxw().$implicit,P=e.oxw(2);return e.KtG(P.setGroupRole(i,f,c,q))}),e.qZA(),e.TgZ(2,"span",14),e._uU(3),e.qZA()()}if(2&o){const t=n.$implicit,a=e.oxw().$implicit,i=e.oxw().$implicit,l=e.oxw(2);e.Q6J("ngClass",e.VKq(5,ne,i.RA&&i.RA.assigned||l._roles.SRA&&l._roles.SRA.assigned||l._raAssigned||l._activeOrganization&&l._activeOrganization!==i.CODE)),e.xp6(1),e.Q6J("value",t.name)("checked",a.ENABLEDROLE===t.name)("name",t.orgCode+t.geoObjectTypeCode),e.xp6(2),e.Oqu(t.label.localizedValue)}}function pe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",7)(2,"h4"),e._uU(3),e.qZA()(),e.YNc(4,de,4,7,"label",11),e.TgZ(5,"label",12)(6,"input",13),e.NdJ("change",function(i){const c=e.CHM(t).$implicit,f=e.oxw().$implicit,q=e.oxw(2);return e.KtG(q.setGroupRole(i,c,null,f))}),e.qZA(),e.TgZ(7,"span",14),e._UZ(8,"localize",15),e.qZA()()()}if(2&o){const t=n.$implicit,a=e.oxw().$implicit,i=e.oxw(2);e.xp6(3),e.Oqu(t.GEOOBJECTTYPELABEL),e.xp6(1),e.Q6J("ngForOf",t.GEOOBJECTTYPEROLESGROUP),e.xp6(1),e.Q6J("ngClass",e.VKq(5,ne,a.RA&&a.RA.assigned||i._roles.SRA&&i._roles.SRA.assigned||i._raAssigned||i._activeOrganization&&i._activeOrganization!==a.CODE)),e.xp6(1),e.Q6J("checked",""===t.ENABLEDROLE)("name",t+"_none")}}function _e(o,n){if(1&o&&(e.TgZ(0,"div",6)(1,"div",7)(2,"h4"),e._uU(3),e.qZA()(),e.YNc(4,re,3,3,"div",1),e.TgZ(5,"div",3)(6,"div",8)(7,"fieldset",9),e.YNc(8,pe,9,7,"div",10),e.qZA()()()()),2&o){const t=n.$implicit,a=e.oxw(2);e.xp6(3),e.Oqu(t.ORGANIZATIONLABEL),e.xp6(1),e.Q6J("ngIf",t.RA&&a.isSRA),e.xp6(3),e.Q6J("disabled",t.RA&&t.RA.assigned||a._roles.SRA&&a._roles.SRA.assigned||a._raAssigned||a._activeOrganization&&a._activeOrganization!==t.CODE),e.xp6(1),e.Q6J("ngForOf",t.GEOOBJECTTYPEROLES)}}function ue(o,n){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ce,3,3,"div",1),e.YNc(2,_e,9,4,"div",2),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t._roles.SRA),e.xp6(1),e.Q6J("ngForOf",t._roles.ORGANIZATIONS)}}class k{constructor(n,t){this.bsModalRef=n,this.authService=t,this.message=null,this.onRoleIdsUpdate=new e.vpe,this._roleIds=[],this.newInstance=!0,this.isSRA=t.isSRA(),this.isAdmin=t.isAdmin(),this.isMaintainer=this.isAdmin||t.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||t.isContributer()}set roles(n){n&&(this._roles=this.formatRoles(n),this.onChangeRole())}setActiveOrganization(n,t){let a=!1;this._roles.ORGANIZATIONS.forEach(i=>{i.CODE===n&&i.GEOOBJECTTYPEROLES.forEach(l=>{l.ENABLEDROLE&&(a=!0,this._activeOrganization=n)}),a||(this._activeOrganization=null)})}formatRoles(n){let t={SRA:null,ORGANIZATIONS:[]};return n.forEach(a=>{if(a.orgCode){let i=!1;if(t.ORGANIZATIONS.forEach(l=>{if(l.ORGANIZATIONLABEL===a.orgLabel.localizedValue){if("RA"===a.type)l.RA=a,l.RA.assigned&&(this._activeOrganization=l.CODE,this._raAssigned=!0);else if(!this.addToGeoObjectTypeGroup(l,a)){let f={GEOOBJECTTYPEROLESGROUP:[a],ENABLEDROLE:"",GEOOBJECTTYPELABEL:a.geoObjectTypeLabel.localizedValue};a.assigned&&(f.ENABLEDROLE=a.name,this._activeOrganization=l.CODE),l.GEOOBJECTTYPEROLES.push(f)}i=!0}}),!i){let l={ORGANIZATIONLABEL:null,RA:null,GEOOBJECTTYPEROLES:[],CODE:null};if("RA"===a.type)l.ORGANIZATIONLABEL=a.orgLabel.localizedValue,l.RA=a,l.CODE=a.orgCode;else{l.ORGANIZATIONLABEL=a.orgLabel.localizedValue;let c={GEOOBJECTTYPEROLESGROUP:[a],ENABLEDROLE:"",GEOOBJECTTYPELABEL:a.geoObjectTypeLabel.localizedValue};a.assigned&&(c.ENABLEDROLE=a.name),l.GEOOBJECTTYPEROLES.push(c)}t.ORGANIZATIONS.push(l)}}else"SRA"===a.type&&(t.SRA=a)}),this.sortRoles(t),t}sortRoles(n){n.ORGANIZATIONS.forEach(t=>{t.GEOOBJECTTYPEROLES.forEach(a=>{a.GEOOBJECTTYPEROLESGROUP.sort((i,l)=>$.nu[i.type]<$.nu[l.type]?-1:$.nu[i.type]>$.nu[l.type]?1:0)})})}addToGeoObjectTypeGroup(n,t){let a=!1;return n.GEOOBJECTTYPEROLES.forEach(i=>{i.GEOOBJECTTYPELABEL===t.geoObjectTypeLabel.localizedValue&&(t.assigned&&(i.ENABLEDROLE=t.name),i.GEOOBJECTTYPEROLESGROUP.push(t),a=!0)}),a}onToggleOrgRA(n,t){t.RA.assigned=n,this._raAssigned=n,this.setActiveOrganization(t.CODE,n),t.RA.assigned&&t.GEOOBJECTTYPEROLES.forEach(a=>{a.ENABLEDROLE=""}),this.onChangeRole()}onToggleSRA(n){this._roles.ORGANIZATIONS.forEach(t=>{t.GEOOBJECTTYPEROLES.forEach(a=>{a.ENABLEDROLE=""}),t.RA.assigned=!1}),n&&(this._raAssigned=!1,this.setActiveOrganization(null,!1)),this.onChangeRole()}setGroupRole(n,t,a,i){a?(t.ENABLEDROLE=n.target.checked?a.name:"",this.setActiveOrganization(i.CODE,!0)):(t.ENABLEDROLE="",this.setActiveOrganization(i.CODE,!1)),this.onChangeRole()}onChangeRole(){let n=[];this._roles.ORGANIZATIONS.forEach(t=>{t.RA&&t.RA.assigned?n.push(t.RA.name):t.GEOOBJECTTYPEROLES.forEach(a=>{a.ENABLEDROLE&&a.ENABLEDROLE.length>0&&n.push(a.ENABLEDROLE)})}),this._roles.SRA&&this._roles.SRA.assigned&&n.push(this._roles.SRA.name),this._roleIds=n,this.onRoleIdsUpdate.emit(this._roleIds)}removeRoleId(n){let t=this._roleIds.indexOf(n);-1!==t&&this._roleIds.splice(t,1),this.onRoleIdsUpdate.emit(JSON.stringify(this._roleIds))}showData(){}}k.\u0275fac=function(n){return new(n||k)(e.Y36(h.UZ),e.Y36(u.e8))},k.\u0275cmp=e.Xpm({type:k,selectors:[["role-management"]],inputs:{roles:"roles",newInstance:"newInstance"},outputs:{onRoleIdsUpdate:"onRoleIdsUpdate"},decls:6,vars:1,consts:[[4,"ngIf"],["class","row",4,"ngIf"],["class","row-holder",4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-12"],[3,"value","label","disable","valueChange","change"],[1,"row-holder"],[1,"heading"],[1,"col-sm-12","org-container",2,"padding-left","50px","padding-right","50px"],[3,"disabled"],[4,"ngFor","ngForOf"],["class","radio",3,"ngClass",4,"ngFor","ngForOf"],[1,"radio",3,"ngClass"],["type","checkbox",3,"value","checked","name","change"],[2,"font-weight","400"],["key","accounts.none"]],template:function(n,t){1&n&&(e.TgZ(0,"div"),e._UZ(1,"message")(2,"loading-bar"),e.TgZ(3,"form")(4,"fieldset"),e.YNc(5,ue,3,2,"div",0),e.qZA()()()),2&n&&(e.xp6(5),e.Q6J("ngIf",t._roles))},dependencies:[p.mk,p.sg,p.O5,s._Y,s.JL,s.F,v.l,se.M,x.N,C.q],styles:[".modal-section-header[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #e5e5e5}.modal-form[_ngcontent-%COMP%]   .label-holder[_ngcontent-%COMP%]{width:20%;margin:0}.modal-form[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%]{width:80%;border-left:none}.inline-radio-input[_ngcontent-%COMP%]{height:auto}",".modal-form[_ngcontent-%COMP%]   .check-block[_ngcontent-%COMP%]   .chk-area[_ngcontent-%COMP%]{margin:10px 0 0}"]});var y=r(68736);function me(o,n){if(1&o&&(e.TgZ(0,"div",44),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.message)}}function ge(o,n){1&o&&(e.TgZ(0,"div",45),e._UZ(1,"localize",46),e.qZA())}function he(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"input",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.toggleEditingOauth())}),e.ALo(1,"localize"),e.qZA()}2&o&&e.Q6J("value",e.lcZ(1,1,"account.user.disableOauth"))}function ve(o,n){1&o&&(e.TgZ(0,"div",52)(1,"label"),e._UZ(2,"localize",53),e.qZA()())}function fe(o,n){if(1&o&&(e.TgZ(0,"option",56),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.oid),e.xp6(1),e.hij(" ",t.label.localizedValue," ")}}function Ze(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"select",54),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(4);return e.KtG(l.account.user.externalSystemOid=i)}),e.YNc(2,fe,2,2,"option",55),e.qZA()()}if(2&o){const t=e.oxw(4);e.xp6(1),e.Q6J("ngModel",t.account.user.externalSystemOid)("disabled",1==t.externalSystems.length),e.xp6(1),e.Q6J("ngForOf",t.externalSystems)}}function xe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",48)(2,"input",49),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.toggleEditingOauth())}),e.ALo(3,"localize"),e.qZA(),e.YNc(4,he,2,3,"input",50),e.qZA(),e.YNc(5,ve,3,0,"div",51),e.YNc(6,Ze,3,3,"div",35),e.qZA()}if(2&o){const t=e.oxw(3);e.xp6(2),e.Q6J("disabled",t.editingOauth)("value",e.lcZ(3,5,"account.user.enableOauth")),e.xp6(2),e.Q6J("ngIf",t.editingOauth),e.xp6(1),e.Q6J("ngIf",t.editingOauth),e.xp6(1),e.Q6J("ngIf",t.editingOauth)}}function ye(o,n){if(1&o&&(e.TgZ(0,"div",7)(1,"div",8)(2,"label"),e._UZ(3,"localize",47),e.qZA()(),e.TgZ(4,"div",10),e.YNc(5,xe,7,7,"div",35),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",!t.account.changePassword&&t.externalSystems.length>0&&t.systemHasOauth)}}function Ce(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"input",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.onChangePassword())}),e.ALo(1,"localize"),e.qZA()}2&o&&e.Q6J("value",e.lcZ(1,1,"io.cancel"))}function Ae(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",48)(2,"input",49),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.onChangePassword())}),e.ALo(3,"localize"),e.qZA(),e.YNc(4,Ce,2,3,"input",50),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(2),e.Q6J("disabled",t.account.changePassword)("value",e.lcZ(3,3,"account.user.change.password.button")),e.xp6(2),e.Q6J("ngIf",t.account.changePassword)}}function Te(o,n){1&o&&(e.TgZ(0,"div",45),e._UZ(1,"localize",66),e.qZA())}function be(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",52)(1,"div",58)(2,"div",58)(3,"label"),e._UZ(4,"localize",59),e.qZA()(),e.TgZ(5,"div",58)(6,"span",11)(7,"input",60,61),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(3);return e.KtG(l.account.user.password=i)}),e.qZA(),e._UZ(9,"password-strength-bar",62),e.qZA()()(),e.TgZ(10,"div",58)(11,"div",58)(12,"label"),e._UZ(13,"localize",63),e.qZA()(),e.TgZ(14,"div",58)(15,"span",11),e._UZ(16,"input",64,65),e.qZA(),e.YNc(18,Te,2,0,"div",26),e.qZA()()()}if(2&o){const t=e.MAs(17),a=e.oxw(3);e.xp6(7),e.Q6J("ngModel",a.account.user.password),e.xp6(2),e.Q6J("passwordToCheck",a.account.user.password),e.xp6(7),e.Q6J("ngModel",t),e.xp6(2),e.Q6J("ngIf",null==t.errors?null:t.errors.mustMatch)}}function Me(o,n){if(1&o&&(e.TgZ(0,"div",7)(1,"div",8)(2,"label"),e._UZ(3,"localize",57),e.qZA()(),e.TgZ(4,"div",10),e.YNc(5,Ae,5,5,"div",35),e.YNc(6,be,19,4,"div",51),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",!t.editingOauth&&!t.account.user.newInstance&&!t.isAppliedAsOauth),e.xp6(1),e.Q6J("ngIf",!t.editingOauth&&(t.account.changePassword||t.account.user.newInstance||t.isAppliedAsOauth))}}function Se(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div")(2,"label",67)(3,"input",68),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.account.user.inactive=i)}),e.qZA(),e.TgZ(4,"span"),e._UZ(5,"localize",69),e.qZA()(),e.TgZ(6,"label",67)(7,"input",68),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.account.user.inactive=i)}),e.qZA(),e.TgZ(8,"span"),e._UZ(9,"localize",70),e.qZA()()()()}if(2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("value",!1)("ngModel",t.account.user.inactive),e.xp6(4),e.Q6J("value",!0)("ngModel",t.account.user.inactive)}}function we(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"role-management",71),e.NdJ("onRoleIdsUpdate",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onRoleIdsUpdate(i))}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("newInstance",t.account.user.newInstance)("roles",t.account.roles)}}const Je=function(){return["password","certainPassword"]};function qe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"form",3,4),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.MAs(1),l=e.oxw();return e.KtG(i.valid&&l.onSubmit())}),e.TgZ(2,"fieldset")(3,"div",5),e.YNc(4,me,2,1,"div",6),e.TgZ(5,"div",7)(6,"div",8)(7,"label"),e._UZ(8,"localize",9),e.qZA()(),e.TgZ(9,"div",10)(10,"span",11)(11,"input",12),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.account.user.firstName=i)}),e.qZA()()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"label"),e._UZ(15,"localize",13),e.qZA()(),e.TgZ(16,"div",10)(17,"span",11)(18,"input",14),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.account.user.lastName=i)}),e.qZA()()()(),e.TgZ(19,"div",7)(20,"div",8)(21,"label"),e._UZ(22,"localize",15),e.qZA()(),e.TgZ(23,"div",10)(24,"span",11)(25,"input",16),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.account.user.altFirstName=i)}),e.qZA()()()(),e.TgZ(26,"div",7)(27,"div",8)(28,"label"),e._UZ(29,"localize",17),e.qZA()(),e.TgZ(30,"div",10)(31,"span",11)(32,"input",18),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.account.user.altLastName=i)}),e.qZA()()()(),e.TgZ(33,"div",7)(34,"div",8)(35,"label"),e._UZ(36,"localize",19),e.qZA()(),e.TgZ(37,"div",10)(38,"span",11)(39,"input",20),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.account.user.phoneNumber=i)}),e.qZA()()()(),e.TgZ(40,"div",7)(41,"div",8)(42,"label"),e._UZ(43,"localize",21),e.qZA()(),e.TgZ(44,"div",10)(45,"span",11)(46,"input",22),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.account.user.altPhoneNumber=i)}),e.qZA()()()(),e.TgZ(47,"div",7)(48,"div",8)(49,"label"),e._UZ(50,"localize",23),e.qZA()(),e.TgZ(51,"div",10)(52,"span",11)(53,"input",24,25),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.account.user.email=i)}),e.qZA()(),e.YNc(55,ge,2,0,"div",26),e.qZA()(),e.TgZ(56,"div",7)(57,"div",8)(58,"label"),e._UZ(59,"localize",27),e.qZA()(),e.TgZ(60,"div",10)(61,"span",11)(62,"input",28),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.account.user.position=i)}),e.qZA()()()(),e.TgZ(63,"div",7)(64,"div",8)(65,"label"),e._UZ(66,"localize",29),e.qZA()(),e.TgZ(67,"div",10)(68,"span",11)(69,"input",30),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.account.user.department=i)}),e.qZA()()()(),e.TgZ(70,"div",7)(71,"div",8)(72,"label"),e._UZ(73,"localize",31),e.qZA()(),e.TgZ(74,"div",10)(75,"span",11)(76,"input",32),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.account.user.username=i)}),e.qZA()()()(),e.YNc(77,ye,6,1,"div",33),e.YNc(78,Me,7,2,"div",33),e.TgZ(79,"div",7)(80,"div",8)(81,"label"),e._UZ(82,"localize",34),e.qZA()(),e.TgZ(83,"div",10),e.YNc(84,Se,10,4,"div",35),e.qZA()(),e.TgZ(85,"div",7)(86,"div",8)(87,"label"),e._UZ(88,"localize",36),e.qZA()(),e.TgZ(89,"div",10)(90,"div",37),e.YNc(91,we,1,2,"role-management",38),e.qZA()()(),e.TgZ(92,"div",39)(93,"div",40)(94,"div",41)(95,"input",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancel())}),e.ALo(96,"localize"),e.qZA(),e._UZ(97,"input",43),e.ALo(98,"localize"),e.qZA()()()()()()}if(2&o){const t=e.MAs(1),a=e.MAs(54),i=e.oxw();e.Q6J("mustMatch",e.DdM(25,Je)),e.xp6(4),e.Q6J("ngIf",null!=i.message),e.xp6(7),e.Q6J("ngModel",i.account.user.firstName),e.xp6(7),e.Q6J("ngModel",i.account.user.lastName),e.xp6(7),e.Q6J("ngModel",i.account.user.altFirstName),e.xp6(7),e.Q6J("ngModel",i.account.user.altLastName),e.xp6(7),e.Q6J("ngModel",i.account.user.phoneNumber),e.xp6(7),e.Q6J("ngModel",i.account.user.altPhoneNumber),e.xp6(7),e.Q6J("ngModel",i.account.user.email),e.xp6(2),e.Q6J("ngIf",(null==a.errors?null:a.errors.email)&&i.account.user.email&&i.account.user.email.length>0),e.xp6(7),e.Q6J("ngModel",i.account.user.position),e.xp6(7),e.Q6J("ngModel",i.account.user.department),e.xp6(7),e.Q6J("disabled",!i.account.user.newInstance&&"admin"===i.account.user.username)("ngModel",i.account.user.username),e.xp6(1),e.Q6J("ngIf",!i.account.changePassword&&i.externalSystems.length>0&&i.systemHasOauth),e.xp6(1),e.Q6J("ngIf",!i.editingOauth),e.xp6(6),e.Q6J("ngIf",!(!i.account.user.newInstance&&"admin"===i.account.user.username)),e.xp6(7),e.Q6J("ngIf",i.account.roles),e.xp6(4),e.Q6J("value",e.lcZ(96,21,"dataset.cancel")),e.xp6(2),e.Q6J("value",e.lcZ(98,23,"dataset.submit"))("disabled",!t.valid)}}class w{constructor(n,t,a,i){this.service=n,this.authService=t,this.bsModalRef=a,this.localizeService=i,this.message=null,this.roleIds=[],this.externalSystems=[],this.isAppliedAsOauth=!1,this.editingOauth=!1,this.systemHasOauth=!1,this.isSRA=t.isSRA(),this.isRA=t.isRA()}set oid(n){if("NEW"===n){let t=[];this.isRA&&(t=this.authService.getMyOrganizations()),this.service.newInstance(t).then(a=>{this.account=a}).catch(a=>{this.error(a)})}else n&&this.service.edit(n).then(t=>{this.account=t,this.editingOauth=null!=this.account.user.externalSystemOid&&""!==this.account.user.externalSystemOid,this.isAppliedAsOauth=this.editingOauth}).catch(t=>{this.error(t)})}set setExternalSystems(n){this.externalSystems=n,this.externalSystems&&this.externalSystems.forEach(t=>{null!=t.oAuthServer&&(this.systemHasOauth=!0)})}ngOnInit(){this.onEdit=new O.x}onRoleIdsUpdate(n){this.roleIds=n}toggleEditingOauth(){0==this.editingOauth?(this.editingOauth=!0,delete this.account.user.password,this.account.user.externalSystemOid=this.externalSystems[0].oid):(this.editingOauth=!1,delete this.account.user.externalSystemOid)}cancel(){!0===this.account.user.newInstance?this.bsModalRef.hide():this.service.unlock(this.account.user.oid).then(n=>{this.bsModalRef.hide()})}onChangePassword(){this.account.changePassword=!this.account.changePassword}onSubmit(){!this.account.changePassword&&!this.account.user.newInstance&&delete this.account.user.password,this.roleIds.length>0?this.service.apply(this.account.user,this.roleIds).then(n=>{this.onEdit.next(n),this.bsModalRef.hide()}).catch(n=>{this.error(n)}):this.message=this.localizeService.decode("account.role.management.roles.required.message")}error(n){this.message=g.qL.getMessageFromError(n)}}w.\u0275fac=function(n){return new(n||w)(e.Y36(Z),e.Y36(u.e8),e.Y36(h.UZ),e.Y36(u.oQ))},w.\u0275cmp=e.Xpm({type:w,selectors:[["account"]],inputs:{oid:"oid",setExternalSystems:"setExternalSystems"},decls:7,vars:1,consts:[[1,"heading","text-center"],["key","account.header"],["class","modal-form",3,"mustMatch","ngSubmit",4,"ngIf"],[1,"modal-form",3,"mustMatch","ngSubmit"],["form","ngForm"],[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"row-holder"],[1,"label-holder"],["key","account.firstname"],[1,"holder"],[1,"text"],["type","text","name","firstname","required","",1,"form-control",3,"ngModel","ngModelChange"],["key","account.lastname"],["type","text","name","lastname","required","",1,"form-control",3,"ngModel","ngModelChange"],["key","account.altFirstname"],["type","text","name","altFirstname",1,"form-control",3,"ngModel","ngModelChange"],["key","account.altLastname"],["type","text","name","altLastname",1,"form-control",3,"ngModel","ngModelChange"],["key","account.phonenumber"],["type","text","name","phoneNumber",1,"form-control",3,"ngModel","ngModelChange"],["key","account.altPhonenumber"],["type","text","name","altPhoneNumber",1,"form-control",3,"ngModel","ngModelChange"],["key","account.email"],["type","email","name","email","required","","required","","email","",1,"form-control",3,"ngModel","ngModelChange"],["aemail","ngModel"],["style","float:none;","class","inline-error-message",4,"ngIf"],["key","account.position"],["type","text","name","position",1,"form-control",3,"ngModel","ngModelChange"],["key","account.department"],["type","text","name","department",1,"form-control",3,"ngModel","ngModelChange"],["key","account.username"],["type","text","name","username","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["class","row-holder",4,"ngIf"],["key","account.user.status"],[4,"ngIf"],["key","account.user.roles.section.label"],[2,"margin-top","5px"],[3,"newInstance","roles","onRoleIdsUpdate",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"value","click"],["type","submit",1,"btn","btn-primary",3,"value","disabled"],["role","alert",1,"alert","alert-danger"],[1,"inline-error-message",2,"float","none"],["key","account.email.validation"],["key","account.user.oauthTitle"],[2,"text-align","left"],["type","button",1,"btn","btn-primary",3,"disabled","value","click"],["type","button","class","btn btn-default",3,"value","click",4,"ngIf"],["style","margin-top: 10px;",4,"ngIf"],[2,"margin-top","10px"],["key","account.user.oauthExternalSystem"],["name","externalSystemOid",2,"float","none",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["key","account.user.password"],[1,""],["key","account.new.password"],["type","password","name","password","required","","minlength","5","maxlength","50",3,"ngModel","ngModelChange"],["password","ngModel"],[3,"passwordToCheck"],["key","account.certainPassword"],["type","password","name","certainPassword","required","",3,"ngModel"],["certainPassword","ngModel"],["key","account.certainPassword.validation"],[1,"radio"],["type","radio","name","userActive",3,"value","ngModel","ngModelChange"],["key","account.user.status.active"],["key","account.user.status.inactive"],[3,"newInstance","roles","onRoleIdsUpdate"]],template:function(n,t){1&n&&(e.TgZ(0,"div"),e._UZ(1,"message")(2,"loading-bar"),e.TgZ(3,"div",0)(4,"h1"),e._UZ(5,"localize",1),e.qZA()(),e.YNc(6,qe,99,26,"form",2),e.qZA()),2&n&&(e.xp6(6),e.Q6J("ngIf",t.account))},dependencies:[p.sg,p.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s._,s.JJ,s.JL,s.Q7,s.wO,s.nD,s.on,s.On,s.F,v.l,x.N,C.q,te.I,le.n,k,y.F],styles:[".modal-section-header[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #e5e5e5}",".modal-form[_ngcontent-%COMP%]   .check-block[_ngcontent-%COMP%]   .chk-area[_ngcontent-%COMP%]{margin:10px 0 0}"]});class Ne{}function ze(o,n){if(1&o&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}function Oe(o,n){1&o&&(e.TgZ(0,"div",18),e._UZ(1,"localize",19),e.qZA())}function ke(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"role-management",20),e.NdJ("onRoleIdsUpdate",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.onRoleIdsUpdate(i))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("newInstance",!0)("roles",t.invite.roles)}}class J{constructor(n,t,a,i){this.service=n,this.authService=t,this.bsModalRef=a,this.settingsService=i,this.message=null,this.roleIds=[]}ngOnInit(){this.invite=new Ne;let n=this.authService.getMyOrganizations();this.service.newInvite(n).then(t=>{this.invite.roles=t.roles}).catch(t=>{this.error(t)})}cancel(){this.bsModalRef.hide()}onRoleIdsUpdate(n){this.roleIds=n}onSubmit(){this.service.inviteUser(this.invite,this.roleIds).then(()=>{this.bsModalRef.hide()}).catch(n=>{this.error(n)})}error(n){this.message=g.qL.getMessageFromError(n)}}J.\u0275fac=function(n){return new(n||J)(e.Y36(Z),e.Y36(u.e8),e.Y36(h.UZ),e.Y36(A))},J.\u0275cmp=e.Xpm({type:J,selectors:[["account-invite"]],decls:26,vars:11,consts:[[1,"modal-body"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,"heading","text-center"],["key","account.invite.user.header"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"row"],[1,"col-md-12"],["key","account.email"],["type","text","name","email","required","","email","",3,"ngModel","ngModelChange"],["aemail","ngModel"],["style","float:none;","class","inline-error-message",4,"ngIf"],[2,"margin-top","30px"],[3,"newInstance","roles","onRoleIdsUpdate",4,"ngIf"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"value","click"],["type","submit",1,"btn","btn-primary",3,"value","disabled"],["role","alert",1,"alert","alert-danger"],[1,"inline-error-message",2,"float","none"],["key","account.email.validation"],[3,"newInstance","roles","onRoleIdsUpdate"]],template:function(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"message")(2,"loading-bar"),e.TgZ(3,"form",1,2),e.NdJ("ngSubmit",function(){e.CHM(a);const l=e.MAs(4);return e.KtG(l.valid&&t.onSubmit())}),e.TgZ(5,"fieldset")(6,"div",3)(7,"h1"),e._UZ(8,"localize",4),e.qZA()(),e.YNc(9,ze,2,1,"div",5),e.TgZ(10,"div",6)(11,"div",7)(12,"label"),e._UZ(13,"localize",8),e.qZA(),e.TgZ(14,"input",9,10),e.NdJ("ngModelChange",function(l){return t.invite.email=l}),e.qZA(),e.YNc(16,Oe,2,0,"div",11),e.qZA()(),e.TgZ(17,"div",12),e.YNc(18,ke,1,2,"role-management",13),e.qZA(),e.TgZ(19,"div",6)(20,"div",7)(21,"div",14)(22,"input",15),e.NdJ("click",function(){return t.cancel()}),e.ALo(23,"localize"),e.qZA(),e._UZ(24,"input",16),e.ALo(25,"localize"),e.qZA()()()()()()}if(2&n){const a=e.MAs(4),i=e.MAs(15);e.xp6(9),e.Q6J("ngIf",null!=t.message),e.xp6(5),e.Q6J("ngModel",t.invite.email),e.xp6(2),e.Q6J("ngIf",(null==i.errors?null:i.errors.email)&&t.invite.email&&t.invite.email.length>0),e.xp6(2),e.Q6J("ngIf",t.invite.roles),e.xp6(4),e.Q6J("value",e.lcZ(23,7,"io.cancel")),e.xp6(2),e.Q6J("value",e.lcZ(25,9,"io.submit"))("disabled",!(a.valid&&t.roleIds.length>0))}},dependencies:[p.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.on,s.On,s.F,v.l,x.N,C.q,k,y.F],styles:[".modal-form[_ngcontent-%COMP%]   .check-block[_ngcontent-%COMP%]   .chk-area[_ngcontent-%COMP%]{margin:10px 0 0}"]});var j=r(82883);function Ee(o,n){if(1&o&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}function Ie(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19)(2,"input",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.inviteUsers())}),e.ALo(3,"localize"),e.qZA()()()}2&o&&(e.xp6(2),e.Q6J("value",e.lcZ(3,1,"accounts.inviteUser")))}function Ue(o,n){1&o&&e._UZ(0,"th")}function Re(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"td",30)(1,"a",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.edit(i))}),e.ALo(2,"localize"),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("title",e.lcZ(2,1,"account.editTooltip")))}function Le(o,n){1&o&&e._UZ(0,"localize",32)}function Qe(o,n){1&o&&e._UZ(0,"localize",33)}const Fe=function(o){return{inactive:o}};function Ye(o,n){if(1&o&&(e.TgZ(0,"tr",21),e.YNc(1,Re,3,3,"td",22),e.TgZ(2,"td",23),e._uU(3),e.qZA(),e.TgZ(4,"td",24),e._uU(5),e.qZA(),e.TgZ(6,"td",25),e._uU(7),e.qZA(),e.TgZ(8,"td",26),e._uU(9),e.qZA(),e.TgZ(10,"td",27),e._uU(11),e.qZA(),e.TgZ(12,"td",27),e.YNc(13,Le,1,0,"localize",28),e.YNc(14,Qe,1,0,"localize",29),e.qZA()()),2&o){const t=n.$implicit,a=e.oxw();e.Q6J("ngClass",e.VKq(9,Fe,t.inactive)),e.xp6(1),e.Q6J("ngIf",a.isRA),e.xp6(2),e.Oqu(t.username),e.xp6(2),e.Oqu(t.firstName),e.xp6(2),e.Oqu(t.lastName),e.xp6(2),e.Oqu(t.phoneNumber),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Q6J("ngIf",t.inactive),e.xp6(1),e.Q6J("ngIf",!t.inactive)}}function Ge(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",30)(2,"a",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.newInstance())}),e.ALo(3,"localize"),e.qZA()()()}2&o&&(e.xp6(2),e.Q6J("title",e.lcZ(3,1,"account.newTooltip")))}const Pe=function(o,n,t){return{itemsPerPage:o,currentPage:n,totalItems:t}};class E{constructor(n,t,a){this.service=n,this.modalService=t,this.res={resultSet:[],count:0,pageNumber:1,pageSize:10},this.message=null,this.isRA=!1,this.isRA=a.isRA()}ngOnInit(){this.service.page(1,10).then(n=>{this.res=n}).catch(n=>{this.error(n)})}edit(n){this.bsModalRef=this.modalService.show(w,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.oid=n.oid,this.bsModalRef.content.setExternalSystems=this.res.externalSystems;let t=this;this.bsModalRef.content.onEdit.subscribe(a=>{let i=t.res.resultSet.findIndex(l=>l.oid===a.user.oid);-1!==i&&(t.res.resultSet[i]=a.user)})}newInstance(){this.bsModalRef=this.modalService.show(w,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.oid="NEW",this.bsModalRef.content.setExternalSystems=this.res.externalSystems,this.bsModalRef.content.onEdit.subscribe(n=>{this.onPageChange(this.res.pageNumber)})}inviteUsers(){this.bsModalRef=this.modalService.show(J,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.organization=null}onPageChange(n){this.service.page(n,10).then(t=>{this.res=t}).catch(t=>{this.error(t)})}error(n){this.bsModalRef=g.qL.showErrorAsDialog(n,this.modalService)}}function He(o,n){if(1&o&&(e.TgZ(0,"div",29),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}function Ke(o,n){1&o&&(e.TgZ(0,"div",30),e._UZ(1,"localize",31),e.qZA())}function Be(o,n){1&o&&(e.TgZ(0,"div",30),e._UZ(1,"localize",32),e.qZA())}function De(o,n){1&o&&(e.TgZ(0,"div",30),e._UZ(1,"localize",33),e.qZA())}function Ve(o,n){1&o&&(e.TgZ(0,"div",30),e._UZ(1,"localize",34),e.qZA())}E.\u0275fac=function(n){return new(n||E)(e.Y36(Z),e.Y36(h.tT),e.Y36(u.e8))},E.\u0275cmp=e.Xpm({type:E,selectors:[["accounts"]],decls:31,vars:12,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],["key","accounts.title"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row",4,"ngIf"],[3,"pageChange"],[1,"list-table-wrapper"],["id","manage-accounts-table",1,"list-table","table","table-bordered","table-striped"],[4,"ngIf"],[1,"label-column"],["key","account.username"],["key","account.firstname"],["key","account.lastname"],["key","account.phonenumber"],["key","account.email"],["key","account.status"],["class","fade-ngRepeat-item",3,"ngClass",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-danger"],[1,"row"],[1,"col-md-12","text-right"],["type","submit",1,"btn","btn-primary",2,"margin-top","10px",3,"value","click"],[1,"fade-ngRepeat-item",3,"ngClass"],["class","button-column",4,"ngIf"],[1,"label-column","username-col"],[1,"label-column","firstname-col"],[1,"label-column","lastname-col"],[1,"label-column","phone-col"],[1,"label-column","email-col"],["key","account.status.inactive",4,"ngIf"],["key","account.status.active",4,"ngIf"],[1,"button-column"],[1,"fa","fa-pencil","ico-edit",3,"title","click"],["key","account.status.inactive"],["key","account.status.active"],[1,"fa","fa-plus",3,"title","click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"cgr-header"),e.TgZ(2,"div",1),e._UZ(3,"message"),e.TgZ(4,"h2"),e._UZ(5,"localize",2),e.qZA(),e.YNc(6,Ee,2,1,"div",3),e.YNc(7,Ie,4,3,"div",4),e.TgZ(8,"pagination-controls",5),e.NdJ("pageChange",function(i){return t.onPageChange(i)}),e.qZA(),e.TgZ(9,"div",6)(10,"table",7)(11,"thead")(12,"tr"),e.YNc(13,Ue,1,0,"th",8),e.TgZ(14,"th",9),e._UZ(15,"localize",10),e.qZA(),e.TgZ(16,"th",9),e._UZ(17,"localize",11),e.qZA(),e.TgZ(18,"th",9),e._UZ(19,"localize",12),e.qZA(),e.TgZ(20,"th",9),e._UZ(21,"localize",13),e.qZA(),e.TgZ(22,"th",9),e._UZ(23,"localize",14),e.qZA(),e.TgZ(24,"th",9),e._UZ(25,"localize",15),e.qZA()()(),e.TgZ(26,"tbody"),e.YNc(27,Ye,15,11,"tr",16),e.ALo(28,"paginate"),e.YNc(29,Ge,4,3,"tr",8),e.qZA()()(),e.TgZ(30,"pagination-controls",5),e.NdJ("pageChange",function(i){return t.onPageChange(i)}),e.qZA()()()),2&n&&(e.xp6(6),e.Q6J("ngIf",null!=t.message),e.xp6(1),e.Q6J("ngIf",t.isRA),e.xp6(6),e.Q6J("ngIf",t.isRA),e.xp6(14),e.Q6J("ngForOf",e.xi3(28,5,t.res.resultSet,e.kEZ(8,Pe,t.res.pageSize,t.res.pageNumber,t.res.count))),e.xp6(2),e.Q6J("ngIf",t.isRA))},dependencies:[p.mk,p.sg,p.O5,H.LS,v.l,C.q,j.C,H._s,y.F],styles:["tr.inactive[_ngcontent-%COMP%]{color:#d3d3d3}"]});class I{constructor(n,t){this.service=n,this.bsModalRef=t,this.message=null,this.email={oid:"",server:"",username:"",password:"",port:0,from:"",to:""}}ngOnInit(){this.service.getInstance().then(n=>{this.email=n}),this.onSuccess=new O.x}cancel(){this.bsModalRef.hide()}onSubmit(){this.service.apply(this.email).then(()=>{this.onSuccess.next(!0),this.bsModalRef.hide()}).catch(n=>{this.error(n)})}error(n){this.message=g.qL.getMessageFromError(n)}}I.\u0275fac=function(n){return new(n||I)(e.Y36(M),e.Y36(h.UZ))},I.\u0275cmp=e.Xpm({type:I,selectors:[["email"]],decls:68,vars:18,consts:[[1,"modal-form",3,"ngSubmit"],["form","ngForm"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading","text-center"],["key","email.modal.heading"],[1,"row-holder"],[1,"label-holder"],["key","email.server"],[1,"holder"],[1,"text"],["type","text","name","server","required","",3,"ngModel","ngModelChange"],["server","ngModel"],["class","inline-error-message",4,"ngIf"],["key","email.username"],["type","text","name","username","required","",3,"ngModel","ngModelChange"],["key","email.password"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["key","email.port"],["type","number","name","port","required","","number","",3,"ngModel","ngModelChange"],["port","ngModel"],["key","email.from"],["type","text","name","from","required","","email","",3,"ngModel","ngModelChange"],["from","ngModel"],["key","email.to"],["type","text","name","to","email","",3,"ngModel","ngModelChange"],["to","ngModel"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"value","click"],["type","submit",1,"btn","btn-primary",3,"value","disabled"],["role","alert",1,"alert","alert-danger"],[1,"inline-error-message"],["key","email.server.validation"],["key","email.port.validation"],["key","email.from.validation"],["key","email.to.validation"]],template:function(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div"),e._UZ(1,"message")(2,"loading-bar"),e.TgZ(3,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(a);const l=e.MAs(4);return e.KtG(l.valid&&t.onSubmit())}),e.YNc(5,He,2,1,"div",2),e.TgZ(6,"div",3)(7,"h1"),e._UZ(8,"localize",4),e.qZA()(),e.TgZ(9,"fieldset")(10,"div",5)(11,"div",6)(12,"label"),e._UZ(13,"localize",7),e.qZA()(),e.TgZ(14,"div",8)(15,"span",9)(16,"input",10,11),e.NdJ("ngModelChange",function(l){return t.email.server=l}),e.qZA()(),e.YNc(18,Ke,2,0,"div",12),e.qZA()(),e.TgZ(19,"div",5)(20,"div",6)(21,"label"),e._UZ(22,"localize",13),e.qZA()(),e.TgZ(23,"div",8)(24,"span",9)(25,"input",14),e.NdJ("ngModelChange",function(l){return t.email.username=l}),e.qZA()()()(),e.TgZ(26,"div",5)(27,"div",6)(28,"label"),e._UZ(29,"localize",15),e.qZA()(),e.TgZ(30,"div",8)(31,"span",9)(32,"input",16),e.NdJ("ngModelChange",function(l){return t.email.password=l}),e.qZA()()()(),e.TgZ(33,"div",5)(34,"div",6)(35,"label"),e._UZ(36,"localize",17),e.qZA()(),e.TgZ(37,"div",8)(38,"span",9)(39,"input",18,19),e.NdJ("ngModelChange",function(l){return t.email.port=l}),e.qZA()(),e.YNc(41,Be,2,0,"div",12),e.qZA()(),e.TgZ(42,"div",5)(43,"div",6)(44,"label"),e._UZ(45,"localize",20),e.qZA()(),e.TgZ(46,"div",8)(47,"span",9)(48,"input",21,22),e.NdJ("ngModelChange",function(l){return t.email.from=l}),e.qZA()(),e.YNc(50,De,2,0,"div",12),e.qZA()(),e.TgZ(51,"div",5)(52,"div",6)(53,"label"),e._UZ(54,"localize",23),e.qZA()(),e.TgZ(55,"div",8)(56,"span",9)(57,"input",24,25),e.NdJ("ngModelChange",function(l){return t.email.to=l}),e.qZA()(),e.YNc(59,Ve,2,0,"div",12),e.qZA()(),e.TgZ(60,"div",5),e._UZ(61,"div",6),e.TgZ(62,"div",8)(63,"div",26)(64,"input",27),e.NdJ("click",function(){return t.cancel()}),e.ALo(65,"localize"),e.qZA(),e._UZ(66,"input",28),e.ALo(67,"localize"),e.qZA()()()()()()}if(2&n){const a=e.MAs(4),i=e.MAs(17),l=e.MAs(40),c=e.MAs(49),f=e.MAs(58);e.xp6(5),e.Q6J("ngIf",null!=t.message),e.xp6(11),e.Q6J("ngModel",t.email.server),e.xp6(2),e.Q6J("ngIf",null==i.errors?null:i.errors.url),e.xp6(7),e.Q6J("ngModel",t.email.username),e.xp6(7),e.Q6J("ngModel",t.email.password),e.xp6(7),e.Q6J("ngModel",t.email.port),e.xp6(2),e.Q6J("ngIf",null==l.errors?null:l.errors.number),e.xp6(7),e.Q6J("ngModel",t.email.from),e.xp6(2),e.Q6J("ngIf",null==c.errors?null:c.errors.email),e.xp6(7),e.Q6J("ngModel",t.email.to),e.xp6(2),e.Q6J("ngIf",null==f.errors?null:f.errors.email),e.xp6(5),e.Q6J("value",e.lcZ(65,14,"dataset.cancel")),e.xp6(2),e.Q6J("value",e.lcZ(67,16,"dataset.submit"))("disabled",!a.valid)}},dependencies:[p.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.Q7,s.on,s.On,s.F,v.l,x.N,C.q,y.F],encapsulation:2});var W=r(63807);function $e(o,n){if(1&o&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}function je(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"label"),e._UZ(2,"convert-key-label",19),e.qZA(),e.TgZ(3,"input",20),e.NdJ("ngModelChange",function(i){const c=e.CHM(t).$implicit;return e.KtG(c.value=i)}),e.qZA()()}if(2&o){const t=n.$implicit;e.xp6(2),e.Q6J("key",t.locale),e.xp6(1),e.Q6J("ngModel",t.value)("name","label-"+t.locale)}}function We(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"label"),e._UZ(2,"convert-key-label",19),e.qZA(),e.TgZ(3,"input",21),e.NdJ("ngModelChange",function(i){const c=e.CHM(t).$implicit;return e.KtG(c.value=i)}),e.qZA()()}if(2&o){const t=n.$implicit;e.xp6(2),e.Q6J("key",t.locale),e.xp6(1),e.Q6J("ngModel",t.value)("name","contact-"+t.locale)}}class U{constructor(n,t,a){this.orgService=n,this.bsModalRef=t,this.lService=a,this.message=null,this.organization={code:"",label:this.lService.create(),contactInfo:this.lService.create()},this.isNewOrganization=!0}ngOnInit(){this.onSuccess=new O.x}cancel(){this.bsModalRef.hide()}onSubmit(){this.isNewOrganization?this.orgService.newOrganization(this.organization).then(n=>{this.onSuccess.next(n),this.bsModalRef.hide()}).catch(n=>{this.error(n)}):this.orgService.updateOrganization(this.organization).then(n=>{this.onSuccess.next(n),this.bsModalRef.hide()}).catch(n=>{this.error(n)})}error(n){this.message=g.qL.getMessageFromError(n)}}function Xe(o,n){if(1&o&&(e.TgZ(0,"div",31),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}function et(o,n){if(1&o&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.label.localizedValue)}}function tt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",33)(1,"label"),e._UZ(2,"convert-key-label",34),e.qZA(),e.TgZ(3,"input",35),e.NdJ("ngModelChange",function(i){const c=e.CHM(t).$implicit;return e.KtG(c.value=i)}),e.qZA()()}if(2&o){const t=n.$implicit;e.xp6(2),e.Q6J("key",t.locale),e.xp6(1),e.Q6J("ngModel",t.value)("name","label-"+t.locale)("required","defaultLocale"===t.locale)}}function nt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",33)(1,"label"),e._UZ(2,"convert-key-label",34),e.qZA(),e.TgZ(3,"input",36),e.NdJ("ngModelChange",function(i){const c=e.CHM(t).$implicit;return e.KtG(c.value=i)}),e.qZA()()}if(2&o){const t=n.$implicit;e.xp6(2),e.Q6J("key",t.locale),e.xp6(1),e.Q6J("ngModel",t.value)("name","contact-"+t.locale)}}function ot(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"label"),e._UZ(3,"localize",37),e.qZA()(),e.TgZ(4,"div",8)(5,"span",21)(6,"input",38),e.NdJ("focusout",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dhis2FocusOut())})("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.system.username=i)}),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.system.username)}}function it(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"input",43),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.editPassword=!i.editPassword)}),e.ALo(1,"localize"),e.qZA()}2&o&&e.Q6J("value",e.lcZ(1,1,"external.system.editPassword"))}function at(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"input",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.editPassword=!i.editPassword)}),e.ALo(1,"localize"),e.qZA()}2&o&&e.Q6J("value",e.lcZ(1,1,"external.system.editPasswordCancel"))}function lt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span",21)(1,"input",45),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.system.password=i)}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.system.password)}}function st(o,n){if(1&o&&(e.TgZ(0,"div",5)(1,"div",6)(2,"label"),e._UZ(3,"localize",39),e.qZA()(),e.TgZ(4,"div",8)(5,"div"),e.YNc(6,it,2,3,"input",40),e.YNc(7,at,2,3,"input",41),e.qZA(),e.YNc(8,lt,2,1,"span",42),e.qZA()()),2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",!t.editPassword),e.xp6(1),e.Q6J("ngIf",t.editPassword&&!t.isNew),e.xp6(1),e.Q6J("ngIf",t.editPassword)}}function ct(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"label"),e._UZ(3,"localize",46),e.qZA()(),e.TgZ(4,"div",8)(5,"span",21)(6,"input",47),e.NdJ("focusout",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dhis2FocusOut())})("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.system.url=i)}),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.system.url)}}function rt(o,n){if(1&o&&(e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"label"),e.qZA(),e.TgZ(3,"div",48),e._uU(4),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.hij(" ",t.connectMessage," ")}}function dt(o,n){1&o&&(e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"label"),e.qZA(),e.TgZ(3,"div",48),e._UZ(4,"localize",49),e.qZA()())}function pt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"label"),e._UZ(3,"localize",50),e.qZA()(),e.TgZ(4,"div",8)(5,"span",21)(6,"input",51),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.system.system=i)}),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.system.system)}}function _t(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"input",55),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.enableOAuth())}),e.ALo(1,"localize"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("value",e.lcZ(1,2,"external.system.enableOauth"))("disabled",null==t.system.url)}}function ut(o,n){1&o&&e._UZ(0,"hr",56)}function mt(o,n){1&o&&(e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"label"),e.qZA(),e.TgZ(3,"div",48),e._UZ(4,"localize",57),e.qZA()())}function gt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"input",43),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.editPassword=!i.editPassword)}),e.ALo(1,"localize"),e.qZA()}2&o&&e.Q6J("value",e.lcZ(1,1,"external.system.editPassword"))}function ht(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"input",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.editPassword=!i.editPassword)}),e.ALo(1,"localize"),e.qZA()}2&o&&e.Q6J("value",e.lcZ(1,1,"external.system.editPasswordCancel"))}function vt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span",21)(1,"input",45),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(4);return e.KtG(l.system.password=i)}),e.qZA()()}if(2&o){const t=e.oxw(4);e.xp6(1),e.Q6J("ngModel",t.system.password)}}function ft(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",5)(2,"div",6)(3,"label"),e._UZ(4,"localize",37),e.qZA()(),e.TgZ(5,"div",8)(6,"span",21)(7,"input",69),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(3);return e.KtG(l.system.username=i)}),e.qZA()()()(),e.TgZ(8,"div",5)(9,"div",6)(10,"label"),e._UZ(11,"localize",39),e.qZA()(),e.TgZ(12,"div",8)(13,"div"),e.YNc(14,gt,2,3,"input",40),e.YNc(15,ht,2,3,"input",41),e.qZA(),e.YNc(16,vt,2,1,"span",42),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw(3);e.xp6(7),e.Q6J("ngModel",t.system.username),e.xp6(7),e.Q6J("ngIf",!t.editPassword),e.xp6(1),e.Q6J("ngIf",t.editPassword&&!t.isNew),e.xp6(1),e.Q6J("ngIf",t.editPassword)}}function Zt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,ft,17,4,"ng-container",27),e.TgZ(2,"div",5)(3,"div",6)(4,"label"),e._UZ(5,"localize",52),e._uU(6,"\xa0"),e._UZ(7,"localize",58),e.qZA()(),e.TgZ(8,"div",8)(9,"span",21)(10,"input",59),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.system.oAuthServer.clientId=i)}),e.qZA()()()(),e.TgZ(11,"div",5)(12,"div",6)(13,"label"),e._UZ(14,"localize",52),e._uU(15,"\xa0"),e._UZ(16,"localize",60),e.qZA()(),e.TgZ(17,"div",8)(18,"span",21)(19,"input",61),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.system.oAuthServer.secretKey=i)}),e.qZA()()()(),e.TgZ(20,"div",5)(21,"div",6)(22,"label"),e._UZ(23,"localize",52),e._uU(24,"\xa0"),e._UZ(25,"localize",62),e.qZA()(),e.TgZ(26,"div",8)(27,"span",21)(28,"input",63),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.system.oAuthServer.profileLocation=i)}),e.qZA()()()(),e.TgZ(29,"div",5)(30,"div",6)(31,"label"),e._UZ(32,"localize",52),e._uU(33,"\xa0"),e._UZ(34,"localize",64),e.qZA()(),e.TgZ(35,"div",8)(36,"span",21)(37,"input",65),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.system.oAuthServer.tokenLocation=i)}),e.qZA()()()(),e.TgZ(38,"div",5)(39,"div",6)(40,"label"),e._UZ(41,"localize",52),e._uU(42,"\xa0"),e._UZ(43,"localize",66),e.qZA()(),e.TgZ(44,"div",8)(45,"span",21)(46,"input",67),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.system.oAuthServer.authorizationLocation=i)}),e.qZA()()()(),e.TgZ(47,"div",5),e._UZ(48,"div",6),e.TgZ(49,"div",8)(50,"input",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.removeOauth())}),e.ALo(51,"localize"),e.qZA()()()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","FhirExternalSystem"===t.system.type),e.xp6(9),e.Q6J("ngModel",t.system.oAuthServer.clientId),e.xp6(9),e.Q6J("ngModel",t.system.oAuthServer.secretKey),e.xp6(9),e.Q6J("ngModel",t.system.oAuthServer.profileLocation),e.xp6(9),e.Q6J("ngModel",t.system.oAuthServer.tokenLocation),e.xp6(9),e.Q6J("ngModel",t.system.oAuthServer.authorizationLocation),e.xp6(4),e.Q6J("value",e.lcZ(51,7,"external.system.oauth.removeOauth"))}}function xt(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",5)(2,"div",6)(3,"label"),e._UZ(4,"localize",52),e.qZA()(),e.TgZ(5,"div",8),e.YNc(6,_t,2,4,"input",53),e.YNc(7,ut,1,0,"hr",54),e.qZA()(),e.YNc(8,mt,5,0,"div",26),e.YNc(9,Zt,52,9,"div",27),e.BQk()),2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",null==t.system.oAuthServer),e.xp6(1),e.Q6J("ngIf",null!=t.system.oAuthServer),e.xp6(1),e.Q6J("ngIf",t.capabilities&&!t.capabilities.oauth),e.xp6(1),e.Q6J("ngIf",t.oauthEnabled&&null!=t.system.oAuthServer)}}function yt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"label"),e._UZ(3,"localize",70),e.qZA()(),e.TgZ(4,"div",8)(5,"input",43),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.downloadDhis2Plugin())}),e.ALo(6,"localize"),e.qZA()()()}2&o&&(e.xp6(5),e.Q6J("value",e.lcZ(6,1,"external.system.oauth.downloadDhis2Plugin")))}U.\u0275fac=function(n){return new(n||U)(e.Y36(u.Mn),e.Y36(h.UZ),e.Y36(u.oQ))},U.\u0275cmp=e.Xpm({type:U,selectors:[["organization-modal"]],decls:36,vars:12,consts:[[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,"heading","text-center"],["key","organization.heading"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"row-holder"],[1,"label-holder"],["key","organization.code"],[1,"holder"],["type","text","name","code","required","",3,"ngModel","disabled","ngModelChange"],["key","organization.name"],[1,"holder",2,"padding-top","10px"],["class","form-group",4,"ngFor","ngForOf"],["key","organization.contact"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"value","click"],["type","submit",1,"btn","btn-primary",3,"value","disabled"],["role","alert",1,"alert","alert-danger"],[1,"form-group"],[3,"key"],["type","input","required","",1,"form-control",3,"ngModel","name","ngModelChange"],["type","input",1,"form-control",3,"ngModel","name","ngModelChange"]],template:function(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div"),e._UZ(1,"message")(2,"loading-bar"),e.TgZ(3,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(a);const l=e.MAs(4);return e.KtG(l.valid&&t.onSubmit())}),e.TgZ(5,"fieldset")(6,"div",2)(7,"h1"),e._UZ(8,"localize",3),e.qZA()(),e.YNc(9,$e,2,1,"div",4),e.TgZ(10,"div",5)(11,"div",6)(12,"label"),e._UZ(13,"localize",7),e.qZA()(),e.TgZ(14,"div",8)(15,"input",9),e.NdJ("ngModelChange",function(l){return t.organization.code=l}),e.qZA()()(),e.TgZ(16,"div",5)(17,"div",6)(18,"label"),e._UZ(19,"localize",10),e.qZA()(),e.TgZ(20,"div",11),e.YNc(21,je,4,3,"div",12),e.qZA()(),e.TgZ(22,"div",5)(23,"div",6)(24,"label"),e._UZ(25,"localize",13),e.qZA()(),e.TgZ(26,"div",11),e.YNc(27,We,4,3,"div",12),e.qZA()(),e.TgZ(28,"div",5),e._UZ(29,"div",6),e.TgZ(30,"div",8)(31,"div",14)(32,"input",15),e.NdJ("click",function(){return t.cancel()}),e.ALo(33,"localize"),e.qZA(),e._UZ(34,"input",16),e.ALo(35,"localize"),e.qZA()()()()()()}if(2&n){const a=e.MAs(4);e.xp6(9),e.Q6J("ngIf",null!=t.message),e.xp6(6),e.Q6J("ngModel",t.organization.code)("disabled",!t.isNewOrganization),e.xp6(6),e.Q6J("ngForOf",t.organization.label.localeValues),e.xp6(6),e.Q6J("ngForOf",t.organization.contactInfo.localeValues),e.xp6(5),e.Q6J("value",e.lcZ(33,8,"dataset.cancel")),e.xp6(2),e.Q6J("value",e.lcZ(35,10,"dataset.submit"))("disabled",!a.valid)}},dependencies:[p.sg,p.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.On,s.F,v.l,W.j,x.N,C.q,y.F],styles:[".modal-form[_ngcontent-%COMP%]   .check-block[_ngcontent-%COMP%]   .chk-area[_ngcontent-%COMP%]{margin:10px 0 0}"]});class R{constructor(n,t,a,i){this.systemService=n,this.authService=t,this.bsModalRef=a,this.lService=i,this.message=null,this.connectMessage=null,this.editPassword=!1,this.isNew=!1,this.system={id:"",type:"DHIS2ExternalSystem",organization:"",label:this.lService.create(),description:this.lService.create(),version:"2.31",oAuthServer:null},this.organizations=[],this.oauthEnabled=!1,this.capabilities=null}ngOnInit(){this.onSuccess=new O.x}init(n,t){this.organizations=n.filter(a=>this.authService.isOrganizationRA(a.code)),null!=t?(this.system=t,this.oauthEnabled=null!=this.system.oAuthServer,this.isNew=!1):(this.isNew=!0,this.editPassword=!0)}enableOAuth(){this.oauthEnabled=!0,this.system.url.endsWith("/")||(this.system.url=this.system.url+"/"),this.message=null,this.system.oAuthServer={authorizationLocation:this.system.url+"uaa/oauth/authorize",tokenLocation:this.system.url+"uaa/oauth/token",profileLocation:this.system.url+"api/me",clientId:"georegistry",secretKey:"",serverType:"DHIS2"},"DHIS2ExternalSystem"===this.system.type&&this.getSystemCapabilities()}getSystemCapabilities(){null!=this.capabilities||"DHIS2ExternalSystem"!==this.system.type||null==this.system.username||0===this.system.username.length||this.isNew&&(null==this.system.password||0===this.system.password.length)||null==this.system.url||0===this.system.url.length||this.systemService.getSystemCapabilities(this.system).then(n=>{this.message=null,this.connectMessage=null,this.capabilities=n,n.oauth&&this.oauthEnabled&&null==this.system.oAuthServer&&(this.system.oAuthServer={authorizationLocation:this.system.url+"uaa/oauth/authorize",tokenLocation:this.system.url+"uaa/oauth/token",profileLocation:this.system.url+"api/me",clientId:"georegistry",secretKey:"",serverType:"DHIS2"})}).catch(n=>{this.connectMessage=g.qL.getMessageFromError(n)})}dhis2UrlKeyListener(n){"Enter"===n.key&&(this.capabilities=null,this.getSystemCapabilities())}dhis2FocusOut(){this.capabilities=null,this.getSystemCapabilities()}removeOauth(){this.oauthEnabled=!1,delete this.system.oAuthServer}isOauthSupported(n){return"DHIS2ExternalSystem"===n.type||"FhirExternalSystem"===n.type}downloadDhis2Plugin(){window.location.href=d.N.apiUrl+"/api/external-system/download-dhis2-plugin"}cancel(){this.bsModalRef.hide()}onSubmit(){this.systemService.applyExternalSystem(this.system).then(n=>{this.onSuccess.next(n),this.bsModalRef.hide()}).catch(n=>{this.error(n)})}error(n){document.querySelector("modal-container.modal").scroll({top:0,left:0,behavior:"smooth"}),this.message=g.qL.getMessageFromError(n)}}R.\u0275fac=function(n){return new(n||R)(e.Y36(u.iu),e.Y36(u.e8),e.Y36(h.UZ),e.Y36(u.oQ))},R.\u0275cmp=e.Xpm({type:R,selectors:[["external-system-modal"]],decls:69,vars:25,consts:[[1,"modal-form",3,"ngSubmit"],["form","ngForm"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading","text-center"],["key","external.system.heading"],[1,"row-holder"],[1,"label-holder"],["key","external.system.type"],[1,"holder"],[1,"select"],["type","text","name","type","required","",3,"ngModel","disabled","ngModelChange"],["value","DHIS2ExternalSystem"],["key","external.system.dhis2"],["value","RevealExternalSystem"],["key","external.system.reveal"],["value","FhirExternalSystem"],["key","external.system.fhir"],["key","external.system.organization"],["type","text","name","organization","required","",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["key","external.system.id"],[1,"text"],["type","text","name","id","required","",3,"ngModel","disabled","ngModelChange"],["key","external.system.label"],["class","form-group",4,"ngFor","ngForOf"],["key","external.system.description"],["class","row-holder",4,"ngIf"],[4,"ngIf"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"value","click"],["type","submit",1,"btn","btn-primary",3,"value","disabled"],["role","alert",1,"alert","alert-danger"],[3,"value"],[1,"form-group"],[3,"key"],["type","input",1,"form-control",3,"ngModel","name","required","ngModelChange"],["type","input",1,"form-control",3,"ngModel","name","ngModelChange"],["key","external.system.username"],["type","text","name","username","required","",3,"ngModel","focusout","ngModelChange"],["key","external.system.password"],["type","button","class","btn btn-primary",3,"value","click",4,"ngIf"],["style","margin-bottom:5px;","type","button","class","btn btn-default",3,"value","click",4,"ngIf"],["class","text",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"value","click"],["type","button",1,"btn","btn-default",2,"margin-bottom","5px",3,"value","click"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["key","external.system.url"],["type","text","name","url","required","",3,"ngModel","focusout","ngModelChange"],["role","alert",1,"alert","alert-danger","holder",2,"padding-top","18px"],["key","external.system.versionNotSupported"],["key","external.system.system"],["type","text","name","system","required","",3,"ngModel","ngModelChange"],["key","external.system.oauthHeader"],["type","button","class","btn btn-primary",3,"value","disabled","click",4,"ngIf"],["style","border-color:lightgrey;",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"value","disabled","click"],[2,"border-color","lightgrey"],["key","external.system.oauthNotSupported"],["key","external.system.oauth.clientId"],["type","text","name","clientId","required","",3,"ngModel","ngModelChange"],["key","external.system.oauth.secretKey"],["type","text","name","secretKey","required","",3,"ngModel","ngModelChange"],["key","external.system.oauth.profileLocation"],["type","text","name","profileLocation","required","",3,"ngModel","ngModelChange"],["key","external.system.oauth.tokenLocation"],["type","text","name","tokenLocation","required","",3,"ngModel","ngModelChange"],["key","external.system.oauth.authorizationLocation"],["type","text","name","authorizationLocation","required","",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-danger",3,"value","click"],["type","text","name","username","required","",3,"ngModel","ngModelChange"],["key","external.system.oauth.downloadDhis2PluginHeader"]],template:function(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div"),e._UZ(1,"loading-bar"),e.TgZ(2,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(a);const l=e.MAs(3);return e.KtG(l.valid&&t.onSubmit())}),e.TgZ(4,"fieldset"),e.YNc(5,Xe,2,1,"div",2),e.TgZ(6,"div",3)(7,"h1"),e._UZ(8,"localize",4),e.qZA()(),e.TgZ(9,"div",5)(10,"div",6)(11,"label"),e._UZ(12,"localize",7),e.qZA()(),e.TgZ(13,"div",8)(14,"span",9)(15,"select",10),e.NdJ("ngModelChange",function(l){return t.system.type=l}),e._UZ(16,"option"),e.TgZ(17,"option",11),e._UZ(18,"localize",12),e.qZA(),e.TgZ(19,"option",13),e._UZ(20,"localize",14),e.qZA(),e.TgZ(21,"option",15),e._UZ(22,"localize",16),e.qZA()()()()(),e.TgZ(23,"div",5)(24,"div",6)(25,"label"),e._UZ(26,"localize",17),e.qZA()(),e.TgZ(27,"div",8)(28,"span",9)(29,"select",18),e.NdJ("ngModelChange",function(l){return t.system.organization=l}),e._UZ(30,"option"),e.YNc(31,et,2,2,"option",19),e.qZA()()()(),e.TgZ(32,"div",5)(33,"div",6)(34,"label"),e._UZ(35,"localize",20),e.qZA()(),e.TgZ(36,"div",8)(37,"span",21)(38,"input",22),e.NdJ("ngModelChange",function(l){return t.system.id=l}),e.qZA()()()(),e.TgZ(39,"div",5)(40,"div",6)(41,"label"),e._UZ(42,"localize",23),e.qZA()(),e.TgZ(43,"div",8)(44,"span",21),e.YNc(45,tt,4,4,"div",24),e.qZA()()(),e.TgZ(46,"div",5)(47,"div",6)(48,"label"),e._UZ(49,"localize",25),e.qZA()(),e.TgZ(50,"div",8)(51,"span",21),e.YNc(52,nt,4,3,"div",24),e.qZA()()(),e.YNc(53,ot,7,1,"div",26),e.YNc(54,st,9,3,"div",26),e.YNc(55,ct,7,1,"div",26),e.YNc(56,rt,5,1,"div",26),e.YNc(57,dt,5,0,"div",26),e.YNc(58,pt,7,1,"div",26),e.YNc(59,xt,10,4,"ng-container",27),e.YNc(60,yt,7,3,"div",26),e.TgZ(61,"div",5),e._UZ(62,"div",6),e.TgZ(63,"div",8)(64,"div",28)(65,"input",29),e.NdJ("click",function(){return t.cancel()}),e.ALo(66,"localize"),e.qZA(),e._UZ(67,"input",30),e.ALo(68,"localize"),e.qZA()()()()()()}if(2&n){const a=e.MAs(3);e.xp6(5),e.Q6J("ngIf",null!=t.message),e.xp6(10),e.Q6J("ngModel",t.system.type)("disabled",null!=t.system.oid),e.xp6(14),e.Q6J("ngModel",t.system.organization)("disabled",null!=t.system.oid),e.xp6(2),e.Q6J("ngForOf",t.organizations),e.xp6(7),e.Q6J("ngModel",t.system.id)("disabled",null!=t.system.oid),e.xp6(7),e.Q6J("ngForOf",t.system.label.localeValues),e.xp6(7),e.Q6J("ngForOf",t.system.description.localeValues),e.xp6(1),e.Q6J("ngIf","DHIS2ExternalSystem"===t.system.type),e.xp6(1),e.Q6J("ngIf","DHIS2ExternalSystem"===t.system.type),e.xp6(1),e.Q6J("ngIf","DHIS2ExternalSystem"===t.system.type||"FhirExternalSystem"===t.system.type),e.xp6(1),e.Q6J("ngIf",null!=t.connectMessage),e.xp6(1),e.Q6J("ngIf",t.capabilities&&!t.capabilities.supportedVersion),e.xp6(1),e.Q6J("ngIf","FhirExternalSystem"===t.system.type),e.xp6(1),e.Q6J("ngIf",t.isOauthSupported(t.system)),e.xp6(1),e.Q6J("ngIf","DHIS2ExternalSystem"===t.system.type),e.xp6(5),e.Q6J("value",e.lcZ(66,21,"dataset.cancel")),e.xp6(2),e.Q6J("value",e.lcZ(68,23,"dataset.submit"))("disabled",!a.valid||null!=t.connectMessage)}},dependencies:[p.sg,p.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.Q7,s.On,s.F,v.l,W.j,x.N,y.F],styles:[".modal-form[_ngcontent-%COMP%]   .check-block[_ngcontent-%COMP%]   .chk-area[_ngcontent-%COMP%]{margin:10px 0 0}"]});class Ct{}var oe=r(3722);function At(o,n){1&o&&e._UZ(0,"localize",16)}function Tt(o,n){1&o&&e._UZ(0,"localize",17)}function bt(o,n){if(1&o&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t.key),e.xp6(1),e.Oqu(t.label)}}function Mt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"label"),e._UZ(3,"localize",18),e.qZA()(),e.TgZ(4,"div",10)(5,"select",19),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.locale.language.code=i)}),e.YNc(6,bt,2,2,"option",20),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(5),e.Q6J("ngModel",t.locale.language.code),e.xp6(1),e.Q6J("ngForOf",t.allLocaleInfo.languages)}}function St(o,n){if(1&o&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t.key),e.xp6(1),e.Oqu(t.label)}}function wt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"label"),e._UZ(3,"localize",22),e.qZA()(),e.TgZ(4,"div",10)(5,"select",23),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.locale.country.code=i)}),e.YNc(6,St,2,2,"option",20),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(5),e.Q6J("ngModel",t.locale.country.code),e.xp6(1),e.Q6J("ngForOf",t.allLocaleInfo.countries)}}function Jt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",27)(1,"label"),e._UZ(2,"convert-key-label",28),e.qZA(),e.TgZ(3,"input",29),e.NdJ("ngModelChange",function(i){const c=e.CHM(t).$implicit;return e.KtG(c.value=i)}),e.qZA()()}if(2&o){const t=n.$implicit;e.xp6(2),e.Q6J("key",t.locale),e.xp6(1),e.Q6J("ngModel",t.value)("name","label-"+t.locale)}}function qt(o,n){if(1&o&&(e.TgZ(0,"div",8)(1,"div",9)(2,"label"),e._UZ(3,"localize",24),e.qZA()(),e.TgZ(4,"div",25),e.YNc(5,Jt,4,3,"div",26),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",t.locale.label.localeValues)}}function Nt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"fieldset")(1,"div",4)(2,"h1"),e.YNc(3,At,1,0,"localize",5),e.YNc(4,Tt,1,0,"localize",6),e.qZA()(),e.YNc(5,Mt,7,2,"div",7),e.YNc(6,wt,7,2,"div",7),e.YNc(7,qt,6,1,"div",7),e.TgZ(8,"div",8),e._UZ(9,"div",9),e.TgZ(10,"div",10)(11,"div",11)(12,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancel())}),e.TgZ(13,"span"),e._UZ(14,"localize",13),e.qZA()(),e.TgZ(15,"button",14)(16,"span"),e._UZ(17,"localize",15),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.isNew),e.xp6(1),e.Q6J("ngIf",!t.isNew),e.xp6(1),e.Q6J("ngIf",t.locale.language&&"defaultLocale"!==t.locale.toString),e.xp6(1),e.Q6J("ngIf",t.locale.country&&"defaultLocale"!==t.locale.toString),e.xp6(1),e.Q6J("ngIf",t.locale.label)}}class L{constructor(n,t,a,i){this.bsModalRef=n,this.localizationManagerService=t,this.modalService=a,this.lService=i,this.isNew=!0,this.locale={label:i.create(),toString:"",tag:"",isDefaultLocale:!1,language:{label:"",code:""},country:{label:"",code:""},variant:{label:"",code:""}}}ngOnInit(){this.allLocaleInfo=new Ct,this.localizationManagerService.getNewLocaleInfo().then(n=>{this.allLocaleInfo=n}).catch(n=>{this.bsModalRef.hide(),this.error(n)}),this.onSuccess=new O.x}submit(){this.isNew?this.localizationManagerService.installLocale(this.locale).then(n=>{this.onSuccess.next(n),this.bsModalRef.hide()}).catch(n=>{this.bsModalRef.hide(),this.error(n)}):this.localizationManagerService.editLocale(this.locale).then(n=>{this.onSuccess.next(n),this.bsModalRef.hide()}).catch(n=>{this.bsModalRef.hide(),this.error(n)})}cancel(){this.bsModalRef.hide()}error(n){this.bsModalRef=g.qL.showErrorAsDialog(n,this.modalService)}}L.\u0275fac=function(n){return new(n||L)(e.Y36(h.UZ),e.Y36(T),e.Y36(h.tT),e.Y36(oe.o))},L.\u0275cmp=e.Xpm({type:L,selectors:[["locale-modal"]],inputs:{locale:"locale",isNew:"isNew"},decls:6,vars:1,consts:[["name","new-locale-form",1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"heading","text-center"],["key","new-locale.title",4,"ngIf"],["key","edit-locale.title",4,"ngIf"],["class","row-holder",4,"ngIf"],[1,"row-holder"],[1,"label-holder"],[1,"holder"],[1,"button-holder"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",3,"click"],["key","new-locale.cancel"],["type","submit","role","button","aria-disabled","false",1,"btn","btn-primary"],["key","new-locale.submit"],["key","new-locale.title"],["key","edit-locale.title"],["key","new-locale.language"],["name","new-locale-language",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["key","new-locale.country"],["name","new-locale-country",3,"ngModel","ngModelChange"],["key","settings.localization.locale.displayLabel"],[1,"holder",2,"padding-top","10px"],["class","form-group",4,"ngFor","ngForOf"],[1,"form-group"],[3,"key"],["type","input","required","",1,"form-control",3,"ngModel","name","ngModelChange"]],template:function(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div"),e._UZ(1,"loading-bar"),e.TgZ(2,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(a);const l=e.MAs(3);return e.KtG(l.valid&&t.submit())}),e.TgZ(4,"div",2),e.YNc(5,Nt,18,5,"fieldset",3),e.qZA()()()}2&n&&(e.xp6(5),e.Q6J("ngIf",t.locale))},dependencies:[p.sg,p.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.Q7,s.On,s.F,v.l,W.j,x.N],encapsulation:2});class K{constructor(n,t){this.bsModalRef=n,this.localizeService=t,this.message=this.localizeService.decode("error.modal.default.message")}}K.\u0275fac=function(n){return new(n||K)(e.Y36(h.UZ),e.Y36(oe.o))},K.\u0275cmp=e.Xpm({type:K,selectors:[["error-modal"]],inputs:{message:"message"},decls:11,vars:1,consts:[[1,"modal-body"],[1,"modal-form"],[1,"row"],[1,"col-md-12","text-center"],[2,"width","100%","height","500px"],[1,"col-md-12"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.close"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"textarea",4),e._uU(5),e.qZA()()(),e.TgZ(6,"div",2)(7,"div",5)(8,"div",6)(9,"button",7),e.NdJ("click",function(){return t.bsModalRef.hide()}),e._UZ(10,"localize",8),e.qZA()()()()()()),2&n&&(e.xp6(5),e.Oqu(t.message))},dependencies:[s._Y,s.JL,s.F,v.l],styles:[".modal-body.text-center[_ngcontent-%COMP%]{background:white;border:solid 1px red}"]});const zt=["myFile"];class B{constructor(n,t,a,i){this.bsModalRef=n,this.localizationService=t,this.eventService=a,this.modalService=i}ngOnInit(){this.uploader=new N.bA({queueLimit:1,removeAfterUpload:!0,url:d.N.apiUrl+"/api/localization/importSpreadsheet"}),this.uploader.onBuildItemForm=(t,a)=>{},this.uploader.onBeforeUploadItem=t=>{this.eventService.start()},this.uploader.onCompleteItem=(t,a,i,l)=>{this.fileRef.nativeElement.value="",this.eventService.complete()},this.uploader.onSuccessItem=(t,a,i,l)=>{this.bsModalRef.hide()},this.uploader.onErrorItem=(t,a,i,l)=>{let c=JSON.parse(a);if(c instanceof _.UA&&401===c.status)return null;let q=c.localizedMessage.replaceAll("\\n","\n"),P=this.modalService.show(K,{backdrop:!0,class:"error-white-space-pre"});return P.content.message=q,P}}submit(){null!=this.uploader.queue&&this.uploader.queue.length>0?this.uploader.uploadAll():this.error({message:this.localizationService.decode("io.missing.file"),error:{}})}cancel(){this.bsModalRef.hide()}error(n){g.qL.showErrorAsDialog(n,this.modalService)}}B.\u0275fac=function(n){return new(n||B)(e.Y36(h.UZ),e.Y36(u.oQ),e.Y36(u.PO),e.Y36(h.tT))},B.\u0275cmp=e.Xpm({type:B,selectors:[["import-localization-modal"]],viewQuery:function(n,t){if(1&n&&e.Gf(zt,5),2&n){let a;e.iGM(a=e.CRH())&&(t.fileRef=a.first)}},decls:22,vars:1,consts:[["name","new-locale-form",1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-body"],[1,"heading","text-center"],["key","localization-manager.importButton"],[1,"row"],[1,"col-md-12"],["name","file","type","file","ng2FileSelect","","accept",".xls, .xlsx","required","",1,"ghost-input",3,"uploader"],["myFile",""],[1,"button-holder"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",3,"click"],["key","new-locale.cancel"],["type","submit","role","button","aria-disabled","false",1,"btn","btn-primary"],["key","new-locale.submit"]],template:function(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div"),e._UZ(1,"loading-bar"),e.TgZ(2,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(a);const l=e.MAs(3);return e.KtG(l.valid&&t.submit())}),e.TgZ(4,"div",2)(5,"fieldset")(6,"div",3)(7,"h1"),e._UZ(8,"localize",4),e.qZA()(),e.TgZ(9,"div",5)(10,"div",6),e._UZ(11,"input",7,8),e.qZA()(),e.TgZ(13,"div",5)(14,"div",6)(15,"div",9)(16,"button",10),e.NdJ("click",function(){return t.cancel()}),e.TgZ(17,"span"),e._UZ(18,"localize",11),e.qZA()(),e.TgZ(19,"button",12)(20,"span"),e._UZ(21,"localize",13),e.qZA()()()()()()()()()}2&n&&(e.xp6(11),e.Q6J("uploader",t.uploader))},dependencies:[s._Y,s.JL,s.F,N.C6,v.l,x.N],encapsulation:2});var X=r(10835),Ot=r(69661),ie=r(32329);const kt=["uploadEl"];function Et(o,n){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}function It(o,n){if(1&o&&e._UZ(0,"img",19),2&o){const t=e.oxw();e.Q6J("src",t.context+"api/asset/view?oid="+t.icon.oid,e.LSH)}}function Ut(o,n){if(1&o&&e._UZ(0,"img",19),2&o){const t=e.oxw();e.Q6J("src",t.file,e.LSH)}}const Rt=function(o){return{"drop-active":o}};class Q{constructor(n,t){this.eventService=n,this.bsModalRef=t,this.message=null,this.dropActive=!1,this.context=ie.Z.getApiUrl()}ngOnInit(){this.onSuccess=new O.x,this.uploader=new N.bA({autoUpload:!1,queueLimit:1,removeAfterUpload:!0,url:d.N.apiUrl+"/api/asset/apply"}),this.uploader.onBeforeUploadItem=t=>{this.eventService.start()},this.uploader.onCompleteItem=(t,a,i,l)=>{this.eventService.complete()},this.uploader.onSuccessItem=(t,a,i,l)=>{this.onSuccess.next(t),this.bsModalRef.hide()},this.uploader.onErrorItem=(t,a,i,l)=>{this.error(a)},this.uploader.onBuildItemForm=(t,a)=>{a.append("oid",this.icon.oid)}}ngAfterViewInit(){let n=this;this.uploader.onAfterAddingFile=t=>{this.uploadElRef.nativeElement.value="";let a=new FileReader;a.onload=function(i){n.file=a.result},a.readAsDataURL(t._file)}}fileOver(n){this.dropActive=n}cancel(){this.bsModalRef.hide()}onSubmit(){null==this.file?this.bsModalRef.hide():this.uploader.uploadAll()}clear(){this.file=null,this.uploader.clearQueue()}error(n){this.message=g.qL.getMessageFromError(n)}}function Lt(o,n){if(1&o&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}function Qt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.onClickRemove(i))}),e.ALo(1,"localize"),e.qZA()}2&o&&e.Q6J("title",e.lcZ(1,1,"system.image.removeTooltip"))}function Ft(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr",9)(1,"td",10)(2,"span")(3,"a",11),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.edit(l))}),e.ALo(4,"localize"),e.qZA(),e.YNc(5,Qt,2,3,"a",12),e.qZA()(),e.TgZ(6,"td",3),e._uU(7),e.qZA(),e.TgZ(8,"td",13),e._UZ(9,"img",14),e.qZA()()}if(2&o){const t=n.$implicit,a=e.oxw();e.xp6(3),e.Q6J("title",e.lcZ(4,4,"system.image.editTooltip")),e.xp6(2),e.Q6J("ngIf",t.custom),e.xp6(2),e.Oqu(t.label),e.xp6(2),e.Q6J("src",a.context+"/api/asset/view?oid="+t.oid+"&random="+a.random,e.LSH)}}function Yt(o,n){1&o&&(e.TgZ(0,"div"),e._UZ(1,"localize",16),e.qZA())}Q.\u0275fac=function(n){return new(n||Q)(e.Y36(u.PO),e.Y36(h.UZ))},Q.\u0275cmp=e.Xpm({type:Q,selectors:[["system-logo"]],viewQuery:function(n,t){if(1&n&&e.Gf(kt,5),2&n){let a;e.iGM(a=e.CRH())&&(t.uploadElRef=a.first)}},decls:28,vars:14,consts:[[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],["class","alert alert-danger","role","alert",4,"ngIf"],["style","max-width: 300px; max-height: 300px;","class","thumb",3,"src",4,"ngIf"],["ng2FileDrop","",1,"drop-box-container",3,"ngClass","uploader","fileOver","click"],[1,"drop-box"],[1,"inner-drop-box"],[1,"fa","fa-cloud-upload"],[1,"upload-text"],["key","system.image.uploadText"],["type","file","ng2FileSelect","","id","uploader-input",2,"display","none",3,"uploader"],["uploadEl","","fileInput",""],[1,"button-holder","text-right",2,"margin-top","20px"],["type","button",1,"btn","btn-default",3,"value","click"],["type","submit",1,"btn","btn-primary",3,"value","disabled"],["role","alert",1,"alert","alert-danger"],[1,"thumb",2,"max-width","300px","max-height","300px",3,"src"]],template:function(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"message")(4,"loading-bar"),e.TgZ(5,"form",3,4),e.NdJ("ngSubmit",function(){e.CHM(a);const l=e.MAs(6);return e.KtG(l.valid&&t.onSubmit())}),e.YNc(7,Et,2,1,"div",5),e.TgZ(8,"fieldset")(9,"div"),e.YNc(10,It,1,1,"img",6),e.YNc(11,Ut,1,1,"img",6),e.qZA(),e.TgZ(12,"div",7),e.NdJ("fileOver",function(l){return t.fileOver(l)})("click",function(){e.CHM(a);const l=e.MAs(20);return e.KtG(l.click())}),e.TgZ(13,"div",8)(14,"div",9)(15,"i",10)(16,"p",11),e._UZ(17,"localize",12),e.qZA()()()(),e._UZ(18,"input",13,14),e.qZA(),e.TgZ(21,"div",1)(22,"div",2)(23,"div",15)(24,"input",16),e.NdJ("click",function(){return t.cancel()}),e.ALo(25,"localize"),e.qZA(),e.TgZ(26,"input",17),e.NdJ("disabled",function(){e.CHM(a);const l=e.MAs(6);return e.KtG(l.invalid)}),e.ALo(27,"localize"),e.qZA()()()()()()()()()}2&n&&(e.xp6(7),e.Q6J("ngIf",null!=t.message),e.xp6(3),e.Q6J("ngIf",!t.file&&t.icon),e.xp6(1),e.Q6J("ngIf",t.file),e.xp6(1),e.Q6J("ngClass",e.VKq(12,Rt,t.dropActive))("uploader",t.uploader),e.xp6(6),e.Q6J("uploader",t.uploader),e.xp6(6),e.Q6J("value",e.lcZ(25,8,"dataset.cancel")),e.xp6(2),e.Q6J("value",e.lcZ(27,10,"category.icon.ok")))},dependencies:[p.mk,p.O5,s._Y,s.JL,s.F,N.GN,N.C6,v.l,x.N,C.q,y.F],encapsulation:2});class F{constructor(n,t,a,i,l){this.router=n,this.service=t,this.modalService=a,this.localizeService=i,this.changeDetectorRef=l,this.message=null,this.random=0,this.context=ie.Z.getApiUrl()}ngOnInit(){this.getIcons()}onClickRemove(n){this.bsModalRef=this.modalService.show(g.z5,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("system.image.removeContent"),this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.onConfirm.subscribe(t=>{this.remove(n)})}getIcons(){this.service.getIcons().then(n=>{var t=n.icons.filter(function(a){return"banner"!=a.oid});this.icons=t}).catch(n=>{this.error(n)})}edit(n){let t=this.modalService.show(Q,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});t.content.icon=n,t.content.onSuccess.subscribe(a=>{this.icons.forEach(i=>{this.random=Math.random(),i.oid=i.oid}),this.changeDetectorRef.detectChanges()})}remove(n){this.service.remove(n.oid).then(t=>{n.custom=!1}).catch(t=>{this.error(t)})}error(n){this.message=g.qL.getMessageFromError(n)}}function Gt(o,n){1&o&&e._UZ(0,"div",6)}function Pt(o,n){if(1&o&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}function Ht(o,n){if(1&o&&(e.TgZ(0,"tr",32)(1,"td",33),e._uU(2),e.qZA(),e.TgZ(3,"td",34),e._uU(4),e.qZA(),e.TgZ(5,"td",35),e._uU(6),e.qZA(),e.TgZ(7,"td",36),e._uU(8),e.qZA(),e.TgZ(9,"td",37),e._uU(10),e.qZA()()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t.username),e.xp6(2),e.Oqu(t.firstName),e.xp6(2),e.Oqu(t.lastName),e.xp6(2),e.Oqu(t.phoneNumber),e.xp6(2),e.Oqu(t.email)}}function Kt(o,n){1&o&&e._UZ(0,"th")}function Bt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"td",46)(1,"a",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw(3);return e.KtG(l.onEditOrganization(i))}),e.ALo(2,"localize"),e.qZA(),e.TgZ(3,"a",48),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw(3);return e.KtG(l.onRemoveOrganization(i.code,i.code))}),e.ALo(4,"localize"),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("title",e.lcZ(2,2,"account.editTooltip")),e.xp6(2),e.Q6J("title",e.lcZ(4,4,"account.removeTooltip")))}function Dt(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Bt,5,6,"td",45),e.TgZ(2,"td",17),e._uU(3),e.qZA(),e.TgZ(4,"td",17),e._uU(5),e.qZA(),e.TgZ(6,"td",17),e._uU(7),e.qZA()()),2&o){const t=n.$implicit,a=e.oxw(3);e.xp6(1),e.Q6J("ngIf",a.isSRA),e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.label.localizedValue),e.xp6(2),e.Oqu(t.contactInfo.localizedValue)}}function Vt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",46)(2,"a",49),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.newOrganization())}),e.ALo(3,"localize"),e.qZA()()()}2&o&&(e.xp6(2),e.Q6J("title",e.lcZ(3,1,"account.newTooltip")))}function $t(o,n){if(1&o&&(e.TgZ(0,"div",9)(1,"div",10)(2,"h3"),e._UZ(3,"localize",38),e.qZA(),e.TgZ(4,"div",12)(5,"div",15)(6,"table",39)(7,"thead")(8,"tr"),e.YNc(9,Kt,1,0,"th",40),e.TgZ(10,"th"),e._UZ(11,"localize",41),e.qZA(),e.TgZ(12,"th"),e._UZ(13,"localize",42),e.qZA(),e.TgZ(14,"th"),e._UZ(15,"localize",43),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,Dt,8,4,"tr",44),e.YNc(18,Vt,4,3,"tr",40),e.qZA()()()()()()),2&o){const t=e.oxw(2);e.xp6(9),e.Q6J("ngIf",t.isSRA),e.xp6(8),e.Q6J("ngForOf",t.organizations),e.xp6(1),e.Q6J("ngIf",t.isSRA)}}function jt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"input",50),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.inviteUsers())}),e.ALo(2,"localize"),e.qZA()()}2&o&&(e.xp6(1),e.Q6J("value",e.lcZ(2,1,"accounts.inviteUser")))}function Wt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a",59),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,l=e.oxw(3);return e.KtG(l.onRemoveLocale(i))}),e.qZA()}}function Xt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"td",46)(1,"a",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw(3);return e.KtG(l.onEditLocale(i))}),e.qZA(),e.YNc(2,Wt,1,0,"a",58),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",!t.isDefaultLocale)}}function en(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Xt,3,1,"td",45),e.TgZ(2,"td",17),e._uU(3),e.qZA(),e.TgZ(4,"td",17),e._uU(5),e.qZA(),e.TgZ(6,"td",17),e._uU(7),e.qZA()()),2&o){const t=n.$implicit,a=e.oxw(3);e.xp6(1),e.Q6J("ngIf",a.isSRA),e.xp6(2),e.Oqu(t.label.localizedValue),e.xp6(2),e.Oqu(t.language.label),e.xp6(2),e.Oqu(t.country.label)}}function tn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"h3"),e._UZ(3,"localize",51),e.qZA(),e.TgZ(4,"div",12)(5,"div",15)(6,"table",52)(7,"thead")(8,"tr"),e._UZ(9,"th"),e.TgZ(10,"th"),e._UZ(11,"localize",53),e.qZA(),e.TgZ(12,"th"),e._UZ(13,"localize",54),e.qZA(),e.TgZ(14,"th"),e._UZ(15,"localize",55),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,en,8,4,"tr",44),e.TgZ(18,"tr")(19,"td",46)(20,"a",49),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.newLocalization())}),e.ALo(21,"localize"),e.qZA()()()()()(),e.TgZ(22,"div",9)(23,"div",10)(24,"input",56),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.exportLocalization())}),e.ALo(25,"localize"),e.qZA()()(),e.TgZ(26,"div",9)(27,"div",10)(28,"input",50),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.importLocalization())}),e.ALo(29,"localize"),e.qZA()()()()()()}if(2&o){const t=e.oxw(2);e.xp6(17),e.Q6J("ngForOf",t.installedLocales),e.xp6(3),e.Q6J("title",e.lcZ(21,4,"account.newTooltip")),e.xp6(4),e.Q6J("value",e.lcZ(25,6,"localization-manager.exportButton")),e.xp6(4),e.Q6J("value",e.lcZ(29,8,"localization-manager.importButton"))}}function nn(o,n){1&o&&(e.TgZ(0,"div",9)(1,"div",10)(2,"h3"),e._UZ(3,"localize",60),e.qZA(),e.TgZ(4,"div",12),e._UZ(5,"system-logos"),e.qZA()()())}function on(o,n){1&o&&(e.TgZ(0,"i",64),e._UZ(1,"localize",65),e.qZA())}function an(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",61)(1,"div",10)(2,"h3"),e._UZ(3,"localize",62),e.qZA(),e.TgZ(4,"div",12)(5,"input",56),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.configureEmail())}),e.ALo(6,"localize"),e.qZA(),e.YNc(7,on,2,0,"i",63),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(5),e.Q6J("value",e.lcZ(6,2,"settings.email.configure")),e.xp6(2),e.Q6J("ngIf",t.settings.email.isConfigured)}}function ln(o,n){1&o&&e._UZ(0,"localize",73)}function sn(o,n){1&o&&e._UZ(0,"localize",74)}function cn(o,n){1&o&&e._UZ(0,"localize",75)}function rn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",46)(2,"a",47),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onEditSystem(l))}),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"a",48),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onRemoveSystem(l))}),e.ALo(5,"localize"),e.qZA()(),e.TgZ(6,"td",17),e.YNc(7,ln,1,0,"localize",70),e.YNc(8,sn,1,0,"localize",71),e.YNc(9,cn,1,0,"localize",72),e.qZA(),e.TgZ(10,"td",17),e._uU(11),e.qZA(),e.TgZ(12,"td",17),e._uU(13),e.qZA()()}if(2&o){const t=n.$implicit;e.xp6(2),e.Q6J("title",e.lcZ(3,7,"account.editTooltip")),e.xp6(2),e.Q6J("title",e.lcZ(5,9,"account.removeTooltip")),e.xp6(3),e.Q6J("ngIf","DHIS2ExternalSystem"===t.type),e.xp6(1),e.Q6J("ngIf","RevealExternalSystem"===t.type),e.xp6(1),e.Q6J("ngIf","FhirExternalSystem"===t.type),e.xp6(2),e.Oqu(t.label.localizedValue),e.xp6(2),e.Oqu(t.description.localizedValue)}}F.\u0275fac=function(n){return new(n||F)(e.Y36(z.F0),e.Y36(b),e.Y36(h.tT),e.Y36(u.oQ),e.Y36(e.sBO))},F.\u0275cmp=e.Xpm({type:F,selectors:[["system-logos"]],decls:14,vars:3,consts:[["class","alert alert-danger","role","alert",4,"ngIf"],[1,"list-table-wrapper"],["id","manage-icons-table",1,"list-table","table","table-bordered","table-striped"],[1,"label-column"],["key","system.image.label"],["key","system.image.preview"],["class","fade-ngRepeat-item",4,"ngFor","ngForOf"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"fade-ngRepeat-item"],[1,"button-column"],[1,"fa","fa-pencil","ico-edit",3,"title","click"],["class","fa fa-trash-o ico-remove",3,"title","click",4,"ngIf"],[1,"icon-thumbnail-column"],["alt","Icon",1,"thumb",2,"width","42px","height","42px",3,"src"],[1,"fa","fa-trash-o","ico-remove",3,"title","click"],["key","dataset.loadingData"]],template:function(n,t){1&n&&(e.TgZ(0,"div"),e.YNc(1,Lt,2,1,"div",0),e.TgZ(2,"div",1)(3,"table",2)(4,"thead")(5,"tr"),e._UZ(6,"th"),e.TgZ(7,"th",3),e._UZ(8,"localize",4),e.qZA(),e.TgZ(9,"th",3),e._UZ(10,"localize",5),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,Ft,10,6,"tr",6),e.qZA()()(),e.YNc(13,Yt,2,0,"div",7),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",null!=t.message),e.xp6(11),e.Q6J("ngForOf",t.icons),e.xp6(1),e.Q6J("ngIf",null===t.icons))},dependencies:[p.sg,p.O5,v.l,y.F],encapsulation:2});const ae=function(o,n,t){return{itemsPerPage:o,currentPage:n,totalItems:t}};function dn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"h3"),e._UZ(3,"localize",66),e.qZA(),e.TgZ(4,"div",12)(5,"div",15)(6,"table",16)(7,"thead")(8,"tr"),e._UZ(9,"th"),e.TgZ(10,"th"),e._UZ(11,"localize",67),e.qZA(),e.TgZ(12,"th"),e._UZ(13,"localize",68),e.qZA(),e.TgZ(14,"th"),e._UZ(15,"localize",69),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,rn,14,11,"tr",44),e.ALo(18,"paginate"),e.TgZ(19,"tr")(20,"td",46)(21,"a",49),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.newSystem())}),e.ALo(22,"localize"),e.qZA()()()()(),e.TgZ(23,"pagination-controls",24),e.NdJ("pageChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSystemPageChange(i))}),e.qZA()()()()()}if(2&o){const t=e.oxw(2);e.xp6(17),e.Q6J("ngForOf",e.xi3(18,2,t.systems.resultSet,e.kEZ(7,ae,t.systems.pageSize,t.systems.pageNumber,t.systems.count))),e.xp6(4),e.Q6J("title",e.lcZ(22,5,"account.newTooltip"))}}function pn(o,n){1&o&&(e.TgZ(0,"div",9)(1,"div",10)(2,"h3"),e._UZ(3,"localize",76),e.qZA(),e.TgZ(4,"div",12)(5,"div",9)(6,"div",10)(7,"a",27)(8,"button",28),e._UZ(9,"localize",77),e.qZA()()()()()()()),2&o&&(e.xp6(7),e.Q6J("routerLink","/registry/synchronization-configs"))}function _n(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"h3"),e._UZ(4,"localize",11),e.qZA(),e.TgZ(5,"div",12)(6,"h4"),e._UZ(7,"localize",13),e._uU(8),e.qZA()()()(),e.TgZ(9,"div",9)(10,"div",10)(11,"h3"),e._UZ(12,"localize",14),e.qZA(),e.TgZ(13,"div",12)(14,"div",15)(15,"table",16)(16,"thead")(17,"tr")(18,"th",17),e._UZ(19,"localize",18),e.qZA(),e.TgZ(20,"th",17),e._UZ(21,"localize",19),e.qZA(),e.TgZ(22,"th",17),e._UZ(23,"localize",20),e.qZA(),e.TgZ(24,"th",17),e._UZ(25,"localize",21),e.qZA(),e.TgZ(26,"th",17),e._UZ(27,"localize",22),e.qZA()()(),e.TgZ(28,"tbody"),e.YNc(29,Ht,11,5,"tr",23),e.ALo(30,"paginate"),e.qZA()(),e.TgZ(31,"pagination-controls",24),e.NdJ("pageChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.onSRAPageChange(i))}),e.qZA()()()()(),e.YNc(32,$t,19,3,"div",25),e.TgZ(33,"div",9)(34,"div",10)(35,"h3"),e._UZ(36,"localize",26),e.qZA(),e.TgZ(37,"div",12)(38,"div",9)(39,"div",10)(40,"a",27)(41,"button",28),e._UZ(42,"localize",29),e.qZA()()()(),e.TgZ(43,"div",9),e.YNc(44,jt,3,3,"div",30),e.qZA()()()(),e.YNc(45,tn,30,10,"div",25),e.YNc(46,nn,6,0,"div",25),e.YNc(47,an,8,4,"div",31),e.YNc(48,dn,24,11,"div",25),e.YNc(49,pn,10,1,"div",25),e.qZA()}if(2&o){const t=e.oxw();e.xp6(8),e.hij(" ",t.getCGRVersion(),""),e.xp6(21),e.Q6J("ngForOf",e.xi3(30,10,t.sRAs.resultSet,e.kEZ(13,ae,t.sRAs.pageSize,t.sRAs.pageNumber,t.sRAs.count))),e.xp6(3),e.Q6J("ngIf",t.isAdmin),e.xp6(8),e.Q6J("routerLink","/admin/accounts/"),e.xp6(4),e.Q6J("ngIf",t.isSRA||t.isRA),e.xp6(1),e.Q6J("ngIf",t.isSRA&&t.installedLocales),e.xp6(1),e.Q6J("ngIf",t.isSRA),e.xp6(1),e.Q6J("ngIf",t.isSRA),e.xp6(1),e.Q6J("ngIf",t.isRA&&t.organizations.length>0),e.xp6(1),e.Q6J("ngIf",t.isRA&&t.organizations.length>0)}}class D{constructor(n,t,a,i,l,c,f,q,P){this.configuration=n,this.modalService=t,this.localizeService=a,this.authService=i,this.externalSystemService=l,this.orgService=c,this.accountService=f,this.settingsService=q,this.localizationManagerService=P,this.message=null,this.organizations=[],this.settings={email:{isConfigured:!1}},this.sRAs={resultSet:[],count:0,pageNumber:1,pageSize:10},this.systems={resultSet:[],count:0,pageNumber:1,pageSize:10},this.isAdmin=i.isAdmin(),this.isSRA=i.isSRA(),this.isRA=i.isRA()}ngOnInit(){this.settingsService.getInitView().then(n=>{this.view=n,this.organizations=n.organizations,this.systems=n.externalSystems,this.sRAs=n.sras,this.installedLocales=n.locales}).catch(n=>{this.error(n)})}getCGRVersion(){return this.authService.getVersion()}getLocales(){return this.configuration.getLocales()}exportLocalization(){window.location.href=d.N.apiUrl+"/api/localization/exportSpreadsheet"}importLocalization(){this.modalService.show(B,{animated:!0,backdrop:!0,ignoreBackdropClick:!0})}newOrganization(){let n=this.modalService.show(U,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});n.content.isNewOrganization=!0,n.content.onSuccess.subscribe(t=>{this.organizations.push(t)})}onEditOrganization(n){let t=this.modalService.show(U,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});t.content.organization=n,t.content.isNewOrganization=!1,t.content.onSuccess.subscribe(a=>{const i=this.organizations.findIndex(l=>l.code===a.code);-1!==i?this.organizations[i]=a:this.organizations.push(a)})}onRemoveOrganization(n,t){this.bsModalRef=this.modalService.show(g.z5,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+t+"]",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.type=X.Qi.danger,this.bsModalRef.content.onConfirm.subscribe(a=>{this.orgService.removeOrganization(n).then(i=>{for(let l=this.organizations.length-1;l>=0;l--)this.organizations[l].code===n&&this.organizations.splice(l,1)}).catch(i=>{this.error(i)})})}onEditLocale(n){let t=this.modalService.show(L,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});t.content.locale=n,t.content.isNew=!1,t.content.onSuccess.subscribe(a=>{const i=this.installedLocales.findIndex(l=>l.tag===a.tag);-1!==i?this.installedLocales[i]=a:this.installedLocales.push(a),this.localizeService.addLocale(n)})}onRemoveLocale(n){this.bsModalRef=this.modalService.show(g.z5,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+n.label.localizedValue+"]",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.type=X.Qi.danger,this.bsModalRef.content.onConfirm.subscribe(t=>{this.localizationManagerService.uninstallLocale(n).then(a=>{this.localizeService.remove(n);let i=-1,l=this.installedLocales.length;for(let c=0;c<l;++c)this.installedLocales[c].tag===n.tag&&(i=c);-1!=i&&this.installedLocales.splice(i,1)}).catch(a=>{this.error(a)})})}newLocalization(){this.modalService.show(L,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}).content.onSuccess.subscribe(t=>{this.localizeService.addLocale(t),this.installedLocales.push(t)})}configureEmail(){this.bsModalRef=this.modalService.show(I,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.onSuccess.subscribe(n=>{this.settings.email.isConfigured=n})}inviteUsers(){this.bsModalRef=this.modalService.show(J,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.organization=null}onSRAPageChange(n){this.accountService.getSRAs(n,10).then(t=>{this.sRAs=t}).catch(t=>{this.error(t)})}onSystemPageChange(n){this.externalSystemService.getExternalSystems(n,this.systems.pageSize).then(t=>{this.systems=t}).catch(t=>{this.error(t)})}newSystem(){let n=this.modalService.show(R,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});n.content.init(this.organizations),n.content.onSuccess.subscribe(t=>{this.onSystemPageChange(this.systems.pageNumber)})}onEditSystem(n){this.externalSystemService.getExternalSystem(n.oid).then(t=>{let a=this.modalService.show(R,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});a.content.init(this.organizations,t),a.content.onSuccess.subscribe(i=>{this.onSystemPageChange(this.systems.pageNumber)})})}onRemoveSystem(n){this.bsModalRef=this.modalService.show(g.z5,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+n.label.localizedValue+"]",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.type=X.Qi.danger,this.bsModalRef.content.onConfirm.subscribe(t=>{this.externalSystemService.removeExternalSystem(n.oid).then(a=>{this.onSystemPageChange(this.systems.pageNumber)}).catch(a=>{this.error(a)})})}error(n){this.bsModalRef=g.qL.showErrorAsDialog(n,this.modalService)}}function un(o,n){if(1&o&&(e.TgZ(0,"div",48),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.message)}}function mn(o,n){1&o&&(e.TgZ(0,"div",49),e._UZ(1,"localize",50),e.qZA())}function gn(o,n){1&o&&(e.TgZ(0,"div",49),e._UZ(1,"localize",51),e.qZA())}function hn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.MAs(1),l=e.oxw();return e.KtG(i.valid&&l.onSubmit())}),e.TgZ(2,"fieldset")(3,"div",7)(4,"h3"),e._UZ(5,"localize",8),e.qZA()(),e._UZ(6,"hr"),e.YNc(7,un,2,1,"div",9),e.TgZ(8,"div",10)(9,"div",11)(10,"label"),e._UZ(11,"localize",12),e.qZA()(),e.TgZ(12,"div",13)(13,"span",14)(14,"input",15),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.user.firstName=i)}),e.qZA()()()(),e.TgZ(15,"div",10)(16,"div",11)(17,"label"),e._UZ(18,"localize",16),e.qZA()(),e.TgZ(19,"div",13)(20,"span",14)(21,"input",17),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.user.lastName=i)}),e.qZA()()()(),e.TgZ(22,"div",10)(23,"div",11)(24,"label"),e._UZ(25,"localize",18),e.qZA()(),e.TgZ(26,"div",13)(27,"span",14)(28,"input",19),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.user.altFirstName=i)}),e.qZA()()()(),e.TgZ(29,"div",10)(30,"div",11)(31,"label"),e._UZ(32,"localize",20),e.qZA()(),e.TgZ(33,"div",13)(34,"span",14)(35,"input",21),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.user.altLastName=i)}),e.qZA()()()(),e.TgZ(36,"div",10)(37,"div",11)(38,"label"),e._UZ(39,"localize",22),e.qZA()(),e.TgZ(40,"div",13)(41,"span",14)(42,"input",23),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.user.phoneNumber=i)}),e.qZA()()()(),e.TgZ(43,"div",10)(44,"div",11)(45,"label"),e._UZ(46,"localize",24),e.qZA()(),e.TgZ(47,"div",13)(48,"span",14)(49,"input",25),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.user.altPhoneNumber=i)}),e.qZA()()()(),e.TgZ(50,"div",10)(51,"div",11)(52,"label"),e._UZ(53,"localize",26),e.qZA()(),e.TgZ(54,"div",13)(55,"span",14)(56,"input",27,28),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.user.email=i)}),e.qZA()(),e.YNc(58,mn,2,0,"div",29),e.qZA()(),e.TgZ(59,"div",10)(60,"div",11)(61,"label"),e._UZ(62,"localize",30),e.qZA()(),e.TgZ(63,"div",13)(64,"span",14)(65,"input",31),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.user.position=i)}),e.qZA()()()(),e.TgZ(66,"div",10)(67,"div",11)(68,"label"),e._UZ(69,"localize",32),e.qZA()(),e.TgZ(70,"div",13)(71,"span",14)(72,"input",33),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.user.department=i)}),e.qZA()()()(),e.TgZ(73,"div",7)(74,"h3"),e._UZ(75,"localize",34),e.qZA()(),e._UZ(76,"hr"),e.TgZ(77,"div",10)(78,"div",11)(79,"label"),e._UZ(80,"localize",35),e.qZA()(),e.TgZ(81,"div",13)(82,"span",14)(83,"input",36),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.user.username=i)}),e.qZA()()()(),e.TgZ(84,"div")(85,"div",10)(86,"div",11)(87,"label"),e._UZ(88,"localize",37),e.qZA()(),e.TgZ(89,"div",13)(90,"span",14)(91,"input",38,39),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.user.password=i)}),e.qZA(),e._UZ(93,"password-strength-bar",40),e.qZA()()(),e.TgZ(94,"div",10)(95,"div",11)(96,"label"),e._UZ(97,"localize",41),e.qZA()(),e.TgZ(98,"div",13)(99,"span",14),e._UZ(100,"input",42,43),e.qZA(),e.YNc(102,gn,2,0,"div",44),e.qZA()()(),e.TgZ(103,"div",10),e._UZ(104,"div",11),e.TgZ(105,"div",13)(106,"div",45)(107,"input",46),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancel())}),e.ALo(108,"localize"),e.qZA(),e._UZ(109,"input",47),e.ALo(110,"localize"),e.qZA()()()()()}if(2&o){const t=e.MAs(1),a=e.MAs(57),i=e.MAs(92),l=e.MAs(101),c=e.oxw();e.xp6(7),e.Q6J("ngIf",null!=c.message),e.xp6(7),e.Q6J("ngModel",c.user.firstName),e.xp6(7),e.Q6J("ngModel",c.user.lastName),e.xp6(7),e.Q6J("ngModel",c.user.altFirstName),e.xp6(7),e.Q6J("ngModel",c.user.altLastName),e.xp6(7),e.Q6J("ngModel",c.user.phoneNumber),e.xp6(7),e.Q6J("ngModel",c.user.altPhoneNumber),e.xp6(7),e.Q6J("ngModel",c.user.email),e.xp6(2),e.Q6J("ngIf",(null==a.errors?null:a.errors.email)&&c.user.email&&c.user.email.length>0),e.xp6(7),e.Q6J("ngModel",c.user.position),e.xp6(7),e.Q6J("ngModel",c.user.department),e.xp6(11),e.Q6J("disabled",!c.user.newInstance&&"admin"===c.user.username)("ngModel",c.user.username),e.xp6(8),e.Q6J("ngModel",c.user.password),e.xp6(2),e.Q6J("passwordToCheck",c.user.password),e.xp6(7),e.Q6J("value",i),e.xp6(2),e.Q6J("ngIf",null==l.errors?null:l.errors.equalTo),e.xp6(5),e.Q6J("value",e.lcZ(108,20,"dataset.cancel")),e.xp6(2),e.Q6J("value",e.lcZ(110,22,"dataset.submit"))("disabled",!t.valid)}}D.\u0275fac=function(n){return new(n||D)(e.Y36(Ot.e),e.Y36(h.tT),e.Y36(u.oQ),e.Y36(u.e8),e.Y36(u.iu),e.Y36(u.Mn),e.Y36(Z),e.Y36(A),e.Y36(T))},D.\u0275cmp=e.Xpm({type:D,selectors:[["settings"]],decls:9,vars:3,consts:[[1,"new-admin-design-main"],["class","standby-overlay","style","width:100%; height:100%; font-size:4em; color:black;",4,"ngIf"],["id","app-container",1,"container"],["key","settings.title"],["class","alert alert-danger","role","alert",4,"ngIf"],["style","padding-bottom: 30px;",4,"ngIf"],[1,"standby-overlay",2,"width","100%","height","100%","font-size","4em","color","black"],["role","alert",1,"alert","alert-danger"],[2,"padding-bottom","30px"],[1,"row"],[1,"col-md-12"],["key","settings.information.heading"],[1,"content-wrapper"],["key","settings.version.label"],["key","settings.administrators.heading"],[1,"list-table-wrapper"],["id","manage-systems-table",1,"list-table","table","table-bordered","table-striped"],[1,"label-column"],["key","account.username"],["key","account.firstname"],["key","account.lastname"],["key","account.phonenumber"],["key","account.email"],["class","fade-ngRepeat-item",4,"ngFor","ngForOf"],[3,"pageChange"],["class","row",4,"ngIf"],["key","settings.accounts.heading"],["routerLinkActive","active",3,"routerLink"],["role","button",1,"btn","btn-primary"],["key","settings.manage.accounts.button"],["class","col-md-12",4,"ngIf"],["class","row","style","margin-bottom: 30px;",4,"ngIf"],[1,"fade-ngRepeat-item"],[1,"label-column","username-col"],[1,"label-column","firstname-col"],[1,"label-column","lastname-col"],[1,"label-column","phone-col"],[1,"label-column","email-col"],["key","settings.organizations.heading"],["id","manage-organizations-table",1,"list-table","table","table-bordered","table-striped"],[4,"ngIf"],["key","settings.manage.orgs.table.code.header"],["key","settings.manage.orgs.table.name.header"],["key","settings.manage.orgs.table.contact.header"],[4,"ngFor","ngForOf"],["class","button-column",4,"ngIf"],[1,"button-column"],[1,"fa","fa-pencil","ico-edit",3,"title","click"],[1,"fa","fa-trash-o","ico-remove",3,"title","click"],[1,"fa","fa-plus",3,"title","click"],["type","submit",1,"btn","btn-primary",2,"margin-top","10px",3,"value","click"],["key","settings.localization.heading"],["id","manage-accounts-table",1,"list-table","table","table-bordered","table-striped"],["key","settings.localization.locale.displayLabel"],["key","settings.manage.lang.table.language.header"],["key","settings.manage.lang.table.country.header"],["type","submit",1,"btn","btn-primary",3,"value","click"],[1,"fa","fa-pencil","ico-edit",3,"click"],["class","fa fa-trash-o ico-remove",3,"click",4,"ngIf"],[1,"fa","fa-trash-o","ico-remove",3,"click"],["key","settings.branding.heading"],[1,"row",2,"margin-bottom","30px"],["key","settings.email.heading"],["class","fa fa-check","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fa","fa-check"],["key","settings.email.configured"],["key","settings.external.system.heading"],["key","external.system.type"],["key","external.system.label"],["key","external.system.description"],["key","external.system.dhis2",4,"ngIf"],["key","external.system.reveal",4,"ngIf"],["key","external.system.fhir",4,"ngIf"],["key","external.system.dhis2"],["key","external.system.reveal"],["key","external.system.fhir"],["key","settings.external.synchronization.heading"],["key","settings.external.synchronization.button"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"cgr-header"),e.YNc(2,Gt,1,0,"div",1),e.TgZ(3,"div",2),e._UZ(4,"message"),e.TgZ(5,"h2"),e._UZ(6,"localize",3),e.qZA(),e.YNc(7,Pt,2,1,"div",4),e.YNc(8,_n,50,17,"div",5),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("ngIf",!t.view),e.xp6(5),e.Q6J("ngIf",null!=t.message),e.xp6(1),e.Q6J("ngIf",t.view))},dependencies:[p.sg,p.O5,H.LS,v.l,C.q,j.C,z.rH,z.Od,F,H._s,y.F],styles:["h3[_ngcontent-%COMP%]{border-bottom:solid 2px lightgrey!important;padding-bottom:10px;margin-bottom:30px;margin-top:30px}.content-wrapper[_ngcontent-%COMP%]{margin-left:20px}"]});class V{constructor(n,t){this.service=n,this.route=t,this.message=null}ngOnInit(){this.service.newUserInstance().then(n=>{this.user=n}).catch(n=>{this.error(n)}),this.sub=this.route.params.subscribe(n=>{this.token=n.token})}ngOnDestroy(){this.sub.unsubscribe()}cancel(){window.location.href=d.N.apiUrl}onSubmit(){this.service.inviteComplete(this.user,this.token).then(n=>{window.location.href=d.N.apiUrl}).catch(n=>{this.error(n)})}error(n){this.message=g.qL.getMessageFromError(n)}}V.\u0275fac=function(n){return new(n||V)(e.Y36(Z),e.Y36(z.gz))},V.\u0275cmp=e.Xpm({type:V,selectors:[["account-invite-complete"]],decls:8,vars:2,consts:[[1,"new-admin-design-main"],[3,"loggedIn"],["id","app-container",1,"container"],["key","account.invite.createTitle"],["style","padding-bottom: 20px;","class","modal-form",3,"ngSubmit",4,"ngIf"],[1,"modal-form",2,"padding-bottom","20px",3,"ngSubmit"],["form","ngForm"],[1,"heading"],["key","account.user.heading"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"row-holder"],[1,"label-holder"],["key","account.firstname"],[1,"holder"],[1,"text"],["type","text","name","firstname","required","",3,"ngModel","ngModelChange"],["key","account.lastname"],["type","text","name","lastname","required","",3,"ngModel","ngModelChange"],["key","account.altFirstname"],["type","text","name","altFirstname",3,"ngModel","ngModelChange"],["key","account.altLastname"],["type","text","name","altLastname",3,"ngModel","ngModelChange"],["key","account.phonenumber"],["type","text","name","phoneNumber",3,"ngModel","ngModelChange"],["key","account.altPhonenumber"],["type","text","name","altPhoneNumber",3,"ngModel","ngModelChange"],["key","account.email"],["type","text","name","email","required","","email","",3,"ngModel","ngModelChange"],["aemail","ngModel"],["style","float:none;","class","inline-error-message",4,"ngIf"],["key","account.position"],["type","text","name","position",3,"ngModel","ngModelChange"],["key","account.department"],["type","text","name","department",3,"ngModel","ngModelChange"],["key","account.info.heading"],["key","account.username"],["type","text","name","username","required","",3,"disabled","ngModel","ngModelChange"],["key","account.password"],["type","password","name","password","required","","minlength","5","maxlength","50",3,"ngModel","ngModelChange"],["password","ngModel"],[3,"passwordToCheck"],["key","account.certainPassword"],["type","password","ngModel","","name","certainPassword",3,"value"],["certainPassword","ngModel"],["style","float: none;","class","inline-error-message",4,"ngIf"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"value","click"],["type","submit",1,"btn","btn-primary",3,"value","disabled"],["role","alert",1,"alert","alert-danger"],[1,"inline-error-message",2,"float","none"],["key","account.email.validation"],["key","account.certainPassword.validation"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"cgr-header",1),e.TgZ(2,"div",2),e._UZ(3,"message")(4,"loading-bar"),e.TgZ(5,"h2"),e._UZ(6,"localize",3),e.qZA(),e.YNc(7,hn,111,24,"form",4),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("loggedIn",!1),e.xp6(6),e.Q6J("ngIf",null!=t.user))},dependencies:[p.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.wO,s.nD,s.on,s.On,s.F,v.l,x.N,C.q,te.I,j.C,y.F],styles:[".modal-form[_ngcontent-%COMP%]   .check-block[_ngcontent-%COMP%]   .chk-area[_ngcontent-%COMP%]{margin:10px 0 0}"]});const vn=[{path:"logos",canActivate:[S.a1],component:F,data:{title:"System_Configuration"}},{path:"logo/:oid",canActivate:[S.a1],component:Q,data:{title:"System_Configuration"}},{path:"email",canActivate:[S.a1],component:I,data:{title:"System_Configuration"}},{path:"",canActivate:[S.a1],component:E,data:{title:"useraccounts.title"}},{path:"settings",canActivate:[S.a1],component:D,data:{title:"settings.title"}},{path:"accounts",canActivate:[S.a1],component:E,data:{title:"useraccounts.title"}},{path:"account/:oid",component:w,canActivate:[S.a1],data:{title:"account.title"}},{path:"invite",component:J,data:{title:"account.title"}},{path:"invite-complete/:token",component:V,data:{title:"account.title"}}];class Y{}Y.\u0275fac=function(n){return new(n||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({providers:[{provide:p.S$,useClass:p.Do}],imports:[z.Bz.forChild(vn),z.Bz]});var fn=r(92977);class G{}G.\u0275fac=function(n){return new(n||G)},G.\u0275mod=e.oAB({type:G}),G.\u0275inj=e.cJS({providers:[b,M,Z,A,T],imports:[p.ez,s.u5,s.UX,N.Ob,H.JX,fn.m,Y]})}}]);