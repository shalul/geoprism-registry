<!--

    Copyright (c) 2022 TerraFrame, Inc. All rights reserved.

    This file is part of Geoprism Registry(tm).

    Geoprism Registry(tm) is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    Geoprism Registry(tm) is distributed in the hope that it will be useful, but
    WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public
    License along with Geoprism Registry(tm).  If not, see <http://www.gnu.org/licenses/>.

-->
<div>
  <message ></message>  
  <loading-bar></loading-bar>

  <form #form="ngForm" class="modal-form" (ngSubmit)="form.valid && onSubmit()">    
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="heading text-center">
          <h3><localize key="forgotpassword-complete.header"></localize></h3>
        </div>
        
        <div *ngIf="message != null" class="alert alert-danger" role="alert">{{message}}</div>
        
        <div class="modal-body">
	        <fieldset>
	          <div class="row">
		          <div class="col-md-12">
		            <div *ngIf="!passwordIsReset">            
		<!-- 
		              <div class="label-holder">
		                <label><localize key="forgotpassword-complete.token"></localize></label>
		              </div>
		              <div class="holder" >
		                <span class="text">
		                  <input type="text" [(ngModel)]="token" name="token" required [readonly]="true">
		                </span>
		              </div>            
		 -->            
		              <div class="label-holder">
		                <label><localize key="forgotpassword-complete.newPassword"></localize></label>
		              </div>
		              <div class="holder">
		                <span class="text">
		                  <input type="password" [(ngModel)]="newPassword" name="password" #password="ngModel" required minlength="5" maxlength="50" >
		                    <password-strength-bar [passwordToCheck]="newPassword"></password-strength-bar>
		                </span>
		              </div>
		              <div class="label-holder">
		                <label><localize key="account.certainPassword"></localize></label>
		              </div>          
		              <div class="holder" >
		                <span class="text">
		                  <input type="password" ngModel name="certainPassword" #certainPassword="ngModel" [value]="password"/>
		                </span>
		                <div *ngIf="certainPassword.errors?.equalTo" class="inline-error-message">
		                  <localize key="account.certainPassword.validation"></localize>
		                </div>                                                       
		              </div>                           
		            </div>
		            <div *ngIf="passwordIsReset" class="forgotpassword-password-is-reset">
		              <localize key="forgotpassword-complete.passwordIsReset"></localize>
		            </div>
		          </div>
	          </div>
	            
	          
	          <div class="row">
	            <div class="col-md-12">
		            <div class="label-holder">
		            </div>                    
		            <div class="holder">
		              <div *ngIf="!passwordIsReset" class="button-holder">
		                <input type="button" [value]="'forgotpassword-complete.cancel' | localize" class="btn btn-default" (click)="cancel()" />
		                <input type="submit" [value]="'forgotpassword-complete.submit' | localize" class="btn btn-primary" [disabled]="!(form.valid)" />
		              </div>
		              
		              <div *ngIf="passwordIsReset" class="button-holder" style="margin-top: 10px;">
		                <input type="button" style="margin-top: 10px;" [value]="'forgotpassword-complete.ok' | localize" class="btn btn-primary" (click)="cancel()" />
		              </div>
		            </div>
		          </div>
	          </div>
	        </fieldset>
        </div>
      </div>
    </div>
  </form>
</div>
