(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1004:function(e,t,n){var i={"./af":867,"./af.js":867,"./ar":868,"./ar-dz":869,"./ar-dz.js":869,"./ar-kw":870,"./ar-kw.js":870,"./ar-ly":871,"./ar-ly.js":871,"./ar-ma":872,"./ar-ma.js":872,"./ar-sa":873,"./ar-sa.js":873,"./ar-tn":874,"./ar-tn.js":874,"./ar.js":868,"./az":875,"./az.js":875,"./be":876,"./be.js":876,"./bg":877,"./bg.js":877,"./bm":878,"./bm.js":878,"./bn":879,"./bn-bd":880,"./bn-bd.js":880,"./bn.js":879,"./bo":881,"./bo.js":881,"./br":882,"./br.js":882,"./bs":883,"./bs.js":883,"./ca":884,"./ca.js":884,"./cs":885,"./cs.js":885,"./cv":886,"./cv.js":886,"./cy":887,"./cy.js":887,"./da":888,"./da.js":888,"./de":889,"./de-at":890,"./de-at.js":890,"./de-ch":891,"./de-ch.js":891,"./de.js":889,"./dv":892,"./dv.js":892,"./el":893,"./el.js":893,"./en-au":894,"./en-au.js":894,"./en-ca":895,"./en-ca.js":895,"./en-gb":896,"./en-gb.js":896,"./en-ie":897,"./en-ie.js":897,"./en-il":898,"./en-il.js":898,"./en-in":899,"./en-in.js":899,"./en-nz":900,"./en-nz.js":900,"./en-sg":901,"./en-sg.js":901,"./eo":902,"./eo.js":902,"./es":903,"./es-do":904,"./es-do.js":904,"./es-mx":905,"./es-mx.js":905,"./es-us":906,"./es-us.js":906,"./es.js":903,"./et":907,"./et.js":907,"./eu":908,"./eu.js":908,"./fa":909,"./fa.js":909,"./fi":910,"./fi.js":910,"./fil":911,"./fil.js":911,"./fo":912,"./fo.js":912,"./fr":913,"./fr-ca":914,"./fr-ca.js":914,"./fr-ch":915,"./fr-ch.js":915,"./fr.js":913,"./fy":916,"./fy.js":916,"./ga":917,"./ga.js":917,"./gd":918,"./gd.js":918,"./gl":919,"./gl.js":919,"./gom-deva":920,"./gom-deva.js":920,"./gom-latn":921,"./gom-latn.js":921,"./gu":922,"./gu.js":922,"./he":923,"./he.js":923,"./hi":924,"./hi.js":924,"./hr":925,"./hr.js":925,"./hu":926,"./hu.js":926,"./hy-am":927,"./hy-am.js":927,"./id":928,"./id.js":928,"./is":929,"./is.js":929,"./it":930,"./it-ch":931,"./it-ch.js":931,"./it.js":930,"./ja":932,"./ja.js":932,"./jv":933,"./jv.js":933,"./ka":934,"./ka.js":934,"./kk":935,"./kk.js":935,"./km":936,"./km.js":936,"./kn":937,"./kn.js":937,"./ko":938,"./ko.js":938,"./ku":939,"./ku.js":939,"./ky":940,"./ky.js":940,"./lb":941,"./lb.js":941,"./lo":942,"./lo.js":942,"./lt":943,"./lt.js":943,"./lv":944,"./lv.js":944,"./me":945,"./me.js":945,"./mi":946,"./mi.js":946,"./mk":947,"./mk.js":947,"./ml":948,"./ml.js":948,"./mn":949,"./mn.js":949,"./mr":950,"./mr.js":950,"./ms":951,"./ms-my":952,"./ms-my.js":952,"./ms.js":951,"./mt":953,"./mt.js":953,"./my":954,"./my.js":954,"./nb":955,"./nb.js":955,"./ne":956,"./ne.js":956,"./nl":957,"./nl-be":958,"./nl-be.js":958,"./nl.js":957,"./nn":959,"./nn.js":959,"./oc-lnc":960,"./oc-lnc.js":960,"./pa-in":961,"./pa-in.js":961,"./pl":962,"./pl.js":962,"./pt":963,"./pt-br":964,"./pt-br.js":964,"./pt.js":963,"./ro":965,"./ro.js":965,"./ru":966,"./ru.js":966,"./sd":967,"./sd.js":967,"./se":968,"./se.js":968,"./si":969,"./si.js":969,"./sk":970,"./sk.js":970,"./sl":971,"./sl.js":971,"./sq":972,"./sq.js":972,"./sr":973,"./sr-cyrl":974,"./sr-cyrl.js":974,"./sr.js":973,"./ss":975,"./ss.js":975,"./sv":976,"./sv.js":976,"./sw":977,"./sw.js":977,"./ta":978,"./ta.js":978,"./te":979,"./te.js":979,"./tet":980,"./tet.js":980,"./tg":981,"./tg.js":981,"./th":982,"./th.js":982,"./tk":983,"./tk.js":983,"./tl-ph":984,"./tl-ph.js":984,"./tlh":985,"./tlh.js":985,"./tr":986,"./tr.js":986,"./tzl":987,"./tzl.js":987,"./tzm":988,"./tzm-latn":989,"./tzm-latn.js":989,"./tzm.js":988,"./ug-cn":990,"./ug-cn.js":990,"./uk":991,"./uk.js":991,"./ur":992,"./ur.js":992,"./uz":993,"./uz-latn":994,"./uz-latn.js":994,"./uz.js":993,"./vi":995,"./vi.js":995,"./x-pseudo":996,"./x-pseudo.js":996,"./yo":997,"./yo.js":997,"./zh-cn":998,"./zh-cn.js":998,"./zh-hk":999,"./zh-hk.js":999,"./zh-mo":1e3,"./zh-mo.js":1e3,"./zh-tw":1001,"./zh-tw.js":1001};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=1004},1015:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.services=void 0;var o=n(1024),a=n(1051),l=n(1052),s=n(1053),c=n(1034),d=n(1025),p=n(1054),u=n(1055),m=n(1019);t.services=[o.ChangeRequestService,a.HierarchyService,l.IOService,s.LocalizationManagerService,c.MapService,d.RegistryService,p.SynchronizationConfigService,u.TaskService,m.GeometryService],r(n(1024),t),r(n(1051),t),r(n(1052),t),r(n(1053),t),r(n(1034),t),r(n(1025),t),r(n(1054),t),r(n(1055),t),r(n(1019),t)},1016:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListTypeService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(0)),l=n(58),s=n(25),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.listForType=function(e){var t=this,n=new r.HttpParams;return n=n.set("typeCode",e),this.eventService.start(),this.http.get(registry.contextPath+"/list-type/list-for-type",{params:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.entries=function(e){var t=this,n=new r.HttpParams;return n=n.set("oid",e),this.eventService.start(),this.http.get(registry.contextPath+"/list-type/entries",{params:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.versions=function(e){var t=this,n=new r.HttpParams;return n=n.set("oid",e),this.eventService.start(),this.http.get(registry.contextPath+"/list-type/versions",{params:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.getVersion=function(e){var t=this,n=new r.HttpParams;return n=n.set("oid",e),this.eventService.start(),this.http.get(registry.contextPath+"/list-type/version",{params:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.fetchVersionsAsListVersion=function(e){var t=new r.HttpParams;return t=t.set("oids",e.join(",")),this.http.get(registry.contextPath+"/list-type/fetchVersionsAsListVersion",{params:t}).pipe(o.finalize((function(){}))).toPromise()},e.prototype.apply=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/list-type/apply",JSON.stringify({list:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.createEntries=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/list-type/create-entries",JSON.stringify({oid:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.remove=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/list-type/remove",JSON.stringify({oid:e.oid}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.createVersion=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/list-type/create-version",JSON.stringify({oid:e.oid,metadata:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.applyVersion=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/list-type/apply-version",JSON.stringify({oid:e.oid,metadata:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.removeVersion=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/list-type/remove-version",JSON.stringify({oid:e.oid}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.page=function(e,t){var n=new r.HttpHeaders({"Content-Type":"application/json"}),i={oid:t.oid,showInvalid:t.showInvalid,criteria:e};return this.http.post(registry.contextPath+"/list-type/data",JSON.stringify(i),{headers:n}).toPromise()},e.prototype.record=function(e,t,n){var i=this;void 0===n&&(n=!0);var a=new r.HttpHeaders({"Content-Type":"application/json"}),l={oid:e,uid:t};return n&&this.eventService.start(),this.http.post(registry.contextPath+"/list-type/record",JSON.stringify(l),{headers:a}).pipe(o.finalize((function(){n&&i.eventService.complete()}))).toPromise()},e.prototype.values=function(e,t,n,i){var o=new r.HttpHeaders({"Content-Type":"application/json"}),a={oid:e,attributeName:n};return null!=i&&(a.criteria={filters:i}),null!=t&&t.length>0&&(a.value=t),this.http.post(registry.contextPath+"/list-type/values",JSON.stringify(a),{headers:o}).toPromise()},e.prototype.publishList=function(e){var t=new r.HttpHeaders({"Content-Type":"application/json"});return this.http.post(registry.contextPath+"/list-type/publish",JSON.stringify({oid:e}),{headers:t})},e.prototype.getAllLists=function(){var e=new r.HttpParams;return this.http.get(registry.contextPath+"/list-type/list-all",{params:e}).toPromise()},e.prototype.getPublicVersions=function(e){var t=new r.HttpParams;return t=t.append("oid",e),this.http.get(registry.contextPath+"/list-type/get-public-versions",{params:t}).toPromise()},e.prototype.getGeospatialVersions=function(e,t){var n=new r.HttpParams;return null!=e&&e.length>0&&(n=n.append("startDate",e)),null!=t&&t.length>0&&(n=n.append("endDate",t)),this.http.get(registry.contextPath+"/list-type/get-geospatial-versions",{params:n}).toPromise()},e.prototype.getBounds=function(e,t){var n=new r.HttpParams;return n=n.append("oid",e),null!=t&&(n=n.append("uid",t)),this.http.get(registry.contextPath+"/list-type/bounds",{params:n}).toPromise()},e.prototype.getCurationInfo=function(e,t,n,i){var o=new r.HttpParams;return o=(o=(o=(o=o.set("historyId",e.curation.curationId)).set("onlyUnresolved",t.toString())).set("pageSize",i.toString())).set("pageNumber",n.toString()),this.http.get(registry.contextPath+"/curation/details",{params:o}).toPromise()},e.prototype.getCurationPage=function(e,t,n,i){var a=this,l=new r.HttpParams;return l=(l=(l=(l=l.set("historyId",e.curation.curationId)).set("onlyUnresolved",t.toString())).set("pageSize",i.toString())).set("pageNumber",n.toString()),this.eventService.start(),this.http.get(registry.contextPath+"/curation/page",{params:l}).pipe(o.finalize((function(){a.eventService.complete()}))).toPromise()},e.prototype.createCurationJob=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/curation/curate",JSON.stringify({listTypeVersionId:e.oid}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.submitErrorResolve=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/curation/problem-resolve",JSON.stringify({config:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.setResolution=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"}),a={problemId:e.id};return null!=t&&(a.resolution=t),this.eventService.start(),this.http.post(registry.contextPath+"/curation/set-resolution",JSON.stringify(a),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getJob=function(e){var t=new r.HttpParams;return t=t.append("historyOid",e),this.http.get(registry.contextPath+"/list-type/get-publish-job",{params:t}).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.ListTypeService=c,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService}]}),null)},1018:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessTypeService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(0)),l=n(58),s=n(25),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.getByOrganization=function(){var e=this,t=new r.HttpParams;return this.eventService.start(),this.http.get(registry.contextPath+"/business-type/get-by-org",{params:t}).pipe(o.finalize((function(){e.eventService.complete()}))).toPromise()},e.prototype.getAll=function(){var e=this,t=new r.HttpParams;return this.eventService.start(),this.http.get(registry.contextPath+"/business-type/get-all",{params:t}).pipe(o.finalize((function(){e.eventService.complete()}))).toPromise()},e.prototype.get=function(e){var t=this,n=new r.HttpParams;return n=n.append("oid",e),this.eventService.start(),this.http.get(registry.contextPath+"/business-type/get",{params:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.apply=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/business-type/apply",JSON.stringify({type:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.remove=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/business-type/remove",JSON.stringify({oid:e.oid}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.edit=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/business-type/edit",JSON.stringify({oid:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.unlock=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/business-type/unlock",JSON.stringify({oid:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.addAttributeType=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/business-type/add-attribute",JSON.stringify({typeCode:e,attributeType:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.updateAttributeType=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/business-type/update-attribute",JSON.stringify({typeCode:e,attributeType:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.deleteAttributeType=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/business-type/remove-attribute",JSON.stringify({typeCode:e,attributeName:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.page=function(e,t){var n=new r.HttpParams;return n=(n=n.set("criteria",JSON.stringify(e))).set("typeCode",t.typeCode),this.http.get(registry.contextPath+"/business-type/data",{params:n}).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.BusinessTypeService=c,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService}]}),null)},1019:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryService=t.SELECTED_COLOR=t.NEW_LAYER_COLOR=t.OLD_LAYER_COLOR=void 0;var i=n(0),r=(n(57),n(1003)),o=n(857),a=(n(1026),n(1020)),l=(n(1025),n(1034),n(1016),n(1081)),s=(n(195),n(1144)),c=n(1056),d=n(866),p=n(0),u=n(57),m=n(1025),g=n(1026),h=n(1034),f=n(1016),y=n(195);t.OLD_LAYER_COLOR="#A4A4A4",t.NEW_LAYER_COLOR="#0062AA",t.SELECTED_COLOR="#800000";var v=function(){function e(e,t,n,r,o,s,c){this.route=e,this.router=t,this.registryService=n,this.relVizService=r,this.mapService=o,this.listService=s,this.localService=c,this.layers=[],this.currentMapState=[],this.editingControl=null,this.simpleEditControl=null,this._zoomOnReady=[],this.isZooming=!1,this.geometryChange=new i.EventEmitter,this.layersChange=new i.EventEmitter,this.syncWithUrlParams=!1,this.params=null,this.dataSourceFactory=new a.DataSourceFactory(this,this.registryService,this.relVizService,this.mapService,this.listService),this.layerSorter=new l.LayerGroupSorter(this.localService),this.syncMapState=d.debounce(this._syncMapState,50)}return e.prototype.initialize=function(e,t,n){var i=this;this.syncWithUrlParams=n,this.map=e,this.geometryType=t,n&&(this.queryParamSubscription=this.route.queryParams.subscribe((function(e){try{i.handleParameterChange(e)}catch(e){console.log(e)}}))),this.map.on("style.load",(function(){})),this.map.on("draw.create",(function(){i.saveEdits()})),this.map.on("draw.delete",(function(){i.saveEdits()})),this.map.on("draw.update",(function(){i.saveEdits()})),this.map.on("zoomstart",(function(){i.isZooming=!0})),this.map.on("zoomend",(function(){i.isZooming=!1})),window.onbeforeunload=function(){return i.destroy()},this.syncMapState()},e.prototype.ngOnDestroy=function(){this.queryParamSubscription&&this.queryParamSubscription.unsubscribe()},e.prototype.handleParameterChange=function(e){if(this.params=e,null!=this.params&&null!=this.params.layers){var t=JSON.parse(this.params.layers),n=this.layers;this.layers=this.dataSourceFactory.deserializeLayers(t),new s.LayerDiffingStrategy(this.layers,n).getDiffs().length>0&&this.layersChange.emit(this.getLayers()),this.syncMapState()}},e.prototype._syncMapState=function(){if(this.map){var e=new s.LayerDiffingStrategy(this.layers,this.currentMapState).getDiffs(),t=e.length>0||this.layers.length!==this.currentMapState.length;if(1!==e.length||"RENDERED_CHANGE"!==e[0].type&&"COLOR_CHANGE"!==e[0].type){if(1===e.filter((function(e){return"NEW_LAYER"===e.type})).length&&0===e.filter((function(e){return"NEW_LAYER"!==e.type&&"LAYER_REORDER"!==e.type})).length&&this.layers.length===this.currentMapState.length+1){a=null;if((o=e.filter((function(e){return"NEW_LAYER"===e.type}))[0]).newLayerIndex>0)for(l=0;l<o.newLayerIndex;++l)a=this.currentMapState[l];this.mapboxMapLayer(this.layers[o.newLayerIndex],a),t=!1}else if(1===e.filter((function(e){return"REMOVE_LAYER"===e.type})).length&&0===e.filter((function(e){return"REMOVE_LAYER"!==e.type&&"LAYER_REORDER"!==e.type})).length&&this.layers.length===this.currentMapState.length-1){o=e.filter((function(e){return"REMOVE_LAYER"===e.type}))[0];this.mapboxUnmapLayer(o.oldLayer),t=!1}else if(e.length>0&&this.layers.length===this.currentMapState.length&&0===e.filter((function(e){return"LAYER_REORDER"!==e.type})).length){this.currentMapState=this.layers;for(l=this.currentMapState.length-1;l>-1;l--){var n=this.currentMapState[l];this.map.getLayer(n.getId()+"-POLYGON")&&this.map.moveLayer(n.getId()+"-POLYGON"),this.map.getLayer(n.getId()+"-POINT")&&this.map.moveLayer(n.getId()+"-POINT"),this.map.getLayer(n.getId()+"-LINE")&&this.map.moveLayer(n.getId()+"-LINE"),this.map.getLayer(n.getId()+"-LABEL")&&this.map.moveLayer(n.getId()+"-LABEL")}t=!1}else if(2===e.length&&1===e.filter((function(e){return"REMOVE_LAYER"===e.type})).length&&1===e.filter((function(e){return"NEW_LAYER"===e.type})).length&&this.layers.length===this.currentMapState.length&&0===e.filter((function(e){return"REMOVE_LAYER"!==e.type&&"NEW_LAYER"!==e.type})).length){var i=e.filter((function(e){return"NEW_LAYER"===e.type}))[0],r=e.filter((function(e){return"REMOVE_LAYER"===e.type}))[0];if(null!=r.oldLayer&&null!=i.newLayer){this.mapboxUnmapLayer(r.oldLayer);a=null;if(i.newLayerIndex>0)for(l=0;l<i.newLayerIndex;++l)a=this.currentMapState[l];this.mapboxMapLayer(i.newLayer,a),t=!1}}}else{var o,a=null;if((o=e[0]).oldLayerIndex>0)for(var l=0;l<o.oldLayerIndex;++l)a=this.currentMapState[l];"RENDERED_CHANGE"===o.type?o.newLayer.rendered?this.mapboxShowLayer(o.newLayer):this.mapboxHideLayer(o.oldLayer):"COLOR_CHANGE"===o.type&&(this.mapboxUnmapLayer(o.oldLayer),this.mapboxMapLayer(o.newLayer,a)),t=!1}if(t?(this.unmapAllLayers(),this.currentMapState=this.layers,this.mapAllLayers()):this.currentMapState=this.layers,null!=this._zoomOnReady&&this._zoomOnReady.length>0&&!this.isZooming){var c=function(e){var t=d._zoomOnReady[e],n=d.layers.findIndex((function(e){return e.getId()===t}));if(-1!==n){var i=d.layers[n];return d.zoomToLayer(i),d._zoomOnReady.splice(d._zoomOnReady.indexOf(i.getId()),1),"break"}},d=this;for(l=0;l<this._zoomOnReady.length;++l){if("break"===c(l))break}}}},e.prototype.dumpLayers=function(){this.layers=[],this.currentMapState=[]},e.prototype.isMapZooming=function(){return this.isZooming},e.prototype.refreshDatasets=function(e){var t=this,n=null;this.getLayers().forEach((function(i){i.dataSource.getDataSourceType()===e&&(t.mapboxUnmapLayer(i),t.mapboxMapLayer(i,n)),n=i}))},e.prototype.setLayers=function(e){if(null!=this.layerSorter?this.layers=this.layerSorter.sortLayers(e):this.layers=e,this.syncWithUrlParams){var t=this.dataSourceFactory.serializeLayers(e);this.router.navigate([],{relativeTo:this.route,queryParams:{layers:JSON.stringify(t)},queryParamsHandling:"merge"})}else this.syncMapState();this.layersChange.emit(this.getLayers())},e.prototype.zoomOnReady=function(e){-1===this._zoomOnReady.indexOf(e)&&this._zoomOnReady.push(e)},e.prototype.zoomToLayer=function(e){var t=this;return e.dataSource.getBounds(e).then((function(e){if(null!=e){var n=t.calculateZoomConfig(null);t.isZooming=!0,t.map.fitBounds(e,n)}}))},e.prototype.calculateZoomConfig=function(e){var t={padding:{top:10,bottom:10,left:10,right:10},animate:!0,maxDuration:5e3,maxZoom:20};("Point"!==e&&"MultiPoint"!==e||(t.padding={top:50,bottom:50,left:50,right:50},t.maxZoom=12),"true"===this.params.graphPanelOpen&&"true"!==this.params.attrPanelOpen?t.padding.left+=Math.round(window.innerWidth/2):"true"===this.params.attrPanelOpen&&null!=this.params.text&&"true"!==this.params.graphPanelOpen&&(t.padding.left+=Math.round(window.innerWidth/3)),null!=this.params.layersPanelSize)&&((Number.parseInt(this.params.layersPanelSize)===c.PANEL_SIZE_STATE.WINDOWED||c.PANEL_SIZE_STATE.FULLSCREEN)&&(t.padding.right+=50));return t},e.prototype.setGeometryType=function(e){this.geometryType=e},e.prototype.getLayerFromMapboxLayer=function(e){var t=e.id;t.endsWith("-POINT")?t=t.substring(0,t.length-"-POINT".length):t.endsWith("-POLYGON")?t=t.substring(0,t.length-"-POLYGON".length):t.endsWith("-LINE")?t=t.substring(0,t.length-"-LINE".length):t.endsWith("-LABEL")&&(t=t.substring(0,t.length-"-LABEL".length));var n=this.getLayers().filter((function(e){return e.getId()===t}));if(n.length>0)return n[0]},e.prototype.destroy=function(e){void 0===e&&(e=!0),null!=this.editingControl&&(this.map.removeControl(this.editingControl),this.editingControl=null),null!=this.map&&e?(this.map.remove(),this.map=null):null!=this.map&&this.unmapAllLayers(),null!=this.layers&&this.layers.forEach((function(e){e instanceof a.GeoJsonLayer&&(e.editing=!1)})),this.editingLayer=null,this.layers=[],this.currentMapState=[],this.dataSourceFactory=new a.DataSourceFactory(this,this.registryService,this.relVizService,this.mapService,this.listService)},e.prototype.getMap=function(){return this.map},e.prototype.getDataSourceFactory=function(){return this.dataSourceFactory},e.prototype.setDataSourceFactory=function(e){this.dataSourceFactory=e},e.prototype.registerDataSource=function(e){this.dataSourceFactory.registerDataSource(e)},e.prototype.unregisterDataSource=function(e){this.dataSourceFactory.unregisterDataSource(e)},e.prototype.startEditing=function(e){this.isEditing()&&this.stopEditing(),this.editingLayer=e,this.editingLayer.editing=!0,this.readOnly||this.enableEditing(),this.addEditingLayers()},e.prototype.stopEditing=function(e){void 0===e&&(e=!0),this.isEditing()&&(this.saveEdits(e),this.editingLayer.editing=!1,this.editingLayer=null,this.editingControl.deleteAll(),this.map.removeControl(this.editingControl),this.editingControl=null)},e.prototype.isEditing=function(){return null!=this.editingLayer},e.prototype.setPointCoordinates=function(e,t){null!=this.editingLayer&&(this.editingControl.set({type:"FeatureCollection",features:[{id:this.editingLayer.getId(),type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t,e]}}]}),this.editingControl.changeMode("simple_select",{featureIds:this.editingLayer.getId()}),this.saveEdits())},e.prototype.isValid=function(){if(!this.readOnly){var e=!1;if(null!=this.editingControl)this.editingControl.getAll().features.length>0&&(e=!0);return e}return!0},e.prototype.saveEdits=function(e){if(void 0===e&&(e=!0),null!=this.editingLayer){var t=this.getDrawGeometry();this.editingLayer.dataSource.setLayerData(t),e&&(this.unmapAllLayers(),this.mapAllLayers())}},e.prototype.reload=function(){null!=this.map&&(this.unmapAllLayers(),this.mapAllLayers(),null!=this.editingControl&&this.editingControl.deleteAll(),this.addEditingLayers())},e.prototype.setEditing=function(e,t){this.isEditing()&&this.stopEditing(),t.editing=e,e&&this.startEditing(t)},e.prototype.addOrUpdateLayer=function(e,t){var n=this.getLayers(),i=n.findIndex((function(t){return t.getId()===e.getId()}));-1!==i?n[i]=e:null!=t?n.splice(t,0,e):n.push(e),e instanceof a.GeoJsonLayer&&e.editing&&this.startEditing(e),this.setLayers(n)},e.prototype.removeLayer=function(e){var t=this.getLayers(),n=t.findIndex((function(t){return t.getId()===e}));-1!==n?(t.splice(n,1),this.setLayers(t)):console.log("Could not remove layer with id "+e+" because one does not exist.")},e.prototype.removeLayers=function(e){var t=this.getLayers();t=t.filter((function(t){return-1===e.indexOf(t.getId())})),this.setLayers(t)},e.prototype.getLayers=function(){return this.dataSourceFactory.deserializeLayers(this.dataSourceFactory.serializeLayers(this.layers))},e.prototype.enableEditing=function(){null==this.editingControl&&("MULTIPOLYGON"===this.geometryType||"POLYGON"===this.geometryType?this.editingControl=new r({controls:{point:!1,line_string:!1,polygon:!0,trash:!0,combine_features:!1,uncombine_features:!1}}):"POINT"===this.geometryType||"MULTIPOINT"===this.geometryType?this.editingControl=new r({userProperties:!0,controls:{point:!0,line_string:!1,polygon:!1,trash:!0,combine_features:!1,uncombine_features:!1},styles:[{id:"highlight-active-points",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"],["==","active","true"]],paint:{"circle-radius":13,"circle-color":"#33FFF9","circle-stroke-width":4,"circle-stroke-color":"white"}},{id:"points-are-blue",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"],["==","active","false"]],paint:{"circle-radius":10,"circle-color":"#800000","circle-stroke-width":2,"circle-stroke-color":"white"}}]}):"LINE"===this.geometryType||"MULTILINE"===this.geometryType?this.editingControl=new r({controls:{point:!1,line_string:!0,polygon:!1,trash:!0,combine_features:!1,uncombine_features:!1}}):"MIXED"===this.geometryType&&(this.editingControl=new r({controls:{point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!1,uncombine_features:!1}})),null==this.map.getSource("mapbox-gl-draw-cold")&&this.map.addControl(this.editingControl,"bottom-right"))},e.prototype.addEditingLayers=function(){var e=this;null!=this.editingLayer&&null!=this.editingControl&&this.editingLayer.dataSource.getLayerData().then((function(t){t&&e.editingControl.add(t)}))},e.prototype.mapboxUnmapLayer=function(e){var t=this;this.map&&(this.getMapboxLayerIdsForLayer(e).forEach((function(e){null!=t.map.getLayer(e)?t.map.removeLayer(e):console.log("Attempted to remove a layer ["+e+"] which does not exist.")})),this.currentMapState.filter((function(t){return e.getId()!==t.getId()&&t.dataSource.getId()===e.dataSource.getId()})).length>0||null==this.map.getSource(e.dataSource.getId())||this.map.removeSource(e.dataSource.getId()))},e.prototype.unmapAllLayers=function(){if(null!=this.currentMapState&&this.currentMapState.length>0)for(var e=this.currentMapState.length,t=0;t<e;++t){var n=this.currentMapState[t];this.mapboxUnmapLayer(n)}},e.prototype.mapAllLayers=function(){if(null!=this.currentMapState&&this.currentMapState.length>0)for(var e=null,t=this.currentMapState.length,n=0;n<t;++n){var i=this.currentMapState[n];this.mapboxMapLayer(i,e),e=i}},e.prototype.mapboxHideLayer=function(e){var t=this;this.map&&this.getMapboxLayerIdsForLayer(e).forEach((function(e){null!=t.map.getLayer(e)?t.map.setLayoutProperty(e,"visibility","none"):console.log("Attempted to hide a layer ["+e+"] which does not exist.")}))},e.prototype.mapboxShowLayer=function(e){var t=this;this.map&&this.getMapboxLayerIdsForLayer(e).forEach((function(e){null!=t.map.getLayer(e)?t.map.setLayoutProperty(e,"visibility","visible"):console.log("Attempted to show a layer ["+e+"] which does not exist.")}))},e.prototype.mapboxMapLayer=function(e,t){var n=this;if(this.map){var i=e.dataSource.buildMapboxSource();null==this.map.getSource(e.dataSource.getId())&&this.map.addSource(e.dataSource.getId(),i),e.dataSource instanceof a.GeoJsonLayerDataSource&&e.dataSource.getLayerData().then((function(t){null!=n.map.getSource(e.dataSource.getId())&&n.map.getSource(e.dataSource.getId()).setData(t)})),"MIXED"===e.dataSource.getGeometryType()?(this.mapboxMapLayerAsType("POLYGON",e,t),this.mapboxMapLayerAsType("POINT",e,t),this.mapboxMapLayerAsType("LINE",e,t)):this.mapboxMapLayerAsType(e.dataSource.getGeometryType(),e,t);var r={id:e.getId()+"-LABEL",source:e.dataSource.getId(),type:"symbol",paint:{"text-color":"black","text-halo-color":"#fff","text-halo-width":2},layout:{"text-field":["get","localizedValue",["get","displayLabel"]],"text-font":["NotoSansRegular"],"text-offset":[0,.6],"text-anchor":"top","text-size":12}};e.rendered||(r.layout.visibility="none"),e.configureMapboxLayer("LABEL",r),this.map.addLayer(r,t?t.getId()+"-LABEL":null)}},e.prototype.mapboxMapLayerAsType=function(e,n,i){var r;if("MULTIPOLYGON"===e||"POLYGON"===e)r={id:n.getId()+"-"+this.getLayerIdGeomTypePostfix(e),type:"fill",source:n.dataSource.getId(),paint:{"fill-color":["case",["boolean",["feature-state","selected"],!1],t.SELECTED_COLOR,n.color],"fill-outline-color":"black","fill-opacity":.7},filter:["all",["match",["geometry-type"],["Polygon","MultiPolygon"],!0,!1]]};else if("POINT"===e||"MULTIPOINT"===e)r={id:n.getId()+"-"+this.getLayerIdGeomTypePostfix(e),type:"circle",source:n.dataSource.getId(),paint:{"circle-radius":10,"circle-color":["case",["boolean",["feature-state","selected"],!1],t.SELECTED_COLOR,n.color],"circle-stroke-width":2,"circle-stroke-color":"#FFFFFF"},filter:["all",["match",["geometry-type"],["Point","MultiPont"],!0,!1]]};else{if("LINE"!==e&&"MULTILINE"!==e)return void console.log("Unexpected geometry type ["+e+"]");r={id:n.getId()+"-"+this.getLayerIdGeomTypePostfix(e),source:n.dataSource.getId(),type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":["case",["boolean",["feature-state","selected"],!1],t.SELECTED_COLOR,n.color],"line-width":3},filter:["all",["match",["geometry-type"],["LineString","MultiLineString"],!0,!1]]}}n.configureMapboxLayer(e,r),n.rendered||(r.layout=null==r.layout?{}:r.layout,r.layout.visibility="none"),this.map.addLayer(r,i?i.getId()+"-"+this.getLayerIdGeomTypePostfix(i.dataSource.getGeometryType()):null)},e.prototype.getLayerIdGeomTypePostfix=function(e){return"MULTIPOLYGON"===e||"POLYGON"===e?"POLYGON":"POINT"===e||"MULTIPOINT"===e?"POINT":"LINE"===e||"MULTILINE"===e?"LINE":"POLYGON"},e.prototype.getMapboxLayerIdsForLayer=function(e){return("MIXED"===e.dataSource.getGeometryType()?["POLYGON","POINT","LINE","LABEL"]:[this.getLayerIdGeomTypePostfix(e.dataSource.getGeometryType()),"LABEL"]).map((function(t){return e.getId()+"-"+t}))},e.prototype.getDrawGeometry=function(){if(null!=this.editingControl){var e=this.editingControl.getAll();if(e.features.length>0){if("MULTIPOLYGON"===this.geometryType){for(var t=[],n=0;n<e.features.length;n++){if("MultiPolygon"===(a=e.features[n]).geometry.type)for(var i=0;i<a.geometry.coordinates.length;i++)t.push(a.geometry.coordinates[i]);else t.push(a.geometry.coordinates)}return{coordinates:t,type:"MultiPolygon"}}if("MULTIPOINT"===this.geometryType){var r=[];for(n=0;n<e.features.length;n++){if("MultiPoint"===(a=e.features[n]).geometry.type)for(i=0;i<a.geometry.coordinates.length;i++)r.push(a.geometry.coordinates[i]);else r.push(a.geometry.coordinates)}return{coordinates:r,type:"MultiPoint"}}if("MULTILINE"===this.geometryType){var o=[];for(n=0;n<e.features.length;n++){var a;if("MultiLineString"===(a=e.features[n]).geometry.type)for(i=0;i<a.geometry.coordinates.length;i++)o.push(a.geometry.coordinates[i]);else o.push(a.geometry.coordinates)}return{coordinates:o,type:"MultiLineString"}}return e.features[0].geometry}}return null},e.createEmptyGeometryValue=function(e){var t={type:e,coordinates:[]},n=e.toUpperCase();return"MULTIPOLYGON"===n||"MIXED"===n?t.type="MultiPolygon":"POLYGON"===n?t.type="Polygon":"POINT"===n?t.type="Point":"MULTIPOINT"===n?t.type="MultiPoint":"LINE"===n?t.type="Line":"MULTILINE"===n&&(t.type="MultiLine"),t},e.prototype.zoomToLayersExtent=function(){var e=this,t=this.getLayers(),n=null;t.forEach((function(e){e instanceof a.GeoJsonLayer&&e.rendered&&(n=e)})),null!=n&&n.dataSource.getLayerData().then((function(t){if(null!=t){var n=null!=t.type?t.type.toUpperCase():e.geometryType;if("MULTIPOINT"===n||"POINT"===n){if(s=t.coordinates){var i=new o.LngLatBounds;s.forEach((function(e){i.extend(e)}));var r=i.getCenter(),a=new o.LngLat(r.lng,r.lat);e.map.flyTo({center:a,zoom:9,essential:!0})}}else if("MULTIPOLYGON"===n||"POLYGON"===n||"MIXED"===n){if(s=t.coordinates){var l=new o.LngLatBounds;s.forEach((function(e){e.forEach((function(e){e.forEach((function(e){l.extend(e)}))}))})),e.map.fitBounds(l,{padding:20})}}else if("LINE"===n||"MULTILINE"===n){var s;if(s=t.coordinates){var c=new o.LngLatBounds;s.forEach((function(e){e.forEach((function(e){e.forEach((function(e){c.extend(e)}))}))})),e.map.fitBounds(c,{padding:20})}}}}))},e.ɵfac=function(t){return new(t||e)(p.ɵɵinject(u.ActivatedRoute),p.ɵɵinject(u.Router),p.ɵɵinject(m.RegistryService),p.ɵɵinject(g.RelationshipVisualizationService),p.ɵɵinject(h.MapService),p.ɵɵinject(f.ListTypeService),p.ɵɵinject(y.LocalizationService))},e.ɵprov=p.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.GeometryService=v,("undefined"==typeof ngDevMode||ngDevMode)&&p.ɵsetClassMetadata(v,[{type:i.Injectable}],(function(){return[{type:u.ActivatedRoute},{type:u.Router},{type:m.RegistryService},{type:g.RelationshipVisualizationService},{type:h.MapService},{type:f.ListTypeService},{type:y.LocalizationService}]}),{geometryChange:[{type:i.Output}],layersChange:[{type:i.Output}]})},1020:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DataSourceFactory=t.RelationshipVisualizionLayer=t.RelationshipVisualizionDataSource=t.RELATIONSHIP_VISUALIZER_DATASOURCE_TYPE=t.SearchLayerDataSource=t.SEARCH_DATASOURCE_TYPE=t.ValueOverTimeDataSource=t.CHANGE_REQUEST_SOURCE_TYPE_OLD=t.CHANGE_REQUEST_SOURCE_TYPE_NEW=t.ListVectorLayer=t.ListVectorLayerDataSource=t.LIST_VECTOR_SOURCE_TYPE=t.GeoObjectLayerDataSource=t.GEO_OBJECT_DATA_SOURCE_TYPE=t.GeoJsonLayer=t.Layer=t.GeoJsonLayerDataSource=t.LayerDataSource=void 0;var o=n(857),a=n(58),l=n(858),s=n(1002),c=n(1019),d=function(){function e(e){this.dataSourceType=e,this.id=l.v4()}return e.prototype.getDataSourceType=function(){return this.dataSourceType},e.prototype.createLayer=function(e,t,n){return new u(this,e,t,n)},e.prototype.fromJSON=function(e){Object.assign(this,e)},e.prototype.toJSON=function(){return{dataSourceType:this.dataSourceType,id:this.id}},e.prototype.getId=function(){return this.id},e}();t.LayerDataSource=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.buildMapboxSource=function(){return{type:"geojson",data:c.GeometryService.createEmptyGeometryValue(this.getGeometryType())}},t.prototype.getBounds=function(e){return this.getLayerData().then((function(e){try{return s.default(e)}catch(e){console.log(e)}return null}))},t}(d);t.GeoJsonLayerDataSource=p;var u=function(){function e(e,t,n,i){this.dataSource=e,this.legendLabel=t,this.rendered=n,this.color=i,this.pinned=!1}return e.prototype.fromJSON=function(e){Object.assign(this,e)},e.prototype.toJSON=function(){return{legendLabel:this.legendLabel,rendered:this.rendered,color:this.color,pinned:this.pinned}},e.prototype.getId=function(){return this.dataSource.getId()},e.prototype.getKey=function(){return this.dataSource.getKey()},e.prototype.getPinned=function(){return this.pinned},e.prototype.setPinned=function(e){this.pinned=e},e.prototype.configureMapboxLayer=function(e,t){},e}();t.Layer=u;var m=function(e){function t(t,n,i,r){var o=e.call(this,t,n,i,r)||this;return o.editing=!1,o}return r(t,e),t}(u);t.GeoJsonLayer=m,t.GEO_OBJECT_DATA_SOURCE_TYPE="GEOOBJ";var g=function(e){function n(n,i,r,o){var a=e.call(this,t.GEO_OBJECT_DATA_SOURCE_TYPE)||this;return a.registryService=n,a.code=i,a.typeCode=r,a.date=o,a}return r(n,e),n.prototype.toJSON=function(){return Object.assign(e.prototype.toJSON.call(this),{code:this.code,typeCode:this.typeCode,date:this.date})},n.prototype.getCode=function(){return this.code},n.prototype.setCode=function(e){this.code=e},n.prototype.getTypeCode=function(){return this.typeCode},n.prototype.setTypeCode=function(e){this.typeCode=e},n.prototype.getDate=function(){return this.date},n.prototype.setDate=function(e){this.date=e},n.prototype.getDataSourceType=function(){return t.GEO_OBJECT_DATA_SOURCE_TYPE},n.prototype.getKey=function(){return this.getDataSourceType()+this.getCode()+this.getTypeCode()+(null==this.getDate()?"":this.getDate())},n.prototype.getGeometryType=function(){return"MIXED"},n.prototype.buildMapboxSource=function(){var e=new a.HttpParams;return e=(e=e.set("code",this.code)).set("typeCode",this.typeCode),null!=this.date&&(e=e.set("date",this.date)),{type:"geojson",data:registry.contextPath+"/cgr/geoobject/get-code?"+e.toString()}},n.prototype.getBounds=function(e){return this.registryService.getGeoObjectBoundsAtDate(this.code,this.typeCode,this.date).then((function(e){return e&&Array.isArray(e)?new o.LngLatBounds([e[0],e[1]],[e[2],e[3]]):null}))},n}(d);t.GeoObjectLayerDataSource=g,t.LIST_VECTOR_SOURCE_TYPE="LISTVECT";var h=function(e){function n(n,i){var r=e.call(this,t.LIST_VECTOR_SOURCE_TYPE)||this;return r.versionId=i,r.listService=n,r}return r(n,e),n.prototype.toJSON=function(){return Object.assign(e.prototype.toJSON.call(this),{versionId:this.versionId})},n.prototype.getVersionId=function(){return this.versionId},n.prototype.getKey=function(){return this.getDataSourceType()+this.getVersionId()},n.prototype.createLayer=function(e,t,n){return new f(this,e,t,n)},n.prototype.buildMapboxSource=function(){return{type:"vector",tiles:[window.location.protocol+"//"+window.location.host+registry.contextPath+"/list-type/tile?x={x}&y={y}&z={z}&config="+encodeURIComponent(JSON.stringify({oid:this.versionId}))],promoteId:"uid"}},n.prototype.getGeometryType=function(){return"MIXED"},n.prototype.getBounds=function(e){return this.listService.getBounds(this.versionId).then((function(e){return e&&Array.isArray(e)?new o.LngLatBounds([e[0],e[1]],[e[2],e[3]]):null}))},n}(d);t.ListVectorLayerDataSource=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.configureMapboxLayer=function(e,t){t["source-layer"]="context","LABEL"===e&&(t.layout["text-field"]=["case",["has","displayLabel_"+navigator.language.toLowerCase()],["coalesce",["get","displayLabel_"+navigator.language.toLowerCase()],["get","displayLabel"],["get","code"]],["coalesce",["get","displayLabel"],["string",["get","code"]]]])},t}(u);t.ListVectorLayer=f,t.CHANGE_REQUEST_SOURCE_TYPE_NEW="CRNEW",t.CHANGE_REQUEST_SOURCE_TYPE_OLD="CROLD";var y=function(e){function n(n,i){var r=e.call(this,"NEW"===n?t.CHANGE_REQUEST_SOURCE_TYPE_NEW:t.CHANGE_REQUEST_SOURCE_TYPE_OLD)||this;return r.votEditor=i,r}return r(n,e),n.prototype.setLayerData=function(e){this.getDataSourceType()===t.CHANGE_REQUEST_SOURCE_TYPE_NEW?this.votEditor.value=e:console.log("ERROR. Cannot edit old geometry")},n.prototype.getLayerData=function(){var e=this;return new Promise((function(n,i){e.getDataSourceType()===t.CHANGE_REQUEST_SOURCE_TYPE_NEW?n(e.votEditor.value):n(e.votEditor.oldValue)}))},n.prototype.getGeometryType=function(){return this.votEditor.changeRequestAttributeEditor.changeRequestEditor.geoObjectType.geometryType},n.prototype.getKey=function(){return this.getDataSourceType()+this.votEditor.oid},n.prototype.createLayer=function(e,t,n){return new m(this,e,t,n)},n.prototype.getBounds=function(e){return this.getLayerData().then((function(e){return s.default(e)}))},n}(p);t.ValueOverTimeDataSource=y,t.SEARCH_DATASOURCE_TYPE="SEARCH";var v=function(e){function n(n,i,r){var o=e.call(this,t.SEARCH_DATASOURCE_TYPE)||this;return o.mapService=n,o.text=i,o.date=r,o}return r(n,e),n.prototype.toJSON=function(){return Object.assign(e.prototype.toJSON.call(this),{text:this.text,date:this.date})},n.prototype.getText=function(){return this.text},n.prototype.getDate=function(){return this.date},n.prototype.setLayerData=function(e){throw new Error("Method not implemented.")},n.prototype.getLayerData=function(){var e=this;return null!=this.geojson?new Promise((function(t,n){t(e.geojson)})):this.mapService.search(this.text,this.date,!1).then((function(t){return e.geojson=t,t}))},n.prototype.getGeometryType=function(){return"MIXED"},n.prototype.getKey=function(){return t.SEARCH_DATASOURCE_TYPE+this.text+(null==this.date?"":this.date)},n}(p);t.SearchLayerDataSource=v,t.RELATIONSHIP_VISUALIZER_DATASOURCE_TYPE="RELVIZ";var b=function(e){function n(n,i,r,o,a,l,s){var c=e.call(this,t.RELATIONSHIP_VISUALIZER_DATASOURCE_TYPE)||this;return c.vizService=n,c.geomService=i,c.relationshipType=r,c.relationshipCode=o,c.sourceObject=a,c.bounds=l,c.date=s,c}return r(n,e),n.prototype.toJSON=function(){return Object.assign(e.prototype.toJSON.call(this),{relationshipType:this.relationshipType,relationshipCode:this.relationshipCode,sourceObject:this.sourceObject,bounds:this.bounds,date:this.date})},n.prototype.getKey=function(){return t.RELATIONSHIP_VISUALIZER_DATASOURCE_TYPE+this.relationshipCode+this.sourceObject.code+this.sourceObject.typeCode+this.bounds+(null==this.date?"":this.date)},n.prototype.createLayer=function(e,t,n){return new S(this,e,t,n)},n.prototype.getRelationshipType=function(){return this.relationshipType},n.prototype.getRelationshipCode=function(){return this.relationshipCode},n.prototype.getSourceObject=function(){return this.sourceObject},n.prototype.hasSameSourceObject=function(e){return this.sourceObject.code===e.code&&this.sourceObject.objectType===e.objectType&&this.sourceObject.typeCode===e.typeCode},n.prototype.getDate=function(){return this.date},n.prototype.setLayerData=function(e){throw new Error("Method not implemented.")},n.prototype.getLayerData=function(){var e=this;return this.data?new Promise((function(t,n){t(e.data)})):(null!=this.dataPromise||(this.dataPromise=this.vizService.treeAsGeoJson(this.relationshipType,this.relationshipCode,this.sourceObject,this.date,this.getBoundsAsWKT()).then((function(t){return e.data=t,e.dataPromise=null,e.data}))),this.dataPromise)},n.prototype.getBoundsAsWKT=function(){var e=null;if(null!=this.bounds){var t=new o.LngLatBounds(JSON.parse(this.bounds));e=this.convertBoundsToWKT(t)}return e},n.prototype.convertBoundsToWKT=function(e){var t=e.getSouthEast(),n=e.getSouthWest(),i=e.getNorthWest(),r=e.getNorthEast();return"POLYGON (("+t.lng+" "+t.lat+","+n.lng+" "+n.lat+","+i.lng+" "+i.lat+","+r.lng+" "+r.lat+","+t.lng+" "+t.lat+"))"},n.prototype.getGeometryType=function(){return"MIXED"},n.prototype.getBounds=function(e){return this.getLayerData().then((function(t){return null==t?null:(null!=e.getRelatedTypeFilter()&&(t.features=t.features.filter((function(t){return t.properties.type===e.getRelatedTypeFilter()}))),s.default(t))}))},n}(p);t.RelationshipVisualizionDataSource=b;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.toJSON=function(){return Object.assign(e.prototype.toJSON.call(this),{relatedTypeFilter:this.relatedTypeFilter})},t.prototype.getId=function(){return null==this.relatedTypeFilter?"":this.relatedTypeFilter+this.dataSource.getId()},t.prototype.getKey=function(){return null==this.relatedTypeFilter?"":this.relatedTypeFilter+this.dataSource.getKey()},t.prototype.setRelatedTypeFilter=function(e){this.relatedTypeFilter=e},t.prototype.getRelatedTypeFilter=function(){return this.relatedTypeFilter},t.prototype.configureMapboxLayer=function(e,t){if(null!=this.relatedTypeFilter){var n=["match",["get","type"],this.relatedTypeFilter,!0,!1];null!=t.filter?t.filter.push(n):t.filter=n}},t}(u);t.RelationshipVisualizionLayer=S;var C=function(){function e(e,t,n,i,r){this.dataSources={},this.geomService=e,this.registryService=t,this.vizService=n,this.mapService=i,this.listService=r}return e.prototype.getRegisteredDataSource=function(e){return this.dataSources[e]},e.prototype.registerDataSource=function(e){this.dataSources[e.getId()]=e},e.prototype.unregisterDataSource=function(e){delete this.dataSources[e]},e.prototype.newDataSourceFromType=function(e){return e===t.GEO_OBJECT_DATA_SOURCE_TYPE?new g(this.registryService):e===t.RELATIONSHIP_VISUALIZER_DATASOURCE_TYPE?new b(this.vizService,this.geomService):e===t.LIST_VECTOR_SOURCE_TYPE?new h(this.listService):e===t.SEARCH_DATASOURCE_TYPE?new v(this.mapService):(console.log("Cannot find data source of type '"+e+"'"),null)},e.prototype.deserializeDataSource=function(e){var t=this.newDataSourceFromType(e.dataSourceType);return null==t&&null!=this.dataSources[e.id]?this.dataSources[e.id]:null==t?null:(t.fromJSON(e),t)},e.prototype.serializeDataSource=function(e){return e.toJSON()},e.prototype.deserializeLayer=function(e,t){var n;return n=t.createLayer(e.legendLabel,e.rendered,e.color),Object.assign(n,e),n.dataSource=t,n},e.prototype.serializeLayer=function(e){var t=e.toJSON();return t.dataSource=e.dataSource.getId(),t},e.prototype.deserializeLayers=function(e){var t=this,n=[],i=[];return e.dataSources.forEach((function(e){var n=t.deserializeDataSource(e);null!=n&&i.push(n)})),e.layers.forEach((function(e){var r=i.findIndex((function(t){return t.getId()===e.dataSource}));-1!==r&&n.push(t.deserializeLayer(e,i[r]))})),n},e.prototype.serializeLayers=function(e){var t=this,n={layers:[],dataSources:[]};return e.forEach((function(e){if(-1===n.dataSources.findIndex((function(t){return t.id===e.dataSource.getId()}))){var i=t.serializeDataSource(e.dataSource);n.dataSources.push(i)}})),e.forEach((function(e){var i=t.serializeLayer(e);n.layers.push(i)})),n},e}();t.DataSourceFactory=C},1021:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClassificationService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(0)),l=n(58),s=n(25),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.apply=function(e,t,n,i){var a=this,l=new r.HttpHeaders({"Content-Type":"application/json"}),s={classificationCode:e,classification:n,isNew:i};return null!=t&&(s.parentCode=t),this.eventService.start(),this.http.post(registry.contextPath+"/classification/apply",JSON.stringify(s),{headers:l}).pipe(o.finalize((function(){a.eventService.complete()}))).toPromise()},e.prototype.remove=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"}),a={classificationCode:e,code:t};return this.eventService.start(),this.http.post(registry.contextPath+"/classification/remove",JSON.stringify(a),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.move=function(e,t,n){var i=this,a=new r.HttpHeaders({"Content-Type":"application/json"}),l={classificationCode:e,code:t,parentCode:n};return this.eventService.start(),this.http.post(registry.contextPath+"/classification/move",JSON.stringify(l),{headers:a}).pipe(o.finalize((function(){i.eventService.complete()}))).toPromise()},e.prototype.getChildren=function(e,t,n,i){var o=new r.HttpParams;return o=(o=(o=o.set("classificationCode",e)).set("pageNumber",n.toString())).set("pageSize",i.toString()),null!=t&&(o=o.set("code",t)),this.http.get(registry.contextPath+"/classification/get-children",{params:o}).toPromise()},e.prototype.getAncestorTree=function(e,t,n,i){var o=new r.HttpParams;return o=(o=(o=o.set("classificationCode",e)).set("code",n)).set("pageSize",i.toString()),null!=t&&(o=o.set("rootCode",t)),this.http.get(registry.contextPath+"/classification/get-ancestor-tree",{params:o}).toPromise()},e.prototype.search=function(e,t,n){var i=new r.HttpParams;return i=i.set("classificationCode",e),null!=t&&(i=i.set("rootCode",t)),null!=n&&(i=i.set("text",n)),this.http.get(registry.contextPath+"/classification/search",{params:i}).toPromise()},e.prototype.get=function(e,t){var n=new r.HttpParams;return n=(n=n.set("classificationCode",e)).set("code",t),this.http.get(registry.contextPath+"/classification/get",{params:n}).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.ClassificationService=c,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService}]}),null)},1022:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistryCacheService=void 0;var i=n(0),r=n(378),o=n(1036),a=n(861),l=(n(1015),n(0)),s=n(1015),c=function(){function e(e){var t=this;this.service=e,this.subscription=null,this.typeCache=new r.GeoObjectTypeCache(this.service);var n=o.WebSockets.buildBaseUrl();this.notifier=a.webSocket(n+"/websocket/notify"),this.subscription=this.notifier.subscribe((function(e){"TYPE_CACHE_CHANGE"===e.type&&t.typeCache.refresh()}))}return e.prototype.getTypeCache=function(){return this.typeCache},e.ɵfac=function(t){return new(t||e)(l.ɵɵinject(s.RegistryService))},e.ɵprov=l.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.RegistryCacheService=c,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:s.RegistryService}]}),null)},1023:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PageEvent=t.GovernanceStatus=t.ChangeRequest=t.UpdateChangeRequestCurrentObject=t.ChangeRequestCurrentObject=t.UpdateAttributeAction=t.UpdateAttributeOverTimeAction=t.CreateGeoObjectAction=t.AbstractAction=t.ValueOverTimeDiff=t.Geometry=t.Document=t.SummaryKey=void 0;var o=n(544);!function(e){e.NEW="NEW",e.UNMODIFIED="UNMODIFIED",e.DELETE="DELETE",e.UPDATE="UPDATE",e.TIME_CHANGE="TIME_CHANGE",e.VALUE_CHANGE="VALUE_CHANGE"}(t.SummaryKey||(t.SummaryKey={}));var a=function(){};t.Document=a;var l=function(){};t.Geometry=l;var s=function(){};t.ValueOverTimeDiff=s;var c=function(){};t.AbstractAction=c;var d=function(e){function t(){var t=e.call(this)||this;return t.actionType=o.ActionTypes.CREATEGEOOBJECTACTION,t}return r(t,e),t}(c);t.CreateGeoObjectAction=d;var p=function(e){function t(t){var n=e.call(this)||this;return n.actionType=o.ActionTypes.UPDATEATTRIBUTETACTION,n.attributeName=t,n.attributeDiff={valuesOverTime:[]},n}return r(t,e),t}(c);t.UpdateAttributeOverTimeAction=p;var u=function(e){function t(t){var n=e.call(this)||this;return n.actionType=o.ActionTypes.UPDATEATTRIBUTETACTION,n.attributeName=t,n.attributeDiff={},n}return r(t,e),t}(c);t.UpdateAttributeAction=u;var m=function(){};t.ChangeRequestCurrentObject=m;var g=function(){};t.UpdateChangeRequestCurrentObject=g;var h=function(){function e(){this.isNew=!0}return e.getActionsForAttribute=function(e,t,n){if("CreateGeoObject"===e.type)return e.actions;for(var i=[],r=0;r<e.actions.length;++r){var o=e.actions[r];if("UpdateAttributeAction"===o.actionType){var a=o;a.attributeName!==t||"_PARENT_"===t&&a.attributeDiff.hierarchyCode!==n||i.push(e.actions[r])}}return i},e}();t.ChangeRequest=h;var f=function(){};t.GovernanceStatus=f;var y=function(){};t.PageEvent=y},1024:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeRequestService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(0)),l=n(58),s=n(25),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.implementDecisions=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/changerequest/implement-decisions",JSON.stringify({request:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.update=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/changerequest/update",JSON.stringify({request:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.setActionStatus=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/changerequest/set-action-status",JSON.stringify({actionOid:e,status:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getAllRequests=function(e,t,n,i,a){var l=this,s=new r.HttpParams;return s=(s=(s=(s=s.set("pageSize",e.toString())).set("pageNumber",t.toString())).set("filter",n)).set("sort",JSON.stringify(i)),null!=a&&(s=s.set("oid",a)),this.eventService.start(),this.http.get(registry.contextPath+"/changerequest/get-all-requests",{params:s}).pipe(o.finalize((function(){l.eventService.complete()}))).toPromise()},e.prototype.rejectChangeRequest=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/changerequest/reject",JSON.stringify({request:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.delete=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/changerequest/delete",JSON.stringify({requestId:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.deleteFile=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/changerequest/delete-file-cr",JSON.stringify({crOid:e,vfOid:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.ChangeRequestService=c,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService}]}),null)},1025:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistryService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(0)),l=n(58),s=n(25),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.init=function(){return this.http.get(registry.contextPath+"/cgr/init").toPromise()},e.prototype.getGeoObjectTypes=function(e,t){var n=new r.HttpParams;return null!=e&&(n=n.set("types",JSON.stringify(e))),null!=t&&(n=n.set("hierarchies",JSON.stringify(t))),this.http.get(registry.contextPath+"/cgr/geoobjecttype/get-all",{params:n}).toPromise()},e.prototype.getParentGeoObjects=function(e,t,n,i,o){var a=new r.HttpParams;return a=(a=(a=(a=a.set("childCode",e)).set("childTypeCode",t)).set("parentTypes",JSON.stringify(n))).set("recursive",JSON.stringify(i)),null!=o&&(a=a.set("date",o)),this.http.get(registry.contextPath+"/cgr/geoobject/get-parent-geoobjects",{params:a}).toPromise()},e.prototype.getChildGeoObjects=function(e,t,n,i){var o=new r.HttpParams;return o=(o=(o=(o=o.set("parentCode",e)).set("parentTypeCode",t)).set("childrenTypes",JSON.stringify(n))).set("recursive",JSON.stringify(i)),this.http.get(registry.contextPath+"/cgr/geoobject/getchildren",{params:o}).toPromise()},e.prototype.doesGeoObjectExistAtRange=function(e,t,n,i){var o=new r.HttpParams;return o=(o=(o=(o=o.set("startDate",e)).set("endDate",t)).set("typeCode",n)).set("code",i),this.http.get(registry.contextPath+"/geoobject/exists-at-range",{params:o}).toPromise()},e.prototype.newGeoObjectInstance=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/geoobject/newGeoObjectInstance",JSON.stringify({typeCode:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.createGeoObjectType=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/geoobjecttype/create",JSON.stringify({gtJSON:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.updateGeoObjectType=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/geoobjecttype/update",JSON.stringify({gtJSON:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.deleteGeoObjectType=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/geoobjecttype/delete",JSON.stringify({code:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.addAttributeType=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/geoobjecttype/addattribute",JSON.stringify({geoObjTypeId:e,attributeType:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.updateAttributeType=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/geoobjecttype/updateattribute",JSON.stringify({geoObjTypeId:e,attributeType:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.deleteAttributeType=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/geoobjecttype/deleteattribute",JSON.stringify({geoObjTypeId:e,attributeName:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.addAttributeTermTypeOption=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/geoobjecttype/addterm",JSON.stringify({parentTermCode:e,termJSON:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.updateAttributeTermTypeOption=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/geoobjecttype/updateterm",JSON.stringify({parentTermCode:e,termJSON:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.deleteAttributeTermTypeOption=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/geoobjecttype/deleteterm",JSON.stringify({parentTermCode:e,termCode:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getGeoObject=function(e,t,n){var i=this;void 0===n&&(n=!0);var a=new r.HttpParams;return a=(a=a.set("id",e)).set("typeCode",t),n&&this.eventService.start(),this.http.get(registry.contextPath+"/cgr/geoobject/get",{params:a}).pipe(o.finalize((function(){n&&i.eventService.complete()}))).toPromise()},e.prototype.getGeoObjectBounds=function(e,t){var n=new r.HttpParams;return n=(n=n.set("code",e)).set("typeCode",t),this.http.get(registry.contextPath+"/cgr/geoobject/get-bounds",{params:n}).toPromise()},e.prototype.getGeoObjectBoundsAtDate=function(e,t,n){var i=new r.HttpParams;return i=(i=i.set("code",e)).set("typeCode",t),null!=n&&(i=i.set("date",n)),this.http.get(registry.contextPath+"/cgr/geoobject-time/get-bounds",{params:i}).toPromise()},e.prototype.getGeoObjectByCode=function(e,t){var n=new r.HttpParams;return n=(n=n.set("code",e)).set("typeCode",t),this.http.get(registry.contextPath+"/cgr/geoobject/get-code",{params:n}).toPromise()},e.prototype.getHierarchiesForGeoObject=function(e,t,n){var i=this;void 0===n&&(n=!0);var a=new r.HttpParams;return a=(a=a.set("code",e)).set("typeCode",t),n&&this.eventService.start(),this.http.get(registry.contextPath+"/cgr/geoobject/get-hierarchies-over-time",{params:a}).pipe(o.finalize((function(){n&&i.eventService.complete()}))).toPromise()},e.prototype.getGeoObjectSuggestions=function(e,t,n,i,o,a,l){var s=new r.HttpHeaders({"Content-Type":"application/json"}),c={text:e,type:t};return null!=n&&null!=o&&(c.parent=n,c.hierarchy=o),null!=i&&(c.parentTypeCode=i),null!=a&&null!=l&&(c.startDate=a,c.endDate=l),this.http.post(registry.contextPath+"/cgr/geoobject/suggestions",JSON.stringify(c),{headers:s}).toPromise()},e.prototype.getGeoObjectSuggestionsTypeAhead=function(e,t){var n=new r.HttpHeaders({"Content-Type":"application/json"}),i={text:e,type:t};return this.http.post(registry.contextPath+"/cgr/geoobject/suggestions",JSON.stringify(i),{headers:n}).toPromise()},e.prototype.getScheduledJobs=function(e,t,n,i){var o=new r.HttpParams;return o=(o=(o=(o=o.set("pageSize",e.toString())).set("pageNumber",t.toString())).set("sortAttr",n)).set("isAscending",i.toString()),this.http.get(registry.contextPath+"/etl/get-active",{params:o}).toPromise()},e.prototype.getCompletedScheduledJobs=function(e,t,n,i){var o=new r.HttpParams;return o=(o=(o=(o=o.set("pageSize",e.toString())).set("pageNumber",t.toString())).set("sortAttr",n)).set("isAscending",i.toString()),this.http.get(registry.contextPath+"/etl/get-completed",{params:o}).toPromise()},e.prototype.getScheduledJob=function(e,t,n,i){var o=new r.HttpParams;return o=(o=(o=(o=o.set("historyId",e)).set("pageSize",t.toString())).set("pageNumber",n.toString())).set("onlyUnresolved",i.toString()),this.http.get(registry.contextPath+"/etl/get-import-details",{params:o}).toPromise()},e.prototype.getExportDetails=function(e,t,n){var i=new r.HttpParams;return i=(i=(i=i.set("historyId",e)).set("pageSize",t.toString())).set("pageNumber",n.toString()),this.http.get(registry.contextPath+"/etl/get-export-details",{params:i}).toPromise()},e.prototype.resolveScheduledJob=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/etl/import-resolve",JSON.stringify({historyId:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.submitValidationResolve=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/etl/validation-resolve",JSON.stringify({config:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.submitErrorResolve=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/etl/error-resolve",JSON.stringify({config:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.getLocales=function(){var e=new r.HttpParams;return this.http.get(registry.contextPath+"/localization/get-locales",{params:e}).toPromise()},e.prototype.getGeoObjectOverTime=function(e,t){var n=new r.HttpParams;return n=(n=n.set("code",e)).set("typeCode",t),this.http.get(registry.contextPath+"/cgr/geoobject-time/get-code",{params:n}).toPromise()},e.prototype.newGeoObjectOverTime=function(e,t){var n=this;void 0===t&&(t=!0);var i=new r.HttpHeaders({"Content-Type":"application/json"});return t&&this.eventService.start(),this.http.post(registry.contextPath+"/cgr/geoobject-time/newGeoObjectInstance",JSON.stringify({typeCode:e}),{headers:i}).pipe(o.finalize((function(){t&&n.eventService.complete()}))).toPromise()},e.prototype.setAttributeVersions=function(e,t,n,i){var a=this,l=new r.HttpHeaders({"Content-Type":"application/json"}),s={geoObjectCode:e,geoObjectTypeCode:t,attributeName:n,collection:i};return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/geoobject/setAttributeVersions",JSON.stringify(s),{headers:l}).pipe(o.finalize((function(){a.eventService.complete()}))).toPromise()},e.prototype.applyGeoObjectEdit=function(e,t,n,i,a,l){var s=this;void 0===l&&(l=!0);var c=new r.HttpHeaders({"Content-Type":"application/json"}),d={geoObjectCode:e,geoObjectTypeCode:t,actions:n};return null!=i&&(d.masterListId=i),null!=a&&(d.notes=a),l&&this.eventService.start(),this.http.post(registry.contextPath+"/geoobject-editor/updateGeoObject",JSON.stringify(d),{headers:c}).pipe(o.finalize((function(){l&&s.eventService.complete()}))).toPromise()},e.prototype.applyGeoObjectCreate=function(e,t,n,i,a,l){var s=this;void 0===l&&(l=!0);var c=new r.HttpHeaders({"Content-Type":"application/json"});for(var d in t.attributes){var p=t.attributes[d];"date"===p.type&&p.values.forEach((function(e){e.value=new Date(e.value).getTime().toString()}))}var u={geoObject:t,isNew:n,masterListId:i};return null!=e&&(u.parentTreeNode=e),null!=a&&(u.notes=a),l&&this.eventService.start(),this.http.post(registry.contextPath+"/geoobject-editor/createGeoObject",JSON.stringify(u),{headers:c}).pipe(o.finalize((function(){l&&s.eventService.complete()}))).toPromise()},e.prototype.progress=function(e){var t=new r.HttpParams;return t=t.set("oid",e),this.http.get(registry.contextPath+"/master-list/progress",{params:t}).toPromise()},e.prototype.getDatasetBounds=function(e){var t=new r.HttpParams;return t=t.set("oid",e),this.http.get(registry.contextPath+"/master-list/bounds",{params:t}).toPromise()},e.prototype.getOrganizations=function(){var e=this;return this.eventService.start(),this.http.get(registry.contextPath+"/cgr/organizations/get-all").pipe(o.finalize((function(){e.eventService.complete()}))).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.RegistryService=c,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService}]}),null)},1026:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipVisualizationService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(57),n(0)),l=n(58),s=n(25),c=n(57),d=function(){function e(e,t,n){this.http=e,this.eventService=t,this.route=n}return e.prototype.tree=function(e,t,n,i,a){var l=new r.HttpParams;return l=l.set("sourceVertex",JSON.stringify(n)),null!=e&&(l=l.set("relationshipType",e)),null!=t&&(l=l.set("graphTypeCode",t)),i&&(l=l.set("date",i)),a&&(l=l.set("boundsWKT",a)),this.http.get(registry.contextPath+"/relationship-visualization/tree",{params:l}).pipe(o.finalize((function(){}))).toPromise()},e.prototype.treeAsGeoJson=function(e,t,n,i,a){var l=new r.HttpParams;return l=(l=l.set("sourceVertex",JSON.stringify(n))).set("graphTypeCode",t),null!=e&&(l=l.set("relationshipType",e)),i&&(l=l.set("date",i)),a&&(l=l.set("boundsWKT",a)),this.http.get(registry.contextPath+"/relationship-visualization/treeAsGeoJson",{params:l}).pipe(o.finalize((function(){}))).toPromise()},e.prototype.relationships=function(e,t){var n=new r.HttpParams;return n=(n=n.set("objectType",e)).set("typeCode",t),this.http.get(registry.contextPath+"/relationship-visualization/relationships",{params:n}).pipe(o.finalize((function(){}))).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService),a.ɵɵinject(c.ActivatedRoute))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.RelationshipVisualizationService=d,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(d,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService},{type:c.ActivatedRoute}]}),null)},1027:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClassificationTypeService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(0)),l=n(58),s=n(25),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.apply=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/classification-type/apply",JSON.stringify({classificationType:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.remove=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/classification-type/remove",JSON.stringify({oid:e.oid}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.page=function(e){var t=new r.HttpHeaders({"Content-Type":"application/json"}),n={criteria:e};return this.http.post(registry.contextPath+"/classification-type/page",JSON.stringify(n),{headers:t}).toPromise()},e.prototype.get=function(e){var t=new r.HttpParams;return t=t.set("classificationCode",e),this.http.get(registry.contextPath+"/classification-type/get",{params:t}).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.ClassificationTypeService=c,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService}]}),null)},1028:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransitionEventService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(0)),l=n(58),s=n(25),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.getPage=function(e,t,n){var i=this,a=new r.HttpParams;return a=(a=(a=a.set("pageSize",e.toString())).set("pageNumber",t.toString())).set("attrConditions",JSON.stringify(n)),this.eventService.start(),this.http.get(registry.contextPath+"/transition-event/page",{params:a}).pipe(o.finalize((function(){i.eventService.complete()}))).toPromise()},e.prototype.getDetails=function(e){var t=this,n=new r.HttpParams;return n=n.set("oid",e),this.eventService.start(),this.http.get(registry.contextPath+"/transition-event/get-details",{params:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.apply=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/transition-event/apply",JSON.stringify({event:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.delete=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/transition-event/delete",JSON.stringify({eventId:e.oid}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.getHistoricalReport=function(e,t,n,i,a){var l=this,s=new r.HttpParams;return s=(s=(s=(s=(s=s.set("typeCode",e.toString())).set("startDate",t.toString())).set("endDate",n.toString())).set("pageSize",i.toString())).set("pageNumber",a.toString()),this.eventService.start(),this.http.get(registry.contextPath+"/transition-event/historical-report",{params:s}).pipe(o.finalize((function(){l.eventService.complete()}))).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.TransitionEventService=c,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService}]}),null)},1029:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalizedTextComponent=void 0;var i=n(0),r=(n(291),n(0)),o=n(1),a=n(88),l=n(545),s=n(18),c=function(e,t){return{row:e,"row-holder":t}},d=function(e){return{"col-md-12":e}},p=function(e){return{"label-holder":e}},u=function(e){return{holder:e}};function m(e,t){if(1&e&&(r.ɵɵelementStart(0,"div"),r.ɵɵelementStart(1,"div",1),r.ɵɵelementStart(2,"div",1),r.ɵɵelementStart(3,"div",2),r.ɵɵelementStart(4,"div",1),r.ɵɵelementStart(5,"label"),r.ɵɵelement(6,"localize",3),r.ɵɵelementStart(7,"span",4),r.ɵɵtext(8," ("),r.ɵɵelement(9,"convert-key-label",3),r.ɵɵtext(10,")"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(11,"div",1),r.ɵɵelementStart(12,"span",5),r.ɵɵelementStart(13,"textarea",6),r.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=t.$implicit,i=r.ɵɵnextContext();r.ɵɵadvance(1),r.ɵɵproperty("ngClass",r.ɵɵpureFunction2(9,c,i.inlinelayout,!i.inlinelayout)),r.ɵɵadvance(1),r.ɵɵproperty("ngClass",r.ɵɵpureFunction1(12,d,i.inlinelayout)),r.ɵɵadvance(2),r.ɵɵproperty("ngClass",r.ɵɵpureFunction1(14,p,!i.inlinelayout)),r.ɵɵadvance(2),r.ɵɵproperty("key",i.key),r.ɵɵadvance(3),r.ɵɵproperty("key",n.locale),r.ɵɵadvance(2),r.ɵɵproperty("ngClass",r.ɵɵpureFunction1(16,u,!i.inlinelayout)),r.ɵɵadvance(2),r.ɵɵproperty("ngModel",n.value)("disabled",i.disabled)("name","description-"+n.locale)}}var g=function(){function e(){this.key="",this.disabled=!1,this.inlinelayout=!1,this.valueChange=new i.EventEmitter}return e.ɵfac=function(t){return new(t||e)},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["localized-text"]],inputs:{key:"key",value:"value",disabled:"disabled",inlinelayout:"inlinelayout"},outputs:{valueChange:"valueChange"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"form-group"],[3,"key"],[2,"color","#BABABA"],[1,"text"],[3,"ngModel","disabled","name","ngModelChange"]],template:function(e,t){1&e&&r.ɵɵtemplate(0,m,14,18,"div",0),2&e&&r.ɵɵproperty("ngForOf",t.value.localeValues)},directives:[o.NgForOf,o.NgClass,a.LocalizeComponent,l.ConvertKeyLabel,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel],styles:["textarea[_ngcontent-%COMP%] {\n\twidth: 100%;\n    border-radius: 5px;\n    min-height: 70px;\n}"]}),e}();t.LocalizedTextComponent=g,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(g,[{type:i.Component,args:[{selector:"localized-text",templateUrl:"./localized-text.component.html",styleUrls:["./localized-text.css"]}]}],(function(){return[]}),{key:[{type:i.Input}],value:[{type:i.Input}],disabled:[{type:i.Input}],inlinelayout:[{type:i.Input}],valueChange:[{type:i.Output}]})},1030:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportConfiguration=t.Synonym=t.Exclusion=t.LocationProblem=t.TermProblem=t.Term=t.Location=t.ImportSheet=void 0;var i=function(){};t.ImportSheet=i;var r=function(){};t.Location=r;var o=function(){};t.Term=o;var a=function(){};t.TermProblem=a;var l=function(){};t.LocationProblem=l;var s=function(){};t.Exclusion=s;var c=function(){};t.Synonym=c;var d=function(){};t.ImportConfiguration=d},1033:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalizedInputComponent=void 0;var i=n(0),r=(n(291),n(0)),o=n(1),a=n(88),l=n(545),s=n(18);function c(e,t){if(1&e&&(r.ɵɵelementStart(0,"div",1),r.ɵɵelementStart(1,"div",2),r.ɵɵelementStart(2,"label"),r.ɵɵelement(3,"localize",3),r.ɵɵelementStart(4,"span",4),r.ɵɵtext(5," ("),r.ɵɵelement(6,"convert-key-label",3),r.ɵɵtext(7,")"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(8,"div",5),r.ɵɵelementStart(9,"span",6),r.ɵɵelementStart(10,"input",7),r.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=t.$implicit,i=r.ɵɵnextContext();r.ɵɵadvance(3),r.ɵɵproperty("key",i.key),r.ɵɵadvance(3),r.ɵɵproperty("key",n.locale),r.ɵɵadvance(4),r.ɵɵproperty("ngModel",n.value)("name","label-"+n.locale)("disabled",i.disabled)("required","defaultLocale"===n.locale)}}var d=function(){function e(){this.key="",this.disabled=!1,this.valueChange=new i.EventEmitter}return e.ɵfac=function(t){return new(t||e)},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["localized-input"]],inputs:{key:"key",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:1,vars:1,consts:[["class","row-holder",4,"ngFor","ngForOf"],[1,"row-holder"],[1,"label-holder"],[3,"key"],[2,"color","#BABABA"],[1,"holder"],[1,"text"],["type","text",1,"form-control",3,"ngModel","name","disabled","required","ngModelChange"]],template:function(e,t){1&e&&r.ɵɵtemplate(0,c,11,6,"div",0),2&e&&r.ɵɵproperty("ngForOf",t.value.localeValues)},directives:[o.NgForOf,a.LocalizeComponent,l.ConvertKeyLabel,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel,s.RequiredValidator],encapsulation:2}),e}();t.LocalizedInputComponent=d,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(d,[{type:i.Component,args:[{selector:"localized-input",templateUrl:"./localized-input.component.html",styleUrls:[]}]}],(function(){return[]}),{key:[{type:i.Input}],value:[{type:i.Input}],disabled:[{type:i.Input}],valueChange:[{type:i.Output}]})},1034:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapService=void 0;var i=n(0),r=n(58),o=n(52),a=n(857),l=(n(25),n(0)),s=n(58),c=n(25),d=function(){function e(e,t){this.http=e,this.eventService=t,a.accessToken=registry.mapboxAccessToken}return e.prototype.roots=function(e,t,n){var i=this,a=new r.HttpParams;return null!=e&&(a=a.set("typeCode",e)),null!=t&&(a=a.set("hierarchyCode",t)),null!=n&&(a=a.set("date",n)),this.eventService.start(),this.http.get(registry.contextPath+"/registrylocation/roots",{params:a}).pipe(o.finalize((function(){i.eventService.complete()}))).toPromise()},e.prototype.search=function(e,t,n){var i=this;void 0===n&&(n=!0);var a=new r.HttpParams;return a=a.set("text",e),null!=t&&(a=a.set("date",t)),n&&this.eventService.start(),this.http.get(registry.contextPath+"/registrylocation/search",{params:a}).pipe(o.finalize((function(){n&&i.eventService.complete()}))).toPromise()},e.ɵfac=function(t){return new(t||e)(l.ɵɵinject(s.HttpClient),l.ɵɵinject(c.EventService))},e.ɵprov=l.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.MapService=d,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(d,[{type:i.Injectable}],(function(){return[{type:s.HttpClient},{type:c.EventService}]}),null)},1035:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeInputComponent=void 0;var i=n(0),r=n(2),o=(n(378),n(1027),n(0)),a=n(1027),l=n(88),s=n(18),c=n(1085),d=n(1033),p=n(1),u=n(1029),m=n(549),g=n(1040);function h(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"localized-text",10),o.ɵɵlistener("valueChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().attribute.description=e})),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext();o.ɵɵproperty("value",i.attribute.description)}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",0),o.ɵɵelementStart(1,"div",1),o.ɵɵelementStart(2,"label"),o.ɵɵelement(3,"localize",11),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"div",3),o.ɵɵelementStart(5,"span",4),o.ɵɵelementStart(6,"input",12),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().attribute.precision=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext();o.ɵɵadvance(6),o.ɵɵproperty("ngModel",i.attribute.precision)}}function y(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",0),o.ɵɵelementStart(1,"div",1),o.ɵɵelementStart(2,"label"),o.ɵɵelement(3,"localize",13),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"div",3),o.ɵɵelementStart(5,"span",4),o.ɵɵelementStart(6,"input",14),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().attribute.scale=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext();o.ɵɵadvance(6),o.ɵɵproperty("ngModel",i.attribute.scale)}}function v(e,t){if(1&e&&(o.ɵɵelementStart(0,"option",19),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵproperty("value",n.code),o.ɵɵadvance(1),o.ɵɵtextInterpolate1(" ",n.displayLabel.localizedValue," ")}}function b(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",20),o.ɵɵelementStart(1,"div",1),o.ɵɵelementStart(2,"label"),o.ɵɵtext(3," Root Term "),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"div",3),o.ɵɵelementStart(5,"classification-field",21),o.ɵɵlistener("valueChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).attribute.rootTerm=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext(2);o.ɵɵadvance(5),o.ɵɵproperty("classificationType",i.attribute.classificationType)("value",i.attribute.rootTerm)("disabled",!i.isNew)}}function S(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementContainerStart(0),o.ɵɵelementStart(1,"div",0),o.ɵɵelementStart(2,"div",1),o.ɵɵelementStart(3,"label"),o.ɵɵelement(4,"localize",15),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(5,"div",3),o.ɵɵelementStart(6,"select",16),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().attribute.classificationType=e})),o.ɵɵelement(7,"option"),o.ɵɵtemplate(8,v,2,2,"option",17),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵtemplate(9,b,6,3,"div",18),o.ɵɵelementContainerEnd()}if(2&e){var i=o.ɵɵnextContext();o.ɵɵadvance(6),o.ɵɵproperty("ngModel",i.attribute.classificationType)("disabled",!i.isNew),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",i.classifications),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null!=i.attribute.classificationType&&i.attribute.classificationType.length>0)}}var C=function(){function e(e,t){this.service=e,this.cdr=t,this.isNew=!1,this.excludeDescription=!1,this.type=null,this.attributeChange=new i.EventEmitter,this.message=null,this.state="none",this.classifications=[]}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.state="show",this.cdr.detectChanges()},e.prototype.ngOnChanges=function(e){var t=this;null!=e.type&&"classification"===this.attribute.type&&this.service.page({}).then((function(e){t.classifications=e.resultSet}))},e.prototype.ngOnDestroy=function(){},e.prototype.handleOnSubmit=function(){},e.prototype.toggleIsUnique=function(){this.attribute.unique=!this.attribute.unique},e.prototype.animate=function(){this.state="none"},e.prototype.onAnimationDone=function(e){this.state="show"},e.prototype.isValid=function(){return!!this.attribute.code&&(-1===this.attribute.code.indexOf(" ")&&(0!==this.attribute.label.localeValues[0].value.length&&(("float"!==this.type||null!=this.attribute.precision&&""!==this.attribute.precision.toString())&&(("float"!==this.type||null!=this.attribute.scale&&""!==this.attribute.scale.toString())&&("classification"!==this.type||null!=this.attribute.classificationType&&0!==this.attribute.classificationType.length)))))},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.ClassificationTypeService),o.ɵɵdirectiveInject(o.ChangeDetectorRef))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["attribute-input"]],inputs:{isNew:"isNew",excludeDescription:"excludeDescription",type:"type",geoObjectType:"geoObjectType",attribute:"attribute"},outputs:{attributeChange:"attributeChange"},features:[o.ɵɵNgOnChangesFeature],decls:13,vars:7,consts:[[1,"row-holder"],[1,"label-holder"],["key","data.property.label.code"],[1,"holder"],[1,"text"],["autofocus","","type","text","name","code","required","","geoObjectAttributeCode","",3,"disabled","ngModel","ngModelChange"],["key","data.property.label.label",3,"value","valueChange"],["key","data.property.label.description",3,"value","valueChange",4,"ngIf"],["class","row-holder",4,"ngIf"],[4,"ngIf"],["key","data.property.label.description",3,"value","valueChange"],["key","data.property.label.length"],["type","text","name","precision","OnlyNumber","true","required","",3,"ngModel","ngModelChange"],["key","data.property.label.decimal"],["type","text","name","scale","OnlyNumber","true","required","",3,"ngModel","ngModelChange"],["key","data.type.label.classification"],["name","classificationType","required","",1,"select-area",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","row-holder","style","overflow: initial;",4,"ngIf"],[3,"value"],[1,"row-holder",2,"overflow","initial"],["name","classification-root","container","body",3,"classificationType","value","disabled","valueChange"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"div",0),o.ɵɵelementStart(2,"div",1),o.ɵɵelementStart(3,"label"),o.ɵɵelement(4,"localize",2),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(5,"div",3),o.ɵɵelementStart(6,"span",4),o.ɵɵelementStart(7,"input",5),o.ɵɵlistener("ngModelChange",(function(e){return t.attribute.code=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(8,"localized-input",6),o.ɵɵlistener("valueChange",(function(e){return t.attribute.label=e})),o.ɵɵelementEnd(),o.ɵɵtemplate(9,h,1,1,"localized-text",7),o.ɵɵtemplate(10,f,7,1,"div",8),o.ɵɵtemplate(11,y,7,1,"div",8),o.ɵɵtemplate(12,S,10,4,"ng-container",9),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(7),o.ɵɵproperty("disabled",!t.isNew)("ngModel",t.attribute.code),o.ɵɵadvance(1),o.ɵɵproperty("value",t.attribute.label),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",!t.excludeDescription),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","float"===t.type),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","float"===t.type),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","classification"===t.type))},directives:[l.LocalizeComponent,s.DefaultValueAccessor,s.RequiredValidator,c.GeoObjectAttributeCodeValidator,s.NgControlStatus,s.NgModel,d.LocalizedInputComponent,p.NgIf,u.LocalizedTextComponent,m.OnlyNumber,s.SelectControlValueAccessor,s.NgSelectOption,s.ɵangular_packages_forms_forms_z,p.NgForOf,g.ClassificationFieldComponent],styles:['input[type="text"][_ngcontent-%COMP%] {\n    margin: 2px 0 2px 0 !important;\n    float: none !important;\n}\n\nbutton[_ngcontent-%COMP%] {\n    margin-top: 5px;\n    float: right;\n}\n\nlabel[_ngcontent-%COMP%] {\n    color: #999;\n    font-weight: bold;\n}'],data:{animation:[r.trigger("toggleInputs",[r.state("none, void",r.style({opacity:0})),r.state("show",r.style({opacity:1})),r.transition("none => show",r.animate("300ms"))])]}}),e}();t.AttributeInputComponent=C,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(C,[{type:i.Component,args:[{selector:"attribute-input",templateUrl:"./attribute-input.component.html",styleUrls:["./attribute-input.css"],animations:[r.trigger("toggleInputs",[r.state("none, void",r.style({opacity:0})),r.state("show",r.style({opacity:1})),r.transition("none => show",r.animate("300ms"))])]}]}],(function(){return[{type:a.ClassificationTypeService},{type:o.ChangeDetectorRef}]}),{isNew:[{type:i.Input}],excludeDescription:[{type:i.Input}],type:[{type:i.Input}],geoObjectType:[{type:i.Input}],attribute:[{type:i.Input}],attributeChange:[{type:i.Output}]})},1036:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSockets=void 0;var i=function(){function e(){}return e.buildBaseUrl=function(){return(-1!==window.location.protocol.indexOf("https")?"wss":"ws")+"://"+window.location.hostname+(window.location.port?":"+window.location.port:"")+registry.contextPath},e}();t.WebSockets=i},1037:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectSharedAttributeEditorComponent=void 0;var i=n(0),r=n(1),o=n(2),a=n(291),l=(n(25),n(1015),n(194),n(378)),s=n(1023),c=n(544),d=n(1041),p=n(1098),u=n(858),m=n(0),g=n(25),h=n(1015),f=n(194),y=["attributeForm"];function v(e,t){if(1&e&&m.ɵɵelement(0,"stability-period",19),2&e){var n=m.ɵɵnextContext();m.ɵɵproperty("showHint",!n.readOnly)("changeRequestEditor",n.changeRequestEditor)("sharedAttributeEditor",n)("forDate",n.forDate)("context",null==n.datasetId?"EXPLORER":"LIST")("filterDate",n.requestedDate)("latestPeriodIsActive",null==n.requestedDate&&n.changeRequestEditor.changeRequest.isNew)}}function b(e,t){if(1&e){var n=m.ɵɵgetCurrentView();m.ɵɵelementStart(0,"boolean-field",20),m.ɵɵlistener("valueChange",(function(e){return m.ɵɵrestoreView(n),m.ɵɵnextContext().showAllInstances=e})),m.ɵɵelementEnd()}if(2&e){var i=m.ɵɵnextContext();m.ɵɵproperty("value",i.showAllInstances)("disable",!1)}}function S(e,t){1&e&&m.ɵɵelement(0,"span",21)}function C(e,t){1&e&&m.ɵɵelement(0,"span",22)}function E(e,t){1&e&&m.ɵɵelement(0,"span",21)}function x(e,t){1&e&&m.ɵɵelement(0,"span",22)}function O(e,t){1&e&&m.ɵɵelement(0,"span",21)}function I(e,t){1&e&&m.ɵɵelement(0,"span",22)}function M(e,t){1&e&&m.ɵɵelement(0,"span",21)}function w(e,t){1&e&&m.ɵɵelement(0,"span",22)}function T(e,t){1&e&&(m.ɵɵelementStart(0,"span"),m.ɵɵelement(1,"localize",33),m.ɵɵelementEnd())}function k(e,t){1&e&&(m.ɵɵelementStart(0,"span"),m.ɵɵelement(1,"localize",34),m.ɵɵelementEnd())}function P(e,t){if(1&e&&(m.ɵɵelementStart(0,"span"),m.ɵɵtext(1),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(2).$implicit;m.ɵɵadvance(1),m.ɵɵtextInterpolate1(" ",n.label.localizedValue," ")}}function j(e,t){if(1&e&&(m.ɵɵelementStart(0,"div"),m.ɵɵelement(1,"manage-versions",35),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(2).$implicit,i=m.ɵɵnextContext(3);m.ɵɵadvance(1),m.ɵɵproperty("geoObjectType",i.geoObjectType)("changeRequestEditor",i.changeRequestEditor)("attributeType",n)("readonly",i.readOnly)("isNew",i.isNew)("filterDate",i.calculatedDate)("showAllInstances",i.showAllInstances)}}function z(e,t){if(1&e){var n=m.ɵɵgetCurrentView();m.ɵɵelementStart(0,"input",37),m.ɵɵlistener("ngModelChange",(function(e){m.ɵɵrestoreView(n);var t=m.ɵɵnextContext(3).$implicit;return m.ɵɵnextContext(3).changeRequestEditor.getEditorForAttribute(t).value=e})),m.ɵɵelementEnd()}if(2&e){var i=m.ɵɵnextContext(3).$implicit,r=m.ɵɵnextContext(3);m.ɵɵstyleMap(r.readOnly||"code"===i.code&&!r.isNew?"":"color:#333"),m.ɵɵpropertyInterpolate1("id","mod-",i.code,""),m.ɵɵpropertyInterpolate1("name","mod-",i.code,""),m.ɵɵproperty("ngModel",r.changeRequestEditor.getEditorForAttribute(i).value)("disabled",r.readOnly||"code"===i.code&&!r.isNew)}}function D(e,t){if(1&e&&(m.ɵɵelementStart(0,"div"),m.ɵɵelement(1,"standard-attribute-editor",38),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(3).$implicit,i=m.ɵɵnextContext(3);m.ɵɵadvance(1),m.ɵɵproperty("changeRequestEditor",i.changeRequestEditor)("geoObjectType",i.geoObjectType)("changeRequest",i.changeRequest)("attributeType",n)("geoObject",i.changeRequestEditor.geoObject)("readonly",i.readOnly)("isNew",i.isNew)}}function R(e,t){if(1&e&&(m.ɵɵelementStart(0,"div"),m.ɵɵtemplate(1,z,1,6,"input",36),m.ɵɵtemplate(2,D,2,7,"div",18),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(2).$implicit,i=m.ɵɵnextContext(3);m.ɵɵadvance(1),m.ɵɵproperty("ngIf",i.changeRequestEditor.geoObject&&"code"===n.code),m.ɵɵadvance(1),m.ɵɵproperty("ngIf","code"!==n.code)}}function L(e,t){if(1&e&&(m.ɵɵelementStart(0,"div",29),m.ɵɵelementStart(1,"div",30),m.ɵɵelementStart(2,"h4",31),m.ɵɵtemplate(3,T,2,0,"span",18),m.ɵɵtemplate(4,k,2,0,"span",18),m.ɵɵtemplate(5,P,2,1,"span",18),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementStart(6,"div",32),m.ɵɵtemplate(7,j,2,7,"div",18),m.ɵɵtemplate(8,R,3,2,"div",18),m.ɵɵelementEnd(),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext().$implicit;m.ɵɵadvance(3),m.ɵɵproperty("ngIf","code"===n.code),m.ɵɵadvance(1),m.ɵɵproperty("ngIf","displayLabel"===n.code),m.ɵɵadvance(1),m.ɵɵproperty("ngIf","code"!==n.code&&"displayLabel"!==n.code),m.ɵɵadvance(2),m.ɵɵproperty("ngIf","code"!==n.code&&n.isChangeOverTime),m.ɵɵadvance(1),m.ɵɵproperty("ngIf",!n.isChangeOverTime)}}function _(e,t){if(1&e&&(m.ɵɵelementStart(0,"li",27),m.ɵɵtemplate(1,L,9,5,"div",28),m.ɵɵelementEnd()),2&e){var n=t.$implicit,i=m.ɵɵnextContext(3);m.ɵɵadvance(1),m.ɵɵproperty("ngIf",i.showAllInstances||i.changeRequestEditor.getEditorForAttribute(n).hasChanges())}}function A(e,t){if(1&e&&(m.ɵɵelementStart(0,"div",0),m.ɵɵelementStart(1,"div",1),m.ɵɵelement(2,"span",24),m.ɵɵelementStart(3,"ul",25),m.ɵɵtemplate(4,_,2,1,"li",26),m.ɵɵpipe(5,"geoObjectAttributeExcludesFilter"),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(2);m.ɵɵadvance(4),m.ɵɵproperty("ngForOf",m.ɵɵpipeBind2(5,1,n.geoObjectType.attributes,n.geoObjectAttributeExcludes))}}function N(e,t){if(1&e&&(m.ɵɵelementStart(0,"div",29),m.ɵɵelementStart(1,"div",30),m.ɵɵelementStart(2,"h4",31),m.ɵɵelementStart(3,"span"),m.ɵɵtext(4),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementStart(5,"div",32),m.ɵɵelement(6,"manage-versions",39),m.ɵɵelementEnd(),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext().$implicit,i=m.ɵɵnextContext(3);m.ɵɵadvance(4),m.ɵɵtextInterpolate1(" ",n.label," "),m.ɵɵadvance(2),m.ɵɵproperty("geoObjectType",i.geoObjectType)("changeRequestEditor",i.changeRequestEditor)("attributeType",i.parentAttributeType)("readonly",i.readOnly)("isNew",i.isNew)("filterDate",i.filterDate)("hierarchy",n)("showAllInstances",i.showAllInstances)}}function V(e,t){if(1&e&&(m.ɵɵelementStart(0,"li",27),m.ɵɵtemplate(1,N,7,9,"div",28),m.ɵɵelementEnd()),2&e){var n=t.$implicit,i=m.ɵɵnextContext(3);m.ɵɵadvance(1),m.ɵɵproperty("ngIf",i.showAllInstances||i.changeRequestEditor.getEditorForAttribute(i.parentAttributeType,n).hasChanges())}}function F(e,t){if(1&e&&(m.ɵɵelementStart(0,"div",0),m.ɵɵelementStart(1,"div",1),m.ɵɵelementStart(2,"ul",25),m.ɵɵtemplate(3,V,2,1,"li",26),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(2);m.ɵɵadvance(3),m.ɵɵproperty("ngForOf",n.hierarchies)}}function H(e,t){if(1&e&&(m.ɵɵelementStart(0,"div",29),m.ɵɵelementStart(1,"div",30),m.ɵɵelementStart(2,"h4",31),m.ɵɵelementStart(3,"span"),m.ɵɵelement(4,"localize",40),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementStart(5,"div",32),m.ɵɵelement(6,"manage-versions",41),m.ɵɵelementEnd(),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(3);m.ɵɵadvance(6),m.ɵɵproperty("geoObjectType",n.geoObjectType)("changeRequestEditor",n.changeRequestEditor)("attributeType",n.geometryAttributeType)("readonly",n.readOnly)("isNew",n.isNew)("isGeometryInlined",n.isGeometryInlined)("filterDate",n.filterDate)("showAllInstances",n.showAllInstances)}}function G(e,t){if(1&e&&(m.ɵɵelementStart(0,"div"),m.ɵɵtemplate(1,H,7,8,"div",28),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(2);m.ɵɵadvance(1),m.ɵɵproperty("ngIf",n.showAllInstances||n.changeRequestEditor.getEditorForAttribute(n.geometryAttributeType).hasChanges())}}function B(e,t){if(1&e&&(m.ɵɵelementStart(0,"div",29),m.ɵɵelementStart(1,"div",30),m.ɵɵelementStart(2,"h4",31),m.ɵɵelementStart(3,"span"),m.ɵɵtext(4),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementStart(5,"div",32),m.ɵɵelement(6,"manage-versions",41),m.ɵɵelementEnd(),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(3);m.ɵɵadvance(4),m.ɵɵtextInterpolate(n.getAttribute("exists").label.localizedValue),m.ɵɵadvance(2),m.ɵɵproperty("geoObjectType",n.geoObjectType)("changeRequestEditor",n.changeRequestEditor)("attributeType",n.getAttribute("exists"))("readonly",n.readOnly)("isNew",n.isNew)("isGeometryInlined",n.isGeometryInlined)("filterDate",n.filterDate)("showAllInstances",n.showAllInstances)}}function q(e,t){if(1&e&&(m.ɵɵelementStart(0,"div",29),m.ɵɵelementStart(1,"div",30),m.ɵɵelementStart(2,"h4",31),m.ɵɵelement(3,"localize",42),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementStart(4,"div",32),m.ɵɵelement(5,"standard-attribute-editor",38),m.ɵɵelementEnd(),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(3);m.ɵɵadvance(5),m.ɵɵproperty("changeRequestEditor",n.changeRequestEditor)("geoObjectType",n.geoObjectType)("changeRequest",n.changeRequest)("attributeType",n.getAttribute("invalid"))("geoObject",n.changeRequestEditor.geoObject)("readonly",n.readOnly)("isNew",n.isNew)}}function U(e,t){if(1&e&&(m.ɵɵelementStart(0,"div"),m.ɵɵtemplate(1,B,7,9,"div",28),m.ɵɵtemplate(2,q,6,7,"div",28),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(2);m.ɵɵadvance(1),m.ɵɵproperty("ngIf",n.showAllInstances||n.changeRequestEditor.getEditorForAttribute(n.getAttribute("exists")).hasChanges()),m.ɵɵadvance(1),m.ɵɵproperty("ngIf",n.showAllInstances||n.changeRequestEditor.getEditorForAttribute(n.getAttribute("invalid")).hasChanges())}}function $(e,t){if(1&e&&(m.ɵɵelementStart(0,"div"),m.ɵɵtemplate(1,A,6,4,"div",23),m.ɵɵtemplate(2,F,4,1,"div",23),m.ɵɵtemplate(3,G,2,1,"div",18),m.ɵɵtemplate(4,U,3,2,"div",18),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext();m.ɵɵadvance(1),m.ɵɵproperty("ngIf",0===n.tabIndex),m.ɵɵadvance(1),m.ɵɵproperty("ngIf",1===n.tabIndex),m.ɵɵadvance(1),m.ɵɵproperty("ngIf",2===n.tabIndex),m.ɵɵadvance(1),m.ɵɵproperty("ngIf",3===n.tabIndex)}}var J=function(e,t){return{active:e,disabled:t}},W=function(e){return{active:e}},Y=function(){function e(e,t,n,r,o){this.lService=e,this.geomService=t,this.authService=n,this.dateService=r,this.registryService=o,this.postGeoObject=null,this.showAllInstances=!1,this.tabIndex=0,this.attributeExcludes=[],this.readOnly=!1,this.isNew=!1,this.isGeometryInlined=!1,this.modifiedTermOption=null,this.currentTermOption=null,this.requestedDate=null,this.calculatedDate=null,this.calculatedDateChange=new i.EventEmitter,this.forDate=null,this.datasetId=null,this.geoObjectAttributeExcludes=["uid","sequence","type","lastUpdateDate","createDate","invalid","exists"],this.showStabilityPeriods=!1}return e.prototype.ngOnInit=function(){null!=this.attributeExcludes&&(this.geoObjectAttributeExcludes.push.apply(this.geoObjectAttributeExcludes,this.attributeExcludes),this.isGeometryInlined||this.geoObjectAttributeExcludes.push("geometry")),this.geometryAttributeType=this.getAttribute("geometry"),null==this.geometryAttributeType&&(this.geometryAttributeType=new l.AttributeType("geometry","geometry",new a.LocalizedValue("Geometry",null),new a.LocalizedValue("Geometry",null),!0,!1,!1,!0)),this.parentAttributeType=new l.AttributeType("_PARENT_","_PARENT_",new a.LocalizedValue("Parents",null),new a.LocalizedValue("Parents",null),!0,!1,!1,!0),null==this.changeRequest?this.changeRequest=this.createNewChangeRequest():(this.changeRequest.actions||(this.changeRequest.actions=[]),0===this.changeRequest.actions.length&&this.isNew&&(this.changeRequest.actions=this.createNewChangeRequest().actions)),this.changeRequestEditor=new d.ChangeRequestEditor(this.changeRequest,this.postGeoObject,this.geoObjectType,this.hierarchies,this.geometryAttributeType,this.parentAttributeType,this.lService,this.dateService,this.registryService,this.geomService),this.shouldForceSetExist()&&this.changePage(3),this.isNew&&(this.calculatedDate=null);var e=this.changeRequest.current?this.changeRequest.current.geoObjectType:this.postGeoObject.geoObjectType,t=e.organizationCode;this.changeRequest.isNew&&(this.showStabilityPeriods=this.authService.isSRA()||this.authService.isOrganizationRA(t)||this.authService.isGeoObjectTypeOrSuperRM(e)||this.authService.isGeoObjectTypeOrSuperRC(e)),this.showAllInstances=this.changeRequestEditor.changeRequest.isNew||"CreateGeoObject"===this.changeRequestEditor.changeRequest.type},e.prototype.setFilterDate=function(e,t){var n=this;void 0===t&&(t=!0),this.calculatedDate=e,null!=this.manageVersions&&this.manageVersions.forEach((function(e){return e.setFilterDate(n.calculatedDate,t)})),this.calculatedDateChange.emit(this.calculatedDate)},e.prototype.getChangeRequestEditor=function(){return this.changeRequestEditor},e.prototype.createNewChangeRequest=function(){var e=new s.ChangeRequest;if(e.oid=u.v4(),e.approvalStatus="PENDING",e.actions=[],this.isNew){e.type="CreateGeoObject";var t=new s.CreateGeoObjectAction;t.geoObjectJson=this.postGeoObject,t.parentJson=this.hierarchies,e.actions[0]=t}else e.type="UpdateGeoObject";return e},e.prototype.shouldForceSetExist=function(){if(!this.readOnly){if(!this.isNew){var e=this.changeRequestEditor.changeRequest.isNew;if(e&&!this.readOnly&&this.postGeoObject.attributes.exists)if((t=this.postGeoObject.attributes.exists.values)&&t.length>0)return null==(n=t[0]).startDate||null==n.endDate||void 0===n.value||null===n.value;return e&&!this.readOnly}var t,n;if((t=this.changeRequestEditor.changeRequest.actions[0].geoObjectJson.attributes.exists.values)&&t.length>0)return null==(n=t[0]).startDate||null==n.endDate||void 0===n.value||null===n.value}return!this.readOnly},e.prototype.getAttribute=function(e){if("_PARENT_"===e)return this.parentAttributeType;if("geometry"===e)return this.geometryAttributeType;for(var t=0;t<this.geoObjectType.attributes.length;++t)if(this.geoObjectType.attributes[t].code===e)return this.geoObjectType.attributes[t];return null},e.prototype.changePage=function(e){this.shouldForceSetExist()&&3!==e||(this.geomService.stopEditing(),this.tabIndex=e)},e.prototype.hasChanges=function(e){var t=this.changeRequest.actions.length;if(t>0)for(var n=0;n<t;++n){var i=this.changeRequest.actions[n];if(i.actionType===c.ActionTypes.CREATEGEOOBJECTACTION)return!0;if(i.actionType===c.ActionTypes.UPDATEATTRIBUTETACTION){var r=i;if("_PARENT_"===r.attributeName&&1===e)return!0;if("geometry"===r.attributeName&&2===e)return!0;if(("invalid"===r.attributeName||"exists"===r.attributeName)&&3===e)return!0;if(0===e&&"_PARENT_"!==r.attributeName&&"geometry"!==r.attributeName&&"exists"!==r.attributeName&&"invalid"!==r.attributeName)return!0}}return!1},e.prototype.hasErrors=function(e){var t=this.changeRequestEditor.getEditors();if(0===e)for(var n=["invalid","exists","_PARENT_","geometry"],i=t.filter((function(e){return-1===n.indexOf(e.attribute.code)})),r=0;r<i.length;++r){if(!i[r].isValid())return!0}else if(1===e)for(r=0;r<this.hierarchies.length;++r){var o=this.hierarchies[r];if(!this.changeRequestEditor.getEditorForAttribute(this.parentAttributeType,o).isValid())return!0}else{if(2===e)return!this.changeRequestEditor.getEditorForAttribute(this.geometryAttributeType).isValid();if(3===e){var a=this.getAttribute("invalid"),s=l.GeoObjectType.getAttribute(this.changeRequestEditor.geoObjectType,"exists"),c=this.changeRequestEditor.getEditorForAttribute(s);return Object.prototype.hasOwnProperty.call(a,"isValid")&&!a.isValid||!c.isValid()}}return!1},e.prototype.isValid=function(){var e=!0;return this.geoObjectType.attributes.forEach((function(t){null==t.isValid||t.isValid||(e=!1)})),null==this.parentAttributeType.isValid||this.parentAttributeType.isValid||(e=!1),null==this.geometryAttributeType.isValid||this.geometryAttributeType.isValid||(e=!1),e&&this.changeRequestEditor.validate()},e.prototype.getActions=function(){return this.changeRequestEditor.changeRequest.actions},e.ɵfac=function(t){return new(t||e)(m.ɵɵdirectiveInject(g.LocalizationService),m.ɵɵdirectiveInject(h.GeometryService),m.ɵɵdirectiveInject(g.AuthService),m.ɵɵdirectiveInject(f.DateService),m.ɵɵdirectiveInject(h.RegistryService))},e.ɵcmp=m.ɵɵdefineComponent({type:e,selectors:[["geoobject-shared-attribute-editor"]],viewQuery:function(e,t){if(1&e&&(m.ɵɵviewQuery(y,1),m.ɵɵviewQuery(p.ManageVersionsComponent,1)),2&e){var n=void 0;m.ɵɵqueryRefresh(n=m.ɵɵloadQuery())&&(t.attributeForm=n.first),m.ɵɵqueryRefresh(n=m.ɵɵloadQuery())&&(t.manageVersions=n)}},inputs:{postGeoObject:"postGeoObject",geoObjectType:"geoObjectType",attributeExcludes:"attributeExcludes",readOnly:"readOnly",isNew:"isNew",isGeometryInlined:"isGeometryInlined",changeRequest:"changeRequest",hierarchies:"hierarchies",requestedDate:"requestedDate",forDate:"forDate",datasetId:"datasetId"},outputs:{calculatedDateChange:"calculatedDateChange"},features:[m.ɵɵProvidersFeature([r.DatePipe])],decls:41,vars:26,consts:[[1,"row"],[1,"col-md-12"],[3,"showHint","changeRequestEditor","sharedAttributeEditor","forDate","context","filterDate","latestPeriodIsActive",4,"ngIf"],["label","Show all instances",3,"value","disable","valueChange",4,"ngIf"],[1,"btn-group","geobject-editor-tab-holder"],[1,"btn","full-width-radio-button",3,"ngClass","click"],[2,"display","inline-block","width","90%"],["key","geoobject.editor.tabZero"],[1,"errorSpan"],["class","tabHasErrors",4,"ngIf"],[1,"changeSpan"],["class","tabHasChanges",4,"ngIf"],["key","geoobject.editor.tabOne"],["key","geoobject.editor.tabTwo"],[1,"btn","full-width-radio-button","settings",3,"ngClass","click"],[1,"fa","fa-cog"],["name","geobject-shared-attribute-editor",1,"modal-form"],["attributeForm","ngForm"],[4,"ngIf"],[3,"showHint","changeRequestEditor","sharedAttributeEditor","forDate","context","filterDate","latestPeriodIsActive"],["label","Show all instances",3,"value","disable","valueChange"],[1,"tabHasErrors"],[1,"tabHasChanges"],["class","row",4,"ngIf"],[1,"text"],[1,"list-group"],["class","list-group-item","style","text-align:left;border:none;padding:0;",4,"ngFor","ngForOf"],[1,"list-group-item",2,"text-align","left","border","none","padding","0"],["class","panel panel-default",4,"ngIf"],[1,"panel","panel-default"],[1,"panel-heading"],[2,"margin","0"],[1,"panel-body"],["key","geoobject.code.alternate.label"],["key","geoobject.displayLabel.alternate.label"],[3,"geoObjectType","changeRequestEditor","attributeType","readonly","isNew","filterDate","showAllInstances"],["type","text","required","",3,"ngModel","id","name","disabled","style","ngModelChange",4,"ngIf"],["type","text","required","",3,"ngModel","id","name","disabled","ngModelChange"],[3,"changeRequestEditor","geoObjectType","changeRequest","attributeType","geoObject","readonly","isNew"],[3,"geoObjectType","changeRequestEditor","attributeType","readonly","isNew","filterDate","hierarchy","showAllInstances"],["key","shared.attributes.attribute.geometry.label"],[3,"geoObjectType","changeRequestEditor","attributeType","readonly","isNew","isGeometryInlined","filterDate","showAllInstances"],["key","geoobject.invalid.alternate.label"]],template:function(e,t){1&e&&(m.ɵɵelementStart(0,"div",0),m.ɵɵelementStart(1,"div",1),m.ɵɵtemplate(2,v,1,7,"stability-period",2),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementStart(3,"div",0),m.ɵɵelementStart(4,"div",1),m.ɵɵtemplate(5,b,1,2,"boolean-field",3),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementStart(6,"div",0),m.ɵɵelementStart(7,"div",1),m.ɵɵelementStart(8,"div",4),m.ɵɵelementStart(9,"label",5),m.ɵɵlistener("click",(function(){return t.changePage(0)})),m.ɵɵelementStart(10,"span",6),m.ɵɵelement(11,"localize",7),m.ɵɵelementEnd(),m.ɵɵelementStart(12,"div",8),m.ɵɵtemplate(13,S,1,0,"span",9),m.ɵɵelementEnd(),m.ɵɵelementStart(14,"span",10),m.ɵɵtemplate(15,C,1,0,"span",11),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementStart(16,"label",5),m.ɵɵlistener("click",(function(){return t.changePage(1)})),m.ɵɵelementStart(17,"span",6),m.ɵɵelement(18,"localize",12),m.ɵɵelementEnd(),m.ɵɵelementStart(19,"div",8),m.ɵɵtemplate(20,E,1,0,"span",9),m.ɵɵelementEnd(),m.ɵɵelementStart(21,"span",10),m.ɵɵtemplate(22,x,1,0,"span",11),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementStart(23,"label",5),m.ɵɵlistener("click",(function(){return t.changePage(2)})),m.ɵɵelementStart(24,"span",6),m.ɵɵelement(25,"localize",13),m.ɵɵelementEnd(),m.ɵɵelementStart(26,"div",8),m.ɵɵtemplate(27,O,1,0,"span",9),m.ɵɵelementEnd(),m.ɵɵelementStart(28,"span",10),m.ɵɵtemplate(29,I,1,0,"span",11),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementStart(30,"label",14),m.ɵɵlistener("click",(function(){return t.changePage(3)})),m.ɵɵelementStart(31,"span",6),m.ɵɵelement(32,"i",15),m.ɵɵelementEnd(),m.ɵɵelementStart(33,"div",8),m.ɵɵtemplate(34,M,1,0,"span",9),m.ɵɵelementEnd(),m.ɵɵelementStart(35,"span",10),m.ɵɵtemplate(36,w,1,0,"span",11),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementStart(37,"form",16,17),m.ɵɵelementStart(39,"fieldset"),m.ɵɵtemplate(40,$,5,4,"div",18),m.ɵɵelementEnd(),m.ɵɵelementEnd()),2&e&&(m.ɵɵadvance(2),m.ɵɵproperty("ngIf",t.showStabilityPeriods),m.ɵɵadvance(3),m.ɵɵproperty("ngIf",t.changeRequestEditor&&!t.changeRequestEditor.changeRequest.isNew&&"CreateGeoObject"!==t.changeRequestEditor.changeRequest.type),m.ɵɵadvance(4),m.ɵɵproperty("ngClass",m.ɵɵpureFunction2(15,J,0===t.tabIndex,t.shouldForceSetExist())),m.ɵɵadvance(4),m.ɵɵproperty("ngIf",t.hasErrors(0)),m.ɵɵadvance(2),m.ɵɵproperty("ngIf",t.hasChanges(0)),m.ɵɵadvance(1),m.ɵɵproperty("ngClass",m.ɵɵpureFunction2(18,J,1===t.tabIndex,t.shouldForceSetExist())),m.ɵɵadvance(4),m.ɵɵproperty("ngIf",t.hasErrors(1)),m.ɵɵadvance(2),m.ɵɵproperty("ngIf",t.hasChanges(1)),m.ɵɵadvance(1),m.ɵɵproperty("ngClass",m.ɵɵpureFunction2(21,J,2===t.tabIndex,t.shouldForceSetExist())),m.ɵɵadvance(4),m.ɵɵproperty("ngIf",t.hasErrors(2)),m.ɵɵadvance(2),m.ɵɵproperty("ngIf",t.hasChanges(2)),m.ɵɵadvance(1),m.ɵɵproperty("ngClass",m.ɵɵpureFunction1(24,W,3===t.tabIndex)),m.ɵɵadvance(4),m.ɵɵproperty("ngIf",t.hasErrors(3)),m.ɵɵadvance(2),m.ɵɵproperty("ngIf",t.hasChanges(3)),m.ɵɵadvance(4),m.ɵɵproperty("ngIf",t.changeRequestEditor&&t.changeRequestEditor.geoObject))},styles:['.modal-form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   input[type="text"][_ngcontent-%COMP%] {\n    background: #f5f5f5;\n}\n\n.modal-form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   input[type="text"][_ngcontent-%COMP%]:disabled {\n    background: #eee;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%] {\n\t  position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%], .changeSpan[_ngcontent-%COMP%] {\n\tposition: absolute;\n}\n\nlabel.settings[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]    > i.fa.fa-cog[_ngcontent-%COMP%] {\n\tfont-size: 15px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%] {\n    display: inline-block;\n    position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .changeSpan[_ngcontent-%COMP%] {\n  right: 2.5px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasErrors[_ngcontent-%COMP%]:before {\n  content: \' \\25CF\';\n  font-size: 20px;\n  line-height:12px;\n  text-align: left;\n  color: red;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasChanges[_ngcontent-%COMP%]:after {\n\tcontent: \' \\25CF\';\n  font-size: 20px;\n  line-height:12px;\n  text-align: right;\n  color: orange;\n}\n\nli.list-group-item[_ngcontent-%COMP%] {\n    font-size: 18px;\n}\n\n.warning-text[_ngcontent-%COMP%]{\n    color: orange;\n}\n\n\nform.modal-form[_ngcontent-%COMP%] {\n    overflow: visible;\n}\n\nfieldset[_ngcontent-%COMP%] {\n    width: 100% !important;\n}\n\n\n.panel[_ngcontent-%COMP%] {\n\n}\n\n.panel[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%] {\n\tmargin: 0;\n}\n\n.panel[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%] {\n\tpadding: 5px 0;\n}\n\n.panel-heading[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n\tmargin:0;\n}\n\n.input-group[_ngcontent-%COMP%] {\n\twidth: 100%;\n}\n\n.radio-group[_ngcontent-%COMP%] {\n\tborder: solid 1px #ccc;\n\tborder-radius: 5px 0 0 5px;\n\tline-height: 40px;\n}\n\n\n  .input-group input[type="text"], .input-group[_ngcontent-%COMP%]   input[type="number"][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   input[type="date"][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\n\tborder-radius: 5px 0 0 5px;\n\twidth: 100%;\n}\n.input-group[_ngcontent-%COMP%]   input[type="text"].input-group-read-only[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   input[type="number"].input-group-read-only[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   input[type="date"].input-group-read-only[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select.input-group-read-only[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .radio-group.input-group-read-only[_ngcontent-%COMP%] {\n\tborder-radius: 5px; \n}\n\n.geoobject-panel-header[_ngcontent-%COMP%]{\n\theight: 50px;\n    width: 100%;\n    background: grey;\n}'],data:{animation:[[o.trigger("fadeInOut",[o.transition(":enter",[o.style({opacity:0}),o.animate("500ms")]),o.transition(":leave",o.animate("500ms",o.style({opacity:0})))]),o.trigger("slide",[o.state("left",o.style({left:0})),o.state("right",o.style({left:"100%"})),o.transition("* => *",o.animate(200))])]]}}),e}();t.GeoObjectSharedAttributeEditorComponent=Y,("undefined"==typeof ngDevMode||ngDevMode)&&m.ɵsetClassMetadata(Y,[{type:i.Component,args:[{selector:"geoobject-shared-attribute-editor",templateUrl:"./geoobject-shared-attribute-editor.component.html",styleUrls:["./geoobject-shared-attribute-editor.css"],providers:[r.DatePipe],animations:[[o.trigger("fadeInOut",[o.transition(":enter",[o.style({opacity:0}),o.animate("500ms")]),o.transition(":leave",o.animate("500ms",o.style({opacity:0})))]),o.trigger("slide",[o.state("left",o.style({left:0})),o.state("right",o.style({left:"100%"})),o.transition("* => *",o.animate(200))])]]}]}],(function(){return[{type:g.LocalizationService},{type:h.GeometryService},{type:g.AuthService},{type:f.DateService},{type:h.RegistryService}]}),{postGeoObject:[{type:i.Input}],geoObjectType:[{type:i.Input}],attributeExcludes:[{type:i.Input}],readOnly:[{type:i.Input}],isNew:[{type:i.Input}],isGeometryInlined:[{type:i.Input}],changeRequest:[{type:i.Input}],hierarchies:[{type:i.Input}],requestedDate:[{type:i.Input}],calculatedDateChange:[{type:i.Output}],forDate:[{type:i.Input}],datasetId:[{type:i.Input}],attributeForm:[{type:i.ViewChild,args:["attributeForm"]}],manageVersions:[{type:i.ViewChildren,args:[p.ManageVersionsComponent]}]})},1039:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HierarchyComponent=t.Instance=t.RELATED_NODE_BANNER_COLOR=t.INHERITED_NODE_BANNER_COLOR=t.INHERITED_NODE_FILL=t.DEFAULT_NODE_BANNER_COLOR=t.DEFAULT_NODE_FILL=t.TREE_SCALE_FACTOR_Y=t.TREE_SCALE_FACTOR_X=void 0;var i=n(0),r=n(52),o=n(44),a=(n(56),n(293),n(860)),l=n(1080),s=n(1082),c=n(1083),d=n(193),p=(n(25),n(547)),u=(n(1015),n(1088)),m=n(1061),g=n(1079),h=n(384),f=n(0),y=n(1015),v=n(56),b=n(293),S=n(25),C=n(221),E=n(139),x=n(18),O=n(863),I=n(88),M=n(1),w=n(162),T=["searchInput"],k=["nodeMenu"],P=["leafMenu"];function j(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"div",42),f.ɵɵelementStart(1,"button",43),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext().$implicit;return f.ɵɵnextContext().createGeoObjectType(null,!1,e.org)})),f.ɵɵelement(2,"localize",44),f.ɵɵelementEnd(),f.ɵɵelementStart(3,"button",45),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext().$implicit;return f.ɵɵnextContext().createGeoObjectType(null,!0,e.org)})),f.ɵɵelement(4,"localize",46),f.ɵɵelementEnd(),f.ɵɵelementEnd()}}function z(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"i",53),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext(2).$implicit;return f.ɵɵnextContext(2).deleteGeoObjectType(e)})),f.ɵɵpipe(1,"localize"),f.ɵɵelementEnd()}2&e&&f.ɵɵproperty("title",f.ɵɵpipeBind1(1,1,"button.delete.helptext"))}function D(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"i",54),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext(2).$implicit,t=f.ɵɵnextContext().$implicit;return f.ɵɵnextContext().createGeoObjectType(e,!1,t.org)})),f.ɵɵelementEnd()}}function R(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"span",49),f.ɵɵtemplate(1,z,2,3,"i",50),f.ɵɵelementStart(2,"i",51),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext().$implicit;return f.ɵɵnextContext(2).manageGeoObjectType(e,!1)})),f.ɵɵpipe(3,"localize"),f.ɵɵelementEnd(),f.ɵɵtemplate(4,D,1,0,"i",52),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext().$implicit,r=f.ɵɵnextContext(2);f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!r.excludeGeoObjectTypeDeletes(i)),f.ɵɵadvance(1),f.ɵɵproperty("title",f.ɵɵpipeBind1(3,3,"button.edit.helptext")),f.ɵɵadvance(2),f.ɵɵproperty("ngIf",i.isAbstract)}}function L(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"span",49),f.ɵɵelementStart(1,"i",55),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext().$implicit;return f.ɵɵnextContext(2).manageGeoObjectType(e,!0)})),f.ɵɵpipe(2,"localize"),f.ɵɵelementEnd(),f.ɵɵelementEnd()}2&e&&(f.ɵɵadvance(1),f.ɵɵproperty("title",f.ɵɵpipeBind1(2,1,"button.view.helptext")))}var _=function(e,t){return{"got-group-parent":e,"got-group-child":t}};function A(e,t){if(1&e&&(f.ɵɵelementStart(0,"li",47),f.ɵɵtext(1),f.ɵɵtemplate(2,R,5,5,"span",48),f.ɵɵtemplate(3,L,3,3,"span",48),f.ɵɵelementEnd()),2&e){var n=t.$implicit;f.ɵɵproperty("id",n.code)("ngClass",f.ɵɵpureFunction2(7,_,n.isAbstract,n.superTypeCode&&n.superTypeCode.length>0)),f.ɵɵattribute("data-superTypeCode",n.superTypeCode&&n.superTypeCode.length>0?n.superTypeCode:null)("data-canDrag",n.canDrag),f.ɵɵadvance(1),f.ɵɵtextInterpolate1(" ",n.label.localizedValue," "),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",n.permissions.includes("WRITE")),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!n.permissions.includes("WRITE")&&n.permissions.includes("READ"))}}function N(e,t){if(1&e&&(f.ɵɵelementStart(0,"ul",39),f.ɵɵelementStart(1,"div"),f.ɵɵelementStart(2,"div",40),f.ɵɵelementStart(3,"label"),f.ɵɵtext(4),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵtemplate(5,j,5,0,"div",18),f.ɵɵtemplate(6,A,4,10,"li",41),f.ɵɵelementEnd(),f.ɵɵelementEnd()),2&e){var n=t.$implicit,i=f.ɵɵnextContext();f.ɵɵadvance(4),f.ɵɵtextInterpolate(n.org.label.localizedValue),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",i.isSRA||n.org.code===i.userOrganization),f.ɵɵadvance(1),f.ɵɵproperty("ngForOf",n.types)}}function V(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"div",42),f.ɵɵelementStart(1,"button",43),f.ɵɵlistener("click",(function(){return f.ɵɵrestoreView(n),f.ɵɵnextContext(2).createHierarchy()})),f.ɵɵelement(2,"localize",57),f.ɵɵelementEnd(),f.ɵɵelementEnd()}}function F(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"i",53),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext(2).$implicit;return f.ɵɵnextContext(2).deleteHierarchyType(e)})),f.ɵɵpipe(1,"localize"),f.ɵɵelementEnd()}2&e&&f.ɵɵproperty("title",f.ɵɵpipeBind1(1,1,"button.delete.helptext"))}function H(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"span",60),f.ɵɵtemplate(1,F,2,3,"i",50),f.ɵɵelementStart(2,"i",61),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext().$implicit;return f.ɵɵnextContext(2).editHierarchyType(e,!1)})),f.ɵɵpipe(3,"localize"),f.ɵɵelementEnd(),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext().$implicit,r=f.ɵɵnextContext(2);f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!r.excludeHierarchyTypeDeletes(i)),f.ɵɵadvance(1),f.ɵɵproperty("title",f.ɵɵpipeBind1(3,2,"button.edit.helptext"))}}function G(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"span",60),f.ɵɵelementStart(1,"i",62),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext().$implicit;return f.ɵɵnextContext(2).editHierarchyType(e,!0)})),f.ɵɵpipe(2,"localize"),f.ɵɵelementEnd(),f.ɵɵelementEnd()}2&e&&(f.ɵɵadvance(1),f.ɵɵproperty("title",f.ɵɵpipeBind1(2,1,"button.view.helptext")))}var B=function(e,t){return{primary:e,active:t}};function q(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"li",58),f.ɵɵlistener("click",(function(e){f.ɵɵrestoreView(n);var i=t.$implicit;return f.ɵɵnextContext(2).hierarchyOnClick(e,i)})),f.ɵɵelement(1,"i",16),f.ɵɵtext(2),f.ɵɵtemplate(3,H,4,4,"span",59),f.ɵɵtemplate(4,G,3,3,"span",59),f.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=f.ɵɵnextContext(2);f.ɵɵproperty("id",i.code)("ngClass",f.ɵɵpureFunction2(5,B,null!=r.currentHierarchy&&i.code===r.currentHierarchy.code,r.isActive(i))),f.ɵɵadvance(2),f.ɵɵtextInterpolate1(" ",i.label.localizedValue," "),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",r.isOrganizationRA(i.organizationCode)),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!r.isOrganizationRA(i.organizationCode))}}function U(e,t){if(1&e&&(f.ɵɵelementStart(0,"ul",39),f.ɵɵelementStart(1,"div"),f.ɵɵelementStart(2,"div",40),f.ɵɵelementStart(3,"label"),f.ɵɵtext(4),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵtemplate(5,V,3,0,"div",18),f.ɵɵtemplate(6,q,5,8,"li",56),f.ɵɵelementEnd(),f.ɵɵelementEnd()),2&e){var n=t.$implicit,i=f.ɵɵnextContext();f.ɵɵadvance(4),f.ɵɵtextInterpolate(n.org.label.localizedValue),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",i.isSRA||n.org.code===i.userOrganization),f.ɵɵadvance(1),f.ɵɵproperty("ngForOf",n.hierarchies)}}function $(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"div",42),f.ɵɵelementStart(1,"button",43),f.ɵɵlistener("click",(function(){return f.ɵɵrestoreView(n),f.ɵɵnextContext().importTypes()})),f.ɵɵelement(2,"localize",63),f.ɵɵelementEnd(),f.ɵɵelementEnd()}}function J(e,t){1&e&&(f.ɵɵelementStart(0,"div",65),f.ɵɵelementStart(1,"div",66),f.ɵɵelementStart(2,"div",67),f.ɵɵelementStart(3,"p",68),f.ɵɵelement(4,"localize",69),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd())}function W(e,t){1&e&&(f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"p",68),f.ɵɵelement(2,"localize",70),f.ɵɵelementEnd(),f.ɵɵelementEnd())}function Y(e,t){if(1&e&&(f.ɵɵelementStart(0,"div"),f.ɵɵtemplate(1,J,5,0,"div",64),f.ɵɵtemplate(2,W,3,0,"div",21),f.ɵɵelementEnd()),2&e){var n=f.ɵɵnextContext();f.ɵɵadvance(1),f.ɵɵproperty("ngIf",n.isOrganizationRA(n.currentHierarchy.organizationCode,!0)),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!n.isOrganizationRA(n.currentHierarchy.organizationCode,!0))}}t.TREE_SCALE_FACTOR_X=1.8,t.TREE_SCALE_FACTOR_Y=1.8,t.DEFAULT_NODE_FILL="#e6e6e6",t.DEFAULT_NODE_BANNER_COLOR="#A29BAB",t.INHERITED_NODE_FILL="#d4d4d4",t.INHERITED_NODE_BANNER_COLOR="#a0a0a0",t.RELATED_NODE_BANNER_COLOR=t.INHERITED_NODE_BANNER_COLOR;var K=function(){};t.Instance=K;var Q=function(){function e(e,t,n,i,r,o){var a=this;this.modalService=t,this.contextMenuService=n,this.registryService=r,this.authService=o,this.userOrganization=null,this.currentHierarchy=null,this.instance=new K,this.geoObjectTypes=[],this.hierarchiesByOrg=[],this.typesByOrg=[],this.filter="",this.filteredHierarchiesByOrg=[],this.filteredTypesByOrg=[],this.hierarchyTypeDeleteExclusions=["AllowedIn","IsARelationship"],this.geoObjectTypeDeleteExclusions=["ROOT"],this._opened=!1,this.isSRA=!1,this.options={displayField:"label",actionMapping:{mouse:{click:function(e,t,n){a.treeNodeOnClick(t,n)},contextMenu:function(e,t,n){a.handleOnMenu(t,n)}}},mouse:{}},this.isSRA=o.isSRA(),this.hierarchyService=e,this.localizeService=i}return e.prototype.ngOnInit=function(){var e=this;this.refreshAll(null),o.fromEvent(this.searchInput.nativeElement,"keyup").pipe(r.filter(Boolean),r.debounceTime(500),r.distinctUntilChanged(),r.tap((function(){e.onFilterChange()}))).subscribe()},e.prototype.localize=function(e){return this.localizeService.decode(e)},e.prototype.renderTree=function(){var e=this;if(null==this.currentHierarchy||null==this.currentHierarchy.rootGeoObjectTypes||0==this.currentHierarchy.rootGeoObjectTypes.length){a.select("#svg").remove();var t=!1;return null!=this.currentHierarchy&&(t=this.authService.isSRA()||this.authService.isOrganizationRA(this.currentHierarchy.organizationCode)),void this.geoObjectTypes.forEach((function(e){e.canDrag=t}))}a.select(".g-context-menu").remove(),a.select(".hierarchy-inherit-button").remove(),a.select(".g-hierarchy-got-connector").remove();var n=a.select("#overflow-div").node(),i=n.scrollLeft,r=n.scrollRight,o=a.select("#svg");null==o.node()&&(o=a.select("#svgHolder").append("svg")).attr("id","svg"),this.primarySvgHierarchy=new u.SvgHierarchyType(this,o,this.currentHierarchy,!0,this.localizeService,this.modalService,this.authService),this.primarySvgHierarchy.render(),this.calculateSvgViewBox();var l=a.select("#overflow-div").node();l.scrollLeft=i,l.scrollRight=r,this.geoObjectTypes.forEach((function(t){t.canDrag=e.calculateCanDrag(t)}))},e.prototype.calculateSvgViewBox=function(){var e=a.select("#svg"),n=e.node().getBBox(),i=n.x,r=n.y,o=n.width,l=n.height;e.attr("viewBox",i-30+" "+(r-40)+" "+(o+60)+" "+(l+80)),o=(o+60)*t.TREE_SCALE_FACTOR_X,l=(l+80)*t.TREE_SCALE_FACTOR_Y,a.select("#svgHolder").style("width",o+"px")},e.prototype.calculateCanDrag=function(e){var t=this;if(null==this.primarySvgHierarchy)return!1;if(!this.authService.isSRA()&&!this.authService.isOrganizationRA(this.currentHierarchy.organizationCode))return!1;if(null!=this.primarySvgHierarchy.getNodeByCode(e.code))return!1;if(e.isAbstract){var n=!1;if(this.geoObjectTypes.forEach((function(i){i.superTypeCode===e.code&&null!=t.primarySvgHierarchy.getNodeByCode(i.code)&&(n=!0)})),n)return!1}else if(null!=e.superTypeCode&&null!=t.primarySvgHierarchy.getNodeByCode(e.superTypeCode))return!1;return!0},e.prototype.calculateRelatedHierarchies=function(e){for(var t=[],n=0;n<this.hierarchies.length;++n){var i=this.hierarchies[n];if(null!=i.rootGeoObjectTypes&&i.rootGeoObjectTypes.length>0)a.hierarchy(i.rootGeoObjectTypes[0]).descendants().find((function(t){return t.data.geoObjectType===e.code&&null==t.data.inheritedHierarchyCode}))&&t.push(i.code)}return t},e.prototype.registerDragHandlers=function(){var e,t,n,i=this,r=[];r.push({dropSelector:".drop-box-container",onDrag:function(e,t){if(null!=this.dropEl&&(this.dropEl.style("border-color",null),this.dropEl=null),null!=t){var n=t.closest(".drop-box-container");null!=n&&(this.dropEl=a.select(n).style("border-color","#6BA542"))}},onDrop:function(e){null!=this.dropEl&&(this.dropEl.style("border-color",null),i.addChild(i.currentHierarchy.code,"ROOT",a.select(e).attr("id")),this.dropEl=null)}}),r.push({dropSelector:".svg-got-body-rect",onDrag:function(e,t,n){var r=this;this.clearDropZones();var o=this.dropEl;if(null!=a.select("#svg").node()){var l=m.svgPoint(n.sourceEvent.pageX,n.sourceEvent.pageY);if(i.primarySvgHierarchy.getD3Tree().descendants().forEach((function(e){"GhostNode"!==e.data.geoObjectType&&m.isPointWithin(l,e.data.dropZoneBbox)?(r.dropEl=a.select('.g-hierarchy[data-primary=true] .svg-got-body-rect[data-gotCode="'+e.data.geoObjectType+'"]'),e.data.activeDropZones=!0,null==e.parent&&(e.data.dropZoneBbox={x:e.x-u.SvgHierarchyType.gotRectW/2,y:e.y-2*u.SvgHierarchyType.gotRectH,width:u.SvgHierarchyType.gotRectW,height:4*u.SvgHierarchyType.gotRectH})):(e.data.activeDropZones=!1,null==e.parent&&(e.data.dropZoneBbox={x:e.x-u.SvgHierarchyType.gotRectW/2,y:e.y-u.SvgHierarchyType.gotRectH/2,width:u.SvgHierarchyType.gotRectW,height:u.SvgHierarchyType.gotRectH}))})),(null==this.dropEl||null!=o&&null!=this.dropEl&&o.attr("data-gotCode")!=this.dropEl.attr("data-gotCode"))&&this.clearGhostNodes(!0),null!=this.dropEl){var s=a.select(e).classed("got-group-parent"),c=this.dropEl.attr("data-gotCode"),d=i.primarySvgHierarchy.getD3Tree().find((function(e){return e.data.geoObjectType===c})),p=i.findGeoObjectTypeByCode(c).isAbstract;this.dropEl.attr("stroke","blue");var g=parseInt(this.dropEl.attr("x")),h=parseInt(this.dropEl.attr("y")),f=u.SvgHierarchyType.gotRectW,y=u.SvgHierarchyType.gotRectH,v=a.select("#svg").append("g").classed("svg-dropZone-g",!0),b=!(null==d.children||0==d.children.length),S=!(p||s&&b);if(S){this.childDzBacker=v.append("rect").classed("svg-got-child-dz-backer",!0).attr("x",g+u.SvgHierarchyType.gotRectW/2-f/2).attr("y",h+u.SvgHierarchyType.gotRectH+10).attr("width",f).attr("height",y).attr("fill","white"),this.childDz=v.append("rect").classed("svg-got-child-dz",!0).attr("x",g+u.SvgHierarchyType.gotRectW/2-f/2).attr("y",h+u.SvgHierarchyType.gotRectH+10).attr("width",f).attr("height",y).attr("fill","none").attr("stroke","black").attr("stroke-width","1").attr("stroke-dasharray","5,5");var C=b?i.localizeService.decode("hierarchy.content.intersectChild"):i.localizeService.decode("hierarchy.content.addChild");this.childDzText=v.append("text").classed("svg-got-child-dz-text",!0).attr("font-family","sans-serif").attr("font-size",10).attr("fill","black").attr("x",g+u.SvgHierarchyType.gotRectW/2-m.calculateTextWidth(C,10)/2).attr("y",h+u.SvgHierarchyType.gotRectH+10+y/2+2).text(C)}if(!s){this.parentDzBacker=v.append("rect").classed("svg-got-parent-dz-backer",!0).attr("x",g+u.SvgHierarchyType.gotRectW/2-f/2).attr("y",h-u.SvgHierarchyType.gotHeaderH-y).attr("width",f).attr("height",y).attr("fill","white"),this.parentDz=v.append("rect").classed("svg-got-parent-dz",!0).attr("x",g+u.SvgHierarchyType.gotRectW/2-f/2).attr("y",h-u.SvgHierarchyType.gotHeaderH-y).attr("width",f).attr("height",y).attr("fill","none").attr("stroke","black").attr("stroke-width","1").attr("stroke-dasharray","5,5"),a.select(".svg-got-parent-dz-text").remove();var E=null==d.parent?i.localizeService.decode("hierarchy.content.addParent"):i.localizeService.decode("hierarchy.content.intersectParent");this.parentDzText=v.append("text").classed("svg-got-parent-dz-text",!0).attr("font-family","sans-serif").attr("font-size",10).attr("fill","black").attr("x",g+u.SvgHierarchyType.gotRectW/2-m.calculateTextWidth(E,10)/2).attr("y",h-u.SvgHierarchyType.gotHeaderH-y/2+2).text(E)}if(this.ghostCode!=c&&(null!=this.ghostCode&&this.clearGhostNodes(null==d.parent),null!=d.parent)){for(var x=null,O=0;O<d.parent.data.children.length;++O){d.parent.data.children[O].geoObjectType===c&&(x=O+1)}var I=i.localizeService.decode("hierarchy.content.addChild");d.parent.data.children.splice(x,0,{ghostingCode:c,geoObjectType:"GhostNode",label:I,children:[]}),i.renderTree(),this.ghostCode=c}var M=a.select(".svg-sibling-ghost-body-dz");!s&&m.isPointWithin(l,m.getBboxFromSelection(this.parentDz))?(this.parentDz.attr("stroke","blue"),this.parentDzText.attr("fill","blue"),S&&this.childDz.attr("stroke","black"),S&&this.childDzText.attr("fill","black"),M.attr("stroke","black"),this.activeDz=this.parentDz):S&&m.isPointWithin(l,m.getBboxFromSelection(this.childDz))?(!s&&this.parentDz.attr("stroke","black"),!s&&this.parentDzText.attr("fill","black"),this.childDz.attr("stroke","blue"),this.childDzText.attr("fill","blue"),M.attr("stroke","black"),this.activeDz=this.childDz):null!=M.node()&&m.isPointWithin(l,m.getBboxFromSelection(M))&&(!s&&this.parentDz.attr("stroke","black"),!s&&this.parentDzText.attr("fill","black"),S&&this.childDz.attr("stroke","black"),S&&this.childDzText.attr("fill","black"),M.attr("stroke","blue"),this.activeDz="sibling")}}},onDrop:function(e){if(null!=this.dropEl&&null!=this.activeDz){var t=this.dropEl.attr("data-gotCode"),n=i.primarySvgHierarchy.getD3Tree().find((function(e){return e.data.geoObjectType===t})),r=a.select(e).attr("id");if(this.activeDz===this.childDz)if(0==n.data.children.length)i.addChild(i.currentHierarchy.code,t,r);else{for(var o="",l=0;l<n.data.children.length;++l)o+=n.data.children[l].geoObjectType,l<n.data.children.length-1&&(o+=",");i.insertBetweenTypes(i.currentHierarchy.code,t,r,o)}else this.activeDz===this.parentDz?null==n.parent?i.insertBetweenTypes(i.currentHierarchy.code,"ROOT",r,t):i.insertBetweenTypes(i.currentHierarchy.code,n.parent.data.geoObjectType,r,t):"sibling"===this.activeDz&&i.addChild(i.currentHierarchy.code,n.parent.data.geoObjectType,a.select(e).attr("id"))}this.clearDropZones(),this.clearGhostNodes(!0)},clearDropZones:function(){null!=this.dropEl&&this.dropEl.attr("stroke",null),this.dropEl=null,this.activeDz=null,this.childDz=null,this.parentDz=null,a.select(".svg-dropZone-g").remove()},clearGhostNodes:function(e){var t=this;if(null!=this.ghostCode){var n=i.primarySvgHierarchy.getD3Tree().find((function(e){return e.data.ghostingCode===t.ghostCode}));if(null!=n){for(var r=null,o=0;o<n.parent.data.children.length;++o){n.parent.data.children[o].ghostingCode===this.ghostCode&&(r=o)}null!=r&&(n.parent.data.children.splice(r,1),e&&i.renderTree())}this.ghostCode=null}}}),a.drag().on("start",(function(i){if("false"!==a.select(this).attr("data-candrag")){var r=this.getBoundingClientRect();e=r.left-i.sourceEvent.pageX,t=r.top-i.sourceEvent.pageY,n=r.width}})).on("drag",(function(i){if("false"!==a.select(this).attr("data-candrag")){a.select(".g-context-menu").remove();var o=a.select(this);o.style("display","none");var l=document.elementFromPoint(i.sourceEvent.pageX,i.sourceEvent.pageY);o.style("display",null);for(var s=0;s<r.length;++s)r[s].onDrag(this,l,i);if(o.classed("dragging",!0).style("left",i.sourceEvent.pageX+e+"px").style("top",i.sourceEvent.pageY+t+"px").style("width",n+"px"),o.classed("got-group-parent")){var c=1;a.selectAll('.got-group-child[data-superTypeCode="'+o.attr("id")+'"]').each((function(){a.select(this).classed("dragging",!0).style("left",i.sourceEvent.pageX+e+"px").style("top",i.sourceEvent.pageY+t+(this.getBoundingClientRect().height+2)*c+"px").style("width",n+"px"),c++}))}}})).on("end",(function(e){var t=a.select(this).classed("dragging",!1).style("left",null).style("top",null).style("width",null);t.classed("got-group-parent")&&a.selectAll('.got-group-child[data-superTypeCode="'+t.attr("id")+'"]').each((function(){a.select(this).classed("dragging",!1).style("left",null).style("top",null).style("width",null)}));for(var n=0;n<r.length;++n)r[n].onDrop(this,e)}))(a.selectAll(".sidebar-section-content ul.list-group li.got-li-item"))},e.prototype.registerSvgHandlers=function(){var e,t,n,i,r=this;a.drag().on("start",(function(o){var l=m.svgPoint(o.sourceEvent.pageX,o.sourceEvent.pageY);i=r.primarySvgHierarchy.getNodeByCode(a.select(this).attr("data-gotCode")),n=i.getPos(),e=n.x-l.x,t=n.y-l.y})).on("drag",(function(n){a.select(".g-context-menu").remove();var o=m.svgPoint(n.sourceEvent.pageX,n.sourceEvent.pageY);(i=r.primarySvgHierarchy.getNodeByCode(a.select(this).attr("data-gotCode"))).setPos(o.x+e,o.y+t,!0)})).on("end",(function(e){a.select("#svg").attr("viewBox").split(" ");i.setPos(n.x,n.y,!1)}))(a.selectAll(".svg-got-body-rect[data-inherited=false],.svg-got-label-text[data-inherited=false],.svg-got-header-rect[data-inherited=false]"))},e.prototype.findGeoObjectTypeByCode=function(e){for(var t=0;t<this.geoObjectTypes.length;++t){var n=this.geoObjectTypes[t];if(n.code===e)return n}},e.prototype.findHierarchyByCode=function(e){for(var t=0;t<this.hierarchies.length;++t){var n=this.hierarchies[t];if(n.code===e)return n}},e.prototype.findOrganizationByCode=function(e){for(var t=0;t<this.organizations.length;++t){var n=this.organizations[t];if(n.code===e)return n}},e.prototype.addChild=function(e,t,n){var i=this;this.hierarchyService.addChildToHierarchy(e,t,n).then((function(t){for(var r=i.findGeoObjectTypeByCode(n),o=null,a=0;a<r.relatedHierarchies.length;++a)if(r.relatedHierarchies[a]===e){o=a;break}null==o&&r.relatedHierarchies.push(e),i.refreshPrimaryHierarchy(t)})).catch((function(e){i.error(e)}))},e.prototype.insertBetweenTypes=function(e,t,n,i){var r=this;this.hierarchyService.insertBetweenTypes(e,t,n,i).then((function(e){r.refreshPrimaryHierarchy(e)})).catch((function(e){r.error(e)}))},e.prototype.ngAfterViewInit=function(){},e.prototype.isRA=function(){return this.authService.isRA()},e.prototype.isOrganizationRA=function(e,t){return void 0===t&&(t=!1),this.isSRA||this.authService.isOrganizationRA(e)},e.prototype.getTypesByOrg=function(e){for(var t=[],n=0;n<this.geoObjectTypes.length;++n){var i=this.geoObjectTypes[n];i.organizationCode===e.code&&t.push(i)}return t},e.prototype.getHierarchiesByOrg=function(e){for(var t=[],n=0;n<this.hierarchies.length;++n){var i=this.hierarchies[n];i.organizationCode===e.code&&t.push(i)}return t},e.prototype.refreshAll=function(e){var t=this;this.geoObjectTypes=[],this.registryService.init().then((function(n){if(t.localizeService.setLocales(n.locales),t.setGeoObjectTypes(n.types),t.organizations=n.organizations,t.organizations.forEach((function(e){t.isOrganizationRA(e.code)&&(t.userOrganization=e.code)})),!t.authService.isSRA()){var i=t.authService.getMyOrganizations(),r=n.organizations.findIndex((function(e){return e.code===i[0]}));r>=0&&h.default.arrayMove(n.organizations,r,0)}var o=t.getGeoObjectTypePosition("ROOT");o&&t.geoObjectTypes.splice(o,1),t.setHierarchies(n.hierarchies),t.setNodesOnInit(e),t.updateViewDatastructures()})).catch((function(e){t.error(e)}))},e.prototype.setGeoObjectTypes=function(e){var t=this;this.setAbstractTypes(e),e.forEach((function(e){e.isAbstract||e.superTypeCode||t.geoObjectTypes.push(e)})),this.geoObjectTypes.sort((function(e,t){return e.label.localizedValue.toLowerCase()<t.label.localizedValue.toLowerCase()?-1:e.label.localizedValue.toLowerCase()>t.label.localizedValue.toLowerCase()?1:0})),e.forEach((function(e){if(!e.isAbstract&&e.superTypeCode&&e.superTypeCode.length>0)for(var n=0;n<t.geoObjectTypes.length;n++){var i=t.geoObjectTypes[n];e.superTypeCode===i.code&&t.geoObjectTypes.splice(n+1,0,e)}}))},e.prototype.setAbstractTypes=function(e){var t=this;e.forEach((function(e){e.isAbstract&&t.geoObjectTypes.push(e)}))},e.prototype.updateViewDatastructures=function(){var e=this;this.hierarchiesByOrg=[],this.typesByOrg=[];for(var t=0;t<this.organizations.length;++t){var n=this.organizations[t];this.hierarchiesByOrg.push({org:n,hierarchies:this.getHierarchiesByOrg(n)}),this.typesByOrg.push({org:n,types:this.getTypesByOrg(n)})}this.geoObjectTypes.forEach((function(t){t.canDrag=e.calculateCanDrag(t),t.relatedHierarchies=e.calculateRelatedHierarchies(t)})),this.onFilterChange()},e.prototype.excludeHierarchyTypeDeletes=function(e){return-1!==this.hierarchyTypeDeleteExclusions.indexOf(e.code)},e.prototype.excludeGeoObjectTypeDeletes=function(e){return-1!==this.geoObjectTypeDeleteExclusions.indexOf(e.code)},e.prototype.setNodesOnInit=function(e){var t=-1;if(null!=e?t=this.hierarchies.findIndex((function(t){return t.code===e.code})):this.hierarchies.length>0&&(t=0),t>-1){var n=this.hierarchies[t];this.setCurrentHierarchy(n),this.renderTree()}},e.prototype.getHierarchy=function(e){var t=null;return this.hierarchies.forEach((function(n){e===n.code&&(t=n)})),t},e.prototype.setHierarchies=function(e){var t=this,n=[];e.forEach((function(e,i){e.rootGeoObjectTypes.length>0&&e.rootGeoObjectTypes.forEach((function(e){t.processHierarchyNodes(e)})),n.push(e)})),this.hierarchies=n,this.hierarchies.sort((function(e,t){return e.label.localizedValue.toLowerCase()<t.label.localizedValue.toLowerCase()?-1:e.label.localizedValue.toLowerCase()>t.label.localizedValue.toLowerCase()?1:0}))},e.prototype.processHierarchyNodes=function(e){var t=this;null!=e&&(e.label=this.getHierarchyLabel(e.geoObjectType),e.children.forEach((function(e){t.processHierarchyNodes(e)})))},e.prototype.getHierarchyLabel=function(e){var t=null;return this.geoObjectTypes.forEach((function(n){n.code===e&&(t=n.label.localizedValue)})),t},e.prototype.handleOnMenu=function(e,t){this.isOrganizationRA(this.currentHierarchy.organizationCode)?(this.contextMenuService.show.next({contextMenu:null!==e.data.childType?this.nodeMenuComponent:this.leafMenuComponent,event:t,item:e}),t.preventDefault(),t.stopPropagation()):(t.preventDefault(),t.stopPropagation())},e.prototype.treeNodeOnClick=function(e,t){e.treeModel.setFocusedNode(e),e.treeModel.isExpanded(e)?e.collapse():e.treeModel.expandAll()},e.prototype.hierarchyOnClick=function(e,t){this.setCurrentHierarchy(t),this.renderTree()},e.prototype.createHierarchy=function(){var e=this;this.bsModalRef=this.modalService.show(l.CreateHierarchyTypeModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"upload-modal"}),this.bsModalRef.content.onHierarchytTypeCreate.subscribe((function(t){e.hierarchies.push(t),e.hierarchies.sort((function(e,t){var n=e.label.localizedValue.toUpperCase(),i=t.label.localizedValue.toUpperCase();return n<i?-1:n>i?1:0})),e.updateViewDatastructures()}))},e.prototype.deleteHierarchyType=function(e){var t=this;this.bsModalRef=this.modalService.show(d.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+e.label.localizedValue+"]",this.bsModalRef.content.data=e.code,this.bsModalRef.content.type="DANGER",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.onConfirm.subscribe((function(e){t.removeHierarchyType(e)}))},e.prototype.editHierarchyType=function(e,t){var n=this;this.bsModalRef=this.modalService.show(l.CreateHierarchyTypeModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"upload-modal"}),this.bsModalRef.content.edit=!0,this.bsModalRef.content.readOnly=t,this.bsModalRef.content.hierarchyType=e,this.bsModalRef.content.onHierarchytTypeCreate.subscribe((function(e){var t=n.getHierarchyTypePosition(e.code);n.hierarchies[t].label=e.label,n.hierarchies[t].description=e.description,n.hierarchies[t].progress=e.progress,n.hierarchies[t].acknowledgement=e.acknowledgement,n.hierarchies[t].disclaimer=e.disclaimer,n.hierarchies[t].useConstraints=e.useConstraints,n.hierarchies[t].accessConstraints=e.accessConstraints,n.hierarchies[t].contact=e.contact,n.hierarchies[t].phoneNumber=e.phoneNumber,n.hierarchies[t].email=e.email,n.updateViewDatastructures(),n.currentHierarchy.code===e.code&&(n.setCurrentHierarchy(n.hierarchies[t]),n.renderTree())}))},e.prototype.setCurrentHierarchy=function(e){this.currentHierarchy=e},e.prototype.isPrimaryHierarchy=function(e){return e.code===this.currentHierarchy.code},e.prototype.removeHierarchyType=function(e){var t=this;this.hierarchyService.deleteHierarchyType(e).then((function(n){var i=t.getHierarchyTypePosition(e);t.hierarchies.splice(i,1),t.updateViewDatastructures(),t.hierarchies.length>0?t.setCurrentHierarchy(t.hierarchies[0]):t.currentHierarchy=null,t.renderTree()})).catch((function(e){t.error(e)}))},e.prototype.createGeoObjectType=function(e,t,n){var i=this;this.bsModalRef=this.modalService.show(s.CreateGeoObjTypeModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"upload-modal"}),this.bsModalRef.content.init(n,this.geoObjectTypes,e,t),this.bsModalRef.content.onGeoObjTypeCreate.subscribe((function(e){e.relatedHierarchies=i.calculateRelatedHierarchies(e),i.refreshAll(i.currentHierarchy)}))},e.prototype.deleteGeoObjectType=function(e){var t=this;this.bsModalRef=this.modalService.show(d.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+e.label.localizedValue+"]",this.bsModalRef.content.data=e.code,this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.type=p.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(e){t.removeGeoObjectType(e)}))},e.prototype.removeGeoObjectType=function(e,t){var n=this;void 0===t&&(t=null),this.registryService.deleteGeoObjectType(e).then((function(t){var i=n.getGeoObjectTypePosition(e);n.geoObjectTypes.splice(i,1),n.refreshAll(n.currentHierarchy)})).catch((function(e){null!=t&&t(e),n.error(e)}))},e.prototype.manageGeoObjectType=function(e,t){var n=this;this.bsModalRef=this.modalService.show(c.ManageGeoObjectTypeModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"manage-geoobjecttype-modal"}),e.attributes.sort((function(e,t){return e.label.localizedValue<t.label.localizedValue?-1:e.label.localizedValue>t.label.localizedValue?1:0})),this.bsModalRef.content.geoObjectType=e,this.bsModalRef.content.readOnly=t,this.bsModalRef.content.onGeoObjectTypeSubmitted.subscribe((function(e){if(e.isAbstract)n.refreshAll(n.currentHierarchy);else{var t=n.getGeoObjectTypePosition(e.code);-1!==t&&(n.geoObjectTypes[t]=e),n.updateViewDatastructures(),n.hierarchies.forEach((function(e){n.processHierarchyNodes(e.rootGeoObjectTypes[0])})),null!=n.currentHierarchy&&n.processHierarchyNodes(n.currentHierarchy.rootGeoObjectTypes[0]),n.renderTree()}}))},e.prototype.getHierarchyTypePosition=function(e){for(var t=0;t<this.hierarchies.length;t++){if(this.hierarchies[t].code===e)return t}},e.prototype.getGeoObjectTypePosition=function(e){for(var t=0;t<this.geoObjectTypes.length;t++){if(this.geoObjectTypes[t].code===e)return t}return null},e.prototype.refreshPrimaryHierarchy=function(e){this.processHierarchyNodes(e.rootGeoObjectTypes[0]);for(var t=0;t<this.hierarchies.length;++t){this.hierarchies[t].code===e.code&&(this.hierarchies[t]=e,this.setCurrentHierarchy(e))}this.updateViewDatastructures(),this.renderTree()},e.prototype.removeFromHierarchy=function(e,t,n){var i=this;void 0===n&&(n=null);var r=this;this.hierarchyService.removeFromHierarchy(this.currentHierarchy.code,e,t).then((function(e){for(var n=r.findGeoObjectTypeByCode(t),i=null,o=0;o<n.relatedHierarchies.length;++o)if(n.relatedHierarchies[o]===e.code){i=o;break}null!=i&&n.relatedHierarchies.splice(i,1),r.refreshPrimaryHierarchy(e)})).catch((function(e){null!=n&&n(e),i.error(e)}))},e.prototype.isActive=function(e){return this.currentHierarchy===e},e.prototype.onFilterChange=function(){var e=this,t=this.filter.toLowerCase();this.filteredHierarchiesByOrg=[],this.filteredTypesByOrg=[],this.hierarchiesByOrg.forEach((function(n){var i=n.hierarchies.filter((function(e){return-1!==e.label.localizedValue.toLowerCase().indexOf(t)}));e.filteredHierarchiesByOrg.push({org:n.org,hierarchies:i})})),this.typesByOrg.forEach((function(n){var i=n.types.filter((function(e){return-1!==e.label.localizedValue.toLowerCase().indexOf(t)}));e.filteredTypesByOrg.push({org:n.org,types:i})})),setTimeout((function(){e.registerDragHandlers()}),500)},e.prototype.handleInheritHierarchy=function(e,t,n){var i=this;this.hierarchyService.setInheritedHierarchy(e,t,n).then((function(e){i.refreshPrimaryHierarchy(e)})).catch((function(e){i.error(e)}))},e.prototype.handleUninheritHierarchy=function(e,t){var n=this;this.hierarchyService.removeInheritedHierarchy(e,t).then((function(e){n.refreshPrimaryHierarchy(e)})).catch((function(e){n.error(e)}))},e.prototype.importTypes=function(){var e=this;this.bsModalRef=this.modalService.show(g.ImportTypesModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"upload-modal"}),this.bsModalRef.content.init(this.organizations),this.bsModalRef.content.onNodeChange.subscribe((function(t){e.refreshAll(null)}))},e.prototype.error=function(e){this.bsModalRef=d.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(f.ɵɵdirectiveInject(y.HierarchyService),f.ɵɵdirectiveInject(v.BsModalService),f.ɵɵdirectiveInject(b.ContextMenuService),f.ɵɵdirectiveInject(S.LocalizationService),f.ɵɵdirectiveInject(y.RegistryService),f.ɵɵdirectiveInject(S.AuthService))},e.ɵcmp=f.ɵɵdefineComponent({type:e,selectors:[["hierarchies"]],viewQuery:function(e,t){if(1&e&&(f.ɵɵviewQuery(T,3),f.ɵɵviewQuery(k,1),f.ɵɵviewQuery(P,1)),2&e){var n=void 0;f.ɵɵqueryRefresh(n=f.ɵɵloadQuery())&&(t.searchInput=n.first),f.ɵɵqueryRefresh(n=f.ɵɵloadQuery())&&(t.nodeMenuComponent=n.first),f.ɵɵqueryRefresh(n=f.ɵɵloadQuery())&&(t.leafMenuComponent=n.first)}},decls:64,vars:13,consts:[[1,"new-admin-design-main",2,"overflow-y","hidden"],["id","app-container",1,"container-fluid"],[1,"row"],[1,"col-md-3","hierarchy-sidebar"],[1,"row",2,"padding","5px 5px"],[1,"col-md-12"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["searchInput",""],[3,"isAnimated","closeOthers"],[2,"border-radius","0",3,"panelClass"],["accordion-heading","",2,"padding","10px 15px"],[1,"fa","fa-circle",2,"margin-right","10px"],["key","hierarchy.sidebar.geoObjectTypes"],[1,"sidebar-section-content"],["class","list-group",4,"ngFor","ngForOf"],[1,"sidebar-section",2,"border-radius","0",3,"isOpen","panelClass"],[1,"fa","fa-sitemap"],["key","hierarchy.sidebar.hierarchies"],["style","text-align: center;padding: 10px 0;",4,"ngIf"],[1,"col-md-9","hierarchy-content"],["id","overflow-div"],[4,"ngIf"],["id","svgHolder"],["id","NodeTooltip",1,"modal-dialog"],[1,"modal-content"],[1,"modal-form"],[1,"row-holder"],[1,"label-holder"],["key","hierarchy.nodeTooltip.geoObjectTypeCode"],[1,"holder"],["id","geoObjectTypeCodeLabel"],["key","hierarchy.nodeTooltip.geoObjectTypeOrganization"],["id","geoObjectTypeOrganizationLabel"],["key","hierarchy.nodeTooltip.hierarchy"],["id","hierarchyLabel"],["key","hierarchy.nodeTooltip.hierarchyCode"],["id","hierarchyCodeLabel"],["key","hierarchy.nodeTooltip.hierarchyOrganization"],["id","hierarchyOrganizationLabel"],[1,"list-group"],[1,"got-org-label-wrapper"],["class","list-group-item got-li-item",3,"id","ngClass",4,"ngFor","ngForOf"],[2,"text-align","center","padding","10px 0"],["type","button",1,"btn","btn-primary",2,"margin-bottom","20px","min-width","45%",3,"click"],["key","hierarchy.sidebar.newGeoObjectType"],["type","button",1,"btn","btn-primary",2,"margin-bottom","20px","margin-left","10px","min-width","45%",3,"click"],["key","hierarchies.add.group.button.label"],[1,"list-group-item","got-li-item",3,"id","ngClass"],["style","position:absolute;right:10px;background:rgba(255,255,255,.7);top:50%;transform:translateY(-50%);",4,"ngIf"],[2,"position","absolute","right","10px","background","rgba(255,255,255,.7)","top","50%","transform","translateY(-50%)"],["class","fa fa-times delete-btn clickable pull-right",3,"title","click",4,"ngIf"],[1,"fa","fa-pencil","clickable","pull-right",3,"title","click"],["class","fa fa-plus clickable pull-right","title","add",3,"click",4,"ngIf"],[1,"fa","fa-times","delete-btn","clickable","pull-right",3,"title","click"],["title","add",1,"fa","fa-plus","clickable","pull-right",3,"click"],[1,"fa","fa-eye","clickable","pull-right",3,"title","click"],["class","list-group-item hier-li-item clickable",3,"id","ngClass","click",4,"ngFor","ngForOf"],["key","hierarchy.sidebar.newHierarchy"],[1,"list-group-item","hier-li-item","clickable",3,"id","ngClass","click"],["style","position:absolute;right:10px;background:inherit;top:50%;transform:translateY(-50%);",4,"ngIf"],[2,"position","absolute","right","10px","background","inherit","top","50%","transform","translateY(-50%)"],[1,"fa","fa-pencil","pull-right","clickable",3,"title","click"],[1,"fa","fa-eye","pull-right","clickable",3,"title","click"],["key","hierarchy.sidebar.importTypes"],["id","emptyHierarchyDropzone","class","drop-box-container",4,"ngIf"],["id","emptyHierarchyDropzone",1,"drop-box-container"],[1,"hierarchy-drop-box"],[1,"inner-drop-box"],[1,"upload-text"],["key","hierarchy.content.dragGotToHierarchy"],["key","hierarchy.content.emptyHierarchy"]],template:function(e,t){1&e&&(f.ɵɵelementStart(0,"div",0),f.ɵɵelement(1,"cgr-header"),f.ɵɵelement(2,"loading-bar"),f.ɵɵelementStart(3,"div",1),f.ɵɵelementStart(4,"div",2),f.ɵɵelementStart(5,"nav",3),f.ɵɵelementStart(6,"div",4),f.ɵɵelementStart(7,"div",5),f.ɵɵelementStart(8,"input",6,7),f.ɵɵlistener("ngModelChange",(function(e){return t.filter=e})),f.ɵɵpipe(10,"localize"),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementStart(11,"accordion",8),f.ɵɵelementStart(12,"accordion-group",9),f.ɵɵelementStart(13,"div",10),f.ɵɵelementStart(14,"span"),f.ɵɵelement(15,"i",11),f.ɵɵelementEnd(),f.ɵɵelement(16,"localize",12),f.ɵɵelementEnd(),f.ɵɵelementStart(17,"div",13),f.ɵɵtemplate(18,N,7,3,"ul",14),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementStart(19,"accordion-group",15),f.ɵɵelementStart(20,"div",10),f.ɵɵelementStart(21,"span"),f.ɵɵelement(22,"i",16),f.ɵɵelementEnd(),f.ɵɵelement(23,"localize",17),f.ɵɵelementEnd(),f.ɵɵelementStart(24,"div",13),f.ɵɵtemplate(25,U,7,3,"ul",14),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵtemplate(26,$,3,0,"div",18),f.ɵɵelementEnd(),f.ɵɵelementStart(27,"div",19),f.ɵɵelementStart(28,"div",20),f.ɵɵtemplate(29,Y,3,2,"div",21),f.ɵɵelement(30,"div",22),f.ɵɵelementStart(31,"div",23),f.ɵɵelementStart(32,"div",24),f.ɵɵelementStart(33,"div",25),f.ɵɵelementStart(34,"div",26),f.ɵɵelementStart(35,"div",27),f.ɵɵelementStart(36,"label"),f.ɵɵelement(37,"localize",28),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementStart(38,"div",29),f.ɵɵelement(39,"label",30),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementStart(40,"div",26),f.ɵɵelementStart(41,"div",27),f.ɵɵelementStart(42,"label"),f.ɵɵelement(43,"localize",31),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementStart(44,"div",29),f.ɵɵelement(45,"label",32),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementStart(46,"div",26),f.ɵɵelementStart(47,"div",27),f.ɵɵelementStart(48,"label"),f.ɵɵelement(49,"localize",33),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementStart(50,"div",29),f.ɵɵelement(51,"label",34),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementStart(52,"div",26),f.ɵɵelementStart(53,"div",27),f.ɵɵelementStart(54,"label"),f.ɵɵelement(55,"localize",35),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementStart(56,"div",29),f.ɵɵelement(57,"label",36),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementStart(58,"div",26),f.ɵɵelementStart(59,"div",27),f.ɵɵelementStart(60,"label"),f.ɵɵelement(61,"localize",37),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementStart(62,"div",29),f.ɵɵelement(63,"label",38),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd()),2&e&&(f.ɵɵadvance(8),f.ɵɵproperty("placeholder",f.ɵɵpipeBind1(10,11,"hierarchy.sidebar.searchAll"))("ngModel",t.filter),f.ɵɵadvance(3),f.ɵɵproperty("isAnimated",!0)("closeOthers",!1),f.ɵɵadvance(1),f.ɵɵproperty("panelClass","hierarchy-sidebar-content"),f.ɵɵadvance(6),f.ɵɵproperty("ngForOf",t.filteredTypesByOrg),f.ɵɵadvance(1),f.ɵɵproperty("isOpen",!0)("panelClass","hierarchy-sidebar-content"),f.ɵɵadvance(6),f.ɵɵproperty("ngForOf",t.filteredHierarchiesByOrg),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",t.isSRA),f.ɵɵadvance(3),f.ɵɵproperty("ngIf",null!=t.currentHierarchy&&(null==t.currentHierarchy.rootGeoObjectTypes||0==t.currentHierarchy.rootGeoObjectTypes.length)))},directives:[C.CgrHeaderComponent,E.LoadingBarComponent,x.DefaultValueAccessor,x.NgControlStatus,x.NgModel,O.AccordionComponent,O.AccordionPanelComponent,I.LocalizeComponent,M.NgForOf,M.NgIf,M.NgClass],pipes:[w.LocalizePipe],styles:['li.list-group-item[_ngcontent-%COMP%] {\n\tfont-size: 14px;\n\tborder: none;\n}\n\nli.list-group-item.active[_ngcontent-%COMP%] {\n    background-color: #DBD7A5;\n}\n\nli.list-group-item.got-li-item[_ngcontent-%COMP%]\n{\n\tborder-top: 15px solid #a0a0a0;\n\tborder-radius: 5px;\n}\n\nli.list-group-item.got-li-item.got-group-parent[_ngcontent-%COMP%]{\n}\nli.list-group-item.got-li-item.got-group-child[_ngcontent-%COMP%] {\n\tmargin-left: 40px;\n}\nli.list-group-item.got-li-item.got-group-child[_ngcontent-%COMP%]:before {\n    content: "";\n    position: absolute;\n    left: -8px;\n    border-left: 3px solid white;\n    height: 44px;\n    width: 1px;\n    top: -10px;\n}\n\nli.list-group-item.hier-li-item[_ngcontent-%COMP%] {\n\tbackground: #6e6775;\n    border: 2px solid #3E2A5A;\n    color: white;\n}\nli.list-group-item.hier-li-item[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%] {\n\tcolor: white;\n}\n\nli.list-group-item.hier-li-item.primary[_ngcontent-%COMP%]\n{\n\tbackground: #3E2A5A;\n}\n\n\nul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child:before {\n   \n   top: 6px; \n}\n\nul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:before {\n    \n   height: 6px; \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.got-org-label-wrapper[_ngcontent-%COMP%]{\n\tpadding: 7px 0;\n}\n.got-org-label-wrapper[_ngcontent-%COMP%]    > label[_ngcontent-%COMP%] {\n\tborder-bottom: solid 1px;\n\twidth: 100%;\n}\n\n.sidebar-section-content[_ngcontent-%COMP%] {\n\toverflow-y: auto;\n}\n\n.hierarchy-sidebar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n\tmargin:0;\n}\n\n.hierarchy-sidebar[_ngcontent-%COMP%] {\n    z-index: 999;\n    background: #f1f1f1;\n\n\ttransition: all 0.3s;\n  \tpadding:0;\n    vertical-align: top;\n    height: calc(100vh - 50px);\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n.hierarchy-content[_ngcontent-%COMP%] {\n\theight: calc(100vh - 50px);\n    overflow: auto;\n}\n\n#overflow-div[_ngcontent-%COMP%] {\n\ttop: 0;\n}\n\n.upload-text[_ngcontent-%COMP%] {\n\tposition:relative;\n\ttop:40%;\n}\n\n.sidebar-section[_ngcontent-%COMP%] {\n\n\ttext-align: left;\n\n}\n\n\n\n.hierarchy-sidebar-content[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%] {\n\n\tbackground-color: #f1f1f1;\n\tmax-height: 500px;\n    overflow: auto;\n}\n\n.sidebar-section-header[_ngcontent-%COMP%] {\n\tmargin-left:20px;\n\tcursor: pointer;\n}\n\n\naccordion-group.panel[_ngcontent-%COMP%] {\n\n}\n\nli.list-group-item[_ngcontent-%COMP%] {\n\tbackground-color: rgba(255, 255, 255, 1.0);\n\tmargin-bottom:5px;\n}\n\n.drop-box-container[_ngcontent-%COMP%] {\n    width: 80%;\n    border: 3px grey dashed;\n    border-radius: 5px;\n    margin: 0 auto;\n    margin-top: 50px;\n}\n\n.hierarchy-drop-box[_ngcontent-%COMP%] {\n  position:relative;\n  height: 100%;\n  cursor: default;\n}\n\nli.got-li-item.dragging[_ngcontent-%COMP%] {\n\tposition: fixed;\n\tcursor: grabbing !important;\n\tz-index: 99999999;\n}\n\n[data-candrag="true"][_ngcontent-%COMP%] {\n\tcursor: pointer;\n}\n[data-candrag="false"][_ngcontent-%COMP%] {\n  cursor: not-allowed;\n}\n\n#NodeTooltip[_ngcontent-%COMP%] {\n\topacity:0;\n\tleft:-10000;\n\ttop:-10000;\n\tposition:fixed;\n\twidth: 400px;\n\tmin-width: 400px;\n}\n#NodeTooltip[_ngcontent-%COMP%]   .modal-form[_ngcontent-%COMP%] {\n\tpadding-top:10px;\n}\n#NodeTooltip[_ngcontent-%COMP%]   .modal-form[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%] {\n\tpadding-bottom: 0px;\n}\n#NodeTooltip[_ngcontent-%COMP%]   .label-holder[_ngcontent-%COMP%] {\n\twidth: 40%;\n}\n#NodeTooltip[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%] {\n\twidth: 60%;\n}\n#NodeTooltip[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  line-height:2.8;\n}\n\n[_nghost-%COMP%]     .panel .panel-heading .accordion-toggle:after {\n    \n    font-family: \'Glyphicons Halflings\';  \n    content: "\\e080";    \n    float: right;        \n\n    margin-top: -30px;\n}\n[_nghost-%COMP%]     .panel.panel-open .panel-heading .accordion-toggle:after {\n    \n    content: "\\e114";    \n}']}),e}();t.HierarchyComponent=Q,("undefined"==typeof ngDevMode||ngDevMode)&&f.ɵsetClassMetadata(Q,[{type:i.Component,args:[{selector:"hierarchies",templateUrl:"./hierarchy.component.html",styleUrls:["./hierarchy.css"]}]}],(function(){return[{type:y.HierarchyService},{type:v.BsModalService},{type:b.ContextMenuService},{type:S.LocalizationService},{type:y.RegistryService},{type:S.AuthService}]}),{searchInput:[{type:i.ViewChild,args:["searchInput",{static:!0}]}],nodeMenuComponent:[{type:i.ViewChild,args:["nodeMenu"]}],leafMenuComponent:[{type:i.ViewChild,args:["leafMenu"]}]})},1040:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClassificationFieldComponent=void 0;var i=n(0),r=(n(1021),n(56),n(44)),o=n(1086),a=n(0),l=n(56),s=n(1021),c=n(18),d=n(292),p=n(1);function u(e,t){if(1&e&&(a.ɵɵelementStart(0,"h5"),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=t.item;a.ɵɵadvance(1),a.ɵɵtextInterpolate2("",n.displayLabel.localizedValue," : ",n.code,"")}}var m=function(e){return{"inline-loading":e}},g=function(){function e(e,t){this.modalService=e,this.service=t,this.disabled=!1,this.customStyles="",this.classNames="",this.container=null,this.value=null,this.valueChange=new i.EventEmitter,this.loading=!1,this.text="",this.typeahead=null,this.subscription=null}return e.prototype.ngOnInit=function(){var e=this;this.typeahead=new r.Observable((function(t){e.service.search(e.classificationType,e.rootCode,e.text).then((function(e){t.next(e)}))})),null!=this.value&&(this.text=this.value.label.localizedValue)},e.prototype.ngOnDestroy=function(){null!=this.subscription&&this.subscription.unsubscribe()},e.prototype.typeaheadOnSelect=function(e){if(null!=e){var t=e.item;this.text=t.displayLabel.localizedValue,null!=this.value&&this.value.code===t.code||this.setValue({code:t.code,label:t.displayLabel})}else null!=this.value&&this.setValue(null)},e.prototype.setValue=function(e){this.value=e,this.valueChange.emit(this.value)},e.prototype.onViewTree=function(){var e=this,t=this.modalService.show(o.ClassificationFieldModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});this.subscription=t.content.init(this.classificationType,this.rootCode,this.disabled,this.value,(function(t){e.text=t.displayLabel.localizedValue,e.setValue({code:t.code,label:t.displayLabel})}))},e.prototype.onTextChange=function(){null==this.value||null!=this.text&&0!==this.text.length||this.setValue(null)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.BsModalService),a.ɵɵdirectiveInject(s.ClassificationService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["classification-field"]],inputs:{classificationType:"classificationType",rootCode:"rootCode",name:"name",disabled:"disabled",customStyles:"customStyles",classNames:"classNames",container:"container",value:"value"},outputs:{valueChange:"valueChange"},decls:6,vars:17,consts:[["customItemTemplate",""],[1,"input-group"],["type","text","autocomplete","off",1,"form-control",3,"name","disabled","ngModel","typeaheadAsync","typeahead","ngClass","typeaheadOptionsLimit","typeaheadItemTemplate","typeaheadMinLength","typeaheadWaitMs","container","ngModelChange","change","typeaheadOnSelect","typeaheadLoading"],[1,"input-group-addon","clickable","addon-alert",3,"click"],["aria-hidden","true",1,"fa","fa-ellipsis-v"]],template:function(e,t){if(1&e&&(a.ɵɵtemplate(0,u,2,2,"ng-template",null,0,a.ɵɵtemplateRefExtractor),a.ɵɵelementStart(2,"div",1),a.ɵɵelementStart(3,"input",2),a.ɵɵlistener("ngModelChange",(function(e){return t.text=e}))("change",(function(){return t.onTextChange()}))("typeaheadOnSelect",(function(e){return t.typeaheadOnSelect(e)}))("typeaheadLoading",(function(e){return t.loading=e})),a.ɵɵelementEnd(),a.ɵɵelementStart(4,"span",3),a.ɵɵlistener("click",(function(){return t.onViewTree()})),a.ɵɵelement(5,"i",4),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=a.ɵɵreference(1);a.ɵɵadvance(3),a.ɵɵstyleMap(t.customStyles),a.ɵɵclassMap(t.classNames),a.ɵɵproperty("name",t.name)("disabled",t.disabled)("ngModel",t.text)("typeaheadAsync",!0)("typeahead",t.typeahead)("ngClass",a.ɵɵpureFunction1(15,m,t.loading))("typeaheadOptionsLimit",7)("typeaheadItemTemplate",n)("typeaheadMinLength",0)("typeaheadWaitMs",300)("container",t.container)}},directives:[c.DefaultValueAccessor,c.NgControlStatus,c.NgModel,d.TypeaheadDirective,p.NgClass],encapsulation:2}),e}();t.ClassificationFieldComponent=g,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(g,[{type:i.Component,args:[{selector:"classification-field",templateUrl:"./classification-field.component.html",styleUrls:[]}]}],(function(){return[{type:l.BsModalService},{type:s.ClassificationService}]}),{classificationType:[{type:i.Input}],rootCode:[{type:i.Input}],name:[{type:i.Input}],disabled:[{type:i.Input}],customStyles:[{type:i.Input}],classNames:[{type:i.Input}],container:[{type:i.Input}],value:[{type:i.Input}],valueChange:[{type:i.Output}]})},1041:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeRequestEditor=void 0;var i=n(378),r=n(44),o=n(1096),a=n(1150),l=function(){function e(e,t,n,i,o,a,l,s,c,d){this.onChangeSubject=new r.Subject,this.changeRequest=e,this.geoObject=t,this.geoObjectType=n,this.geometryAttributeType=o,this.parentAttributeType=a,this.hierarchies=i,this.localizationService=l,this.dateService=s,this.registryService=c,this.geomService=d,this.attributeEditors=this.generateAttributeEditors(),this.validate()}return e.prototype.generateAttributeEditors=function(){var e=this,t=["uid","sequence","type","lastUpdateDate","createDate"],n=[],i=this.geoObjectType.attributes.slice();return(i=i.filter((function(e){return-1===t.indexOf(e.code)}))).push(this.geometryAttributeType),i.push(this.parentAttributeType),i.forEach((function(t){if("_PARENT_"!==t.code)if(t.isChangeOverTime){var i=new o.ChangeRequestChangeOverTimeAttributeEditor(e,t,null);n.push(i)}else{i=new a.StandardAttributeCRModel(t,e.geoObject,e.changeRequest);n.push(i)}else e.hierarchies.forEach((function(i){var r=new o.ChangeRequestChangeOverTimeAttributeEditor(e,t,i);n.push(r)}))})),n},e.prototype.hasChanges=function(){var e=!1;return this.attributeEditors.forEach((function(t){t.hasChanges()&&(e=!0)})),e},e.prototype.isValid=function(){return this._isValid},e.prototype.validate=function(e){var t=this;return void 0===e&&(e=!1),this._isValid=!0,this.attributeEditors.forEach((function(n){e&&"exists"===n.attribute.code||(n.validate(!0),n.isValid()||(t._isValid=!1))})),this._isValid},e.prototype.findExistingValueOverTimeByOid=function(e,t){if(this.geoObject.attributes[t]){var n=this.geoObject.attributes[t].values.findIndex((function(t){return t.oid===e}));if(-1!==n)return this.geoObject.attributes[t].values[n]}return null},e.prototype.findEditorForValueOverTime=function(e){for(var t=0;t<this.attributeEditors.length;++t){var n=this.attributeEditors[t];if(n instanceof o.ChangeRequestChangeOverTimeAttributeEditor&&null!=n.getEditor(e))return n}},e.prototype.getEditorForAttribute=function(e,t){void 0===t&&(t=null);var n=this.attributeEditors.findIndex((function(n){return(!n.attribute.isChangeOverTime||null==t&&null==n.hierarchy||null!=n.hierarchy&&n.hierarchy.code===t.code)&&n.attribute.code===e.code}));return-1===n?null:this.attributeEditors[n]},e.prototype.getEditors=function(){return this.attributeEditors},e.prototype.onChange=function(e){this.onChangeSubject.next(e)},e.prototype.existsAtDate=function(e){for(var t=i.GeoObjectType.getAttribute(this.geoObjectType,"exists"),n=this.getEditorForAttribute(t).getEditors(),r=n.length,o=0;o<r;++o){var a=n[o];if(null!=a.startDate&&null!=a.endDate&&!a.isDelete()&&!0===a.value&&this.dateService.between(e,a.startDate,a.endDate))return!0}return!1},e}();t.ChangeRequestEditor=l},1042:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectEditorComponent=void 0;var i=n(0),r=(n(56),n(1)),o=n(193),a=(n(1015),n(25),n(378)),l=n(44),s=n(0),c=n(56),d=n(1015),p=n(25),u=n(18),m=n(1),g=n(88),h=n(1037),f=["attributeEditor"];function y(e,t){if(1&e&&s.ɵɵelement(0,"geoobject-shared-attribute-editor",10,11),2&e){var n=s.ɵɵnextContext();s.ɵɵproperty("geoObjectType",n.geoObjectType)("postGeoObject",n.geoObject)("isNew",n.isNewGeoObject)("isGeometryInlined",!0)("hierarchies",n.hierarchies)("readOnly",!1)}}var v=function(){function e(e,t,n,i,r){this.modalService=e,this.bsModalRef=t,this.registryService=n,this.localizeService=i,this.tabIndex=0,this.isNewGeoObject=!1,this.submitFunction=null,this.isAdmin=r.isAdmin(),this.isMaintainer=this.isAdmin||r.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||r.isContributer()}return e.prototype.ngOnInit=function(){},e.prototype.findVotWithStartDate=function(e,t){for(var n=0;n<e.length;++n)if(e[n].startDate===t)return e[n];return null},e.prototype.setMasterListId=function(e){this.masterListId=e},e.prototype.setOnSuccessCallback=function(e){this.onSuccessCallback=e},e.prototype.configureAsNew=function(e,t,n){var i=this;this.isNewGeoObject=!0,this.isGeometryEditable=n,this.fetchGeoObjectType(e),this.fetchLocales(),this.registryService.newGeoObjectOverTime(e).then((function(e){i.geoObject=new a.GeoObjectOverTime(i.geoObjectType,e.geoObject.attributes),i.hierarchies=e.hierarchies}))},e.prototype.configureFromImportError=function(e,t,n,i){var r=this,o=e.object.geoObject.attributes.type;this.isNewGeoObject=e.object.isNew,this.isGeometryEditable=i,this.fetchGeoObjectType(o),this.fetchLocales(),null!=e.object&&null!=e.object.parents&&e.object.parents.length>0?this.hierarchies=e.object.parents:this.registryService.newGeoObjectOverTime(o).then((function(e){r.hierarchies=e.hierarchies})),this.geoObject=new a.GeoObjectOverTime(this.geoObjectType,e.object.geoObject.attributes),this.submitFunction=function(n,i,o){var a={historyId:t,importErrorId:e.id,resolution:"APPLY_GEO_OBJECT",parentTreeNode:i,geoObject:n,isNew:e.object.isNew};r.registryService.submitErrorResolve(a).then((function(){null!=r.onSuccessCallback&&r.onSuccessCallback()})).catch((function(e){r.error(e)}))}},e.prototype.configureAsExisting=function(e,t,n,i){this.isNewGeoObject=!1,this.isGeometryEditable=i,this.fetchGeoObject(e,t),this.fetchGeoObjectType(t),this.fetchHierarchies(e,t),this.fetchLocales()},e.prototype.fetchGeoObject=function(e,t){var n=this;this.registryService.getGeoObjectOverTime(e,t).then((function(e){n.geoObject=new a.GeoObjectOverTime(n.geoObjectType,JSON.parse(JSON.stringify(e)).attributes)})).catch((function(e){n.error(e)}))},e.prototype.fetchLocales=function(){var e=this;this.registryService.getLocales().then((function(t){e.localizeService.setLocales(t)})).catch((function(t){e.error(t)}))},e.prototype.fetchGeoObjectType=function(e){var t=this;this.registryService.getGeoObjectTypes([e],null).then((function(e){t.geoObjectType=e[0],null!=t.geoObject&&(t.geoObject.geoObjectType=t.geoObjectType),t.geoObjectType.isGeometryEditable})).catch((function(e){console.log(e)}))},e.prototype.fetchHierarchies=function(e,t){var n=this;this.registryService.getHierarchiesForGeoObject(e,t).then((function(e){n.hierarchies=e})).catch((function(e){n.error(e)}))},e.prototype.getTypeAheadObservable=function(e,t){var n=this;return l.Observable.create((function(i){n.registryService.getGeoObjectSuggestionsTypeAhead(e,t).then((function(e){i.next(e)}))}))},e.prototype.typeaheadOnSelect=function(e,t){var n=this;this.registryService.getGeoObjectByCode(e.item.code,t.geoObject.properties.type).then((function(e){t.geoObject=e})).catch((function(e){n.error(e)}))},e.prototype.canSubmit=function(){return this.attributeEditor&&this.attributeEditor.isValid()&&(this.isNewGeoObject||this.attributeEditor&&this.attributeEditor.getChangeRequestEditor().hasChanges())},e.prototype.error=function(e){this.bsModalRef=o.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.prototype.cancel=function(){this.bsModalRef.hide()},e.prototype.submit=function(){this.bsModalRef.hide(),null==this.submitFunction||this.submitFunction(this.geoObject,this.hierarchies,this.attributeEditor)},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.BsModalService),s.ɵɵdirectiveInject(c.BsModalRef),s.ɵɵdirectiveInject(d.RegistryService),s.ɵɵdirectiveInject(p.LocalizationService),s.ɵɵdirectiveInject(p.AuthService))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["geoobject-editor"]],viewQuery:function(e,t){if(1&e&&s.ɵɵviewQuery(f,1),2&e){var n;s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.attributeEditor=n.first)}},inputs:{geoObjectType:"geoObjectType",onSuccessCallback:"onSuccessCallback"},features:[s.ɵɵProvidersFeature([r.DatePipe])],decls:10,vars:3,consts:[[1,"modal-body"],[1,"modal-form",2,"overflow","visible"],[3,"geoObjectType","postGeoObject","isNew","isGeometryInlined","hierarchies","readOnly",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"button-holder","text-left"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[3,"key"],[3,"geoObjectType","postGeoObject","isNew","isGeometryInlined","hierarchies","readOnly"],["attributeEditor",""]],template:function(e,t){1&e&&(s.ɵɵelementStart(0,"div",0),s.ɵɵelementStart(1,"form",1),s.ɵɵtemplate(2,y,2,6,"geoobject-shared-attribute-editor",2),s.ɵɵelementStart(3,"div",3),s.ɵɵelementStart(4,"div",4),s.ɵɵelementStart(5,"div",5),s.ɵɵelementStart(6,"button",6),s.ɵɵlistener("click",(function(){return t.cancel()})),s.ɵɵelement(7,"localize",7),s.ɵɵelementEnd(),s.ɵɵelementStart(8,"button",8),s.ɵɵlistener("click",(function(){return t.submit()})),s.ɵɵelement(9,"localize",9),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(2),s.ɵɵproperty("ngIf",t.geoObjectType&&t.geoObject&&t.hierarchies),s.ɵɵadvance(6),s.ɵɵproperty("disabled",!t.canSubmit()),s.ɵɵadvance(1),s.ɵɵproperty("key",t.isMaintainer?"modal.button.submit":"change.request.page.title"))},directives:[u.ɵangular_packages_forms_forms_ba,u.NgControlStatusGroup,u.NgForm,m.NgIf,g.LocalizeComponent,h.GeoObjectSharedAttributeEditorComponent],styles:['.modal-content[_ngcontent-%COMP%] {\n    overflow-y: visible !important;\n}\n\n.modal-form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   input[type="text"][_ngcontent-%COMP%]:disabled {\n    background: #eee;\n}\n\nli.list-group-item[_ngcontent-%COMP%] {\n    font-size: 18px;\n}\n\n.warning-text[_ngcontent-%COMP%]{\n    color: orange;\n}']}),e}();t.GeoObjectEditorComponent=v,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(v,[{type:i.Component,args:[{selector:"geoobject-editor",templateUrl:"./geoobject-editor.component.html",styleUrls:["./geoobject-editor.component.css"],providers:[r.DatePipe]}]}],(function(){return[{type:c.BsModalService},{type:c.BsModalRef},{type:d.RegistryService},{type:p.LocalizationService},{type:p.AuthService}]}),{geoObjectType:[{type:i.Input}],onSuccessCallback:[{type:i.Input}],attributeEditor:[{type:i.ViewChild,args:["attributeEditor"]}]})},1043:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CurationJob=t.CurationProblem=t.LayerRecord=t.ListOrgGroup=t.ListTypeGroup=t.ContextList=t.ListVersion=t.ContextLayer=t.ListTypeByType=t.ListType=t.ListMetadata=t.ListTypeEntry=t.ListTypeVersion=t.ListVersionMetadata=t.VersionMetadata=void 0;var o=function(){};t.VersionMetadata=o;var a=function(){};t.ListVersionMetadata=a;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(a);t.ListTypeVersion=l;var s=function(){};t.ListTypeEntry=s;var c=function(){};t.ListMetadata=c;var d=function(){};t.ListType=d;var p=function(){};t.ListTypeByType=p;var u=function(e,t,n,i,r,o,a){this.oid=e,this.dataSourceType=t,this.legendLabel=n,this.rendered=i,this.color=r,this.forDate=o,this.versionNumber=a};t.ContextLayer=u;var m=function(){};t.ListVersion=m;var g=function(){};t.ContextList=g;var h=function(){};t.ListTypeGroup=h;var f=function(){};t.ListOrgGroup=f;var y=function(){};t.LayerRecord=y;var v=function(){};t.CurationProblem=v;var b=function(){};t.CurationJob=b},1051:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HierarchyService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(0)),l=n(58),s=n(25),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.getHierarchyTypes=function(e){var t=new r.HttpParams;return t=t.set("types",JSON.stringify(e)),this.http.get(registry.contextPath+"/cgr/hierarchytype/get-all",{params:t}).toPromise()},e.prototype.getHierarchyGroupedTypes=function(){var e=new r.HttpParams;return this.http.get(registry.contextPath+"/hierarchy/groupedTypes",{params:e}).toPromise()},e.prototype.addChildToHierarchy=function(e,t,n){var i=this,a=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/hierarchytype/add",JSON.stringify({hierarchyCode:e,parentGeoObjectTypeCode:t,childGeoObjectTypeCode:n}),{headers:a}).pipe(o.finalize((function(){i.eventService.complete()}))).toPromise()},e.prototype.insertBetweenTypes=function(e,t,n,i){var a=this,l=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/hierarchy/insertBetweenTypes",JSON.stringify({hierarchyCode:e,parentGeoObjectTypeCode:t,middleGeoObjectTypeCode:n,youngestGeoObjectTypeCode:i}),{headers:l}).pipe(o.finalize((function(){a.eventService.complete()}))).toPromise()},e.prototype.removeFromHierarchy=function(e,t,n){var i=this,a=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/hierarchytype/remove",JSON.stringify({hierarchyCode:e,parentGeoObjectTypeCode:t,childGeoObjectTypeCode:n}),{headers:a}).pipe(o.finalize((function(){i.eventService.complete()}))).toPromise()},e.prototype.createHierarchyType=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/hierarchytype/create",JSON.stringify({htJSON:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.updateHierarchyType=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/hierarchytype/update",JSON.stringify({htJSON:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.deleteHierarchyType=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/cgr/hierarchytype/delete",{code:e},{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.setInheritedHierarchy=function(e,t,n){var i=this,a=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/hierarchy/setInherited",JSON.stringify({hierarchyTypeCode:e,inheritedHierarchyTypeCode:t,geoObjectTypeCode:n}),{headers:a}).pipe(o.finalize((function(){i.eventService.complete()}))).toPromise()},e.prototype.removeInheritedHierarchy=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/hierarchy/removeInherited",JSON.stringify({hierarchyTypeCode:e,geoObjectTypeCode:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.HierarchyService=c,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService}]}),null)},1052:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IOService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(0)),l=n(58),s=n(25),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.importSpreadsheet=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/etl/import",JSON.stringify({json:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.cancelImport=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/etl/cancel-import",JSON.stringify({configuration:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.importShapefile=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/etl/import",JSON.stringify({json:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.listGeoObjectTypes=function(e){var t=new r.HttpParams;return t=t.set("includeAbstractTypes",e.toString()),this.http.get(registry.contextPath+"/cgr/geoobjecttype/list-types",{params:t}).toPromise()},e.prototype.getTypeAncestors=function(e,t,n,i){void 0===i&&(i=!1);var o=new r.HttpParams;return o=(o=(o=(o=o.set("code",e)).set("hierarchyCode",t)).set("includeInheritedTypes",n.toString())).set("includeChild",i.toString()),this.http.get(registry.contextPath+"/cgr/geoobjecttype/get-ancestors",{params:o}).toPromise()},e.prototype.getHierarchiesForType=function(e,t){var n=this,i=new r.HttpParams;return i=(i=i.set("code",e)).set("includeTypes",t.toString()),this.eventService.start(),this.http.get(registry.contextPath+"/cgr/geoobjecttype/get-hierarchies",{params:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getHierarchiesForSubtypes=function(e,t){var n=this,i=new r.HttpParams;return i=(i=i.set("code",e)).set("includeTypes",t.toString()),this.eventService.start(),this.http.get(registry.contextPath+"/cgr/geoobjecttype/get-subtype-hierarchies",{params:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getGeoObjectSuggestions=function(e,t,n,i){var o=new r.HttpHeaders({"Content-Type":"application/json"}),a={text:e,type:t};return null!=n&&null!=i&&(a.parent=n,a.hierarchy=n),this.http.post(registry.contextPath+"/cgr/geoobject/suggestions",JSON.stringify(a),{headers:o}).toPromise()},e.prototype.createGeoObjectSynonym=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/geo-synonym/createGeoEntitySynonym",JSON.stringify({entityId:e,label:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.deleteGeoObjectSynonym=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/geo-synonym/deleteGeoEntitySynonym",JSON.stringify({synonymId:e,vOid:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getTermSuggestions=function(e,t,n){var i=new r.HttpParams;return i=(i=(i=i.set("mdAttributeId",e)).set("text",t)).set("limit",n),this.http.get(registry.contextPath+"/uploader/getClassifierSuggestions",{params:i}).toPromise()},e.prototype.createTermSynonym=function(e,t){var n=new r.HttpHeaders({"Content-Type":"application/json"}),i=JSON.stringify({classifierId:e,label:t});return this.http.post(registry.contextPath+"/uploader/createClassifierSynonym",i,{headers:n}).toPromise()},e.prototype.deleteTermSynonym=function(e){var t=new r.HttpHeaders({"Content-Type":"application/json"}),n=JSON.stringify({synonymId:e});return this.http.post(registry.contextPath+"/uploader/deleteClassifierSynonym",n,{headers:t}).toPromise()},e.prototype.createTerm=function(e,t,n){var i=new r.HttpHeaders({"Content-Type":"application/json"}),o={parentTermCode:n,termJSON:{label:e,code:t}};return this.http.post(registry.contextPath+"/cgr/geoobjecttype/addterm",JSON.stringify(o),{headers:i}).toPromise()},e.prototype.removeTerm=function(e,t){var n=new r.HttpHeaders({"Content-Type":"application/json"});return this.http.post(registry.contextPath+"/cgr/geoobjecttype/deleteterm",JSON.stringify({parentTermCode:e,termCode:t}),{headers:n}).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.IOService=c,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService}]}),null)},1053:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalizationManagerService=void 0;var i=n(0),r=n(58),o=(n(25),n(0)),a=n(58),l=n(25),s=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.getNewLocaleInfo=function(){return this.http.get(registry.contextPath+"/localization/getNewLocaleInformation").toPromise()},e.prototype.installLocale=function(e,t,n){var i=new r.HttpParams;return null!=e&&(i=i.set("language",e)),null!=t&&(i=i.set("country",t)),null!=n&&(i=i.set("variant",n)),this.http.get(registry.contextPath+"/localization/installLocale",{params:i}).toPromise()},e.ɵfac=function(t){return new(t||e)(o.ɵɵinject(a.HttpClient),o.ɵɵinject(l.EventService))},e.ɵprov=o.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.LocalizationManagerService=s,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(s,[{type:i.Injectable}],(function(){return[{type:a.HttpClient},{type:l.EventService}]}),null)},1054:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronizationConfigService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(0)),l=n(58),s=n(25),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.getPage=function(e,t){var n=this,i=new r.HttpParams;return i=(i=i.set("pageNumber",e.toString())).set("pageSize",t.toString()),this.eventService.start(),this.http.get(registry.contextPath+"/synchronization-config/get-all",{params:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.get=function(e){var t=this,n=new r.HttpParams;return n=n.set("oid",e),this.eventService.start(),this.http.get(registry.contextPath+"/synchronization-config/get",{params:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.getCustomAttrCfg=function(e,t){var n=this,i=new r.HttpParams;return i=(i=i.set("externalId",t)).set("geoObjectTypeCode",e),this.eventService.start(),this.http.get(registry.contextPath+"/synchronization-config/get-custom-attr",{params:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getConfigForES=function(e,t){var n=this,i=new r.HttpParams;return i=(i=i.set("externalSystemId",e)).set("hierarchyTypeCode",t),this.eventService.start(),this.http.get(registry.contextPath+"/synchronization-config/get-config-for-es",{params:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.apply=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/synchronization-config/apply",JSON.stringify({config:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.edit=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"}),i={};return null!=e&&(i={oid:e}),this.eventService.start(),this.http.post(registry.contextPath+"/synchronization-config/edit",JSON.stringify(i),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.remove=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/synchronization-config/remove",JSON.stringify({oid:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.unlock=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/synchronization-config/unlock",JSON.stringify({oid:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.run=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/synchronization-config/run",JSON.stringify({oid:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.getJobs=function(e,t,n){var i=new r.HttpParams;return i=(i=(i=i.set("oid",e)).set("pageNumber",t.toString())).set("pageSize",n.toString()),this.http.get(registry.contextPath+"/synchronization-config/get-jobs",{params:i}).toPromise()},e.prototype.getFhirExportImplementations=function(){var e=new r.HttpParams;return this.http.get(registry.contextPath+"/synchronization-config/get-fhir-export-implementations",{params:e}).toPromise()},e.prototype.getFhirImportImplementations=function(){var e=new r.HttpParams;return this.http.get(registry.contextPath+"/synchronization-config/get-fhir-import-implementations",{params:e}).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.SynchronizationConfigService=c,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService}]}),null)},1055:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(0)),l=n(58),s=n(25),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.getMyTasks=function(e,t,n){var i=new r.HttpParams;return i=(i=(i=(i=i.set("orderBy","createDate")).set("pageNum",e.toString())).set("pageSize",t.toString())).set("whereStatus",n),this.http.get(registry.contextPath+"/tasks/get",{params:i}).toPromise()},e.prototype.completeTask=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/tasks/complete",JSON.stringify({id:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.setTaskStatus=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(registry.contextPath+"/tasks/setTaskStatus",JSON.stringify({id:e,status:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.TaskService=c,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService}]}),null)},1056:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PANEL_SIZE_STATE=t.ModalState=t.LocationInformation=void 0;var i=function(){};t.LocationInformation=i;var r=function(){};t.ModalState=r,t.PANEL_SIZE_STATE={MINIMIZED:0,WINDOWED:1,FULLSCREEN:2}},1057:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefineAttributeModalContentComponent=void 0;var i=n(0),r=(n(56),n(193)),o=(n(25),n(378)),a=n(544),l=n(1035),s=n(0),c=n(56),d=n(25),p=n(18),u=n(1),m=n(88),g=n(1035);function h(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",25),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext();s.ɵɵadvance(1),s.ɵɵtextInterpolate(n.message)}}var f=function(e){return{active:e}},y=function(){function e(e,t,n){this.bsModalRef=e,this.modalStepIndicatorService=t,this.localizeService=n,this.stateChange=new i.EventEmitter,this.geoObjectTypeChange=new i.EventEmitter,this.message=null,this.newAttribute=null,this.modalStepConfig={steps:[{label:this.localizeService.decode("modal.step.indicator.manage.geoobjecttype"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.attributes"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.create.attribute"),active:!0,enabled:!0}]},this.modalState={state:a.GeoObjectTypeModalStates.defineAttribute,attribute:"",termOption:""}}return e.prototype.ngOnInit=function(){this.setAttribute("character"),this.modalStepIndicatorService.setStepConfig(this.modalStepConfig)},e.prototype.ngAfterViewInit=function(){this.attributeInputComponent&&this.attributeInputComponent.animate()},e.prototype.handleOnSubmit=function(){var e=this;this.service.addAttributeType(this.geoObjectType.code,this.newAttribute).then((function(t){e.geoObjectType.attributes.push(t),e.stateChange.emit({state:a.GeoObjectTypeModalStates.manageGeoObjectType,attribute:"",termOption:""}),e.geoObjectTypeChange.emit(e.geoObjectType)})).catch((function(t){e.error(t)}))},e.prototype.setAttribute=function(e){this.newAttribute="term"===e?new o.AttributeTermType("",e,this.localizeService.create(),this.localizeService.create(),!1,!1,!1,!0):"float"===e?new o.AttributeDecimalType("",e,this.localizeService.create(),this.localizeService.create(),!1,!1,!1,!0):new o.AttributeType("",e,this.localizeService.create(),this.localizeService.create(),!1,!1,!1,!0)},e.prototype.isFormValid=function(){var e=!1;return this.attributeInputComponent&&(e=this.attributeInputComponent.isValid()),!!e},e.prototype.cancel=function(){this.stateChange.emit({state:a.GeoObjectTypeModalStates.manageGeoObjectType,attribute:"",termOption:""})},e.prototype.error=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.BsModalRef),s.ɵɵdirectiveInject(d.ModalStepIndicatorService),s.ɵɵdirectiveInject(d.LocalizationService))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["define-attribute-modal-content"]],viewQuery:function(e,t){if(1&e&&s.ɵɵviewQuery(l.AttributeInputComponent,1),2&e){var n;s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.attributeInputComponent=n.first)}},inputs:{geoObjectType:"geoObjectType",service:"service"},outputs:{stateChange:"stateChange",geoObjectTypeChange:"geoObjectTypeChange"},decls:35,vars:27,consts:[[1,"modal-body"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,""],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading"],["key","hierarchy.management.define.attribute.title"],[1,"row"],[1,"col-md-12",2,"margin-bottom","20px"],[1,"btn-group","define-attribute-btns"],[1,"btn","full-width-radio-button",3,"ngClass","click"],["key","data.type.label.text"],["key","data.type.label.integer"],["key","data.type.label.float"],["key","data.type.label.date"],["key","data.type.label.boolean"],["key","data.type.label.term"],["key","data.type.label.classification"],[3,"isNew","excludeDescription","type","attribute","attributeChange"],[1,"col-md-12"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["key","modal.button.submit"],["role","alert",1,"alert","alert-danger"]],template:function(e,t){1&e&&(s.ɵɵelementStart(0,"div",0),s.ɵɵelementStart(1,"form",1,2),s.ɵɵlistener("ngSubmit",(function(){return t.handleOnSubmit()})),s.ɵɵelementStart(3,"div",3),s.ɵɵelementStart(4,"div",3),s.ɵɵtemplate(5,h,2,1,"div",4),s.ɵɵelementStart(6,"div",5),s.ɵɵelementStart(7,"h1"),s.ɵɵelement(8,"localize",6),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(9,"div",7),s.ɵɵelementStart(10,"div",8),s.ɵɵelementStart(11,"div",9),s.ɵɵelementStart(12,"label",10),s.ɵɵlistener("click",(function(){return t.setAttribute("character")})),s.ɵɵelement(13,"localize",11),s.ɵɵelementEnd(),s.ɵɵelementStart(14,"label",10),s.ɵɵlistener("click",(function(){return t.setAttribute("integer")})),s.ɵɵelement(15,"localize",12),s.ɵɵelementEnd(),s.ɵɵelementStart(16,"label",10),s.ɵɵlistener("click",(function(){return t.setAttribute("float")})),s.ɵɵelement(17,"localize",13),s.ɵɵelementEnd(),s.ɵɵelementStart(18,"label",10),s.ɵɵlistener("click",(function(){return t.setAttribute("date")})),s.ɵɵelement(19,"localize",14),s.ɵɵelementEnd(),s.ɵɵelementStart(20,"label",10),s.ɵɵlistener("click",(function(){return t.setAttribute("boolean")})),s.ɵɵelement(21,"localize",15),s.ɵɵelementEnd(),s.ɵɵelementStart(22,"label",10),s.ɵɵlistener("click",(function(){return t.setAttribute("term")})),s.ɵɵelement(23,"localize",16),s.ɵɵelementEnd(),s.ɵɵelementStart(24,"label",10),s.ɵɵlistener("click",(function(){return t.setAttribute("classification")})),s.ɵɵelement(25,"localize",17),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(26,"fieldset"),s.ɵɵelementStart(27,"attribute-input",18),s.ɵɵlistener("attributeChange",(function(e){return t.newAttribute=e})),s.ɵɵelementEnd(),s.ɵɵelementStart(28,"div",7),s.ɵɵelementStart(29,"div",19),s.ɵɵelementStart(30,"div",20),s.ɵɵelementStart(31,"button",21),s.ɵɵlistener("click",(function(){return t.cancel()})),s.ɵɵelement(32,"localize",22),s.ɵɵelementEnd(),s.ɵɵelementStart(33,"button",23),s.ɵɵelement(34,"localize",24),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(5),s.ɵɵproperty("ngIf",null!=t.message),s.ɵɵadvance(7),s.ɵɵproperty("ngClass",s.ɵɵpureFunction1(13,f,"character"===t.newAttribute.type)),s.ɵɵadvance(2),s.ɵɵproperty("ngClass",s.ɵɵpureFunction1(15,f,"integer"===t.newAttribute.type)),s.ɵɵadvance(2),s.ɵɵproperty("ngClass",s.ɵɵpureFunction1(17,f,"float"===t.newAttribute.type)),s.ɵɵadvance(2),s.ɵɵproperty("ngClass",s.ɵɵpureFunction1(19,f,"date"===t.newAttribute.type)),s.ɵɵadvance(2),s.ɵɵproperty("ngClass",s.ɵɵpureFunction1(21,f,"boolean"===t.newAttribute.type)),s.ɵɵadvance(2),s.ɵɵproperty("ngClass",s.ɵɵpureFunction1(23,f,"term"===t.newAttribute.type)),s.ɵɵadvance(2),s.ɵɵproperty("ngClass",s.ɵɵpureFunction1(25,f,"classification"===t.newAttribute.type)),s.ɵɵadvance(3),s.ɵɵproperty("isNew",!0)("excludeDescription",!1)("type",t.newAttribute.type)("attribute",t.newAttribute),s.ɵɵadvance(6),s.ɵɵproperty("disabled",!t.isFormValid()))},directives:[p.ɵangular_packages_forms_forms_ba,p.NgControlStatusGroup,p.NgForm,u.NgIf,m.LocalizeComponent,u.NgClass,g.AttributeInputComponent],styles:[".btn-group.define-attribute-btns[_ngcontent-%COMP%] {\n    \n    margin: 0 auto;\n    display: block;\n    \n}"]}),e}();t.DefineAttributeModalContentComponent=y,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(y,[{type:i.Component,args:[{selector:"define-attribute-modal-content",templateUrl:"./define-attribute-modal-content.component.html",styleUrls:["./define-attribute-modal-content.css"]}]}],(function(){return[{type:c.BsModalRef},{type:d.ModalStepIndicatorService},{type:d.LocalizationService}]}),{geoObjectType:[{type:i.Input}],service:[{type:i.Input}],stateChange:[{type:i.Output}],geoObjectTypeChange:[{type:i.Output}],attributeInputComponent:[{type:i.ViewChild,args:[l.AttributeInputComponent]}]})},1058:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditAttributeModalContentComponent=void 0;var i=n(0),r=n(2),o=(n(56),n(378),n(544)),a=n(193),l=(n(25),n(1035)),s=n(0),c=n(56),d=n(25),p=n(18),u=n(1),m=n(88),g=n(1035),h=n(1087);function f(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",17),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext();s.ɵɵadvance(1),s.ɵɵtextInterpolate(n.message)}}function y(e,t){1&e&&(s.ɵɵelementStart(0,"h4",18),s.ɵɵelement(1,"localize",19),s.ɵɵtext(2,": "),s.ɵɵelement(3,"localize",20),s.ɵɵelementEnd())}function v(e,t){1&e&&(s.ɵɵelementStart(0,"h4",18),s.ɵɵelement(1,"localize",19),s.ɵɵtext(2,": "),s.ɵɵelement(3,"localize",21),s.ɵɵelementEnd())}function b(e,t){1&e&&(s.ɵɵelementStart(0,"h4",18),s.ɵɵelement(1,"localize",19),s.ɵɵtext(2,": "),s.ɵɵelement(3,"localize",22),s.ɵɵelementEnd())}function S(e,t){1&e&&(s.ɵɵelementStart(0,"h4",18),s.ɵɵelement(1,"localize",19),s.ɵɵtext(2,": "),s.ɵɵelement(3,"localize",23),s.ɵɵelementEnd())}function C(e,t){1&e&&(s.ɵɵelementStart(0,"h4",18),s.ɵɵelement(1,"localize",19),s.ɵɵtext(2,": "),s.ɵɵelement(3,"localize",24),s.ɵɵelementEnd())}function E(e,t){1&e&&(s.ɵɵelementStart(0,"h4",18),s.ɵɵelement(1,"localize",19),s.ɵɵtext(2,": "),s.ɵɵelement(3,"localize",25),s.ɵɵelementEnd())}function x(e,t){1&e&&(s.ɵɵelementStart(0,"h4",18),s.ɵɵelement(1,"localize",19),s.ɵɵtext(2,": "),s.ɵɵelement(3,"localize",26),s.ɵɵelementEnd())}function O(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"term-option-widget",27),s.ɵɵlistener("attributeChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().attribute=e}))("stateChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onModalStateChange(e)})),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext();s.ɵɵproperty("attribute",i.attribute)("geoObjectType",i.geoObjectType)}}var I=function(){function e(e,t,n){this.bsModalRef=e,this.modalStepIndicatorService=t,this.localizeService=n,this.attribute=null,this.geoObjectTypeChange=new i.EventEmitter,this.stateChange=new i.EventEmitter,this.message=null,this.modalState={state:o.GeoObjectTypeModalStates.editAttribute,attribute:this.attribute,termOption:""},this.modalStepConfig={steps:[{label:this.localizeService.decode("modal.step.indicator.manage.geoobjecttype"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.attributes"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.edit.attribute"),active:!0,enabled:!0}]}}return e.prototype.ngOnInit=function(){this.modalStepIndicatorService.setStepConfig(this.modalStepConfig)},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnDestroy=function(){},e.prototype.handleOnSubmit=function(){var e=this;this.service.updateAttributeType(this.geoObjectType.code,this.attribute).then((function(t){for(var n=0;n<e.geoObjectType.attributes.length;n++){var i=e.geoObjectType.attributes[n];if(i.code===t.code){Object.assign(i,t);break}}e.stateChange.emit({state:o.GeoObjectTypeModalStates.manageGeoObjectType,attribute:"",termOption:""}),e.geoObjectTypeChange.emit(e.geoObjectType)})).catch((function(t){e.error(t)}))},e.prototype.onModalStateChange=function(e){this.stateChange.emit(e)},e.prototype.isFormValid=function(){return!0},e.prototype.cancel=function(){this.stateChange.emit({state:o.GeoObjectTypeModalStates.manageGeoObjectType,attribute:"",termOption:""})},e.prototype.back=function(){this.stateChange.emit({state:o.GeoObjectTypeModalStates.manageGeoObjectType,attribute:"",termOption:""})},e.prototype.error=function(e){this.message=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.BsModalRef),s.ɵɵdirectiveInject(d.ModalStepIndicatorService),s.ɵɵdirectiveInject(d.LocalizationService))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["edit-attribute-modal-content"]],viewQuery:function(e,t){if(1&e&&s.ɵɵviewQuery(l.AttributeInputComponent,1),2&e){var n;s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.attributeInputComponent=n.first)}},inputs:{geoObjectType:"geoObjectType",attribute:"attribute",service:"service"},outputs:{geoObjectTypeChange:"geoObjectTypeChange",stateChange:"stateChange"},decls:27,vars:15,consts:[[1,"modal-body"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,""],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading"],["key","hierarchy.management.edit.attribute.title"],["class","sub-title",4,"ngIf"],[3,"isNew","excludeDescription","type","attribute","attributeChange"],[3,"attribute","geoObjectType","attributeChange","stateChange",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["key","modal.button.submit"],["role","alert",1,"alert","alert-danger"],[1,"sub-title"],["key","hierarchy.management.edit.attribute.subtitle"],["key","data.type.label.text"],["key","data.type.label.integer"],["key","data.type.label.float"],["key","data.type.label.boolean"],["key","data.type.label.date"],["key","data.type.label.term"],["key","data.type.label.classification"],[3,"attribute","geoObjectType","attributeChange","stateChange"]],template:function(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",0),s.ɵɵelementStart(1,"form",1,2),s.ɵɵlistener("ngSubmit",(function(){return s.ɵɵrestoreView(n),s.ɵɵreference(2).valid&&t.handleOnSubmit()})),s.ɵɵelementStart(3,"div",3),s.ɵɵelementStart(4,"div",3),s.ɵɵtemplate(5,f,2,1,"div",4),s.ɵɵelementStart(6,"div",5),s.ɵɵelementStart(7,"h1"),s.ɵɵelement(8,"localize",6),s.ɵɵtext(9),s.ɵɵelementEnd(),s.ɵɵtemplate(10,y,4,0,"h4",7),s.ɵɵtemplate(11,v,4,0,"h4",7),s.ɵɵtemplate(12,b,4,0,"h4",7),s.ɵɵtemplate(13,S,4,0,"h4",7),s.ɵɵtemplate(14,C,4,0,"h4",7),s.ɵɵtemplate(15,E,4,0,"h4",7),s.ɵɵtemplate(16,x,4,0,"h4",7),s.ɵɵelementEnd(),s.ɵɵelementStart(17,"fieldset"),s.ɵɵelementStart(18,"attribute-input",8),s.ɵɵlistener("attributeChange",(function(e){return t.attribute=e})),s.ɵɵelementEnd(),s.ɵɵtemplate(19,O,1,2,"term-option-widget",9),s.ɵɵelementStart(20,"div",10),s.ɵɵelementStart(21,"div",11),s.ɵɵelementStart(22,"div",12),s.ɵɵelementStart(23,"button",13),s.ɵɵlistener("click",(function(){return t.cancel()})),s.ɵɵelement(24,"localize",14),s.ɵɵelementEnd(),s.ɵɵelementStart(25,"button",15),s.ɵɵelement(26,"localize",16),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}2&e&&(s.ɵɵadvance(5),s.ɵɵproperty("ngIf",null!=t.message),s.ɵɵadvance(4),s.ɵɵtextInterpolate1(": ",t.attribute.label.localizedValue," "),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","character"===t.attribute.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","integer"===t.attribute.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","float"===t.attribute.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","boolean"===t.attribute.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","date"===t.attribute.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","term"===t.attribute.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","classification"===t.attribute.type),s.ɵɵadvance(2),s.ɵɵproperty("isNew",!1)("excludeDescription","term"===t.attribute.type)("type",t.attribute.type)("attribute",t.attribute),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","term"===t.attribute.type&&t.isFormValid()),s.ɵɵadvance(6),s.ɵɵproperty("disabled",!t.isFormValid()))},directives:[p.ɵangular_packages_forms_forms_ba,p.NgControlStatusGroup,p.NgForm,u.NgIf,m.LocalizeComponent,g.AttributeInputComponent,h.TermOptionWidgetComponent],styles:['input[type="text"][_ngcontent-%COMP%] {\n    margin: 2px 0 2px 0 !important;\n    float: none !important;\n}\n\nlabel[_ngcontent-%COMP%] {\n    color: #999;\n    font-weight: bold;\n}\n\n.sub-title[_ngcontent-%COMP%] {\n    color: grey;\n}\n\n.btn-group.define-attribute-btns[_ngcontent-%COMP%] {\n    \n    margin: 0 auto;\n    display: block;\n    \n}'],data:{animation:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")])])]]}}),e}();t.EditAttributeModalContentComponent=I,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(I,[{type:i.Component,args:[{selector:"edit-attribute-modal-content",templateUrl:"./edit-attribute-modal-content.component.html",styleUrls:["./edit-attribute-modal-content.css"],animations:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")])])]]}]}],(function(){return[{type:c.BsModalRef},{type:d.ModalStepIndicatorService},{type:d.LocalizationService}]}),{geoObjectType:[{type:i.Input}],attribute:[{type:i.Input}],service:[{type:i.Input}],geoObjectTypeChange:[{type:i.Output}],stateChange:[{type:i.Output}],attributeInputComponent:[{type:i.ViewChild,args:[l.AttributeInputComponent]}]})},1059:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageTermOptionsComponent=void 0;var i=n(0),r=n(2),o=(n(56),n(547)),a=n(193),l=(n(25),n(1015),n(378)),s=n(544),c=n(0),d=n(56),p=n(25),u=n(1015),m=n(18),g=n(1),h=n(88),f=n(545),y=n(57);function v(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",24),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.message)}}function b(e,t){if(1&e&&(c.ɵɵelementStart(0,"th"),c.ɵɵelement(1,"localize",25),c.ɵɵtext(2," ("),c.ɵɵelement(3,"convert-key-label",26),c.ɵɵtext(4,") "),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵadvance(3),c.ɵɵproperty("key",n.locale)}}function S(e,t){if(1&e&&(c.ɵɵelementStart(0,"td"),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.value)}}function C(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td"),c.ɵɵtext(2),c.ɵɵelementEnd(),c.ɵɵtemplate(3,S,2,1,"td",14),c.ɵɵelementStart(4,"td",18),c.ɵɵelementStart(5,"a",27),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext().editTermOption(e)})),c.ɵɵelementEnd(),c.ɵɵelementStart(6,"a",28),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext().removeTermOption(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var i=t.$implicit;c.ɵɵadvance(2),c.ɵɵtextInterpolate(i.code),c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",i.label.localeValues)}}function E(e,t){if(1&e&&(c.ɵɵelementStart(0,"td"),c.ɵɵelementStart(1,"input",29),c.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=t.$implicit,i=c.ɵɵnextContext();c.ɵɵadvance(1),c.ɵɵproperty("ngModel",n.value)("name","termOptionLabel-"+n.locale)("required",!!i.termOption.code||null)}}var x=function(){function e(e,t,n,r,o,a){this.bsModalRef=e,this.cdr=t,this.modalService=n,this.localizeService=r,this.modalStepIndicatorService=o,this.registryService=a,this.attributeChange=new i.EventEmitter,this.stateChange=new i.EventEmitter,this.message=null,this.state="none",this.enableTermOptionForm=!1,this.modalStepConfig={steps:[{label:this.localizeService.decode("modal.step.indicator.manage.geoobjecttype"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.attributes"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.edit.attribute"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.term.options"),active:!0,enabled:!0}]}}return e.prototype.ngOnInit=function(){this.modalStepIndicatorService.setStepConfig(this.modalStepConfig),this.termOption=new l.Term("",this.localizeService.create(),this.localizeService.create())},e.prototype.ngAfterViewInit=function(){this.state="show",this.cdr.detectChanges()},e.prototype.ngOnDestroy=function(){},e.prototype.handleOnSubmit=function(){},e.prototype.animate=function(){this.state="none"},e.prototype.onAnimationDone=function(e){this.state="show"},e.prototype.isValid=function(){if(this.termOption.code&&this.termOption.code.length>0){if(-1!==this.termOption.code.indexOf(" "))return!1;for(var e=0;e<this.termOption.label.localeValues.length;e++)if(0===this.termOption.label.localeValues[e].value.replace(/\s/g,"").length)return!1;return!0}return this.termOption.code&&this.termOption.code.indexOf(" "),!1},e.prototype.addTermOption=function(){var e=this;this.registryService.addAttributeTermTypeOption(this.attribute.rootTerm.code,this.termOption).then((function(t){e.attribute.rootTerm.children.push(t),e.attributeChange.emit(e.attribute),e.clearTermOption(),e.enableTermOptionForm=!1})).catch((function(t){e.error(t)}))},e.prototype.deleteTermOption=function(e){var t=this;this.registryService.deleteAttributeTermTypeOption(this.attribute.rootTerm.code,e.code).then((function(n){-1!==t.attribute.rootTerm.children.indexOf(e)&&t.attribute.rootTerm.children.splice(t.attribute.rootTerm.children.indexOf(e),1),t.attributeChange.emit(t.attribute),t.clearTermOption()})).catch((function(e){t.error(e)}))},e.prototype.removeTermOption=function(e){var t=this;this.bsModalRef=this.modalService.show(a.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+"["+e.label+"]",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.type=o.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(n){t.deleteTermOption(e)}))},e.prototype.editTermOption=function(e){var t={state:s.GeoObjectTypeModalStates.editTermOption,attribute:this.attribute,termOption:JSON.parse(JSON.stringify(e))};this.stateChange.emit(t)},e.prototype.clearTermOption=function(){this.termOption.code="",this.termOption.label=this.localizeService.create(),this.termOption.description=this.localizeService.create()},e.prototype.cancelTermOption=function(){this.clearTermOption(),this.enableTermOptionForm=!1},e.prototype.openAddTermOptionForm=function(){this.enableTermOptionForm=!0},e.prototype.close=function(){this.stateChange.emit({state:s.GeoObjectTypeModalStates.editAttribute,attribute:this.attribute,termOption:""})},e.prototype.error=function(e){this.message=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(c.ɵɵdirectiveInject(d.BsModalRef),c.ɵɵdirectiveInject(c.ChangeDetectorRef),c.ɵɵdirectiveInject(d.BsModalService),c.ɵɵdirectiveInject(p.LocalizationService),c.ɵɵdirectiveInject(p.ModalStepIndicatorService),c.ɵɵdirectiveInject(u.RegistryService))},e.ɵcmp=c.ɵɵdefineComponent({type:e,selectors:[["manage-term-options"]],inputs:{attribute:"attribute"},outputs:{attributeChange:"attributeChange",stateChange:"stateChange"},decls:40,vars:10,consts:[[1,"modal-body"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading"],["key","hierarchy.management.edit.term.options.title"],[1,"row-holder"],[1,"label-holder"],["key","term.option.input.label.existingTypes"],[1,"holder"],[1,"text"],[1,"table-responsive"],[1,"table"],["key","data.property.label.code"],[4,"ngFor","ngForOf"],[1,"button-column-header"],["key","data.property.label.actions"],["type","text","name","termOptionCode",3,"ngModel","required","ngModelChange"],[1,"button-column"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["key","modal.button.add"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.done"],["role","alert",1,"alert","alert-danger"],["key","data.property.label.label"],[3,"key"],[1,"fa","fa-pencil","ico-edit",3,"routerLink","click"],[1,"fa","fa-trash-o","ico-remove",3,"routerLink","click"],["type","text",3,"ngModel","name","required","ngModelChange"]],template:function(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",0),c.ɵɵelementStart(1,"form",1,2),c.ɵɵlistener("ngSubmit",(function(){return c.ɵɵrestoreView(n),c.ɵɵreference(2).valid})),c.ɵɵelementStart(3,"fieldset"),c.ɵɵtemplate(4,v,2,1,"div",3),c.ɵɵelementStart(5,"div",4),c.ɵɵelementStart(6,"h1"),c.ɵɵelementStart(7,"localize",5),c.ɵɵtext(8),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(9,"div",6),c.ɵɵlistener("@toggleInputs.done",(function(e){return t.onAnimationDone(e)})),c.ɵɵelementStart(10,"div"),c.ɵɵelementStart(11,"div",7),c.ɵɵelementStart(12,"label"),c.ɵɵelement(13,"localize",8),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(14,"div",9),c.ɵɵelementStart(15,"span",10),c.ɵɵelementStart(16,"div",11),c.ɵɵelementStart(17,"table",12),c.ɵɵelementStart(18,"thead"),c.ɵɵelementStart(19,"tr"),c.ɵɵelementStart(20,"th"),c.ɵɵelement(21,"localize",13),c.ɵɵelementEnd(),c.ɵɵtemplate(22,b,5,1,"th",14),c.ɵɵelementStart(23,"th",15),c.ɵɵelement(24,"localize",16),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(25,"tbody"),c.ɵɵtemplate(26,C,7,2,"tr",14),c.ɵɵelementStart(27,"tr"),c.ɵɵelementStart(28,"td"),c.ɵɵelementStart(29,"input",17),c.ɵɵlistener("ngModelChange",(function(e){return t.termOption.code=e})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵtemplate(30,E,2,3,"td",14),c.ɵɵelementStart(31,"td",18),c.ɵɵelementStart(32,"button",19),c.ɵɵlistener("click",(function(){return t.addTermOption()})),c.ɵɵelement(33,"localize",20),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(34,"div",6),c.ɵɵelement(35,"div",7),c.ɵɵelementStart(36,"div",9),c.ɵɵelementStart(37,"div",21),c.ɵɵelementStart(38,"button",22),c.ɵɵlistener("click",(function(){return t.close()})),c.ɵɵelement(39,"localize",23),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}2&e&&(c.ɵɵadvance(4),c.ɵɵproperty("ngIf",null!=t.message),c.ɵɵadvance(4),c.ɵɵtextInterpolate1(": ",t.attribute.label.localizedValue,""),c.ɵɵadvance(1),c.ɵɵproperty("@toggleInputs",t.state),c.ɵɵadvance(1),c.ɵɵproperty("@openClose",void 0),c.ɵɵadvance(12),c.ɵɵproperty("ngForOf",t.termOption.label.localeValues),c.ɵɵadvance(4),c.ɵɵproperty("ngForOf",t.attribute.rootTerm.children),c.ɵɵadvance(3),c.ɵɵproperty("ngModel",t.termOption.code)("required",!!t.termOption.label||null),c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",t.termOption.label.localeValues),c.ɵɵadvance(2),c.ɵɵproperty("disabled",!t.isValid()))},directives:[m.ɵangular_packages_forms_forms_ba,m.NgControlStatusGroup,m.NgForm,g.NgIf,h.LocalizeComponent,g.NgForOf,m.DefaultValueAccessor,m.NgControlStatus,m.NgModel,m.RequiredValidator,f.ConvertKeyLabel,y.RouterLinkWithHref],styles:[".button-column[_ngcontent-%COMP%] {\n    text-align: right;\n}\n.button-column[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    font-size: 25px;\n    color:#bababa;\n}\n.button-column[_ngcontent-%COMP%]   .fa.ico-remove[_ngcontent-%COMP%]:hover{\n    color: red;\n}\n.button-column[_ngcontent-%COMP%]   .fa.ico-edit[_ngcontent-%COMP%]:hover{\n    color:#00bfff\n}\n.button-column[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    font-size: inherit;\n    height: 38px;\n}\n\n\nth.button-column-header[_ngcontent-%COMP%]{\n    text-align: right;\n}"],data:{animation:[r.trigger("toggleInputs",[r.state("none, void",r.style({opacity:0})),r.state("show",r.style({opacity:1})),r.transition("none => show",r.animate("300ms")),r.transition("show => none",r.animate("100ms"))]),r.trigger("openClose",[r.transition(":enter",[r.style({opacity:0}),r.animate("500ms",r.style({opacity:1}))]),r.transition(":leave",[r.style({opacity:1}),r.animate("0ms",r.style({opacity:0}))])])]}}),e}();t.ManageTermOptionsComponent=x,("undefined"==typeof ngDevMode||ngDevMode)&&c.ɵsetClassMetadata(x,[{type:i.Component,args:[{selector:"manage-term-options",templateUrl:"./manage-term-options.component.html",styleUrls:["./manage-term-options.css"],animations:[r.trigger("toggleInputs",[r.state("none, void",r.style({opacity:0})),r.state("show",r.style({opacity:1})),r.transition("none => show",r.animate("300ms")),r.transition("show => none",r.animate("100ms"))]),r.trigger("openClose",[r.transition(":enter",[r.style({opacity:0}),r.animate("500ms",r.style({opacity:1}))]),r.transition(":leave",[r.style({opacity:1}),r.animate("0ms",r.style({opacity:0}))])])]}]}],(function(){return[{type:d.BsModalRef},{type:c.ChangeDetectorRef},{type:d.BsModalService},{type:p.LocalizationService},{type:p.ModalStepIndicatorService},{type:u.RegistryService}]}),{attribute:[{type:i.Input}],attributeChange:[{type:i.Output}],stateChange:[{type:i.Output}]})},1060:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditTermOptionInputComponent=void 0;var i=n(0),r=n(2),o=(n(56),n(25),n(193)),a=(n(378),n(544)),l=(n(1015),n(0)),s=n(56),c=n(25),d=n(1015),p=n(1),u=n(18),m=n(88),g=n(1033);function h(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",19),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.message)}}var f=function(){function e(e,t,n,r){this.bsModalRef=e,this.modalStepIndicatorService=t,this.localizeService=n,this.registryService=r,this.attribute=null,this.stateChange=new i.EventEmitter,this.message=null,this.modalState={state:a.GeoObjectTypeModalStates.editAttribute,attribute:this.attribute,termOption:""},this.modalStepConfig={steps:[{label:this.localizeService.decode("modal.step.indicator.manage.geoobjecttype"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.attributes"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.edit.attribute"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.term.options"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.edit.term.option"),active:!0,enabled:!0}]}}return e.prototype.ngOnInit=function(){this.modalStepIndicatorService.setStepConfig(this.modalStepConfig)},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnDestroy=function(){},e.prototype.handleOnSubmit=function(){var e=this;this.registryService.updateAttributeTermTypeOption(this.attribute.rootTerm.code,this.termOption).then((function(t){var n=e.attribute.rootTerm.children.findIndex((function(e){return e.code===t.code}));-1!==n&&(e.attribute.rootTerm.children[n]=t),e.stateChange.emit({state:a.GeoObjectTypeModalStates.manageTermOption,attribute:e.attribute,termOption:null})})).catch((function(t){e.error(t)}))},e.prototype.isFormValid=function(){return!0},e.prototype.cancel=function(){this.stateChange.emit({state:a.GeoObjectTypeModalStates.manageTermOption,attribute:this.attribute,termOption:null})},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.BsModalRef),l.ɵɵdirectiveInject(c.ModalStepIndicatorService),l.ɵɵdirectiveInject(c.LocalizationService),l.ɵɵdirectiveInject(d.RegistryService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["edit-term-option-input"]],inputs:{attribute:"attribute",termOption:"termOption"},outputs:{stateChange:"stateChange"},decls:26,vars:5,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"modal-form",3,"ngSubmit"],["tForm","ngForm"],[1,""],[1,"heading"],["key","hierarchy.management.edit.term.option.title"],[1,"row-holder"],[1,"label-holder"],["key","data.property.label.code"],[1,"holder"],[1,"text"],["type","text","name","code",3,"disabled","ngModel","ngModelChange"],["key","data.property.label.label",3,"value","valueChange"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["key","modal.button.submit"],["role","alert",1,"alert","alert-danger"]],template:function(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",0),l.ɵɵtemplate(1,h,2,1,"div",1),l.ɵɵelementStart(2,"form",2,3),l.ɵɵlistener("ngSubmit",(function(){return l.ɵɵrestoreView(n),!l.ɵɵreference(3).invalid&&t.handleOnSubmit()})),l.ɵɵelementStart(4,"div",4),l.ɵɵelementStart(5,"div",4),l.ɵɵelementStart(6,"div",5),l.ɵɵelementStart(7,"h1"),l.ɵɵelement(8,"localize",6),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(9,"fieldset"),l.ɵɵelementStart(10,"div",7),l.ɵɵelementStart(11,"div",8),l.ɵɵelementStart(12,"label"),l.ɵɵelement(13,"localize",9),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(14,"div",10),l.ɵɵelementStart(15,"span",11),l.ɵɵelementStart(16,"input",12),l.ɵɵlistener("ngModelChange",(function(e){return t.termOption.code=e})),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(17,"localized-input",13),l.ɵɵlistener("valueChange",(function(e){return t.termOption.label=e})),l.ɵɵelementEnd(),l.ɵɵelementStart(18,"div",7),l.ɵɵelement(19,"div",8),l.ɵɵelementStart(20,"div",10),l.ɵɵelementStart(21,"div",14),l.ɵɵelementStart(22,"button",15),l.ɵɵlistener("click",(function(){return t.cancel()})),l.ɵɵelement(23,"localize",16),l.ɵɵelementEnd(),l.ɵɵelementStart(24,"button",17),l.ɵɵelement(25,"localize",18),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var i=l.ɵɵreference(3);l.ɵɵadvance(1),l.ɵɵproperty("ngIf",null!=t.message),l.ɵɵadvance(15),l.ɵɵproperty("disabled",!0)("ngModel",t.termOption.code),l.ɵɵadvance(1),l.ɵɵproperty("value",t.termOption.label),l.ɵɵadvance(7),l.ɵɵproperty("disabled",i.invalid)}},directives:[p.NgIf,u.ɵangular_packages_forms_forms_ba,u.NgControlStatusGroup,u.NgForm,m.LocalizeComponent,u.DefaultValueAccessor,u.NgControlStatus,u.NgModel,g.LocalizedInputComponent],encapsulation:2,data:{animation:[r.trigger("openClose",[r.transition(":enter",[r.style({opacity:0}),r.animate("500ms",r.style({opacity:1}))]),r.transition(":leave",[r.style({opacity:1}),r.animate("0ms",r.style({opacity:0}))])])]}}),e}();t.EditTermOptionInputComponent=f,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(f,[{type:i.Component,args:[{selector:"edit-term-option-input",templateUrl:"./edit-term-option-input.component.html",styleUrls:[],animations:[r.trigger("openClose",[r.transition(":enter",[r.style({opacity:0}),r.animate("500ms",r.style({opacity:1}))]),r.transition(":leave",[r.style({opacity:1}),r.animate("0ms",r.style({opacity:0}))])])]}]}],(function(){return[{type:s.BsModalRef},{type:c.ModalStepIndicatorService},{type:c.LocalizationService},{type:d.RegistryService}]}),{attribute:[{type:i.Input}],termOption:[{type:i.Input}],stateChange:[{type:i.Output}]})},1061:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBboxFromSelection=t.isBboxTotallyWithin=t.isBboxPartiallyWithin=t.isPointWithin=t.svgPoint=t.calculateTextWidth=void 0;var i=n(860);function r(e,t){return e.y>t.y&&e.y<t.y+t.height&&e.x>t.x&&e.x<t.x+t.width}t.calculateTextWidth=function(e,t){var n=i.select("#svg").append("g").classed("g-text-calc",!0).append("text").attr("x",-5e3).attr("y",-5e3).attr("font-size",t).text(e).node().getBBox();return i.select(".g-text-calc").remove(),n.width+2},t.svgPoint=function(e,t){var n=i.select("#svg").node(),r=n.createSVGPoint();return r.x=e,r.y=t,r.matrixTransform(n.getScreenCTM().inverse())},t.isPointWithin=r,t.isBboxPartiallyWithin=function(e,t){return r({x:e.x,y:e.y},t)||r({x:e.x+e.width,y:e.y+e.height},t)||r({x:e.x+e.width,y:e.y},t)||r({x:e.x,y:e.y+e.height},t)},t.isBboxTotallyWithin=function(e,t){return r({x:e.x,y:e.y},t)&&r({x:e.x+e.width,y:e.y+e.height},t)&&r({x:e.x+e.width,y:e.y},t)&&r({x:e.x,y:e.y+e.height},t)},t.getBboxFromSelection=function(e){return{x:parseInt(e.attr("x")),y:parseInt(e.attr("y")),width:parseInt(e.attr("width")),height:parseInt(e.attr("height"))}}},1062:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttributesPageComponent=void 0;var i=n(0),r=(n(1030),n(0)),o=n(88),a=n(18),l=n(1);function s(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",21),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵpropertyInterpolate("value",n),r.ɵɵadvance(1),r.ɵɵtextInterpolate(n)}}function c(e,t){if(1&e&&(r.ɵɵelementStart(0,"div",8),r.ɵɵelementStart(1,"div",9),r.ɵɵelementStart(2,"div",16),r.ɵɵelementStart(3,"label",17),r.ɵɵtext(4),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(5,"div",18),r.ɵɵelementStart(6,"select",19),r.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.target=e})),r.ɵɵelement(7,"option"),r.ɵɵtemplate(8,s,2,2,"option",20),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=t.$implicit,i=r.ɵɵnextContext();r.ɵɵadvance(4),r.ɵɵtextInterpolate(n.label.localizedValue),r.ɵɵadvance(2),r.ɵɵproperty("name",n.code+(null!=n.locale?n.locale:""))("ngModel",n.target)("required","invalid"!==n.code&&n.required),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",i.configuration.sheet.attributes[n.baseType])}}var d=function(e){return{"chk-checked":e}};function p(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"div",8),r.ɵɵelementStart(1,"div",9),r.ɵɵelementStart(2,"div",16),r.ɵɵelementStart(3,"label",17),r.ɵɵelement(4,"localize",22),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(5,"div",23),r.ɵɵelementStart(6,"div",24),r.ɵɵelementStart(7,"div",25),r.ɵɵlistener("click",(function(){r.ɵɵrestoreView(n);var e=r.ɵɵnextContext();return e.configuration.postalCode=!e.configuration.postalCode})),r.ɵɵelement(8,"span"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext();r.ɵɵadvance(7),r.ɵɵproperty("ngClass",r.ɵɵpureFunction1(1,d,i.configuration.postalCode))}}function u(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",21),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵpropertyInterpolate("value",n),r.ɵɵadvance(1),r.ɵɵtextInterpolate(n)}}function m(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",21),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵpropertyInterpolate("value",n),r.ɵɵadvance(1),r.ɵɵtextInterpolate(n)}}function g(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"div",9),r.ɵɵelementStart(1,"div",16),r.ɵɵelementStart(2,"label",17),r.ɵɵelement(3,"localize",29),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(4,"div",18),r.ɵɵelementStart(5,"select",30),r.ɵɵlistener("ngModelChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext(2).configuration.revealGeometryColumn=e})),r.ɵɵelement(6,"option"),r.ɵɵtemplate(7,m,2,2,"option",20),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext(2);r.ɵɵadvance(5),r.ɵɵproperty("ngModel",i.configuration.revealGeometryColumn)("required",!1),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",i.configuration.sheet.attributes.text)}}function h(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"div",8),r.ɵɵelementStart(1,"div",9),r.ɵɵelementStart(2,"div",16),r.ɵɵelementStart(3,"label",17),r.ɵɵelement(4,"localize",26),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(5,"div",18),r.ɵɵelementStart(6,"select",27),r.ɵɵlistener("ngModelChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().configuration.externalIdAttributeTarget=e})),r.ɵɵelement(7,"option"),r.ɵɵtemplate(8,u,2,2,"option",20),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵtemplate(9,g,8,3,"div",28),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext();r.ɵɵadvance(6),r.ɵɵproperty("ngModel",i.configuration.externalIdAttributeTarget)("required",!0),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",i.configuration.sheet.attributes.text),r.ɵɵadvance(1),r.ɵɵproperty("ngIf","RevealExternalSystem"===i.configuration.externalSystem.type&&"EXCEL"===i.configuration.formatType)}}function f(e,t){1&e&&r.ɵɵelement(0,"localize",31)}function y(e,t){1&e&&r.ɵɵelement(0,"localize",32)}var v=function(){function e(){this.configurationChange=new i.EventEmitter,this.stateChange=new i.EventEmitter}return e.prototype.onNext=function(){this.configurationChange.emit(this.configuration),this.stateChange.emit("NEXT")},e.prototype.onCancel=function(){this.stateChange.emit("CANCEL")},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["attributes-page"]],inputs:{configuration:"configuration"},outputs:{configurationChange:"configurationChange",stateChange:"stateChange"},decls:20,vars:6,consts:[[1,"text-center"],["key","io.attributes.title"],[1,"lead"],["key","io.attributes.description"],[1,"modal-form"],["form","ngForm"],["class","form-group",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"row-holder"],[1,"button-holder"],["type","button","role","button",1,"btn","btn-default",3,"click"],["key","io.cancel"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.next",4,"ngIf"],["key","io.ok",4,"ngIf"],[1,"label-holder"],[1,""],[1,"holder"],[1,"select-area",3,"name","ngModel","required","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["key","io.modal.postalCode"],[1,"form-check"],[1,"check-block"],["name","postalCode",1,"jcf-unselectable","chk-area",2,"margin","0",3,"ngClass","click"],["key","io.modal.external"],["name","externalId",1,"select-area",3,"ngModel","required","ngModelChange"],["class","row-holder",4,"ngIf"],["key","io.import.revealGeometryAttribute"],["name","revealGeometryColumn",1,"select-area",3,"ngModel","required","ngModelChange"],["key","io.next"],["key","io.ok"]],template:function(e,t){if(1&e&&(r.ɵɵelementStart(0,"div"),r.ɵɵelementStart(1,"div",0),r.ɵɵelementStart(2,"h2"),r.ɵɵelement(3,"localize",1),r.ɵɵelementEnd(),r.ɵɵelementStart(4,"p",2),r.ɵɵelement(5,"localize",3),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(6,"form",4,5),r.ɵɵtemplate(8,c,9,5,"div",6),r.ɵɵelement(9,"hr"),r.ɵɵtemplate(10,p,9,3,"div",7),r.ɵɵtemplate(11,h,10,4,"div",7),r.ɵɵelementStart(12,"div",8),r.ɵɵelementStart(13,"div",9),r.ɵɵelementStart(14,"div",10),r.ɵɵelementStart(15,"button",11),r.ɵɵlistener("click",(function(){return t.onCancel()})),r.ɵɵelement(16,"localize",12),r.ɵɵelementEnd(),r.ɵɵelementStart(17,"button",13),r.ɵɵlistener("click",(function(){return t.onNext()})),r.ɵɵtemplate(18,f,1,0,"localize",14),r.ɵɵtemplate(19,y,1,0,"localize",15),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=r.ɵɵreference(7);r.ɵɵadvance(8),r.ɵɵproperty("ngForOf",t.configuration.type.attributes),r.ɵɵadvance(2),r.ɵɵproperty("ngIf",t.configuration.hasPostalCode),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",t.configuration.isExternal),r.ɵɵadvance(6),r.ɵɵproperty("disabled",n.invalid),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",!t.configuration.postalCode),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",t.configuration.postalCode)}},directives:[o.LocalizeComponent,a.ɵangular_packages_forms_forms_ba,a.NgControlStatusGroup,a.NgForm,l.NgForOf,l.NgIf,a.SelectControlValueAccessor,a.NgControlStatus,a.NgModel,a.RequiredValidator,a.NgSelectOption,a.ɵangular_packages_forms_forms_z,l.NgClass],encapsulation:2}),e}();t.AttributesPageComponent=v,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(v,[{type:i.Component,args:[{selector:"attributes-page",templateUrl:"./attributes-page.component.html",styleUrls:[]}]}],(function(){return[]}),{configuration:[{type:i.Input}],configurationChange:[{type:i.Output}],stateChange:[{type:i.Output}]})},1063:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationPageComponent=void 0;var i=n(0),r=(n(1030),n(1015),n(0)),o=n(1015),a=n(18),l=n(88),s=n(1);function c(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",35),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("value",n),r.ɵɵadvance(1),r.ɵɵtextInterpolate(n)}}function d(e,t){1&e&&(r.ɵɵelementStart(0,"option",36),r.ɵɵelement(1,"localize",37),r.ɵɵelementEnd())}function p(e,t){1&e&&(r.ɵɵelementStart(0,"option",38),r.ɵɵelement(1,"localize",39),r.ɵɵelementEnd())}function u(e,t){if(1&e&&(r.ɵɵelementStart(0,"div",17),r.ɵɵelementStart(1,"div",9),r.ɵɵelementStart(2,"div",18),r.ɵɵelementStart(3,"div",19),r.ɵɵelementStart(4,"label"),r.ɵɵtext(5),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(6,"div",20),r.ɵɵelementStart(7,"div",21),r.ɵɵelementStart(8,"label"),r.ɵɵelement(9,"localize",22),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(10,"div",23),r.ɵɵelementStart(11,"select",24),r.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.target=e})),r.ɵɵelement(12,"option",25),r.ɵɵtemplate(13,c,2,2,"option",26),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(14,"div",21),r.ɵɵelementStart(15,"label"),r.ɵɵelement(16,"localize",27),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(17,"div",23),r.ɵɵelementStart(18,"select",28),r.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.matchStrategy=e})),r.ɵɵelement(19,"option"),r.ɵɵelementStart(20,"option",29),r.ɵɵelement(21,"localize",30),r.ɵɵelementEnd(),r.ɵɵelementStart(22,"option",31),r.ɵɵelement(23,"localize",32),r.ɵɵelementEnd(),r.ɵɵtemplate(24,d,2,0,"option",33),r.ɵɵtemplate(25,p,2,0,"option",34),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=t.$implicit,i=t.index,o=r.ɵɵnextContext();r.ɵɵadvance(5),r.ɵɵtextInterpolate1(" ",n.label," "),r.ɵɵadvance(6),r.ɵɵproperty("ngModel",n.target)("name",i+"-location"),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",o.configuration.sheet.attributes.text),r.ɵɵadvance(5),r.ɵɵproperty("name",i+"-matchStrategy")("ngModel",n.matchStrategy)("required",null!=n.target&&""!==n.target),r.ɵɵadvance(6),r.ɵɵproperty("ngIf",o.configuration.isExternal),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",o.configuration.isExternal&&"DHIS2ExternalSystem"===o.configuration.externalSystem.type)}}var m=function(){function e(e){this.service=e,this.property="type",this.includeChild=!1,this.configurationChange=new i.EventEmitter,this.stateChange=new i.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.service.getTypeAncestors(this.configuration[this.property].code,this.configuration.hierarchy,!0,this.includeChild).then((function(t){e.configuration.locations=t}))},e.prototype.onNext=function(){this.configurationChange.emit(this.configuration),this.stateChange.emit("NEXT")},e.prototype.onBack=function(){this.stateChange.emit("BACK")},e.prototype.onCancel=function(){this.stateChange.emit("CANCEL")},e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(o.IOService))},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["location-page"]],inputs:{configuration:"configuration",property:"property",includeChild:"includeChild"},outputs:{configurationChange:"configurationChange",stateChange:"stateChange"},decls:19,vars:2,consts:[[1,"modal-form"],[1,"text-center"],["key","io.location.title"],[1,"lead"],["key","io.location.description"],[1,"col-md-12","order-md-1"],["form","ngForm"],["class","form-group",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"row-holder"],[1,"button-holder"],["type","submit","role","button",1,"btn","btn-default",3,"click"],["key","io.back"],["type","btn","role","button",1,"btn","btn-default",3,"click"],["key","io.cancel"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.submit"],[1,"form-group"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-body"],[1,"label-holder"],["key","io.import.modal.parent.source"],[1,"holder"],[1,"select-area",3,"ngModel","name","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["key","io.import.modal.parent.matchStrategy"],[1,"select-area",3,"name","ngModel","required","ngModelChange"],["value","ALL"],["key","io.modal.all"],["value","CODE"],["key","io.modal.code"],["value","EXTERNAL",4,"ngIf"],["value","DHIS2_PATH",4,"ngIf"],[3,"value"],["value","EXTERNAL"],["key","io.modal.external"],["value","DHIS2_PATH"],["key","io.modal.dhis2path"]],template:function(e,t){if(1&e&&(r.ɵɵelementStart(0,"form",0),r.ɵɵelementStart(1,"div",1),r.ɵɵelementStart(2,"h2"),r.ɵɵelement(3,"localize",2),r.ɵɵelementEnd(),r.ɵɵelementStart(4,"p",3),r.ɵɵelement(5,"localize",4),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(6,"div",5),r.ɵɵelementStart(7,"form",null,6),r.ɵɵtemplate(9,u,26,9,"div",7),r.ɵɵelementStart(10,"div",8),r.ɵɵelementStart(11,"div",9),r.ɵɵelementStart(12,"div",10),r.ɵɵelementStart(13,"button",11),r.ɵɵlistener("click",(function(){return t.onBack()})),r.ɵɵelement(14,"localize",12),r.ɵɵelementEnd(),r.ɵɵelementStart(15,"button",13),r.ɵɵlistener("click",(function(){return t.onCancel()})),r.ɵɵelement(16,"localize",14),r.ɵɵelementEnd(),r.ɵɵelementStart(17,"button",15),r.ɵɵlistener("click",(function(){return t.onNext()})),r.ɵɵelement(18,"localize",16),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=r.ɵɵreference(8);r.ɵɵadvance(9),r.ɵɵproperty("ngForOf",t.configuration.locations),r.ɵɵadvance(8),r.ɵɵproperty("disabled",n.invalid)}},directives:[a.ɵangular_packages_forms_forms_ba,a.NgControlStatusGroup,a.NgForm,l.LocalizeComponent,s.NgForOf,a.SelectControlValueAccessor,a.NgControlStatus,a.NgModel,a.NgSelectOption,a.ɵangular_packages_forms_forms_z,a.RequiredValidator,s.NgIf],encapsulation:2}),e}();t.LocationPageComponent=m,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(m,[{type:i.Component,args:[{selector:"location-page",templateUrl:"./location-page.component.html",styleUrls:[]}]}],(function(){return[{type:o.IOService}]}),{configuration:[{type:i.Input}],property:[{type:i.Input}],includeChild:[{type:i.Input}],configurationChange:[{type:i.Output}],stateChange:[{type:i.Output}]})},1064:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationProblemPageComponent=void 0;var i=n(0),r=(n(1030),n(193)),o=n(0),a=n(88),l=n(1),s=n(18),c=n(1091);function d(e,t){1&e&&(o.ɵɵelementStart(0,"div",6),o.ɵɵelementStart(1,"div",20),o.ɵɵelement(2,"localize",21),o.ɵɵelementEnd(),o.ɵɵelementEnd())}function p(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",6),o.ɵɵelementStart(1,"div",20),o.ɵɵtext(2),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(2),o.ɵɵtextInterpolate(n.message)}}function u(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"location-problem",22),o.ɵɵlistener("onError",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().handleError(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=t.index,a=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("problem",i)("configuration",a.configuration)("index",r)}}function m(e,t){1&e&&o.ɵɵelement(0,"localize",23)}function g(e,t){1&e&&o.ɵɵelement(0,"localize",24)}var h=function(){function e(){this.stateChange=new i.EventEmitter,this.message=null}return e.prototype.ngOnInit=function(){},e.prototype.hasProblems=function(){for(var e=0;e<this.configuration.locationProblems.length;e++)if(!this.configuration.locationProblems[e].resolved)return!0;return!1},e.prototype.handleError=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.prototype.onNext=function(){null==this.configuration.exclusions&&(this.configuration.exclusions=[]);for(var e=0;e<this.configuration.locationProblems.length;e++){var t=this.configuration.locationProblems[e];if(t.resolved&&"IGNOREATLOCATION"==t.action.name){var n={code:"##PARENT##",value:null!=t.parent?t.parent+"-"+t.label:t.label};this.configuration.exclusions.push(n)}}this.stateChange.emit("NEXT")},e.prototype.onCancel=function(){this.stateChange.emit("CANCEL")},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["location-problem-page"]],inputs:{configuration:"configuration"},outputs:{stateChange:"stateChange"},decls:34,vars:6,consts:[[1,"text-center"],["key","io.locationProblem.title"],[1,"lead"],["key","io.locationProblem.description"],["class","row",4,"ngIf"],["form","ngForm"],[1,"row"],[1,"col-sm-4"],["key","dataUploader.locationContext"],[1,"col-sm-2"],["key","dataUploader.unknownLocation"],["key","dataUploader.synonymn"],["key","dataUploader.actions"],[4,"ngFor","ngForOf"],[1,"col-sm-12","text-right",2,"margin-top","20px"],["type","button","role","button",1,"btn","btn-default",3,"click"],["key","io.cancel"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.next",4,"ngIf"],["key","io.ok",4,"ngIf"],[1,"alert","alert-danger"],["key","dataUploader.existingProblems"],[3,"problem","configuration","index","onError"],["key","io.next"],["key","io.ok"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"div",0),o.ɵɵelementStart(2,"h2"),o.ɵɵelement(3,"localize",1),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"p",2),o.ɵɵelement(5,"localize",3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(6,"div"),o.ɵɵtemplate(7,d,3,0,"div",4),o.ɵɵtemplate(8,p,3,1,"div",4),o.ɵɵelementStart(9,"form",null,5),o.ɵɵelementStart(11,"div",6),o.ɵɵelementStart(12,"div",7),o.ɵɵelementStart(13,"label"),o.ɵɵelement(14,"localize",8),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(15,"div",9),o.ɵɵelementStart(16,"label"),o.ɵɵelement(17,"localize",10),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(18,"div",7),o.ɵɵelementStart(19,"label"),o.ɵɵelement(20,"localize",11),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(21,"div",9),o.ɵɵelementStart(22,"label"),o.ɵɵelement(23,"localize",12),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵtemplate(24,u,2,3,"div",13),o.ɵɵelementStart(25,"div",6),o.ɵɵelementStart(26,"div",14),o.ɵɵelementStart(27,"button",15),o.ɵɵlistener("click",(function(){return t.onCancel()})),o.ɵɵelementStart(28,"span"),o.ɵɵelement(29,"localize",16),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(30,"button",17),o.ɵɵlistener("click",(function(){return t.onNext()})),o.ɵɵelementStart(31,"span"),o.ɵɵtemplate(32,m,1,0,"localize",18),o.ɵɵtemplate(33,g,1,0,"localize",19),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(7),o.ɵɵproperty("ngIf",t.hasProblems()),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null!=t.message),o.ɵɵadvance(16),o.ɵɵproperty("ngForOf",t.configuration.locationProblems),o.ɵɵadvance(6),o.ɵɵproperty("disabled",t.hasProblems()),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",null!=t.configuration.termProblems),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null==t.configuration.termProblems))},directives:[a.LocalizeComponent,l.NgIf,s.ɵangular_packages_forms_forms_ba,s.NgControlStatusGroup,s.NgForm,l.NgForOf,c.LocationProblemComponent],encapsulation:2}),e}();t.LocationProblemPageComponent=h,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(h,[{type:i.Component,args:[{selector:"location-problem-page",templateUrl:"./location-problem-page.component.html",styleUrls:[]}]}],(function(){return[]}),{configuration:[{type:i.Input}],stateChange:[{type:i.Output}]})},1065:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TermProblemPageComponent=void 0;var i=n(0),r=(n(1030),n(0)),o=n(88),a=n(1),l=n(18),s=n(1092);function c(e,t){1&e&&(r.ɵɵelementStart(0,"div",7),r.ɵɵelementStart(1,"div",20),r.ɵɵelement(2,"localize",21),r.ɵɵelementEnd(),r.ɵɵelementEnd())}function d(e,t){if(1&e&&(r.ɵɵelementStart(0,"div",7),r.ɵɵelementStart(1,"div",20),r.ɵɵtext(2),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext();r.ɵɵadvance(2),r.ɵɵtextInterpolate(n.message)}}function p(e,t){if(1&e&&(r.ɵɵelementStart(0,"div"),r.ɵɵelement(1,"term-problem",22),r.ɵɵelementEnd()),2&e){var n=t.$implicit,i=t.index,o=r.ɵɵnextContext();r.ɵɵadvance(1),r.ɵɵproperty("problem",n)("configuration",o.configuration)("index",i)}}var u=function(){function e(){this.stateChange=new i.EventEmitter,this.message=null}return e.prototype.ngOnInit=function(){},e.prototype.hasProblems=function(){for(var e=0;e<this.configuration.termProblems.length;e++)if(!this.configuration.termProblems[e].resolved)return!0;return!1},e.prototype.onNext=function(){null==this.configuration.exclusions&&(this.configuration.exclusions=[]);for(var e=0;e<this.configuration.termProblems.length;e++){var t=this.configuration.termProblems[e];if(t.resolved&&"IGNORE"==t.action.name){var n={code:t.attributeCode,value:t.label};this.configuration.exclusions.push(n)}}this.stateChange.emit("NEXT")},e.prototype.onCancel=function(){this.stateChange.emit("CANCEL")},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["term-problem-page"]],inputs:{configuration:"configuration"},outputs:{stateChange:"stateChange"},decls:33,vars:4,consts:[[1,"text-center"],["key","io.termProblem.title"],[1,"lead"],["key","io.termProblem.description"],[1,"col-md-12","order-md-1"],["class","row",4,"ngIf"],["form","ngForm"],[1,"row"],[1,"col-sm-4"],["key","dataUploader.categoryAttribute"],[1,"col-sm-2"],["key","dataUploader.unknownCategory"],["key","dataUploader.synonymn"],["key","dataUploader.actions"],[4,"ngFor","ngForOf"],[1,"col-sm-12","text-right"],["type","button","role","button",1,"btn",3,"click"],["key","io.cancel"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.ok"],[1,"alert","alert-danger"],["key","dataUploader.existingProblems"],[3,"problem","configuration","index"]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div"),r.ɵɵelementStart(1,"div",0),r.ɵɵelementStart(2,"h2"),r.ɵɵelement(3,"localize",1),r.ɵɵelementEnd(),r.ɵɵelementStart(4,"p",2),r.ɵɵelement(5,"localize",3),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(6,"div",4),r.ɵɵtemplate(7,c,3,0,"div",5),r.ɵɵtemplate(8,d,3,1,"div",5),r.ɵɵelementStart(9,"form",null,6),r.ɵɵelementStart(11,"div",7),r.ɵɵelementStart(12,"div",8),r.ɵɵelementStart(13,"label"),r.ɵɵelement(14,"localize",9),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(15,"div",10),r.ɵɵelementStart(16,"label"),r.ɵɵelement(17,"localize",11),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(18,"div",8),r.ɵɵelementStart(19,"label"),r.ɵɵelement(20,"localize",12),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(21,"div",10),r.ɵɵelementStart(22,"label"),r.ɵɵelement(23,"localize",13),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵtemplate(24,p,2,3,"div",14),r.ɵɵelementStart(25,"div",7),r.ɵɵelementStart(26,"div",15),r.ɵɵelementStart(27,"button",16),r.ɵɵlistener("click",(function(){return t.onCancel()})),r.ɵɵelementStart(28,"span"),r.ɵɵelement(29,"localize",17),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(30,"button",18),r.ɵɵlistener("click",(function(){return t.onNext()})),r.ɵɵelementStart(31,"span"),r.ɵɵelement(32,"localize",19),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(7),r.ɵɵproperty("ngIf",t.hasProblems()),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",null!=t.message),r.ɵɵadvance(16),r.ɵɵproperty("ngForOf",t.configuration.termProblems),r.ɵɵadvance(6),r.ɵɵproperty("disabled",t.hasProblems()))},directives:[o.LocalizeComponent,a.NgIf,l.ɵangular_packages_forms_forms_ba,l.NgControlStatusGroup,l.NgForm,a.NgForOf,s.TermProblemComponent],encapsulation:2}),e}();t.TermProblemPageComponent=u,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(u,[{type:i.Component,args:[{selector:"term-problem-page",templateUrl:"./term-problem-page.component.html",styleUrls:[]}]}],(function(){return[]}),{configuration:[{type:i.Input}],stateChange:[{type:i.Output}]})},1066:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpreadsheetModalComponent=void 0;var i=n(0),r=(n(56),n(56),n(57),n(25),n(193)),o=(n(1015),n(0)),a=n(1015),l=n(56),s=n(25),c=n(57),d=n(1),p=n(1062),u=n(1063),m=n(1064),g=n(1065);function h(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",3),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵtextInterpolate(n.message)}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"attributes-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",i.configuration)}}function y(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"location-page",5),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",i.configuration)("property",i.property)("includeChild",i.includeChild)}}function v(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"location-problem-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",i.configuration)}}function b(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"term-problem-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",i.configuration)}}function S(e,t){if(1&e&&(o.ɵɵelementStart(0,"div"),o.ɵɵtemplate(1,f,2,1,"div",2),o.ɵɵtemplate(2,y,2,3,"div",2),o.ɵɵtemplate(3,v,2,1,"div",2),o.ɵɵtemplate(4,b,2,1,"div",2),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("ngIf","MAP"===n.state),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","LOCATION"===n.state),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","LOCATION-PROBLEM"===n.state),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","TERM-PROBLEM"===n.state)}}var C=function(){function e(e,t,n,i,r){this.service=e,this.bsModalRef=t,this.modalService=n,this.localizeService=i,this.router=r,this.message=null,this.state="MAP"}return e.prototype.init=function(e,t,n){void 0===t&&(t="type"),void 0===n&&(n=!1),this.configuration=e,this.property=t,this.includeChild=n},e.prototype.onStateChange=function(e){"BACK"===e?this.handleBack():"NEXT"===e?this.handleNext():"CANCEL"===e&&this.handleCancel()},e.prototype.handleBack=function(){"LOCATION"===this.state&&(this.state="MAP")},e.prototype.handleNext=function(){"MAP"===this.state?this.configuration.postalCode?this.handleSubmit():this.state="LOCATION":"LOCATION"===this.state?this.handleSubmit():"LOCATION-PROBLEM"===this.state?null!=this.configuration.termProblems?this.state="TERM-PROBLEM":this.handleSubmit():"TERM-PROBLEM"===this.state&&this.handleSubmit()},e.prototype.handleSubmit=function(){var e=this;this.service.importSpreadsheet(this.configuration).then((function(t){null!=t.locationProblems?(e.state="LOCATION-PROBLEM",e.configuration=t):null!=t.termProblems?(e.state="TERM-PROBLEM",e.configuration=t):(e.bsModalRef.hide(),e.bsModalRef=e.modalService.show(r.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),e.bsModalRef.content.message=e.localizeService.decode("data.import.go.to.scheduled.jobs.confirm.message"),e.bsModalRef.content.submitText=e.localizeService.decode("data.import.go.to.scheduled.jobs.button"),e.bsModalRef.content.onConfirm.subscribe((function(t){e.router.navigate(["/registry/scheduled-jobs"])})))})).catch((function(t){e.error(t)}))},e.prototype.handleCancel=function(){var e=this;this.service.cancelImport(this.configuration).then((function(t){e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.error=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.IOService),o.ɵɵdirectiveInject(l.BsModalRef),o.ɵɵdirectiveInject(l.BsModalService),o.ɵɵdirectiveInject(s.LocalizationService),o.ɵɵdirectiveInject(c.Router))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["spreadsheet-modal"]],decls:3,vars:2,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[3,"configuration","configurationChange","stateChange"],[3,"configuration","property","includeChild","configurationChange","stateChange"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵtemplate(1,h,2,1,"div",1),o.ɵɵtemplate(2,S,5,4,"div",2),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null!=t.message),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null!=t.configuration&&t.configuration))},directives:[d.NgIf,p.AttributesPageComponent,u.LocationPageComponent,m.LocationProblemPageComponent,g.TermProblemPageComponent],encapsulation:2}),e}();t.SpreadsheetModalComponent=C,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(C,[{type:i.Component,args:[{selector:"spreadsheet-modal",templateUrl:"./spreadsheet-modal.component.html",styleUrls:[]}]}],(function(){return[{type:a.IOService},{type:l.BsModalRef},{type:l.BsModalService},{type:s.LocalizationService},{type:c.Router}]}),null)},1067:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubmitChangeRequestComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(193),a=(n(25),n(859)),l=(n(1015),n(1020)),s=(n(57),n(1022),n(0)),c=n(56),d=n(1015),p=n(25),u=n(57),m=n(1022),g=n(88),h=n(18),f=n(1),y=n(382),v=n(292),b=n(162),S=["attributeEditor"],C=["geometryEditor"];function E(e,t){if(1&e&&(s.ɵɵelementStart(0,"option",17),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=t.$implicit;s.ɵɵproperty("ngValue",n),s.ɵɵadvance(1),s.ɵɵtextInterpolate(n.label.localizedValue)}}var x=function(){return["/registry/location-manager"]},O=function(e,t){return{type:e,code:t,pageContext:"DATA"}};function I(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"a",18),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onNewChangeRequest()})),s.ɵɵelementStart(1,"button",19),s.ɵɵelement(2,"localize",20),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext();s.ɵɵproperty("routerLink",s.ɵɵpureFunction0(2,x))("queryParams",s.ɵɵpureFunction2(3,O,i.geoObject.attributes.type,i.geoObject.attributes.code))}}function M(e,t){1&e&&(s.ɵɵelementStart(0,"button",21),s.ɵɵelement(1,"localize",20),s.ɵɵelementEnd())}var w=function(e){return{"inline-loading":e}},T=function(){function e(e,t,n,i,o,a,l,s,c){var d=this;this.modalService=e,this.registryService=t,this.geomService=n,this.changeRequestService=i,this.localizeService=o,this.authService=a,this.router=l,this.dateService=s,this.cacheService=c,this.geoObjectTypes=[],this.geoObjectId="",this.reason="",this.dateStr=null,this.forDate=null,this.geoObject=null,this.isValid=!1,this.loading=!1,this.geoObjectAttributeExcludes=["uid","sequence","type","lastUpdateDate","createDate","status"],this.dataSource=r.Observable.create((function(e){d.registryService.getGeoObjectSuggestionsTypeAhead(d.geoObjectId,d.geoObjectType.code).then((function(t){e.next(t)}))}))}return e.prototype.ngOnInit=function(){var e=this;this.cacheService.getTypeCache().waitOnTypes().then((function(t){for(var n=[],i=0;i<t.length;++i){var r=t[i],o=r.organizationCode,a=null!=r.superTypeCode&&""!==r.superTypeCode?r.superTypeCode:r.code;e.authService.isGeoObjectTypeRC(o,a)&&n.push(t[i])}e.geoObjectTypes=n,e.geoObjectTypes.sort((function(e,t){return e.label.localizedValue.toLowerCase()<t.label.localizedValue.toLowerCase()?-1:e.label.localizedValue.toLowerCase()>t.label.localizedValue.toLowerCase()?1:0}));var l=e.getGeoObjectTypePosition("ROOT");l&&e.geoObjectTypes.splice(l,1)})).catch((function(t){e.error(t)}))},e.prototype.handleDateChange=function(){null!=this.dateStr?this.forDate=new Date(Date.parse(this.dateStr)):this.forDate=null},e.prototype.onValidChange=function(e){null!=this.geoObject&&(null==this.geometryEditor||this.geometryEditor.getIsValid())&&(null==this.attributeEditor||this.attributeEditor.getIsValid())?this.isValid=!0:this.isValid=!1},e.prototype.getGeoObjectTypePosition=function(e){for(var t=0;t<this.geoObjectTypes.length;t++){if(this.geoObjectTypes[t].code===e)return t}return null},e.prototype.changeTypeaheadLoading=function(e){this.loading=e},e.prototype.typeaheadOnSelect=function(e){var t=this;this.registryService.getGeoObjectOverTime(e.item.code,this.geoObjectType.code).then((function(e){t.geoObject=e})).catch((function(e){t.error(e)}))},e.prototype.onNewChangeRequest=function(){var e=new l.GeoObjectLayerDataSource(this.registryService,this.geoObject.attributes.code,this.geoObject.attributes.type,this.dateStr),t=this.geoObject.attributes.displayLabel.values&&this.geoObject.attributes.displayLabel.values.length>0?this.geoObject.attributes.displayLabel.values[0].value.localizedValue:this.geoObject.attributes.code,n=this.geoObjectType.label.localizedValue,i=t+" "+(null==this.dateStr?"":" "+this.dateService.formatDateForDisplay(this.dateStr))+"("+n+")",r=e.createLayer(i,!0,a().hexString());this.geomService.zoomOnReady(r.getId());var o=this.geomService.getDataSourceFactory().serializeLayers([r]),s={layers:JSON.stringify(o),attrPanelOpen:!0,objectType:"GEOOBJECT"};s.type=this.geoObjectType.code,s.code=this.geoObject.attributes.code,s.date=this.dateStr,this.router.navigate(["/registry/location-manager"],{queryParams:s})},e.prototype.cancel=function(){this.isValid=!1,this.geoObject=null,this.geoObjectId=null,this.geoObjectType=null,this.reason=null},e.prototype.error=function(e){this.bsModalRef=o.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.BsModalService),s.ɵɵdirectiveInject(d.RegistryService),s.ɵɵdirectiveInject(d.GeometryService),s.ɵɵdirectiveInject(d.ChangeRequestService),s.ɵɵdirectiveInject(p.LocalizationService),s.ɵɵdirectiveInject(p.AuthService),s.ɵɵdirectiveInject(u.Router),s.ɵɵdirectiveInject(p.DateService),s.ɵɵdirectiveInject(m.RegistryCacheService))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["submit-change-request"]],viewQuery:function(e,t){if(1&e&&(s.ɵɵviewQuery(S,1),s.ɵɵviewQuery(C,1)),2&e){var n=void 0;s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.attributeEditor=n.first),s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.geometryEditor=n.first)}},decls:22,vars:22,consts:[[1,"row"],[1,"col-md-12"],[2,"margin-top","50px","margin-bottom","50px","background","#f7f7f7","width","100%","padding","10px"],[2,"margin-bottom","20px"],["key","change.request.search.for.geoobject.header"],[1,"col-md-3"],["key","dropdown.select.geoobjecttype.option.label"],["id","geoObjectTypeSelect","name","geoObjectTypeSelect","required","",1,"select-area",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["key","changeOverTime.forDate"],["label","","customStyles","width:100%",3,"value","inputName","disable","allowInfinity","allowFutureDates","required","placement","valueChange","change"],[1,"col-md-4"],["key","change.request.search.for.geoobject.search.label"],["type","text","name","geoObjectId","typeaheadOptionField","name","autocomplete","off",1,"form-control",3,"ngClass","ngModel","disabled","typeaheadAsync","typeahead","typeaheadOptionsLimit","placeholder","ngModelChange","typeaheadOnSelect","typeaheadLoading"],[1,"col-md-2"],[3,"routerLink","queryParams","click",4,"ngIf"],["disabled","true","class","btn btn-primary","style","width:100%;",4,"ngIf"],[3,"ngValue"],[3,"routerLink","queryParams","click"],[1,"btn","btn-primary",2,"width","100%"],["key","change.request.open.geoobject.in.editor.link.btn"],["disabled","true",1,"btn","btn-primary",2,"width","100%"]],template:function(e,t){1&e&&(s.ɵɵelementStart(0,"div",0),s.ɵɵelementStart(1,"div",1),s.ɵɵelementStart(2,"div",2),s.ɵɵelementStart(3,"h3",3),s.ɵɵelement(4,"localize",4),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"div",0),s.ɵɵelementStart(6,"div",5),s.ɵɵelement(7,"localize",6),s.ɵɵelementStart(8,"select",7),s.ɵɵlistener("ngModelChange",(function(e){return t.geoObjectType=e})),s.ɵɵelement(9,"option"),s.ɵɵtemplate(10,E,2,2,"option",8),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(11,"div",5),s.ɵɵelement(12,"localize",9),s.ɵɵelementStart(13,"date-field",10),s.ɵɵlistener("valueChange",(function(e){return t.dateStr=e}))("change",(function(){return t.handleDateChange()})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(14,"div",11),s.ɵɵelement(15,"localize",12),s.ɵɵelementStart(16,"input",13),s.ɵɵlistener("ngModelChange",(function(e){return t.geoObjectId=e}))("typeaheadOnSelect",(function(e){return t.typeaheadOnSelect(e)}))("typeaheadLoading",(function(e){return t.changeTypeaheadLoading(e)})),s.ɵɵpipe(17,"localize"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(18,"div",14),s.ɵɵelement(19,"label"),s.ɵɵtemplate(20,I,3,6,"a",15),s.ɵɵtemplate(21,M,2,0,"button",16),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(8),s.ɵɵproperty("ngModel",t.geoObjectType),s.ɵɵadvance(2),s.ɵɵproperty("ngForOf",t.geoObjectTypes),s.ɵɵadvance(3),s.ɵɵproperty("value",t.dateStr)("inputName","dateStr")("disable",!t.geoObjectType)("allowInfinity",!1)("allowFutureDates",!1)("required",!1)("placement","right"),s.ɵɵadvance(3),s.ɵɵproperty("ngClass",s.ɵɵpureFunction1(20,w,t.loading))("ngModel",t.geoObjectId)("disabled",!t.geoObjectType)("typeaheadAsync",!0)("typeahead",t.dataSource)("typeaheadOptionsLimit",7)("placeholder",s.ɵɵpipeBind1(17,18,"masterlist.search")+"..."),s.ɵɵadvance(4),s.ɵɵproperty("ngIf",t.geoObject),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!t.geoObject))},directives:[g.LocalizeComponent,h.SelectControlValueAccessor,h.RequiredValidator,h.NgControlStatus,h.NgModel,h.NgSelectOption,h.ɵangular_packages_forms_forms_z,f.NgForOf,y.DateFieldComponent,h.DefaultValueAccessor,f.NgClass,v.TypeaheadDirective,f.NgIf,u.RouterLinkWithHref],pipes:[b.LocalizePipe],styles:["input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%] {\n    height: 40px;\n    \n    padding: 6px 10px;\n    font-size: 14px;\n    line-height: 18px;\n    color: #333;\n    border: 1px solid;\n    border-color: #767676;\n    border-color: var(--theme-input-text-border);\n    border-radius: 5px;\n    background: white;\n    background-color: white;\n    outline: none;\n    box-shadow: none;\n}"]}),e}();t.SubmitChangeRequestComponent=T,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(T,[{type:i.Component,args:[{selector:"submit-change-request",templateUrl:"./submit-change-request.component.html",styleUrls:["./submit-change-request.css"]}]}],(function(){return[{type:c.BsModalService},{type:d.RegistryService},{type:d.GeometryService},{type:d.ChangeRequestService},{type:p.LocalizationService},{type:p.AuthService},{type:u.Router},{type:p.DateService},{type:m.RegistryCacheService}]}),{attributeEditor:[{type:i.ViewChild,args:["attributeEditor"]}],geometryEditor:[{type:i.ViewChild,args:["geometryEditor"]}]})},1068:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepIndicatorComponent=void 0;var i=n(0),r=(n(378),n(0)),o=n(1),a=function(e,t,n){return{complete:e,stuck:t,working:n}};function l(e,t){if(1&e&&(r.ɵɵelementStart(0,"li",4),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("ngClass",r.ɵɵpureFunction3(2,a,"COMPLETE"===n.status,"STUCK"===n.status,"WORKING"===n.status)),r.ɵɵadvance(1),r.ɵɵtextInterpolate1(" ",n.label," ")}}function s(e,t){if(1&e&&(r.ɵɵelementStart(0,"ul",2),r.ɵɵtemplate(1,l,2,6,"li",3),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext();r.ɵɵadvance(1),r.ɵɵproperty("ngForOf",n._stepConfig.steps)}}var c=function(){function e(){this._stepConfig={steps:[]}}return Object.defineProperty(e.prototype,"steps",{set:function(e){this._stepConfig=e},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["step-indicator"]],inputs:{steps:"steps"},decls:2,vars:1,consts:[[1,"step-indicator"],["class","nav nav-justified",4,"ngIf"],[1,"nav","nav-justified"],["class","nav-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"nav-item",3,"ngClass"]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div",0),r.ɵɵtemplate(1,s,2,1,"ul",1),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(1),r.ɵɵproperty("ngIf",t._stepConfig&&t._stepConfig.steps&&t._stepConfig.steps.length>0))},directives:[o.NgIf,o.NgForOf,o.NgClass],styles:[".step-indicator[_ngcontent-%COMP%] {\n    margin-top: 5px;\n}\n\n.step-indicator[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] {\n    \n    background-color: white;\n    text-align: center;\n    vertical-align: middle;\n    \n    \n    \n    border-collapse: separate; \n    border-spacing: 0;\n    color: black;\n}\n.step-indicator[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:first-child):not(:last-child) {\n    border-left: solid 2px white;\n}\n.step-indicator[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]:first-child {\n    -moz-border-radius-topleft: 10px;\n    -moz-border-radius-bottomleft: 10px;\n\n    -webkit-border-top-left-radius: 10px;\n    -webkit-border-bottom-left-radius: 10px;\n    border-top-left-radius: 10px;\n    border-bottom-left-radius: 10px;\n}\n.step-indicator[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]:last-child {\n    -moz-border-radius-topright: 10px;\n    -moz-border-radius-bottomright: 10px;\n\n    -webkit-border-top-right-radius: 10px;\n    -webkit-border-bottom-right-radius: 10px;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n}\n.step-indicator[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] {\n    font-weight: bold;\n}\n.step-indicator[_ngcontent-%COMP%]   .nav-item.complete[_ngcontent-%COMP%]{\n    background-color: #B7A2D5;\n}\n.step-indicator[_ngcontent-%COMP%]   .nav-item.stuck[_ngcontent-%COMP%]{\n    background-color: #f05d5d;\n}\n.step-indicator[_ngcontent-%COMP%]   .nav-item.working[_ngcontent-%COMP%]{\n    background-color: #ffbc58;\n}"]}),e}();t.StepIndicatorComponent=c,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(c,[{type:i.Component,args:[{selector:"step-indicator",templateUrl:"./step-indicator.component.html",styleUrls:["./step-indicator.css"]}]}],(function(){return[]}),{steps:[{type:i.Input,args:["steps"]}]})},1069:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessObjectService=void 0;var i=n(0),r=n(58),o=n(52),a=(n(25),n(0)),l=n(58),s=n(25),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.get=function(e,t){var n=this,i=new r.HttpParams;return i=(i=i.append("businessTypeCode",e)).append("code",t),this.eventService.start(),this.http.get(registry.contextPath+"/business-object/get",{params:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getTypeAndObject=function(e,t){var n=this,i=new r.HttpParams;return i=(i=i.append("businessTypeCode",e)).append("code",t),this.eventService.start(),this.http.get(registry.contextPath+"/business-object/get-type-and-object",{params:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(s.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.BusinessObjectService=c,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(c,[{type:i.Injectable}],(function(){return[{type:l.HttpClient},{type:s.EventService}]}),null)},1070:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListTypePublishModalComponent=void 0;var i=n(0),r=(n(56),n(858)),o=(n(1015),n(194),n(193)),a=(n(25),n(1016),n(378)),l=n(384),s=(n(1022),n(0)),c=n(1016),d=n(1015),p=n(25),u=n(1022),m=n(56),g=n(194),h=n(1),f=n(88),y=n(18),v=n(545),b=n(546),S=n(382),C=n(379),E=n(1040),x=n(162);function O(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelementStart(2,"label"),s.ɵɵelement(3,"localize",16),s.ɵɵelementStart(4,"span",17),s.ɵɵtext(5," ("),s.ɵɵelement(6,"convert-key-label",18),s.ɵɵtext(7,")"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(8,"div",7),s.ɵɵelementStart(9,"input",19),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit,i=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("key",n.locale),s.ɵɵadvance(3),s.ɵɵproperty("ngModel",n.value)("name","metadata-displayLabel-"+n.locale)("disabled",i.readonly)("required",!1)}}function I(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelementStart(2,"label"),s.ɵɵelement(3,"localize",20),s.ɵɵelementStart(4,"span",17),s.ɵɵtext(5," ("),s.ɵɵelement(6,"convert-key-label",18),s.ɵɵtext(7,")"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(8,"div",7),s.ɵɵelementStart(9,"textarea",21),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit,i=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("key",n.locale),s.ɵɵadvance(3),s.ɵɵproperty("ngModel",n.value)("disabled",i.readonly)("required",!1)}}function M(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelementStart(2,"label"),s.ɵɵelement(3,"localize",22),s.ɵɵelementStart(4,"span",17),s.ɵɵtext(5," ("),s.ɵɵelement(6,"convert-key-label",18),s.ɵɵtext(7,")"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(8,"div",7),s.ɵɵelementStart(9,"textarea",23),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit,i=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("key",n.locale),s.ɵɵadvance(3),s.ɵɵproperty("ngModel",n.value)("disabled",i.readonly)("required",!1)}}function w(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelementStart(2,"label"),s.ɵɵelement(3,"localize",24),s.ɵɵelementStart(4,"span",17),s.ɵɵtext(5," ("),s.ɵɵelement(6,"convert-key-label",18),s.ɵɵtext(7,")"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(8,"div",7),s.ɵɵelementStart(9,"input",19),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit,i=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("key",n.locale),s.ɵɵadvance(3),s.ɵɵproperty("ngModel",n.value)("name","progress-"+n.locale)("disabled",i.readonly)("required",!1)}}function T(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelementStart(2,"label"),s.ɵɵelement(3,"localize",25),s.ɵɵelementStart(4,"span",17),s.ɵɵtext(5," ("),s.ɵɵelement(6,"convert-key-label",18),s.ɵɵtext(7,")"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(8,"div",7),s.ɵɵelementStart(9,"input",19),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit,i=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("key",n.locale),s.ɵɵadvance(3),s.ɵɵproperty("ngModel",n.value)("name","accessConstraints-"+n.locale)("disabled",i.readonly)("required",!1)}}function k(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelementStart(2,"label"),s.ɵɵelement(3,"localize",26),s.ɵɵelementStart(4,"span",17),s.ɵɵtext(5," ("),s.ɵɵelement(6,"convert-key-label",18),s.ɵɵtext(7,")"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(8,"div",7),s.ɵɵelementStart(9,"input",19),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit,i=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("key",n.locale),s.ɵɵadvance(3),s.ɵɵproperty("ngModel",n.value)("name","useConstraints-"+n.locale)("disabled",i.readonly)("required",!1)}}function P(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelementStart(2,"label"),s.ɵɵelement(3,"localize",27),s.ɵɵelementStart(4,"span",17),s.ɵɵtext(5," ("),s.ɵɵelement(6,"convert-key-label",18),s.ɵɵtext(7,")"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(8,"div",7),s.ɵɵelementStart(9,"textarea",28),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit,i=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("key",n.locale),s.ɵɵadvance(3),s.ɵɵproperty("ngModel",n.value)("disabled",i.readonly)("required",!1)}}function j(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelementStart(2,"label"),s.ɵɵelement(3,"localize",29),s.ɵɵelementStart(4,"span",17),s.ɵɵtext(5," ("),s.ɵɵelement(6,"convert-key-label",18),s.ɵɵtext(7,")"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(8,"div",7),s.ɵɵelementStart(9,"textarea",30),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit,i=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("key",n.locale),s.ɵɵadvance(3),s.ɵɵproperty("ngModel",n.value)("disabled",i.readonly)("required",!1)}}function z(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementContainerStart(0),s.ɵɵelementStart(1,"div",4),s.ɵɵelementStart(2,"div",5),s.ɵɵelementStart(3,"label"),s.ɵɵelement(4,"localize",31),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"div",7),s.ɵɵelementStart(6,"input",32),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().metadata.topicCategories=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(7,"div",4),s.ɵɵelementStart(8,"div",5),s.ɵɵelementStart(9,"label"),s.ɵɵelement(10,"localize",33),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(11,"div",7),s.ɵɵelementStart(12,"input",34),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().metadata.placeKeywords=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(13,"div",4),s.ɵɵelementStart(14,"div",5),s.ɵɵelementStart(15,"label"),s.ɵɵelement(16,"localize",35),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(17,"div",7),s.ɵɵelementStart(18,"input",36),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().metadata.updateFrequency=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(19,"div",4),s.ɵɵelementStart(20,"div",5),s.ɵɵelementStart(21,"label"),s.ɵɵelement(22,"localize",37),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(23,"div",7),s.ɵɵelementStart(24,"input",38),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().metadata.lineage=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(25,"div",4),s.ɵɵelementStart(26,"div",5),s.ɵɵelementStart(27,"label"),s.ɵɵelement(28,"localize",39),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(29,"div",7),s.ɵɵelementStart(30,"input",40),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().metadata.languages=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(31,"div",4),s.ɵɵelementStart(32,"div",5),s.ɵɵelementStart(33,"label"),s.ɵɵelement(34,"localize",41),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(35,"div",7),s.ɵɵelementStart(36,"input",42),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().metadata.scaleResolution=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(37,"div",4),s.ɵɵelementStart(38,"div",5),s.ɵɵelementStart(39,"label"),s.ɵɵelement(40,"localize",43),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(41,"div",7),s.ɵɵelementStart(42,"select",44),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().metadata.spatialRepresentation=e})),s.ɵɵelementStart(43,"option",45),s.ɵɵelement(44,"localize",46),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(45,"div",4),s.ɵɵelementStart(46,"div",5),s.ɵɵelementStart(47,"label"),s.ɵɵelement(48,"localize",47),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(49,"div",7),s.ɵɵelementStart(50,"select",48),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().metadata.referenceSystem=e})),s.ɵɵelementStart(51,"option",49),s.ɵɵelement(52,"localize",50),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(53,"div",4),s.ɵɵelementStart(54,"div",5),s.ɵɵelementStart(55,"label"),s.ɵɵelement(56,"localize",51),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(57,"div",7),s.ɵɵelementStart(58,"input",52),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().metadata.reportSpecification=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(59,"div",4),s.ɵɵelementStart(60,"div",5),s.ɵɵelementStart(61,"label"),s.ɵɵelement(62,"localize",53),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(63,"div",7),s.ɵɵelementStart(64,"select",54),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().metadata.distributionFormat=e})),s.ɵɵelement(65,"option"),s.ɵɵelementStart(66,"option",55),s.ɵɵelement(67,"localize",56),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()}if(2&e){var i=s.ɵɵnextContext().metadata,r=s.ɵɵnextContext();s.ɵɵadvance(6),s.ɵɵproperty("ngModel",i.topicCategories)("disabled",r.readonly),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",i.placeKeywords)("disabled",r.readonly),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",i.updateFrequency)("disabled",r.readonly),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",i.lineage)("disabled",r.readonly),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",i.languages)("disabled",r.readonly),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",i.scaleResolution)("disabled",r.readonly),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",i.spatialRepresentation)("disabled",!0),s.ɵɵadvance(8),s.ɵɵproperty("ngModel",i.referenceSystem)("disabled",!0),s.ɵɵadvance(8),s.ɵɵproperty("ngModel",i.reportSpecification)("disabled",r.readonly),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",i.distributionFormat)("disabled",!0)}}function D(e,t){if(1&e&&(s.ɵɵtemplate(0,O,10,5,"div",3),s.ɵɵelementStart(1,"div",4),s.ɵɵelementStart(2,"div",5),s.ɵɵelementStart(3,"label"),s.ɵɵelement(4,"localize",6),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"div",7),s.ɵɵelementStart(6,"input",8),s.ɵɵlistener("ngModelChange",(function(e){return t.metadata.originator=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(7,I,10,4,"div",3),s.ɵɵtemplate(8,M,10,4,"div",3),s.ɵɵtemplate(9,w,10,5,"div",3),s.ɵɵtemplate(10,T,10,5,"div",3),s.ɵɵtemplate(11,k,10,5,"div",3),s.ɵɵtemplate(12,P,10,4,"div",3),s.ɵɵtemplate(13,j,10,4,"div",3),s.ɵɵtemplate(14,z,68,20,"ng-container",2),s.ɵɵelementStart(15,"div",4),s.ɵɵelement(16,"div",5),s.ɵɵelementStart(17,"div",7),s.ɵɵelement(18,"localize",9),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(19,"div",4),s.ɵɵelementStart(20,"div",5),s.ɵɵelementStart(21,"label"),s.ɵɵelement(22,"localize",10),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(23,"div",7),s.ɵɵelementStart(24,"input",11),s.ɵɵlistener("ngModelChange",(function(e){return t.metadata.contactName=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(25,"div",4),s.ɵɵelementStart(26,"div",5),s.ɵɵelementStart(27,"label"),s.ɵɵelement(28,"localize",12),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(29,"div",7),s.ɵɵelementStart(30,"input",13),s.ɵɵlistener("ngModelChange",(function(e){return t.metadata.telephoneNumber=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(31,"div",4),s.ɵɵelementStart(32,"div",5),s.ɵɵelementStart(33,"label"),s.ɵɵelement(34,"localize",14),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(35,"div",7),s.ɵɵelementStart(36,"input",15),s.ɵɵlistener("ngModelChange",(function(e){return t.metadata.email=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.metadata,i=t.type,r=s.ɵɵnextContext();s.ɵɵproperty("ngForOf",n.label.localeValues),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",n.originator)("disabled",r.readonly),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",n.description.localeValues),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",n.process.localeValues),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",n.progress.localeValues),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",n.accessConstraints.localeValues),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",n.useConstraints.localeValues),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",n.acknowledgements.localeValues),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",n.disclaimer.localeValues),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","geospatial"===i),s.ɵɵadvance(10),s.ɵɵproperty("ngModel",n.contactName)("disabled",r.readonly),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",n.telephoneNumber)("disabled",r.readonly),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",n.email)("disabled",r.readonly)}}function R(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",83),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2);s.ɵɵadvance(1),s.ɵɵtextInterpolate(n.message)}}function L(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelementStart(2,"label"),s.ɵɵelement(3,"localize",16),s.ɵɵelementStart(4,"span",17),s.ɵɵtext(5," ("),s.ɵɵelement(6,"convert-key-label",18),s.ɵɵtext(7,")"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(8,"div",7),s.ɵɵelementStart(9,"input",19),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit,i=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("key",n.locale),s.ɵɵadvance(3),s.ɵɵproperty("ngModel",n.value)("name","label-"+n.locale)("disabled",i.readonly)("required","defaultLocale"===n.locale)}}function _(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelementStart(2,"label"),s.ɵɵelement(3,"localize",20),s.ɵɵelementStart(4,"span",17),s.ɵɵtext(5,"  ("),s.ɵɵelement(6,"convert-key-label",18),s.ɵɵtext(7,") "),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(8,"div",7),s.ɵɵelementStart(9,"input",19),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit,i=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("key",n.locale),s.ɵɵadvance(3),s.ɵɵproperty("ngModel",n.value)("name","description-"+n.locale)("disabled",i.readonly)("required","defaultLocale"===n.locale)}}function A(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelementStart(2,"label",72),s.ɵɵelement(3,"localize",84),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(4,"div",7),s.ɵɵelementStart(5,"boolean-field",85),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).list.includeLatLong=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2);s.ɵɵadvance(5),s.ɵɵproperty("value",i.list.includeLatLong)("disable",!1)}}function N(e,t){1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵelement(1,"div",5),s.ɵɵelementStart(2,"div",7),s.ɵɵelement(3,"localize",86),s.ɵɵelementEnd(),s.ɵɵelementEnd())}var V=function(e,t){return{"chk-checked":e,disabled:t}};function F(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",88),s.ɵɵelementStart(1,"div",89),s.ɵɵelementStart(2,"div",90),s.ɵɵlistener("click",(function(e){s.ɵɵrestoreView(n);var i=t.$implicit;return s.ɵɵnextContext(4).getIsDisabled(e)?null:i.selected=!i.selected})),s.ɵɵelement(3,"span"),s.ɵɵelementEnd(),s.ɵɵelementStart(4,"label",91),s.ɵɵtext(5),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=s.ɵɵnextContext(4);s.ɵɵadvance(2),s.ɵɵproperty("ngClass",s.ɵɵpureFunction2(2,V,i.selected,r.readonly)),s.ɵɵadvance(3),s.ɵɵtextInterpolate(i.label)}}function H(e,t){if(1&e&&(s.ɵɵelementContainerStart(0),s.ɵɵelementStart(1,"div",4),s.ɵɵelementStart(2,"div",5),s.ɵɵelementStart(3,"label"),s.ɵɵtext(4),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"div",7),s.ɵɵtemplate(6,F,6,5,"div",87),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()),2&e){var n=s.ɵɵnextContext().$implicit;s.ɵɵadvance(4),s.ɵɵtextInterpolate1(" ",n.label," "),s.ɵɵadvance(2),s.ɵɵproperty("ngForOf",n.parents)}}function G(e,t){if(1&e&&(s.ɵɵelementStart(0,"div"),s.ɵɵtemplate(1,H,7,2,"ng-container",2),s.ɵɵelementEnd()),2&e){var n=t.$implicit;s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.parents.length>0)}}function B(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",88),s.ɵɵelementStart(1,"div",89),s.ɵɵelementStart(2,"div",90),s.ɵɵlistener("click",(function(e){s.ɵɵrestoreView(n);var i=t.$implicit;return s.ɵɵnextContext(3).getIsDisabled(e)?null:i.selected=!i.selected})),s.ɵɵelement(3,"span"),s.ɵɵelementEnd(),s.ɵɵelementStart(4,"label",91),s.ɵɵtext(5),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(2),s.ɵɵproperty("ngClass",s.ɵɵpureFunction2(2,V,i.selected,r.readonly)),s.ɵɵadvance(3),s.ɵɵtextInterpolate(i.label)}}function q(e,t){if(1&e&&(s.ɵɵelementStart(0,"div"),s.ɵɵelementStart(1,"div",4),s.ɵɵelementStart(2,"div",5),s.ɵɵelementStart(3,"label"),s.ɵɵelement(4,"localize",92),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"div",7),s.ɵɵtemplate(6,B,6,5,"div",87),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("ngForOf",n.list.subtypeHierarchies)}}var U=function(){return["form-control"]};function $(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelementStart(2,"label",93),s.ɵɵelement(3,"localize",94),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(4,"div",7),s.ɵɵelementStart(5,"date-field",95),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).list.validOn=e}))("valueChange",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).handleDateChange()})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2);s.ɵɵadvance(5),s.ɵɵproperty("value",i.list.validOn)("classNames",s.ɵɵpureFunction0(6,U))("inputName","validOn")("allowFutureDates",!1)("required",!0)("disable",i.readonly||!i.isNew)}}function J(e,t){1&e&&(s.ɵɵelementStart(0,"div",111),s.ɵɵelementStart(1,"p",112),s.ɵɵelement(2,"localize",113),s.ɵɵelementEnd(),s.ɵɵelementEnd())}function W(e,t){if(1&e&&(s.ɵɵelementStart(0,"span",114),s.ɵɵelement(1,"date-text",115),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵproperty("date",n.list.publishingStartDate)}}function Y(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"date-field",116),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(3).list.publishingStartDate=e}))("valueChange",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(3).handleDateChange()})),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(3);s.ɵɵproperty("value",i.list.publishingStartDate)("classNames",s.ɵɵpureFunction0(6,U))("inputName","publishingStartDate")("allowFutureDates",!1)("required",!0)("disable",i.readonly||!i.isNew)}}function K(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementContainerStart(0),s.ɵɵelementStart(1,"div",4),s.ɵɵelementStart(2,"div",5),s.ɵɵelementStart(3,"label"),s.ɵɵelement(4,"localize",96),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"div",7),s.ɵɵelementStart(6,"select",97,98),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).list.frequency=e})),s.ɵɵelement(8,"option"),s.ɵɵelementStart(9,"option",99),s.ɵɵelement(10,"localize",100),s.ɵɵelementEnd(),s.ɵɵelementStart(11,"option",101),s.ɵɵelement(12,"localize",102),s.ɵɵelementEnd(),s.ɵɵelementStart(13,"option",103),s.ɵɵelement(14,"localize",104),s.ɵɵelementEnd(),s.ɵɵelementStart(15,"option",105),s.ɵɵelement(16,"localize",106),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(17,J,3,0,"div",107),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(18,"div",4),s.ɵɵelementStart(19,"div",5),s.ɵɵelementStart(20,"label"),s.ɵɵelement(21,"localize",108),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(22,"div",7),s.ɵɵtemplate(23,W,2,1,"span",109),s.ɵɵtemplate(24,Y,1,7,"date-field",110),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()}if(2&e){var i=s.ɵɵreference(7),r=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("ngModel",r.list.frequency)("disabled",r.readonly||!r.isNew),s.ɵɵadvance(11),s.ɵɵproperty("ngIf",!r.list.frequency&&i.dirty),s.ɵɵadvance(6),s.ɵɵproperty("ngIf",r.readonly),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!r.readonly)}}function Q(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"i",126),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=s.ɵɵnextContext().index;return s.ɵɵnextContext(3).removeInterval(e)})),s.ɵɵpipe(1,"localize"),s.ɵɵelementEnd()}2&e&&s.ɵɵproperty("title",s.ɵɵpipeBind1(1,1,"button.delete.helptext"))}function X(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div"),s.ɵɵelementStart(1,"div",88),s.ɵɵelementStart(2,"div",119),s.ɵɵelementStart(3,"label"),s.ɵɵelement(4,"localize",120),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"div",119),s.ɵɵelementStart(6,"label"),s.ɵɵelement(7,"localize",121),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(8,"div",122),s.ɵɵelementEnd(),s.ɵɵelementStart(9,"div",88),s.ɵɵelementStart(10,"div",119),s.ɵɵelementStart(11,"date-field",123),s.ɵɵlistener("valueChange",(function(e){return t.$implicit.startDate=e}))("valueChange",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(3).handleDateChange()})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(12,"div",119),s.ɵɵelementStart(13,"date-field",124),s.ɵɵlistener("valueChange",(function(e){return t.$implicit.endDate=e}))("valueChange",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(3).handleDateChange()})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(14,"div",122),s.ɵɵtemplate(15,Q,2,3,"i",125),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(11),s.ɵɵproperty("value",i.startDate)("classNames",s.ɵɵpureFunction0(13,U))("inputName","startDate-"+i.oid)("allowFutureDates",!1)("required",!0)("disable",r.readonly||!r.isNew&&null!=i.readonly),s.ɵɵadvance(2),s.ɵɵproperty("value",i.endDate)("classNames",s.ɵɵpureFunction0(14,U))("inputName","endDate-"+i.oid)("allowInfinity",!0)("required",!0)("disable",r.readonly||!r.isNew&&"BOTH"==i.readonly),s.ɵɵadvance(2),s.ɵɵproperty("ngIf",r.isNew||null==i.readonly)}}function Z(e,t){1&e&&(s.ɵɵelementStart(0,"div",132),s.ɵɵelement(1,"localize",133),s.ɵɵelementEnd())}function ee(e,t){1&e&&(s.ɵɵelementStart(0,"div",134),s.ɵɵelement(1,"localize",135),s.ɵɵelementEnd())}function te(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",88),s.ɵɵelementStart(1,"div",127),s.ɵɵelementStart(2,"button",128),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(3).onNewInterval()})),s.ɵɵelement(3,"localize",129),s.ɵɵelementEnd(),s.ɵɵtemplate(4,Z,2,0,"div",130),s.ɵɵtemplate(5,ee,2,0,"div",131),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(3);s.ɵɵadvance(4),s.ɵɵproperty("ngIf",!i.valid),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.gap)}}function ne(e,t){if(1&e&&(s.ɵɵelementContainerStart(0),s.ɵɵelementStart(1,"div",4),s.ɵɵelementStart(2,"div",5),s.ɵɵelementStart(3,"label"),s.ɵɵelement(4,"localize",117),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"div",7),s.ɵɵtemplate(6,X,16,15,"div",78),s.ɵɵtemplate(7,te,6,2,"div",118),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()),2&e){var n=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("ngForOf",n.list.intervalJson),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!n.readonly)}}function ie(e,t){if(1&e&&(s.ɵɵelementStart(0,"option",140),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext().$implicit;s.ɵɵproperty("value",n.code),s.ɵɵadvance(1),s.ɵɵtextInterpolate1(" ",n.label.localizedValue," ")}}function re(e,t){if(1&e&&(s.ɵɵelementContainerStart(0),s.ɵɵtemplate(1,ie,2,2,"option",139),s.ɵɵelementContainerEnd()),2&e){var n=t.$implicit;s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.isChangeOverTime&&"local"!==n.type)}}function oe(e,t){1&e&&(s.ɵɵelementStart(0,"option",148),s.ɵɵelement(1,"localize",149),s.ɵɵelementEnd())}function ae(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementContainerStart(0),s.ɵɵelementStart(1,"classification-field",150),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()}if(2&e){var i=s.ɵɵnextContext().ngIf,r=s.ɵɵnextContext().$implicit,o=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵproperty("classificationType",i.classificationType)("name","filter-value"+r.id)("value",r.value)("disabled",!o.isNew)}}function le(e,t){if(1&e&&(s.ɵɵelementStart(0,"option",140),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=t.$implicit;s.ɵɵproperty("value",n.code),s.ɵɵadvance(1),s.ɵɵtextInterpolate1("",n.label.localizedValue," ")}}function se(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementContainerStart(0),s.ɵɵelementStart(1,"select",151),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).$implicit.value=e})),s.ɵɵelement(2,"option",152),s.ɵɵtemplate(3,le,2,2,"option",153),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()}if(2&e){var i=s.ɵɵnextContext().ngIf,r=s.ɵɵnextContext().$implicit,o=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵproperty("name","filter-value"+r.id)("ngModel",r.value)("disabled",!o.isNew),s.ɵɵadvance(2),s.ɵɵproperty("ngForOf",o.getGeoObjectTypeTermAttributeOptions(i.code))}}function ce(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementContainerStart(0),s.ɵɵelementStart(1,"boolean-field",154),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()}if(2&e){var i=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵproperty("disable",!r.isNew)("value",i.value)}}function de(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementContainerStart(0),s.ɵɵelementStart(1,"date-field",155),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()}if(2&e){var i=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵproperty("value",i.value)("classNames",s.ɵɵpureFunction0(4,U))("inputName","filter-value"+i.id)("disable",!r.isNew)}}function pe(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementContainerStart(0),s.ɵɵelementStart(1,"input",156),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()}if(2&e){var i=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵproperty("ngModel",i.value)("name","filter-value"+i.id)("disabled",!r.isNew)("required",!1)}}function ue(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementContainerStart(0),s.ɵɵelementStart(1,"input",19),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()}if(2&e){var i=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵproperty("ngModel",i.value)("name","filter-value"+i.id)("disabled",!r.isNew)("required",!1)}}function me(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementContainerStart(0),s.ɵɵelementStart(1,"div",137),s.ɵɵelementStart(2,"select",138),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().$implicit.operation=e})),s.ɵɵelementStart(3,"option",141),s.ɵɵelement(4,"localize",142),s.ɵɵelementEnd(),s.ɵɵtemplate(5,oe,2,0,"option",143),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(6,"div",144),s.ɵɵelementContainerStart(7,145),s.ɵɵtemplate(8,ae,2,4,"ng-container",146),s.ɵɵtemplate(9,se,4,4,"ng-container",146),s.ɵɵtemplate(10,ce,2,2,"ng-container",146),s.ɵɵtemplate(11,de,2,5,"ng-container",146),s.ɵɵtemplate(12,pe,2,4,"ng-container",146),s.ɵɵtemplate(13,ue,2,4,"ng-container",147),s.ɵɵelementContainerEnd(),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()}if(2&e){var i=t.ngIf,r=s.ɵɵnextContext().$implicit,o=s.ɵɵnextContext(3);s.ɵɵadvance(2),s.ɵɵproperty("name","filter-operation"+r.id)("ngModel",r.operation)("disabled",o.readonly||!o.isNew),s.ɵɵadvance(3),s.ɵɵproperty("ngIf","classification"===i.type),s.ɵɵadvance(2),s.ɵɵproperty("ngSwitch",i.type),s.ɵɵadvance(1),s.ɵɵproperty("ngSwitchCase","classification"),s.ɵɵadvance(1),s.ɵɵproperty("ngSwitchCase","term"),s.ɵɵadvance(1),s.ɵɵproperty("ngSwitchCase","boolean"),s.ɵɵadvance(1),s.ɵɵproperty("ngSwitchCase","date"),s.ɵɵadvance(1),s.ɵɵproperty("ngSwitchCase","float")}}function ge(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"i",126),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=s.ɵɵnextContext(4);return e.removeFilter(e.i)})),s.ɵɵpipe(1,"localize"),s.ɵɵelementEnd()}2&e&&s.ɵɵproperty("title",s.ɵɵpipeBind1(1,1,"button.delete.helptext"))}function he(e,t){if(1&e&&(s.ɵɵelementStart(0,"div"),s.ɵɵelementStart(1,"div",88),s.ɵɵelementStart(2,"div",137),s.ɵɵelementStart(3,"select",138),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.attribute=e})),s.ɵɵelement(4,"option"),s.ɵɵtemplate(5,re,2,1,"ng-container",78),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(6,me,14,10,"ng-container",2),s.ɵɵelementStart(7,"div",122),s.ɵɵtemplate(8,ge,2,3,"i",125),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit,i=s.ɵɵnextContext(3);s.ɵɵadvance(3),s.ɵɵproperty("name","filter"+n.id)("ngModel",n.attribute)("disabled",i.readonly||!i.isNew),s.ɵɵadvance(2),s.ɵɵproperty("ngForOf",i.geoObjectType.attributes),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.getAttributeForFilter(n)),s.ɵɵadvance(2),s.ɵɵproperty("ngIf",i.isNew)}}function fe(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",88),s.ɵɵelementStart(1,"div",127),s.ɵɵelementStart(2,"button",128),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(3).onNewFilter()})),s.ɵɵelement(3,"localize",129),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}}function ye(e,t){if(1&e&&(s.ɵɵelementContainerStart(0),s.ɵɵelementStart(1,"div",4),s.ɵɵelementStart(2,"div",5),s.ɵɵelementStart(3,"label"),s.ɵɵelement(4,"localize",136),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"div",7),s.ɵɵtemplate(6,he,9,6,"div",78),s.ɵɵtemplate(7,fe,4,0,"div",118),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()),2&e){var n=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("ngForOf",n.list.filter),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.isNew&&!n.readonly)}}var ve=function(e){return{metadata:e,type:"list"}};function be(e,t){if(1&e&&s.ɵɵelementContainer(0,167),2&e){var n=s.ɵɵnextContext(3),i=s.ɵɵreference(1);s.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",s.ɵɵpureFunction1(2,ve,n.list.listMetadata))}}var Se=function(e){return{metadata:e,type:"geospatial"}};function Ce(e,t){if(1&e&&s.ɵɵelementContainer(0,167),2&e){var n=s.ɵɵnextContext(3),i=s.ɵɵreference(1);s.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",s.ɵɵpureFunction1(2,Se,n.list.geospatialMetadata))}}function Ee(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",157),s.ɵɵelementStart(1,"div",88),s.ɵɵelementStart(2,"div",127),s.ɵɵelementStart(3,"div",58),s.ɵɵelementStart(4,"h2"),s.ɵɵelement(5,"localize",158),s.ɵɵelementEnd(),s.ɵɵelement(6,"hr"),s.ɵɵelementEnd(),s.ɵɵelement(7,"div",5),s.ɵɵelementStart(8,"div",7),s.ɵɵelementStart(9,"div",159),s.ɵɵelementStart(10,"div",160),s.ɵɵelementStart(11,"label",161),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).handleTab("LIST")})),s.ɵɵelementStart(12,"span",162),s.ɵɵelement(13,"localize",163),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(14,"label",161),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).handleTab("GEOSPATIAL")})),s.ɵɵelementStart(15,"span",162),s.ɵɵelement(16,"localize",164),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(17,"hr",165),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(18,"div",88),s.ɵɵelementStart(19,"div",127),s.ɵɵtemplate(20,be,1,4,"ng-container",166),s.ɵɵtemplate(21,Ce,1,4,"ng-container",166),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2);s.ɵɵadvance(11),s.ɵɵproperty("ngClass","LIST"===i.tab?"active":""),s.ɵɵadvance(3),s.ɵɵproperty("ngClass","GEOSPATIAL"===i.tab?"active":""),s.ɵɵadvance(6),s.ɵɵproperty("ngIf","LIST"===i.tab),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","GEOSPATIAL"===i.tab)}}function xe(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"button",168),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).onSubmit()})),s.ɵɵelement(1,"localize",169),s.ɵɵelementEnd()}if(2&e){s.ɵɵnextContext();var i=s.ɵɵreference(7),r=s.ɵɵnextContext();s.ɵɵproperty("disabled",i.invalid||!r.valid)}}function Oe(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementContainerStart(0),s.ɵɵtemplate(1,R,2,1,"div",57),s.ɵɵelementStart(2,"div",58),s.ɵɵelementStart(3,"h2"),s.ɵɵelement(4,"localize",59),s.ɵɵelementEnd(),s.ɵɵelement(5,"hr"),s.ɵɵelementEnd(),s.ɵɵelementStart(6,"form",60,61),s.ɵɵelementStart(8,"fieldset"),s.ɵɵelementStart(9,"div",62),s.ɵɵelementStart(10,"label",63),s.ɵɵelementStart(11,"input",64),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().list.listType=e})),s.ɵɵelementEnd(),s.ɵɵelementStart(12,"span"),s.ɵɵelement(13,"localize",65),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(14,"label",63),s.ɵɵelementStart(15,"input",66),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().list.listType=e})),s.ɵɵelementEnd(),s.ɵɵelementStart(16,"span"),s.ɵɵelement(17,"localize",67),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(18,"label",63),s.ɵɵelementStart(19,"input",68),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().list.listType=e})),s.ɵɵelementEnd(),s.ɵɵelementStart(20,"span"),s.ɵɵelement(21,"localize",69),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(22,"div",4),s.ɵɵelementStart(23,"div",5),s.ɵɵelementStart(24,"label"),s.ɵɵelement(25,"localize",70),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(26,"div",7),s.ɵɵelementStart(27,"input",71),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().list.code=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(28,L,10,5,"div",3),s.ɵɵtemplate(29,_,10,5,"div",3),s.ɵɵelementStart(30,"div",4),s.ɵɵelementStart(31,"div",5),s.ɵɵelementStart(32,"label",72),s.ɵɵelement(33,"localize",73),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(34,"div",7),s.ɵɵelementStart(35,"input",74),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().list.typeLabel=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(36,"div",4),s.ɵɵelementStart(37,"div",5),s.ɵɵelementStart(38,"label",72),s.ɵɵelement(39,"localize",75),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(40,"div",7),s.ɵɵelementStart(41,"input",76),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().list.typeCode=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(42,A,6,2,"div",77),s.ɵɵtemplate(43,N,4,0,"div",77),s.ɵɵtemplate(44,G,2,1,"div",78),s.ɵɵtemplate(45,q,7,1,"div",2),s.ɵɵtemplate(46,$,6,7,"div",77),s.ɵɵtemplate(47,K,25,5,"ng-container",2),s.ɵɵtemplate(48,ne,8,2,"ng-container",2),s.ɵɵtemplate(49,ye,8,2,"ng-container",2),s.ɵɵtemplate(50,Ee,22,4,"div",79),s.ɵɵelementStart(51,"div",4),s.ɵɵelement(52,"div",5),s.ɵɵelementStart(53,"div"),s.ɵɵelementStart(54,"div",80),s.ɵɵelementStart(55,"button",81),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onCancel()})),s.ɵɵelement(56,"localize",18),s.ɵɵelementEnd(),s.ɵɵtemplate(57,xe,2,1,"button",82),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementContainerEnd()}if(2&e){var i=s.ɵɵnextContext();s.ɵɵadvance(1),s.ɵɵproperty("ngIf",null!=i.message),s.ɵɵadvance(10),s.ɵɵproperty("checked","single"===i.list.listType)("value","single")("ngModel",i.list.listType)("disabled",i.readonly||!i.isNew),s.ɵɵadvance(4),s.ɵɵproperty("checked","incremental"===i.list.listType)("value","incremental")("ngModel",i.list.listType)("disabled",i.readonly||!i.isNew),s.ɵɵadvance(4),s.ɵɵproperty("checked","interval"===i.list.listType)("value","interval")("ngModel",i.list.listType)("disabled",i.readonly||!i.isNew),s.ɵɵadvance(8),s.ɵɵproperty("ngModel",i.list.code)("disabled",i.readonly||!i.isNew),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",i.list.displayLabel.localeValues),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",i.list.description.localeValues),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",i.list.typeLabel),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",i.list.typeCode),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",void 0!==i.list.includeLatLong),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.list.hierarchies.length>0),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",i.list.hierarchies),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.list.subtypeHierarchies.length>0),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","single"===i.list.listType),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","incremental"===i.list.listType),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","interval"===i.list.listType),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",null!=i.geoObjectType&&(i.isNew||null!=i.list.filter&&i.list.filter.length>0)),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.isNew),s.ɵɵadvance(6),s.ɵɵproperty("key",i.readonly?"io.back":"io.cancel"),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!i.readonly)}}var Ie=function(){function e(e,t,n,i,r,o){this.service=e,this.iService=t,this.lService=n,this.cacheService=i,this.bsModalRef=r,this.dateService=o,this.currentDate=new Date,this.message=null,this.onListTypeChange=null,this.list=null,this.geoObjectType=null,this.tab="LIST",this.readonly=!1,this.isNew=!1,this.valid=!0,this.gap=!1}return e.prototype.ngOnInit=function(){},e.prototype.init=function(e,t,n){var i=this;this.onListTypeChange=t,this.readonly=!e.write;var o=this.cacheService.getTypeCache();o.waitOnTypes().then((function(t){i.geoObjectType=o.getTypeByCode(e.typeCode)})),null==n?(this.isNew=!0,this.list={oid:null,listType:"single",organization:"",typeCode:"",typeLabel:"",displayLabel:this.lService.create(),description:this.lService.create(),code:e.typeCode+"_"+Math.floor(999999*Math.random()),hierarchies:[],subtypeHierarchies:[],listMetadata:{label:this.lService.create(),description:this.lService.create(),originator:"",collectionDate:"",process:this.lService.create(),progress:this.lService.create(),accessConstraints:this.lService.create(),useConstraints:this.lService.create(),acknowledgements:this.lService.create(),disclaimer:this.lService.create(),contactName:"",organization:"",telephoneNumber:"",email:""},geospatialMetadata:{label:this.lService.create(),description:this.lService.create(),originator:"",collectionDate:"",process:this.lService.create(),progress:this.lService.create(),accessConstraints:this.lService.create(),useConstraints:this.lService.create(),acknowledgements:this.lService.create(),disclaimer:this.lService.create(),contactName:"",organization:"",telephoneNumber:"",email:"",topicCategories:"",placeKeywords:"",updateFrequency:"",lineage:"",languages:"",scaleResolution:"",spatialRepresentation:"vector",referenceSystem:"EPSG4326",reportSpecification:"",distributionFormat:"SHAPEFILE"}},this.list.typeCode=e.typeCode,this.list.typeLabel=e.typeLabel,this.list.organization=e.orgCode,"MULTIPOINT"!==e.geometryType&&"POINT"!==e.geometryType||(this.list.includeLatLong=!0),this.iService.getHierarchiesForType(this.list.typeCode,!0).then((function(e){i.list.hierarchies=e})).catch((function(e){i.error(e)})),this.iService.getHierarchiesForSubtypes(this.list.typeCode,!1).then((function(e){i.list.subtypeHierarchies=e})).catch((function(e){i.error(e)}))):(this.list=n,this.isNew=!1,"interval"===this.list.listType&&this.list.intervalJson.forEach((function(e){e.readonly=e.endDate!==a.PRESENT?"BOTH":"START",e.oid=r.v4()})))},e.prototype.getIsDisabled=function(e){for(var t=e.target.classList,n=0;n<t.length;n++){if("disabled"===t[n])return!0}return!1},e.prototype.onSubmit=function(){var e=this;this.service.apply(this.list).then((function(t){e.onListTypeChange.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.getAttributeForFilter=function(e){return null!=e.attribute&&""!==e.attribute?this.geoObjectType.attributes.find((function(t){return t.code===e.attribute})):null},e.prototype.onNewFilter=function(){null==this.list.filter&&(this.list.filter=[]),this.list.filter.push({attribute:"",operation:"EQ",value:null,id:r.v4()})},e.prototype.removeFilter=function(e){this.list.filter.splice(e,1)},e.prototype.onNewInterval=function(){null==this.list.intervalJson&&(this.list.intervalJson=[]),this.list.intervalJson.push({startDate:"",endDate:"",oid:r.v4()})},e.prototype.removeInterval=function(e){this.list.intervalJson.splice(e,1),this.handleDateChange()},e.prototype.handleDateChange=function(){var e=this;"single"===this.list.listType?this.valid=null!=this.list.validOn&&this.list.validOn.length>0:"incremental"===this.list.listType?this.valid=null!=this.list.publishingStartDate&&this.list.publishingStartDate.length>0:"interval"===this.list.listType?(this.valid=this.list.intervalJson.map((function(t){return null!=t.startDate&&t.startDate.length>0&&null!=t.endDate&&t.endDate.length>0&&!e.dateService.after(t.startDate,t.endDate)})).reduce((function(e,t){return e&&t})),this.list.intervalJson=this.list.intervalJson.sort((function(e,t){return new Date(e.startDate)<new Date(t.startDate)?1:-1})),this.list.intervalJson.forEach((function(t,n){if(n>0){var i=e.list.intervalJson[n-1];if(i.startDate&&i.endDate&&t.startDate&&t.endDate){var r=new Date(i.startDate),o=new Date(i.endDate),a=new Date(t.startDate),s=new Date(t.endDate);l.default.dateRangeOverlaps(r.getTime(),o.getTime(),a.getTime(),s.getTime())&&(e.valid=!1)}}})),this.valid&&(this.gap=!1,this.list.intervalJson.forEach((function(t,n){if(n>0){var i=e.list.intervalJson[n-1];if(i.startDate&&t.endDate){var r=new Date(t.endDate),o=new Date(i.startDate);l.default.hasGap(r.getTime(),o.getTime())&&(e.gap=!0)}}})))):this.valid=!0},e.prototype.getGeoObjectTypeTermAttributeOptions=function(e){return a.GeoObjectType.getGeoObjectTypeTermAttributeOptions(this.geoObjectType,e)},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.handleTab=function(e){this.tab=e},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.ListTypeService),s.ɵɵdirectiveInject(d.IOService),s.ɵɵdirectiveInject(p.LocalizationService),s.ɵɵdirectiveInject(u.RegistryCacheService),s.ɵɵdirectiveInject(m.BsModalRef),s.ɵɵdirectiveInject(g.DateService))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["list-type-publish-modal"]],decls:4,vars:1,consts:[["metadataDetail",""],[1,"modal-body"],[4,"ngIf"],["class","row-holder",4,"ngFor","ngForOf"],[1,"row-holder"],[1,"label-holder"],["key","list.type.originator"],[1,"holder"],["name","originator","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.contact"],["key","masterlist.contactName"],["name","contactName","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.telephoneNumber"],["name","telephoneNumber","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.email"],["name","email","type","email",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.metadata.title"],[2,"color","#BABABA"],[3,"key"],["type","text",1,"form-control",3,"ngModel","name","disabled","required","ngModelChange"],["key","masterlist.listAbstract"],["name","'description-' + localeValue.locale",1,"form-control",3,"ngModel","disabled","required","ngModelChange"],["key","masterlist.process"],["name","'process-' + localeValue.locale",1,"form-control",3,"ngModel","disabled","required","ngModelChange"],["key","masterlist.progress"],["key","masterlist.accessConstraints"],["key","masterlist.useConstraints"],["key","masterlist.acknowledgements"],["name","'acknowledgements-' + localeValue.locale",1,"form-control",3,"ngModel","disabled","required","ngModelChange"],["key","masterlist.disclaimer"],["name","'disclaimer-' + localeValue.locale",1,"form-control",3,"ngModel","disabled","required","ngModelChange"],["key","list.type.topicCategories"],["name","topicCategories",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.placeKeywords"],["name","placeKeywords",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.updateFrequency"],["name","updateFrequency",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.lineage"],["name","lineage",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.languages"],["name","languages",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.scaleResolution"],["name","scaleResolution",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.spatialRepresentation"],["name","spatialRepresentation",1,"select-area",3,"ngModel","disabled","ngModelChange"],["value","vector"],["key","list.type.vector"],["key","list.type.referenceSystem"],["name","referenceSystem",1,"select-area",3,"ngModel","disabled","ngModelChange"],["value","EPSG4326"],["key","list.type.epsg4326"],["key","list.type.reportSpecification"],["name","reportSpecification","type","reportSpecification",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.distributionFormat"],["name","distributionFormat",1,"select-area",3,"ngModel","disabled","ngModelChange"],["value","SHAPEFILE"],["key","io.shapefile"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"text-center"],["key","type.publish.configuration.header"],["autocomplete","off",1,"modal-form"],["form","ngForm"],[1,"row-holder",2,"text-align","center"],[1,"radio","radio-inline",2,"padding-left","0"],["type","radio","name","single",1,"inline-radio-input",3,"checked","value","ngModel","disabled","ngModelChange"],["key","list.type.single.date"],["type","radio","name","incremental",1,"inline-radio-input",3,"checked","value","ngModel","disabled","ngModelChange"],["key","list.type.incremental.series"],["type","radio","name","interval",1,"inline-radio-input",3,"checked","value","ngModel","disabled","ngModelChange"],["key","list.type.interval.series"],["key","masterlist.code"],["name","code","type","text","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","typeCode"],["key","io.geoObjectType"],["name","typeLabel","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["key","hierarchy.nodeTooltip.geoObjectTypeCode"],["name","typeCode","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["class","row-holder",4,"ngIf"],[4,"ngFor","ngForOf"],["class","inner-col-content-wrapper","style","padding-top: 30px; margin-top: 10px;",4,"ngIf"],[1,"button-holder"],["type","button","role","button",1,"btn","btn-default",3,"click"],["type","submit","class","btn btn-primary","role","button",3,"disabled","click",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["key","list.type.includeLatLong"],["label","",3,"value","disable","valueChange"],["key","masterlist.parents"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"check-block",2,"margin","10px"],["name","unique",1,"jcf-unselectable","chk-area",2,"margin","0",3,"ngClass","click"],[2,"margin","3px 10px"],["key","listlist.subtypeHierarchies"],["for","validOn"],["key","list.type.valid.on"],["label","","name","listValidOn",3,"value","classNames","inputName","allowFutureDates","required","disable","valueChange"],["key","data.property.label.frequency"],["name","frequency","required","",1,"select-area",3,"ngModel","disabled","ngModelChange"],["frequency","ngModel"],["value","ANNUAL"],["key","georegistry.frequency.annual"],["value","BIANNUAL"],["key","georegistry.frequency.biannual"],["value","QUARTER"],["key","georegistry.frequency.quarter"],["value","MONTHLY"],["key","georegistry.frequency.monthly"],["class","form-input-validation-error-message-wrapper",4,"ngIf"],["key","data.property.label.publishingStartDate"],["style","line-height: 40px;","class","date-string-display",4,"ngIf"],["label","","name","listPublishingStartDate",3,"value","classNames","inputName","allowFutureDates","required","disable","valueChange",4,"ngIf"],[1,"form-input-validation-error-message-wrapper"],[1,"error-message"],["key","list.change.frequency"],[1,"date-string-display",2,"line-height","40px"],[3,"date"],["label","","name","listPublishingStartDate",3,"value","classNames","inputName","allowFutureDates","required","disable","valueChange"],["key","list.type.intervals"],["class","row",4,"ngIf"],[1,"col-md-5"],["key","io.startDate"],["key","io.endDate"],[1,"col-md-2"],["label","",3,"value","classNames","inputName","allowFutureDates","required","disable","valueChange"],["label","",3,"value","classNames","inputName","allowInfinity","required","disable","valueChange"],["class","fa fa-times delete-btn clickable",3,"title","click",4,"ngIf"],[1,"fa","fa-times","delete-btn","clickable",3,"title","click"],[1,"col-md-12"],["type","button","role","button",1,"btn","btn-primary",2,"margin","15px 0",3,"click"],["key","changeovertime.manageVersions.summaryKey.NEW"],["style","float:none;","class","error-message",4,"ngIf"],["style","float:none;","class","warning-text",4,"ngIf"],[1,"error-message",2,"float","none"],["key","list.type.bad.interval.dates"],[1,"warning-text",2,"float","none"],["key","manage.versions.gap.message"],["key","button.filter.helptext"],[1,"col-md-3"],["required","",1,"select-area",3,"name","ngModel","disabled","ngModelChange"],[3,"value",4,"ngIf"],[3,"value"],["value","EQ"],["key","list.type.equals"],["value","EXACT",4,"ngIf"],[1,"col-md-4"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["value","EXACT"],["key","list.type.exact"],["container","body",3,"classificationType","name","value","disabled","valueChange"],[1,"select-area",3,"name","ngModel","disabled","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["localizeLabelKey","change.request.boolean.option.true",3,"disable","value","valueChange"],["label","",3,"value","classNames","inputName","disable","valueChange"],["type","number",1,"form-control",3,"ngModel","name","disabled","required","ngModelChange"],[1,"inner-col-content-wrapper",2,"padding-top","30px","margin-top","10px"],["key","type.publish.metadata.header"],[1,"form-group",2,"text-align","center"],[1,"btn-group","geobject-editor-tab-holder"],[1,"btn","full-width-radio-button",2,"width","50%",3,"ngClass","click"],[2,"display","inline-block","width","90%"],["key","list.type.list"],["key","list.type.geospatial"],[2,"border-top","solid 3px #6BA542"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.submit"]],template:function(e,t){1&e&&(s.ɵɵtemplate(0,D,37,17,"ng-template",null,0,s.ɵɵtemplateRefExtractor),s.ɵɵelementStart(2,"div",1),s.ɵɵtemplate(3,Oe,58,30,"ng-container",2),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(3),s.ɵɵproperty("ngIf",null!=t.list))},directives:[h.NgIf,h.NgForOf,f.LocalizeComponent,y.DefaultValueAccessor,y.NgControlStatus,y.NgModel,v.ConvertKeyLabel,y.RequiredValidator,y.SelectControlValueAccessor,y.NgSelectOption,y.ɵangular_packages_forms_forms_z,y.ɵangular_packages_forms_forms_ba,y.NgControlStatusGroup,y.NgForm,y.RadioControlValueAccessor,b.BooleanFieldComponent,h.NgClass,S.DateFieldComponent,C.DateTextComponent,h.NgSwitch,h.NgSwitchCase,h.NgSwitchDefault,E.ClassificationFieldComponent,y.NumberValueAccessor,h.NgTemplateOutlet],pipes:[x.LocalizePipe],styles:[".list-sidebar[_ngcontent-%COMP%] {\n    z-index: 999;\n    background: #f1f1f1;\n    transition: all 0.3s;\n    vertical-align: top;\n    height: calc(100vh - 50px);\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n.list-type-content[_ngcontent-%COMP%] {\n    overflow-y: auto;\n    height: calc(100vh - 50px);\n}\n\n.list-group-item[_ngcontent-%COMP%], li.list-group-item[_ngcontent-%COMP%] {\n    background-color: transparent;\n    padding: 3px 10px;\n}\n\n.got-group-child[_ngcontent-%COMP%] {\n    margin-left: 10px;\n}\n.got-group-child[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\n    padding-left: 5px;\n    border-left: 1px solid;\n}\n\n.cr-sort-arrow[_ngcontent-%COMP%] {\n\tfont-size: 14px;\n}\n\n.cr-filter-link-active[_ngcontent-%COMP%], .cr-filter-link-active[_ngcontent-%COMP%]:active {\n\t\n    border-radius: 10px;\n    background: #6BA542;\n    color: white;\n    font-weight: bold;\n    padding: 3px 15px 3px 15px;\n}\n.cr-filter-link-active[_ngcontent-%COMP%]:hover, .cr-filter-link-active[_ngcontent-%COMP%]:focus {\n\tcolor:white;\n}\n\n.panel-body[_ngcontent-%COMP%] {\n    color: #333;\n    background-color: #f5f5f5;\n    border-color: #ddd;\n}\n\n.unstyled-list[_ngcontent-%COMP%] {\n    list-style: none;\n    padding: 0;\n    color: #707070;\n}\n\n.fa[_ngcontent-%COMP%] {\n    top: 5px;\n}\n.fa-stack[_ngcontent-%COMP%] {\n    width: 1.5em;\n}\n.fa-stack[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    text-align: left;\n}\n.second-stacked-el[_ngcontent-%COMP%]:before {\n    background:#f5f5f5;\n}\n\n\n.full-width-radio-button[_ngcontent-%COMP%] {\n      position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%], .changeSpan[_ngcontent-%COMP%] {\n    position: absolute;\n}\n\nlabel.settings[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]    > i.fa.fa-cog[_ngcontent-%COMP%] {\n    font-size: 15px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%] {\n    display: inline-block;\n    position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .changeSpan[_ngcontent-%COMP%] {\n  right: 2.5px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasErrors[_ngcontent-%COMP%]:before {\n  content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: left;\n  color: red;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasChanges[_ngcontent-%COMP%]:after {\n    content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: right;\n  color: orange;\n}\n\n.warning-text[_ngcontent-%COMP%]{\n    color: orange;\n}"]}),e}();t.ListTypePublishModalComponent=Ie,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(Ie,[{type:i.Component,args:[{selector:"list-type-publish-modal",templateUrl:"./publish-modal.component.html",styleUrls:["./list-type-manager.css"]}]}],(function(){return[{type:c.ListTypeService},{type:d.IOService},{type:p.LocalizationService},{type:u.RegistryCacheService},{type:m.BsModalRef},{type:g.DateService}]}),null)},1079:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportTypesModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(193),a=n(380),l=(n(25),n(0)),s=n(25),c=n(56),d=n(1),p=n(88),u=n(18),m=n(380),g=["myFile"];function h(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",20),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.message)}}function f(e,t){if(1&e&&(l.ɵɵelementStart(0,"option",21),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=t.$implicit;l.ɵɵpropertyInterpolate("value",n.code),l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.label.localizedValue)}}var y=function(){function e(e,t,n){this.eventService=e,this.localizationService=t,this.bsModalRef=n,this.organizations=[],this.message=null}return e.prototype.ngOnInit=function(){this.onNodeChange=new r.Subject},e.prototype.init=function(e){var t=this;this.organizations=e;var n={queueLimit:1,removeAfterUpload:!0,url:registry.contextPath+"/cgr/import-types"};this.uploader=new a.FileUploader(n),this.uploader.onBuildItemForm=function(e,n){n.append("orgCode",t.orgCode)},this.uploader.onBeforeUploadItem=function(e){t.eventService.start()},this.uploader.onCompleteItem=function(e,n,i,r){t.fileRef.nativeElement.value="",t.eventService.complete()},this.uploader.onSuccessItem=function(e,n,i,r){t.onNodeChange.next(!0),t.bsModalRef.hide()},this.uploader.onErrorItem=function(e,n,i,r){var o=JSON.parse(n);t.error({error:o})}},e.prototype.onSelect=function(e){this.orgCode=e},e.prototype.onClick=function(){null!=this.uploader.queue&&this.uploader.queue.length>0?this.uploader.uploadAll():this.error({message:this.localizationService.decode("io.missing.file"),error:{}})},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.EventService),l.ɵɵdirectiveInject(s.LocalizationService),l.ɵɵdirectiveInject(c.BsModalRef))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["import-types-modal"]],viewQuery:function(e,t){if(1&e&&l.ɵɵviewQuery(g,1),2&e){var n;l.ɵɵqueryRefresh(n=l.ɵɵloadQuery())&&(t.fileRef=n.first)}},decls:33,vars:3,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading","text-center"],["key","hierarchy.sidebar.importTypes"],["autocomplete","off",1,"modal-form"],["form","ngForm"],[1,"row-holder"],[1,"label-holder"],["key","attribute.organization.label"],[1,"holder"],[3,"change"],[3,"value",4,"ngFor","ngForOf"],["key","hierarchy.sidebar.xmlFile"],["name","file","type","file","ng2FileSelect","","accept",".xml","required","",1,"ghost-input",3,"uploader"],["myFile",""],[1,"button-holder"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit","role","button","aria-disabled","false",1,"btn","btn-primary",3,"click"],["key","modal.button.ok"],["role","alert",1,"alert","alert-danger"],[3,"value"]],template:function(e,t){1&e&&(l.ɵɵelementStart(0,"div",0),l.ɵɵtemplate(1,h,2,1,"div",1),l.ɵɵelementStart(2,"div",2),l.ɵɵelementStart(3,"h1"),l.ɵɵelement(4,"localize",3),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(5,"form",4,5),l.ɵɵelementStart(7,"fieldset"),l.ɵɵelementStart(8,"div",6),l.ɵɵelementStart(9,"div",7),l.ɵɵelementStart(10,"label"),l.ɵɵelement(11,"localize",8),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(12,"div",9),l.ɵɵelementStart(13,"select",10),l.ɵɵlistener("change",(function(e){return t.onSelect(e.target.value)})),l.ɵɵelement(14,"option"),l.ɵɵtemplate(15,f,2,2,"option",11),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(16,"div",6),l.ɵɵelementStart(17,"div",7),l.ɵɵelementStart(18,"label"),l.ɵɵelement(19,"localize",12),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(20,"div",9),l.ɵɵelement(21,"input",13,14),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(23,"div",6),l.ɵɵelement(24,"div",7),l.ɵɵelementStart(25,"div",9),l.ɵɵelementStart(26,"div",15),l.ɵɵelementStart(27,"button",16),l.ɵɵlistener("click",(function(){return t.bsModalRef.hide()})),l.ɵɵelementStart(28,"span"),l.ɵɵelement(29,"localize",17),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(30,"button",18),l.ɵɵlistener("click",(function(){return t.onClick()})),l.ɵɵelementStart(31,"span"),l.ɵɵelement(32,"localize",19),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e&&(l.ɵɵadvance(1),l.ɵɵproperty("ngIf",null!=t.message),l.ɵɵadvance(14),l.ɵɵproperty("ngForOf",t.organizations),l.ɵɵadvance(6),l.ɵɵproperty("uploader",t.uploader))},directives:[d.NgIf,p.LocalizeComponent,u.ɵangular_packages_forms_forms_ba,u.NgControlStatusGroup,u.NgForm,u.NgSelectOption,u.ɵangular_packages_forms_forms_z,d.NgForOf,m.FileSelectDirective],encapsulation:2}),e}();t.ImportTypesModalComponent=y,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(y,[{type:i.Component,args:[{selector:"import-types-modal",templateUrl:"./import-types-modal.component.html",styleUrls:[]}]}],(function(){return[{type:s.EventService},{type:s.LocalizationService},{type:c.BsModalRef}]}),{fileRef:[{type:i.ViewChild,args:["myFile"]}]})},1080:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateHierarchyTypeModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(193),a=(n(1015),n(25),n(0)),l=n(25),s=n(1015),c=n(56),d=n(18),p=n(1),u=n(88),m=n(1029),g=n(545);function h(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",40),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function f(e,t){1&e&&a.ɵɵelement(0,"localize",41)}function y(e,t){1&e&&a.ɵɵelement(0,"localize",42)}function v(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",7),a.ɵɵelementStart(1,"label",43),a.ɵɵelement(2,"localize",44),a.ɵɵelementStart(3,"span",45),a.ɵɵtext(4," ("),a.ɵɵelement(5,"convert-key-label",46),a.ɵɵtext(6,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(7,"input",47),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext();a.ɵɵadvance(5),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(2),a.ɵɵproperty("disabled",i.readOnly)("ngModel",n.value)("name","label-"+n.locale)}}function b(e,t){if(1&e&&(a.ɵɵelementStart(0,"option",50),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵproperty("value",n.code),a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.label.localizedValue)}}function S(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"select",48),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().hierarchyType.organizationCode=e})),a.ɵɵelement(1,"option"),a.ɵɵtemplate(2,b,2,2,"option",49),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵproperty("disabled",i.edit||i.readOnly)("ngModel",i.hierarchyType.organizationCode),a.ɵɵadvance(2),a.ɵɵproperty("ngForOf",i.organizations)}}function C(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"span",51),a.ɵɵelementStart(1,"input",52),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().organizationLabel=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("ngModel",i.organizationLabel)}}function E(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"span",51),a.ɵɵelementStart(1,"input",52),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().organizationLabel=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("ngModel",i.organizationLabel)}}function x(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"button",53),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().handleOnSubmit()})),a.ɵɵelement(1,"localize",54),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext(),r=a.ɵɵreference(3);a.ɵɵproperty("disabled",i.hierarchyType.code.length<1||r.invalid)}}var O=function(){function e(e,t,n,i,r){this.lService=e,this.auth=t,this.registryService=n,this.hierarchyService=i,this.bsModalRef=r,this.organizations=[],this.message=null,this.edit=!1,this.readOnly=!1}return e.prototype.ngOnInit=function(){var e=this;this.onHierarchytTypeCreate=new r.Subject,this.hierarchyType={code:"",label:this.lService.create(),description:this.lService.create(),rootGeoObjectTypes:[],organizationCode:""},this.registryService.getOrganizations().then((function(t){if(e.readOnly)e.organizations=t;else{e.organizations=[];for(var n=0;n<t.length;++n)e.auth.isOrganizationRA(t[n].code)&&e.organizations.push(t[n])}e.edit||1!==e.organizations.length?(e.edit||e.readOnly)&&(e.organizationLabel=e.getOrganizationLabelFromCode(e.hierarchyType.organizationCode)):(e.hierarchyType.organizationCode=e.organizations[0].code,e.organizationLabel=e.organizations[0].label.localizedValue)})).catch((function(t){e.error(t)}))},e.prototype.getOrganizationLabelFromCode=function(e){for(var t=0;t<this.organizations.length;++t)if(this.organizations[t].code===e)return this.organizations[t].label.localizedValue;return console.log("Did not find org with code ["+e+"]"),e},e.prototype.handleOnSubmit=function(){var e=this;this.message=null,this.readOnly?this.bsModalRef.hide():this.edit?this.hierarchyService.updateHierarchyType(JSON.stringify(this.hierarchyType)).then((function(t){e.onHierarchytTypeCreate.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)})):this.hierarchyService.createHierarchyType(JSON.stringify(this.hierarchyType)).then((function(t){e.onHierarchytTypeCreate.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.LocalizationService),a.ɵɵdirectiveInject(l.AuthService),a.ɵɵdirectiveInject(s.RegistryService),a.ɵɵdirectiveInject(s.HierarchyService),a.ɵɵdirectiveInject(c.BsModalRef))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["create-hierarchy-type-modal"]],decls:63,vars:29,consts:[[1,"modal-body"],[1,"modal-form"],["form","ngForm"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading","text-center"],["key","hierarchy.management.create.hierarchy.title",4,"ngIf"],["key","hierarchy.management.update.hierarchy.title",4,"ngIf"],[1,"form-group"],["for","codeInput"],["key","data.property.label.code"],["name","code","type","input","id","codeInput","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","form-group",4,"ngFor","ngForOf"],["key","data.property.label.description",3,"value","inlinelayout","disabled","valueChange"],["for","organization"],["key","attribute.organization.label"],["class","select-area","name","organization","required","",3,"disabled","ngModel","ngModelChange",4,"ngIf"],["class","text",4,"ngIf"],["key","data.property.label.progress"],["name","progress",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","data.property.label.acknowledgement"],["name","acknowledgement",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","data.property.label.disclaimer"],["name","disclaimer","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","data.property.label.accessConstraints"],["name","accessConstraints","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","data.property.label.useConstraints"],["name","useConstraints","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.contact"],["key","data.property.label.contact"],["name","contact","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","data.property.label.phoneNumber"],["name","phoneNumber","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","data.property.label.email"],["name","email","type","email",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"row"],[1,"col-md-12"],[1,"button-holder"],["type","button",1,"btn","btn-default",2,"padding","4px 18px",3,"click"],["key","modal.button.cancel"],["type","submit","class","btn btn-primary","style","padding: 4px 18px;",3,"disabled","click",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["key","hierarchy.management.create.hierarchy.title"],["key","hierarchy.management.update.hierarchy.title"],["for","labelInput"],["key","data.property.label.label"],[2,"color","#BABABA"],[3,"key"],["type","input","required","",1,"form-control",3,"disabled","ngModel","name","ngModelChange"],["name","organization","required","",1,"select-area",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text"],["type","text","name","organization","disabled","","required","",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",2,"padding","4px 18px",3,"disabled","click"],["key","modal.button.ok"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"form"),a.ɵɵelementStart(1,"div",0),a.ɵɵelementStart(2,"form",1,2),a.ɵɵtemplate(4,h,2,1,"div",3),a.ɵɵelementStart(5,"div",4),a.ɵɵelementStart(6,"h1"),a.ɵɵtemplate(7,f,1,0,"localize",5),a.ɵɵtemplate(8,y,1,0,"localize",6),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(9,"div",7),a.ɵɵelementStart(10,"label",8),a.ɵɵelement(11,"localize",9),a.ɵɵelementEnd(),a.ɵɵelementStart(12,"input",10),a.ɵɵlistener("ngModelChange",(function(e){return t.hierarchyType.code=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(13,v,8,4,"div",11),a.ɵɵelementStart(14,"localized-text",12),a.ɵɵlistener("valueChange",(function(e){return t.hierarchyType.description=e})),a.ɵɵelementEnd(),a.ɵɵelementStart(15,"div",7),a.ɵɵelementStart(16,"label",13),a.ɵɵelement(17,"localize",14),a.ɵɵelementEnd(),a.ɵɵtemplate(18,S,3,3,"select",15),a.ɵɵtemplate(19,C,2,1,"span",16),a.ɵɵtemplate(20,E,2,1,"span",16),a.ɵɵelementEnd(),a.ɵɵelementStart(21,"div",7),a.ɵɵelementStart(22,"label"),a.ɵɵelement(23,"localize",17),a.ɵɵelementEnd(),a.ɵɵelementStart(24,"textarea",18),a.ɵɵlistener("ngModelChange",(function(e){return t.hierarchyType.progress=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(25,"div",7),a.ɵɵelementStart(26,"label"),a.ɵɵelement(27,"localize",19),a.ɵɵelementEnd(),a.ɵɵelementStart(28,"textarea",20),a.ɵɵlistener("ngModelChange",(function(e){return t.hierarchyType.acknowledgement=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(29,"div",7),a.ɵɵelementStart(30,"label"),a.ɵɵelement(31,"localize",21),a.ɵɵelementEnd(),a.ɵɵelementStart(32,"textarea",22),a.ɵɵlistener("ngModelChange",(function(e){return t.hierarchyType.disclaimer=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(33,"div",7),a.ɵɵelementStart(34,"label"),a.ɵɵelement(35,"localize",23),a.ɵɵelementEnd(),a.ɵɵelementStart(36,"textarea",24),a.ɵɵlistener("ngModelChange",(function(e){return t.hierarchyType.accessConstraints=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(37,"div",7),a.ɵɵelementStart(38,"label"),a.ɵɵelement(39,"localize",25),a.ɵɵelementEnd(),a.ɵɵelementStart(40,"textarea",26),a.ɵɵlistener("ngModelChange",(function(e){return t.hierarchyType.useConstraints=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(41,"hr"),a.ɵɵelementStart(42,"div",7),a.ɵɵelementStart(43,"h4"),a.ɵɵelement(44,"localize",27),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(45,"div",7),a.ɵɵelementStart(46,"label"),a.ɵɵelement(47,"localize",28),a.ɵɵelementEnd(),a.ɵɵelementStart(48,"input",29),a.ɵɵlistener("ngModelChange",(function(e){return t.hierarchyType.contact=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(49,"div",7),a.ɵɵelementStart(50,"label"),a.ɵɵelement(51,"localize",30),a.ɵɵelementEnd(),a.ɵɵelementStart(52,"input",31),a.ɵɵlistener("ngModelChange",(function(e){return t.hierarchyType.phoneNumber=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(53,"div",7),a.ɵɵelementStart(54,"label"),a.ɵɵelement(55,"localize",32),a.ɵɵelementEnd(),a.ɵɵelementStart(56,"input",33),a.ɵɵlistener("ngModelChange",(function(e){return t.hierarchyType.email=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(57,"div",34),a.ɵɵelementStart(58,"div",35),a.ɵɵelementStart(59,"div",36),a.ɵɵelementStart(60,"button",37),a.ɵɵlistener("click",(function(){return t.bsModalRef.hide()})),a.ɵɵelement(61,"localize",38),a.ɵɵelementEnd(),a.ɵɵtemplate(62,x,2,1,"button",39),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(4),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(3),a.ɵɵproperty("ngIf",!t.edit),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.edit),a.ɵɵadvance(4),a.ɵɵproperty("ngModel",t.hierarchyType.code)("disabled",t.edit||t.readOnly),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",t.hierarchyType.label.localeValues),a.ɵɵadvance(1),a.ɵɵproperty("value",t.hierarchyType.description)("inlinelayout",!0)("disabled",t.readOnly),a.ɵɵadvance(4),a.ɵɵproperty("ngIf",!t.edit&&t.organizations.length>1),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!t.edit&&1==t.organizations.length),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.edit),a.ɵɵadvance(4),a.ɵɵproperty("ngModel",t.hierarchyType.progress)("disabled",t.readOnly),a.ɵɵadvance(4),a.ɵɵproperty("ngModel",t.hierarchyType.acknowledgement)("disabled",t.readOnly),a.ɵɵadvance(4),a.ɵɵproperty("ngModel",t.hierarchyType.disclaimer)("disabled",t.readOnly),a.ɵɵadvance(4),a.ɵɵproperty("ngModel",t.hierarchyType.accessConstraints)("disabled",t.readOnly),a.ɵɵadvance(4),a.ɵɵproperty("ngModel",t.hierarchyType.useConstraints)("disabled",t.readOnly),a.ɵɵadvance(8),a.ɵɵproperty("ngModel",t.hierarchyType.contact)("disabled",t.readOnly),a.ɵɵadvance(4),a.ɵɵproperty("ngModel",t.hierarchyType.phoneNumber)("disabled",t.readOnly),a.ɵɵadvance(4),a.ɵɵproperty("ngModel",t.hierarchyType.email)("disabled",t.readOnly),a.ɵɵadvance(6),a.ɵɵproperty("ngIf",!t.readOnly))},directives:[d.ɵangular_packages_forms_forms_ba,d.NgControlStatusGroup,d.NgForm,p.NgIf,u.LocalizeComponent,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,p.NgForOf,m.LocalizedTextComponent,g.ConvertKeyLabel,d.SelectControlValueAccessor,d.NgSelectOption,d.ɵangular_packages_forms_forms_z],encapsulation:2}),e}();t.CreateHierarchyTypeModalComponent=O,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(O,[{type:i.Component,args:[{selector:"create-hierarchy-type-modal",templateUrl:"./create-hierarchy-type-modal.component.html",styleUrls:[]}]}],(function(){return[{type:l.LocalizationService},{type:l.AuthService},{type:s.RegistryService},{type:s.HierarchyService},{type:c.BsModalRef}]}),null)},1081:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerGroupSorter=t.LayerGroup=void 0;var i=n(1020),r=function(){function e(e,t){this.layers=e,this.label=t}return e.prototype.getGroupName=function(){return this.groupName},e.prototype.setGroupName=function(e){this.groupName=e},e.prototype.getLayers=function(){return this.layers},e.prototype.setLayers=function(e){this.layers=e},e.prototype.getLabel=function(){return this.label},e.prototype.setLabel=function(e){this.label=e},e}();t.LayerGroup=r;var o=function(){function e(e){this.localService=e}return e.prototype.getLayerGroups=function(e){var t=[];return t.push(new r(e.filter((function(e){return e.dataSource instanceof i.SearchLayerDataSource})),this.localService.decode("explorer.layerPanel.layerGroup.search"))),t.push(new r(e.filter((function(e){return e.dataSource instanceof i.GeoObjectLayerDataSource||e.dataSource instanceof i.ValueOverTimeDataSource})),this.localService.decode("explorer.layerPanel.layerGroup.geoObject"))),t.push(new r(e.filter((function(e){return e.dataSource instanceof i.RelationshipVisualizionDataSource})),this.localService.decode("explorer.layerPanel.layerGroup.relationship"))),t.push(new r(e.filter((function(e){return e.dataSource instanceof i.ListVectorLayerDataSource})),this.localService.decode("explorer.layerPanel.layerGroup.list"))),t.filter((function(e){return e.getLayers().length>0}))},e.prototype.sortLayers=function(e){var t=[];return this.getLayerGroups(e).forEach((function(e){return e.getLayers().forEach((function(e){return t.push(e)}))})),t},e}();t.LayerGroupSorter=o},1082:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateGeoObjTypeModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(193),a=(n(1015),n(25),n(0)),l=n(25),s=n(1015),c=n(56),d=n(18),p=n(1),u=n(88),m=n(1029),g=n(546),h=n(545);function f(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",44),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function y(e,t){1&e&&a.ɵɵelement(0,"localize",45)}function v(e,t){1&e&&a.ɵɵelement(0,"localize",46)}function b(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",9),a.ɵɵelementStart(1,"label"),a.ɵɵelement(2,"localize",47),a.ɵɵelementStart(3,"span",48),a.ɵɵtext(4," ("),a.ɵɵelement(5,"convert-key-label",49),a.ɵɵtext(6,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(7,"input",50),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵadvance(5),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(2),a.ɵɵproperty("ngModel",n.value)("name","label-"+n.locale)("required","defaultLocale"===n.locale)}}function S(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",7),a.ɵɵelementStart(1,"div",16),a.ɵɵelementStart(2,"div",9),a.ɵɵelementStart(3,"label",17),a.ɵɵelement(4,"localize",51),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"div",19),a.ɵɵelementStart(6,"boolean-field",20),a.ɵɵlistener("valueChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().geoObjectType.isAbstract=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(6),a.ɵɵproperty("disable",!0)("value",i.geoObjectType.isAbstract)("localizeLabelKey","attribute.isAbstract.label")}}var C=function(e){return{"chk-checked":e}},E=function(){function e(e,t,n,i){this.lService=e,this.auth=t,this.registryService=n,this.bsModalRef=i,this.organization=null,this.message=null}return e.prototype.ngOnInit=function(){this.onGeoObjTypeCreate=new r.Subject,this.geoObjectType={code:"",label:this.lService.create(),description:this.lService.create(),geometryType:"MULTIPOINT",isLeaf:!1,isGeometryEditable:!0,organizationCode:"",attributes:[]}},e.prototype.init=function(e,t,n,i){this.geoObjectType.isAbstract=i||!1,n&&(this.geoObjectType.superTypeCode=n.code,this.geoObjectType.geometryType=n.geometryType,this.geoObjectType.isPrivate=n.isPrivate),this.parents=t.filter((function(e){return e.isAbstract})),this.organization=e,this.geoObjectType.organizationCode=this.organization.code,this.organizationLabel=this.organization.label.localizedValue},e.prototype.handleOnSubmit=function(){var e=this;this.message=null,this.registryService.createGeoObjectType(JSON.stringify(this.geoObjectType)).then((function(t){e.onGeoObjTypeCreate.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.toggleIsLeaf=function(){this.geoObjectType.isLeaf=!this.geoObjectType.isLeaf},e.prototype.toggleIsGeometryEditable=function(){this.geoObjectType.isGeometryEditable=!this.geoObjectType.isGeometryEditable},e.prototype.toggleIsAbstract=function(){this.geoObjectType.isAbstract=!this.geoObjectType.isAbstract},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.LocalizationService),a.ɵɵdirectiveInject(l.AuthService),a.ɵɵdirectiveInject(s.RegistryService),a.ɵɵdirectiveInject(c.BsModalRef))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["create-geoobjtype-modal"]],decls:66,vars:18,consts:[[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading","text-center"],["key","hierarchy.management.create.geoobjecttype.group.title",4,"ngIf"],["key","hierarchy.management.create.geoobjecttype.title",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["for","codeInput"],["key","data.property.label.code"],["name","code","type","text","id","codeInput","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group",4,"ngFor","ngForOf"],["key","data.property.label.description",3,"value","inlinelayout","valueChange"],["class","row",4,"ngIf"],[1,"col-md-12",2,"margin-bottom","15px"],[2,"display","block"],["key","geoObjectType.attr.visibility.label"],[1,"check-block"],[3,"disable","value","localizeLabelKey","valueChange"],["for","geometryType"],["key","data.property.label.geometryType"],["name","geometryType","required","",1,"select-area",3,"ngModel","disabled","ngModelChange"],["value","MULTIPOINT"],["key","georegistry.geometry.point"],["value","MULTILINE"],["key","georegistry.geometry.line"],["value","MULTIPOLYGON"],["key","georegistry.geometry.polygon"],["value","MIXED"],["key","georegistry.geometry.mixed"],[1,"jcf-unselectable","chk-area",2,"margin","0",3,"ngClass","click"],[1,"checkbox-label"],["key","hierarchy.management.option.label.isGeometryEditable"],["for","organization"],["key","attribute.organization.label"],[1,"text"],["type","text","name","organization","disabled","","required","",3,"ngModel","ngModelChange"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["key","modal.button.ok"],["role","alert",1,"alert","alert-danger"],["key","hierarchy.management.create.geoobjecttype.group.title"],["key","hierarchy.management.create.geoobjecttype.title"],["key","data.property.label.label"],[2,"color","#BABABA"],[3,"key"],["type","input",1,"form-control",3,"ngModel","name","required","ngModelChange"],["key","attribute.group.label"]],template:function(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"form",0,1),a.ɵɵlistener("ngSubmit",(function(){return a.ɵɵrestoreView(n),a.ɵɵreference(1).valid&&t.handleOnSubmit()})),a.ɵɵelementStart(2,"div",2),a.ɵɵtemplate(3,f,2,1,"div",3),a.ɵɵelementStart(4,"div",4),a.ɵɵelementStart(5,"h1"),a.ɵɵtemplate(6,y,1,0,"localize",5),a.ɵɵtemplate(7,v,1,0,"localize",6),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",7),a.ɵɵelementStart(9,"div",8),a.ɵɵelementStart(10,"div",9),a.ɵɵelementStart(11,"div"),a.ɵɵelementStart(12,"label",10),a.ɵɵelement(13,"localize",11),a.ɵɵelementEnd(),a.ɵɵelementStart(14,"input",12),a.ɵɵlistener("ngModelChange",(function(e){return t.geoObjectType.code=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(15,"div",7),a.ɵɵelementStart(16,"div",8),a.ɵɵtemplate(17,b,8,4,"div",13),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(18,"div",7),a.ɵɵelementStart(19,"div",8),a.ɵɵelementStart(20,"localized-text",14),a.ɵɵlistener("valueChange",(function(e){return t.geoObjectType.description=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(21,S,7,3,"div",15),a.ɵɵelementStart(22,"div",7),a.ɵɵelementStart(23,"div",16),a.ɵɵelementStart(24,"div",9),a.ɵɵelementStart(25,"label",17),a.ɵɵelement(26,"localize",18),a.ɵɵelementEnd(),a.ɵɵelementStart(27,"div",19),a.ɵɵelementStart(28,"boolean-field",20),a.ɵɵlistener("valueChange",(function(e){return t.geoObjectType.isPrivate=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(29,"div",7),a.ɵɵelementStart(30,"div",8),a.ɵɵelementStart(31,"div",9),a.ɵɵelementStart(32,"label",21),a.ɵɵelement(33,"localize",22),a.ɵɵelementEnd(),a.ɵɵelementStart(34,"select",23),a.ɵɵlistener("ngModelChange",(function(e){return t.geoObjectType.geometryType=e})),a.ɵɵelement(35,"option"),a.ɵɵelementStart(36,"option",24),a.ɵɵelement(37,"localize",25),a.ɵɵelementEnd(),a.ɵɵelementStart(38,"option",26),a.ɵɵelement(39,"localize",27),a.ɵɵelementEnd(),a.ɵɵelementStart(40,"option",28),a.ɵɵelement(41,"localize",29),a.ɵɵelementEnd(),a.ɵɵelementStart(42,"option",30),a.ɵɵelement(43,"localize",31),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(44,"div",7),a.ɵɵelementStart(45,"div",16),a.ɵɵelementStart(46,"div",9),a.ɵɵelementStart(47,"div",19),a.ɵɵelementStart(48,"div",32),a.ɵɵlistener("click",(function(){return t.toggleIsGeometryEditable()})),a.ɵɵelement(49,"span"),a.ɵɵelementEnd(),a.ɵɵelementStart(50,"label",33),a.ɵɵelement(51,"localize",34),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(52,"div",7),a.ɵɵelementStart(53,"div",8),a.ɵɵelementStart(54,"div",9),a.ɵɵelementStart(55,"label",35),a.ɵɵelement(56,"localize",36),a.ɵɵelementEnd(),a.ɵɵelementStart(57,"span",37),a.ɵɵelementStart(58,"input",38),a.ɵɵlistener("ngModelChange",(function(e){return t.organizationLabel=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(59,"div",7),a.ɵɵelementStart(60,"div",8),a.ɵɵelementStart(61,"div",39),a.ɵɵelementStart(62,"button",40),a.ɵɵlistener("click",(function(){return t.bsModalRef.hide()})),a.ɵɵelement(63,"localize",41),a.ɵɵelementEnd(),a.ɵɵelementStart(64,"button",42),a.ɵɵelement(65,"localize",43),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵreference(1);a.ɵɵadvance(3),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(3),a.ɵɵproperty("ngIf",t.geoObjectType.isAbstract),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!t.geoObjectType.isAbstract),a.ɵɵadvance(7),a.ɵɵproperty("ngModel",t.geoObjectType.code),a.ɵɵadvance(3),a.ɵɵproperty("ngForOf",t.geoObjectType.label.localeValues),a.ɵɵadvance(3),a.ɵɵproperty("value",t.geoObjectType.description)("inlinelayout",!0),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!t.geoObjectType.superTypeCode),a.ɵɵadvance(7),a.ɵɵproperty("disable",null!=t.geoObjectType.superTypeCode)("value",t.geoObjectType.isPrivate)("localizeLabelKey","geoObjectType.attr.isPrivate"),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",t.geoObjectType.geometryType)("disabled",null!=t.geoObjectType.superTypeCode&&""!=t.geoObjectType.superTypeCode),a.ɵɵadvance(14),a.ɵɵproperty("ngClass",a.ɵɵpureFunction1(16,C,t.geoObjectType.isGeometryEditable)),a.ɵɵadvance(10),a.ɵɵproperty("ngModel",t.organizationLabel),a.ɵɵadvance(6),a.ɵɵproperty("disabled",i.invalid)}},directives:[d.ɵangular_packages_forms_forms_ba,d.NgControlStatusGroup,d.NgForm,p.NgIf,u.LocalizeComponent,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,p.NgForOf,m.LocalizedTextComponent,g.BooleanFieldComponent,d.SelectControlValueAccessor,d.NgSelectOption,d.ɵangular_packages_forms_forms_z,p.NgClass,h.ConvertKeyLabel],encapsulation:2}),e}();t.CreateGeoObjTypeModalComponent=E,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(E,[{type:i.Component,args:[{selector:"create-geoobjtype-modal",templateUrl:"./create-geoobjtype-modal.component.html",styleUrls:[]}]}],(function(){return[{type:l.LocalizationService},{type:l.AuthService},{type:s.RegistryService},{type:c.BsModalRef}]}),null)},1083:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageGeoObjectTypeModalComponent=void 0;var i=n(0),r=n(2),o=(n(56),n(44)),a=n(193),l=n(544),s=(n(1015),n(0)),c=n(1015),d=n(56),p=n(18),u=n(294),m=n(1),g=n(1084),h=n(1057),f=n(1058),y=n(1059),v=n(1060);function b(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"geoobjecttype-input",5),s.ɵɵlistener("stateChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onModalStateChange(e)}))("geoObjectTypeChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onGeoObjectTypeChange(e)})),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext();s.ɵɵproperty("readOnly",i.readOnly)("geoObjectType",i.geoObjectType)("setGeoObjectType",i.geoObjectType)}}function S(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"define-attribute-modal-content",6),s.ɵɵlistener("stateChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onModalStateChange(e)}))("geoObjectTypeChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onGeoObjectTypeChange(e)})),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext();s.ɵɵproperty("geoObjectType",i.geoObjectType)("service",i.service)}}function C(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"edit-attribute-modal-content",7),s.ɵɵlistener("stateChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onModalStateChange(e)}))("geoObjectTypeChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onGeoObjectTypeChange(e)})),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext();s.ɵɵproperty("geoObjectType",i.geoObjectType)("attribute",i.modalState.attribute)("service",i.service)}}function E(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"manage-term-options",8),s.ɵɵlistener("stateChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onModalStateChange(e)})),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext();s.ɵɵproperty("attribute",i.modalState.attribute)}}function x(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"edit-term-option-input",9),s.ɵɵlistener("stateChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onModalStateChange(e)})),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext();s.ɵɵproperty("attribute",i.modalState.attribute)("termOption",i.modalState.termOption)}}var O=function(){function e(e,t,n){this.service=e,this.bsModalRef=t,this.confirmBsModalRef=n,this.modalState={state:l.GeoObjectTypeModalStates.manageGeoObjectType,attribute:"",termOption:""},this.message=null,this.readOnly=!1}return e.prototype.ngOnInit=function(){this.onGeoObjectTypeSubmitted=new o.Subject},e.prototype.onModalStateChange=function(e){this.modalState=e},e.prototype.onGeoObjectTypeChange=function(e){this.onGeoObjectTypeSubmitted.next(e)},e.prototype.update=function(){},e.prototype.close=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.RegistryService),s.ɵɵdirectiveInject(d.BsModalRef),s.ɵɵdirectiveInject(d.BsModalRef))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["manage-geoobjecttype-modal"]],decls:7,vars:5,consts:[[3,"readOnly","geoObjectType","setGeoObjectType","stateChange","geoObjectTypeChange",4,"ngIf"],[3,"geoObjectType","service","stateChange","geoObjectTypeChange",4,"ngIf"],[3,"geoObjectType","attribute","service","stateChange","geoObjectTypeChange",4,"ngIf"],[3,"attribute","stateChange",4,"ngIf"],[3,"attribute","termOption","stateChange",4,"ngIf"],[3,"readOnly","geoObjectType","setGeoObjectType","stateChange","geoObjectTypeChange"],[3,"geoObjectType","service","stateChange","geoObjectTypeChange"],[3,"geoObjectType","attribute","service","stateChange","geoObjectTypeChange"],[3,"attribute","stateChange"],[3,"attribute","termOption","stateChange"]],template:function(e,t){1&e&&(s.ɵɵelementStart(0,"form"),s.ɵɵelement(1,"modal-step-indicator"),s.ɵɵtemplate(2,b,1,3,"geoobjecttype-input",0),s.ɵɵtemplate(3,S,1,2,"define-attribute-modal-content",1),s.ɵɵtemplate(4,C,1,3,"edit-attribute-modal-content",2),s.ɵɵtemplate(5,E,1,1,"manage-term-options",3),s.ɵɵtemplate(6,x,1,2,"edit-term-option-input",4),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(2),s.ɵɵproperty("ngIf","MANAGE-GEO-OBJECT-TYPE"===t.modalState.state),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","DEFINE-ATTRIBUTE"===t.modalState.state),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","EDIT-ATTRIBUTE"===t.modalState.state),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","MANAGE-TERM-OPTION"===t.modalState.state),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","EDIT-TERM-OPTION"===t.modalState.state))},directives:[p.ɵangular_packages_forms_forms_ba,p.NgControlStatusGroup,p.NgForm,u.ModalStepIndicatorComponent,m.NgIf,g.GeoObjectTypeInputComponent,h.DefineAttributeModalContentComponent,f.EditAttributeModalContentComponent,y.ManageTermOptionsComponent,v.EditTermOptionInputComponent],styles:[""],data:{animation:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")]),r.transition(":leave",r.animate("500ms",r.style({opacity:0})))])]]}}),e}();t.ManageGeoObjectTypeModalComponent=O,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(O,[{type:i.Component,args:[{selector:"manage-geoobjecttype-modal",templateUrl:"./manage-geoobjecttype-modal.component.html",styleUrls:["./manage-geoobjecttype-modal.css"],animations:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")]),r.transition(":leave",r.animate("500ms",r.style({opacity:0})))])]]}]}],(function(){return[{type:c.RegistryService},{type:d.BsModalRef},{type:d.BsModalRef}]}),null)},1084:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectTypeInputComponent=void 0;var i=n(0),r=n(2),o=(n(56),n(547)),a=n(193),l=(n(25),n(378),n(544)),s=(n(1015),n(0)),c=n(56),d=n(25),p=n(1015),u=n(1),m=n(18),g=n(88),h=n(1033),f=n(1029),y=n(546),v=n(57),b=n(162);function S(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",3),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext();s.ɵɵadvance(1),s.ɵɵtextInterpolate(n.message)}}function C(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",8),s.ɵɵelementStart(1,"div",9),s.ɵɵelement(2,"localize",44),s.ɵɵelementEnd(),s.ɵɵelementStart(3,"div",11),s.ɵɵelementStart(4,"span",12),s.ɵɵtext(5),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2);s.ɵɵadvance(5),s.ɵɵtextInterpolate1(" ",n.geoObjectType.superTypeCode," ")}}function E(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"a",48),s.ɵɵlistener("click",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext().$implicit;return s.ɵɵnextContext(2).editAttribute(t,e)})),s.ɵɵpipe(1,"localize"),s.ɵɵelementEnd()}2&e&&s.ɵɵproperty("title",s.ɵɵpipeBind1(1,1,"modal.button.edit"))}function x(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"a",49),s.ɵɵlistener("click",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext().$implicit;return s.ɵɵnextContext(2).removeAttributeType(t,e)})),s.ɵɵpipe(1,"localize"),s.ɵɵelementEnd()}2&e&&s.ɵɵproperty("title",s.ɵɵpipeBind1(1,1,"modal.button.remove"))}function O(e,t){if(1&e&&(s.ɵɵelementStart(0,"tr"),s.ɵɵelementStart(1,"td"),s.ɵɵtext(2),s.ɵɵelementEnd(),s.ɵɵelementStart(3,"td",45),s.ɵɵtemplate(4,E,2,3,"a",46),s.ɵɵtemplate(5,x,2,3,"a",47),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit;s.ɵɵadvance(2),s.ɵɵtextInterpolate(n.label.localizedValue),s.ɵɵadvance(2),s.ɵɵproperty("ngIf",!n.isDefault&&"keyName"!==n.code),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!n.isDefault&&"keyName"!==n.code)}}function I(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"i",50),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).defineAttributeModal()})),s.ɵɵelement(1,"localize",51),s.ɵɵelementEnd()}}function M(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"button",52),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).update()})),s.ɵɵelement(1,"localize",53),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2);s.ɵɵproperty("disabled",!i.isValid())}}function w(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"form",4,5),s.ɵɵlistener("ngSubmit",(function(){return s.ɵɵrestoreView(n),s.ɵɵreference(1).valid})),s.ɵɵelementStart(2,"div",6),s.ɵɵelementStart(3,"h1"),s.ɵɵelement(4,"localize",7),s.ɵɵtext(5),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(6,"fieldset"),s.ɵɵelementStart(7,"div",8),s.ɵɵelementStart(8,"div",9),s.ɵɵelementStart(9,"label"),s.ɵɵelement(10,"localize",10),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(11,"div",11),s.ɵɵelementStart(12,"span",12),s.ɵɵelementStart(13,"input",13),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().editGeoObjectType.code=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(14,"localized-input",14),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().editGeoObjectType.label=e})),s.ɵɵelementEnd(),s.ɵɵelementStart(15,"localized-text",15),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().editGeoObjectType.description=e})),s.ɵɵelementEnd(),s.ɵɵelementStart(16,"div",8),s.ɵɵelementStart(17,"div",9),s.ɵɵelementStart(18,"label"),s.ɵɵelement(19,"localize",16),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(20,"div",11),s.ɵɵelementStart(21,"boolean-field",17),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().geoObjectType.isAbstract=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(22,"div",8),s.ɵɵelementStart(23,"div",9),s.ɵɵelementStart(24,"label"),s.ɵɵelement(25,"localize",18),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(26,"div",11),s.ɵɵelementStart(27,"boolean-field",17),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().editGeoObjectType.isPrivate=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(28,C,6,1,"div",19),s.ɵɵelementStart(29,"div",8),s.ɵɵelementStart(30,"div",9),s.ɵɵelementStart(31,"label"),s.ɵɵelement(32,"localize",20),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(33,"div",11),s.ɵɵelementStart(34,"select",21),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().editGeoObjectType.geometryType=e})),s.ɵɵelement(35,"option"),s.ɵɵelementStart(36,"option",22),s.ɵɵelement(37,"localize",23),s.ɵɵelementEnd(),s.ɵɵelementStart(38,"option",24),s.ɵɵelement(39,"localize",25),s.ɵɵelementEnd(),s.ɵɵelementStart(40,"option",26),s.ɵɵelement(41,"localize",27),s.ɵɵelementEnd(),s.ɵɵelementStart(42,"option",28),s.ɵɵelement(43,"localize",29),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(44,"div",8),s.ɵɵelementStart(45,"div",9),s.ɵɵelementStart(46,"label"),s.ɵɵelement(47,"localize",30),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(48,"div",11),s.ɵɵelementStart(49,"boolean-field",17),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().editGeoObjectType.isGeometryEditable=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(50,"div",8),s.ɵɵelementStart(51,"div",9),s.ɵɵelementStart(52,"label"),s.ɵɵelement(53,"localize",31),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(54,"div",11),s.ɵɵelementStart(55,"span",12),s.ɵɵelementStart(56,"input",32),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().organizationLabel=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(57,"div",8),s.ɵɵelementStart(58,"div",9),s.ɵɵelementStart(59,"label"),s.ɵɵelement(60,"localize",33),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(61,"div",11),s.ɵɵelementStart(62,"div",34),s.ɵɵelementStart(63,"div",35),s.ɵɵelementStart(64,"div",36),s.ɵɵelementStart(65,"table",37),s.ɵɵelementStart(66,"tbody"),s.ɵɵtemplate(67,O,6,3,"tr",38),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(68,I,2,0,"i",39),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(69,"div",8),s.ɵɵelementStart(70,"div",40),s.ɵɵelementStart(71,"button",41),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext().close()})),s.ɵɵelement(72,"localize",42),s.ɵɵelementEnd(),s.ɵɵtemplate(73,M,2,1,"button",43),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext();s.ɵɵadvance(5),s.ɵɵtextInterpolate1(" : ",i.editGeoObjectType.label.localizedValue," "),s.ɵɵadvance(8),s.ɵɵproperty("ngModel",i.editGeoObjectType.code),s.ɵɵadvance(1),s.ɵɵproperty("disabled",i.readOnly)("value",i.editGeoObjectType.label),s.ɵɵadvance(1),s.ɵɵproperty("disabled",i.readOnly)("value",i.editGeoObjectType.description),s.ɵɵadvance(6),s.ɵɵproperty("disable",!0)("value",i.geoObjectType.isAbstract)("localizeLabelKey","attribute.isAbstract.label"),s.ɵɵadvance(6),s.ɵɵproperty("disable",i.readOnly||i.geoObjectType.superTypeCode)("value",i.editGeoObjectType.isPrivate)("localizeLabelKey","geoObjectType.attr.isPrivate"),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!i.geoObjectType.isAbstract&&i.geoObjectType.superTypeCode),s.ɵɵadvance(6),s.ɵɵproperty("ngModel",i.editGeoObjectType.geometryType),s.ɵɵadvance(15),s.ɵɵproperty("disable",i.readOnly)("value",i.editGeoObjectType.isGeometryEditable)("localizeLabelKey","hierarchy.management.option.label.isGeometryEditable"),s.ɵɵadvance(7),s.ɵɵproperty("ngModel",i.organizationLabel),s.ɵɵadvance(11),s.ɵɵproperty("ngForOf",i.geoObjectType.attributes),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!i.readOnly),s.ɵɵadvance(5),s.ɵɵproperty("ngIf",!i.readOnly)}}var T=function(){function e(e,t,n,r,o,a){this.bsModalRef=e,this.confirmBsModalRef=t,this.modalService=n,this.modalStepIndicatorService=r,this.localizationService=o,this.registryService=a,this.readOnly=!1,this.geoObjectTypeChange=new i.EventEmitter,this.stateChange=new i.EventEmitter,this.message=null,this.modalStepConfig={steps:[{label:this.localizationService.decode("modal.step.indicator.manage.geoobjecttype"),active:!0,enabled:!0}]}}return Object.defineProperty(e.prototype,"in",{set:function(e){e&&(this.editGeoObjectType=JSON.parse(JSON.stringify(e)))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.modalStepIndicatorService.setStepConfig(this.modalStepConfig),this.fetchOrganizationLabel()},e.prototype.defineAttributeModal=function(){this.stateChange.emit({state:l.GeoObjectTypeModalStates.defineAttribute,attribute:"",termOption:""})},e.prototype.fetchOrganizationLabel=function(){var e=this;this.registryService.getOrganizations().then((function(t){for(var n=0;n<t.length;++n)t[n].code===e.editGeoObjectType.organizationCode&&(e.organizationLabel=t[n].label.localizedValue)})).catch((function(t){e.error(t)}))},e.prototype.manageAttributes=function(){this.stateChange.emit({state:l.GeoObjectTypeModalStates.manageAttributes,attribute:"",termOption:""})},e.prototype.update=function(){var e=this;this.registryService.updateGeoObjectType(this.editGeoObjectType).then((function(t){e.geoObjectTypeChange.emit(t),e.close()})).catch((function(t){e.error(t)}))},e.prototype.close=function(){this.bsModalRef.hide()},e.prototype.isValid=function(){return!0},e.prototype.editAttribute=function(e,t){this.stateChange.emit({state:l.GeoObjectTypeModalStates.editAttribute,attribute:e,termOption:""})},e.prototype.removeAttributeType=function(e,t){var n=this;this.confirmBsModalRef=this.modalService.show(a.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.confirmBsModalRef.content.message=this.localizationService.decode("confirm.modal.verify.delete")+"["+e.label.localizedValue+"]",this.confirmBsModalRef.content.data={attributeType:e,geoObjectType:this.geoObjectType},this.confirmBsModalRef.content.submitText=this.localizationService.decode("modal.button.delete"),this.confirmBsModalRef.content.type=o.ModalTypes.danger,this.confirmBsModalRef.content.onConfirm.subscribe((function(e){n.deleteAttributeType(e.geoObjectType.code,e.attributeType)}))},e.prototype.deleteAttributeType=function(e,t){var n=this;this.registryService.deleteAttributeType(e,t.code).then((function(e){e&&n.geoObjectType.attributes.splice(n.geoObjectType.attributes.indexOf(t),1),n.geoObjectTypeChange.emit(n.geoObjectType)})).catch((function(e){n.error(e)}))},e.prototype.error=function(e){this.message=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.BsModalRef),s.ɵɵdirectiveInject(c.BsModalRef),s.ɵɵdirectiveInject(c.BsModalService),s.ɵɵdirectiveInject(d.ModalStepIndicatorService),s.ɵɵdirectiveInject(d.LocalizationService),s.ɵɵdirectiveInject(p.RegistryService))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["geoobjecttype-input"]],inputs:{readOnly:"readOnly",geoObjectType:"geoObjectType",in:["setGeoObjectType","in"]},outputs:{geoObjectTypeChange:"geoObjectTypeChange",stateChange:"stateChange"},decls:3,vars:2,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","modal-form",3,"ngSubmit",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,"heading","text-center"],["key","hierarchy.management.edit.geoobjecttype.title"],[1,"row-holder"],[1,"label-holder"],["key","data.property.label.code"],[1,"holder"],[1,"text"],["type","text","name","code","disabled","","required","",3,"ngModel","ngModelChange"],["key","data.property.label.label",3,"disabled","value","valueChange"],["key","data.property.label.description",3,"disabled","value","valueChange"],["key","attribute.group.label"],[3,"disable","value","localizeLabelKey","valueChange"],["key","geoObjectType.attr.visibility.label"],["class","row-holder",4,"ngIf"],["key","data.property.label.geometryType"],["name","geometryType","disabled","",3,"ngModel","ngModelChange"],["value","MULTIPOINT"],["key","georegistry.geometry.point"],["value","MULTILINE"],["key","georegistry.geometry.line"],["value","MULTIPOLYGON"],["key","georegistry.geometry.polygon"],["value","MIXED"],["key","georegistry.geometry.mixed"],["key","hierarchy.management.option.label.geometryEditable"],["key","attribute.organization.label"],["type","text","name","organization","disabled","","required","",3,"ngModel","ngModelChange"],["key","hierarchy.management.manage.attributes.label.displayAttributes"],[1,"panel","panel-default"],[1,"panel-body"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["class","fa fa-plus clickable","style","font-size:20px;margin:10px 0 10px 0;","aria-hidden","true",3,"click",4,"ngIf"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],["key","attribute.parentType.label"],[1,"button-column",2,"width","60px"],["class","fa fa-pencil ico-edit",3,"routerLink","title","click",4,"ngIf"],["class","fa fa-trash-o ico-remove",3,"routerLink","title","click",4,"ngIf"],[1,"fa","fa-pencil","ico-edit",3,"routerLink","title","click"],[1,"fa","fa-trash-o","ico-remove",3,"routerLink","title","click"],["aria-hidden","true",1,"fa","fa-plus","clickable",2,"font-size","20px","margin","10px 0 10px 0",3,"click"],["key","modal.button.add"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["key","modal.button.submit"]],template:function(e,t){1&e&&(s.ɵɵelementStart(0,"div",0),s.ɵɵtemplate(1,S,2,1,"div",1),s.ɵɵtemplate(2,w,74,21,"form",2),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(1),s.ɵɵproperty("ngIf",null!=t.message),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",t.editGeoObjectType))},directives:[u.NgIf,m.ɵangular_packages_forms_forms_ba,m.NgControlStatusGroup,m.NgForm,g.LocalizeComponent,m.DefaultValueAccessor,m.RequiredValidator,m.NgControlStatus,m.NgModel,h.LocalizedInputComponent,f.LocalizedTextComponent,y.BooleanFieldComponent,m.SelectControlValueAccessor,m.NgSelectOption,m.ɵangular_packages_forms_forms_z,u.NgForOf,v.RouterLinkWithHref],pipes:[b.LocalizePipe],styles:[".btn.btn-primary.full-width[_ngcontent-%COMP%] {\n    margin: 0 auto;\n    display: block;\n    width: 100%;\n}\n\n\nli.list-group-item[_ngcontent-%COMP%] {\n    font-size: inherit;\n    color: grey;\n}\nli.list-group-item[_ngcontent-%COMP%]:hover {\n    cursor: default;\n    background: white;\n}"],data:{animation:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")]),r.transition(":leave",r.animate("500ms",r.style({opacity:0})))])]]}}),e}();t.GeoObjectTypeInputComponent=T,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(T,[{type:i.Component,args:[{selector:"geoobjecttype-input",templateUrl:"./geoobjecttype-input.component.html",styleUrls:["./geoobjecttype-input.css"],animations:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")]),r.transition(":leave",r.animate("500ms",r.style({opacity:0})))])]]}]}],(function(){return[{type:c.BsModalRef},{type:c.BsModalRef},{type:c.BsModalService},{type:d.ModalStepIndicatorService},{type:d.LocalizationService},{type:p.RegistryService}]}),{readOnly:[{type:i.Input}],geoObjectType:[{type:i.Input}],geoObjectTypeChange:[{type:i.Output}],stateChange:[{type:i.Output}],in:[{type:i.Input,args:["setGeoObjectType"]}]})},1085:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectAttributeCodeValidator=void 0;var i=n(0),r=n(18),o=n(0);var a=function(){function e(){this.validator=function(e){if(e.value)return-1===e.value.indexOf(" ")?null:{geoObjectAttributeCode:{valid:!1}}}}return e.prototype.validate=function(e){return this.validator(e)},e.ɵfac=function(t){return new(t||e)},e.ɵdir=o.ɵɵdefineDirective({type:e,selectors:[["","geoObjectAttributeCode","","ngModel",""]],features:[o.ɵɵProvidersFeature([{provide:r.NG_VALIDATORS,useExisting:e,multi:!0}])]}),e}();t.GeoObjectAttributeCodeValidator=a,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(a,[{type:i.Directive,args:[{selector:"[geoObjectAttributeCode][ngModel]",providers:[{provide:r.NG_VALIDATORS,useExisting:a,multi:!0}]}]}],(function(){return[]}),null)},1086:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClassificationFieldModalComponent=void 0;var i=n(0),r=n(44),o=n(383),a=(n(293),n(193)),l=(n(1021),n(56),n(860)),s=n(0),c=n(56),d=n(293),p=n(1021),u=n(18),m=n(383),g=n(88),h=["nodeMenu"];function f(e,t){1&e&&s.ɵɵtext(0," Select ")}var y;!function(e){e[e.CLASSIFICATION=0]="CLASSIFICATION",e[e.LINK=1]="LINK"}(y||(y={}));var v=function(){function e(e,t,n){var i=this;this.bsModalRef=e,this.contextMenuService=t,this.service=n,this.message=null,this.classificationType=null,this.rootCode=null,this.disabled=!1,this.select=new r.Subject,this.nodes=[],this.options={idField:"code",getChildren:function(e){return i.getChildren(e)},actionMapping:{mouse:{click:function(e,t,n){i.treeNodeOnClick(t,n)},contextMenu:function(e,t,n){i.handleOnMenu(t,n)}}},allowDrag:!1,allowDrop:!1,animateExpand:!0,scrollOnActivate:!0,animateSpeed:2,animateAcceleration:1.01}}return e.prototype.init=function(e,t,n,i,r){var o=this;return this.classificationType=e,this.rootCode=t,this.disabled=n,null!=i?this.service.getAncestorTree(this.classificationType,this.rootCode,i.code,100).then((function(e){o.nodes=[o.build(null,e)],l.timeout((function(){var e=o.tree.treeModel.getNodeById(i.code);null!=e&&e.setActiveAndVisible()}),100)})):null!=this.rootCode?this.service.get(this.classificationType,this.rootCode).then((function(e){o.nodes=[{code:e.code,name:e.displayLabel.localizedValue,type:y.CLASSIFICATION,classification:e,hasChildren:!0}]})):this.getChildren(null).then((function(e){o.nodes=e})),this.select.subscribe(r)},e.prototype.ngOnDestroy=function(){this.select.unsubscribe()},e.prototype.getChildren=function(e){var t=this,n=null!=e?e.data:null,i=null!=n?n.classification.code:null;return this.service.getChildren(this.classificationType,i,1,100).then((function(e){var i=t.createNodes(n,e);return null!=n&&(null==n.children&&(n.children=[]),n.children.concat(i)),i})).catch((function(e){return[]}))},e.prototype.build=function(e,t){var n=this,i={code:t.classification.code,name:t.classification.displayLabel.localizedValue,type:y.CLASSIFICATION,classification:t.classification,hasChildren:!0};if(null!=t.children){var r=t.children.resultSet.map((function(t){return n.build(e,t)})),o=t.children;o.count>o.pageNumber*o.pageSize&&r.push({code:"...",name:"...",type:y.LINK,hasChildren:!1,pageNumber:o.pageNumber+1,parent:e}),i.children=r}return i},e.prototype.createNodes=function(e,t){var n=t.resultSet.map((function(e){return{code:e.code,name:e.displayLabel.localizedValue,type:y.CLASSIFICATION,classification:e,hasChildren:!0}}));return t.count>t.pageNumber*t.pageSize&&n.push({code:"...",name:"...",type:y.LINK,hasChildren:!1,pageNumber:t.pageNumber+1,parent:e}),n},e.prototype.handleOnMenu=function(e,t){this.disabled||(this.contextMenuService.show.next({contextMenu:this.nodeMenuComponent,event:t,item:e}),t.preventDefault(),t.stopPropagation())},e.prototype.treeNodeOnClick=function(e,t){var n=this,i=null!=e?e.data:null;if(null!=i&&i.type===y.LINK){if(null!=e.parent){var r=e.parent.data,o=r.classification.code,a=i.pageNumber;this.service.getChildren(this.classificationType,o,a,100).then((function(e){var t=n.createNodes(r,e);r.children=r.children.filter((function(e){return"..."!==e.code})),r.children=r.children.concat(t),n.tree.treeModel.update()})).catch((function(e){}))}}else e.isExpanded?e.collapse():e.expand(),e.setActiveAndVisible()},e.prototype.onSelect=function(e){var t=null!=e?e.data:null;t.type===y.CLASSIFICATION&&(this.select.next(t.classification),this.bsModalRef.hide())},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.BsModalRef),s.ɵɵdirectiveInject(d.ContextMenuService),s.ɵɵdirectiveInject(p.ClassificationService))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["classification-field-modal"]],viewQuery:function(e,t){if(1&e&&(s.ɵɵviewQuery(o.TreeComponent,1),s.ɵɵviewQuery(h,1)),2&e){var n=void 0;s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.tree=n.first),s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.nodeMenuComponent=n.first)}},decls:15,vars:2,consts:[["menuClass","top-level"],["nodeMenu",""],["contextMenuItem","",3,"execute"],[1,"modal-body"],[1,"modal-form"],["form","ngForm"],[1,"row"],[1,"col-md-12"],[3,"options","nodes"],["tree",""],[1,"row-holder"],[1,"button-holder"],["type","button","role","button",1,"btn","btn-default",3,"click"],["key","io.back"]],template:function(e,t){1&e&&(s.ɵɵelementStart(0,"context-menu",0,1),s.ɵɵtemplate(2,f,1,0,"ng-template",2),s.ɵɵlistener("execute",(function(e){return t.onSelect(e.item)})),s.ɵɵelementEnd(),s.ɵɵelementStart(3,"div",3),s.ɵɵelementStart(4,"form",4,5),s.ɵɵelementStart(6,"fieldset"),s.ɵɵelementStart(7,"div",6),s.ɵɵelementStart(8,"div",7),s.ɵɵelement(9,"tree-root",8,9),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(11,"div",10),s.ɵɵelementStart(12,"div",11),s.ɵɵelementStart(13,"button",12),s.ɵɵlistener("click",(function(){return t.onCancel()})),s.ɵɵelement(14,"localize",13),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(9),s.ɵɵproperty("options",t.options)("nodes",t.nodes))},directives:[d.ContextMenuComponent,d.ɵb,u.ɵangular_packages_forms_forms_ba,u.NgControlStatusGroup,u.NgForm,m.TreeComponent,g.LocalizeComponent],encapsulation:2}),e}();t.ClassificationFieldModalComponent=v,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(v,[{type:i.Component,args:[{selector:"classification-field-modal",templateUrl:"./classification-field-modal.component.html",styleUrls:[]}]}],(function(){return[{type:c.BsModalRef},{type:d.ContextMenuService},{type:p.ClassificationService}]}),{tree:[{type:i.ViewChild,args:[o.TreeComponent]}],nodeMenuComponent:[{type:i.ViewChild,args:["nodeMenu"]}]})},1087:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TermOptionWidgetComponent=void 0;var i=n(0),r=n(2),o=(n(56),n(378),n(544)),a=n(0),l=n(56),s=n(88),c=n(1);function d(e,t){if(1&e&&(a.ɵɵelementStart(0,"li",10),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.label.localizedValue)}}var p=function(){function e(e,t){this.bsModalRef=e,this.cdr=t,this.attribute=null,this.stateChange=new i.EventEmitter,this.message=null,this.state="none"}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.state="show",this.cdr.detectChanges()},e.prototype.ngOnDestroy=function(){},e.prototype.handleOnSubmit=function(){},e.prototype.animate=function(){this.state="none"},e.prototype.onAnimationDone=function(e){this.state="show"},e.prototype.openAddTermOptionForm=function(){this.stateChange.emit({state:o.GeoObjectTypeModalStates.manageTermOption,attribute:this.attribute,termOption:""})},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.BsModalRef),a.ɵɵdirectiveInject(a.ChangeDetectorRef))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["term-option-widget"]],inputs:{attribute:"attribute"},outputs:{stateChange:"stateChange"},decls:12,vars:2,consts:[[1,"row-holder"],[1,"label-holder"],["key","hierarchy.management.manage.attributes.label.displayTerms"],[1,"holder"],[1,"panel","panel-default"],[1,"panel-body"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","full-width",3,"click"],["key","modal.button.manageTermOptions"],[1,"list-group-item"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵlistener("@toggleInputs.done",(function(e){return t.onAnimationDone(e)})),a.ɵɵelementStart(1,"div"),a.ɵɵelementStart(2,"div",1),a.ɵɵelementStart(3,"label"),a.ɵɵelement(4,"localize",2),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"div",3),a.ɵɵelementStart(6,"div",4),a.ɵɵelementStart(7,"div",5),a.ɵɵelementStart(8,"ul",6),a.ɵɵtemplate(9,d,2,1,"li",7),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"button",8),a.ɵɵlistener("click",(function(){return t.openAddTermOptionForm()})),a.ɵɵelement(11,"localize",9),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵproperty("@toggleInputs",t.state),a.ɵɵadvance(9),a.ɵɵproperty("ngForOf",t.attribute.rootTerm.children))},directives:[s.LocalizeComponent,c.NgForOf],styles:['input[type="text"][_ngcontent-%COMP%] {\n    margin: 2px 0 2px 0 !important;\n    float: none !important;\n}\n\nbutton[_ngcontent-%COMP%] {\n    margin-top: 5px;\n    float: right;\n}\n\n\n\n.btn.btn-primary.full-width[_ngcontent-%COMP%] {\n    margin: 0 auto;\n    display: block;\n    width: 100%;\n}\n\nlabel[_ngcontent-%COMP%] {\n    color: #999;\n    font-weight: bold;\n}\n\n\nli.list-group-item[_ngcontent-%COMP%] {\n    font-size: inherit;\n    color: grey;\n}\nli.list-group-item[_ngcontent-%COMP%]:hover {\n    cursor: default;\n    background: white;\n}'],data:{animation:[r.trigger("toggleInputs",[r.state("none, void",r.style({opacity:0})),r.state("show",r.style({opacity:1})),r.transition("none => show",r.animate("300ms")),r.transition("show => none",r.animate("100ms"))]),r.trigger("openClose",[r.transition(":enter",[r.style({opacity:0}),r.animate("500ms",r.style({opacity:1}))]),r.transition(":leave",[r.style({opacity:1}),r.animate("0ms",r.style({opacity:0}))])])]}}),e}();t.TermOptionWidgetComponent=p,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(p,[{type:i.Component,args:[{selector:"term-option-widget",templateUrl:"./term-option-widget.component.html",styleUrls:["./term-option-widget.css"],animations:[r.trigger("toggleInputs",[r.state("none, void",r.style({opacity:0})),r.state("show",r.style({opacity:1})),r.transition("none => show",r.animate("300ms")),r.transition("show => none",r.animate("100ms"))]),r.trigger("openClose",[r.transition(":enter",[r.style({opacity:0}),r.animate("500ms",r.style({opacity:1}))]),r.transition(":leave",[r.style({opacity:1}),r.animate("0ms",r.style({opacity:0}))])])]}]}],(function(){return[{type:l.BsModalRef},{type:a.ChangeDetectorRef}]}),{attribute:[{type:i.Input}],stateChange:[{type:i.Output}]})},1088:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SvgHierarchyType=void 0;var i=n(860),r=n(1145),o=n(1061),a=n(1039),l=function(){function e(t,n,r,o,l,s,c){this.localizationService=l,this.modalService=s,this.authService=c;var d=r;this.hierarchyComponent=t,this.hierarchyType=d,this.svgEl=n,this.d3Hierarchy=i.hierarchy(d.rootGeoObjectTypes[0]),this.isPrimary=o,this.d3Tree=i.tree().nodeSize([e.gotRectW*a.TREE_SCALE_FACTOR_X,(e.gotRectH+e.gotHeaderH)*a.TREE_SCALE_FACTOR_Y]).separation((function(e,t){return.8}))(this.d3Hierarchy)}return e.prototype.getD3Tree=function(){return this.d3Tree},e.prototype.getCode=function(){return this.hierarchyType.code},e.prototype.getNodeByCode=function(e){var t=this.getD3Tree().find((function(t){return t.data.geoObjectType===e}));return null==t?null:new r.SvgHierarchyNode(this.hierarchyComponent,this,this.hierarchyComponent.findGeoObjectTypeByCode(e),t,this.localizationService,this.modalService,this.authService)},e.prototype.renderHierarchyHeader=function(t,n){var i=this,r=t.node().getBBox(),a=t.append("g").classed("g-hierarchy-header",!0),l=t.append("g").classed("g-hierarchy-header",!0),s=o.calculateTextWidth(this.hierarchyType.label.localizedValue,10),c=20,d=r.y+16;s>200&&(s=200,c=30,d=r.y+10);var p=r.width,u=s+20;u>p&&(p=u),l.append("text").classed("hierarchy-header-icon",!0).attr("x",r.x).attr("y",r.y).style("font-family","FontAwesome").attr("fill","grey").attr("font-size",12).text(""),a.append("foreignObject").classed("hierarchy-header-label",!0).attr("font-size",10).attr("stroke-linejoin","round").attr("stroke-width",3).attr("x",r.x+20).attr("y",d).attr("width",s).attr("height",c).append("xhtml:p").attr("xmlns","http://www.w3.org/1999/xhtml").attr("text-anchor","start").attr("text-align","left").style("vertical-align","middle").style("display","table-cell").style("color","gray").style("height",e.gotRectH-4+"px").html((function(e){return i.hierarchyType.label.localizedValue})),l.append("line").classed("hierarchy-header-line",!0).attr("x1",r.x).attr("y1",r.y+10).attr("x2",r.x+p).attr("y2",r.y+10).attr("stroke","grey").attr("stroke-width",.5);var m=l.node().getBBox();return l.attr("transform","translate(0 -"+m.height+")"),a.append("text").classed("hierarchy-header-label",!0).attr("font-size",12).attr("font-weight","bold").attr("stroke-linejoin","round").attr("stroke-width",3).attr("fill","grey").attr("x",r.x).attr("y",r.y).text(n),a.attr("transform","translate(0 -"+2.5*m.height+")"),l},e.prototype.getRelatedHierarchies=function(e){var t=this.hierarchyComponent.findGeoObjectTypeByCode(e);null==t.relatedHierarchies&&(t.relatedHierarchies=this.hierarchyComponent.calculateRelatedHierarchies(t));for(var n=t.relatedHierarchies,i=null,r=0;r<n.length;++r)n[r]===this.getCode()&&(i=r);return null!=i&&n.splice(i,1),n},e.prototype.nodeMouseover=function(e,t,n){i.select("#NodeTooltip").style("opacity",1)},e.prototype.nodeMousemove=function(e,t,n){i.select("#hierarchyLabel").html(this.hierarchyType.label.localizedValue),i.select("#hierarchyCodeLabel").html(this.hierarchyType.code),i.select("#geoObjectTypeLabel").html(n.data.label),i.select("#geoObjectTypeCodeLabel").html(n.data.geoObjectType),i.select("#hierarchyOrganizationLabel").html(this.hierarchyComponent.findOrganizationByCode(this.hierarchyType.organizationCode).label.localizedValue),i.select("#geoObjectTypeOrganizationLabel").html(this.hierarchyComponent.findOrganizationByCode(this.hierarchyComponent.findGeoObjectTypeByCode(n.data.geoObjectType).organizationCode).label.localizedValue);var r=i.select("#NodeTooltip").node().getBoundingClientRect(),o={x:e.pageX,y:e.pageY};e.pageY+r.height+50>document.documentElement.scrollHeight&&(o.y=e.pageY-r.height-50),e.pageX+r.width+0>document.documentElement.scrollWidth&&(o.x=e.pageX-r.width-0),i.select("#NodeTooltip").style("left",o.x+"px").style("top",o.y+"px")},e.prototype.nodeMouseleave=function(e,t,n){i.select("#NodeTooltip").style("opacity",0).style("left","-10000px").style("top","-10000px")},e.prototype.render=function(){var t=this,n=this,r=this.d3Tree.descendants();i.select('.g-hierarchy[data-primary="false"]').remove(),this.isPrimary&&i.select('.g-hierarchy[data-primary="true"]').remove();var l=this.svgEl.insert("g",".g-hierarchy").classed("g-hierarchy",!0).attr("data-code",this.hierarchyType.code).attr("data-primary",this.isPrimary);l.attr("font-family","sans-serif");var s=l.append("g").classed("g-hierarchy-tree",!0).attr("data-code",this.hierarchyType.code);s.append("g").classed("g-got-edge",!0).attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1.5).selectAll("path").data(this.d3Tree.links()).join("path").attr("d",(function(e,t){return"M"+e.source.x+","+e.source.y+"V"+(e.source.y+e.target.y)/2+"H"+e.target.x+"V"+e.target.y}));var c=s.append("g").classed("g-got-header",!0);c.selectAll("rect").data(r).join("rect").filter((function(e){return"GhostNode"!==e.data.geoObjectType})).classed("svg-got-header-rect",!0).attr("x",(function(t){return t.x-e.gotRectW/2})).attr("y",(function(t){return t.y-e.gotRectH/2-e.gotHeaderH+4})).attr("fill",(function(e){return t.isPrimary?null!=e.data.inheritedHierarchyCode?a.INHERITED_NODE_BANNER_COLOR:a.DEFAULT_NODE_BANNER_COLOR:a.RELATED_NODE_BANNER_COLOR})).attr("width",e.gotHeaderW).attr("height",e.gotHeaderH).attr("cursor",(function(e){return t.isPrimary?null!=e.data.inheritedHierarchyCode?null:"grab":null})).attr("rx",3).attr("data-gotCode",(function(e){return e.data.geoObjectType})).attr("data-inherited",(function(e){return null!=e.data.inheritedHierarchyCode})).on(e.MOUSE_HOVER_EVENT_ENTER,(function(e,t){n.nodeMouseover(e,this,t)})).on(e.MOUSE_HOVER_EVENT_MOVE,(function(e,t){n.nodeMousemove(e,this,t)})).on(e.MOUSE_HOVER_EVENT_EXIT,(function(e,t){n.nodeMouseleave(e,this,t)})),c.selectAll("foreignObject").data(r).join("foreignObject").filter((function(e){return"GhostNode"!==e.data.geoObjectType})).classed("svg-got-header-rect",!0).attr("x",(function(t){return t.x-e.gotHeaderW/2})).attr("y",(function(t){return t.y-e.gotRectH/2-e.gotHeaderH+4})).attr("font-size",e.gotHeaderFontSize+"px").attr("cursor",(function(e){return t.isPrimary?null!=e.data.inheritedHierarchyCode?null:"grab":null})).attr("data-gotCode",(function(e){return e.data.geoObjectType})).attr("data-inherited",(function(e){return null!=e.data.inheritedHierarchyCode})).attr("font-family","sans-serif").attr("font-weight","bold").attr("font-size",e.gotHeaderFontSize).attr("stroke-linejoin","round").attr("stroke-width",3).attr("width",e.gotHeaderW).attr("height",e.gotHeaderH-4).append("xhtml:p").attr("xmlns","http://www.w3.org/1999/xhtml").attr("fill","white").attr("height",e.gotHeaderH-4).style("text-align","center").style("vertical-align","middle").style("display","table-cell").style("color","white").style("height",e.gotHeaderH-4+"px").style("width",e.gotHeaderW+"px").html((function(t){var i=null!=t.data.inheritedHierarchyCode?n.hierarchyComponent.findHierarchyByCode(t.data.inheritedHierarchyCode).label.localizedValue:n.hierarchyType.label.localizedValue;return!(o.calculateTextWidth(i,e.gotHeaderFontSize)>e.gotHeaderW-5)||(i=i.substring(0,34)+"..."),i})).on(e.MOUSE_HOVER_EVENT_ENTER,(function(e,t){n.nodeMouseover(e,this,t)})).on(e.MOUSE_HOVER_EVENT_MOVE,(function(e,t){n.nodeMousemove(e,this,t)})).on(e.MOUSE_HOVER_EVENT_EXIT,(function(e,t){n.nodeMouseleave(e,this,t)})),s.append("g").classed("g-got",!0).selectAll("rect").data(r).join("rect").filter((function(e){return"GhostNode"!==e.data.geoObjectType})).classed("svg-got-body-rect",!0).attr("x",(function(t){return t.x-e.gotRectW/2})).attr("y",(function(t){return t.y-e.gotRectH/2})).attr("fill",(function(e){return null!=e.data.inheritedHierarchyCode?a.INHERITED_NODE_FILL:a.DEFAULT_NODE_FILL})).attr("width",e.gotRectW).attr("height",e.gotRectH).attr("rx",3).attr("cursor",(function(e){return t.isPrimary?null!=e.data.inheritedHierarchyCode?null:"grab":null})).attr("data-gotCode",(function(e){return e.data.geoObjectType})).attr("data-inherited",(function(e){return null!=e.data.inheritedHierarchyCode})).each((function(t){"GhostNode"!==t.data.geoObjectType&&(t.data.activeDropZones?t.data.dropZoneBbox={x:t.x-e.gotRectW/2,y:t.y-2*e.gotRectH,width:2*e.gotRectW+100,height:4*e.gotRectH}:t.data.dropZoneBbox={x:t.x-e.gotRectW/2,y:t.y-e.gotRectH/2,width:e.gotRectW,height:e.gotRectH})})).on(e.MOUSE_HOVER_EVENT_ENTER,(function(e,t){n.nodeMouseover(e,this,t)})).on(e.MOUSE_HOVER_EVENT_MOVE,(function(e,t){n.nodeMousemove(e,this,t)})).on(e.MOUSE_HOVER_EVENT_EXIT,(function(e,t){n.nodeMouseleave(e,this,t)}));var d=7,p=10,u=s.append("g").classed("g-got-connector-arrow",!0);u.selectAll("rect").data(this.d3Tree.links()).join("rect").classed("got-connector-arrow-rect",!0).attr("x",(function(e){return e.source.x-p/2})).attr("y",(function(t){return t.source.y+e.gotRectH/2-d/2})).attr("width",p).attr("height",d).attr("fill",(function(e){return t.isPrimary?null!=e.source.data.inheritedHierarchyCode?a.INHERITED_NODE_BANNER_COLOR:a.DEFAULT_NODE_BANNER_COLOR:a.RELATED_NODE_BANNER_COLOR})),u.selectAll("path").data(this.d3Tree.links()).join("path").classed("got-connector-arrow-path",!0).attr("fill","none").attr("stroke","white").attr("stroke-width",1.5).attr("d",(function(t){return"M"+(t.source.x-p/2+2*p/3)+","+(t.source.y+e.gotRectH/2-d/2+2*d/3)+"L"+t.source.x+","+(t.source.y+e.gotRectH/2-d/2+d/3)+"L"+(t.source.x-p/2+p/3)+","+(t.source.y+e.gotRectH/2+d/2-d/3)})),s.append("g").classed("g-sibling-ghost-backer",!0).selectAll("rect").data(r).join("rect").filter((function(e){return"GhostNode"===e.data.geoObjectType})).classed("svg-sibling-ghost-backer-dz",!0).attr("x",(function(t){return t.x-e.gotRectW/2})).attr("y",(function(t){return t.y-e.gotRectH/2})).attr("width",e.gotRectW).attr("height",e.gotRectH).attr("fill","white"),s.append("g").classed("g-sibling-ghost-body",!0).selectAll("rect").data(r).join("rect").filter((function(e){return"GhostNode"===e.data.geoObjectType})).classed("svg-sibling-ghost-body-dz",!0).attr("x",(function(t){return t.x-e.gotRectW/2})).attr("y",(function(t){return t.y-e.gotRectH/2})).attr("width",e.gotRectW).attr("height",e.gotRectH).attr("fill","none").attr("stroke","#6BA542").attr("stroke-width","1").attr("stroke-dasharray","5,5").attr("data-gotCode",(function(e){return e.data.geoObjectType})),s.append("g").classed("g-got-codelabel",!0).attr("font-family","sans-serif").attr("font-size",e.gotBodyFontSize).attr("stroke-linejoin","round").attr("stroke-width",3).selectAll("foreignObject").data(r).join("foreignObject").classed("svg-got-label-text",!0).attr("x",(function(t){return t.x-e.gotRectW/2+5})).attr("y",(function(t){return t.y-e.gotRectH/2+2})).attr("width",e.gotRectW-32+5).attr("height",e.gotRectH-4).attr("cursor",(function(e){return t.isPrimary?null!=e.data.inheritedHierarchyCode?null:"grab":null})).attr("data-gotCode",(function(e){return e.data.geoObjectType})).attr("data-inherited",(function(e){return null!=e.data.inheritedHierarchyCode})).append("xhtml:p").attr("xmlns","http://www.w3.org/1999/xhtml").attr("text-anchor","start").attr("text-align","left").style("vertical-align","middle").style("display","table-cell").style("width",e.gotRectW-32+5+"px").style("height",e.gotRectH-4+"px").html((function(e){return e.data.label})).on(e.MOUSE_HOVER_EVENT_ENTER,(function(e,t){n.nodeMouseover(e,this,t)})).on(e.MOUSE_HOVER_EVENT_MOVE,(function(e,t){n.nodeMousemove(e,this,t)})).on(e.MOUSE_HOVER_EVENT_EXIT,(function(e,t){n.nodeMouseleave(e,this,t)})),this.isPrimary?(s.append("g").classed("g-got-relatedhiers-button",!0).selectAll("text").data(r).join("text").filter((function(e){return"GhostNode"!==e.data.geoObjectType&&null==e.data.inheritedHierarchyCode})).classed("svg-got-relatedhiers-button",!0).attr("data-gotCode",(function(e){return e.data.geoObjectType})).attr("x",(function(t){return t.x+e.gotRectW/2-e.gotOptionsButtonFontSize-3})).attr("y",(function(t){return t.y+.8*e.gotOptionsButtonFontSize-e.gotOptionsButtonFontSize/2})).style("font-family","FontAwesome").style("cursor","pointer").style("fill","#767676").style("font-size",e.gotOptionsButtonFontSize+"px").text("").on("click",(function(e,t){n.getNodeByCode(t.data.geoObjectType).renderRelatedHierarchiesMenu()})),this.renderHierarchyHeader(l,"Selected Hierarchy")):this.renderHierarchyHeader(l,"Related Hierarchy")},e.gotRectW=150,e.gotRectH=25,e.gotBodyFontSize=8,e.gotOptionsButtonFontSize=12,e.gotHeaderW=150,e.gotHeaderH=14,e.gotHeaderFontSize=8,e.MOUSE_HOVER_EVENT_ENTER="mouseenter",e.MOUSE_HOVER_EVENT_MOVE="mousemove",e.MOUSE_HOVER_EVENT_EXIT="mouseleave",e}();t.SvgHierarchyType=l},1089:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipVisualizerComponent=t.DIMENSIONS=t.COLLAPSE_ANIMATION_TIME=t.GRAPH_LINE_COLOR=t.GRAPH_CIRCLE_FILL=t.GRAPH_GO_LABEL_COLOR=t.SELECTED_NODE_COLOR=t.DRAW_SCALE_MULTIPLIER=void 0;var i=n(0),r=(n(56),n(193)),o=n(44),a=(n(1026),n(864)),l=n(1146),s=n(391),c=(n(856),n(544)),d=n(859),p=(n(1022),n(1015),n(57),n(857)),u=n(1020),m=n(0),g=n(56),h=n(856),f=n(1026),y=n(1022),v=n(1015),b=n(57),S=n(1),C=n(546),E=n(18),x=n(864);function O(e,t){1&e&&m.ɵɵelement(0,"option")}function I(e,t){if(1&e&&(m.ɵɵelementStart(0,"option",11),m.ɵɵtext(1),m.ɵɵelementEnd()),2&e){var n=t.$implicit;m.ɵɵproperty("value",n.oid),m.ɵɵadvance(1),m.ɵɵtextInterpolate(n.label.localizedValue)}}function M(e,t){if(1&e){var n=m.ɵɵgetCurrentView();m.ɵɵelementStart(0,"select",9),m.ɵɵlistener("ngModelChange",(function(e){return m.ɵɵrestoreView(n),m.ɵɵnextContext(2).graphOid=e}))("change",(function(){return m.ɵɵrestoreView(n),m.ɵɵnextContext(2).onSelectRelationship(!0)})),m.ɵɵtemplate(1,O,1,0,"option",8),m.ɵɵtemplate(2,I,2,2,"option",10),m.ɵɵelementEnd()}if(2&e){var i=m.ɵɵnextContext(2);m.ɵɵproperty("ngModel",i.graphOid),m.ɵɵadvance(1),m.ɵɵproperty("ngIf",0===i.relationships.length),m.ɵɵadvance(1),m.ɵɵproperty("ngForOf",i.relationships)}}var w=function(e){return{background:e}};function T(e,t){if(1&e&&(m.ɵɵelementStart(0,"div",12),m.ɵɵelement(1,"div",13),m.ɵɵelementStart(2,"label"),m.ɵɵtext(3),m.ɵɵelementEnd(),m.ɵɵelementEnd()),2&e){var n=t.$implicit;m.ɵɵadvance(1),m.ɵɵproperty("ngStyle",m.ɵɵpureFunction1(2,w,n.value.color)),m.ɵɵadvance(2),m.ɵɵtextInterpolate(n.value.label)}}function k(e,t){1&e&&(m.ɵɵelementContainerStart(0),m.ɵɵnamespaceSVG(),m.ɵɵelementStart(1,"marker",21),m.ɵɵelement(2,"path",22),m.ɵɵelementEnd(),m.ɵɵelementContainerEnd())}function P(e,t){if(1&e&&m.ɵɵtemplate(0,k,3,0,"ng-container",8),2&e){var n=m.ɵɵnextContext(4);m.ɵɵproperty("ngIf","UndirectedGraphType"!==n.relationship.type)}}function j(e,t){if(1&e&&(m.ɵɵnamespaceSVG(),m.ɵɵelement(0,"polygon")),2&e){var n=m.ɵɵnextContext().$implicit,i=m.ɵɵnextContext(4);m.ɵɵattribute("points",i.getHexagonPoints(n))("fill",null==i.params.code?n.data.color:i.typeLegend[n.typeCode].color)}}function z(e,t){if(1&e&&(m.ɵɵnamespaceSVG(),m.ɵɵelement(0,"rect")),2&e){var n=m.ɵɵnextContext().$implicit,i=m.ɵɵnextContext(4);m.ɵɵattribute("width",i.DIMENSIONS.NODE.WIDTH)("height",i.DIMENSIONS.NODE.HEIGHT)("y",i.DIMENSIONS.NODE.HEIGHT/2)("x","VERTICAL"===i.relationship.layout?"CHILD"===n.relation?i.DIMENSIONS.LABEL.WIDTH/2-i.DIMENSIONS.NODE.WIDTH/2:(i.DIMENSIONS.LABEL.WIDTH+i.DIMENSIONS.PADDING.NODE_LABEL+i.DIMENSIONS.NODE.WIDTH)/2-i.DIMENSIONS.NODE.WIDTH/2:"PARENT"===n.relation?i.DIMENSIONS.LABEL.WIDTH+i.DIMENSIONS.PADDING.NODE_LABEL+i.DIMENSIONS.PADDING.NODE_EDGE:i.DIMENSIONS.PADDING.NODE_EDGE)("fill",null==i.params.code?n.data.color:i.typeLegend[n.typeCode].color)}}var D=function(e,t,n){return{"text-align":e,color:t,"font-weight":n}};function R(e,t){if(1&e){var n=m.ɵɵgetCurrentView();m.ɵɵnamespaceSVG(),m.ɵɵelementStart(0,"g",23),m.ɵɵlistener("click",(function(){m.ɵɵrestoreView(n);var e=t.$implicit;return m.ɵɵnextContext(4).onClickNode(e)})),m.ɵɵtemplate(1,j,1,2,"polygon",8),m.ɵɵtemplate(2,z,1,5,"rect",8),m.ɵɵelementStart(3,"foreignObject"),m.ɵɵnamespaceHTML(),m.ɵɵelementStart(4,"span"),m.ɵɵelementStart(5,"p",24),m.ɵɵtext(6),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=m.ɵɵnextContext(4);m.ɵɵstyleProp("cursor","SELECTED"===i.relation?"default":"pointer"),m.ɵɵadvance(1),m.ɵɵproperty("ngIf","GEOOBJECT"===i.objectType),m.ɵɵadvance(1),m.ɵɵproperty("ngIf","BUSINESS"===i.objectType),m.ɵɵadvance(1),m.ɵɵattribute("x","VERTICAL"===r.relationship.layout?"CHILD"===i.relation?0:(r.DIMENSIONS.LABEL.WIDTH+r.DIMENSIONS.PADDING.NODE_LABEL+r.DIMENSIONS.NODE.WIDTH)/2+r.DIMENSIONS.NODE.WIDTH/2+r.DIMENSIONS.PADDING.NODE_LABEL:"PARENT"===i.relation?r.DIMENSIONS.PADDING.NODE_LABEL:(i.relation,r.DIMENSIONS.NODE.WIDTH+r.DIMENSIONS.PADDING.NODE_LABEL+r.DIMENSIONS.PADDING.NODE_EDGE))("y","VERTICAL"===r.relationship.layout?"CHILD"===i.relation?r.DIMENSIONS.NODE.HEIGHT+r.DIMENSIONS.PADDING.NODE_LABEL:0:(i.relation,0))("width","VERTICAL"===r.relationship.layout?(i.relation,r.DIMENSIONS.LABEL.WIDTH):r.DIMENSIONS.LABEL.WIDTH+8*r.DIMENSIONS.PADDING.NODE_LABEL)("height",r.DIMENSIONS.LABEL.HEIGHT),m.ɵɵadvance(1),m.ɵɵstyleMap("width:"+r.DIMENSIONS.LABEL.WIDTH+"px; height:"+r.DIMENSIONS.LABEL.HEIGHT+"px; overflow:hidden; display: inline-block;"),m.ɵɵadvance(1),m.ɵɵstyleMap("font-size: "+r.DIMENSIONS.LABEL.FONTSIZE+"px; display: table-cell; vertical-align: middle; height:"+r.DIMENSIONS.LABEL.HEIGHT+"px; width:"+r.DIMENSIONS.LABEL.WIDTH+"px; line-height:"+r.DIMENSIONS.LABEL.FONTSIZE+"px;"),m.ɵɵproperty("ngStyle",m.ɵɵpureFunction3(14,D,"VERTICAL"===r.relationship.layout?"CHILD"===i.relation?"center":"left":"SELECTED"===i.relation?"left":"PARENT"===i.relation?"right":"left","SELECTED"===i.relation?r.SELECTED_NODE_COLOR:"unset","g-"+r.params.uid===i.id?"bold":"unset")),m.ɵɵadvance(1),m.ɵɵtextInterpolate1(" ",i.label,"")}}function L(e,t){1&e&&(m.ɵɵnamespaceSVG(),m.ɵɵelementStart(0,"g",25),m.ɵɵelement(1,"path",26),m.ɵɵelementEnd())}var _=function(e,t){return[e,t]},A=function(e){return{orientation:e}};function N(e,t){if(1&e&&(m.ɵɵelementStart(0,"ngx-graph",17),m.ɵɵtemplate(1,P,1,1,"ng-template",null,18,m.ɵɵtemplateRefExtractor),m.ɵɵtemplate(3,R,7,18,"ng-template",null,19,m.ɵɵtemplateRefExtractor),m.ɵɵtemplate(5,L,2,0,"ng-template",null,20,m.ɵɵtemplateRefExtractor),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(3);m.ɵɵproperty("view",m.ɵɵpureFunction2(12,_,n.svgWidth,n.svgHeight))("links",n.data.edges)("nodes",n.data.verticies)("animate",!1)("autoZoom",!0)("autoCenter",!0)("layout",n.layout)("layoutSettings",m.ɵɵpureFunction1(15,A,"VERTICAL"===n.relationship.layout?n.CONSTANTS.ORIENTATION.TOP_TO_BOTTOM:n.CONSTANTS.ORIENTATION.LEFT_TO_RIGHT))("curve",n.curve)("draggingEnabled",!1)("panToNode$",n.panToNode$)("update$",n.update$)}}function V(e,t){if(1&e&&(m.ɵɵelementStart(0,"div"),m.ɵɵelementStart(1,"div",14),m.ɵɵelementStart(2,"div",15),m.ɵɵtemplate(3,N,7,17,"ngx-graph",16),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementEnd()),2&e){var n=m.ɵɵnextContext(2);m.ɵɵadvance(3),m.ɵɵproperty("ngIf",n.data)}}function F(e,t){if(1&e){var n=m.ɵɵgetCurrentView();m.ɵɵelementStart(0,"div",1),m.ɵɵelement(1,"ngx-spinner",2),m.ɵɵelementStart(2,"div"),m.ɵɵtemplate(3,M,3,3,"select",3),m.ɵɵelementStart(4,"div",4),m.ɵɵelementStart(5,"boolean-field",5),m.ɵɵlistener("valueChange",(function(e){return m.ɵɵrestoreView(n),m.ɵɵnextContext().restrictToMapBounds=e}))("change",(function(){return m.ɵɵrestoreView(n),m.ɵɵnextContext().fetchData()})),m.ɵɵelementEnd(),m.ɵɵelementEnd(),m.ɵɵelementStart(6,"div",6),m.ɵɵtemplate(7,T,4,4,"div",7),m.ɵɵpipe(8,"keyvalue"),m.ɵɵelementEnd(),m.ɵɵtemplate(9,V,4,1,"div",8),m.ɵɵelementEnd(),m.ɵɵelementEnd()}if(2&e){var i=m.ɵɵnextContext();m.ɵɵadvance(1),m.ɵɵproperty("fullScreen",!1)("name",i.CONSTANTS.OVERLAY),m.ɵɵadvance(2),m.ɵɵproperty("ngIf",i.relationships),m.ɵɵadvance(2),m.ɵɵproperty("value",i.restrictToMapBounds),m.ɵɵadvance(2),m.ɵɵproperty("ngForOf",m.ɵɵpipeBind1(8,6,i.typeLegend)),m.ɵɵadvance(2),m.ɵɵproperty("ngIf",i.relationships)}}t.DRAW_SCALE_MULTIPLIER=1,t.SELECTED_NODE_COLOR="#4287f5",t.GRAPH_GO_LABEL_COLOR="black",t.GRAPH_CIRCLE_FILL="#999",t.GRAPH_LINE_COLOR="#999",t.COLLAPSE_ANIMATION_TIME=500,t.DIMENSIONS={NODE:{WIDTH:30,HEIGHT:30},LABEL:{WIDTH:100,HEIGHT:60,FONTSIZE:14},PADDING:{BETWEEN_NODES:0,NODE_LABEL:5,NODE_EDGE:5}};var H=function(){function e(e,n,r,d,p,u,m){this.modalService=e,this.spinner=n,this.vizService=r,this.cacheService=d,this.geomService=p,this.router=u,this.route=m,this.CONSTANTS={OVERLAY:c.OverlayerIdentifier.VISUALIZER_PANEL,ORIENTATION:a.Orientation},this.params={},this.nodeSelect=new i.EventEmitter,this.changeRelationship=new i.EventEmitter,this.DIMENSIONS=t.DIMENSIONS,this.SELECTED_NODE_COLOR=t.SELECTED_NODE_COLOR,this.svgHeight=null,this.svgWidth=null,this.panToNode$=new o.Subject,this.update$=new o.Subject,this.layout=new l.DagreNodesOnlyLayout,this.curve=s.curveLinear,this.typeLegend={},this.relationship=null,this.data=null,this.panelOpen=!0,this.loading=!0,this.restrictToMapBounds=!1}return e.prototype.ngOnInit=function(){var e=this;this.typeCache=this.cacheService.getTypeCache(),this.queryParamSub=this.route.queryParams.subscribe((function(t){e.queryParamChanges(t)})),window.setTimeout((function(){e.loading=!1,e.queryParamChanges(e.params)}),10)},e.prototype.ngOnDestroy=function(){this.queryParamSub.unsubscribe()},e.prototype.queryParamChanges=function(e){var t=this;if(null!=e.type&&null!=e.code){var n=JSON.parse(JSON.stringify(e)),i=JSON.parse(JSON.stringify(this.params));this.params=n,this.panelOpen="true"===n.graphPanelOpen,n.graphOid&&n.graphOid!==i.graphOid&&null!=this.relationships&&(this.relationship=this.relationships[this.relationships.findIndex((function(e){return e.oid===t.graphOid}))]),this.loading||(null==this.relationships||null==this.relationship||n.objectType!==i.objectType||n.type!==i.type?(this.relationships=null,this.graphOid=null,this.data=null,this.fetchRelationships()):null!=this.relationships&&this.relationship&&(this.restrictToMapBounds&&n.bounds!==i.bounds||n.code!==i.code||n.date!==i.date||n.uid!==i.uid||n.graphOid!==i.graphOid)&&this.fetchData()),this.panelOpen&&window.setTimeout((function(){t.resizeDimensions()}),1)}},e.prototype.resizeDimensions=function(){var e=document.getElementById("graph-container");e&&(this.svgHeight=e.clientHeight-50,this.svgWidth=e.clientWidth)},e.prototype.getHexagonPoints=function(e){var n=this.DIMENSIONS.LABEL.HEIGHT/2-this.DIMENSIONS.NODE.HEIGHT/2,i="VERTICAL"===this.relationship.layout?"CHILD"===e.relation?this.DIMENSIONS.LABEL.WIDTH/2-this.DIMENSIONS.NODE.WIDTH/2:(this.DIMENSIONS.LABEL.WIDTH+t.DIMENSIONS.PADDING.NODE_LABEL+this.DIMENSIONS.NODE.WIDTH)/2-this.DIMENSIONS.NODE.WIDTH/2:"PARENT"===e.relation?this.DIMENSIONS.LABEL.WIDTH+this.DIMENSIONS.PADDING.NODE_LABEL+this.DIMENSIONS.PADDING.NODE_EDGE:0,r=this.DIMENSIONS.NODE.WIDTH/2,o=this.DIMENSIONS.NODE.HEIGHT,a=this.DIMENSIONS.NODE.WIDTH;return[0,1,2,3,4,5,6].map((function(e,t){var l=60*t-30,s=Math.PI/180*l;return[a/2+r*Math.cos(s)+i,o/2+r*Math.sin(s)+n]})).map((function(e){return e.join(",")})).join(" ")},e.prototype.fetchRelationships=function(){var e=this;null!=this.params.type&&(this.relationships=[],this.spinner.show(this.CONSTANTS.OVERLAY),this.vizService.relationships(this.params.objectType,this.params.type).then((function(t){e.relationships=t,e.relationships&&e.relationships.length>0?e.params.graphOid&&-1!==e.relationships.findIndex((function(t){return t.oid===e.params.graphOid}))?(e.relationship=e.relationships[e.relationships.findIndex((function(t){return t.oid===e.params.graphOid}))],e.graphOid=e.params.graphOid,e.fetchData()):(null!=e.relationship&&"BUSINESS"===e.relationship.code&&"BUSINESS"===e.params.objectType&&-1!==e.relationships.findIndex((function(e){return"GEOOBJECT"===e.code}))?e.relationship=e.relationships[e.relationships.findIndex((function(e){return"GEOOBJECT"===e.code}))]:null!=e.relationship&&"GEOOBJECT"===e.relationship.code&&"GEOOBJECT"===e.params.objectType&&-1!==e.relationships.findIndex((function(e){return"BUSINESS"===e.code}))?e.relationship=e.relationships[e.relationships.findIndex((function(e){return"BUSINESS"===e.code}))]:e.relationship=e.relationships[0],e.graphOid=e.relationship.oid,e.onSelectRelationship(!0)):e.relationship=null})).catch((function(t){e.error(t)})).finally((function(){e.spinner.hide(e.CONSTANTS.OVERLAY)})))},e.prototype.onSelectRelationship=function(e){var t=this;this.relationship=this.relationships[this.relationships.findIndex((function(e){return e.oid===t.graphOid}))],this.changeRelationship.emit(this.graphOid),e&&this.router.navigate([],{relativeTo:this.route,queryParams:{graphOid:this.graphOid},queryParamsHandling:"merge"})},e.prototype.fetchData=function(){var e=this;if(null!=this.relationship){this.spinner.show(this.CONSTANTS.OVERLAY);var t={code:this.params.code,typeCode:this.params.type,objectType:this.params.objectType};this.vizService.tree(this.relationship.type,this.relationship.code,t,this.params.date,this.getBoundsAsWKT()).then((function(t){e.data=null,window.setTimeout((function(){e.data=t,e.resizeDimensions(),e.calculateTypeLegend(e.data.relatedTypes),e.addLayers(e.data.relatedTypes)}),0),e.resizeDimensions()})).finally((function(){e.spinner.hide(e.CONSTANTS.OVERLAY)}))}},e.prototype.addLayers=function(e){var t=this;if("BUSINESS"===this.relationship.type||"BUSINESS"===this.params.objectType&&"GEOOBJECT"!==this.relationship.type){var n=this.geomService.getLayers().filter((function(e){return e.getPinned()||e.dataSource.getDataSourceType()!==u.RELATIONSHIP_VISUALIZER_DATASOURCE_TYPE}));this.geomService.setLayers(n)}else{var i=this.geomService.getLayers(),r={code:this.params.code,typeCode:this.params.type,objectType:this.params.objectType},o=this.restrictToMapBounds?this.params.bounds:null,a=new u.RelationshipVisualizionDataSource(this.vizService,this.geomService,this.relationship.type,this.relationship.code,r,o,this.params.date);i=i.filter((function(n){return n.getPinned()||n.dataSource.getDataSourceType()!==u.RELATIONSHIP_VISUALIZER_DATASOURCE_TYPE||n.dataSource.getRelationshipCode()===t.relationship.code&&n.dataSource.getRelationshipType()===t.relationship.type&&-1!==e.map((function(e){return e.code})).indexOf(n.getRelatedTypeFilter())}));for(var l={},s=0;s<i.length;++s)if(i[s].dataSource.getDataSourceType()===u.RELATIONSHIP_VISUALIZER_DATASOURCE_TYPE){var c=i[s];l[c.getRelatedTypeFilter()]={index:s,layer:c}}e.forEach((function(e){if("GEOOBJECT"===e.objectType){var n=a.createLayer(t.relationship.label.localizedValue+" "+e.label,!0,t.typeLegend[e.code].color);if(n.setRelatedTypeFilter(e.code),-1===i.findIndex((function(e){return e.getKey()===n.getKey()}))){var r=l[e.code];null==r||r.layer.getPinned()?i.push(n):(n.rendered=r.layer.rendered,i.splice(r.index,1,n))}}})),this.geomService.setLayers(i)}},e.prototype.getBoundsAsWKT=function(){var e=null;if(null!=this.params.bounds&&this.restrictToMapBounds){var t=new p.LngLatBounds(JSON.parse(this.params.bounds));e=this.convertBoundsToWKT(t)}return e},e.prototype.convertBoundsToWKT=function(e){var t=e.getSouthEast(),n=e.getSouthWest(),i=e.getNorthWest(),r=e.getNorthEast();return"POLYGON (("+t.lng+" "+t.lat+","+n.lng+" "+n.lat+","+i.lng+" "+i.lat+","+r.lng+" "+r.lat+","+t.lng+" "+t.lat+"))"},e.prototype.calculateTypeLegend=function(e){var n=this,i=this.typeLegend;this.typeLegend={};var r=this.geomService.getLayers();e.forEach((function(e){if(!n.typeLegend[e.code]){var t=void 0,o=r.findIndex((function(t){return t instanceof u.RelationshipVisualizionLayer&&t.getRelatedTypeFilter()===e.code}));t=-1!==o?r[o].color:null!=i&&null!=i[e.code]?i[e.code].color:d().hexString(),n.typeLegend[e.code]={color:t,label:e.label}}})),this.typeLegend[this.params.type]||(this.typeLegend[this.params.type]={color:t.SELECTED_NODE_COLOR,label:this.params.type})},e.prototype.collapseAnimation=function(e){var n=this;if(!this.params.type)return new Promise((function(e,t){e()}));var i=document.getElementById(e);if(!i)return new Promise((function(e,t){e()}));var r=this.getBBox(i,!0),o=document.querySelectorAll("g.nodes > g");return o.forEach((function(e){if(e.id!==i.id){var o=n.getBBox(e,!1),a=document.createElementNS("http://www.w3.org/2000/svg","animateTransform");a.setAttribute("attributeName","transform"),a.setAttribute("attributeType","XML"),a.setAttribute("type","translate"),a.setAttribute("fill","freeze"),a.setAttribute("to",r.x-o.x+" "+(r.y-o.y)),a.setAttribute("begin","indefinite"),a.setAttribute("additive","replace"),a.setAttribute("dur",t.COLLAPSE_ANIMATION_TIME+"ms"),a.setAttribute("repeatCount","0"),e.appendChild(a),a.beginElement()}})),document.querySelectorAll("g.links > g").forEach((function(e){e.remove()})),new Promise((function(e,n){setTimeout((function(){o.forEach((function(e){e.id!==i.id&&e.remove()})),e()}),t.COLLAPSE_ANIMATION_TIME)}))},e.prototype.getBBox=function(e,t){if(void 0===t&&(t=!0),!t)return e.getBBox();var n=e.cloneNode(!0),i=document.createElementNS("http://www.w3.org/2000/svg","g");document.querySelector("svg").appendChild(i),i.appendChild(n);var r=i.getBBox();return n.remove(),i.remove(),r},e.prototype.onClickNode=function(e){var t=this;if(e.code!==this.params.code||e.typeCode!==this.params.type){this.nodeSelect.emit({objectType:e.objectType,id:e.id.substring(2),code:e.code,typeCode:e.typeCode,label:e.label,selectAnimation:function(n){t.collapseAnimation(e.id).then((function(){n()}))}})}},e.prototype.error=function(e){r.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(m.ɵɵdirectiveInject(g.BsModalService),m.ɵɵdirectiveInject(h.NgxSpinnerService),m.ɵɵdirectiveInject(f.RelationshipVisualizationService),m.ɵɵdirectiveInject(y.RegistryCacheService),m.ɵɵdirectiveInject(v.GeometryService),m.ɵɵdirectiveInject(b.Router),m.ɵɵdirectiveInject(b.ActivatedRoute))},e.ɵcmp=m.ɵɵdefineComponent({type:e,selectors:[["relationship-visualizer"]],outputs:{nodeSelect:"nodeSelect",changeRelationship:"changeRelationship"},decls:1,vars:1,consts:[["id","relationship-visualizer-root-node","style","height:100%; overflow:hidden;",4,"ngIf"],["id","relationship-visualizer-root-node",2,"height","100%","overflow","hidden"],["type","ball-clip-rotate-multiple","size","medium",3,"fullScreen","name"],["id","relationshipId","name","relationshipId","class","select-area","required","","style","margin:10px;width:auto;min-width:200px;",3,"ngModel","ngModelChange","change",4,"ngIf"],[2,"padding-top","20px"],["localizeLabelKey","graph.visualizer.restrictToMapBounds",3,"value","valueChange","change"],[1,"legend"],["class","legend-item",4,"ngFor","ngForOf"],[4,"ngIf"],["id","relationshipId","name","relationshipId","required","",1,"select-area",2,"margin","10px","width","auto","min-width","200px",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"legend-item"],[1,"square",3,"ngStyle"],[1,"hierarchy-content"],["id","graph-container"],["class","chart-container",3,"view","links","nodes","animate","autoZoom","autoCenter","layout","layoutSettings","curve","draggingEnabled","panToNode$","update$",4,"ngIf"],[1,"chart-container",3,"view","links","nodes","animate","autoZoom","autoCenter","layout","layoutSettings","curve","draggingEnabled","panToNode$","update$"],["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node",3,"click"],["xmlns","http://www.w3.org/1999/xhtml","text-anchor","start",3,"ngStyle"],[1,"edge"],["stroke-width","2","marker-end","url(#arrow)",1,"line"]],template:function(e,t){1&e&&m.ɵɵtemplate(0,F,10,8,"div",0),2&e&&m.ɵɵproperty("ngIf",t.params.code)},directives:[S.NgIf,h.NgxSpinnerComponent,C.BooleanFieldComponent,S.NgForOf,E.SelectControlValueAccessor,E.RequiredValidator,E.NgControlStatus,E.NgModel,E.NgSelectOption,E.ɵangular_packages_forms_forms_z,S.NgStyle,x.GraphComponent],pipes:[S.KeyValuePipe],styles:["#relationship-visualizer-root-node[_ngcontent-%COMP%] {\n\tborder-radius:4px;\n\n}\n\n.visualize-mode-hierarchy[_ngcontent-%COMP%] {\n  color: black;\n}\n\n.legend[_ngcontent-%COMP%] {\n\t  position: absolute;\n\t  padding: 10px;\n      bottom: 0;\n}\n\n.legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%] {\n\t  display: table;\n}\n\n.legend[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%] {\n\t  width: 25px;\n\t  height: 25px;\n\t  margin-right: 5px;\n\t  float: left;\n}\n\n.legend[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n\t  float: left;\n\t  line-height: 25px;\n\t  height: 25px;\n}\n\n.map-button[_ngcontent-%COMP%] {\n    background-color: white;\n    margin-top:150px;\n    z-index:1001;\n    border-radius: 4px;\n    padding: 8px;\n    width: 46px; \n    width: fit-content;\n}\n.map-button-icon[_ngcontent-%COMP%] {\n    font-size:23px;\n    text-align: center;\n    width: 30px;\n    height: 30px;\n    vertical-align: middle;\n}\n.map-button-icon[_ngcontent-%COMP%]    > span.glyphicon[_ngcontent-%COMP%] {\n    line-height: 30px;\n}\n\n[_nghost-%COMP%]     .graph .panning-rect {\n\tcursor: grab;\n}"]}),e}();t.RelationshipVisualizerComponent=H,("undefined"==typeof ngDevMode||ngDevMode)&&m.ɵsetClassMetadata(H,[{type:i.Component,args:[{selector:"relationship-visualizer",templateUrl:"./relationship-visualizer.component.html",styleUrls:["./relationship-visualizer.css"]}]}],(function(){return[{type:g.BsModalService},{type:h.NgxSpinnerService},{type:f.RelationshipVisualizationService},{type:y.RegistryCacheService},{type:v.GeometryService},{type:b.Router},{type:b.ActivatedRoute}]}),{nodeSelect:[{type:i.Output}],changeRelationship:[{type:i.Output}]})},1090:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapefileModalComponent=void 0;var i=n(0),r=(n(56),n(56),n(57),n(25),n(193)),o=(n(1015),n(0)),a=n(1015),l=n(56),s=n(25),c=n(57),d=n(1),p=n(1062),u=n(1063),m=n(1064),g=n(1065);function h(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",3),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵtextInterpolate(n.message)}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"attributes-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",i.configuration)}}function y(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"location-page",5),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",i.configuration)}}function v(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"location-problem-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",i.configuration)}}function b(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"term-problem-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",i.configuration)}}function S(e,t){if(1&e&&(o.ɵɵelementStart(0,"div"),o.ɵɵtemplate(1,f,2,1,"div",2),o.ɵɵtemplate(2,y,2,1,"div",2),o.ɵɵtemplate(3,v,2,1,"div",2),o.ɵɵtemplate(4,b,2,1,"div",2),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("ngIf","MAP"===n.state),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","LOCATION"===n.state),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","LOCATION-PROBLEM"===n.state),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","TERM-PROBLEM"===n.state)}}var C=function(){function e(e,t,n,i,r){this.service=e,this.bsModalRef=t,this.modalService=n,this.localizeService=i,this.router=r,this.message=null,this.state="MAP"}return e.prototype.ngOnInit=function(){},e.prototype.onStateChange=function(e){"BACK"===e?this.handleBack():"NEXT"===e?this.handleNext():"CANCEL"===e&&this.handleCancel()},e.prototype.handleBack=function(){"LOCATION"===this.state&&(this.state="MAP")},e.prototype.handleNext=function(){"MAP"===this.state?this.configuration.postalCode?this.handleSubmit():this.state="LOCATION":"LOCATION"===this.state?this.handleSubmit():"LOCATION-PROBLEM"===this.state?null!=this.configuration.termProblems?this.state="TERM-PROBLEM":this.handleSubmit():"TERM-PROBLEM"===this.state&&this.handleSubmit()},e.prototype.handleSubmit=function(){var e=this;this.message=null,this.service.importShapefile(this.configuration).then((function(t){null!=t.locationProblems?(e.state="LOCATION-PROBLEM",e.configuration=t):null!=t.termProblems?(e.state="TERM-PROBLEM",e.configuration=t):(e.bsModalRef.hide(),e.bsModalRef=e.modalService.show(r.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),e.bsModalRef.content.message=e.localizeService.decode("data.import.go.to.scheduled.jobs.confirm.message"),e.bsModalRef.content.submitText=e.localizeService.decode("data.import.go.to.scheduled.jobs.button"),e.bsModalRef.content.cancelText=e.localizeService.decode("modal.button.close"),e.bsModalRef.content.onConfirm.subscribe((function(t){e.router.navigate(["/registry/scheduled-jobs"])})))})).catch((function(t){e.error(t)}))},e.prototype.handleCancel=function(){var e=this;this.message=null,this.service.cancelImport(this.configuration).then((function(t){e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.error=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.IOService),o.ɵɵdirectiveInject(l.BsModalRef),o.ɵɵdirectiveInject(l.BsModalService),o.ɵɵdirectiveInject(s.LocalizationService),o.ɵɵdirectiveInject(c.Router))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["shapefile-modal"]],decls:3,vars:2,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[3,"configuration","configurationChange","stateChange"],["property","type",3,"configuration","configurationChange","stateChange"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵtemplate(1,h,2,1,"div",1),o.ɵɵtemplate(2,S,5,4,"div",2),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null!=t.message),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null!=t.configuration&&t.configuration))},directives:[d.NgIf,p.AttributesPageComponent,u.LocationPageComponent,m.LocationProblemPageComponent,g.TermProblemPageComponent],encapsulation:2}),e}();t.ShapefileModalComponent=C,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(C,[{type:i.Component,args:[{selector:"shapefile-modal",templateUrl:"./shapefile-modal.component.html",styleUrls:[]}]}],(function(){return[{type:a.IOService},{type:l.BsModalRef},{type:l.BsModalService},{type:s.LocalizationService},{type:c.Router}]}),null)},1091:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationProblemComponent=void 0;var i=n(0),r=n(44),o=(n(1030),n(1015),n(0)),a=n(1015),l=n(18),s=n(1),c=n(292),d=n(88),p=n(162);function u(e,t){if(1&e&&(o.ɵɵelementStart(0,"li"),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵadvance(1),o.ɵɵtextInterpolate2("",n.label," (",n.type,")")}}function m(e,t){if(1&e&&(o.ɵɵelementStart(0,"ol"),o.ɵɵtemplate(1,u,2,2,"li",5),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("ngForOf",n.problem.context)}}var g=function(e){return{disabled:e}};function h(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"div",2),o.ɵɵelementStart(2,"input",6),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().entityLabel=e}))("typeaheadOnSelect",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().typeaheadOnSelect(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(3,"div",7),o.ɵɵelementStart(4,"i",8),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().createSynonym()})),o.ɵɵpipe(5,"localize"),o.ɵɵelementEnd(),o.ɵɵelementStart(6,"i",9),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().ignoreDataAtLocation()})),o.ɵɵpipe(7,"localize"),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext();o.ɵɵadvance(2),o.ɵɵproperty("name",i.index+"-name")("ngModel",i.entityLabel)("typeaheadAsync",!0)("typeahead",i.dataSource)("typeaheadOptionsLimit",7),o.ɵɵadvance(2),o.ɵɵproperty("ngClass",o.ɵɵpureFunction1(12,g,!i.hasSynonym))("title",o.ɵɵpipeBind1(5,8,"dataUploader.createSynonymFromLocationTooltip")),o.ɵɵadvance(2),o.ɵɵproperty("title",o.ɵɵpipeBind1(7,10,"dataUploader.ignoreAtLocationTooltip"))}}function f(e,t){if(1&e&&(o.ɵɵelementStart(0,"li"),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵadvance(1),o.ɵɵtextInterpolate(n.label)}}function y(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",2),o.ɵɵelementStart(1,"a"),o.ɵɵelement(2,"i",12),o.ɵɵelement(3,"i",13),o.ɵɵelement(4,"localize",14),o.ɵɵtext(5),o.ɵɵelementEnd(),o.ɵɵelementStart(6,"span"),o.ɵɵelementStart(7,"ul"),o.ɵɵelement(8,"localize",15),o.ɵɵtemplate(9,f,2,1,"li",5),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext(2);o.ɵɵadvance(5),o.ɵɵtextInterpolate1(" [",n.problem.action.label,"] "),o.ɵɵadvance(4),o.ɵɵproperty("ngForOf",n.problem.action.ancestors)}}function v(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",2),o.ɵɵelement(1,"localize",16),o.ɵɵtext(2),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext(2);o.ɵɵadvance(2),o.ɵɵtextInterpolate1(" [",n.problem.action.label,"] ")}}function b(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵtemplate(1,y,10,2,"div",10),o.ɵɵtemplate(2,v,3,1,"div",10),o.ɵɵelementStart(3,"div",7),o.ɵɵelementStart(4,"i",11),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().undoAction()})),o.ɵɵpipe(5,"localize"),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("ngIf","SYNONYM"==i.problem.action.name),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","IGNOREATLOCATION"==i.problem.action.name),o.ɵɵadvance(2),o.ɵɵproperty("title",o.ɵɵpipeBind1(5,3,"dataUploader.undoFixedLocationTooltip"))}}var S=function(){function e(e){var t=this;this.service=e,this.onError=new i.EventEmitter,this.dataSource=r.Observable.create((function(e){t.service.getGeoObjectSuggestions(t.entityLabel,t.problem.type,t.problem.parent,t.configuration.hierarchy).then((function(t){e.next(t)}))}))}return e.prototype.ngOnInit=function(){this.entityLabel=null,this.entityId=null,this.hasSynonym=!1},e.prototype.typeaheadOnSelect=function(e){this.entityId=e.item.id,this.hasSynonym=null!=this.entityId},e.prototype.createSynonym=function(){var e=this;this.hasSynonym&&(this.onError.emit(null),this.service.createGeoObjectSynonym(this.entityId,this.problem.label).then((function(t){e.problem.resolved=!0,e.problem.action={name:"SYNONYM",synonymId:t.synonymId,vOid:t.vOid,label:t.label}})).catch((function(t){e.onError.emit(t.error)})))},e.prototype.ignoreDataAtLocation=function(){var e=this.problem.label;this.problem.type;this.problem.resolved=!0,this.problem.action={name:"IGNOREATLOCATION",label:e}},e.prototype.undoAction=function(){var e=this;this.problem.label,this.problem.type;if(this.problem.resolved){var t=this.problem.action;"IGNOREATLOCATION"==t.name?(this.problem.resolved=!1,this.problem.action=null):"SYNONYM"==t.name&&(this.onError.emit(null),this.service.deleteGeoObjectSynonym(t.synonymId,t.vOid).then((function(t){e.problem.resolved=!1,e.problem.action=null,e.entityLabel=null,e.hasSynonym=null!=e.entityLabel})).catch((function(t){e.onError.emit(t.error)})))}},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.IOService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["location-problem"]],inputs:{configuration:"configuration",problem:"problem",index:"index"},outputs:{onError:"onError"},decls:9,vars:5,consts:[[1,"row",2,"padding-bottom","10px"],["problemForm","ngForm"],[1,"col-sm-4"],[4,"ngIf"],[1,"col-sm-2","error-message"],[4,"ngFor","ngForOf"],["typeaheadOptionField","name",1,"form-control",3,"name","ngModel","typeaheadAsync","typeahead","typeaheadOptionsLimit","ngModelChange","typeaheadOnSelect"],[1,"col-sm-2"],[1,"fa","fa-2x","fa-compress","clickable",3,"ngClass","title","click"],[1,"fa","fa-2x","fa-times-circle","clickable",3,"title","click"],["class","col-sm-4",4,"ngIf"],[1,"fa","fa-2x","fa-undo","clickable",3,"title","click"],["aria-hidden","true",1,"fa","fa-caret-right","clickable"],["aria-hidden","true",1,"fa","fa-caret-down",2,"display","none"],["key","dataUploader.resolvedSynonym"],["key","dataUploader.locatedWithin"],["key","dataUploader.resolvedIgnoreAtLocation"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelementStart(1,"form",null,1),o.ɵɵelementStart(3,"div",2),o.ɵɵtemplate(4,m,2,1,"ol",3),o.ɵɵelementEnd(),o.ɵɵelementStart(5,"div",4),o.ɵɵtext(6),o.ɵɵelementEnd(),o.ɵɵtemplate(7,h,8,14,"div",3),o.ɵɵtemplate(8,b,6,5,"div",3),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(4),o.ɵɵproperty("ngIf",t.problem.context.length>0),o.ɵɵadvance(2),o.ɵɵtextInterpolate2("",t.problem.label," (",t.problem.typeLabel,")"),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",!t.problem.resolved),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.problem.resolved))},directives:[l.ɵangular_packages_forms_forms_ba,l.NgControlStatusGroup,l.NgForm,s.NgIf,s.NgForOf,l.DefaultValueAccessor,l.NgControlStatus,l.NgModel,c.TypeaheadDirective,s.NgClass,d.LocalizeComponent],pipes:[p.LocalizePipe],encapsulation:2}),e}();t.LocationProblemComponent=S,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(S,[{type:i.Component,args:[{selector:"location-problem",templateUrl:"./location-problem.component.html",styleUrls:[]}]}],(function(){return[{type:a.IOService}]}),{configuration:[{type:i.Input}],problem:[{type:i.Input}],index:[{type:i.Input}],onError:[{type:i.Output}]})},1092:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TermProblemComponent=void 0;var i=n(0),r=n(44),o=n(858),a=(n(1030),n(1015),n(0)),l=n(1015),s=n(18),c=n(1),d=n(292),p=n(88),u=n(162),m=function(e){return{disabled:e}};function g(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div"),a.ɵɵelementStart(1,"div",2),a.ɵɵelementStart(2,"input",5),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().termLabel=e}))("typeaheadOnSelect",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().typeaheadOnSelect(e)})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(3,"div",6),a.ɵɵelementStart(4,"i",7),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().createSynonym()})),a.ɵɵpipe(5,"localize"),a.ɵɵelementEnd(),a.ɵɵelementStart(6,"i",8),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().createOption()})),a.ɵɵpipe(7,"localize"),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"i",9),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().ignoreValue()})),a.ɵɵpipe(9,"localize"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(2),a.ɵɵproperty("name",i.index+"-name")("ngModel",i.termLabel)("typeaheadAsync",!0)("typeahead",i.dataSource)("typeaheadOptionsLimit",7),a.ɵɵadvance(2),a.ɵɵproperty("ngClass",a.ɵɵpureFunction1(15,m,!i.hasSynonym))("title",a.ɵɵpipeBind1(5,9,"dataUploader.createSynonymCategoryTooltip")),a.ɵɵadvance(2),a.ɵɵproperty("title",a.ɵɵpipeBind1(7,11,"dataUploader.createNewOptionTooltip")),a.ɵɵadvance(2),a.ɵɵproperty("title",a.ɵɵpipeBind1(9,13,"dataUploader.ignoreCategoryTooltip"))}}function h(e,t){1&e&&(a.ɵɵelementStart(0,"div",2),a.ɵɵelement(1,"localize",12),a.ɵɵelementEnd())}function f(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",2),a.ɵɵelement(1,"localize",13),a.ɵɵtext(2),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" [",n.problem.action.label,"] ")}}function y(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",2),a.ɵɵelement(1,"localize",14),a.ɵɵtext(2),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" [",n.problem.label,"] ")}}function v(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div"),a.ɵɵtemplate(1,h,2,0,"div",10),a.ɵɵtemplate(2,f,3,1,"div",10),a.ɵɵtemplate(3,y,3,1,"div",10),a.ɵɵelementStart(4,"div",6),a.ɵɵelementStart(5,"i",11),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().undoAction()})),a.ɵɵpipe(6,"localize"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("ngIf","OPTION"==i.problem.action.name),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","SYNONYM"==i.problem.action.name),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","IGNORE"==i.problem.action.name),a.ɵɵadvance(2),a.ɵɵproperty("title",a.ɵɵpipeBind1(6,4,"dataUploader.undoFixedCategoryTooltip"))}}var b=function(){function e(e){var t=this;this.service=e,this.onError=new i.EventEmitter,this.dataSource=r.Observable.create((function(e){t.service.getTermSuggestions(t.problem.mdAttributeId,t.termLabel,"20").then((function(t){e.next(t)}))}))}return e.prototype.ngOnInit=function(){this.termLabel=null,this.termId=null,this.hasSynonym=!1},e.prototype.typeaheadOnSelect=function(e){this.termId=e.item.value,this.hasSynonym=null!=this.termId},e.prototype.createSynonym=function(){var e=this;this.hasSynonym&&(this.onError.emit(null),this.service.createTermSynonym(this.termId,this.problem.label).then((function(t){e.problem.resolved=!0,e.problem.action={name:"SYNONYM",synonymId:t.synonymId,label:t.label}})).catch((function(t){e.onError.emit(t.error)})))},e.prototype.createOption=function(){var e=this;this.onError.emit(null),this.service.createTerm(this.problem.label,o.v4(),this.problem.parentCode).then((function(t){e.problem.resolved=!0,e.problem.action={name:"OPTION",term:t}})).catch((function(t){e.onError.emit(t.error)}))},e.prototype.ignoreValue=function(){this.problem.resolved=!0,this.problem.action={name:"IGNORE"}},e.prototype.undoAction=function(){var e=this;if(this.problem.resolved){var t=this.problem.action;"IGNORE"==t.name?(this.problem.resolved=!1,this.problem.action=null):"SYNONYM"==t.name?(this.onError.emit(null),this.service.deleteTermSynonym(t.synonymId).then((function(t){e.problem.resolved=!1,e.problem.action=null})).catch((function(t){e.onError.emit(t.error)}))):"OPTION"==t.name&&(this.onError.emit(null),this.service.removeTerm(this.problem.parentCode,t.term.code).then((function(t){e.problem.resolved=!1,e.problem.action=null})).catch((function(t){e.onError.emit(t.error)})))}},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.IOService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["term-problem"]],inputs:{configuration:"configuration",problem:"problem",index:"index"},outputs:{onError:"onError"},decls:9,vars:4,consts:[[1,"row"],["problemForm","ngForm"],[1,"col-sm-4"],[1,"col-sm-2","error-message"],[4,"ngIf"],["typeaheadOptionField","label",1,"form-control",3,"name","ngModel","typeaheadAsync","typeahead","typeaheadOptionsLimit","ngModelChange","typeaheadOnSelect"],[1,"col-sm-2"],[1,"fa","fa-2x","fa-compress","clickable",3,"ngClass","title","click"],[1,"fa","fa-2x","fa-plus","clickable",3,"title","click"],[1,"fa","fa-2x","fa-times-circle","clickable",3,"title","click"],["class","col-sm-4",4,"ngIf"],[1,"fa","fa-2x","fa-undo","clickable",3,"title","click"],["key","dataUploader.resolvedCategoryOption"],["key","dataUploader.resolvedSynonym"],["key","dataUploader.resolvedIgnoreCategory"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵelementStart(1,"form",null,1),a.ɵɵelementStart(3,"div",2),a.ɵɵtext(4),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"div",3),a.ɵɵtext(6),a.ɵɵelementEnd(),a.ɵɵtemplate(7,g,10,17,"div",4),a.ɵɵtemplate(8,v,7,6,"div",4),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(4),a.ɵɵtextInterpolate(t.problem.attributeLabel),a.ɵɵadvance(2),a.ɵɵtextInterpolate(t.problem.label),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!t.problem.resolved),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.problem.resolved))},directives:[s.ɵangular_packages_forms_forms_ba,s.NgControlStatusGroup,s.NgForm,c.NgIf,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel,d.TypeaheadDirective,c.NgClass,p.LocalizeComponent],pipes:[u.LocalizePipe],encapsulation:2}),e}();t.TermProblemComponent=b,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(b,[{type:i.Component,args:[{selector:"term-problem",templateUrl:"./term-problem.component.html",styleUrls:[]}]}],(function(){return[{type:l.IOService}]}),{configuration:[{type:i.Input}],problem:[{type:i.Input}],index:[{type:i.Input}],onError:[{type:i.Output}]})},1093:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataPageComponent=void 0;var i=n(0),r=(n(56),n(193)),o=(n(25),n(0)),a=n(25),l=n(56),s=n(221),c=n(139),d=n(1),p=n(57),u=n(88),m=n(1094),g=function(e){return{active:e}};function h(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"a",9),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().renderContent("SPREADSHEET")})),o.ɵɵelement(1,"localize",10),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext();o.ɵɵproperty("ngClass",o.ɵɵpureFunction1(1,g,"SPREADSHEET"===i.content))}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"a",9),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().renderContent("SHAPEFILE")})),o.ɵɵelement(1,"localize",11),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext();o.ɵɵproperty("ngClass",o.ɵɵpureFunction1(1,g,"SHAPEFILE"===i.content))}}function y(e,t){1&e&&o.ɵɵelement(0,"dataimporter",12),2&e&&o.ɵɵproperty("format","EXCEL")}function v(e,t){1&e&&o.ɵɵelement(0,"dataimporter",12),2&e&&o.ɵɵproperty("format","SHAPEFILE")}var b=function(){function e(e,t,n){this.localizationService=e,this.modalService=t,this.service=n,this.content="SPREADSHEET",this.isAdmin=n.isAdmin(),this.isMaintainer=this.isAdmin||n.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||n.isContributer(),this.isMaintainer?this.renderContent("SPREADSHEET"):this.renderContent("EXPORT")}return e.prototype.ngOnInit=function(){},e.prototype.renderContent=function(e){this.content=e,"SPREADSHEET"===e?this.pageTitle=this.localizationService.decode("spreadsheet.title"):"SHAPEFILE"===e?this.pageTitle=this.localizationService.decode("shapefile.title"):"EXPORT"===e&&(this.pageTitle=this.localizationService.decode("io.export.title"))},e.prototype.error=function(e){this.bsModalRef=r.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.LocalizationService),o.ɵɵdirectiveInject(l.BsModalService),o.ɵɵdirectiveInject(a.AuthService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["data-page"]],decls:17,vars:5,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],[1,"row"],[1,"col-md-1"],[1,"col-md-10",2,"padding-top","30px"],[1,"heading"],["style","margin-right:10px;font-size:20px;",3,"routerLink","ngClass","click",4,"ngIf"],[1,"inner-col-content-wrapper",2,"padding-top","30px","margin-top","10px"],[3,"format",4,"ngIf"],[2,"margin-right","10px","font-size","20px",3,"routerLink","ngClass","click"],["key","import-spreadsheet-localization-manager.menu"],["key","import-shapefile-localization-manager.menu"],[3,"format"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelement(1,"cgr-header"),o.ɵɵelement(2,"loading-bar"),o.ɵɵelementStart(3,"div",1),o.ɵɵelementStart(4,"div",2),o.ɵɵelement(5,"div",3),o.ɵɵelementStart(6,"div",4),o.ɵɵelementStart(7,"div",5),o.ɵɵelementStart(8,"h2"),o.ɵɵtext(9),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(10,"div"),o.ɵɵtemplate(11,h,2,3,"a",6),o.ɵɵtemplate(12,f,2,3,"a",6),o.ɵɵelementEnd(),o.ɵɵelementStart(13,"div",7),o.ɵɵtemplate(14,y,1,1,"dataimporter",8),o.ɵɵtemplate(15,v,1,1,"dataimporter",8),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelement(16,"div",3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(9),o.ɵɵtextInterpolate1(" ",t.pageTitle," "),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",t.isMaintainer),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.isMaintainer),o.ɵɵadvance(2),o.ɵɵproperty("ngIf","SPREADSHEET"===t.content),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","SHAPEFILE"===t.content))},directives:[s.CgrHeaderComponent,c.LoadingBarComponent,d.NgIf,p.RouterLinkWithHref,d.NgClass,u.LocalizeComponent,m.DataImporterComponent],styles:["a.active[_ngcontent-%COMP%] {\n\tborder-bottom: solid 2px #6BA542;\n}"]}),e}();t.DataPageComponent=b,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(b,[{type:i.Component,args:[{selector:"data-page",templateUrl:"./data-page.component.html",styleUrls:["./data-page.css"]}]}],(function(){return[{type:a.LocalizationService},{type:l.BsModalService},{type:a.AuthService}]}),null)},1094:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataImporterComponent=void 0;var i=n(0),r=(n(56),n(380)),o=n(193),a=(n(25),n(1015),n(1066)),l=n(1090),s=n(544),c=n(0),d=n(1015),p=n(25),u=n(56),m=n(1),g=n(88),h=n(18),f=n(382),y=n(546),v=n(380),b=["myFile"],S=["dateFieldComponents"],C=function(e){return{active:e}};function E(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"div"),c.ɵɵelementStart(2,"div",1),c.ɵɵelement(3,"div",2),c.ɵɵelementStart(4,"div",3),c.ɵɵelementStart(5,"label",4),c.ɵɵelementStart(6,"input",5),c.ɵɵlistener("change",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().setImportSource(e,"FILE")})),c.ɵɵelementEnd(),c.ɵɵelementStart(7,"span",6),c.ɵɵelement(8,"localize",7),c.ɵɵelementEnd(),c.ɵɵelementStart(9,"p",8),c.ɵɵelement(10,"localize",9),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(11,"label",4),c.ɵɵelementStart(12,"input",5),c.ɵɵlistener("change",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().setImportSource(e,"EXTERNAL")})),c.ɵɵelementEnd(),c.ɵɵelementStart(13,"span",6),c.ɵɵelement(14,"localize",10),c.ɵɵelementEnd(),c.ɵɵelementStart(15,"p",8),c.ɵɵelement(16,"localize",11),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(17,"div",12),c.ɵɵelementStart(18,"button",13),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onNext()})),c.ɵɵelement(19,"localize",14),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(20,"div",15),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var i=c.ɵɵnextContext();c.ɵɵadvance(6),c.ɵɵproperty("value",!0)("checked",!i.isExternal),c.ɵɵadvance(1),c.ɵɵproperty("ngClass",c.ɵɵpureFunction1(6,C,!i.isExternal)),c.ɵɵadvance(5),c.ɵɵproperty("value",!1)("checked",i.isExternal),c.ɵɵadvance(1),c.ɵɵproperty("ngClass",c.ɵɵpureFunction1(8,C,i.isExternal))}}function x(e,t){if(1&e&&(c.ɵɵelementStart(0,"option",48),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵpropertyInterpolate("value",n.oid),c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.label.localizedValue)}}function O(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",19),c.ɵɵelementStart(1,"label",45),c.ɵɵelement(2,"localize",46),c.ɵɵelementEnd(),c.ɵɵelementStart(3,"div",23),c.ɵɵelementStart(4,"select",47),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).externalSystemId=e})),c.ɵɵtemplate(5,x,2,2,"option",25),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(6,"div",26),c.ɵɵelementEnd()}if(2&e){var i=c.ɵɵnextContext(2);c.ɵɵadvance(4),c.ɵɵproperty("ngModel",i.externalSystemId),c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",i.externalSystems)}}function I(e,t){if(1&e&&(c.ɵɵelementStart(0,"option",48),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵpropertyInterpolate("value",n.code),c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.label)}}function M(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",19),c.ɵɵelementStart(1,"label",49),c.ɵɵelement(2,"localize",50),c.ɵɵelementEnd(),c.ɵɵelementStart(3,"div",23),c.ɵɵelementStart(4,"select",51),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).hierarchyCode=e}))("change",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).onSelectHierarchy()})),c.ɵɵelement(5,"option"),c.ɵɵtemplate(6,I,2,2,"option",25),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(7,"div",26),c.ɵɵelementEnd()}if(2&e){var i=c.ɵɵnextContext(2);c.ɵɵadvance(4),c.ɵɵproperty("ngModel",i.hierarchyCode),c.ɵɵadvance(2),c.ɵɵproperty("ngForOf",i.filteredHierarchyViews)}}function w(e,t){if(1&e&&(c.ɵɵelementStart(0,"option",48),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵpropertyInterpolate("value",n.code),c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.super?n.super.label+" : "+n.label:n.label)}}function T(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",19),c.ɵɵelementStart(1,"label",52),c.ɵɵelement(2,"localize",53),c.ɵɵelementEnd(),c.ɵɵelementStart(3,"div",23),c.ɵɵelementStart(4,"select",54),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).typeCode=e}))("change",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).onSelectType()})),c.ɵɵelement(5,"option"),c.ɵɵtemplate(6,w,2,2,"option",25),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(7,"div",26),c.ɵɵelementEnd()}if(2&e){var i=c.ɵɵnextContext(2);c.ɵɵadvance(4),c.ɵɵproperty("ngModel",i.typeCode),c.ɵɵadvance(2),c.ɵɵproperty("ngForOf",i.filteredTypeViews)}}function k(e,t){1&e&&c.ɵɵelement(0,"localize",55)}function P(e,t){1&e&&c.ɵɵelement(0,"localize",56)}function j(e,t){if(1&e&&(c.ɵɵelementStart(0,"option",48),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵpropertyInterpolate("value",n.strategy),c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.label)}}function z(e,t){1&e&&c.ɵɵelement(0,"localize",57)}function D(e,t){1&e&&c.ɵɵelement(0,"localize",58)}function R(e,t){if(1&e&&c.ɵɵelement(0,"input",59,60),2&e){var n=c.ɵɵnextContext(2);c.ɵɵproperty("uploader",n.uploader)}}function L(e,t){if(1&e&&c.ɵɵelement(0,"input",61,60),2&e){var n=c.ɵɵnextContext(2);c.ɵɵproperty("uploader",n.uploader)}}function _(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"div"),c.ɵɵelementStart(2,"form",16,17),c.ɵɵtemplate(4,O,7,2,"div",18),c.ɵɵtemplate(5,M,8,2,"div",18),c.ɵɵtemplate(6,T,8,2,"div",18),c.ɵɵelementStart(7,"div",19),c.ɵɵelementStart(8,"label",20),c.ɵɵtemplate(9,k,1,0,"localize",21),c.ɵɵtemplate(10,P,1,0,"localize",22),c.ɵɵelementEnd(),c.ɵɵelementStart(11,"div",23),c.ɵɵelementStart(12,"select",24),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().importStrategy=e}))("change",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext().checkDates()})),c.ɵɵtemplate(13,j,2,2,"option",25),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(14,"div",26),c.ɵɵelementEnd(),c.ɵɵelementStart(15,"div",19),c.ɵɵelementStart(16,"label",27),c.ɵɵelement(17,"localize",28),c.ɵɵelementEnd(),c.ɵɵelementStart(18,"div",23),c.ɵɵelementStart(19,"date-field",29,30),c.ɵɵlistener("valueChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().startDate=e}))("change",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext().checkDates()})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(21,"div",26),c.ɵɵelementEnd(),c.ɵɵelementStart(22,"div",19),c.ɵɵelementStart(23,"label",31),c.ɵɵelement(24,"localize",32),c.ɵɵelementEnd(),c.ɵɵelementStart(25,"div",23),c.ɵɵelementStart(26,"date-field",33,30),c.ɵɵlistener("valueChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().endDate=e}))("change",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext().checkDates()})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(28,"div",26),c.ɵɵelementEnd(),c.ɵɵelementStart(29,"div",19),c.ɵɵelementStart(30,"label",34),c.ɵɵelement(31,"localize",35),c.ɵɵelementEnd(),c.ɵɵelementStart(32,"div",23),c.ɵɵelementStart(33,"boolean-field",36),c.ɵɵlistener("valueChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().copyBlank=e})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(34,"div",26),c.ɵɵelementEnd(),c.ɵɵelementStart(35,"div",19),c.ɵɵelementStart(36,"label",37),c.ɵɵtemplate(37,z,1,0,"localize",38),c.ɵɵtemplate(38,D,1,0,"localize",39),c.ɵɵelementEnd(),c.ɵɵelementStart(39,"div",23),c.ɵɵtemplate(40,R,2,1,"input",40),c.ɵɵtemplate(41,L,2,1,"input",41),c.ɵɵelementEnd(),c.ɵɵelement(42,"div",26),c.ɵɵelementEnd(),c.ɵɵelementStart(43,"div",19),c.ɵɵelement(44,"div",26),c.ɵɵelementStart(45,"div",42),c.ɵɵelementStart(46,"button",43),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onClick()})),c.ɵɵelement(47,"localize",44),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(48,"div",26),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var i=c.ɵɵreference(3),r=c.ɵɵnextContext();c.ɵɵadvance(4),c.ɵɵproperty("ngIf",r.isExternal),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",r.filteredHierarchyViews),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",r.filteredTypeViews),c.ɵɵadvance(3),c.ɵɵproperty("ngIf","EXCEL"===r.format),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","SHAPEFILE"===r.format),c.ɵɵadvance(2),c.ɵɵproperty("ngModel",r.importStrategy),c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",r.importStrategies),c.ɵɵadvance(6),c.ɵɵproperty("value",r.startDate)("inputName","startDate")("allowFutureDates",!0),c.ɵɵadvance(7),c.ɵɵproperty("value",r.endDate)("inputName","endDate")("allowInfinity",!0)("allowFutureDates",!0)("required",!0),c.ɵɵadvance(7),c.ɵɵproperty("value",r.copyBlank),c.ɵɵadvance(4),c.ɵɵproperty("ngIf","EXCEL"===r.format),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","SHAPEFILE"===r.format),c.ɵɵadvance(2),c.ɵɵproperty("ngIf","EXCEL"===r.format),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","SHAPEFILE"===r.format),c.ɵɵadvance(5),c.ɵɵproperty("disabled",!r.isValid||i.invalid)}}var A=function(){function e(e,t,n,i,r,o,a,l){this.service=e,this.eventService=t,this.modalService=n,this.localizationService=i,this.authService=r,this.sysService=o,this.hierarchyService=a,this.changeDetectorRef=l,this.currentDate=new Date,this.showImportConfig=!1,this.isValid=!1,this.importStrategies=[{strategy:s.ImportStrategy.NEW_AND_UPDATE,label:this.localizationService.decode("etl.import.ImportStrategy.NEW_AND_UPDATE")},{strategy:s.ImportStrategy.NEW_ONLY,label:this.localizationService.decode("etl.import.ImportStrategy.NEW_ONLY")},{strategy:s.ImportStrategy.UPDATE_ONLY,label:this.localizationService.decode("etl.import.ImportStrategy.UPDATE_ONLY")}],this.typeCode=null,this.hierarchyCode=null,this.startDate=null,this.endDate=null,this.isExternal=!1,this.isLoading=!0,this.copyBlank=!0}return e.prototype.ngOnInit=function(){var e=this;this.sysService.getExternalSystems(1,100).then((function(t){e.externalSystems=t.resultSet,0===e.externalSystems.length&&(e.isExternal=!1,e.showImportConfig=!0),e.isLoading=!1})).catch((function(t){e.error(t)})),this.hierarchyService.getHierarchyGroupedTypes().then((function(t){e.allHierarchyViews=t,e.allTypeViews=[];for(var n=e.allHierarchyViews.length,i=0;i<n;++i)for(var r=e.allHierarchyViews[i],o=r.types.length,a=function(t){for(var n=r.types[t],i=e.allHierarchyViews.length,o=0;o<i;++o){var a=e.allHierarchyViews[o],l=a.types.findIndex((function(e){return n.code===e.code}));-1!==l&&(a.types[l]=n)}},l=0;l<o;++l)a(l);var s=e.allHierarchyViews.length,c=function(t){for(var n=e.allHierarchyViews[t],i=n.types.length,r=function(t){var i=n.types[t],r=e.allTypeViews.findIndex((function(e){return e.code===i.code}));if(-1!==r){var o=e.allTypeViews[r];-1===o.hierarchies.findIndex((function(e){return e.code===n.code}))&&o.hierarchies.push(n)}else null==i.hierarchies&&(i.hierarchies=[]),i.hierarchies.push(n),e.allTypeViews.push(i)},o=0;o<i;++o)r(o)};for(i=0;i<s;++i)c(i);e.filteredHierarchyViews=e.allHierarchyViews,e.filteredTypeViews=e.allTypeViews})).catch((function(t){e.error(t)}));var t=registry.contextPath+"/excel/get-configuration";"SHAPEFILE"===this.format&&(t=registry.contextPath+"/shapefile/get-shapefile-configuration");var n={queueLimit:1,removeAfterUpload:!0,url:t};this.uploader=new r.FileUploader(n),this.uploader.onBuildItemForm=function(t,n){n.append("type",e.typeCode),n.append("copyBlank",e.copyBlank),null!=e.startDate&&n.append("startDate",e.startDate),null!=e.endDate&&n.append("endDate",e.endDate),e.importStrategy&&n.append("strategy",e.importStrategy)},this.uploader.onBeforeUploadItem=function(t){e.eventService.start()},this.uploader.onCompleteItem=function(t,n,i,r){e.fileRef.nativeElement.value="",e.eventService.complete()},this.uploader.onSuccessItem=function(t,n,i,r){var o=JSON.parse(n);o.isExternal=e.isExternal,o.hierarchy=e.hierarchyCode;for(var s=null,c=0;c<e.externalSystems.length;++c){var d=e.externalSystems[c];d.oid===e.externalSystemId&&(s=d)}o.externalSystemId=e.externalSystemId,o.externalSystem=s,"SHAPEFILE"===e.format?(e.bsModalRef=e.modalService.show(l.ShapefileModalComponent,{backdrop:!0,ignoreBackdropClick:!0}),e.bsModalRef.content.configuration=o):(e.bsModalRef=e.modalService.show(a.SpreadsheetModalComponent,{backdrop:!0,ignoreBackdropClick:!0}),e.bsModalRef.content.init(o))},this.uploader.onErrorItem=function(t,n,i,r){var o=JSON.parse(n);e.error({error:o})}},e.prototype.onSelectHierarchy=function(){for(var e=null,t=this.allHierarchyViews.length,n=0;n<t;++n)if(this.allHierarchyViews[n].code===this.hierarchyCode){e=this.allHierarchyViews[n];break}this.filteredTypeViews=null!=e?e.types:this.allTypeViews},e.prototype.onSelectType=function(){for(var e=null,t=this.allTypeViews.length,n=0;n<t;++n)if(this.allTypeViews[n].code===this.typeCode){e=this.allTypeViews[n];break}this.filteredHierarchyViews=null!=e?e.hierarchies:this.allHierarchyViews,this.checkDates()},e.prototype.onClick=function(){null!=this.uploader.queue&&this.uploader.queue.length>0?this.uploader.uploadAll():this.error({message:this.localizationService.decode("io.missing.file"),error:{}})},e.prototype.setImportSource=function(e,t){this.isExternal="EXTERNAL"===t},e.prototype.onNext=function(){this.showImportConfig=!0},e.prototype.onBack=function(){this.showImportConfig=!1},e.prototype.checkDates=function(){var e=this;setTimeout((function(){e.isValid=e.checkDateFieldValidity()}),0)},e.prototype.checkDateFieldValidity=function(){for(var e,t=this.dateFieldComponentsArray.toArray(),n=0;n<t.length;n++){var i=t[n];if("startDate"===i.inputName&&(e=i),!i.valid)return!1}return this.startDate>this.endDate&&(e.setInvalid(this.localizationService.decode("date.input.startdate.after.enddate.error.message")),this.changeDetectorRef.detectChanges()),!0},e.prototype.error=function(e){this.bsModalRef=o.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(c.ɵɵdirectiveInject(d.IOService),c.ɵɵdirectiveInject(p.EventService),c.ɵɵdirectiveInject(u.BsModalService),c.ɵɵdirectiveInject(p.LocalizationService),c.ɵɵdirectiveInject(p.AuthService),c.ɵɵdirectiveInject(p.ExternalSystemService),c.ɵɵdirectiveInject(d.HierarchyService),c.ɵɵdirectiveInject(c.ChangeDetectorRef))},e.ɵcmp=c.ɵɵdefineComponent({type:e,selectors:[["dataimporter"]],viewQuery:function(e,t){if(1&e&&(c.ɵɵviewQuery(b,1),c.ɵɵviewQuery(S,1)),2&e){var n=void 0;c.ɵɵqueryRefresh(n=c.ɵɵloadQuery())&&(t.fileRef=n.first),c.ɵɵqueryRefresh(n=c.ɵɵloadQuery())&&(t.dateFieldComponentsArray=n)}},inputs:{format:"format"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"row"],[1,"col-xs-1"],[1,"col-xs-9","radio-btn-wrapper"],[1,"radio"],["type","checkbox","name","import-source",3,"value","checked","change"],[3,"ngClass"],["key","importer.import.from-file.label"],[1,"radio-label-description"],["key","importer.import.from-file.description"],["key","importer.import.from-external.label"],["key","importer.import.from-external.description"],[1,"button-holder"],["type","submit",1,"btn","btn-primary",3,"click"],["key","io.next"],[1,"col-xs-2"],["autocomplete","off"],["form","ngForm"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],["for","strategy",1,"col-md-2","text-right"],["key","spreadsheet.import.import.strategy",4,"ngIf"],["key","shapefile.import.import.strategy",4,"ngIf"],[1,"col-md-8"],["id","strategy","name","strategy","required","",1,"select-area",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],["for","startDate",1,"col-md-2","text-right"],["key","io.startDate"],["label","",3,"value","inputName","allowFutureDates","valueChange","change"],["dateFieldComponents",""],["for","endDate",1,"col-md-2","text-right"],["key","io.endDate"],["label","",3,"value","inputName","allowInfinity","allowFutureDates","required","valueChange","change"],["for","copyBlank",1,"col-md-2","text-right"],["key","dataimporter.importblankcells"],["label","",3,"value","valueChange"],["for","file",1,"col-md-2","text-right"],["key","io.spreadsheet",4,"ngIf"],["key","io.shapefile",4,"ngIf"],["class","ghost-input","name","file","type","file","ng2FileSelect","","accept",".xls, .xlsx","required","",3,"uploader",4,"ngIf"],["class","ghost-input","name","file","type","file","ng2FileSelect","","accept",".zip","required","",3,"uploader",4,"ngIf"],[1,"button-holder","col-md-8","text-right"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["key","io.submit"],["for","externalSystem",1,"col-md-2","text-right"],["key","io.import.externalSystems"],["id","externalSystem","name","externalSystem","required","",1,"select-area",3,"ngModel","ngModelChange"],[3,"value"],["for","hierarchyCode",1,"col-md-2","text-right"],["key","io.modal.hierarchy"],["id","hierarchyCode","name","hierarchyCode","required","",1,"select-area",3,"ngModel","ngModelChange","change"],["for","code",1,"col-md-2","text-right"],["key","io.geoObjectType"],["id","code","name","code","required","",1,"select-area",3,"ngModel","ngModelChange","change"],["key","spreadsheet.import.import.strategy"],["key","shapefile.import.import.strategy"],["key","io.spreadsheet"],["key","io.shapefile"],["name","file","type","file","ng2FileSelect","","accept",".xls, .xlsx","required","",1,"ghost-input",3,"uploader"],["myFile",""],["name","file","type","file","ng2FileSelect","","accept",".zip","required","",1,"ghost-input",3,"uploader"]],template:function(e,t){1&e&&(c.ɵɵtemplate(0,E,21,10,"div",0),c.ɵɵtemplate(1,_,49,21,"div",0)),2&e&&(c.ɵɵproperty("ngIf",!t.isLoading&&!t.showImportConfig&&t.externalSystems.length>0),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",!t.isLoading&&null!==t.isExternal&&t.showImportConfig))},directives:[m.NgIf,m.NgClass,g.LocalizeComponent,h.ɵangular_packages_forms_forms_ba,h.NgControlStatusGroup,h.NgForm,h.SelectControlValueAccessor,h.RequiredValidator,h.NgControlStatus,h.NgModel,m.NgForOf,f.DateFieldComponent,y.BooleanFieldComponent,h.NgSelectOption,h.ɵangular_packages_forms_forms_z,v.FileSelectDirective],styles:[".radio-btn-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n\tfont-size: 17px;\n\tfont-weight: normal;\n}\n\n.radio-btn-wrapper[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%] {\n\tcolor: #6BA542;\n\tfont-weight: bold;\n}\n\n.radio-btn-wrapper[_ngcontent-%COMP%]   p.radio-label-description[_ngcontent-%COMP%]{\n\tcolor: #a3a0a0;\n\tmargin-left: 30px;\n}"]}),e}();t.DataImporterComponent=A,("undefined"==typeof ngDevMode||ngDevMode)&&c.ɵsetClassMetadata(A,[{type:i.Component,args:[{selector:"dataimporter",templateUrl:"./dataimporter.component.html",styleUrls:["./dataimporter.css"]}]}],(function(){return[{type:d.IOService},{type:p.EventService},{type:u.BsModalService},{type:p.LocalizationService},{type:p.AuthService},{type:p.ExternalSystemService},{type:d.HierarchyService},{type:c.ChangeDetectorRef}]}),{dateFieldComponentsArray:[{type:i.ViewChildren,args:["dateFieldComponents"]}],fileRef:[{type:i.ViewChild,args:["myFile"]}],format:[{type:i.Input}]})},1095:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestTableComponent=void 0;var i=n(0),r=(n(57),n(1),n(56),n(2)),o=n(380),a=n(544),l=(n(1015),n(25),n(194),n(193)),s=n(0),c=n(1015),d=n(56),p=n(25),u=n(57),m=n(194),g=n(1),h=n(88),f=n(379),y=n(18),v=n(1037),b=n(380),S=n(381),C=n(162),E=["myFile"];function x(e,t){if(1&e&&s.ɵɵelement(0,"i",25),2&e){var n=s.ɵɵnextContext();s.ɵɵproperty("ngClass",n.isAscending("createdBy")?"fa-arrow-down":"fa-arrow-up")}}function O(e,t){if(1&e&&s.ɵɵelement(0,"i",25),2&e){var n=s.ɵɵnextContext();s.ɵɵproperty("ngClass",n.isAscending("geoObjectTypeLabel")?"fa-arrow-down":"fa-arrow-up")}}function I(e,t){if(1&e&&s.ɵɵelement(0,"i",25),2&e){var n=s.ɵɵnextContext();s.ɵɵproperty("ngClass",n.isAscending("geoObjectLabel")?"fa-arrow-down":"fa-arrow-up")}}function M(e,t){if(1&e&&s.ɵɵelement(0,"i",25),2&e){var n=s.ɵɵnextContext();s.ɵɵproperty("ngClass",n.isAscending("createDate")?"fa-arrow-down":"fa-arrow-up")}}function w(e,t){if(1&e&&s.ɵɵelement(0,"i",25),2&e){var n=s.ɵɵnextContext();s.ɵɵproperty("ngClass",n.isAscending("approvalStatus")?"fa-arrow-down":"fa-arrow-up")}}function T(e,t){if(1&e&&s.ɵɵelement(0,"i",25),2&e){var n=s.ɵɵnextContext();s.ɵɵproperty("ngClass",n.isAscending("oid")?"fa-arrow-down":"fa-arrow-up")}}function k(e,t){1&e&&(s.ɵɵelementStart(0,"h4",40),s.ɵɵelement(1,"localize",49),s.ɵɵelementEnd())}function P(e,t){1&e&&(s.ɵɵelementStart(0,"h4",40),s.ɵɵelement(1,"localize",50),s.ɵɵelementEnd())}function j(e,t){1&e&&(s.ɵɵelementStart(0,"div",51),s.ɵɵelement(1,"localize",52),s.ɵɵelementEnd())}function z(e,t){1&e&&(s.ɵɵelementStart(0,"div",51),s.ɵɵelement(1,"localize",53),s.ɵɵelementEnd())}function D(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",54),s.ɵɵelementStart(1,"label",55),s.ɵɵelement(2,"localize",56),s.ɵɵelementEnd(),s.ɵɵelementStart(3,"textarea",57),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).$implicit.contributorNotes=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2).$implicit;s.ɵɵadvance(1),s.ɵɵpropertyInterpolate1("for","contribNotesInput-",i.oid,""),s.ɵɵadvance(2),s.ɵɵpropertyInterpolate1("id","contribNotesInput-",i.oid,""),s.ɵɵproperty("ngModel",i.contributorNotes)("disabled",!i.permissions.includes("WRITE_DETAILS"))}}function R(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"geoobject-shared-attribute-editor",70,71),s.ɵɵlistener("valid",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(4).setValid(e)})),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(3).$implicit,r=s.ɵɵnextContext();s.ɵɵproperty("readOnly",!r.canEdit(i))("geoObjectType",i.current.geoObjectType)("postGeoObject","UpdateGeoObject"==i.type?i.current.geoObject:i.actions[0].geoObjectJson)("changeRequest",i)("hierarchies","UpdateGeoObject"==i.type?i.current.hierarchies:i.actions[0].parentJson)("isGeometryInlined",!0)("isNew","CreateGeoObject"===i.type)}}function L(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",72),s.ɵɵelementStart(1,"label",55),s.ɵɵelement(2,"localize",73),s.ɵɵelementEnd(),s.ɵɵelementStart(3,"textarea",74),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(3).$implicit.maintainerNotes=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(3).$implicit;s.ɵɵadvance(1),s.ɵɵpropertyInterpolate1("for","maintainerNotesInput-",i.oid,""),s.ɵɵadvance(2),s.ɵɵpropertyInterpolate1("id","maintainerNotesInput-",i.oid,""),s.ɵɵproperty("ngModel",i.maintainerNotes)("disabled",!i.permissions.includes("WRITE_MAINTAINER_NOTES"))}}function _(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",72),s.ɵɵelementStart(1,"label",55),s.ɵɵelement(2,"localize",75),s.ɵɵelementEnd(),s.ɵɵelementStart(3,"input",76),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(3).$implicit.additionalNotes=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(3).$implicit;s.ɵɵadvance(1),s.ɵɵpropertyInterpolate1("for","additionalNotes-",i.oid,""),s.ɵɵadvance(2),s.ɵɵpropertyInterpolate1("id","additionalNotes-",i.oid,""),s.ɵɵproperty("ngModel",i.additionalNotes)("disabled",!i.permissions.includes("WRITE_MAINTAINER_NOTES"))}}function A(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"li",80),s.ɵɵelementStart(1,"a",14),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=t.$implicit,i=s.ɵɵnextContext(4).$implicit;return s.ɵɵnextContext().onDownloadFile(i,e.oid)})),s.ɵɵtext(2),s.ɵɵelementEnd(),s.ɵɵelementStart(3,"i",81),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=t.$implicit,i=s.ɵɵnextContext(4).$implicit;return s.ɵɵnextContext().onDeleteFile(i,e.oid)})),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=t.$implicit;s.ɵɵadvance(2),s.ɵɵtextInterpolate(i.fileName)}}function N(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",77),s.ɵɵelementStart(1,"ul",78),s.ɵɵtemplate(2,A,4,1,"li",79),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(3).$implicit;s.ɵɵadvance(2),s.ɵɵproperty("ngForOf",n.documents)}}function V(e,t){1&e&&(s.ɵɵelementStart(0,"p",82),s.ɵɵelement(1,"localize",83),s.ɵɵelementEnd())}function F(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",84),s.ɵɵelement(1,"input",85,86),s.ɵɵelementStart(3,"button",87),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=s.ɵɵnextContext(3).$implicit;return s.ɵɵnextContext().onUpload(e)})),s.ɵɵpipe(4,"localize"),s.ɵɵelement(5,"localize",88),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(4);s.ɵɵadvance(1),s.ɵɵproperty("uploader",i.uploader),s.ɵɵadvance(2),s.ɵɵproperty("title",s.ɵɵpipeBind1(4,2,"change.request.upload.document.btn.hover"))}}function H(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"button",94),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=s.ɵɵnextContext(5).$implicit;return s.ɵɵnextContext().onReject(e)})),s.ɵɵpipe(1,"localize"),s.ɵɵelement(2,"localize",95),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(5).$implicit;s.ɵɵproperty("disabled","PENDING"!==i.approvalStatus)("title",s.ɵɵpipeBind1(1,2,"change.request.reject.all.btn.hover"))}}function G(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"span"),s.ɵɵelementStart(1,"button",91),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=s.ɵɵnextContext(4).$implicit;return s.ɵɵnextContext().onExecute(e)})),s.ɵɵpipe(2,"localize"),s.ɵɵelement(3,"localize",92),s.ɵɵelementEnd(),s.ɵɵtemplate(4,H,3,4,"button",93),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(4).$implicit;s.ɵɵadvance(1),s.ɵɵproperty("disabled","PENDING"!==i.approvalStatus)("title",s.ɵɵpipeBind1(2,4,"change.request.implement.decisions.btn.hover")),s.ɵɵadvance(2),s.ɵɵproperty("key","UpdateGeoObject"===i.type?"change.request.accept.changes.btn":"change.request.accept.newGeoObject.btn"),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","CreateGeoObject"===i.type)}}function B(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"button",100),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(6).onEditAttributes()})),s.ɵɵelement(1,"localize",101),s.ɵɵelementEnd()}}function q(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"button",102),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(6).onEditAttributes()})),s.ɵɵelement(1,"localize",103),s.ɵɵelementEnd()}}function U(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"button",104),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=s.ɵɵnextContext(5).$implicit;return s.ɵɵnextContext().onUpdate(e)})),s.ɵɵpipe(1,"localize"),s.ɵɵelement(2,"localize",105),s.ɵɵelementEnd()}2&e&&s.ɵɵproperty("title",s.ɵɵpipeBind1(1,1,"modal.button.update"))}function $(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"button",106),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=s.ɵɵnextContext(5).$implicit;return s.ɵɵnextContext().onDelete(e)})),s.ɵɵpipe(1,"localize"),s.ɵɵelement(2,"localize",107),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(6);s.ɵɵproperty("disabled",!i.isEditing)("title",s.ɵɵpipeBind1(1,2,"change.request.delete.request.hover"))}}function J(e,t){if(1&e&&(s.ɵɵelementStart(0,"span"),s.ɵɵtemplate(1,B,2,0,"button",96),s.ɵɵtemplate(2,q,2,0,"button",97),s.ɵɵtemplate(3,U,3,3,"button",98),s.ɵɵtemplate(4,$,3,4,"button",99),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(4).$implicit,i=s.ɵɵnextContext();s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!i.isEditing),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.isEditing),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.isEditing),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.permissions.includes("DELETE")&&n.createdBy===i.getUsername())}}function W(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",89),s.ɵɵtemplate(1,G,5,6,"span",90),s.ɵɵtemplate(2,J,5,4,"span",90),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(3).$implicit,i=s.ɵɵnextContext();s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.permissions.includes("WRITE_APPROVAL_STATUS")),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.isValid&&n.permissions.includes("WRITE_DETAILS")&&n.createdBy===i.getUsername())}}function Y(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",58),s.ɵɵelementStart(1,"div",59),s.ɵɵelementStart(2,"div",60),s.ɵɵelementStart(3,"div",1),s.ɵɵtemplate(4,R,2,7,"geoobject-shared-attribute-editor",61),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"div",62),s.ɵɵelementStart(6,"div",63),s.ɵɵtemplate(7,L,4,4,"div",64),s.ɵɵtemplate(8,_,4,4,"div",64),s.ɵɵelementEnd(),s.ɵɵelementStart(9,"div",63),s.ɵɵelementStart(10,"div"),s.ɵɵelementStart(11,"label"),s.ɵɵelement(12,"localize",65),s.ɵɵelementEnd(),s.ɵɵtemplate(13,N,3,1,"div",66),s.ɵɵtemplate(14,V,2,0,"p",67),s.ɵɵtemplate(15,F,6,4,"div",68),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(16,W,3,2,"div",69),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit,i=s.ɵɵnextContext();s.ɵɵadvance(4),s.ɵɵproperty("ngIf",n),s.ɵɵadvance(3),s.ɵɵproperty("ngIf",n.permissions.includes("READ_MAINTAINER_NOTES")),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.permissions.includes("READ_MAINTAINER_NOTES")),s.ɵɵadvance(5),s.ɵɵproperty("ngIf",n.documents.length>0),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",0===n.documents.length),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.permissions.includes("WRITE_DOCUMENTS")&&i.isEditing),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.permissions.includes("WRITE_APPROVAL_STATUS")||n.permissions.includes("DELETE"))}}var K=function(e,t,n,i){return{"status-pending-container":e,"status-accepted-container":t,"status-partial-container":n,"status-rejected-container":i}};function Q(e,t){if(1&e&&(s.ɵɵelementStart(0,"tr",36),s.ɵɵelementStart(1,"td",37),s.ɵɵelementStart(2,"div",38),s.ɵɵelementStart(3,"div"),s.ɵɵelementStart(4,"h3",39),s.ɵɵtext(5),s.ɵɵelementEnd(),s.ɵɵelementStart(6,"h4",40),s.ɵɵtext(7),s.ɵɵelementEnd(),s.ɵɵtemplate(8,k,2,0,"h4",41),s.ɵɵtemplate(9,P,2,0,"h4",41),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(10,"div",42),s.ɵɵelementStart(11,"div",1),s.ɵɵtemplate(12,j,2,0,"div",43),s.ɵɵtemplate(13,z,2,0,"div",43),s.ɵɵtemplate(14,D,4,4,"div",44),s.ɵɵelementStart(15,"div"),s.ɵɵelementStart(16,"p"),s.ɵɵelement(17,"localize",45),s.ɵɵtext(18," "),s.ɵɵelementStart(19,"strong"),s.ɵɵtext(20),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(21,"p"),s.ɵɵelement(22,"localize",46),s.ɵɵtext(23," "),s.ɵɵelementStart(24,"strong"),s.ɵɵtext(25),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(26,"p"),s.ɵɵelement(27,"localize",47),s.ɵɵtext(28," "),s.ɵɵelementStart(29,"strong"),s.ɵɵtext(30),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(31,Y,17,7,"div",48),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext().$implicit,i=s.ɵɵnextContext();s.ɵɵproperty("@fadeInOut",void 0)("ngClass",s.ɵɵpureFunction4(13,K,"PENDING"===n.approvalStatus,"ACCEPTED"===n.approvalStatus,"PARTIAL"===n.approvalStatus,"REJECTED"===n.approvalStatus)),s.ɵɵadvance(5),s.ɵɵtextInterpolate(n.geoObject.label),s.ɵɵadvance(2),s.ɵɵtextInterpolate(n.geoObject.code),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","UpdateGeoObject"===n.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","CreateGeoObject"===n.type),s.ɵɵadvance(3),s.ɵɵproperty("ngIf",!i.isRequestTooOld(n)&&"INVALID"===n.approvalStatus),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.isRequestTooOld(n)),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.permissions.includes("READ_CONTRIBUTOR_NOTES")),s.ɵɵadvance(6),s.ɵɵtextInterpolate(n.createdBy),s.ɵɵadvance(5),s.ɵɵtextInterpolate(n.email),s.ɵɵadvance(5),s.ɵɵtextInterpolate(n.phoneNumber),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","INVALID"!==n.approvalStatus&&!i.isRequestTooOld(n))}}var X=function(e){return{"row-active":e}},Z=function(e,t,n,i){return{"status-pending":e,"status-accepted":t,"status-partial":n,"status-rejected":i}};function ee(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"tr",26),s.ɵɵlistener("click",(function(e){s.ɵɵrestoreView(n);var i=t.$implicit;return s.ɵɵnextContext().toggle(e,i.oid)})),s.ɵɵelementStart(1,"td",27),s.ɵɵelementStart(2,"h5"),s.ɵɵelementStart(3,"strong"),s.ɵɵtext(4),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"td",28),s.ɵɵelementStart(6,"h5"),s.ɵɵelementStart(7,"strong"),s.ɵɵtext(8),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(9,"td",28),s.ɵɵelementStart(10,"h5"),s.ɵɵelementStart(11,"strong"),s.ɵɵtext(12),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(13,"td",29),s.ɵɵelementStart(14,"span",30),s.ɵɵelement(15,"date-text",31),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(16,"td",27),s.ɵɵelementStart(17,"h5",32),s.ɵɵelementStart(18,"strong"),s.ɵɵtext(19),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(20,"td",28),s.ɵɵelementStart(21,"h5"),s.ɵɵelementStart(22,"strong"),s.ɵɵtext(23),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(24,"td",33),s.ɵɵelement(25,"i",34),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(26,Q,32,18,"tr",35)}if(2&e){var i=t.$implicit,r=s.ɵɵnextContext();s.ɵɵproperty("ngClass",s.ɵɵpureFunction1(9,X,r.toggleId===i.oid)),s.ɵɵadvance(4),s.ɵɵtextInterpolate(i.createdBy),s.ɵɵadvance(4),s.ɵɵtextInterpolate(i.geoObjectType.label),s.ɵɵadvance(4),s.ɵɵtextInterpolate(i.geoObject.label),s.ɵɵadvance(3),s.ɵɵproperty("date",i.createDate),s.ɵɵadvance(2),s.ɵɵproperty("ngClass",s.ɵɵpureFunction4(11,Z,"PENDING"===i.approvalStatus,"ACCEPTED"===i.approvalStatus,"PARTIAL"===i.approvalStatus,"REJECTED"===i.approvalStatus)),s.ɵɵadvance(2),s.ɵɵtextInterpolate(i.statusLabel),s.ɵɵadvance(4),s.ɵɵtextInterpolate(i.oid),s.ɵɵadvance(3),s.ɵɵproperty("ngIf",r.toggleId===i.oid)}}function te(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",23),s.ɵɵelementStart(1,"pagination-controls",108),s.ɵɵlistener("pageChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().pageChange(e)})),s.ɵɵelementEnd(),s.ɵɵelementEnd()}}var ne=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}},ie=function(){function e(e,t,n,i,r,o,a,l,s,c){this.service=e,this.geomService=t,this.modalService=n,this.authService=i,this.localizationService=r,this.eventService=o,this.route=a,this.router=l,this.dateService=s,this.location=c,this.today=new Date,this.todayString=this.dateService.getDateString(new Date),this.objectKeys=Object.keys,this.page={count:0,pageNumber:1,pageSize:10,resultSet:[]},this.requests=[],this.columns=[],this.filterCriteria="ALL",this.sort=[{attribute:"createDate",ascending:!1}],this.hasBaseDropZoneOver=!1,this.oid=null,this.isValid=!0,this.isEditing=!1,this.columns=[{name:r.decode("change.request.user"),prop:"createdBy",sortable:!1},{name:r.decode("change.request.createDate"),prop:"createDate",sortable:!1,width:195},{name:r.decode("change.request.status"),prop:"approvalStatus",sortable:!1}]}return e.prototype.ngOnInit=function(){var e=this;this.oid=this.route.snapshot.paramMap.get("oid"),this.route.paramMap.subscribe((function(t){e.oid=t.get("oid"),e.refresh()})),null!=this.oid&&(this.toggleId=this.oid);var t={queueLimit:1,removeAfterUpload:!0,url:registry.contextPath+"/changerequest/upload-file-cr"};this.uploader=new o.FileUploader(t),this.uploader.onBuildItemForm=function(t,n){n.append("crOid",e.uploadRequest.oid)},this.uploader.onBeforeUploadItem=function(t){e.eventService.start()},this.uploader.onCompleteItem=function(t,n,i,r){e.fileRef.nativeElement.value="",e.eventService.complete()},this.uploader.onSuccessItem=function(t,n,i,r){var o=JSON.parse(n),a=e.requests.findIndex((function(e){return e.oid===o.requestId}));-1!==a&&e.requests[a].documents.push(o)},this.uploader.onErrorItem=function(t,n,i,r){var o=JSON.parse(n);e.error({error:o})},this.refresh()},e.prototype.isSorting=function(e){return this.sort.length>0&&this.sort[0].attribute===e},e.prototype.isAscending=function(e){return this.sort.length>0&&this.sort[0].ascending},e.prototype.onSort=function(e){var t=this.sort.findIndex((function(t){return t.attribute===e}));if(-1!==t){var n=this.sort[t];n.ascending=!n.ascending}else this.sort=[{attribute:e,ascending:!0}];this.refresh()},e.prototype.getGOTLabel=function(e){return e.geoObjectJson&&e.geoObjectJson.attributes&&e.geoObjectJson.attributes.displayLabel&&e.geoObjectJson.attributes.displayLabel.values&&e.geoObjectJson.attributes.displayLabel.values[0]&&e.geoObjectJson.attributes.displayLabel.values[0].value&&e.geoObjectJson.attributes.displayLabel.values[0].value.localeValues&&e.geoObjectJson.attributes.displayLabel.values[0].value.localeValues[0]&&e.geoObjectJson.attributes.displayLabel.values[0].value.localeValues[0].value?e.geoObjectJson.attributes.displayLabel.values[0].value.localeValues[0].value:e.geoObjectJson&&e.geoObjectJson.attributes&&e.geoObjectJson.attributes.code?e.geoObjectJson.attributes.code:this.localizationService.decode("geoObject.label")},e.prototype.setValid=function(e){this.isValid=e},e.prototype.onUpload=function(e){this.uploadRequest=e,null!=this.uploader.queue&&this.uploader.queue.length>0?this.uploader.uploadAll():this.error({message:this.localizationService.decode("io.missing.file"),error:{}})},e.prototype.onDownloadFile=function(e,t){window.location.href=registry.contextPath+"/changerequest/download-file-cr?crOid="+e.oid+"&vfOid="+t},e.prototype.onDeleteFile=function(e,t){var n=this;this.service.deleteFile(e.oid,t).then((function(){var n=e.documents.findIndex((function(e){return e.oid===t}));-1!==n&&e.documents.splice(n,1)})).catch((function(e){n.error(e)}))},e.prototype.fileOverBase=function(e){this.hasBaseDropZoneOver=e},e.prototype.pageChange=function(e){void 0===e&&(e=1),this.oid=null,this.refresh(e)},e.prototype.refresh=function(e){var t=this;void 0===e&&(e=1),this.geomService.destroy(),this.service.getAllRequests(this.page.pageSize,e,this.filterCriteria,this.sort,this.oid).then((function(e){t.page=e,t.requests=e.resultSet,t.requests.forEach((function(e){if(!e.current.geoObject)for(var t=0;t<e.actions.length;t++)e.actions[0].actionType===a.ActionTypes.CREATEGEOOBJECTACTION&&(e.current.geoObject=JSON.parse(JSON.stringify(e.actions[0].geoObjectJson)))}))})).catch((function(e){t.error(e)}))},e.prototype.onSelect=function(e){var t=this;this.geomService.destroy(),this.service.getAllRequests(this.page.pageSize,1,"ALL",this.sort,this.oid).then((function(e){t.requests=e.resultSet})).catch((function(e){t.error(e)}))},e.prototype.onExecute=function(e){var t=this;null!=e&&this.service.implementDecisions(e).then((function(n){e=n,t.refresh();var i=t.modalService.show(l.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});i.content.submitText=t.localizationService.decode("change.requests.more.geoobject.updates.submit.btn"),i.content.cancelText=t.localizationService.decode("change.requests.more.geoobject.updates.cancel.btn"),i.content.message=t.localizationService.decode("change.requests.more.geoobject.updates.message"),i.content.onConfirm.subscribe((function(){var e=t.getFirstGeoObjectInActions(n);if(null!=e)t.router.navigate(["/registry/location-manager"],{queryParams:{text:e.attributes.code,date:t.todayString,type:e.geoObjectType.code,code:e.attributes.code,uid:e.attributes.uid,pageContext:"DATA"}});else{var i=n.current.geoObject,r=n.current.geoObjectType;null!=i&&null!=r&&t.router.navigate(["/registry/location-manager"],{queryParams:{text:i.attributes.code,date:t.todayString,type:r.code,code:i.attributes.code,uid:i.attributes.uid,pageContext:"DATA"}})}}))})).catch((function(e){t.error(e)}))},e.prototype.onReject=function(e){var t=this;this.service.rejectChangeRequest(e).then((function(){t.refresh()})).catch((function(e){t.error(e)}))},e.prototype.getFirstGeoObjectInActions=function(e){for(var t=0;t<e.actions.length;t++){var n=e.actions[t];if(n.hasOwnProperty("geoObjectJson"))return n.geoObjectJson}return null},e.prototype.onDelete=function(e){var t=this;if(null!=e){var n=this.modalService.show(l.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});n.content.type="danger",n.content.submitText=this.localizationService.decode("change.request.delete.request.confirm.btn"),n.content.message=this.localizationService.decode("change.request.delete.request.message"),n.content.onConfirm.subscribe((function(n){t.service.delete(e.oid).then((function(e){for(var n=-1,i=0;i<t.requests.length;i++){if(t.requests[i].oid===e){n=i;break}}n>-1&&t.requests.splice(n,1),t.refresh()})).catch((function(e){t.error(e)}))}))}},e.prototype.onUpdate=function(e){var t=this;null!=e&&this.service.update(e).then((function(e){t.refresh(),t.isEditing=!1})).catch((function(e){t.error(e)}))},e.prototype.applyActionStatusProperties=function(e){var t=this;this.service.setActionStatus(e.oid,e.approvalStatus).then((function(n){e.decisionMaker="PENDING"!==e.approvalStatus?t.authService.getUsername():""})).catch((function(e){t.error(e)}))},e.prototype.error=function(e){this.bsModalRef=l.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.prototype.requestTrackBy=function(e,t){return t.oid},e.prototype.toggle=function(e,t){var n=this;this.location.replaceState("/registry/change-requests/"+t),e.target.parentElement.className.includes("btn")||e.target.className.includes("btn")||(this.toggleId===t?this.toggleId=null:(this.toggleId=t,this.requests.forEach((function(e){e.oid===t&&(n.actions=e.actions)}))))},e.prototype.filter=function(e){this.filterCriteria=e,this.refresh(1)},e.prototype.setActionStatus=function(e,t){var n=this;this.modalService.show(l.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}).content.onConfirm.subscribe((function(i){e.approvalStatus=t,n.applyActionStatusProperties(e)}))},e.prototype.getActiveDetailComponent=function(e){return e.actionType.endsWith("CreateGeoObjectAction")||e.actionType.endsWith("UpdateGeoObjectAction"),e},e.prototype.getUsername=function(){return this.authService.getUsername()},e.prototype.isRequestTooOld=function(e){if(e.actions&&e.actions.length>0){var t=e.actions[0];return t.actionType===a.ActionTypes.UPDATEGEOOBJECTACTION||t.actionType===a.ActionTypes.CREATEGEOOBJECTACTION&&!t.geoObjectJson.attributes.exists}return!0},e.prototype.onEditAttributes=function(){this.isEditing=!this.isEditing},e.prototype.canEdit=function(e){return e.permissions.includes("WRITE_DETAILS")&&this.isEditing},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.ChangeRequestService),s.ɵɵdirectiveInject(c.GeometryService),s.ɵɵdirectiveInject(d.BsModalService),s.ɵɵdirectiveInject(p.AuthService),s.ɵɵdirectiveInject(p.LocalizationService),s.ɵɵdirectiveInject(p.EventService),s.ɵɵdirectiveInject(u.ActivatedRoute),s.ɵɵdirectiveInject(u.Router),s.ɵɵdirectiveInject(m.DateService),s.ɵɵdirectiveInject(g.Location))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["request-table"]],viewQuery:function(e,t){if(1&e&&s.ɵɵviewQuery(E,1),2&e){var n;s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.fileRef=n.first)}},inputs:{toggleId:"toggleId"},decls:49,vars:21,consts:[[1,"row"],[1,"col-md-12"],[1,"form-group","button-row"],[2,"border-bottom","1px solid",3,"routerLink","ngClass","click"],["key","change.request.all.filter.link"],[2,"margin-left","5px","border-bottom","1px solid",3,"routerLink","ngClass","click"],["key","change.request.pending.filter.link"],["key","change.request.accepted.filter.link"],["key","change.request.partial.filter.link"],["key","change.request.rejected.filter.link"],[2,"border-top","solid 3px #6BA542"],[1,"table"],[2,"height","50px","color","grey"],[2,"vertical-align","middle"],[3,"click"],["key","change.request.contributor.label"],["class","fa cr-sort-arrow",3,"ngClass",4,"ngIf"],["key","geoObjectType.label"],["key","geoObject.label"],["key","change.request.date.contributed.label"],["key","change.request.status.label"],["key","change.request.id.label"],["ngFor","",3,"ngForOf","ngForTrackBy"],[1,"solid-table-footer"],["class","solid-table-footer",4,"ngIf"],[1,"fa","cr-sort-arrow",3,"ngClass"],[1,"clickable",2,"height","50px",3,"ngClass","click"],[1,"col-md-1"],[1,"col-md-2"],[1,"col-md-1",2,"vertical-align","middle","color","grey"],[1,"date-string-display"],[3,"date"],[3,"ngClass"],[1,"col-md-1",2,"vertical-align","middle","text-align","right","padding-right","25px"],["aria-hidden","true",1,"arrow","arrow-right"],["style","background-color:#f7f7f7;",3,"ngClass",4,"ngIf"],[2,"background-color","#f7f7f7",3,"ngClass"],["colspan","7"],[1,"geoobject-panel-header"],[2,"margin-top","10px"],[2,"font-style","italic"],["style","font-style: italic;",4,"ngIf"],[1,"row",2,"margin","0","background","white"],["class","cr-details-invalid error-message",4,"ngIf"],["class","form-group","style","margin-top:20px;",4,"ngIf"],["key","change.request.contributor.prefix.label"],["key","change.request.contributor.email.prefix.label"],["key","change.request.contributor.phone.prefix.label"],["class","cr-details",4,"ngIf"],["key","change.request.type.update.geoobject.label"],["key","change.request.type.create.geoobject.label"],[1,"cr-details-invalid","error-message"],["key","change.request.invalid"],["key","change.request.tooOld"],[1,"form-group",2,"margin-top","20px"],[3,"for"],["key","change.request.contributor.notes.label"],[1,"form-control",2,"height","90px","max-width","100%",3,"id","ngModel","disabled","ngModelChange"],[1,"cr-details"],[1,"action-card",2,"margin-bottom","10px","background-color","white"],[1,"row",2,"background","white"],[3,"readOnly","geoObjectType","postGeoObject","changeRequest","hierarchies","isGeometryInlined","isNew","valid",4,"ngIf"],[1,"row",2,"border-top","1px grey solid","margin","0","padding","10px 0"],[1,"col-md-6"],["class","form-group",4,"ngIf"],["key","change.request.reference.documents.label"],["style","border:1px solid #ccc;border-radius: 4px;",4,"ngIf"],["style","color:grey;font-style:italic;",4,"ngIf"],["style","padding:10px 0;",4,"ngIf"],["class","button-holder","style","margin-bottom:20px;min-height:40px;",4,"ngIf"],[3,"readOnly","geoObjectType","postGeoObject","changeRequest","hierarchies","isGeometryInlined","isNew","valid"],["attributeEditor",""],[1,"form-group"],["key","change.request.maintainer.notes.label"],[1,"form-control",2,"height","90px","max-width","100%","margin","0",3,"id","ngModel","disabled","ngModelChange"],["key","change.request.action.detail.additionalNotes"],["type","text",1,"form-control",2,"width","100%",3,"id","ngModel","disabled","ngModelChange"],[2,"border","1px solid #ccc","border-radius","4px"],[2,"padding","10px","margin","0"],["class","list-group-item","style","padding:0;font-size:inherit;",4,"ngFor","ngForOf"],[1,"list-group-item",2,"padding","0","font-size","inherit"],["aria-hidden","true",1,"fa","fa-times","ico-remove",2,"margin-left","10px",3,"click"],[2,"color","grey","font-style","italic"],["key","change.request.no.documents.label"],[2,"padding","10px 0"],["name","file","type","file","ng2FileSelect","","required","",1,"ghost-input",2,"display","inline-block","padding","0","height","auto","border-radius","0","margin-top","10px",3,"uploader"],["myFile",""],[1,"btn","btn-primary","pull-right",2,"margin","0",3,"title","click"],["key","change.request.reference.document.upload"],[1,"button-holder",2,"margin-bottom","20px","min-height","40px"],[4,"ngIf"],["type","submit","role","button",1,"btn","btn-primary",2,"margin","0",3,"disabled","title","click"],[3,"key"],["type","submit","class","btn btn-danger","style","margin:0 10px;","role","button",3,"disabled","title","click",4,"ngIf"],["type","submit","role","button",1,"btn","btn-danger",2,"margin","0 10px",3,"disabled","title","click"],["key","change.request.reject.all.btn"],["type","submit","class","btn btn-primary","role","button",3,"click",4,"ngIf"],["type","submit","class","btn btn-default","role","button",3,"click",4,"ngIf"],["type","submit","role","button","class","btn btn-primary",3,"title","click",4,"ngIf"],["type","submit","role","button","class","btn btn-danger pull-right",3,"disabled","title","click",4,"ngIf"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","changeovertime.manageVersions.button.label"],["type","submit","role","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit","role","button",1,"btn","btn-primary",3,"title","click"],["key","modal.button.update"],["type","submit","role","button",1,"btn","btn-danger","pull-right",3,"disabled","title","click"],["key","change.request.delete.request.btn"],[3,"pageChange"]],template:function(e,t){1&e&&(s.ɵɵelementStart(0,"div",0),s.ɵɵelementStart(1,"div",1),s.ɵɵelementStart(2,"div",2),s.ɵɵelementStart(3,"a",3),s.ɵɵlistener("click",(function(){return t.filter("ALL")})),s.ɵɵelement(4,"localize",4),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"a",5),s.ɵɵlistener("click",(function(){return t.filter("PENDING")})),s.ɵɵelement(6,"localize",6),s.ɵɵelementEnd(),s.ɵɵelementStart(7,"a",5),s.ɵɵlistener("click",(function(){return t.filter("ACCEPTED")})),s.ɵɵelement(8,"localize",7),s.ɵɵelementEnd(),s.ɵɵelementStart(9,"a",5),s.ɵɵlistener("click",(function(){return t.filter("PARTIAL")})),s.ɵɵelement(10,"localize",8),s.ɵɵelementEnd(),s.ɵɵelementStart(11,"a",5),s.ɵɵlistener("click",(function(){return t.filter("REJECTED")})),s.ɵɵelement(12,"localize",9),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(13,"hr",10),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(14,"div",0),s.ɵɵelementStart(15,"div",1),s.ɵɵelementStart(16,"table",11),s.ɵɵelementStart(17,"thead"),s.ɵɵelementStart(18,"tr",12),s.ɵɵelementStart(19,"th",13),s.ɵɵelementStart(20,"a",14),s.ɵɵlistener("click",(function(){return t.onSort("createdBy")})),s.ɵɵelement(21,"localize",15),s.ɵɵelementEnd(),s.ɵɵtemplate(22,x,1,1,"i",16),s.ɵɵelementEnd(),s.ɵɵelementStart(23,"th",13),s.ɵɵelementStart(24,"a",14),s.ɵɵlistener("click",(function(){return t.onSort("geoObjectTypeLabel")})),s.ɵɵelement(25,"localize",17),s.ɵɵelementEnd(),s.ɵɵtemplate(26,O,1,1,"i",16),s.ɵɵelementEnd(),s.ɵɵelementStart(27,"th",13),s.ɵɵelementStart(28,"a",14),s.ɵɵlistener("click",(function(){return t.onSort("geoObjectLabel")})),s.ɵɵelement(29,"localize",18),s.ɵɵelementEnd(),s.ɵɵtemplate(30,I,1,1,"i",16),s.ɵɵelementEnd(),s.ɵɵelementStart(31,"th",13),s.ɵɵelementStart(32,"a",14),s.ɵɵlistener("click",(function(){return t.onSort("createDate")})),s.ɵɵelement(33,"localize",19),s.ɵɵelementEnd(),s.ɵɵtemplate(34,M,1,1,"i",16),s.ɵɵelementEnd(),s.ɵɵelementStart(35,"th",13),s.ɵɵelementStart(36,"a",14),s.ɵɵlistener("click",(function(){return t.onSort("approvalStatus")})),s.ɵɵelement(37,"localize",20),s.ɵɵelementEnd(),s.ɵɵtemplate(38,w,1,1,"i",16),s.ɵɵelementEnd(),s.ɵɵelementStart(39,"th",13),s.ɵɵelementStart(40,"a",14),s.ɵɵlistener("click",(function(){return t.onSort("oid")})),s.ɵɵelement(41,"localize",21),s.ɵɵelementEnd(),s.ɵɵtemplate(42,T,1,1,"i",16),s.ɵɵelementEnd(),s.ɵɵelement(43,"th"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(44,"tbody"),s.ɵɵtemplate(45,ee,27,16,"ng-template",22),s.ɵɵpipe(46,"paginate"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(47,"div",23),s.ɵɵtemplate(48,te,2,0,"div",24),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(3),s.ɵɵproperty("ngClass","ALL"===t.filterCriteria?"cr-filter-link-active":""),s.ɵɵadvance(2),s.ɵɵproperty("ngClass","PENDING"===t.filterCriteria?"cr-filter-link-active":""),s.ɵɵadvance(2),s.ɵɵproperty("ngClass","ACCEPTED"===t.filterCriteria?"cr-filter-link-active":""),s.ɵɵadvance(2),s.ɵɵproperty("ngClass","PARTIAL"===t.filterCriteria?"cr-filter-link-active":""),s.ɵɵadvance(2),s.ɵɵproperty("ngClass","REJECTED"===t.filterCriteria?"cr-filter-link-active":""),s.ɵɵadvance(11),s.ɵɵproperty("ngIf",t.isSorting("createdBy")),s.ɵɵadvance(4),s.ɵɵproperty("ngIf",t.isSorting("geoObjectTypeLabel")),s.ɵɵadvance(4),s.ɵɵproperty("ngIf",t.isSorting("geoObjectLabel")),s.ɵɵadvance(4),s.ɵɵproperty("ngIf",t.isSorting("createDate")),s.ɵɵadvance(4),s.ɵɵproperty("ngIf",t.isSorting("approvalStatus")),s.ɵɵadvance(4),s.ɵɵproperty("ngIf",t.isSorting("oid")),s.ɵɵadvance(3),s.ɵɵproperty("ngForOf",s.ɵɵpipeBind2(46,14,t.requests,s.ɵɵpureFunction3(17,ne,t.page.pageSize,t.page.pageNumber,t.page.count)))("ngForTrackBy",t.requestTrackBy),s.ɵɵadvance(3),s.ɵɵproperty("ngIf",t.page.resultSet.length>0))},directives:[u.RouterLinkWithHref,g.NgClass,h.LocalizeComponent,g.NgIf,g.NgForOf,f.DateTextComponent,y.DefaultValueAccessor,y.NgControlStatus,y.NgModel,v.GeoObjectSharedAttributeEditorComponent,b.FileSelectDirective,S.PaginationControlsComponent],pipes:[S.PaginatePipe,C.LocalizePipe],styles:[".vertical-center {\n\tposition: relative;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n}\n\n.status-pending {\n\tcolor: orange;\n}\n\n.status-accepted,\n.status-partial {\n\tcolor: #6BA542;\n}\n\n.status-rejected {\n\tcolor: #d43f3a;\n}\n\n.status-pending-container {\n\tborder: solid 2px orange;\n}\n.status-accepted-container,\n.status-partial-container {\n\tborder: solid 2px #6BA542;\n}\n.status-rejected-container {\n\tborder: solid 2px #d43f3a;\n}\n\n.cr-sort-arrow {\n\tfont-size: 14px;\n}\n\n.cr-filter-link-active,\n.cr-filter-link-active:active {\n\t/* border: solid 1px #6BA542; */\n    border-radius: 10px;\n    background: #6BA542;\n    color: white;\n    font-weight: bold;\n    padding: 3px 15px 3px 15px;\n}\n.cr-filter-link-active:hover,\n.cr-filter-link-active:focus {\n\tcolor:white;\n}\n\n/* .btn {\n\tborder: 2px solid; \n}\n.btn:disabled {\n\tborder: none;\n}\n\n.btn.btn-danger {\n\tbackground-color:#ffeeed; \n\tcolor:#d43f3a;\n}\n.btn.btn-danger:hover,\n.btn.btn-danger:active {\n\tcolor:#d43f3a;\n\tbackground-color:#fff7f6; \n\tborder-color: #d43f3a;\n}\n.btn.btn-danger:disabled:hover {\n\tbackground-color:#ffeeed; \n}\n\n.btn.btn-warning {\n\tbackground-color: #ffefd7;\n\tcolor: orange;\n}\n.btn.btn-warning:hover {\n\tbackground-color: #fff4e5;\n\tborder-color: orange;\n}\n.btn.btn-warning:disabled {\n\tbackground-color: #ffefd7;\n}\n\n.clickable:hover {\n\tbackground-color: #f7f7f7;\n\tcursor: pointer;\n}\n.clickable:hover .arrow.arrow-right {\n\ttransform: rotate(45deg);\n    -webkit-transform: rotate(45deg);\n} */\n\ntr.row-active {\n\tbackground-color:#f7f7f7;\n}\n\n\n.arrow {\n  border: solid black;\n  border-width: 0 1px 1px 0;\n  display: inline-block;\n  padding: 5px;\n}\n.arrow-right {\n  transform: rotate(-45deg);\n  -webkit-transform: rotate(-45deg);\n}\n.arrow-down {\n  transform: rotate(45deg);\n  -webkit-transform: rotate(45deg);\n}\n\n.form-group textarea:focus {\n\tborder-color: #edf4e8;\n\t-webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(107,165,66,.6);\n\tbox-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(107,165,66,.6);\n\n}\ntextarea[readonly]:focus {\n\tbox-shadow: none;\n\tborder: 1px solid #ccc;\n\tcursor: not-allowed;\n}\n\n\n.geoobject-panel-header{\n    width: 100%;\n    background: grey;\n    color: white;\n    padding: 10px;\n}\n"],encapsulation:2,data:{animation:[[r.trigger("fadeInOut",[r.transition(":enter",[r.style({opacity:0}),r.animate("300ms")]),r.transition(":leave",r.animate("100ms",r.style({opacity:0})))]),r.trigger("fadeIn",[r.transition(":enter",[r.style({opacity:0}),r.animate("500ms")])])]]}}),e}();t.RequestTableComponent=ie,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(ie,[{type:i.Component,args:[{selector:"request-table",templateUrl:"./request-table.component.html",styleUrls:["./request-table.css"],encapsulation:i.ViewEncapsulation.None,animations:[[r.trigger("fadeInOut",[r.transition(":enter",[r.style({opacity:0}),r.animate("300ms")]),r.transition(":leave",r.animate("100ms",r.style({opacity:0})))]),r.trigger("fadeIn",[r.transition(":enter",[r.style({opacity:0}),r.animate("500ms")])])]]}]}],(function(){return[{type:c.ChangeRequestService},{type:c.GeometryService},{type:d.BsModalService},{type:p.AuthService},{type:p.LocalizationService},{type:p.EventService},{type:u.ActivatedRoute},{type:u.Router},{type:m.DateService},{type:g.Location}]}),{toggleId:[{type:i.Input}],fileRef:[{type:i.ViewChild,args:["myFile"]}]})},1096:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeRequestChangeOverTimeAttributeEditor=void 0;var i=n(544),r=n(1023),o=n(378),a=n(1097),l=n(1149),s=n(858),c=n(1015),d=n(44),p=function(){function e(e,t,n){if(this.onChangeSubject=new d.Subject,this.changeRequestEditor=e,this.attribute=t,this.hierarchy=n,this.getEditAction(),null!=n)for(var i=0;i<this.hierarchy.entries.length;i++){var r=this.hierarchy.entries[i];null==r.parents&&(r.parents={}),null==r.loading&&(r.loading={});for(var o=0;o<this.hierarchy.types.length;o++){var a=this.hierarchy.types[o];null==r.parents[a.code]&&(r.parents[a.code]={text:"",geoObject:null})}}this.editors=this.generateEditors()}return e.prototype.getEditAction=function(){if(null==this.editAction){var e=r.ChangeRequest.getActionsForAttribute(this.changeRequestEditor.changeRequest,this.attribute.code,null==this.hierarchy?null:this.hierarchy.code);0===e.length?(this.editAction=new r.UpdateAttributeOverTimeAction(this.attribute.code),"_PARENT_"===this.attribute.code&&(this.editAction.attributeDiff.hierarchyCode=this.hierarchy.code)):this.editAction=e[e.length-1]}return this.editAction},e.prototype.onChange=function(e){var t=this,n=this.hasChanges(),i=this.changeRequestEditor.changeRequest.actions.findIndex((function(e){return t.editAction===e}));-1===i||n?-1===i&&n&&this.changeRequestEditor.changeRequest.actions.push(this.editAction):this.changeRequestEditor.changeRequest.actions.splice(i,1),this.validate(),this.onChangeSubject.next(e),this.changeRequestEditor.onChange(e)},e.prototype.hasChanges=function(){var e=!0;this.editAction.actionType===i.ActionTypes.UPDATEATTRIBUTETACTION&&(0===this.editAction.attributeDiff.valuesOverTime.length&&(e=!1));return e},e.prototype.isValid=function(){return this._isValid},e.prototype.validate=function(e){void 0===e&&(e=!1);var t=this.validateEditors(),n=this.changeRequestEditor.dateService.checkRanges(this.attribute,this.editors),i=!1;if("exists"!==this.attribute.code){var r=o.GeoObjectType.getAttribute(this.changeRequestEditor.geoObjectType,"exists"),a=this.changeRequestEditor.getEditorForAttribute(r).getEditors();i=this.changeRequestEditor.dateService.checkExistRanges(this.editors,a)}else e||this.changeRequestEditor.validate(!0);return this._isValid=t&&!n&&!i,this._isValid},e.prototype.validateEditors=function(){var e=!0;return this.editors.forEach((function(t){t.validate()||(e=!1)})),e},e.prototype.findExistingValueOverTimeByOid=function(e){if(this.changeRequestEditor.geoObject.attributes[this.attribute.code]){var t=this.changeRequestEditor.geoObject.attributes[this.attribute.code].values.findIndex((function(t){return t.oid===e}));if(-1!==t)return this.changeRequestEditor.geoObject.attributes[this.attribute.code].values[t]}return null},e.prototype.getEditor=function(e){var t=this.editors.filter((function(t){return t.oid===e}));return t.length>0?t[0]:null},e.prototype.getEditors=function(e){return void 0===e&&(e=!0),this.editors.filter((function(t){return e||null!=t.diff}))},e.prototype.generateEditors=function(){var e=this,t=r.ChangeRequest.getActionsForAttribute(this.changeRequestEditor.changeRequest,this.attribute.code,null==this.hierarchy?null:this.hierarchy.code),n=[];if("_PARENT_"===this.attribute.code?this.hierarchy.entries.forEach((function(t){var i=new l.HierarchyCREditor(e,e.attribute,e.editAction,t,e.hierarchy);n.push(i)})):this.changeRequestEditor.geoObject.attributes[this.attribute.code]&&this.changeRequestEditor.geoObject.attributes[this.attribute.code].values.forEach((function(t){var i=new a.ValueOverTimeCREditor(e,e.attribute,e.editAction);i.valueOverTime=t,n.push(i)})),"UpdateGeoObject"===this.changeRequestEditor.changeRequest.type)for(var i=t.length,o=0;o<i;++o){t[o].attributeDiff.valuesOverTime.forEach((function(t){var i=n.findIndex((function(e){return e.oid===t.oid})),r=-1===i?null:n[i];null==r?((r="_PARENT_"===e.attribute.code?new l.HierarchyCREditor(e,e.attribute,e.editAction,null,e.hierarchy):new a.ValueOverTimeCREditor(e,e.attribute,e.editAction)).diff=t,n.push(r)):(r.diff=t,"_PARENT_"===e.attribute.code&&(r.hierarchyEntry.parents=t.parents))}))}return n},e.prototype.createNewVersion=function(e){var t;if(t="_PARENT_"===this.attribute.code?new l.HierarchyCREditor(this,this.attribute,this.editAction,null,this.hierarchy):new a.ValueOverTimeCREditor(this,this.attribute,this.editAction),"CreateGeoObject"===this.changeRequestEditor.changeRequest.type)if("_PARENT_"===this.attribute.code)t.hierarchyEntry=t.createEmptyHierarchyEntry(),t.hierarchyOverTime.entries.push(t.hierarchyEntry);else{var n=new o.ValueOverTime;n.oid=s.v4(),this.editAction.geoObjectJson.attributes[this.attribute.code].values.push(n),t.valueOverTime=n}else t.constructNewDiff("CREATE");if("local"===this.attribute.type)t.value=this.changeRequestEditor.localizationService.create();else if("geometry"===this.attribute.type){var r=this.getEditors(!0);r.length>0?t.value=null!=e?JSON.parse(JSON.stringify(e.value)):JSON.parse(JSON.stringify(r[r.length-1].value)):t.value=c.GeometryService.createEmptyGeometryValue(this.changeRequestEditor.geoObjectType.geometryType)}else if("term"===this.attribute.type){var d=o.GeoObjectType.getGeoObjectTypeTermAttributeOptions(this.changeRequestEditor.geoObjectType,this.attribute.code);d&&d.length>0&&(t.value=d[0].code)}else"_PARENT_"===this.attribute.code&&"UpdateGeoObject"===this.changeRequestEditor.changeRequest.type?t.hierarchyEntry=t.createEmptyHierarchyEntry():"_PARENT_"!==this.attribute.code&&(t.value=null);return this.editors.push(t),this.onChange(i.ChangeType.ADD),t},e.prototype.remove=function(e){if(null!=e.diff&&"CREATE"===e.diff.action||"CreateGeoObject"===this.changeRequestEditor.changeRequest.type){var t=this.editors.findIndex((function(t){return t.oid===e.oid}));-1!==t&&this.editors.splice(t,1)}e.remove(),this.validate()},e}();t.ChangeRequestChangeOverTimeAttributeEditor=p},1097:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueOverTimeCREditor=void 0;var i=n(1023),r=n(858),o=n(554),a=n(1002),l=n(291),s=n(1015),c=n(44),d=n(544),p=n(1020),u=function(){function e(e,t,n){this.onChangeSubject=new c.Subject,this._isValid=!0,this.attr=t,this.changeRequestAttributeEditor=e,this.action=n}return e.prototype.onChange=function(e){this.changeRequestAttributeEditor.onChange(e),this.onChangeSubject.next(e)},e.prototype.getGeoObjectTimeRangeStorage=function(){return this.valueOverTime},e.prototype.getValueFromGeoObjectForDiff=function(){return this.valueOverTime.value},e.prototype.validate=function(){this.conflictMessages||(this.conflictMessages=new Set);var e=this.changeRequestAttributeEditor.changeRequestEditor.dateService,t=e.validateDate(null==this.startDate?null:e.getDateFromDateString(this.startDate),!0,!0),n=e.validateDate(null==this.endDate?null:e.getDateFromDateString(this.endDate),!0,!0);return this._isValid=!0,t.valid&&n.valid||(this._isValid=!1),this.validateUpdateReference(),this._isValid},e.prototype.validateUpdateReference=function(){var e=this.changeRequestAttributeEditor.changeRequestEditor.dateService.missingReference;(this.conflictMessages.delete(e),"UpdateGeoObject"===this.changeRequestAttributeEditor.changeRequestEditor.changeRequest.type&&null!=this.diff&&"CREATE"!==this.diff.action)&&(null==this.findExistingValueOverTimeByOid(this.diff.oid)&&(this._isValid=!1,this.conflictMessages.add(e)))},e.prototype.findExistingValueOverTimeByOid=function(e){if(this.changeRequestAttributeEditor.changeRequestEditor.geoObject.attributes[this.attr.code]){var t=this.changeRequestAttributeEditor.changeRequestEditor.geoObject.attributes[this.attr.code].values.findIndex((function(t){return t.oid===e}));if(-1!==t)return this.changeRequestAttributeEditor.changeRequestEditor.geoObject.attributes[this.attr.code].values[t]}return null},Object.defineProperty(e.prototype,"oid",{get:function(){return null!=this.diff?this.diff.oid:null!=this.getGeoObjectTimeRangeStorage()?this.getGeoObjectTimeRangeStorage().oid:null},set:function(e){null!=this.diff?this.diff.oid=e:null!=this.getGeoObjectTimeRangeStorage()&&(this.getGeoObjectTimeRangeStorage().oid=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startDate",{get:function(){return this.getStartDate()},set:function(e){this.setStartDate(e)},enumerable:!1,configurable:!0}),e.prototype.getStartDate=function(){return null!=this.diff&&void 0!==this.diff.newStartDate?this.diff.newStartDate:null!=this.diff&&void 0!==this.diff.oldStartDate?this.diff.oldStartDate:null!=this.getGeoObjectTimeRangeStorage()?this.getGeoObjectTimeRangeStorage().startDate:null},e.prototype.constructNewDiff=function(e){if(this.diff=new i.ValueOverTimeDiff,this.diff.action=e,this.action.attributeDiff.valuesOverTime.push(this.diff),"CREATE"===e)this.diff.oid=r.v4();else{var t=this.getGeoObjectTimeRangeStorage();this.diff.oid=t.oid,this.diff.oldStartDate=t.startDate,this.diff.oldEndDate=t.endDate}},Object.defineProperty(e.prototype,"oldStartDate",{get:function(){return null!=this.diff?this.diff.oldStartDate:null},set:function(e){null!=this.diff&&(this.diff.oldStartDate=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endDate",{get:function(){return this.getEndDate()},set:function(e){if(!this.isDelete()){var t=this.getGeoObjectTimeRangeStorage();if("UpdateAttributeAction"===this.action.actionType){if(null==this.diff)if(null==t)this.constructNewDiff("CREATE");else{if(t.endDate===e)return;this.constructNewDiff("UPDATE"),this.diff.oldValue=this.getValueFromGeoObjectForDiff()}e===this.diff.oldEndDate?delete this.diff.newEndDate:this.diff.newEndDate=e,this.removeEmptyDiff()}else"CreateGeoObjectAction"===this.action.actionType&&(t.endDate=e);this.onChange(d.ChangeType.END_DATE)}},enumerable:!1,configurable:!0}),e.prototype.getEndDate=function(){return null!=this.diff&&void 0!==this.diff.newEndDate?this.diff.newEndDate:null!=this.diff&&void 0!==this.diff.oldStartDate?this.diff.oldEndDate:null!=this.getGeoObjectTimeRangeStorage()?this.getGeoObjectTimeRangeStorage().endDate:null},e.prototype.setStartDate=function(e){if(!this.isDelete()){var t=this.getGeoObjectTimeRangeStorage();if("UpdateAttributeAction"===this.action.actionType){if(null==this.diff)if(null==this.getGeoObjectTimeRangeStorage())this.constructNewDiff("CREATE");else{if(t.startDate===e)return;this.constructNewDiff("UPDATE"),this.diff.oldValue=this.getValueFromGeoObjectForDiff()}e===this.diff.oldStartDate?delete this.diff.newStartDate:this.diff.newStartDate=e,this.removeEmptyDiff()}else"CreateGeoObjectAction"===this.action.actionType&&(t.startDate=e);this.onChange(d.ChangeType.START_DATE)}},Object.defineProperty(e.prototype,"oldEndDate",{get:function(){return null!=this.diff?this.diff.oldEndDate:null},set:function(e){null!=this.diff&&(this.diff.oldEndDate=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null!=this.diff&&void 0!==this.diff.newValue?this.diff.newValue:null!=this.diff&&void 0!==this.diff.oldValue?this.diff.oldValue:null!=this.getGeoObjectTimeRangeStorage()?this.getGeoObjectTimeRangeStorage().value:null},set:function(e){if(!this.isDelete()){if(null!=e){if("term"===this.attr.type)e=[e];else if("date"===this.attr.type)e=new Date(e).getTime();else if("geometry"===this.attr.type){if("MultiPoint"===e.type)for(var t=0;t<e.coordinates.length;++t){var n=e.coordinates[t];n[0]=Number.parseFloat(n[0].toFixed(6)),n[1]=Number.parseFloat(n[1].toFixed(6))}else"Point"===e.type&&(e.coordinates=[Number.parseFloat(e.coordinates[0].toFixed(6)),Number.parseFloat(e.coordinates[1].toFixed(6))])}}else null==e&&("geometry"===this.attr.type?e=s.GeometryService.createEmptyGeometryValue(this.changeRequestAttributeEditor.changeRequestEditor.geoObjectType.geometryType):"character"===this.attr.type&&(e=""));if("UpdateAttributeAction"===this.action.actionType){if(null==this.diff)if(null==this.getGeoObjectTimeRangeStorage())this.diff=new i.ValueOverTimeDiff,this.diff.oid=r.v4(),this.diff.action="CREATE",this.action.attributeDiff.valuesOverTime.push(this.diff);else{if(this.areValuesEqual(this.valueOverTime.value,e))return;this.diff=new i.ValueOverTimeDiff,this.diff.action="UPDATE",this.diff.oid=this.getGeoObjectTimeRangeStorage().oid,this.diff.oldValue=this.valueOverTime.value,this.diff.oldStartDate=this.getGeoObjectTimeRangeStorage().startDate,this.diff.oldEndDate=this.getGeoObjectTimeRangeStorage().endDate,this.action.attributeDiff.valuesOverTime.push(this.diff)}"CREATE"!==this.diff.action&&this.areValuesEqual(this.diff.oldValue,e)?delete this.diff.newValue:this.diff.newValue=JSON.parse(JSON.stringify(e)),this.removeEmptyDiff()}else"CreateGeoObjectAction"===this.action.actionType&&(this.valueOverTime.value=e);this.onChange(d.ChangeType.VALUE)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldValue",{get:function(){return null!=this.diff?this.diff.oldValue:null},set:function(e){null!=this.diff&&(this.diff.oldValue=e)},enumerable:!1,configurable:!0}),e.prototype.setLocalizedValue=function(e){this.value=JSON.parse(JSON.stringify(e))},e.prototype.removeEmptyDiff=function(){var e=this;if(null!=this.diff&&void 0===this.diff.newValue&&void 0===this.diff.newStartDate&&void 0===this.diff.newEndDate){var t=this.action.attributeDiff.valuesOverTime,n=t.findIndex((function(t){return t.oid===e.diff.oid}));-1!==n&&t.splice(n,1),this.diff=null}},e.prototype.areValuesEqual=function(e,t){if("boolean"===this.attr.type)return e===t;if(""===e&&null==t||""===t&&null==e)return!0;if(!e&&!t)return!0;if(!e&&t||!t&&e)return!1;if("term"===this.attr.type){if(null!=e&&null!=t)return e.length===t.length&&e[0]===t[0]}else{if("geometry"===this.attr.type)return o.default(e,t);if("date"===this.attr.type)return("string"==typeof e?parseInt(e):e)===("string"==typeof t?parseInt(t):t);if("local"===this.attr.type){if(!e.localeValues||!t.localeValues||e.localeValues.length!==t.localeValues.length)return!1;for(var n=e.localeValues.length,i=0;i<n;++i){var r=e.localeValues[i],a=this.getValueAtLocale(t,r.locale),l=r.value;if(!(""===l&&null==a||""===a&&null==l)&&l!==a)return!1}return!0}}return e===t},e.prototype.getValueAtLocale=function(e,t){return new l.LocalizedValue(e.localizedValue,e.localeValues).getValue(t)},e.prototype.remove=function(){var e=this;if("UpdateAttributeAction"===this.action.actionType)if(null!=this.diff&&"CREATE"===this.diff.action){var t=this.action;(n=t.attributeDiff.valuesOverTime.findIndex((function(t){return t.oid===e.diff.oid})))>-1&&t.attributeDiff.valuesOverTime.splice(n,1)}else{if(null!=this.diff)return delete this.diff.newValue,delete this.diff.newStartDate,delete this.diff.newEndDate,this.removeEmptyDiff(),void this.onChange(d.ChangeType.REMOVE);null!=this.valueOverTime&&null==this.diff&&(this.diff=new i.ValueOverTimeDiff,this.diff.action="DELETE",this.diff.oid=this.valueOverTime.oid,this.diff.oldValue=this.valueOverTime.value,this.diff.oldStartDate=this.valueOverTime.startDate,this.diff.oldEndDate=this.valueOverTime.endDate,this.action.attributeDiff.valuesOverTime.push(this.diff))}else if("CreateGeoObjectAction"===this.action.actionType){var n,r=this.action.geoObjectJson.attributes[this.attr.code].values;-1!==(n=r.findIndex((function(t){return t.oid===e.valueOverTime.oid})))&&r.splice(n,1)}this.onChange(d.ChangeType.REMOVE)},e.prototype.isDelete=function(){return null!=this.diff&&"DELETE"===this.diff.action},e.prototype.buildDataSource=function(e){var t=this;return{setLayerData:function(n){"NEW"===e?t.value=n:console.log("ERROR. Cannot edit old geometry")},getLayerData:function(){return"NEW"===e?t.value:t.oldValue},buildMapboxSource:function(){return{type:"geojson",data:this.getLayerData()}},getGeometryType:function(){return t.changeRequestAttributeEditor.changeRequestEditor.geoObjectType.geometryType},getDataSourceId:function(){return e+"_"+t.oid},getDataSourceProviderId:function(){return t.changeRequestAttributeEditor.changeRequestEditor.changeRequest.oid},createLayer:function(e,t,n,i){return new p.GeoJsonLayer(this,t,n,i)},getBounds:function(e,t,n){var i=this;return new Promise((function(e,t){e(a.default(i.getLayerData()))}))}}},e}();t.ValueOverTimeCREditor=u},1098:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageVersionsComponent=void 0;var i=n(0),r=n(2),o=n(378),a=n(1023),l=n(291),s=n(544),c=(n(140),n(193)),d=(n(56),n(1015)),p=(n(1024),n(194),n(25),n(1151)),u=n(18),m=n(44),g=(n(1041),n(859)),h=n(1020),f=n(0),y=n(1015),v=n(25),b=n(194),S=n(140),C=n(1024),E=n(56),x=n(18),O=n(1),I=n(88),M=n(382),w=n(545),T=n(1040),k=n(292),P=n(1099),j=n(162),z=["dateFieldComponents"];function D(e,t){if(1&e&&(f.ɵɵelementStart(0,"h5"),f.ɵɵtext(1),f.ɵɵelementEnd()),2&e){var n=t.item;f.ɵɵadvance(1),f.ɵɵtextInterpolate2("",n.name," : ",n.code,"")}}function R(e,t){1&e&&(f.ɵɵelementStart(0,"p",16),f.ɵɵelement(1,"localize",17),f.ɵɵelementEnd())}function L(e,t){1&e&&(f.ɵɵelementStart(0,"div"),f.ɵɵelement(1,"localize",18),f.ɵɵelementEnd())}function _(e,t){if(1&e&&(f.ɵɵelementStart(0,"div",32),f.ɵɵtext(1),f.ɵɵelementEnd()),2&e){var n=f.ɵɵnextContext().$implicit;f.ɵɵadvance(1),f.ɵɵtextInterpolate1(" ",n.summaryKeyLocalized," ")}}function A(e,t){1&e&&(f.ɵɵelementStart(0,"p",40),f.ɵɵelement(1,"localize",41),f.ɵɵelementEnd())}function N(e,t){if(1&e&&(f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"p",42),f.ɵɵelement(2,"localize",43),f.ɵɵtext(3),f.ɵɵelementEnd(),f.ɵɵelementEnd()),2&e){var n=f.ɵɵnextContext().$implicit,i=f.ɵɵnextContext(2).$implicit,r=f.ɵɵnextContext(4);f.ɵɵadvance(3),f.ɵɵtextInterpolate1(" ",r.getValueAtLocale(i.oldValue,n.locale)," ")}}var V=function(e){return{"has-changed":e}};function F(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"tr",34),f.ɵɵelementStart(1,"td",35),f.ɵɵelementStart(2,"h5"),f.ɵɵelement(3,"convert-key-label",36),f.ɵɵelementEnd(),f.ɵɵelementStart(4,"input",37),f.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e}))("ngModelChange",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext(2).$implicit;return e.editor.setLocalizedValue(e.value)})),f.ɵɵelementEnd(),f.ɵɵelementStart(5,"div",38),f.ɵɵtemplate(6,A,2,0,"p",39),f.ɵɵelementEnd(),f.ɵɵtemplate(7,N,4,1,"div",9),f.ɵɵelementEnd(),f.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=t.index,o=f.ɵɵnextContext(2),a=o.$implicit,l=o.index,s=f.ɵɵnextContext(4);f.ɵɵadvance(3),f.ɵɵproperty("key",i.locale),f.ɵɵadvance(1),f.ɵɵproperty("ngClass",f.ɵɵpureFunction1(8,V,s.hasLocalizationChanged(a,i.locale)&&!s.isNew))("disabled",s.readonly||"DELETE"===a.summaryKey)("name","loc-val-"+l+"-"+r)("ngModel",i.value)("required","defaultLocale"===i.locale),f.ɵɵadvance(2),f.ɵɵproperty("ngIf","defaultLocale"===i.locale&&!i.value),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",s.hasLocalizationChanged(a,i.locale)&&!s.isNew)}}function H(e,t){if(1&e&&(f.ɵɵelementContainerStart(0),f.ɵɵtemplate(1,F,8,10,"tr",33),f.ɵɵelementContainerEnd()),2&e){var n=f.ɵɵnextContext().$implicit;f.ɵɵadvance(1),f.ɵɵproperty("ngForOf",n.value.localeValues)}}function G(e,t){if(1&e&&(f.ɵɵelementStart(0,"option",48),f.ɵɵtext(1),f.ɵɵelementEnd()),2&e){var n=t.$implicit;f.ɵɵproperty("value",n.code),f.ɵɵadvance(1),f.ɵɵtextInterpolate(n.label.localizedValue)}}function B(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"select",45),f.ɵɵlistener("ngModelChange",(function(e){return f.ɵɵrestoreView(n),f.ɵɵnextContext(2).$implicit.value=e})),f.ɵɵelement(2,"option",46),f.ɵɵtemplate(3,G,2,2,"option",47),f.ɵɵelementEnd(),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(2),r=i.$implicit,o=i.index,a=f.ɵɵnextContext(4);f.ɵɵadvance(1),f.ɵɵpropertyInterpolate1("id","mod-",a.attributeType.code,""),f.ɵɵproperty("ngClass",f.ɵɵpureFunction1(6,V,r.oldValue&&!a.isNew))("name","mod-term-"+o+"-"+a.attributeType.code)("ngModel",r.value)("disabled",a.readonly||"DELETE"===r.summaryKey),f.ɵɵadvance(2),f.ɵɵproperty("ngForOf",a.getGeoObjectTypeTermAttributeOptions(a.attributeType.code))}}function q(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"classification-field",49),f.ɵɵlistener("valueChange",(function(e){return f.ɵɵrestoreView(n),f.ɵɵnextContext(2).$implicit.value=e})),f.ɵɵelementEnd(),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(2),r=i.$implicit,o=i.index,a=f.ɵɵnextContext(4);f.ɵɵadvance(1),f.ɵɵproperty("classificationType",a.attributeType.classificationType)("rootCode",null!=a.attributeType.rootTerm?a.attributeType.rootTerm.code:null)("classNames",f.ɵɵpureFunction1(6,V,r.oldValue&&!a.isNew))("name","mod-term-"+o+"-"+a.attributeType.code)("value",r.value)("disabled",a.readonly||"DELETE"===r.summaryKey)}}function U(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"input",50),f.ɵɵlistener("ngModelChange",(function(e){return f.ɵɵrestoreView(n),f.ɵɵnextContext(2).$implicit.value=e})),f.ɵɵelementEnd(),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(2),r=i.$implicit,o=i.index,a=f.ɵɵnextContext(4);f.ɵɵadvance(1),f.ɵɵproperty("ngClass",f.ɵɵpureFunction1(4,V,r.oldValue&&!a.isNew))("name","char-val-"+o)("ngModel",r.value)("disabled",a.readonly||"DELETE"===r.summaryKey)}}function $(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"date-field",51),f.ɵɵlistener("valueChange",(function(e){return f.ɵɵrestoreView(n),f.ɵɵnextContext(2).$implicit.value=e}))("validChange",(function(e){return f.ɵɵrestoreView(n),f.ɵɵnextContext(6).isValid=e})),f.ɵɵelementEnd(),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(2),r=i.$implicit,o=i.index,a=f.ɵɵnextContext(4);f.ɵɵadvance(1),f.ɵɵproperty("customStyles",r.oldValue&&!a.isNew?"color: orange;":"")("value",r.value)("inputName","date-val-"+o)("allowInfinity",!1)("allowFutureDates",!0)("required",!0)("placement","right")("valid",a.isValid)("disable",a.readonly)}}function J(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"input",52),f.ɵɵlistener("ngModelChange",(function(e){return f.ɵɵrestoreView(n),f.ɵɵnextContext(2).$implicit.value=e})),f.ɵɵelementEnd(),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(2),r=i.$implicit,o=i.index,a=f.ɵɵnextContext(4);f.ɵɵadvance(1),f.ɵɵproperty("ngClass",f.ɵɵpureFunction1(4,V,r.oldValue&&!a.isNew))("name","int-val-"+o)("ngModel",r.value)("disabled",a.readonly||"DELETE"===r.summaryKey)}}function W(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"label",53),f.ɵɵelementStart(2,"input",54),f.ɵɵlistener("ngModelChange",(function(e){return f.ɵɵrestoreView(n),f.ɵɵnextContext(2).$implicit.value=e})),f.ɵɵelementEnd(),f.ɵɵelementStart(3,"span",55),f.ɵɵelement(4,"localize",56),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementStart(5,"label",57),f.ɵɵelementStart(6,"input",58),f.ɵɵlistener("ngModelChange",(function(e){return f.ɵɵrestoreView(n),f.ɵɵnextContext(2).$implicit.value=e})),f.ɵɵelementEnd(),f.ɵɵelementStart(7,"span",55),f.ɵɵelement(8,"localize",59),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(2),r=i.index,o=i.$implicit,a=f.ɵɵnextContext(4);f.ɵɵadvance(2),f.ɵɵpropertyInterpolate1("id","mod-",r,"-true"),f.ɵɵpropertyInterpolate1("name","mod-",r,"-true"),f.ɵɵproperty("checked",!0===o.value)("value",!0)("ngModel",o.value)("disabled",a.readonly||"DELETE"===o.summaryKey),f.ɵɵadvance(1),f.ɵɵproperty("ngClass",f.ɵɵpureFunction1(15,V,o.oldValue&&!a.isNew)),f.ɵɵadvance(3),f.ɵɵpropertyInterpolate1("id","mod-",r,"-false"),f.ɵɵpropertyInterpolate1("name","mod-",r,"-false"),f.ɵɵproperty("ngClass",f.ɵɵpureFunction1(17,V,o.oldValue&&!a.isNew))("checked",!1===o.value)("value",!1)("ngModel",o.value)("disabled",a.readonly||"DELETE"===o.summaryKey),f.ɵɵadvance(1),f.ɵɵproperty("ngClass",f.ɵɵpureFunction1(19,V,o.oldValue&&!a.isNew))}}function Y(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"span",66),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext().$implicit;return f.ɵɵnextContext(4).$implicit.editor.removeType(e)})),f.ɵɵelement(1,"i",67),f.ɵɵelementEnd()}}function K(e,t){1&e&&f.ɵɵelement(0,"span",68)}var Q=function(e,t){return{"inline-loading":e,"has-changed":t}};function X(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"div",61),f.ɵɵtext(1),f.ɵɵelementStart(2,"div",62),f.ɵɵelementStart(3,"input",63),f.ɵɵlistener("ngModelChange",(function(e){f.ɵɵrestoreView(n);var i=t.$implicit;return f.ɵɵnextContext(4).$implicit.value.parents[i.code].text=e}))("typeaheadOnSelect",(function(e){f.ɵɵrestoreView(n);var i=t.$implicit,r=f.ɵɵnextContext(4).$implicit;return f.ɵɵnextContext(4).typeaheadOnSelect(r.editor,e,i,r.value,r.startDate)}))("typeaheadLoading",(function(e){f.ɵɵrestoreView(n);var i=t.$implicit;return f.ɵɵnextContext(4).$implicit.value.loading[i.code]=e})),f.ɵɵelementEnd(),f.ɵɵtemplate(4,Y,2,0,"span",64),f.ɵɵtemplate(5,K,1,0,"span",65),f.ɵɵelementEnd(),f.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=t.index,o=f.ɵɵnextContext(4),a=o.index,l=o.$implicit,s=f.ɵɵnextContext(4),c=f.ɵɵreference(2);f.ɵɵadvance(1),f.ɵɵtextInterpolate1(" ",i.label," "),f.ɵɵadvance(2),f.ɵɵproperty("name",i.code+"-"+a)("disabled",s.readonly||"DELETE"===l.summaryKey||null==l.startDate||""===l.startDate)("ngModel",l.value.parents[i.code].text)("typeaheadAsync",!0)("typeahead",s.getTypeAheadObservable(l.editor,l.startDate,l.endDate,i,l.value,r))("ngClass",f.ɵɵpureFunction2(13,Q,l.value.loading[i.code],l.oldValue&&!s.isNew))("typeaheadOptionsLimit",7)("typeaheadItemTemplate",c)("typeaheadMinLength",0)("typeaheadWaitMs",300),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!s.readonly),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",s.readonly)}}function Z(e,t){if(1&e&&(f.ɵɵelementContainerStart(0),f.ɵɵtemplate(1,X,6,16,"div",60),f.ɵɵelementContainerEnd()),2&e){var n=f.ɵɵnextContext(7);f.ɵɵadvance(1),f.ɵɵproperty("ngForOf",n.hierarchy.types)}}function ee(e,t){if(1&e&&(f.ɵɵelementStart(0,"div"),f.ɵɵtemplate(1,Z,2,1,"ng-container",9),f.ɵɵelementEnd()),2&e){var n=f.ɵɵnextContext(6);f.ɵɵadvance(1),f.ɵɵproperty("ngIf",null!=n.hierarchy&&null!=n.hierarchy.types&&n.hierarchy.types.length>0)}}function te(e,t){1&e&&(f.ɵɵelementStart(0,"span",74),f.ɵɵelement(1,"localize",56),f.ɵɵelementEnd())}function ne(e,t){1&e&&(f.ɵɵelementStart(0,"span",74),f.ɵɵelement(1,"localize",59),f.ɵɵelementEnd())}function ie(e,t){if(1&e&&(f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"p",69),f.ɵɵelement(2,"localize",43),f.ɵɵelementContainerStart(3,70),f.ɵɵelementContainerStart(4,71),f.ɵɵtemplate(5,te,2,0,"span",72),f.ɵɵtemplate(6,ne,2,0,"span",72),f.ɵɵelementContainerEnd(),f.ɵɵelementContainerStart(7,73),f.ɵɵtext(8),f.ɵɵelementContainerEnd(),f.ɵɵelementContainerEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd()),2&e){var n=f.ɵɵnextContext(2).$implicit,i=f.ɵɵnextContext(4);f.ɵɵadvance(5),f.ɵɵproperty("ngIf","invalid"===i.attributeType.code?!1===n.oldValue:!0===n.oldValue),f.ɵɵadvance(1),f.ɵɵproperty("ngIf","invalid"===i.attributeType.code?!0===n.oldValue:!1===n.oldValue),f.ɵɵadvance(2),f.ɵɵtextInterpolate1(" ",n.oldValue," ")}}function re(e,t){1&e&&f.ɵɵelement(0,"localize",85)}function oe(e,t){1&e&&f.ɵɵelement(0,"localize",86)}function ae(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"button",82),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext(3).$implicit;return f.ɵɵnextContext(4).toggleOldGeometryView(e)})),f.ɵɵtemplate(1,re,1,0,"localize",83),f.ɵɵtemplate(2,oe,1,0,"localize",84),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(3).$implicit;f.ɵɵproperty("disabled",i.coordinate&&(null!=i.coordinate.longValid&&!i.coordinate.longValid||null!=i.coordinate.latValid&&!i.coordinate.latValid)),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!i.oldLayer||!i.oldLayer.rendered),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",i.oldLayer&&i.oldLayer.rendered)}}function le(e,t){1&e&&f.ɵɵelement(0,"localize",87)}function se(e,t){1&e&&f.ɵɵelement(0,"localize",88)}function ce(e,t){1&e&&f.ɵɵelement(0,"localize",91)}function de(e,t){1&e&&f.ɵɵelement(0,"localize",92)}function pe(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"button",82),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext(3).$implicit;return f.ɵɵnextContext(4).toggleGeometryEditing(e)})),f.ɵɵtemplate(1,ce,1,0,"localize",89),f.ɵɵtemplate(2,de,1,0,"localize",90),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(3).$implicit,r=f.ɵɵnextContext(4);f.ɵɵproperty("disabled",r.readonly||i.coordinate&&(null!=i.coordinate.longValid&&!i.coordinate.longValid||null!=i.coordinate.latValid&&!i.coordinate.latValid)),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",i.editingLayer&&!i.editingLayer.editing),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",i.editingLayer&&i.editingLayer.editing)}}function ue(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"i",93),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext(3).$implicit;return f.ɵɵnextContext(4).onAddNewVersion(e.editor)})),f.ɵɵelementEnd()}}function me(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"input",100),f.ɵɵlistener("ngModelChange",(function(e){return f.ɵɵrestoreView(n),f.ɵɵnextContext(4).$implicit.value.coordinates[0][1]=e}))("change",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext(4).$implicit;return f.ɵɵnextContext(4).manualCoordinateChange(e)})),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(4),r=i.$implicit,o=i.index,a=f.ɵɵnextContext(4);f.ɵɵproperty("readonly",a.readonly||!(r.editingLayer&&r.editingLayer.editing)||"DELETE"===r.summaryKey)("name","latitude-"+o)("ngModel",r.value.coordinates[0][1])}}function ge(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"input",100),f.ɵɵlistener("ngModelChange",(function(e){return f.ɵɵrestoreView(n),f.ɵɵnextContext(4).$implicit.newCoordinateY=e}))("change",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext(4).$implicit;return f.ɵɵnextContext(4).manualCoordinateChange(e)})),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(4),r=i.$implicit,o=i.index,a=f.ɵɵnextContext(4);f.ɵɵproperty("readonly",a.readonly||!(r.editingLayer&&r.editingLayer.editing)||"DELETE"===r.summaryKey)("name","latitude-"+o)("ngModel",r.newCoordinateY)}}function he(e,t){1&e&&(f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"p",40),f.ɵɵelement(2,"localize",101),f.ɵɵelementEnd(),f.ɵɵelementEnd())}function fe(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"input",100),f.ɵɵlistener("ngModelChange",(function(e){return f.ɵɵrestoreView(n),f.ɵɵnextContext(4).$implicit.value.coordinates[0][0]=e}))("change",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext(4).$implicit;return f.ɵɵnextContext(4).manualCoordinateChange(e)})),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(4),r=i.$implicit,o=i.index,a=f.ɵɵnextContext(4);f.ɵɵproperty("readonly",a.readonly||!(r.editingLayer&&r.editingLayer.editing)||"DELETE"===r.summaryKey)("name","longitude-"+o)("ngModel",r.value.coordinates[0][0])}}function ye(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"input",100),f.ɵɵlistener("ngModelChange",(function(e){return f.ɵɵrestoreView(n),f.ɵɵnextContext(4).$implicit.newCoordinateX=e}))("change",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext(4).$implicit;return f.ɵɵnextContext(4).manualCoordinateChange(e)})),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(4),r=i.$implicit,o=i.index,a=f.ɵɵnextContext(4);f.ɵɵproperty("readonly",a.readonly||!(r.editingLayer&&r.editingLayer.editing)||"DELETE"===r.summaryKey)("name","longitude-"+o)("ngModel",r.newCoordinateX)}}function ve(e,t){1&e&&(f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"p",40),f.ɵɵelement(2,"localize",102),f.ɵɵelementEnd(),f.ɵɵelementEnd())}function be(e,t){if(1&e&&(f.ɵɵelementStart(0,"tr"),f.ɵɵelementStart(1,"td",94),f.ɵɵelementStart(2,"h5"),f.ɵɵelement(3,"localize",95),f.ɵɵelementEnd(),f.ɵɵelementStart(4,"div",96),f.ɵɵtemplate(5,me,1,3,"input",97),f.ɵɵtemplate(6,ge,1,3,"input",97),f.ɵɵelementEnd(),f.ɵɵtemplate(7,he,3,0,"div",9),f.ɵɵelementEnd(),f.ɵɵelementStart(8,"td",98),f.ɵɵelementStart(9,"h5"),f.ɵɵelement(10,"localize",99),f.ɵɵelementEnd(),f.ɵɵelementStart(11,"div",96),f.ɵɵtemplate(12,fe,1,3,"input",97),f.ɵɵtemplate(13,ye,1,3,"input",97),f.ɵɵelementEnd(),f.ɵɵtemplate(14,ve,3,0,"div",9),f.ɵɵelementEnd(),f.ɵɵelementEnd()),2&e){var n=f.ɵɵnextContext(3).$implicit;f.ɵɵadvance(5),f.ɵɵproperty("ngIf",n.value.coordinates&&n.value.coordinates[0]),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",null==n.value.coordinates||null==n.value.coordinates[0]),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",n.coordinate&&null!=n.coordinate.latValid&&!n.coordinate.latValid),f.ɵɵadvance(5),f.ɵɵproperty("ngIf",n.value.coordinates&&n.value.coordinates[0]),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",null==n.value.coordinates||null==n.value.coordinates[0]),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",n.coordinate&&null!=n.coordinate.longValid&&!n.coordinate.longValid)}}function Se(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"table",75),f.ɵɵelementStart(1,"tr"),f.ɵɵelementStart(2,"td",76),f.ɵɵtemplate(3,ae,3,3,"button",77),f.ɵɵelementStart(4,"button",78),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext(2).$implicit;return f.ɵɵnextContext(4).toggleGeometryView(e)})),f.ɵɵtemplate(5,le,1,0,"localize",79),f.ɵɵtemplate(6,se,1,0,"localize",80),f.ɵɵelementEnd(),f.ɵɵtemplate(7,pe,3,3,"button",77),f.ɵɵtemplate(8,ue,1,0,"i",81),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵtemplate(9,be,15,6,"tr",9),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(2).$implicit,r=f.ɵɵnextContext(4);f.ɵɵadvance(3),f.ɵɵproperty("ngIf",i.oldValue&&i.editingLayer),f.ɵɵadvance(1),f.ɵɵproperty("disabled",i.coordinate&&(null!=i.coordinate.longValid&&!i.coordinate.longValid||null!=i.coordinate.latValid&&!i.coordinate.latValid)),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!(i.objectLayer&&i.objectLayer.rendered||i.editingLayer&&i.editingLayer.rendered)),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",i.objectLayer&&i.objectLayer.rendered||i.editingLayer&&i.editingLayer.rendered),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",i.editingLayer&&i.editingLayer.rendered&&r.geoObjectType.isGeometryEditable),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!(r.readonly||r.isRootOfHierarchy||r.isNew&&"exists"===r.attributeType.code||null!=r.filterDate)),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",i.editingLayer&&i.editingLayer.rendered&&("POINT"===r.geoObjectType.geometryType||"MULTIPOINT"===r.geoObjectType.geometryType)&&i.value&&i.value.coordinates&&(1==i.value.coordinates.length||0==i.value.coordinates.length))}}function Ce(e,t){if(1&e&&(f.ɵɵelementStart(0,"tr",34),f.ɵɵelementStart(1,"td",35),f.ɵɵtemplate(2,B,4,8,"div",9),f.ɵɵtemplate(3,q,2,8,"div",9),f.ɵɵtemplate(4,U,2,6,"div",9),f.ɵɵtemplate(5,$,2,9,"div",9),f.ɵɵtemplate(6,J,2,6,"div",9),f.ɵɵtemplate(7,W,9,21,"div",9),f.ɵɵtemplate(8,ee,2,1,"div",9),f.ɵɵtemplate(9,ie,9,3,"div",9),f.ɵɵtemplate(10,Se,10,7,"table",44),f.ɵɵelementEnd(),f.ɵɵelementEnd()),2&e){var n=f.ɵɵnextContext().$implicit,i=f.ɵɵnextContext(4);f.ɵɵadvance(2),f.ɵɵproperty("ngIf","term"===i.attributeType.type),f.ɵɵadvance(1),f.ɵɵproperty("ngIf","classification"===i.attributeType.type),f.ɵɵadvance(1),f.ɵɵproperty("ngIf","character"===i.attributeType.type),f.ɵɵadvance(1),f.ɵɵproperty("ngIf","date"===i.attributeType.type),f.ɵɵadvance(1),f.ɵɵproperty("ngIf","integer"===i.attributeType.type||"float"===i.attributeType.type),f.ɵɵadvance(1),f.ɵɵproperty("ngIf","boolean"===i.attributeType.type),f.ɵɵadvance(1),f.ɵɵproperty("ngIf","_PARENT_"===i.attributeType.type),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",n.oldValue&&!i.isNew&&"geometry"!==i.attributeType.type),f.ɵɵadvance(1),f.ɵɵproperty("ngIf","geometry"===i.attributeType.type)}}function Ee(e,t){if(1&e&&(f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"p",69),f.ɵɵelement(2,"localize",43),f.ɵɵtext(3),f.ɵɵelementEnd(),f.ɵɵelementEnd()),2&e){var n=f.ɵɵnextContext().$implicit;f.ɵɵadvance(3),f.ɵɵtextInterpolate1(" ",n.oldStartDate," ")}}var xe=function(e,t){return{"error-message":e,"warning-message":t}};function Oe(e,t){if(1&e&&(f.ɵɵelementStart(0,"p",55),f.ɵɵtext(1),f.ɵɵelementEnd()),2&e){var n=t.$implicit;f.ɵɵproperty("ngClass",f.ɵɵpureFunction2(2,xe,"ERROR"===n.severity,"WARNING"===n.severity)),f.ɵɵadvance(1),f.ɵɵtextInterpolate1(" ",n.message," ")}}function Ie(e,t){if(1&e&&(f.ɵɵelementStart(0,"tr"),f.ɵɵtemplate(1,Oe,2,5,"p",103),f.ɵɵelementEnd()),2&e){var n=f.ɵɵnextContext().$implicit;f.ɵɵadvance(1),f.ɵɵproperty("ngForOf",n.editor.conflictMessages)}}function Me(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"td",104),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext().$implicit;return f.ɵɵnextContext(4).remove(e)})),f.ɵɵpipe(1,"localize"),f.ɵɵelement(2,"i",105),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(5);f.ɵɵproperty("title",f.ɵɵpipeBind1(1,2,i.filterDate?"changeovertime.manageVersions.date.editing.needs.fullview.message":"changeovertime.manageVersions.remove.version")),f.ɵɵattribute("disabled","exists"===i.attributeType.code||null!=i.filterDate)}}function we(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"td",104),f.ɵɵlistener("click",(function(){f.ɵɵrestoreView(n);var e=f.ɵɵnextContext().$implicit;return f.ɵɵnextContext(4).remove(e)})),f.ɵɵpipe(1,"localize"),f.ɵɵelement(2,"i",106),f.ɵɵelementEnd()}2&e&&f.ɵɵproperty("title",f.ɵɵpipeBind1(1,1,"changeovertime.manageVersions.revert.version"))}var Te=function(e){return{"geometry-edit-active":e}},ke=function(e,t,n){return{"error-border":e,"warning-border":t,warning:n}};function Pe(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"tr",20),f.ɵɵelementStart(1,"td",21),f.ɵɵtemplate(2,_,2,1,"div",22),f.ɵɵelementStart(3,"table"),f.ɵɵtemplate(4,H,2,1,"ng-container",9),f.ɵɵtemplate(5,Ce,11,9,"tr",23),f.ɵɵelementStart(6,"tr",24),f.ɵɵelementStart(7,"td"),f.ɵɵelementStart(8,"h5"),f.ɵɵelement(9,"localize",25),f.ɵɵelementEnd(),f.ɵɵelementStart(10,"date-field",26,27),f.ɵɵlistener("valueChange",(function(e){return t.$implicit.startDate=e}))("change",(function(){return f.ɵɵrestoreView(n),f.ɵɵnextContext(4).onDateChange()})),f.ɵɵpipe(12,"localize"),f.ɵɵelementEnd(),f.ɵɵtemplate(13,Ee,4,1,"div",9),f.ɵɵelementEnd(),f.ɵɵelementStart(14,"td"),f.ɵɵelementStart(15,"div",28),f.ɵɵelementStart(16,"h5"),f.ɵɵelement(17,"localize",29),f.ɵɵelementEnd(),f.ɵɵelementStart(18,"date-field",30,27),f.ɵɵlistener("valueChange",(function(e){return t.$implicit.endDate=e}))("change",(function(){return f.ɵɵrestoreView(n),f.ɵɵnextContext(4).onDateChange()})),f.ɵɵpipe(20,"localize"),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵtemplate(21,Ie,2,1,"tr",9),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵtemplate(22,Me,3,4,"td",31),f.ɵɵtemplate(23,we,3,3,"td",31),f.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=t.index,o=f.ɵɵnextContext(4);f.ɵɵproperty("ngClass",f.ɵɵpureFunction1(30,Te,i.editingLayer&&i.editingLayer.editing)),f.ɵɵadvance(1),f.ɵɵproperty("ngClass",f.ɵɵpureFunction3(32,ke,i.hasError(),i.hasWarning(),i.summaryKey&&"UNMODIFIED"!==i.summaryKey)),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",i.summaryKey&&"UNMODIFIED"!==i.summaryKey),f.ɵɵadvance(2),f.ɵɵproperty("ngIf","local"===o.attributeType.type&&i.value),f.ɵɵadvance(1),f.ɵɵproperty("ngIf","geometry"===o.attributeType.type||"_PARENT_"===o.attributeType.type||"term"===o.attributeType.type||"classification"===o.attributeType.type||"character"===o.attributeType.type||"date"===o.attributeType.type||"integer"===o.attributeType.type||"float"===o.attributeType.type||"boolean"===o.attributeType.type),f.ɵɵadvance(5),f.ɵɵproperty("customStyles",i.oldStartDate&&!o.isNew?"color: orange;":"")("value",i.startDate)("inputName","startDate_"+r)("allowFutureDates",!0)("required",!0)("disable",o.readonly||"DELETE"===i.summaryKey||null!=o.filterDate)("title",f.ɵɵpipeBind1(12,26,o.filterDate&&!o.readonly?"changeovertime.manageVersions.date.editing.needs.fullview.message":"")),f.ɵɵadvance(3),f.ɵɵproperty("ngIf",i.oldStartDate&&!o.isNew),f.ɵɵadvance(5),f.ɵɵproperty("customStyles",i.oldEndDate&&!o.isNew?"color: orange;":"")("value",i.endDate)("inputName","endDate_"+r)("allowInfinity","DELETE"!==i.summaryKey&&!o.readonly)("allowFutureDates",!0)("required",!0)("placement","bottom")("oldDate",i.oldEndDate&&!o.isNew?i.oldEndDate:null)("disable",o.readonly||"DELETE"===i.summaryKey||null!=o.filterDate)("title",f.ɵɵpipeBind1(20,28,null!=o.filterDate?"changeovertime.manageVersions.date.editing.needs.fullview.message":"")),f.ɵɵadvance(3),f.ɵɵproperty("ngIf",i.editor.conflictMessages&&i.editor.conflictMessages.size>0),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!(o.readonly||o.isNew&&"exists"===o.attributeType.code||"UNMODIFIED"!==i.summaryKey||"NEW"===i.summaryKey)),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!(o.readonly||o.isNew&&"exists"===o.attributeType.code||"UNMODIFIED"===i.summaryKey))}}function je(e,t){if(1&e&&(f.ɵɵelementContainerStart(0),f.ɵɵtemplate(1,Pe,24,36,"tr",19),f.ɵɵelementContainerEnd()),2&e){var n=f.ɵɵnextContext(3);f.ɵɵadvance(1),f.ɵɵproperty("ngForOf",n.viewModels)}}function ze(e,t){if(1&e&&(f.ɵɵelementStart(0,"div"),f.ɵɵelementStart(1,"table",13),f.ɵɵelementStart(2,"tbody",14),f.ɵɵtemplate(3,R,2,0,"p",15),f.ɵɵtemplate(4,L,2,0,"div",9),f.ɵɵtemplate(5,je,2,1,"ng-container",9),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd()),2&e){var n=f.ɵɵnextContext(2);f.ɵɵadvance(3),f.ɵɵproperty("ngIf",!n.isRootOfHierarchy&&0===n.viewModels.length),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",n.isRootOfHierarchy),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!n.isRootOfHierarchy)}}function De(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"li",107),f.ɵɵelementStart(1,"i",108),f.ɵɵlistener("click",(function(){return f.ɵɵrestoreView(n),f.ɵɵnextContext(2).onAddNewVersion()})),f.ɵɵelement(2,"localize",109),f.ɵɵelementEnd(),f.ɵɵelementEnd()}}var Re=function(e){return{active:e}};function Le(e,t){if(1&e){var n=f.ɵɵgetCurrentView();f.ɵɵelementStart(0,"div",110),f.ɵɵelementStart(1,"button",111),f.ɵɵlistener("click",(function(){return f.ɵɵrestoreView(n),f.ɵɵnextContext(2).onApprove()})),f.ɵɵpipe(2,"localize"),f.ɵɵelement(3,"localize",112),f.ɵɵelementEnd(),f.ɵɵelementStart(4,"button",113),f.ɵɵlistener("click",(function(){return f.ɵɵrestoreView(n),f.ɵɵnextContext(2).onReject()})),f.ɵɵpipe(5,"localize"),f.ɵɵelement(6,"localize",114),f.ɵɵelementEnd(),f.ɵɵelementStart(7,"button",115),f.ɵɵlistener("click",(function(){return f.ɵɵrestoreView(n),f.ɵɵnextContext(2).onPending()})),f.ɵɵpipe(8,"localize"),f.ɵɵelement(9,"localize",116),f.ɵɵelementEnd(),f.ɵɵelementEnd()}if(2&e){var i=f.ɵɵnextContext(2);f.ɵɵadvance(1),f.ɵɵproperty("disabled","ACCEPTED"===i.changeRequestAttributeEditor.editAction.approvalStatus)("ngClass",f.ɵɵpureFunction1(15,Re,"ACCEPTED"===i.changeRequestAttributeEditor.editAction.approvalStatus))("title",f.ɵɵpipeBind1(2,9,"change.request.action.accept.btn.hover")),f.ɵɵadvance(3),f.ɵɵproperty("disabled","REJECTED"===i.changeRequestAttributeEditor.editAction.approvalStatus)("ngClass",f.ɵɵpureFunction1(17,Re,"REJECTED"===i.changeRequestAttributeEditor.editAction.approvalStatus))("title",f.ɵɵpipeBind1(5,11,"change.request.action.reject.btn.hover")),f.ɵɵadvance(3),f.ɵɵproperty("disabled","PENDING"===i.changeRequestAttributeEditor.editAction.approvalStatus)("ngClass",f.ɵɵpureFunction1(19,Re,"PENDING"===i.changeRequestAttributeEditor.editAction.approvalStatus))("title",f.ɵɵpipeBind1(8,13,"change.request.action.pending.btn.hover"))}}function _e(e,t){1&e&&(f.ɵɵelementStart(0,"strong",119),f.ɵɵelement(1,"localize",120),f.ɵɵelementEnd())}function Ae(e,t){1&e&&(f.ɵɵelementStart(0,"strong",121),f.ɵɵelement(1,"localize",122),f.ɵɵelementEnd())}function Ne(e,t){if(1&e&&(f.ɵɵelementStart(0,"div",110),f.ɵɵtemplate(1,_e,2,0,"strong",117),f.ɵɵtemplate(2,Ae,2,0,"strong",118),f.ɵɵelementEnd()),2&e){var n=f.ɵɵnextContext(2);f.ɵɵadvance(1),f.ɵɵproperty("ngIf","ACCEPTED"===n.changeRequestAttributeEditor.editAction.approvalStatus),f.ɵɵadvance(1),f.ɵɵproperty("ngIf","REJECTED"===n.changeRequestAttributeEditor.editAction.approvalStatus)}}function Ve(e,t){if(1&e&&(f.ɵɵelementStart(0,"div",6),f.ɵɵelementStart(1,"ul",7),f.ɵɵelementStart(2,"li",8),f.ɵɵtemplate(3,ze,6,3,"div",9),f.ɵɵelementEnd(),f.ɵɵtemplate(4,De,3,0,"li",10),f.ɵɵelementEnd(),f.ɵɵtemplate(5,Le,10,21,"div",11),f.ɵɵtemplate(6,Ne,3,2,"div",12),f.ɵɵelementEnd()),2&e){var n=f.ɵɵnextContext();f.ɵɵadvance(3),f.ɵɵproperty("ngIf",n.attributeType),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!(n.readonly||n.isRootOfHierarchy||n.isNew&&"exists"===n.attributeType.code||null!=n.filterDate)),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!n.changeRequestEditor.changeRequest.isNew&&"CreateGeoObject"!==n.changeRequestEditor.changeRequest.type&&"PENDING"===n.changeRequestEditor.changeRequest.approvalStatus&&n.changeRequestEditor.changeRequest.permissions.includes("WRITE_APPROVAL_STATUS")&&n.changeRequestAttributeEditor.hasChanges()),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",!n.changeRequestEditor.changeRequest.isNew&&"PENDING"!==n.changeRequestEditor.changeRequest.approvalStatus)}}function Fe(e,t){if(1&e&&f.ɵɵelement(0,"geoobject-editor-map",123,124),2&e){var n=f.ɵɵnextContext();f.ɵɵproperty("geometryType",n.geoObjectType.geometryType)("mapHeight",n.mapRowHeight)("readOnly",!n.geoObjectType.isGeometryEditable&&n.readonly)("bboxCode",n.changeRequestEditor.geoObject.attributes.code)("bboxType",n.geoObjectType.code)("bboxDate",n.geomService.getLayers()[0].startDate)}}var He=function(e){return{width:e}},Ge=function(){function e(e,t,n,r,o,a,l,s,c,d){this.geomService=e,this.cdr=t,this.service=n,this.lService=r,this.changeDetectorRef=o,this.dateService=a,this.authService=l,this.requestService=s,this.modalService=c,this.elementRef=d,this.isNew=!1,this.message=null,this.currentDate=new Date,this.isValid=!0,this.isValidChange=new i.EventEmitter,this.readonly=!1,this.isGeometryInlined=!1,this.hierarchy=null,this.filterDate=null,this.showAllInstances=!0,this.viewModels=[],this.isRootOfHierarchy=!1,this.isInitialized=!1}return e.prototype.ngOnInit=function(){var e=this;this.changeRequestAttributeEditor=this.changeRequestEditor.getEditorForAttribute(this.attributeType,this.hierarchy),this.calculateViewModels(),this.isRootOfHierarchy="_PARENT_"===this.attributeType.type&&(null==this.hierarchy||null==this.hierarchy.types||0===this.hierarchy.types.length),this.isInitialized=!0,this.layerChangeSub=this.geomService.layersChange.subscribe((function(t){e.viewModels&&e.viewModels.forEach((function(n){e.syncLayerReferences(t,n)}))}))},e.prototype.ngAfterViewInit=function(){this.isNew&&"exists"===this.attributeType.code&&0===this.viewModels.length&&this.onAddNewVersion()},e.prototype.ngOnChanges=function(e){var t=this;this.isInitialized&&e.showAllInstances&&e.showAllInstances.previousValue!==e.showAllInstances.currentValue&&this.calculateViewModels(),e.readonly&&e.readonly.previousValue!==e.readonly.currentValue&&this.viewModels.forEach((function(e){e.destroy(t),null!=e.objectLayer&&(t.geomService.removeLayer(e.objectLayer.getId()),e.objectLayer=null)}))},e.prototype.ngOnDestroy=function(){var e=this;this.viewModels.forEach((function(t){return t.destroy(e)})),this.layerChangeSub.unsubscribe()},e.prototype.setFilterDate=function(e,t){void 0===t&&(t=!0),this.filterDate=e,t&&this.calculateViewModels()},e.prototype.checkDateFieldValidity=function(){for(var e=this.dateFieldComponentsArray.toArray(),t=0;t<e.length;t++){if(!e[t].valid)return!1}return!0},e.prototype.hasLocalizationChanged=function(e,t){return null!=e.editor.oldValue&&this.getValueAtLocale(e.editor.oldValue,t)!==this.getValueAtLocale(e.editor.value,t)},e.prototype.onDateChange=function(){var e=this;setTimeout((function(){e.isValid=e.changeRequestAttributeEditor.validate()&&e.checkDateFieldValidity(),e.isValidChange.emit(e.isValid)}),0)},e.prototype.remove=function(e){if(this.geomService.isEditing()&&this.geomService.stopEditing(),this.changeRequestAttributeEditor.remove(e.editor),e.summaryKey===a.SummaryKey.NEW||"CreateGeoObject"===this.changeRequestEditor.changeRequest.type){var t=this.viewModels.findIndex((function(t){return t.editor.oid===e.editor.oid}));t>-1&&this.viewModels.splice(t,1)}"geometry"===this.attributeType.type&&this.geomService.reload()},e.prototype.onAddNewVersion=function(e){var t=this.changeRequestAttributeEditor.createNewVersion(e);if(this.isNew&&this.changeRequestEditor.geoObject.attributes.exists){var n=this.changeRequestEditor.geoObject.attributes.exists.values;if(n&&n.length>0){var i=n[0];t.startDate=i.startDate,t.endDate=i.endDate}}this.viewModels.push(new p.VersionDiffView(this,t))},e.prototype.getValueAtLocale=function(e,t){return null==e?null:new l.LocalizedValue(e.localizedValue,e.localeValues).getValue(t)},e.prototype.getGeoObjectTypeTermAttributeOptions=function(e){return o.GeoObjectType.getGeoObjectTypeTermAttributeOptions(this.geoObjectType,e)},e.prototype.calculateViewModels=function(){var e=this,t=[];this.viewModels.forEach((function(t){return t.destroy(e)}));var n,i=this.changeRequestAttributeEditor.getEditors(this.showAllInstances);"geometry"===this.attributeType.code&&(n=this.geomService.getLayers()),i.forEach((function(i){if(null==e.filterDate||e.dateService.between(e.filterDate,i.startDate,i.endDate)){var r=new p.VersionDiffView(e,i);t.push(r),"geometry"===e.attributeType.code&&e.syncLayerReferences(n,r)}})),this.viewModels=t},e.prototype.syncLayerReferences=function(e,t){var n=this,i=e.findIndex((function(e){return e.dataSource instanceof h.GeoObjectLayerDataSource&&e.dataSource.getCode()===n.changeRequestEditor.geoObject.attributes.code&&e.dataSource.getTypeCode()===n.changeRequestEditor.geoObjectType.code&&n.dateService.between(e.dataSource.getDate(),t.editor.startDate,t.editor.endDate)}));-1!==i?t.objectLayer=e[i]:delete t.objectLayer;var r=new h.ValueOverTimeDataSource("NEW",t.editor).getKey(),o=e.findIndex((function(e){return e.dataSource.getKey()===r}));-1!==o?t.editingLayer=e[o]:delete t.editingLayer;var a=new h.ValueOverTimeDataSource("OLD",t.editor).getKey(),l=e.findIndex((function(e){return e.dataSource.getKey()===a}));-1!==l?t.oldLayer=e[l]:delete t.oldLayer},e.prototype.onApprove=function(){var e=this;this.requestService.setActionStatus(this.changeRequestAttributeEditor.editAction.oid,s.GovernanceStatus.ACCEPTED).then((function(t){e.changeRequestAttributeEditor.editAction.approvalStatus=s.GovernanceStatus.ACCEPTED})).catch((function(t){e.error(t)}))},e.prototype.onReject=function(){var e=this;this.requestService.setActionStatus(this.changeRequestAttributeEditor.editAction.oid,s.GovernanceStatus.REJECTED).then((function(t){e.changeRequestAttributeEditor.editAction.approvalStatus=s.GovernanceStatus.REJECTED})).catch((function(t){e.error(t)}))},e.prototype.onPending=function(){var e=this;this.requestService.setActionStatus(this.changeRequestAttributeEditor.editAction.oid,s.GovernanceStatus.PENDING).then((function(t){e.changeRequestAttributeEditor.editAction.approvalStatus=s.GovernanceStatus.PENDING})).catch((function(t){e.error(t)}))},e.prototype.error=function(e){this.bsModalRef=c.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.prototype.getTypeAheadObservable=function(e,t,n,i,r,o){var a=this,l=i.code,s=null,c=null,d=null;if(o>0){var p=e.changeRequestAttributeEditor.hierarchy.types[o-1],u=r.parents[p.code];null!=u.geoObject&&null!=u.geoObject.properties.code&&(d=e.changeRequestAttributeEditor.hierarchy.code,s=u.geoObject.properties.code,c=u.geoObject.properties.type)}return new m.Observable((function(p){if(null==s)for(var u=o;null==s&&u>0;){u-=1;var m=r.parents[e.changeRequestAttributeEditor.hierarchy.types[u].code];null!=m&&(null!=m.geoObject&&null!=m.geoObject.properties.code?(s=m.geoObject.properties.code,d=e.changeRequestAttributeEditor.hierarchy.code,c=e.changeRequestAttributeEditor.hierarchy.types[u].code):null!=m.goCode&&(s=m.goCode,d=e.changeRequestAttributeEditor.hierarchy.code,c=e.changeRequestAttributeEditor.hierarchy.types[u].code))}a.service.getGeoObjectSuggestions(r.parents[i.code].text,l,s,c,d,t,n).then((function(e){p.next(e)}))}))},e.prototype.typeaheadOnSelect=function(e,t,n,i,r){i.parents[n.code].text=t.item.name+" : "+t.item.code,i.parents[n.code].goCode=t.item.code;for(var o=[],a=0;a<e.changeRequestAttributeEditor.hierarchy.types.length;a++){var l=e.changeRequestAttributeEditor.hierarchy.types[a];if(o.push(l.code),l.code===n.code)break}this.service.getParentGeoObjects(t.item.code,n.code,o,!0,r).then((function(t){t.parents=t.parents.filter((function(t){return t.hierarchyType===e.changeRequestAttributeEditor.hierarchy.code})),delete i.parents[n.code].goCode,i.parents[n.code].geoObject=t.geoObject,i.parents[n.code].text=t.geoObject.properties.displayLabel.localizedValue+" : "+t.geoObject.properties.code;for(var r=0;r<e.changeRequestAttributeEditor.hierarchy.types.length;r++){for(var o=e.changeRequestAttributeEditor.hierarchy.types[r],a=t;null!=a&&a.geoObject.properties.type!==o.code;)a=a.parents.length>0?a.parents[0]:null;null!=a&&(i.parents[o.code].geoObject=a.geoObject,i.parents[o.code].text=a.geoObject.properties.displayLabel.localizedValue+" : "+a.geoObject.properties.code)}e.setParentValue(n,i.parents)}))},e.prototype.toggleGeometryEditing=function(e){this.geomService.setEditing(!e.editingLayer.editing,e.editingLayer),"POINT"!==this.geoObjectType.geometryType&&"MULTIPOINT"!==this.geoObjectType.geometryType||(e.coordinate={})},e.prototype.toggleGeometryView=function(e){var t=this;if(setTimeout((function(){t.mapRowHeight=t.elementRef.nativeElement.children[0].getElementsByClassName("attribute-element-wrapper")[0].offsetHeight}),0),this.readonly&&!this.isGeometryInlined)if(e.objectLayer)this.geomService.removeLayer(e.objectLayer.getId()),delete e.objectLayer;else{var n=(a=this.changeRequestEditor.geoObject).attributes.displayLabel.values&&a.attributes.displayLabel.values.length>0?a.attributes.displayLabel.values[0].value.localizedValue:a.attributes.code,i=this.changeRequestEditor.geoObjectType.label.localizedValue,r=n+" "+this.dateService.formatDateForDisplay(e.editor.startDate)+" ("+i+")",o=new h.GeoObjectLayerDataSource(this.service,a.attributes.code,this.changeRequestEditor.geoObjectType.code,e.editor.startDate);e.objectLayer=o.createLayer(r,!0,g().hexString()),this.geomService.addOrUpdateLayer(e.objectLayer,0)}else if(e.editingLayer)e.editingLayer.editing&&this.geomService.stopEditing(),this.geomService.removeLayer(e.editingLayer.getId()),this.geomService.unregisterDataSource(h.CHANGE_REQUEST_SOURCE_TYPE_NEW),delete e.editingLayer;else{var a;n=(a=this.changeRequestEditor.geoObject).attributes.displayLabel.values&&a.attributes.displayLabel.values.length>0?a.attributes.displayLabel.values[0].value.localizedValue:a.attributes.code,i=this.changeRequestEditor.geoObjectType.label.localizedValue,r=n+"* "+this.dateService.formatDateForDisplay(e.editor.startDate)+" ("+i+")",o=new h.ValueOverTimeDataSource("NEW",e.editor);e.editingLayer=o.createLayer(r,!0,g().hexString()),this.geomService.registerDataSource(o),this.geomService.addOrUpdateLayer(e.editingLayer,0)}},e.prototype.toggleOldGeometryView=function(e){if(null!=e.oldLayer)this.geomService.removeLayer(e.oldLayer.getId()),this.geomService.unregisterDataSource(h.CHANGE_REQUEST_SOURCE_TYPE_OLD),delete e.oldLayer;else{var t=this.changeRequestEditor.geoObject,n=t.attributes.displayLabel.values&&t.attributes.displayLabel.values.length>0?t.attributes.displayLabel.values[0].value.localizedValue:t.attributes.code,i=this.changeRequestEditor.geoObjectType.label.localizedValue,r=n+" "+this.dateService.formatDateForDisplay(e.editor.startDate)+" ("+i+")",o=new h.ValueOverTimeDataSource("OLD",e.editor);e.oldLayer=o.createLayer(r,!0,d.OLD_LAYER_COLOR),this.geomService.registerDataSource(o),this.geomService.addOrUpdateLayer(e.oldLayer,1)}},e.prototype.manualCoordinateChange=function(e){if(e.newCoordinateX||e.newCoordinateY){var t=e.newCoordinateX;e.value.coordinates&&e.value.coordinates[0]&&(t=e.value.coordinates[0]);var n=e.newCoordinateY;return e.value.coordinates&&e.value.coordinates[0]&&(n=e.value.coordinates[1]),e.value.coordinates=[[t||0,n||0]],delete e.newCoordinateX,void delete e.newCoordinateY}var i;if(e.coordinate.latValid=(i=e.value.coordinates[0][1],isFinite(i)&&Math.abs(i)<=90),e.coordinate.longValid=function(e){return isFinite(e)&&Math.abs(e)<=180}(e.value.coordinates[0][0]),!e.coordinate.latValid||!e.coordinate.longValid)return this.isValid=!1,void this.isValidChange.emit(this.isValid);this.geomService.setPointCoordinates(e.value.coordinates[0][1],e.value.coordinates[0][0])},e.ɵfac=function(t){return new(t||e)(f.ɵɵdirectiveInject(y.GeometryService),f.ɵɵdirectiveInject(f.ChangeDetectorRef),f.ɵɵdirectiveInject(y.RegistryService),f.ɵɵdirectiveInject(v.LocalizationService),f.ɵɵdirectiveInject(f.ChangeDetectorRef),f.ɵɵdirectiveInject(b.DateService),f.ɵɵdirectiveInject(S.AuthService),f.ɵɵdirectiveInject(C.ChangeRequestService),f.ɵɵdirectiveInject(E.BsModalService),f.ɵɵdirectiveInject(f.ElementRef))},e.ɵcmp=f.ɵɵdefineComponent({type:e,selectors:[["manage-versions"]],viewQuery:function(e,t){if(1&e&&f.ɵɵviewQuery(z,1),2&e){var n;f.ɵɵqueryRefresh(n=f.ɵɵloadQuery())&&(t.dateFieldComponentsArray=n)}},hostVars:1,hostBindings:function(e,t){2&e&&f.ɵɵsyntheticHostProperty("@fadeInOut",!0)},inputs:{isNew:"isNew",readonly:"readonly",isGeometryInlined:"isGeometryInlined",changeRequestEditor:"changeRequestEditor",geoObjectType:"geoObjectType",attributeType:"attributeType",hierarchy:"hierarchy",filterDate:"filterDate",showAllInstances:"showAllInstances"},outputs:{isValidChange:"isValidChange"},features:[f.ɵɵProvidersFeature([],[{provide:u.ControlContainer,useExisting:u.NgForm}]),f.ɵɵNgOnChangesFeature],decls:9,vars:5,consts:[["customItemTemplate",""],["name","manage-versions-form","autocomplete","off"],[1,"row"],[1,"col",2,"display","inline-block",3,"ngStyle"],["class","attribute-version-wrapper",4,"ngIf"],["style","width:55%;display:inline-block;vertical-align:top;margin-top:15px;",3,"geometryType","mapHeight","readOnly","bboxCode","bboxType","bboxDate",4,"ngIf"],[1,"attribute-version-wrapper"],[1,"list-group"],[1,"list-group-item",2,"text-align","left","padding","0"],[4,"ngIf"],["class","list-group-item","style","text-align: left;",4,"ngIf"],["style","margin-left: 15px;",4,"ngIf"],["style","margin-left:15px;",4,"ngIf"],[1,"table","table-striped"],[1,"attribute-element-wrapper"],["class","message",4,"ngIf"],[1,"message"],["key","changeovertime.manageVersions.no.versions.message"],["key","changeovertime.manageVersions.rootOfHierarchy.message"],["class","version-row",3,"ngClass",4,"ngFor","ngForOf"],[1,"version-row",3,"ngClass"],[1,"version-column-wrapper",3,"ngClass"],["class","version-column-indicator",4,"ngIf"],["class","attribute-value-row",4,"ngIf"],[1,"attribute-date-input-row"],["key","changeovertime.manageVersions.tableHeader.label.startDate"],["label","",3,"customStyles","value","inputName","allowFutureDates","required","disable","title","valueChange","change"],["dateFieldComponents",""],[1,"version-edit-date-container"],["key","changeovertime.manageVersions.tableHeader.label.endDate"],["label","",3,"customStyles","value","inputName","allowInfinity","allowFutureDates","required","placement","oldDate","disable","title","valueChange","change"],["class","manage-version-button clickable",3,"title","click",4,"ngIf"],[1,"version-column-indicator"],["class","attribute-value-row",4,"ngFor","ngForOf"],[1,"attribute-value-row"],["colspan","2"],[3,"key"],["type","text",1,"form-control",3,"ngClass","disabled","name","ngModel","required","ngModelChange"],[1,"form-input-validation-error-message-wrapper"],["class","error-message",4,"ngIf"],[1,"error-message"],["key","manage.versions.value.required.message"],[1,"warning-text","display-current-value",2,"padding","5px 0","margin-bottom","0"],["key","change.request.changed.value.prefix"],["style","padding:0;",4,"ngIf"],[1,"select-area",3,"ngClass","id","name","ngModel","disabled","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"classificationType","rootCode","classNames","name","value","disabled","valueChange"],["type","text","required","",1,"form-control",3,"ngClass","name","ngModel","disabled","ngModelChange"],["label","",3,"customStyles","value","inputName","allowInfinity","allowFutureDates","required","placement","valid","disable","valueChange","validChange"],["type","number","required","",1,"form-control",3,"ngClass","name","ngModel","disabled","ngModelChange"],[1,"radio","radio-inline",2,"padding-left","0"],["type","radio",1,"inline-radio-input",3,"checked","value","ngModel","id","name","disabled","ngModelChange"],[3,"ngClass"],["key","change.request.boolean.option.true"],[1,"radio","radio-inline"],["type","radio",1,"inline-radio-input",3,"ngClass","checked","value","ngModel","id","name","disabled","ngModelChange"],["key","change.request.boolean.option.false"],["style","float:left;width:100%;",4,"ngFor","ngForOf"],[2,"float","left","width","100%"],[1,"input-group"],["type","text","autocomplete","off",1,"form-control",2,"width","100%",3,"name","disabled","ngModel","typeaheadAsync","typeahead","ngClass","typeaheadOptionsLimit","typeaheadItemTemplate","typeaheadMinLength","typeaheadWaitMs","ngModelChange","typeaheadOnSelect","typeaheadLoading"],["class","input-group-addon clickable addon-alert",3,"click",4,"ngIf"],["class","input-group-addon addon-alert",4,"ngIf"],[1,"input-group-addon","clickable","addon-alert",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"input-group-addon","addon-alert"],[1,"warning-text","display-current-value"],["ng-switch","attributeType.type"],["ng-switch-when","'boolean'"],["style","padding-left:3px;",4,"ngIf"],["ng-switch-default",""],[2,"padding-left","3px"],[2,"padding","0"],["colspan","2",2,"padding-left","0"],["class","btn btn-primary","role","button",3,"disabled","click",4,"ngIf"],["role","button",1,"btn","btn-primary",2,"margin-left","0",3,"disabled","click"],["key","changeovertime.manageVersions.geometry.view",4,"ngIf"],["key","changeovertime.manageVersions.geometry.hide",4,"ngIf"],["class","fa fa-copy clickable",3,"click",4,"ngIf"],["role","button",1,"btn","btn-primary",3,"disabled","click"],["key","changeovertime.manageVersions.geometry.viewOld",4,"ngIf"],["key","changeovertime.manageVersions.geometry.hideOld",4,"ngIf"],["key","changeovertime.manageVersions.geometry.viewOld"],["key","changeovertime.manageVersions.geometry.hideOld"],["key","changeovertime.manageVersions.geometry.view"],["key","changeovertime.manageVersions.geometry.hide"],["key","changeovertime.manageVersions.geometry.edit",4,"ngIf"],["key","changeovertime.manageVersions.geometry.save",4,"ngIf"],["key","changeovertime.manageVersions.geometry.edit"],["key","changeovertime.manageVersions.geometry.save"],[1,"fa","fa-copy","clickable",3,"click"],[2,"width","50%","padding-left","0","padding-right","5px"],["key","geoobject.editor.geometry.latitude.label"],[1,"text-left"],["type","number","class","form-control","required","",3,"readonly","name","ngModel","ngModelChange","change",4,"ngIf"],[2,"width","50%"],["key","geoobject.editor.geometry.longitude.label"],["type","number","required","",1,"form-control",3,"readonly","name","ngModel","ngModelChange","change"],["key","change.request.geometry.invalidLatitude"],["key","change.request.geometry.invalidLongitude"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"manage-version-button","clickable",3,"title","click"],[1,"fa","fa-times"],[1,"fa","fa-undo"],[1,"list-group-item",2,"text-align","left"],[1,"fa","fa-plus","clickable",3,"click"],["key","changeovertime.manageVersions.newVersion"],[2,"margin-left","15px"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","ngClass","title","click"],["key","change.request.accept.btn"],["type","submit","role","button",1,"btn","btn-danger",3,"disabled","ngClass","title","click"],["key","change.request.reject.btn"],["type","submit","role","button",1,"btn","btn-warning",3,"disabled","ngClass","title","click"],["key","change.request.pending.btn"],["style","color:#6BA542;",4,"ngIf"],["style","color:#6d0400;",4,"ngIf"],[2,"color","#6BA542"],["key","change.request.status.accepted"],[2,"color","#6d0400"],["key","change.request.status.rejected"],[2,"width","55%","display","inline-block","vertical-align","top","margin-top","15px",3,"geometryType","mapHeight","readOnly","bboxCode","bboxType","bboxDate"],["geometryEditor",""]],template:function(e,t){1&e&&(f.ɵɵelementStart(0,"div"),f.ɵɵtemplate(1,D,2,2,"ng-template",null,0,f.ɵɵtemplateRefExtractor),f.ɵɵelementStart(3,"form",1),f.ɵɵelementStart(4,"fieldset"),f.ɵɵelementStart(5,"div",2),f.ɵɵelementStart(6,"div",3),f.ɵɵtemplate(7,Ve,7,4,"div",4),f.ɵɵelementEnd(),f.ɵɵtemplate(8,Fe,2,6,"geoobject-editor-map",5),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd(),f.ɵɵelementEnd()),2&e&&(f.ɵɵadvance(6),f.ɵɵproperty("ngStyle",f.ɵɵpureFunction1(3,He,t.isGeometryInlined&&t.geomService.getLayers().length>0?"45%":"100%")),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",t.changeRequestEditor.geoObject),f.ɵɵadvance(1),f.ɵɵproperty("ngIf",t.isGeometryInlined&&t.geomService.getLayers().length>0))},directives:[x.ɵangular_packages_forms_forms_ba,x.NgControlStatusGroup,x.NgForm,O.NgStyle,O.NgIf,I.LocalizeComponent,O.NgForOf,O.NgClass,M.DateFieldComponent,w.ConvertKeyLabel,x.DefaultValueAccessor,x.NgControlStatus,x.NgModel,x.RequiredValidator,x.SelectControlValueAccessor,x.NgSelectOption,x.ɵangular_packages_forms_forms_z,T.ClassificationFieldComponent,x.NumberValueAccessor,x.RadioControlValueAccessor,k.TypeaheadDirective,P.GeoObjectEditorMapComponent],pipes:[j.LocalizePipe],styles:['table[_ngcontent-%COMP%] {\n border-collapse: separate;\n padding: 15px;\n}\n\n.geometry-edit-active[_ngcontent-%COMP%] {\n  background-color: #f4fcef !important;\n  border: solid 1px #6BA542 !important;\n  \n}\n\n.version-column-wrapper.error-border[_ngcontent-%COMP%] {\n\tborder-color: #e30000;\n  border-style: solid;\n  border-width: 2px;\n}\n\n.version-column-wrapper.warning-border[_ngcontent-%COMP%] {\n  border-color: orange;\n  border-style: solid;\n  border-width: 2px;\n}\n\np.warning-text.display-current-value[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.version-column-wrapper[_ngcontent-%COMP%] {\n\tpadding-top: 0px;\n\tpadding-left: 0px;\n\tborder: solid 1px lightgrey;\n}\n.version-column-wrapper.warning[_ngcontent-%COMP%] {\n    background-color: inherit;\n    border-color: orange;\n    border-left: solid 5px orange;\n}\n\n.version-column-wrapper[_ngcontent-%COMP%]   .version-column-indicator[_ngcontent-%COMP%] {\n\tposition: relative;\n\tbackground: grey;\n    color: white;\n    left: -1px;\n    font-size: 14px;\n    font-weight: bold;\n    padding: 0 6px;\n    width: fit-content;\n    top: -1px;\n}\n.version-column-wrapper.warning[_ngcontent-%COMP%]   .version-column-indicator[_ngcontent-%COMP%] {\n    background-color: orange;\n}\n\n.manage-version-button[_ngcontent-%COMP%] {\n    border: solid 1px lightgrey;\n}\n\n.has-changed[_ngcontent-%COMP%] {\n\tcolor: orange;\n}\n\n.version-row[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] {\n padding-left: 10px;\n}\n.version-row[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\n padding-left: 5px;\n}\n\n.list-group[_ngcontent-%COMP%] {\n margin-bottom: 0;\n}\n\ntd[disabled="true"][_ngcontent-%COMP%] {\n     background: #f8f8f8;\n     cursor:not-allowed;\n}\ntd[disabled="true"][_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n     color: lightgrey;\n     cursor:not-allowed;\n}'],data:{animation:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")]),r.transition(":leave",r.animate("500ms",r.style({opacity:0})))])]]}}),e}();t.ManageVersionsComponent=Ge,("undefined"==typeof ngDevMode||ngDevMode)&&f.ɵsetClassMetadata(Ge,[{type:i.Component,args:[{selector:"manage-versions",templateUrl:"./manage-versions.component.html",styleUrls:["./manage-versions.css"],host:{"[@fadeInOut]":"true"},animations:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")]),r.transition(":leave",r.animate("500ms",r.style({opacity:0})))])]],viewProviders:[{provide:u.ControlContainer,useExisting:u.NgForm}]}]}],(function(){return[{type:y.GeometryService},{type:f.ChangeDetectorRef},{type:y.RegistryService},{type:v.LocalizationService},{type:f.ChangeDetectorRef},{type:b.DateService},{type:S.AuthService},{type:C.ChangeRequestService},{type:E.BsModalService},{type:f.ElementRef}]}),{isNew:[{type:i.Input}],dateFieldComponentsArray:[{type:i.ViewChildren,args:["dateFieldComponents"]}],isValidChange:[{type:i.Output}],readonly:[{type:i.Input}],isGeometryInlined:[{type:i.Input}],changeRequestEditor:[{type:i.Input}],geoObjectType:[{type:i.Input}],attributeType:[{type:i.Input}],hierarchy:[{type:i.Input}],filterDate:[{type:i.Input}],showAllInstances:[{type:i.Input}]})},1099:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectEditorMapComponent=void 0;var i=n(0),r=(n(1015),n(857)),o=n(0),a=n(1015),l=["mapDiv"],s=["geometryType",""],c=function(){function e(e,t,n){this.geomService=e,this.registryService=t,this.mapService=n,this._mapHeight=400,this.readOnly=!1}return Object.defineProperty(e.prototype,"mapHeight",{set:function(e){e>400&&(this._mapHeight=e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout((function(){e.mapDiv.nativeElement.id=Math.floor(899999*Math.random())+1e5,e.map=new r.Map({container:e.mapDiv.nativeElement.id,style:"mapbox://styles/mapbox/satellite-v9",zoom:2,center:[110.880453,10.897852]}),e.map.on("load",(function(){e.initMap()}))}),0)},e.prototype.ngOnDestroy=function(){this.geomService.destroy()},e.prototype.getIsValid=function(){return this.geomService.isValid()},e.prototype.initMap=function(){this.map.on("style.load",(function(){})),this.geomService.initialize(this.map,this.geometryType,!1),this.map.addControl(new r.NavigationControl),this.zoomToBbox()},e.prototype.zoomToBbox=function(){this.geomService.zoomToLayersExtent()},e.prototype.error=function(e){console.log("ERROR",e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.GeometryService),o.ɵɵdirectiveInject(a.RegistryService),o.ɵɵdirectiveInject(a.MapService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["geoobject-editor-map","geometryType",""]],viewQuery:function(e,t){if(1&e&&o.ɵɵviewQuery(l,1),2&e){var n;o.ɵɵqueryRefresh(n=o.ɵɵloadQuery())&&(t.mapDiv=n.first)}},inputs:{mapHeight:"mapHeight",geometryType:"geometryType",bboxCode:"bboxCode",bboxType:"bboxType",bboxDate:"bboxDate",readOnly:"readOnly"},attrs:s,decls:3,vars:2,consts:[[1,"geoobject-editor-map-wrapper"],[1,"map-view-port-inline","text-left",2,"width","calc(100% - 15px)"],["mapDiv",""]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelement(1,"div",1,2),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(1),o.ɵɵstyleProp("height",t._mapHeight,"px"))},styles:[""]}),e}();t.GeoObjectEditorMapComponent=c,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(c,[{type:i.Component,args:[{selector:"geoobject-editor-map[geometryType]",templateUrl:"./geoobject-editor-map.component.html",styleUrls:["./geoobject-editor-map.component.css"]}]}],(function(){return[{type:a.GeometryService},{type:a.RegistryService},{type:a.MapService}]}),{mapHeight:[{type:i.Input}],geometryType:[{type:i.Input}],bboxCode:[{type:i.Input}],bboxType:[{type:i.Input}],bboxDate:[{type:i.Input}],readOnly:[{type:i.Input}],mapDiv:[{type:i.ViewChild,args:["mapDiv"]}]})},1100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeRequestPageComponent=void 0;var i=n(0),r=(n(56),n(57),n(25),n(193)),o=n(0),a=n(25),l=n(56),s=n(57),c=n(221),d=n(139),p=n(1095),u=n(1),m=n(1067);function g(e,t){1&e&&o.ɵɵelement(0,"submit-change-request")}var h=function(){function e(e,t,n,i){this.localizationService=e,this.modalService=t,this.service=n,this.route=i,this.isAdmin=n.isAdmin(),this.isMaintainer=this.isAdmin||n.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||n.isContributer(),this.isContributorOnly=n.isContributerOnly()}return e.prototype.ngOnInit=function(){var e=this;this.urlSubscriber=this.route.params.subscribe((function(t){e.highlightOid=t.oid}))},e.prototype.ngOnDestroy=function(){this.urlSubscriber.unsubscribe()},e.prototype.error=function(e){this.bsModalRef=r.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.LocalizationService),o.ɵɵdirectiveInject(l.BsModalService),o.ɵɵdirectiveInject(a.AuthService),o.ɵɵdirectiveInject(s.ActivatedRoute))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["change-request-page"]],decls:13,vars:3,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid",2,"height","100%"],[1,"row"],[1,"col-md-12"],[1,"heading"],[1,"inner-col-content-wrapper",2,"padding-top","30px","margin-top","10px"],[3,"toggleId"],[4,"ngIf"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelement(1,"cgr-header"),o.ɵɵelement(2,"loading-bar"),o.ɵɵelementStart(3,"div",1),o.ɵɵelementStart(4,"div",2),o.ɵɵelementStart(5,"div",3),o.ɵɵelementStart(6,"div"),o.ɵɵelementStart(7,"div",4),o.ɵɵelementStart(8,"h2"),o.ɵɵtext(9),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(10,"div",5),o.ɵɵelement(11,"request-table",6),o.ɵɵtemplate(12,g,1,0,"submit-change-request",7),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(9),o.ɵɵtextInterpolate(t.pageTitle),o.ɵɵadvance(2),o.ɵɵproperty("toggleId",t.highlightOid),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.isContributorOnly))},directives:[c.CgrHeaderComponent,d.LoadingBarComponent,p.RequestTableComponent,u.NgIf,m.SubmitChangeRequestComponent],styles:["a.active[_ngcontent-%COMP%] {\n\tborder-bottom: solid 2px #6BA542;\n}"]}),e}();t.ChangeRequestPageComponent=h,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(h,[{type:i.Component,args:[{selector:"change-request-page",templateUrl:"./change-request-page.component.html",styleUrls:["./change-request-page.css"]}]}],(function(){return[{type:a.LocalizationService},{type:l.BsModalService},{type:a.AuthService},{type:s.ActivatedRoute}]}),null)},1101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduledJobsComponent=void 0;var i=n(0),r=(n(57),n(56),n(44)),o=(n(1015),n(193)),a=(n(25),n(547)),l=n(0),s=n(1015),c=n(56),d=n(57),p=n(25),u=n(221),m=n(139),g=n(1),h=n(88),f=n(379),y=n(1068),v=n(381);function b(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",20),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.message)}}function S(e,t){1&e&&l.ɵɵelement(0,"localize",37)}function C(e,t){1&e&&l.ɵɵelement(0,"localize",38)}function E(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"button",39),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=l.ɵɵnextContext(2).$implicit;return l.ɵɵnextContext().onCancelScheduledJob(e.historyId,e)})),l.ɵɵelement(1,"localize",40),l.ɵɵelementEnd()}}function x(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"button",41),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=l.ɵɵnextContext(2).$implicit;return l.ɵɵnextContext().onResolveScheduledJob(e.historyId,e)})),l.ɵɵelement(1,"localize",42),l.ɵɵelementEnd()}}function O(e,t){if(1&e&&(l.ɵɵelementStart(0,"td",29),l.ɵɵelementStart(1,"div",30),l.ɵɵelementStart(2,"a",31),l.ɵɵelementStart(3,"button",32),l.ɵɵtemplate(4,S,1,0,"localize",33),l.ɵɵtemplate(5,C,1,0,"localize",34),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(6,E,2,0,"button",35),l.ɵɵtemplate(7,x,2,0,"button",36),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext().$implicit;l.ɵɵadvance(2),l.ɵɵproperty("routerLink","/registry/job/"+n.historyId),l.ɵɵadvance(2),l.ɵɵproperty("ngIf","IMPORT_RESOLVE"===n.stage||"VALIDATION_RESOLVE"===n.stage),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","IMPORT_RESOLVE"!=n.stage&&"VALIDATION_RESOLVE"!=n.stage),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","VALIDATION_RESOLVE"===n.stage),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","IMPORT_RESOLVE"===n.stage)}}function I(e,t){if(1&e&&(l.ɵɵelementStart(0,"tr"),l.ɵɵelementStart(1,"td",11),l.ɵɵelementStart(2,"div",21),l.ɵɵelement(3,"i",22),l.ɵɵelementStart(4,"p",23),l.ɵɵelementStart(5,"span",24),l.ɵɵtext(6),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"span",24),l.ɵɵelementStart(8,"span",25),l.ɵɵelement(9,"date-text",26),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(10,"span",24),l.ɵɵtext(11),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelement(12,"step-indicator",27),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(13,O,8,5,"td",28),l.ɵɵelementEnd()),2&e){var n=t.$implicit,i=l.ɵɵnextContext();l.ɵɵadvance(6),l.ɵɵtextInterpolate1(" ",n.fileName," "),l.ɵɵadvance(3),l.ɵɵproperty("date",n.createDate),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",i.formatJobStatus(n)," "),l.ɵɵadvance(1),l.ɵɵproperty("steps",n.stepConfig),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",i.isAdmin||i.isMaintainer)}}function M(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",43),l.ɵɵelementStart(1,"pagination-controls",44),l.ɵɵlistener("pageChange",(function(e){return l.ɵɵrestoreView(n),l.ɵɵnextContext().onActiveJobsPageChange(e)})),l.ɵɵelementEnd(),l.ɵɵelementEnd()}}function w(e,t){1&e&&(l.ɵɵelementStart(0,"th",45),l.ɵɵelement(1,"localize",46),l.ɵɵelementEnd())}function T(e,t){1&e&&(l.ɵɵelementStart(0,"th",45),l.ɵɵelement(1,"localize",47),l.ɵɵelementEnd())}function k(e,t){1&e&&(l.ɵɵelementStart(0,"th",45),l.ɵɵelement(1,"localize",48),l.ɵɵelementEnd())}function P(e,t){1&e&&(l.ɵɵelementStart(0,"th",45),l.ɵɵelement(1,"localize",49),l.ɵɵelementEnd())}function j(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"th",50),l.ɵɵelementStart(1,"button",51),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().onViewAllCompleteJobs()})),l.ɵɵelement(2,"localize",52),l.ɵɵelementEnd(),l.ɵɵelementEnd()}}function z(e,t){1&e&&l.ɵɵelement(0,"th",53)}function D(e,t){1&e&&l.ɵɵelement(0,"td",60)}function R(e,t){if(1&e&&(l.ɵɵelementStart(0,"tr"),l.ɵɵelementStart(1,"td",54),l.ɵɵelementStart(2,"div",21),l.ɵɵelement(3,"i",55),l.ɵɵelementStart(4,"p",56),l.ɵɵtext(5),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(6,"td",57),l.ɵɵelementStart(7,"p",58),l.ɵɵtext(8),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(9,"td",57),l.ɵɵelementStart(10,"p",58),l.ɵɵtext(11),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(12,"td",57),l.ɵɵelementStart(13,"span",25),l.ɵɵelement(14,"date-text",26),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(15,"td",57),l.ɵɵelementStart(16,"span",25),l.ɵɵelement(17,"date-text",26),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(18,D,1,0,"td",59),l.ɵɵelementEnd()),2&e){var n=t.$implicit,i=l.ɵɵnextContext();l.ɵɵadvance(5),l.ɵɵtextInterpolate(n.fileName),l.ɵɵadvance(3),l.ɵɵtextInterpolate(i.formatJobStatus(n)),l.ɵɵadvance(3),l.ɵɵtextInterpolate(n.importedRecords),l.ɵɵadvance(3),l.ɵɵproperty("date",n.createDate),l.ɵɵadvance(3),l.ɵɵproperty("date",n.lastUpdateDate),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",i.isAdmin||i.isMaintainer)}}function L(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",43),l.ɵɵelementStart(1,"pagination-controls",61),l.ɵɵlistener("pageChange",(function(e){return l.ɵɵrestoreView(n),l.ɵɵnextContext().onCompleteJobsPageChange(e)})),l.ɵɵelementEnd(),l.ɵɵelementEnd()}}var _=function(e,t,n){return{id:"activeJobs",itemsPerPage:e,currentPage:t,totalItems:n}},A=function(e,t,n){return{id:"completeJobs",itemsPerPage:e,currentPage:t,totalItems:n}},N=function(){function e(e,t,n,i,r,o){this.service=e,this.modalService=t,this.router=n,this.localizeService=i,this.ioService=r,this.message=null,this.activeJobsPage={count:0,pageNumber:1,pageSize:10,resultSet:[]},this.completeJobsPage={count:0,pageNumber:1,pageSize:10,resultSet:[]},this.activeTimeCounter=0,this.completeTimeCounter=0,this.isViewAllOpen=!1,this.isAdmin=o.isAdmin(),this.isMaintainer=this.isAdmin||o.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||o.isContributer()}return e.prototype.ngOnInit=function(){var e=this;this.onActiveJobsPageChange(1),this.pollingData=r.interval(1e3).subscribe((function(){e.activeTimeCounter++,e.completeTimeCounter++,e.isViewAllOpen?(e.activeTimeCounter>=4&&(e.onActiveJobsPageChange(e.activeJobsPage.pageNumber),e.activeTimeCounter=0),e.completeTimeCounter>=7&&(e.onCompleteJobsPageChange(e.completeJobsPage.pageNumber),e.completeTimeCounter=0)):e.activeTimeCounter>=2&&(e.onActiveJobsPageChange(e.activeJobsPage.pageNumber),e.activeTimeCounter=0)}))},e.prototype.ngOnDestroy=function(){this.pollingData.unsubscribe()},e.prototype.formatJobStatus=function(e){return"FEEDBACK"===e.status?this.localizeService.decode("etl.JobStatus.FEEDBACK"):"RUNNING"===e.status||"NEW"===e.status?this.localizeService.decode("etl.JobStatus.RUNNING"):"QUEUED"===e.status?this.localizeService.decode("etl.JobStatus.QUEUED"):"SUCCESS"===e.status?this.localizeService.decode("etl.JobStatus.SUCCESS"):"CANCELED"===e.status?this.localizeService.decode("etl.JobStatus.CANCELED"):"FAILURE"===e.status?this.localizeService.decode("etl.JobStatus.FAILURE"):this.localizeService.decode("etl.JobStatus.RUNNING")},e.prototype.formatStepConfig=function(e){var t=this;e.resultSet.forEach((function(e){var n={steps:[{label:t.localizeService.decode("scheduler.step.fileImport"),status:"COMPLETE"},{label:t.localizeService.decode("scheduler.step.staging"),status:"NEW"===e.stage?t.getJobStatus(e):t.getCompletedStatus(e.stage,"NEW")},{label:t.localizeService.decode("scheduler.step.validation"),status:"VALIDATE"===e.stage||"VALIDATION_RESOLVE"===e.stage?t.getJobStatus(e):t.getCompletedStatus(e.stage,"VALIDATE")},{label:t.localizeService.decode("scheduler.step.databaseImport"),status:"IMPORT"===e.stage||"IMPORT_RESOLVE"===e.stage||"RESUME_IMPORT"===e.stage?t.getJobStatus(e):""}]};(e=e).stepConfig=n}))},e.prototype.getCompletedStatus=function(e,t){var n=["NEW","VALIDATE","VALIDATION_RESOLVE","IMPORT","IMPORT_RESOLVE","RESUME_IMPORT"],i=n.indexOf(e);return n.indexOf(t)<i?"COMPLETE":""},e.prototype.getJobStatus=function(e){return"QUEUED"===e.status||"RUNNING"===e.status?"WORKING":"FEEDBACK"===e.status?"STUCK":""},e.prototype.onViewAllCompleteJobs=function(){this.onCompleteJobsPageChange(1),this.isViewAllOpen=!0},e.prototype.onView=function(e){this.router.navigate(["/registry/master-list-history/",e])},e.prototype.onActiveJobsPageChange=function(e){var t=this;this.message=null,this.service.getScheduledJobs(this.activeJobsPage.pageSize,e,"createDate",!1).then((function(e){t.activeJobsPage=e,t.formatStepConfig(t.activeJobsPage)})).catch((function(e){t.error(e)}))},e.prototype.onCompleteJobsPageChange=function(e){var t=this;this.message=null,this.service.getCompletedScheduledJobs(this.completeJobsPage.pageSize,e,"createDate",!1).then((function(e){t.completeJobsPage=e,t.formatStepConfig(t.completeJobsPage)})).catch((function(e){t.error(e)}))},e.prototype.onCancelScheduledJob=function(e,t){var n=this;this.bsModalRef=this.modalService.show(o.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("etl.import.cancel.modal.description"),this.bsModalRef.content.submitText=this.localizeService.decode("etl.import.cancel.modal.button"),this.bsModalRef.content.type=a.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(e){n.ioService.cancelImport(t.configuration).then((function(e){n.bsModalRef.hide();for(var i=0;i<n.activeJobsPage.resultSet.length;++i){if(n.activeJobsPage.resultSet[i].jobId===t.jobId){n.activeJobsPage.resultSet.splice(i,1);break}}n.onViewAllCompleteJobs()})).catch((function(e){n.error(e)}))}))},e.prototype.onResolveScheduledJob=function(e,t){var n=this;this.bsModalRef=this.modalService.show(o.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("etl.import.resume.modal.importDescription"),this.bsModalRef.content.submitText=this.localizeService.decode("etl.import.resume.modal.importButton"),this.bsModalRef.content.type=a.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(i){n.service.resolveScheduledJob(e).then((function(e){n.bsModalRef.hide();for(var i=0;i<n.activeJobsPage.resultSet.length;++i){if(n.activeJobsPage.resultSet[i].jobId===t.jobId){n.activeJobsPage.resultSet.splice(i,1);break}}n.onViewAllCompleteJobs()})).catch((function(e){n.error(e)}))}))},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.RegistryService),l.ɵɵdirectiveInject(c.BsModalService),l.ɵɵdirectiveInject(d.Router),l.ɵɵdirectiveInject(p.LocalizationService),l.ɵɵdirectiveInject(s.IOService),l.ɵɵdirectiveInject(p.AuthService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["scheduled-jobs"]],decls:37,vars:25,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"py-5"],["key","scheduledjobs.title"],[1,"row"],[1,"col-md-12","order-md-1"],[1,"list-group"],[1,"solid-table-wrapper"],[1,"table","table-striped"],[2,"height","56px"],[2,"vertical-align","middle"],["key","scheduledjobs.jobs.table.header"],[4,"ngFor","ngForOf"],["class","solid-table-footer",4,"ngIf"],[2,"width","40%","border-bottom","none"],["key","scheduledjobs.completedjobs.table.header",2,"line-height","40px"],["style","width:15%;border-bottom: none;",4,"ngIf"],["style","border-bottom: none; width:15%",4,"ngIf"],["style","border-bottom: none; width:0%",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","40px"],[2,"padding-left","60px"],[2,"display","block"],[1,"date-string-display"],[3,"date"],[3,"steps"],["style","text-align: right;vertical-align: middle;",4,"ngIf"],[2,"text-align","right","vertical-align","middle"],[1,"button-holder",2,"float","right"],["routerLinkActive","active",3,"routerLink"],["role","button",1,"btn","btn-primary"],["key","scheduledjobs.fix.problems.button",4,"ngIf"],["key","scheduledjobs.detail.button",4,"ngIf"],["type","button","class","btn btn-danger","role","button",3,"click",4,"ngIf"],["type","submit","class","btn btn-danger","role","button",3,"click",4,"ngIf"],["key","scheduledjobs.fix.problems.button"],["key","scheduledjobs.detail.button"],["type","button","role","button",1,"btn","btn-danger",3,"click"],["key","etl.import.cancel.openModal"],["type","submit","role","button",1,"btn","btn-danger",3,"click"],["key","scheduledjobs.complete.import.button"],[1,"solid-table-footer"],["id","activeJobs",3,"pageChange"],[2,"width","15%","border-bottom","none"],["key","scheduledjobs.status",2,"line-height","40px"],["key","scheduledjobs.importedRecords",2,"line-height","40px"],["key","scheduledjobs.importStartDate",2,"line-height","40px"],["key","scheduledjobs.importEndDate",2,"line-height","40px"],[2,"border-bottom","none","width","15%"],["type","submit","role","button",1,"btn","btn-default","pull-right",3,"click"],["key","scheduledjobs.view.completed.jobs.button"],[2,"border-bottom","none","width","0%"],[2,"width","40%","vertical-align","middle"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute"],[2,"padding-left","30px","margin","0"],[2,"width","15%","vertical-align","middle"],[2,"padding-left","0px","margin","0"],["style","width:15%;text-align: right;vertical-align: middle;",4,"ngIf"],[2,"width","15%","text-align","right","vertical-align","middle"],["id","completeJobs",3,"pageChange"]],template:function(e,t){1&e&&(l.ɵɵelementStart(0,"div",0),l.ɵɵelement(1,"cgr-header"),l.ɵɵelement(2,"loading-bar"),l.ɵɵelementStart(3,"div",1),l.ɵɵtemplate(4,b,2,1,"div",2),l.ɵɵelementStart(5,"div",3),l.ɵɵelementStart(6,"h2"),l.ɵɵelement(7,"localize",4),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(8,"div",5),l.ɵɵelementStart(9,"div",6),l.ɵɵelementStart(10,"ul",7),l.ɵɵelementStart(11,"div",8),l.ɵɵelementStart(12,"table",9),l.ɵɵelementStart(13,"thead"),l.ɵɵelementStart(14,"tr",10),l.ɵɵelementStart(15,"th",11),l.ɵɵelement(16,"localize",12),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(17,"tbody"),l.ɵɵtemplate(18,I,14,5,"tr",13),l.ɵɵpipe(19,"paginate"),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(20,M,2,0,"div",14),l.ɵɵelementEnd(),l.ɵɵelementStart(21,"div",8),l.ɵɵelementStart(22,"table",9),l.ɵɵelementStart(23,"thead"),l.ɵɵelementStart(24,"tr"),l.ɵɵelementStart(25,"th",15),l.ɵɵelement(26,"localize",16),l.ɵɵelementEnd(),l.ɵɵtemplate(27,w,2,0,"th",17),l.ɵɵtemplate(28,T,2,0,"th",17),l.ɵɵtemplate(29,k,2,0,"th",17),l.ɵɵtemplate(30,P,2,0,"th",17),l.ɵɵtemplate(31,j,3,0,"th",18),l.ɵɵtemplate(32,z,1,0,"th",19),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(33,"tbody"),l.ɵɵtemplate(34,R,19,6,"tr",13),l.ɵɵpipe(35,"paginate"),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(36,L,2,0,"div",14),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e&&(l.ɵɵadvance(4),l.ɵɵproperty("ngIf",null!=t.message),l.ɵɵadvance(14),l.ɵɵproperty("ngForOf",l.ɵɵpipeBind2(19,11,t.activeJobsPage.resultSet,l.ɵɵpureFunction3(17,_,t.activeJobsPage.pageSize,t.activeJobsPage.pageNumber,t.activeJobsPage.count))),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",t.activeJobsPage.resultSet.length>0),l.ɵɵadvance(7),l.ɵɵproperty("ngIf",t.completeJobsPage.resultSet.length>0),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.completeJobsPage.resultSet.length>0),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.completeJobsPage.resultSet.length>0),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.completeJobsPage.resultSet.length>0),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.completeJobsPage.resultSet.length<1),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.completeJobsPage.resultSet.length>0),l.ɵɵadvance(2),l.ɵɵproperty("ngForOf",l.ɵɵpipeBind2(35,14,t.completeJobsPage.resultSet,l.ɵɵpureFunction3(21,A,t.completeJobsPage.pageSize,t.completeJobsPage.pageNumber,t.completeJobsPage.count))),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",t.completeJobsPage.resultSet.length>0))},directives:[u.CgrHeaderComponent,m.LoadingBarComponent,g.NgIf,h.LocalizeComponent,g.NgForOf,f.DateTextComponent,y.StepIndicatorComponent,d.RouterLinkWithHref,d.RouterLinkActive,v.PaginationControlsComponent],pipes:[v.PaginatePipe],styles:[".new-admin-design-main[_ngcontent-%COMP%] {\n    \n}\n\n\n.solid-table-wrapper[_ngcontent-%COMP%] {\n    background: #F4F4F4;\n    border-radius: 15px;\n    margin-bottom: 20px;\n}\n.solid-table-footer[_ngcontent-%COMP%] {\n    \n    border-radius: 0 0 15px 15px;\n    padding: 0 0 10px 10px;\n}\n\n\n\n.wrapper[_ngcontent-%COMP%] {\n    padding: 10px;\n}"]}),e}();t.ScheduledJobsComponent=N,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(N,[{type:i.Component,args:[{selector:"scheduled-jobs",templateUrl:"./scheduled-jobs.component.html",styleUrls:["./scheduled-jobs.css"]}]}],(function(){return[{type:s.RegistryService},{type:c.BsModalService},{type:d.Router},{type:p.LocalizationService},{type:s.IOService},{type:p.AuthService}]}),null)},1102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobComponent=void 0;var i=n(0),r=(n(57),n(56),n(861)),o=n(1103),a=n(1108),l=(n(1015),n(194),n(193)),s=(n(25),n(547)),c=n(1036),d=n(0),p=n(1015),u=n(56),m=n(57),g=n(194),h=n(25),f=n(221),y=n(139),v=n(1),b=n(88),S=n(379),C=n(381);function E(e,t){if(1&e&&(d.ɵɵelementStart(0,"div",7),d.ɵɵtext(1),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext();d.ɵɵadvance(1),d.ɵɵtextInterpolate(n.message)}}function x(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"div",27),d.ɵɵelementStart(1,"span",28),d.ɵɵelement(2,"localize",29),d.ɵɵelementEnd(),d.ɵɵelementStart(3,"button",30),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext(2);return e.onResolveScheduledJob(e.job.historyId)})),d.ɵɵelement(4,"localize",31),d.ɵɵelementEnd(),d.ɵɵelementEnd()}}function O(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"div",27),d.ɵɵelementStart(1,"span",28),d.ɵɵelement(2,"localize",32),d.ɵɵelementEnd(),d.ɵɵelementStart(3,"button",30),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext(2);return e.onResolveScheduledJob(e.job.historyId)})),d.ɵɵelement(4,"localize",33),d.ɵɵelementEnd(),d.ɵɵelementEnd()}}function I(e,t){1&e&&d.ɵɵelement(0,"localize",37)}function M(e,t){1&e&&(d.ɵɵelementStart(0,"span"),d.ɵɵelement(1,"localize",33),d.ɵɵelementEnd())}function w(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"div",34),d.ɵɵelementStart(1,"button",30),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext(2);return e.onResolveScheduledJob(e.job.historyId)})),d.ɵɵtemplate(2,I,1,0,"localize",35),d.ɵɵtemplate(3,M,2,0,"span",36),d.ɵɵelementEnd(),d.ɵɵelementEnd()}if(2&e){var i=d.ɵɵnextContext(2);d.ɵɵadvance(2),d.ɵɵproperty("ngIf",i.job&&"VALIDATION_RESOLVE"===i.job.stage),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",i.job&&"IMPORT_RESOLVE"===i.job.stage)}}function T(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"div",38),d.ɵɵelementStart(1,"button",30),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext(2);return e.onReuploadAndResume(e.job.historyId)})),d.ɵɵelementStart(2,"span"),d.ɵɵelement(3,"localize",39),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd()}}function k(e,t){if(1&e&&(d.ɵɵelementStart(0,"div",8),d.ɵɵelementStart(1,"div",9),d.ɵɵelementStart(2,"div",10),d.ɵɵelement(3,"i",11),d.ɵɵelementStart(4,"p",12),d.ɵɵelementStart(5,"span",13),d.ɵɵelementStart(6,"strong"),d.ɵɵtext(7),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(8,"span",13),d.ɵɵelement(9,"localize",14),d.ɵɵtext(10),d.ɵɵelementEnd(),d.ɵɵelementStart(11,"span",13),d.ɵɵelement(12,"localize",15),d.ɵɵelementStart(13,"span",16),d.ɵɵelement(14,"date-text",17),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(15,"div",18),d.ɵɵelementStart(16,"div"),d.ɵɵelementStart(17,"h5"),d.ɵɵelementStart(18,"b"),d.ɵɵtext(19),d.ɵɵelement(20,"localize",19),d.ɵɵtext(21),d.ɵɵelement(22,"localize",20),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(23,"h5"),d.ɵɵtext(24),d.ɵɵelement(25,"localize",21),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(26,"div",22),d.ɵɵtemplate(27,x,5,0,"div",23),d.ɵɵtemplate(28,O,5,0,"div",24),d.ɵɵtemplate(29,w,4,2,"div",25),d.ɵɵtemplate(30,T,4,0,"div",26),d.ɵɵelementEnd(),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext();d.ɵɵadvance(7),d.ɵɵtextInterpolate(n.job.fileName),d.ɵɵadvance(3),d.ɵɵtextInterpolate1(" ",n.job.author," "),d.ɵɵadvance(4),d.ɵɵproperty("date",n.job.createDate),d.ɵɵadvance(5),d.ɵɵtextInterpolate1("",n.job.importedRecords," "),d.ɵɵadvance(2),d.ɵɵtextInterpolate1(" ",n.job.workTotal," "),d.ɵɵadvance(3),d.ɵɵtextInterpolate1("",n.job.workTotal-n.job.importedRecords," "),d.ɵɵadvance(3),d.ɵɵproperty("ngIf",0==n.page.resultSet.length&&n.job&&"VALIDATION_RESOLVE"===n.job.stage),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",0==n.page.resultSet.length&&n.job&&"IMPORT_RESOLVE"===n.job.stage),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",n.page&&null!=n.page.resultSet&&n.page.resultSet.length>0&&!n.hasRowValidationProblem),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",n.hasRowValidationProblem)}}function P(e,t){1&e&&(d.ɵɵelementStart(0,"thead"),d.ɵɵelementStart(1,"tr"),d.ɵɵelementStart(2,"th",47),d.ɵɵelement(3,"localize",48),d.ɵɵelementEnd(),d.ɵɵelementStart(4,"th",47),d.ɵɵelement(5,"localize",49),d.ɵɵelementEnd(),d.ɵɵelementStart(6,"th",47),d.ɵɵelement(7,"localize",50),d.ɵɵelementEnd(),d.ɵɵelement(8,"th",47),d.ɵɵelementEnd(),d.ɵɵelementEnd())}function j(e,t){1&e&&(d.ɵɵelementStart(0,"thead"),d.ɵɵelementStart(1,"tr"),d.ɵɵelementStart(2,"th",47),d.ɵɵelement(3,"localize",51),d.ɵɵelementEnd(),d.ɵɵelementStart(4,"th",47),d.ɵɵelement(5,"localize",52),d.ɵɵelementEnd(),d.ɵɵelementStart(6,"th",47),d.ɵɵelement(7,"localize",53),d.ɵɵelementEnd(),d.ɵɵelement(8,"th",47),d.ɵɵelementEnd(),d.ɵɵelementEnd())}function z(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"td",57),d.ɵɵelementStart(1,"button",58),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().$implicit;return d.ɵɵnextContext(4).onEdit(e)})),d.ɵɵelement(2,"localize",59),d.ɵɵelementEnd(),d.ɵɵelementEnd()}}function D(e,t){if(1&e&&(d.ɵɵelementStart(0,"tr"),d.ɵɵelementStart(1,"td",55),d.ɵɵelementStart(2,"p"),d.ɵɵtext(3),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(4,"td",55),d.ɵɵelementStart(5,"p"),d.ɵɵtext(6),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(7,"td",55),d.ɵɵelementStart(8,"p"),d.ɵɵtext(9),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵtemplate(10,z,3,0,"td",56),d.ɵɵelementEnd()),2&e){var n=t.$implicit,i=d.ɵɵnextContext(4);d.ɵɵadvance(3),d.ɵɵtextInterpolate(i.getFriendlyProblemType(n.exception.type)),d.ɵɵadvance(3),d.ɵɵtextInterpolate(n.exception.message),d.ɵɵadvance(3),d.ɵɵtextInterpolate(n.rowNum),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",i.isAdmin||i.isMaintainer)}}var R=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}};function L(e,t){if(1&e&&(d.ɵɵelementStart(0,"tbody"),d.ɵɵtemplate(1,D,11,4,"tr",54),d.ɵɵpipe(2,"paginate"),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext(3);d.ɵɵadvance(1),d.ɵɵproperty("ngForOf",d.ɵɵpipeBind2(2,1,n.page.resultSet,d.ɵɵpureFunction3(4,R,n.page.pageSize,n.page.pageNumber,n.page.count)))}}function _(e,t){if(1&e&&(d.ɵɵelementStart(0,"p"),d.ɵɵtext(1),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵadvance(1),d.ɵɵtextInterpolate(n.exception.message)}}function A(e,t){if(1&e&&(d.ɵɵelementStart(0,"p"),d.ɵɵtext(1),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵadvance(1),d.ɵɵtextInterpolate(n.label)}}function N(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"td",57),d.ɵɵelementStart(1,"button",58),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().$implicit;return d.ɵɵnextContext(4).onEdit(e)})),d.ɵɵelement(2,"localize",59),d.ɵɵelementEnd(),d.ɵɵelementEnd()}}function V(e,t){if(1&e&&(d.ɵɵelementStart(0,"tr"),d.ɵɵelementStart(1,"td",55),d.ɵɵelementStart(2,"p"),d.ɵɵtext(3),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(4,"td",55),d.ɵɵtemplate(5,_,2,1,"p",36),d.ɵɵtemplate(6,A,2,1,"p",36),d.ɵɵelementEnd(),d.ɵɵelementStart(7,"td",55),d.ɵɵelementStart(8,"p"),d.ɵɵtext(9),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵtemplate(10,N,3,0,"td",56),d.ɵɵelementEnd()),2&e){var n=t.$implicit,i=d.ɵɵnextContext(4);d.ɵɵadvance(3),d.ɵɵtextInterpolate(n.type),d.ɵɵadvance(2),d.ɵɵproperty("ngIf","RowValidationProblem"===n.type),d.ɵɵadvance(1),d.ɵɵproperty("ngIf","ParentReferenceProblem"===n.type||"TermReferenceProblem"===n.type),d.ɵɵadvance(3),d.ɵɵtextInterpolate(i.formatAffectedRows(n.affectedRows)),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",i.isAdmin||i.isMaintainer)}}function F(e,t){if(1&e&&(d.ɵɵelementStart(0,"tbody"),d.ɵɵtemplate(1,V,11,5,"tr",54),d.ɵɵpipe(2,"paginate"),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext(3);d.ɵɵadvance(1),d.ɵɵproperty("ngForOf",d.ɵɵpipeBind2(2,1,n.page.resultSet,d.ɵɵpureFunction3(4,R,n.page.pageSize,n.page.pageNumber,n.page.count)))}}function H(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"div",45),d.ɵɵelementStart(1,"pagination-controls",60),d.ɵɵlistener("pageChange",(function(e){return d.ɵɵrestoreView(n),d.ɵɵnextContext(3).onPageChange(e)})),d.ɵɵelementEnd(),d.ɵɵelementEnd()}}function G(e,t){if(1&e&&(d.ɵɵelementStart(0,"div",42),d.ɵɵelementStart(1,"ul",43),d.ɵɵelementStart(2,"table",44),d.ɵɵtemplate(3,P,9,0,"thead",36),d.ɵɵtemplate(4,j,9,0,"thead",36),d.ɵɵtemplate(5,L,3,8,"tbody",36),d.ɵɵtemplate(6,F,3,8,"tbody",36),d.ɵɵelementEnd(),d.ɵɵelementStart(7,"div",45),d.ɵɵtemplate(8,H,2,0,"div",46),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext(2);d.ɵɵadvance(3),d.ɵɵproperty("ngIf","IMPORT_RESOLVE"===n.job.stage),d.ɵɵadvance(1),d.ɵɵproperty("ngIf","VALIDATION_RESOLVE"===n.job.stage),d.ɵɵadvance(1),d.ɵɵproperty("ngIf","IMPORT_RESOLVE"===n.job.stage),d.ɵɵadvance(1),d.ɵɵproperty("ngIf","VALIDATION_RESOLVE"===n.job.stage),d.ɵɵadvance(2),d.ɵɵproperty("ngIf",n.page.resultSet.length>0)}}function B(e,t){if(1&e&&(d.ɵɵelementStart(0,"div",40),d.ɵɵtemplate(1,G,9,5,"div",41),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext();d.ɵɵadvance(1),d.ɵɵproperty("ngIf",n.job)}}var q=function(){function e(e,t,n,i,r,o,a,l){this.service=e,this.modalService=t,this.router=n,this.route=i,this.dateService=r,this.localizeService=o,this.ioService=l,this.message=null,this.allSelected=!1,this.historyId="",this.page={count:0,pageNumber:1,pageSize:10,resultSet:[]},this.timeCounter=0,this.isPolling=!1,this.hasRowValidationProblem=!1,this.subscription=null,this.isAdmin=a.isAdmin(),this.isMaintainer=this.isAdmin||a.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||a.isContributer()}return e.prototype.ngOnInit=function(){var e=this;this.historyId=this.route.snapshot.params.oid,this.onPageChange(1);var t=c.WebSockets.buildBaseUrl();this.notifier=r.webSocket(t+"/websocket/notify"),this.subscription=this.notifier.subscribe((function(t){"IMPORT_JOB_CHANGE"===t.type&&e.onPageChange(e.page.pageNumber)}))},e.prototype.ngOnDestroy=function(){null!=this.subscription&&this.subscription.unsubscribe(),this.notifier.complete()},e.prototype.formatAffectedRows=function(e){return e.replace(/,/g,", ")},e.prototype.formatValidationResolve=function(e){return JSON.stringify(e)},e.prototype.onProblemResolved=function(e){for(var t=0;t<this.page.resultSet.length;++t){this.page.resultSet[t].id===e.id&&this.page.resultSet.splice(t,1)}},e.prototype.getFriendlyProblemType=function(e){return"net.geoprism.registry.io.ParentCodeException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.parent.lookup"):"net.geoprism.registry.io.PostalCodeLocationException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.postal.code.lookup"):"net.geoprism.registry.io.AmbiguousParentException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.multi.parent.lookup"):"net.geoprism.registry.io.InvalidGeometryException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.invalid.geom.lookup"):"net.geoprism.registry.DataNotFoundException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.datanotfound"):"net.geoprism.registry.geoobject.ImportOutOfRangeException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.importOutOfRange"):"net.geoprism.registry.roles.CreateGeoObjectPermissionException"===e||"net.geoprism.registry.roles.WriteGeoObjectPermissionException"===e||"net.geoprism.registry.roles.DeleteGeoObjectPermissionException"===e||"net.geoprism.registry.roles.ReadGeoObjectPermissionException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.permission"):"com.runwaysdk.dataaccess.DuplicateDataException"===e||"net.geoprism.registry.DuplicateGeoObjectException"===e||"net.geoprism.registry.DuplicateGeoObjectCodeException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.duplicate.data.lookup"):e},e.prototype.onEdit=function(e){var t=this;this.bsModalRef=this.modalService.show(o.JobConflictModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.problem=e,this.bsModalRef.content.job=this.job,this.bsModalRef.content.onConflictAction.subscribe((function(e){"RESOLVED"===e.action&&t.onProblemResolved(e.data)}))},e.prototype.onPageChange=function(e){var t=this;this.message=null,this.service.getScheduledJob(this.historyId,this.page.pageSize,e,!0).then((function(e){if(t.job=e,"IMPORT_RESOLVE"===t.job.stage)t.page=t.job.importErrors;else if("VALIDATION_RESOLVE"===t.job.stage){t.page=t.job.problems;for(var n=0;n<t.page.resultSet.length;++n){"RowValidationProblem"===t.page.resultSet[n].type&&(t.hasRowValidationProblem=!0)}}e.exception&&t.error(e.exception)})).catch((function(e){t.error(e)}))},e.prototype.onViewAllActiveJobs=function(){},e.prototype.onViewAllCompleteJobs=function(){},e.prototype.toggleAll=function(){var e=this;this.allSelected=!this.allSelected,this.job.importErrors.resultSet.forEach((function(t){t.selected=e.allSelected}))},e.prototype.onReuploadAndResume=function(e){var t=this;this.bsModalRef=this.modalService.show(a.ReuploadModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.job=this.job,this.bsModalRef.content.onConfirm.subscribe((function(e){t.router.navigate(["/registry/scheduled-jobs"])}))},e.prototype.onResolveScheduledJob=function(e){var t=this;0===this.page.resultSet.length?this.service.resolveScheduledJob(e).then((function(e){t.router.navigate(["/registry/scheduled-jobs"])})).catch((function(e){t.error(e)})):(this.bsModalRef=this.modalService.show(l.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),"VALIDATION_RESOLVE"===this.job.stage?(this.bsModalRef.content.message=this.localizeService.decode("etl.import.resume.modal.validationDescription"),this.bsModalRef.content.submitText=this.localizeService.decode("etl.import.resume.modal.validationButton")):(this.bsModalRef.content.message=this.localizeService.decode("etl.import.resume.modal.importDescription"),this.bsModalRef.content.submitText=this.localizeService.decode("etl.import.resume.modal.importButton")),this.bsModalRef.content.type=s.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(n){t.service.resolveScheduledJob(e).then((function(e){t.router.navigate(["/registry/scheduled-jobs"])})).catch((function(e){t.error(e)}))})))},e.prototype.onCancelScheduledJob=function(e){var t=this;this.bsModalRef=this.modalService.show(l.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("etl.import.cancel.modal.description"),this.bsModalRef.content.submitText=this.localizeService.decode("etl.import.cancel.modal.button"),this.bsModalRef.content.type=s.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(e){t.ioService.cancelImport(t.job.configuration).then((function(e){t.router.navigate(["/registry/scheduled-jobs"])})).catch((function(e){t.error(e)}))}))},e.prototype.error=function(e){this.message=l.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(d.ɵɵdirectiveInject(p.RegistryService),d.ɵɵdirectiveInject(u.BsModalService),d.ɵɵdirectiveInject(m.Router),d.ɵɵdirectiveInject(m.ActivatedRoute),d.ɵɵdirectiveInject(g.DateService),d.ɵɵdirectiveInject(h.LocalizationService),d.ɵɵdirectiveInject(h.AuthService),d.ɵɵdirectiveInject(p.IOService))},e.ɵcmp=d.ɵɵdefineComponent({type:e,selectors:[["job"]],decls:10,vars:3,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"py-5"],["key","scheduledjobs.details.title"],["class","row","style","background: #F4F4F4;\n                                border-radius: 15px;\n                                margin-bottom: 20px;\n                                margin-top: 20px;\n                                padding: 10px;",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"row",2,"background","#F4F4F4","border-radius","15px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-4","order-md-1"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"],["key","scheduledjobs.job.uploaded.by.label"],["key","scheduledjobs.job.started.label"],[1,"date-string-display"],[3,"date"],[1,"col-md-3","order-md-1"],["key","scheduledjobs.job.imported.out.of.label"],["key","scheduledjobs.job.imported.total.label"],["key","scheduledjobs.job.remaining.label"],[1,"col-md-5","order-md-1"],["style","display:block; margin: 10px;text-align: right;",4,"ngIf"],["style","display:block; margin:10px;text-align: right;",4,"ngIf"],["class","button-holder","style","display:block; margin:10px;text-align: right;",4,"ngIf"],["class","button-holder","style","display:block; margin:10px;",4,"ngIf"],[2,"display","block","margin","10px","text-align","right"],[2,"display","block","margin-bottom","10px"],["key","scheduledjobs.validation.problems.complete.msg"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","scheduledjobs.reimport.button"],["key","scheduledjobs.import.problems.complete.msg"],["key","scheduledjobs.complete.import.button"],[1,"button-holder",2,"display","block","margin","10px","text-align","right"],["key","etl.import.resume.openModal",4,"ngIf"],[4,"ngIf"],["key","etl.import.resume.openModal"],[1,"button-holder",2,"display","block","margin","10px"],["key","scheduledjobs.reupload.resume.button"],[1,"row"],["class","col-md-12 order-md-1",4,"ngIf"],[1,"col-md-12","order-md-1"],[1,"list-group"],[1,"list-table","table","table-bordered","table-striped"],[1,"solid-table-footer"],["class","solid-table-footer",4,"ngIf"],[1,"label-column"],["key","scheduledjobs.import.table.problem.type.header"],["key","scheduledjobs.import.table.message.header"],["key","scheduledjobs.import.table.row.number.header"],["key","scheduledjobs.validation.table.problem.type.header"],["key","scheduledjobs.validation.table.label.header"],["key","scheduledjobs.validation.table.affected.rows.header"],[4,"ngFor","ngForOf"],[1,"label-column",2,"vertical-align","middle"],["class","label-column","style","text-align: right;",4,"ngIf"],[1,"label-column",2,"text-align","right"],["type","submit","role","button",1,"btn","btn-link",3,"click"],["key","scheduledjobs.fix.problem.button"],[3,"pageChange"]],template:function(e,t){1&e&&(d.ɵɵelementStart(0,"div",0),d.ɵɵelement(1,"cgr-header"),d.ɵɵelement(2,"loading-bar"),d.ɵɵelementStart(3,"div",1),d.ɵɵtemplate(4,E,2,1,"div",2),d.ɵɵelementStart(5,"div",3),d.ɵɵelementStart(6,"h2"),d.ɵɵelement(7,"localize",4),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵtemplate(8,k,31,10,"div",5),d.ɵɵtemplate(9,B,2,1,"div",6),d.ɵɵelementEnd(),d.ɵɵelementEnd()),2&e&&(d.ɵɵadvance(4),d.ɵɵproperty("ngIf",null!=t.message),d.ɵɵadvance(4),d.ɵɵproperty("ngIf",t.job),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",t.page&&t.page.resultSet.length>0))},directives:[f.CgrHeaderComponent,y.LoadingBarComponent,v.NgIf,b.LocalizeComponent,S.DateTextComponent,v.NgForOf,C.PaginationControlsComponent],pipes:[C.PaginatePipe],styles:[".new-admin-design-main[_ngcontent-%COMP%] {\n    \n}\n\n\n.solid-table-wrapper[_ngcontent-%COMP%] {\n    background: #F4F4F4;\n    border-radius: 15px;\n    margin-bottom: 20px;\n}\n.solid-table-footer[_ngcontent-%COMP%] {\n    \n    border-radius: 0 0 15px 15px;\n    padding: 0 0 10px 10px;\n}\n\n\n\n.wrapper[_ngcontent-%COMP%] {\n    padding: 10px;\n}"]}),e}();t.JobComponent=q,("undefined"==typeof ngDevMode||ngDevMode)&&d.ɵsetClassMetadata(q,[{type:i.Component,args:[{selector:"job",templateUrl:"./job.component.html",styleUrls:["./scheduled-jobs.css"]}]}],(function(){return[{type:p.RegistryService},{type:u.BsModalService},{type:m.Router},{type:m.ActivatedRoute},{type:g.DateService},{type:h.LocalizationService},{type:h.AuthService},{type:p.IOService}]}),null)},1103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobConflictModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(193),a=n(0),l=n(56),s=n(1),c=n(88),d=n(18),p=n(1104),u=n(1105),m=n(1106),g=n(1107);function h(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",12),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function f(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div"),a.ɵɵelementStart(1,"import-problem-widget",13),a.ɵɵlistener("onProblemResolved",(function(){a.ɵɵrestoreView(n);var e=a.ɵɵnextContext();return e.onProblemResolvedListener(e.problem)})),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("problem",i.problem)("job",i.job)}}function y(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"parent-reference-problem-widget",13),a.ɵɵlistener("onProblemResolved",(function(){a.ɵɵrestoreView(n);var e=a.ɵɵnextContext(2);return e.onProblemResolvedListener(e.problem)})),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext(2);a.ɵɵproperty("problem",i.problem)("job",i.job)}}function v(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"term-reference-problem-widget",13),a.ɵɵlistener("onProblemResolved",(function(){a.ɵɵrestoreView(n);var e=a.ɵɵnextContext(2);return e.onProblemResolvedListener(e.problem)})),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext(2);a.ɵɵproperty("problem",i.problem)("job",i.job)}}function b(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"row-validation-problem-widget",13),a.ɵɵlistener("onProblemResolved",(function(){a.ɵɵrestoreView(n);var e=a.ɵɵnextContext(2);return e.onProblemResolvedListener(e.problem)})),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext(2);a.ɵɵproperty("problem",i.problem)("job",i.job)}}function S(e,t){if(1&e&&(a.ɵɵelementStart(0,"div"),a.ɵɵtemplate(1,y,1,2,"parent-reference-problem-widget",14),a.ɵɵtemplate(2,v,1,2,"term-reference-problem-widget",14),a.ɵɵtemplate(3,b,1,2,"row-validation-problem-widget",14),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("ngIf","ParentReferenceProblem"===n.problem.type),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","TermReferenceProblem"===n.problem.type),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","RowValidationProblem"===n.problem.type)}}var C=function(){function e(e){this.bsModalRef=e,this.message=null,this.readonly=!1,this.edit=!1,this.onConflictAction=new r.Subject}return e.prototype.ngOnInit=function(){},e.prototype.onProblemResolvedListener=function(e){this.onConflictAction.next({action:"RESOLVED",data:e})},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.BsModalRef))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["job-conflict-modal"]],decls:15,vars:3,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"text-center"],["key","scheduledjobs.problemdetail.modal.title"],[1,"modal-form"],["form","ngForm"],[4,"ngIf"],[1,"row-holder"],[1,""],[1,"button-holder"],["type","button","role","button",1,"btn","btn-default",3,"click"],["key","io.back"],["role","alert",1,"alert","alert-danger"],[3,"problem","job","onProblemResolved"],[3,"problem","job","onProblemResolved",4,"ngIf"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,h,2,1,"div",1),a.ɵɵelementStart(2,"div",2),a.ɵɵelementStart(3,"h2"),a.ɵɵelement(4,"localize",3),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"form",4,5),a.ɵɵelementStart(7,"fieldset"),a.ɵɵtemplate(8,f,2,2,"div",6),a.ɵɵtemplate(9,S,4,3,"div",6),a.ɵɵelementStart(10,"div",7),a.ɵɵelementStart(11,"div",8),a.ɵɵelementStart(12,"div",9),a.ɵɵelementStart(13,"button",10),a.ɵɵlistener("click",(function(){return t.onCancel()})),a.ɵɵelement(14,"localize",11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(7),a.ɵɵproperty("ngIf",t.problem&&t.job&&"IMPORT_RESOLVE"===t.job.stage),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.problem&&t.job&&"VALIDATION_RESOLVE"===t.job.stage))},directives:[s.NgIf,c.LocalizeComponent,d.ɵangular_packages_forms_forms_ba,d.NgControlStatusGroup,d.NgForm,p.ImportProblemWidgetComponent,u.ParentReferenceProblemWidgetComponent,m.TermReferenceProblemWidgetComponent,g.RowValidationProblemWidgetComponent],encapsulation:2}),e}();t.JobConflictModalComponent=C,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(C,[{type:i.Component,args:[{selector:"job-conflict-modal",templateUrl:"./job-conflict-modal.component.html",styleUrls:[]}]}],(function(){return[{type:l.BsModalRef}]}),null)},1104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportProblemWidgetComponent=void 0;var i=n(0),r=(n(56),n(378),n(1042)),o=(n(1015),n(194),n(193)),a=(n(25),n(0)),l=n(1015),s=n(194),c=n(25),d=n(56),p=n(1),u=n(88),m=n(379);function g(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",13),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function h(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",14),a.ɵɵelementStart(2,"div",15),a.ɵɵelement(3,"i",16),a.ɵɵelementStart(4,"p",17),a.ɵɵelementStart(5,"span",18),a.ɵɵelementStart(6,"strong"),a.ɵɵtext(7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"span",18),a.ɵɵelement(9,"localize",19),a.ɵɵtext(10),a.ɵɵelementEnd(),a.ɵɵelementStart(11,"span",18),a.ɵɵelement(12,"localize",20),a.ɵɵtext(13,": "),a.ɵɵelementStart(14,"span",21),a.ɵɵelement(15,"date-text",22),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(16,"div",14),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(7),a.ɵɵtextInterpolate(n.job.fileName),a.ɵɵadvance(3),a.ɵɵtextInterpolate1(": ",n.job.author," "),a.ɵɵadvance(5),a.ɵɵproperty("date",n.job.createDate)}}function f(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",23),a.ɵɵelementStart(1,"button",24),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onEditGeoObject()})),a.ɵɵelement(2,"localize",25),a.ɵɵelementEnd(),a.ɵɵelementEnd()}}var y=function(){function e(e,t,n,r,o){this.service=e,this.dateService=t,this.lService=n,this.bsModalRef=r,this.modalService=o,this.message=null,this.onProblemResolved=new i.EventEmitter,this.readonly=!1,this.edit=!1}return e.prototype.ngOnInit=function(){},e.prototype.onEditGeoObject=function(){var e=this,t=this.modalService.show(r.GeoObjectEditorComponent,{backdrop:!0,ignoreBackdropClick:!0});t.content.configureFromImportError(this.problem,this.job.historyId,this.job.configuration.startDate,!0),t.content.setMasterListId(null),t.content.setOnSuccessCallback((function(){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()}))},e.prototype.getFriendlyProblemType=function(e){return"net.geoprism.registry.io.ParentCodeException"===e?this.lService.decode("scheduledjobs.job.problem.type.parent.lookup"):"net.geoprism.registry.io.PostalCodeLocationException"===e?this.lService.decode("scheduledjobs.job.problem.type.postal.code.lookup"):"net.geoprism.registry.io.AmbiguousParentException"===e?this.lService.decode("scheduledjobs.job.problem.type.multi.parent.lookup"):"net.geoprism.registry.io.InvalidGeometryException"===e?this.lService.decode("scheduledjobs.job.problem.type.invalid.geom.lookup"):"net.geoprism.registry.DataNotFoundException"===e?this.lService.decode("scheduledjobs.job.problem.type.datanotfound"):"net.geoprism.registry.roles.CreateGeoObjectPermissionException"===e||"net.geoprism.registry.roles.WriteGeoObjectPermissionException"===e||"net.geoprism.registry.roles.DeleteGeoObjectPermissionException"===e||"net.geoprism.registry.roles.ReadGeoObjectPermissionException"===e?this.lService.decode("scheduledjobs.job.problem.type.permission"):"com.runwaysdk.dataaccess.DuplicateDataException"===e||"net.geoprism.registry.DuplicateGeoObjectException"===e||"net.geoprism.registry.DuplicateGeoObjectCodeException"===e?this.lService.decode("scheduledjobs.job.problem.type.duplicate.data.lookup"):e},e.prototype.onSubmit=function(){},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.RegistryService),a.ɵɵdirectiveInject(s.DateService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(d.BsModalRef),a.ɵɵdirectiveInject(d.BsModalService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["import-problem-widget"]],inputs:{problem:"problem",job:"job"},outputs:{onProblemResolved:"onProblemResolved"},decls:20,vars:5,consts:[[1,""],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row","style","background: #F4F4F4;\n                                        border-radius: 10px;\n                                        margin-bottom: 20px;\n                                        margin-top: 20px;\n                                        padding: 10px;",4,"ngIf"],[1,"row",2,"background","#F4F4F4","border-radius","10px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-12"],[1,"row","equal",2,"display","flex","display","-webkit-flex","flex-wrap","wrap"],[1,"col-md-6",2,"padding-right","5px"],[2,"background","white","border-radius","10px","padding","10px","height","100%"],["key","etl.problem.header.problem"],[2,"font-style","italic"],["key","etl.problem.header.message"],[1,"col-md-6",2,"padding-left","5px"],["style","background: white;border-radius: 10px;padding: 10px;height: 100%;text-align: center;",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"col-md-6"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"],["key","importproblem.uploaded.by.label"],["key","importproblem.started.date.label"],[1,"date-string-display",2,"margin-left","5px"],[3,"date"],[2,"background","white","border-radius","10px","padding","10px","height","100%","text-align","center"],["type","submit","role","button",1,"btn","btn-primary",2,"width","90%",3,"click"],["key","scheduledjobs.editGeoObject"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,g,2,1,"div",1),a.ɵɵtemplate(2,h,17,3,"div",2),a.ɵɵelementStart(3,"div",3),a.ɵɵelementStart(4,"div",4),a.ɵɵelementStart(5,"div",5),a.ɵɵelementStart(6,"div",6),a.ɵɵelementStart(7,"div",7),a.ɵɵelementStart(8,"h4"),a.ɵɵelementStart(9,"strong"),a.ɵɵelement(10,"localize",8),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(11,"p",9),a.ɵɵtext(12),a.ɵɵelementEnd(),a.ɵɵelementStart(13,"h4"),a.ɵɵelementStart(14,"strong"),a.ɵɵelement(15,"localize",10),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(16,"p",9),a.ɵɵtext(17),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(18,"div",11),a.ɵɵtemplate(19,f,3,0,"div",12),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.problem&&t.job),a.ɵɵadvance(10),a.ɵɵtextInterpolate(t.getFriendlyProblemType(t.problem.exception.type)),a.ɵɵadvance(5),a.ɵɵtextInterpolate(t.problem.exception.message),a.ɵɵadvance(2),a.ɵɵproperty("ngIf",null!=t.problem.object&&null!=t.problem.object.geoObject))},directives:[p.NgIf,u.LocalizeComponent,m.DateTextComponent],encapsulation:2}),e}();t.ImportProblemWidgetComponent=y,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(y,[{type:i.Component,args:[{selector:"import-problem-widget",templateUrl:"./import-problem-widget.component.html",styleUrls:[]}]}],(function(){return[{type:l.RegistryService},{type:s.DateService},{type:c.LocalizationService},{type:d.BsModalRef},{type:d.BsModalService}]}),{problem:[{type:i.Input}],job:[{type:i.Input}],onProblemResolved:[{type:i.Output}]})},1105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParentReferenceProblemWidgetComponent=void 0;var i=n(0),r=(n(56),n(44)),o=(n(378),n(1015),n(194),n(193)),a=(n(25),n(0)),l=n(1015),s=n(194),c=n(25),d=n(56),p=n(1),u=n(88),m=n(18),g=n(292),h=n(379);function f(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",30),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function y(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",31),a.ɵɵelementStart(2,"div",32),a.ɵɵelement(3,"i",33),a.ɵɵelementStart(4,"p",34),a.ɵɵelementStart(5,"span",35),a.ɵɵelementStart(6,"strong"),a.ɵɵtext(7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"span",35),a.ɵɵelement(9,"localize",36),a.ɵɵtext(10),a.ɵɵelementEnd(),a.ɵɵelementStart(11,"span",35),a.ɵɵelement(12,"localize",37),a.ɵɵtext(13,": "),a.ɵɵelementStart(14,"span",38),a.ɵɵelement(15,"date-text",39),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(16,"div",31),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(7),a.ɵɵtextInterpolate(n.job.fileName),a.ɵɵadvance(3),a.ɵɵtextInterpolate1(": ",n.job.author," "),a.ɵɵadvance(5),a.ɵɵproperty("date",n.job.createDate)}}function v(e,t){if(1&e&&(a.ɵɵelementStart(0,"ol"),a.ɵɵelementStart(1,"li"),a.ɵɵtext(2),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵadvance(2),a.ɵɵtextInterpolate2("",n.label," (",n.type,")")}}function b(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",40),a.ɵɵtemplate(1,v,3,2,"ol",41),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",n.problem.context)}}var S=function(){function e(e,t,n,r,o,a){this.service=e,this.iService=t,this.dateService=n,this.lService=r,this.bsModalRef=o,this.modalService=a,this.message=null,this.onProblemResolved=new i.EventEmitter,this.readonly=!1,this.edit=!1}return e.prototype.ngOnInit=function(){this.problem.parent=null,this.searchLabel=""},e.prototype.getString=function(e){return JSON.stringify(e)},e.prototype.getValidationProblemDisplayLabel=function(e){return e.type},e.prototype.getTypeAheadObservable=function(e,t){var n=this,i=this.job.configuration.hierarchy;return new r.Observable((function(t){n.service.getGeoObjectSuggestions(n.searchLabel,e,null,null,i,n.job.startDate,n.job.endDate).then((function(e){t.next(e)}))}))},e.prototype.typeaheadOnSelect=function(e,t){var n=this;this.service.getParentGeoObjects(e.item.code,t.typeCode,[],!1,this.job.startDate).then((function(e){t.parent=e.geoObject,n.searchLabel=e.geoObject.properties.displayLabel.localizedValue})).catch((function(e){n.error(e)}))},e.prototype.onIgnore=function(){var e=this,t={resolution:"IGNORE",validationProblemId:this.problem.id};this.service.submitValidationResolve(t).then((function(t){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCreateSynonym=function(){var e=this,t={validationProblemId:this.problem.id,resolution:"SYNONYM",code:this.problem.parent.properties.code,typeCode:this.problem.parent.properties.type,label:this.problem.label};this.service.submitValidationResolve(t).then((function(t){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.RegistryService),a.ɵɵdirectiveInject(l.IOService),a.ɵɵdirectiveInject(s.DateService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(d.BsModalRef),a.ɵɵdirectiveInject(d.BsModalService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["parent-reference-problem-widget"]],inputs:{problem:"problem",job:"job"},outputs:{onProblemResolved:"onProblemResolved"},decls:55,vars:12,consts:[[1,"container"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row","style","background: #F4F4F4;\n                                        border-radius: 10px;\n                                        margin-bottom: 20px;\n                                        margin-top: 20px;\n                                        padding: 10px;",4,"ngIf"],[1,"row",2,"background","#F4F4F4","border-radius","10px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-12"],[1,"row"],[1,"col-md-6",2,"background","white","border-radius","10px","width","41%","margin-right","7px"],["key","etl.problem.header.problem"],[2,"font-style","italic"],["key","etl.problem.header.message"],["key","etl.parentProblem.message"],["key","etl.problem.header.toResolve"],["key","etl.parentProblem.toResolve"],[1,"com-md-6",2,"background","white","border-radius","10px","width","41%","float","left","height","250px"],[1,"row-holder"],[1,"label-holder",2,"width","100px"],[1,"text"],["key","etl.problem.parent.context"],[1,"holder",2,"width","300px"],["style","margin-top:10px;",4,"ngIf"],["key","etl.problem.parent.label"],[1,"text",2,"margin-top","10px"],[1,"row-holder",2,"overflow","visible"],["key","etl.problem.parent.synonym"],["type","text","autocomplete","off","name","parentSearch","typeaheadOptionField","name",1,"form-control",2,"width","150px",3,"ngModel","typeaheadAsync","typeahead","typeaheadOptionsLimit","typeaheadMinLength","typeaheadWaitMs","ngModelChange","typeaheadOnSelect"],["key","etl.problem.parent.actions"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","etl.problem.reference.createSynonym"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","etl.problem.reference.ignore"],["role","alert",1,"alert","alert-danger"],[1,"col-md-6"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"],["key","importproblem.uploaded.by.label"],["key","importproblem.started.date.label"],[1,"date-string-display"],[3,"date"],[2,"margin-top","10px"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,f,2,1,"div",1),a.ɵɵtemplate(2,y,17,3,"div",2),a.ɵɵelementStart(3,"div",3),a.ɵɵelementStart(4,"div",4),a.ɵɵelementStart(5,"div",5),a.ɵɵelementStart(6,"div",6),a.ɵɵelementStart(7,"h4"),a.ɵɵelementStart(8,"strong"),a.ɵɵelement(9,"localize",7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"p",8),a.ɵɵtext(11),a.ɵɵelementEnd(),a.ɵɵelementStart(12,"h4"),a.ɵɵelementStart(13,"strong"),a.ɵɵelement(14,"localize",9),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(15,"p",8),a.ɵɵelement(16,"localize",10),a.ɵɵelementEnd(),a.ɵɵelementStart(17,"h4"),a.ɵɵelementStart(18,"strong"),a.ɵɵelement(19,"localize",11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(20,"p"),a.ɵɵelement(21,"localize",12),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(22,"div",13),a.ɵɵelementStart(23,"div",14),a.ɵɵelementStart(24,"div",15),a.ɵɵelementStart(25,"label"),a.ɵɵelementStart(26,"span",16),a.ɵɵelement(27,"localize",17),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(28,"div",18),a.ɵɵtemplate(29,b,2,1,"div",19),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(30,"div",14),a.ɵɵelementStart(31,"div",15),a.ɵɵelementStart(32,"label"),a.ɵɵelementStart(33,"span",16),a.ɵɵelement(34,"localize",20),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(35,"div",18),a.ɵɵelementStart(36,"span",21),a.ɵɵtext(37),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(38,"div",22),a.ɵɵelementStart(39,"div",15),a.ɵɵelementStart(40,"label"),a.ɵɵelementStart(41,"span",16),a.ɵɵelement(42,"localize",23),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(43,"div",18),a.ɵɵelementStart(44,"input",24),a.ɵɵlistener("ngModelChange",(function(e){return t.searchLabel=e}))("typeaheadOnSelect",(function(e){return t.typeaheadOnSelect(e,t.problem)})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(45,"div",14),a.ɵɵelementStart(46,"div",15),a.ɵɵelementStart(47,"label"),a.ɵɵelementStart(48,"span",16),a.ɵɵelement(49,"localize",25),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(50,"div",18),a.ɵɵelementStart(51,"button",26),a.ɵɵlistener("click",(function(){return t.onCreateSynonym()})),a.ɵɵelement(52,"localize",27),a.ɵɵelementEnd(),a.ɵɵelementStart(53,"button",28),a.ɵɵlistener("click",(function(){return t.onIgnore()})),a.ɵɵelement(54,"localize",29),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.problem&&t.job),a.ɵɵadvance(9),a.ɵɵtextInterpolate(t.getValidationProblemDisplayLabel(t.problem)),a.ɵɵadvance(18),a.ɵɵproperty("ngIf",t.problem.context.length>0),a.ɵɵadvance(8),a.ɵɵtextInterpolate(t.problem.label),a.ɵɵadvance(7),a.ɵɵproperty("ngModel",t.searchLabel)("typeaheadAsync",!0)("typeahead",t.getTypeAheadObservable(t.problem.typeCode,t.problem))("typeaheadOptionsLimit",7)("typeaheadMinLength",0)("typeaheadWaitMs",300),a.ɵɵadvance(7),a.ɵɵproperty("disabled",null==t.problem.parent))},directives:[p.NgIf,u.LocalizeComponent,m.DefaultValueAccessor,m.NgControlStatus,m.NgModel,g.TypeaheadDirective,h.DateTextComponent,p.NgForOf],encapsulation:2}),e}();t.ParentReferenceProblemWidgetComponent=S,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(S,[{type:i.Component,args:[{selector:"parent-reference-problem-widget",templateUrl:"./parent-reference-problem-widget.component.html",styleUrls:[]}]}],(function(){return[{type:l.RegistryService},{type:l.IOService},{type:s.DateService},{type:c.LocalizationService},{type:d.BsModalRef},{type:d.BsModalService}]}),{problem:[{type:i.Input}],job:[{type:i.Input}],onProblemResolved:[{type:i.Output}]})},1106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TermReferenceProblemWidgetComponent=void 0;var i=n(0),r=(n(56),n(44)),o=(n(378),n(1015),n(194),n(25),n(193)),a=n(0),l=n(1015),s=n(194),c=n(25),d=n(56),p=n(1),u=n(88),m=n(379),g=n(18),h=n(292);function f(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",6),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function y(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",7),a.ɵɵelementStart(2,"div",8),a.ɵɵelement(3,"i",9),a.ɵɵelementStart(4,"p",10),a.ɵɵelementStart(5,"span",11),a.ɵɵelementStart(6,"strong"),a.ɵɵtext(7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"span",11),a.ɵɵelement(9,"localize",12),a.ɵɵtext(10),a.ɵɵelementEnd(),a.ɵɵelementStart(11,"span",11),a.ɵɵelement(12,"localize",13),a.ɵɵtext(13,": "),a.ɵɵelementStart(14,"span",14),a.ɵɵelement(15,"date-text",15),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(16,"div",7),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(7),a.ɵɵtextInterpolate(n.job.fileName),a.ɵɵadvance(3),a.ɵɵtextInterpolate1(": ",n.job.author," "),a.ɵɵadvance(5),a.ɵɵproperty("date",n.job.createDate)}}function v(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",16),a.ɵɵelementStart(1,"div",17),a.ɵɵelementStart(2,"h4"),a.ɵɵelementStart(3,"strong"),a.ɵɵelement(4,"localize",18),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"p",19),a.ɵɵtext(6),a.ɵɵelementEnd(),a.ɵɵelementStart(7,"h4"),a.ɵɵelementStart(8,"strong"),a.ɵɵelement(9,"localize",20),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"p",19),a.ɵɵelement(11,"localize",21),a.ɵɵelementEnd(),a.ɵɵelementStart(12,"h4"),a.ɵɵelementStart(13,"strong"),a.ɵɵelement(14,"localize",22),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(15,"p"),a.ɵɵelement(16,"localize",23),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(17,"div",24),a.ɵɵelementStart(18,"div",25),a.ɵɵelementStart(19,"div",26),a.ɵɵelementStart(20,"label"),a.ɵɵelementStart(21,"span",27),a.ɵɵelement(22,"localize",28),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(23,"div",29),a.ɵɵelementStart(24,"span",30),a.ɵɵtext(25),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(26,"div",25),a.ɵɵelementStart(27,"div",26),a.ɵɵelementStart(28,"label"),a.ɵɵelementStart(29,"span",27),a.ɵɵelement(30,"localize",31),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(31,"div",29),a.ɵɵelementStart(32,"span",30),a.ɵɵtext(33),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(34,"div",32),a.ɵɵelementStart(35,"div",26),a.ɵɵelementStart(36,"label"),a.ɵɵelementStart(37,"span",27),a.ɵɵelement(38,"localize",33),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(39,"div",29),a.ɵɵelementStart(40,"input",34),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().searchLabel=e}))("typeaheadOnSelect",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().typeaheadOnSelect(e)})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(41,"div",25),a.ɵɵelementStart(42,"div",26),a.ɵɵelementStart(43,"label"),a.ɵɵelementStart(44,"span",27),a.ɵɵelement(45,"localize",35),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(46,"div",29),a.ɵɵelementStart(47,"button",36),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onCreateSynonym()})),a.ɵɵelement(48,"localize",37),a.ɵɵelementEnd(),a.ɵɵelementStart(49,"button",38),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onIgnore()})),a.ɵɵelement(50,"localize",39),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(6),a.ɵɵtextInterpolate(i.getValidationProblemDisplayLabel(i.problem)),a.ɵɵadvance(19),a.ɵɵtextInterpolate(i.problem.attributeLabel),a.ɵɵadvance(8),a.ɵɵtextInterpolate(i.problem.label),a.ɵɵadvance(7),a.ɵɵproperty("ngModel",i.searchLabel)("typeaheadAsync",!0)("typeahead",i.getTypeAheadObservable(i.problem))("typeaheadOptionsLimit",7)("typeaheadMinLength",0)("typeaheadWaitMs",300),a.ɵɵadvance(7),a.ɵɵproperty("disabled",null==i.termId)}}var b=function(){function e(e,t,n,r,o,a){this.service=e,this.iService=t,this.dateService=n,this.lService=r,this.bsModalRef=o,this.modalService=a,this.message=null,this.onProblemResolved=new i.EventEmitter,this.termId=null,this.readonly=!1,this.edit=!1}return e.prototype.ngOnInit=function(){this.problem.parent=null,this.searchLabel=""},e.prototype.getValidationProblemDisplayLabel=function(e){return e.type},e.prototype.getTypeAheadObservable=function(e){var t=this;return r.Observable.create((function(n){t.iService.getTermSuggestions(e.mdAttributeId,t.searchLabel,"20").then((function(e){n.next(e)}))}))},e.prototype.typeaheadOnSelect=function(e){this.termId=e.item.value},e.prototype.onIgnore=function(){var e=this,t={resolution:"IGNORE",validationProblemId:this.problem.id};this.service.submitValidationResolve(t).then((function(t){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCreateSynonym=function(){var e=this,t={validationProblemId:this.problem.id,resolution:"SYNONYM",classifierId:this.termId,label:this.problem.label};this.service.submitValidationResolve(t).then((function(t){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.RegistryService),a.ɵɵdirectiveInject(l.IOService),a.ɵɵdirectiveInject(s.DateService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(d.BsModalRef),a.ɵɵdirectiveInject(d.BsModalService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["term-reference-problem-widget"]],inputs:{problem:"problem",job:"job"},outputs:{onProblemResolved:"onProblemResolved"},decls:6,vars:3,consts:[[1,"container"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row","style","background: #F4F4F4;\n                                        border-radius: 10px;\n                                        margin-bottom: 20px;\n                                        margin-top: 20px;\n                                        padding: 10px;",4,"ngIf"],[1,"row",2,"background","#F4F4F4","border-radius","10px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-12"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"col-md-6"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"],["key","importproblem.uploaded.by.label"],["key","importproblem.started.date.label"],[1,"date-string-display",2,"margin-left","5px"],[3,"date"],[1,"row"],[1,"col-md-6",2,"background","white","border-radius","10px","width","41%","margin-right","7px"],["key","etl.problem.header.problem"],[2,"font-style","italic"],["key","etl.problem.header.message"],["key","etl.problem.termReference.message"],["key","etl.problem.header.toResolve"],["key","etl.problem.termReference.toResolve"],[1,"com-md-6",2,"background","white","border-radius","10px","width","41%","float","left","height","250px"],[1,"row-holder"],[1,"label-holder",2,"width","100px"],[1,"text"],["key","etl.problem.termReference.attributeLabel"],[1,"holder",2,"width","300px"],[1,"text",2,"margin-top","10px"],["key","etl.problem.termReference.label"],[1,"row-holder",2,"overflow","visible"],["key","etl.problem.termReference.synonym"],["type","text","autocomplete","off","name","termSearch","typeaheadOptionField","label",1,"form-control",2,"width","150px",3,"ngModel","typeaheadAsync","typeahead","typeaheadOptionsLimit","typeaheadMinLength","typeaheadWaitMs","ngModelChange","typeaheadOnSelect"],["key","etl.problem.termReference.actions"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","etl.problem.reference.createSynonym"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","etl.problem.reference.ignore"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,f,2,1,"div",1),a.ɵɵtemplate(2,y,17,3,"div",2),a.ɵɵelementStart(3,"div",3),a.ɵɵelementStart(4,"div",4),a.ɵɵtemplate(5,v,51,10,"div",5),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.problem&&t.job),a.ɵɵadvance(3),a.ɵɵproperty("ngIf",t.problem))},directives:[p.NgIf,u.LocalizeComponent,m.DateTextComponent,g.DefaultValueAccessor,g.NgControlStatus,g.NgModel,h.TypeaheadDirective],encapsulation:2}),e}();t.TermReferenceProblemWidgetComponent=b,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(b,[{type:i.Component,args:[{selector:"term-reference-problem-widget",templateUrl:"./term-reference-problem-widget.component.html",styleUrls:[]}]}],(function(){return[{type:l.RegistryService},{type:l.IOService},{type:s.DateService},{type:c.LocalizationService},{type:d.BsModalRef},{type:d.BsModalService}]}),{problem:[{type:i.Input}],job:[{type:i.Input}],onProblemResolved:[{type:i.Output}]})},1107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RowValidationProblemWidgetComponent=void 0;var i=n(0),r=(n(56),n(44)),o=(n(378),n(1015),n(194),n(193)),a=(n(25),n(0)),l=n(1015),s=n(194),c=n(25),d=n(56),p=n(1),u=n(88),m=n(379);function g(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",20),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function h(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",21),a.ɵɵelementStart(2,"div",22),a.ɵɵelement(3,"i",23),a.ɵɵelementStart(4,"p",24),a.ɵɵelementStart(5,"span",25),a.ɵɵelementStart(6,"strong"),a.ɵɵtext(7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"span",25),a.ɵɵelement(9,"localize",26),a.ɵɵtext(10),a.ɵɵelementEnd(),a.ɵɵelementStart(11,"span",25),a.ɵɵelement(12,"localize",27),a.ɵɵtext(13,": "),a.ɵɵelementStart(14,"span",28),a.ɵɵelement(15,"date-text",29),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(16,"div",21),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(7),a.ɵɵtextInterpolate(n.job.fileName),a.ɵɵadvance(3),a.ɵɵtextInterpolate1(": ",n.job.author," "),a.ɵɵadvance(5),a.ɵɵproperty("date",n.job.createDate)}}var f=function(){function e(e,t,n,r,o){this.service=e,this.iService=t,this.dateService=n,this.lService=r,this.bsModalRef=o,this.message=null,this.onProblemResolved=new i.EventEmitter,this.readonly=!1,this.edit=!1}return e.prototype.ngOnInit=function(){this.problem.parent=null,this.searchLabel=""},e.prototype.getString=function(e){return JSON.stringify(e)},e.prototype.getValidationProblemDisplayLabel=function(e){return e.type},e.prototype.getTypeAheadObservable=function(e,t){var n=this,i=this.job.configuration.hierarchy;return new r.Observable((function(t){n.service.getGeoObjectSuggestions(n.searchLabel,e,null,null,i,n.job.startDate,n.job.endDate).then((function(e){t.next(e)}))}))},e.prototype.typeaheadOnSelect=function(e,t){var n=this;this.service.getParentGeoObjects(e.item.code,t.typeCode,[],!1,this.job.startDate).then((function(e){t.parent=e.geoObject,n.searchLabel=e.geoObject.properties.displayLabel.localizedValue})).catch((function(e){n.error(e)}))},e.prototype.onIgnore=function(){var e=this,t={resolution:"IGNORE",validationProblemId:this.problem.id};this.service.submitValidationResolve(t).then((function(t){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.formatAffectedRows=function(e){return e.replace(/,/g,", ")},e.prototype.onCreateSynonym=function(){var e=this,t={validationProblemId:this.problem.id,resolution:"SYNONYM",code:this.problem.parent.properties.code,typeCode:this.problem.parent.properties.type,label:this.problem.label};this.service.submitValidationResolve(t).then((function(t){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.RegistryService),a.ɵɵdirectiveInject(l.IOService),a.ɵɵdirectiveInject(s.DateService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(d.BsModalRef))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["row-validation-problem-widget"]],inputs:{problem:"problem",job:"job"},outputs:{onProblemResolved:"onProblemResolved"},decls:39,vars:5,consts:[[1,"container"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row","style","background: #F4F4F4;\n                                        border-radius: 10px;\n                                        margin-bottom: 20px;\n                                        margin-top: 20px;\n                                        padding: 10px;",4,"ngIf"],[1,"row",2,"background","#F4F4F4","border-radius","10px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-12"],[1,"row"],[1,"col-md-6",2,"background","white","border-radius","10px","width","41%","margin-right","7px"],["key","etl.problem.header.problem"],[2,"font-style","italic"],["key","etl.problem.header.message"],["key","etl.problem.rowValidation.message"],["key","etl.problem.header.toResolve"],["key","etl.problem.rowValidation.toResolve"],[1,"com-md-6",2,"background","white","border-radius","10px","width","41%","float","left","height","250px"],[1,"row-holder"],[1,"label-holder",2,"width","100px"],[1,"text"],["key","scheduledjobs.validation.table.affected.rows.header"],[1,"holder",2,"width","300px"],[1,"text",2,"margin-top","10px"],["role","alert",1,"alert","alert-danger"],[1,"col-md-6"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"],["key","importproblem.uploaded.by.label"],["key","importproblem.started.date.label"],[1,"date-string-display",2,"margin-left","5px"],[3,"date"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,g,2,1,"div",1),a.ɵɵtemplate(2,h,17,3,"div",2),a.ɵɵelementStart(3,"div",3),a.ɵɵelementStart(4,"div",4),a.ɵɵelementStart(5,"div",5),a.ɵɵelementStart(6,"div",6),a.ɵɵelementStart(7,"h4"),a.ɵɵelementStart(8,"strong"),a.ɵɵelement(9,"localize",7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"p",8),a.ɵɵtext(11),a.ɵɵelementEnd(),a.ɵɵelementStart(12,"h4"),a.ɵɵelementStart(13,"strong"),a.ɵɵelement(14,"localize",9),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(15,"p",8),a.ɵɵelement(16,"localize",10),a.ɵɵelementEnd(),a.ɵɵelementStart(17,"h4"),a.ɵɵelementStart(18,"strong"),a.ɵɵelement(19,"localize",11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(20,"p"),a.ɵɵelement(21,"localize",12),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(22,"div",13),a.ɵɵelementStart(23,"div",14),a.ɵɵelementStart(24,"div",15),a.ɵɵelementStart(25,"label"),a.ɵɵelementStart(26,"span",16),a.ɵɵelement(27,"localize",17),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(28,"div",18),a.ɵɵelementStart(29,"span",19),a.ɵɵtext(30),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(31,"div",14),a.ɵɵelementStart(32,"div",15),a.ɵɵelementStart(33,"label"),a.ɵɵelementStart(34,"span",16),a.ɵɵelement(35,"localize",10),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(36,"div",18),a.ɵɵelementStart(37,"span",19),a.ɵɵtext(38),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.problem&&t.job),a.ɵɵadvance(9),a.ɵɵtextInterpolate(t.getValidationProblemDisplayLabel(t.problem)),a.ɵɵadvance(19),a.ɵɵtextInterpolate(t.formatAffectedRows(t.problem.affectedRows)),a.ɵɵadvance(8),a.ɵɵtextInterpolate(t.problem.exception.message))},directives:[p.NgIf,u.LocalizeComponent,m.DateTextComponent],encapsulation:2}),e}();t.RowValidationProblemWidgetComponent=f,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(f,[{type:i.Component,args:[{selector:"row-validation-problem-widget",templateUrl:"./row-validation-problem-widget.component.html",styleUrls:[]}]}],(function(){return[{type:l.RegistryService},{type:l.IOService},{type:s.DateService},{type:c.LocalizationService},{type:d.BsModalRef}]}),{problem:[{type:i.Input}],job:[{type:i.Input}],onProblemResolved:[{type:i.Output}]})},1108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReuploadModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(380),a=n(547),l=(n(25),n(193)),s=(n(378),n(0)),c=n(56),d=n(25),p=n(1),u=n(18),m=n(88),g=n(380),h=["myFile"];function f(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext();s.ɵɵadvance(1),s.ɵɵtextInterpolate(n.errorMessage)}}function y(e,t){1&e&&s.ɵɵelement(0,"localize",18)}function v(e,t){1&e&&s.ɵɵelement(0,"localize",19)}function b(e,t){if(1&e&&s.ɵɵelement(0,"input",20,21),2&e){var n=s.ɵɵnextContext(2);s.ɵɵproperty("uploader",n.uploader)}}function S(e,t){if(1&e&&s.ɵɵelement(0,"input",22,21),2&e){var n=s.ɵɵnextContext(2);s.ɵɵproperty("uploader",n.uploader)}}function C(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"form",5,6),s.ɵɵelementStart(2,"div",7),s.ɵɵelementStart(3,"label",8),s.ɵɵtemplate(4,y,1,0,"localize",9),s.ɵɵtemplate(5,v,1,0,"localize",10),s.ɵɵelementEnd(),s.ɵɵelementStart(6,"div",11),s.ɵɵtemplate(7,b,2,1,"input",12),s.ɵɵtemplate(8,S,2,1,"input",13),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(9,"div",14),s.ɵɵelementStart(10,"div",15),s.ɵɵelementStart(11,"button",16),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext().bsModalRef.hide()})),s.ɵɵelementStart(12,"span"),s.ɵɵtext(13),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(14,"button",17),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext().confirm()})),s.ɵɵelementStart(15,"span"),s.ɵɵtext(16),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext();s.ɵɵadvance(4),s.ɵɵproperty("ngIf","SHAPEFILE"===i.job.configuration.formatType),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","EXCEL"===i.job.configuration.formatType),s.ɵɵadvance(2),s.ɵɵproperty("ngIf","SHAPEFILE"===i.job.configuration.formatType),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","EXCEL"===i.job.configuration.formatType),s.ɵɵadvance(5),s.ɵɵtextInterpolate(i.cancelText),s.ɵɵadvance(1),s.ɵɵproperty("ngClass","DANGER"===i.type.toUpperCase()?"btn-danger":"btn-primary"),s.ɵɵadvance(2),s.ɵɵtextInterpolate(i.submitText)}}var E=function(){function e(e,t,n){this.bsModalRef=e,this.localizeService=t,this.eventService=n,this.title=this.localizeService.decode("reuploadmodal.title"),this.message=this.localizeService.decode("reuploadmodal.message"),this.submitText=this.localizeService.decode("reuploadmodal.import"),this.cancelText=this.localizeService.decode("modal.button.cancel"),this.type=a.ModalTypes.warning}return e.prototype.ngOnInit=function(){var e=this;this.onConfirm=new r.Subject;var t={queueLimit:1,removeAfterUpload:!0,url:registry.contextPath+"/etl/reimport"};this.uploader=new o.FileUploader(t),this.uploader.onBuildItemForm=function(t,n){n.append("json",JSON.stringify(e.job.configuration))},this.uploader.onBeforeUploadItem=function(t){e.eventService.start()},this.uploader.onCompleteItem=function(t,n,i,r){e.fileRef.nativeElement.value="",e.eventService.complete()},this.uploader.onSuccessItem=function(t,n,i,r){e.onConfirm.next(e.data),e.bsModalRef.hide()},this.uploader.onErrorItem=function(t,n,i,r){e.error(JSON.parse(n))}},e.prototype.toString=function(e){return JSON.stringify(e)},e.prototype.confirm=function(){null!=this.uploader.queue&&this.uploader.queue.length>0?this.uploader.uploadAll():this.error({message:this.localizeService.decode("io.missing.file"),error:{}})},e.prototype.error=function(e){this.errorMessage=l.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.BsModalRef),s.ɵɵdirectiveInject(d.LocalizationService),s.ɵɵdirectiveInject(d.EventService))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["reupload-modal"]],viewQuery:function(e,t){if(1&e&&s.ɵɵviewQuery(h,1),2&e){var n;s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.fileRef=n.first)}},inputs:{title:"title",message:"message",data:"data",submitText:"submitText",cancelText:"cancelText",type:"type",job:"job"},decls:8,vars:4,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading"],["style","margin-top: 30px;",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[2,"margin-top","30px"],["form","ngForm"],[1,"form-group","row"],["for","file",1,"col-md-3","text-right"],["key","io.shapefile",4,"ngIf"],["key","io.spreadsheet",4,"ngIf"],[1,"col-md-9"],["class","ghost-input","name","file","type","file","ng2FileSelect","","accept",".zip","required","",3,"uploader",4,"ngIf"],["class","ghost-input","name","file","type","file","ng2FileSelect","","accept",".xlsx,.zip","required","",3,"uploader",4,"ngIf"],[1,"modal-footer"],[1,"button-holder"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",2,"padding","4px 18px",3,"click"],["type","button","role","button","aria-disabled","false",1,"btn",2,"padding","4px 18px",3,"ngClass","click"],["key","io.shapefile"],["key","io.spreadsheet"],["name","file","type","file","ng2FileSelect","","accept",".zip","required","",1,"ghost-input",3,"uploader"],["myFile",""],["name","file","type","file","ng2FileSelect","","accept",".xlsx,.zip","required","",1,"ghost-input",3,"uploader"]],template:function(e,t){1&e&&(s.ɵɵelementStart(0,"div",0),s.ɵɵtemplate(1,f,2,1,"div",1),s.ɵɵelementStart(2,"div",2),s.ɵɵelementStart(3,"h3"),s.ɵɵtext(4),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"div"),s.ɵɵtext(6),s.ɵɵelementEnd(),s.ɵɵtemplate(7,C,17,7,"form",3),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(1),s.ɵɵproperty("ngIf",t.errorMessage),s.ɵɵadvance(3),s.ɵɵtextInterpolate(t.title),s.ɵɵadvance(2),s.ɵɵtextInterpolate(t.message),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",t.job))},directives:[p.NgIf,u.ɵangular_packages_forms_forms_ba,u.NgControlStatusGroup,u.NgForm,p.NgClass,m.LocalizeComponent,g.FileSelectDirective],encapsulation:2}),e}();t.ReuploadModalComponent=E,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(E,[{type:i.Component,args:[{selector:"reupload-modal",templateUrl:"./reupload-modal.component.html",styleUrls:[]}]}],(function(){return[{type:c.BsModalRef},{type:d.LocalizationService},{type:d.EventService}]}),{title:[{type:i.Input}],message:[{type:i.Input}],data:[{type:i.Input}],submitText:[{type:i.Input}],cancelText:[{type:i.Input}],type:[{type:i.Input}],job:[{type:i.Input}],fileRef:[{type:i.ViewChild,args:["myFile"]}]})},1109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskViewerComponent=void 0;var i=n(0),r=n(1),o=(n(1015),n(194),n(378),n(25),n(0)),a=n(1015),l=n(25),s=n(194),c=n(221),d=n(163),p=n(88),u=n(1),m=n(379),g=n(381);function h(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",15),o.ɵɵelementStart(1,"div",16),o.ɵɵelementStart(2,"h4"),o.ɵɵtext(3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"div",17),o.ɵɵelementStart(5,"div",4),o.ɵɵelementStart(6,"div",5),o.ɵɵelementStart(7,"p",18),o.ɵɵtext(8),o.ɵɵelementEnd(),o.ɵɵelementStart(9,"label",19),o.ɵɵelement(10,"localize",20),o.ɵɵelementEnd(),o.ɵɵelementStart(11,"span",21),o.ɵɵelement(12,"date-text",22),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(13,"div",23),o.ɵɵelementStart(14,"label",24),o.ɵɵelement(15,"input",25),o.ɵɵelementStart(16,"span"),o.ɵɵelement(17,"localize",26),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(18,"label",24),o.ɵɵelementStart(19,"input",27),o.ɵɵlistener("click",(function(){o.ɵɵrestoreView(n);var e=t.$implicit;return o.ɵɵnextContext(2).onCompleteTask(e)})),o.ɵɵelementEnd(),o.ɵɵelementStart(20,"span"),o.ɵɵelement(21,"localize",28),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=t.$implicit;o.ɵɵadvance(3),o.ɵɵtextInterpolate(i.title),o.ɵɵadvance(5),o.ɵɵtextInterpolate(i.msg),o.ɵɵadvance(4),o.ɵɵproperty("date",i.createDate),o.ɵɵadvance(3),o.ɵɵpropertyInterpolate1("id","",i.id,"-inProgress"),o.ɵɵpropertyInterpolate1("name","",i.id,"-inProgress"),o.ɵɵadvance(4),o.ɵɵpropertyInterpolate1("id","",i.id,"-completed"),o.ɵɵpropertyInterpolate1("name","",i.id,"-completed")}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",29),o.ɵɵelementStart(1,"pagination-controls",30),o.ɵɵlistener("pageChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onInProgressTasksPageChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}}var y=function(e,t,n){return{id:"inProgressTasks",itemsPerPage:e,currentPage:t,totalItems:n}};function v(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",4),o.ɵɵelementStart(1,"div",10),o.ɵɵelementStart(2,"div",12),o.ɵɵtemplate(3,h,22,7,"div",13),o.ɵɵpipe(4,"paginate"),o.ɵɵtemplate(5,f,2,0,"div",14),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(3),o.ɵɵproperty("ngForOf",o.ɵɵpipeBind2(4,2,n.inProgressTasks.resultSet,o.ɵɵpureFunction3(5,y,n.inProgressTasks.pageSize,n.inProgressTasks.pageNumber,n.inProgressTasks.count))),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",n.inProgressTasks.resultSet.length>0)}}function b(e,t){1&e&&o.ɵɵelement(0,"localize",31)}function S(e,t){1&e&&o.ɵɵelement(0,"localize",32)}function C(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",15),o.ɵɵelementStart(1,"div",16),o.ɵɵelementStart(2,"h4"),o.ɵɵtext(3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"div",17),o.ɵɵelementStart(5,"div",4),o.ɵɵelementStart(6,"div",5),o.ɵɵelementStart(7,"p",18),o.ɵɵtext(8),o.ɵɵelementEnd(),o.ɵɵelementStart(9,"label",19),o.ɵɵelement(10,"localize",20),o.ɵɵelementEnd(),o.ɵɵelementStart(11,"span",33),o.ɵɵelement(12,"date-text",22),o.ɵɵelementEnd(),o.ɵɵelementStart(13,"label",19),o.ɵɵelement(14,"localize",34),o.ɵɵelementEnd(),o.ɵɵelementStart(15,"span",21),o.ɵɵelement(16,"date-text",22),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(17,"div",23),o.ɵɵelementStart(18,"label",24),o.ɵɵelementStart(19,"input",35),o.ɵɵlistener("click",(function(){o.ɵɵrestoreView(n);var e=t.$implicit;return o.ɵɵnextContext(2).onMoveTaskToInProgress(e)})),o.ɵɵelementEnd(),o.ɵɵelementStart(20,"span"),o.ɵɵelement(21,"localize",26),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(22,"label",24),o.ɵɵelement(23,"input",36),o.ɵɵelementStart(24,"span"),o.ɵɵelement(25,"localize",28),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=t.$implicit;o.ɵɵadvance(3),o.ɵɵtextInterpolate(i.title),o.ɵɵadvance(5),o.ɵɵtextInterpolate(i.msg),o.ɵɵadvance(4),o.ɵɵproperty("date",i.createDate),o.ɵɵadvance(4),o.ɵɵproperty("date",i.completedDate),o.ɵɵadvance(3),o.ɵɵproperty("id",i.id+"-inProgress")("name",i.id+"-inProgress"),o.ɵɵadvance(4),o.ɵɵproperty("id",i.id+"-completed")("name",i.id+"-completed")}}function E(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",29),o.ɵɵelementStart(1,"pagination-controls",37),o.ɵɵlistener("pageChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onCompletedTasksPageChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}}var x=function(e,t,n){return{id:"completedTasks",itemsPerPage:e,currentPage:t,totalItems:n}};function O(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",12),o.ɵɵtemplate(1,C,26,8,"div",13),o.ɵɵpipe(2,"paginate"),o.ɵɵtemplate(3,E,2,0,"div",14),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("ngForOf",o.ɵɵpipeBind2(2,2,n.completedTasks.resultSet,o.ɵɵpureFunction3(5,x,n.completedTasks.pageSize,n.completedTasks.pageNumber,n.completedTasks.count))),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",n.completedTasks.resultSet.length>0)}}function I(e,t){1&e&&(o.ɵɵelementStart(0,"div",12),o.ɵɵelementStart(1,"p",38),o.ɵɵelement(2,"localize",39),o.ɵɵelementEnd(),o.ɵɵelementEnd())}var M=function(){function e(e,t,n){this.taskService=e,this.localizeService=t,this.dateService=n,this.inProgressTasks={count:0,pageNumber:1,pageSize:10,resultSet:[]},this.completedTasks={count:0,pageNumber:1,pageSize:10,resultSet:[]},this.isViewAllOpen=!1,this.activeTimeCounter=0,this.completeTimeCounter=0}return e.prototype.ngOnInit=function(){this.onInProgressTasksPageChange(1)},e.prototype.onInProgressTasksPageChange=function(e){var t=this;this.taskService.getMyTasks(e,this.inProgressTasks.pageSize,"UNRESOLVED").then((function(e){t.inProgressTasks=e}))},e.prototype.onCompletedTasksPageChange=function(e){var t=this;this.taskService.getMyTasks(e,this.completedTasks.pageSize,"RESOLVED").then((function(e){t.completedTasks=e}))},e.prototype.onCompleteTask=function(e){var t=this;this.taskService.completeTask(e.id).then((function(){var n=t.inProgressTasks.resultSet.findIndex((function(t){return t.id===e.id}));-1!==n&&t.inProgressTasks.resultSet.splice(n,1),t.isViewAllOpen&&t.onCompletedTasksPageChange(t.completedTasks.pageNumber)}))},e.prototype.onMoveTaskToInProgress=function(e){var t=this;this.isViewAllOpen=!0,this.taskService.setTaskStatus(e.id,"UNRESOLVED").then((function(){var n=t.completedTasks.resultSet.findIndex((function(t){return t.id===e.id}));-1!==n&&t.completedTasks.resultSet.splice(n,1),t.completedTasks.resultSet.splice(n,1),t.inProgressTasks.resultSet.push(e)}))},e.prototype.onToggleCompletedTasks=function(){this.isViewAllOpen=!this.isViewAllOpen,this.isViewAllOpen&&this.onCompletedTasksPageChange(1)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.TaskService),o.ɵɵdirectiveInject(l.LocalizationService),o.ɵɵdirectiveInject(s.DateService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["task-viewer"]],inputs:{geoObjectType:"geoObjectType"},features:[o.ɵɵProvidersFeature([r.DatePipe])],decls:19,vars:5,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container"],["key","tasks.openTasksTitle"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-9"],["key","tasks.completedTasksTitle"],["type","submit","role","button",1,"btn","btn-default","pull-right",2,"margin-top","20px",3,"click"],["key","tasks.viewCompletedTasksButton",4,"ngIf"],["key","tasks.hideCompletedTasksButton",4,"ngIf"],[1,"col-md-12"],["class","content-wrapper",4,"ngIf"],[1,"content-wrapper"],["class","panel panel-default",4,"ngFor","ngForOf"],["class","solid-table-footer",4,"ngIf"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-body"],[2,"margin-bottom","20px"],[2,"margin-right","20px"],["key","tasks.createDateLabel"],[1,"date-string-display"],[3,"date"],[1,"col-md-3",2,"min-height","90px","display","flex","align-items","center"],[1,"radio-inline","radio"],["type","radio","checked","","value","true",1,"inline-radio-input",2,"height","auto",3,"id","name"],["key","tasks.open"],["type","radio","value","false",1,"inline-radio-input",2,"margin-left","15px","height","auto",3,"id","name","click"],["key","tasks.complete"],[1,"solid-table-footer"],["id","inProgressTasks",3,"pageChange"],["key","tasks.viewCompletedTasksButton"],["key","tasks.hideCompletedTasksButton"],[1,"date-string-display",2,"margin-right","30px"],["key","tasks.completeDateLabel"],["type","radio","value","true",1,"inline-radio-input",2,"height","auto",3,"id","name","click"],["checked","","type","radio","value","false",1,"inline-radio-input",2,"margin-left","15px","height","auto",3,"id","name"],["id","completedTasks",3,"pageChange"],[2,"font-style","italic","color","grey"],["key","tasks.no.completed.tasks.message"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelement(1,"cgr-header"),o.ɵɵelementStart(2,"div",1),o.ɵɵelement(3,"message"),o.ɵɵelementStart(4,"h2"),o.ɵɵelement(5,"localize",2),o.ɵɵelementEnd(),o.ɵɵelement(6,"hr"),o.ɵɵtemplate(7,v,6,9,"div",3),o.ɵɵelementStart(8,"div",4),o.ɵɵelementStart(9,"h2",5),o.ɵɵelement(10,"localize",6),o.ɵɵelementEnd(),o.ɵɵelementStart(11,"button",7),o.ɵɵlistener("click",(function(){return t.onToggleCompletedTasks()})),o.ɵɵtemplate(12,b,1,0,"localize",8),o.ɵɵtemplate(13,S,1,0,"localize",9),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelement(14,"hr"),o.ɵɵelementStart(15,"div",4),o.ɵɵelementStart(16,"div",10),o.ɵɵtemplate(17,O,4,9,"div",11),o.ɵɵtemplate(18,I,3,0,"div",11),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(7),o.ɵɵproperty("ngIf",t.inProgressTasks.resultSet.length>0),o.ɵɵadvance(5),o.ɵɵproperty("ngIf",!t.isViewAllOpen),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.isViewAllOpen),o.ɵɵadvance(4),o.ɵɵproperty("ngIf",t.isViewAllOpen&&t.completedTasks.resultSet.length>0),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",0===t.completedTasks.resultSet.length&&t.isViewAllOpen))},directives:[c.CgrHeaderComponent,d.MessageComponent,p.LocalizeComponent,u.NgIf,u.NgForOf,m.DateTextComponent,g.PaginationControlsComponent],pipes:[g.PaginatePipe],styles:['.modal-content[_ngcontent-%COMP%] {\n    overflow-y: visible !important;\n}\n\n.modal-form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   input[type="text"][_ngcontent-%COMP%]:disabled {\n    background: #eee;\n}\n\nli.list-group-item[_ngcontent-%COMP%] {\n    font-size: 18px;\n}\n\n.warning-text[_ngcontent-%COMP%]{\n    color: orange;\n}']}),e}();t.TaskViewerComponent=M,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(M,[{type:i.Component,args:[{selector:"task-viewer",templateUrl:"./task-viewer.component.html",styleUrls:["./task-viewer.component.css"],providers:[r.DatePipe]}]}],(function(){return[{type:a.TaskService},{type:l.LocalizationService},{type:s.DateService}]}),{geoObjectType:[{type:i.Input}]})},1110:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FhirExportSynchronizationConfigComponent=void 0;var i=n(0),r=(n(44),n(378),n(1015),n(1016),n(0)),o=n(1015),a=n(1016),l=n(88),s=n(1),c=n(18),d=n(162);function p(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",26),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("value",n.oid),r.ɵɵadvance(1),r.ɵɵtextInterpolate(n.label)}}function u(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",26),r.ɵɵtext(1),r.ɵɵelement(2,"localize",27),r.ɵɵtext(3),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("value",n.oid),r.ɵɵadvance(1),r.ɵɵtextInterpolate1(" ",n.forDate," ("),r.ɵɵadvance(2),r.ɵɵtextInterpolate1(" ",n.versionNumber,") ")}}function m(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"select",21),r.ɵɵlistener("ngModelChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().$implicit.versionId=e})),r.ɵɵelement(1,"option"),r.ɵɵtemplate(2,u,4,3,"option",19),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext().$implicit,o=r.ɵɵnextContext();r.ɵɵproperty("ngModel",i.versionId)("name","version"+i.level),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",o.versions[i.masterListId])}}function g(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",26),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("value",n.className),r.ɵɵadvance(1),r.ɵɵtextInterpolate(n.label)}}function h(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"tr"),r.ɵɵelementStart(1,"td",6),r.ɵɵelementStart(2,"label",15),r.ɵɵelement(3,"localize",16),r.ɵɵtext(4),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(5,"td",17),r.ɵɵelementStart(6,"select",18),r.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.masterListId=e}))("change",(function(){r.ɵɵrestoreView(n);var e=t.$implicit;return r.ɵɵnextContext().onSelectMasterList(e)})),r.ɵɵelement(7,"option"),r.ɵɵtemplate(8,p,2,2,"option",19),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(9,"td",17),r.ɵɵtemplate(10,m,3,3,"select",20),r.ɵɵelementEnd(),r.ɵɵelementStart(11,"td",17),r.ɵɵelementStart(12,"select",21),r.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.implementation=e})),r.ɵɵelement(13,"option"),r.ɵɵtemplate(14,g,2,2,"option",19),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(15,"td",17),r.ɵɵelementStart(16,"div"),r.ɵɵelementStart(17,"a",22),r.ɵɵlistener("click",(function(){r.ɵɵrestoreView(n);var e=t.index;return r.ɵɵnextContext().removeLevel(e)})),r.ɵɵpipe(18,"localize"),r.ɵɵelement(19,"i",23),r.ɵɵelementStart(20,"label",24),r.ɵɵelement(21,"localize",25),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=t.$implicit,o=r.ɵɵnextContext();r.ɵɵstyleProp("background-color","#F7F7F7"),r.ɵɵadvance(4),r.ɵɵtextInterpolate1(" ",i.level+1," "),r.ɵɵadvance(2),r.ɵɵproperty("ngModel",i.masterListId)("name","masterList"+i.level),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",o.lists),r.ɵɵadvance(2),r.ɵɵproperty("ngIf",null!=o.versions[i.masterListId]),r.ɵɵadvance(2),r.ɵɵproperty("ngModel",i.implementation)("name","implementation"+i.level),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",o.implementations),r.ɵɵadvance(3),r.ɵɵproperty("title",r.ɵɵpipeBind1(18,11,"button.delete.helptext"))}}var f=function(){function e(e,t){this.service=e,this.rService=t,this.message=null,this.onError=new i.EventEmitter,this.subscription=null,this.versions={},this.implementations=[],this.lists=[]}return e.prototype.ngOnInit=function(){var e=this;this.reset(),this.subscription=this.fieldChange.subscribe((function(t){"organization"!==t&&"system"!==t||e.reset()})),this.service.getFhirExportImplementations().then((function(t){e.implementations=t}))},e.prototype.ngOnDestroy=function(){null!=this.subscription&&this.subscription.unsubscribe()},e.prototype.reset=function(){var e=this;if(null==this.config.configuration&&(this.config.configuration={levels:[],hierarchy:null}),null!=this.config.configuration.levels)for(var t=0;t<this.config.configuration.levels.length;++t){var n=this.config.configuration.levels[t];this.onSelectMasterList(n)}else this.config.configuration.levels=[];this.rService.getAllLists().then((function(t){e.lists=t}))},e.prototype.onSelectMasterList=function(e){var t=this;null!=e.masterListId&&e.masterListId.length>0?this.rService.getPublicVersions(e.masterListId).then((function(n){t.versions[e.masterListId]=n})):this.versions[e.masterListId]=null},e.prototype.addLevel=function(){var e={masterListId:null,versionId:null,level:this.config.configuration.levels.length};this.config.configuration.levels.push(e)},e.prototype.removeLevel=function(e){if(this.config.configuration.levels.splice(e,1),null!=this.config.configuration&&null!=this.config.configuration.levels)for(e=0;e<this.config.configuration.levels.length;++e)this.config.configuration.levels[e].level=e},e.prototype.error=function(e){this.onError.emit(e)},e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(o.SynchronizationConfigService),r.ɵɵdirectiveInject(a.ListTypeService))},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["fhir-export-synchronization-config"]],inputs:{config:"config",fieldChange:"fieldChange"},outputs:{onError:"onError"},decls:23,vars:4,consts:[[1,"row-holder"],[1,"label-holder"],["key","synchronization.config.units"],[1,"holder"],[1,"list-table-wrapper"],["id","manage-systems-table",1,"list-table","table","table-bordered"],[2,"width","3%"],["key","settings.external.synchronization.level.label"],[2,"width","25%"],["key","masterlist.field"],["key","masterlist.forDate"],["key","synchronization.config.implementation"],[3,"background-color",4,"ngFor","ngForOf"],[1,"button-column"],[1,"fa","fa-plus",3,"title","click"],[2,"padding","10px 0","margin","0"],["key","sync.level.label"],[2,"width","20%"],["required","",3,"ngModel","name","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["required","",3,"ngModel","name","ngModelChange",4,"ngIf"],["required","",3,"ngModel","name","ngModelChange"],[2,"padding","10px",3,"title","click"],[1,"fa","fa-trash-o","ico-remove"],[2,"cursor","pointer","margin-left","9px"],["key","sync.level.delete"],[3,"value"],["key","list.type.version"]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div",0),r.ɵɵelementStart(1,"div",1),r.ɵɵelementStart(2,"label"),r.ɵɵelement(3,"localize",2),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(4,"div",3),r.ɵɵelementStart(5,"div",4),r.ɵɵelementStart(6,"table",5),r.ɵɵelementStart(7,"thead"),r.ɵɵelementStart(8,"tr"),r.ɵɵelementStart(9,"th",6),r.ɵɵelement(10,"localize",7),r.ɵɵelementEnd(),r.ɵɵelementStart(11,"th",8),r.ɵɵelement(12,"localize",9),r.ɵɵelementEnd(),r.ɵɵelementStart(13,"th",8),r.ɵɵelement(14,"localize",10),r.ɵɵelementEnd(),r.ɵɵelementStart(15,"th",8),r.ɵɵelement(16,"localize",11),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(17,"tbody"),r.ɵɵtemplate(18,h,22,13,"tr",12),r.ɵɵelementStart(19,"tr"),r.ɵɵelementStart(20,"td",13),r.ɵɵelementStart(21,"a",14),r.ɵɵlistener("click",(function(){return t.addLevel()})),r.ɵɵpipe(22,"localize"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(18),r.ɵɵproperty("ngForOf",t.config.configuration.levels),r.ɵɵadvance(3),r.ɵɵproperty("title",r.ɵɵpipeBind1(22,2,"sync.levels.add.tooltip")))},directives:[l.LocalizeComponent,s.NgForOf,c.SelectControlValueAccessor,c.RequiredValidator,c.NgControlStatus,c.NgModel,c.NgSelectOption,c.ɵangular_packages_forms_forms_z,s.NgIf],pipes:[d.LocalizePipe],encapsulation:2}),e}();t.FhirExportSynchronizationConfigComponent=f,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(f,[{type:i.Component,args:[{selector:"fhir-export-synchronization-config",templateUrl:"./fhir-export-synchronization-config.component.html",styleUrls:[]}]}],(function(){return[{type:o.SynchronizationConfigService},{type:a.ListTypeService}]}),{config:[{type:i.Input}],fieldChange:[{type:i.Input}],onError:[{type:i.Output}]})},1111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dhis2SynchronizationConfigComponent=void 0;var i=n(0),r=(n(44),n(378),n(1015),n(0)),o=n(1015),a=n(1),l=n(88),s=n(18),c=n(162);function d(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",8),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("value",n.code),r.ɵɵadvance(1),r.ɵɵtextInterpolate(n.label)}}function p(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"div",1),r.ɵɵelementStart(1,"div",2),r.ɵɵelementStart(2,"label"),r.ɵɵelement(3,"localize",3),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(4,"div",4),r.ɵɵelementStart(5,"span",5),r.ɵɵelementStart(6,"select",6),r.ɵɵlistener("ngModelChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().config.configuration.hierarchyCode=e}))("change",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext().onChangeHierarchy()})),r.ɵɵelement(7,"option"),r.ɵɵtemplate(8,d,2,2,"option",7),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext();r.ɵɵadvance(6),r.ɵɵproperty("ngModel",i.config.configuration.hierarchyCode)("disabled",null!=i.config.oid),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",i.cOrg.hierarchies)}}function u(e,t){if(1&e&&(r.ɵɵelementStart(0,"td",12),r.ɵɵelementStart(1,"label",28),r.ɵɵelement(2,"localize",29),r.ɵɵtext(3),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext().$implicit;r.ɵɵadvance(3),r.ɵɵtextInterpolate1(" ",n.levelNum+1,"")}}function m(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",8),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("value",n.code),r.ɵɵadvance(1),r.ɵɵtextInterpolate(n.label.localizedValue)}}function g(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"td",14),r.ɵɵelementStart(1,"select",30),r.ɵɵlistener("ngModelChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().$implicit.level.geoObjectType=e}))("change",(function(){r.ɵɵrestoreView(n);var e=r.ɵɵnextContext(),t=e.$implicit,i=e.index;return r.ɵɵnextContext(2).onSelectGeoObjectType(t.level.geoObjectType,i)})),r.ɵɵelement(2,"option"),r.ɵɵtemplate(3,m,2,2,"option",7),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext().$implicit,o=r.ɵɵnextContext(2);r.ɵɵadvance(1),r.ɵɵproperty("ngModel",i.level.geoObjectType)("name","geoObjectType"+i.levelNum),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",o.types)}}function h(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"td",14),r.ɵɵelementStart(1,"select",31),r.ɵɵlistener("change",(function(){r.ɵɵrestoreView(n);var e=r.ɵɵnextContext().$implicit;return r.ɵɵnextContext(2).onSelectLevelType(e)}))("ngModelChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().$implicit.level.type=e})),r.ɵɵelement(2,"option"),r.ɵɵelementStart(3,"option",32),r.ɵɵelement(4,"localize",9),r.ɵɵelementEnd(),r.ɵɵelementStart(5,"option",33),r.ɵɵelement(6,"localize",34),r.ɵɵelementEnd(),r.ɵɵelementStart(7,"option",35),r.ɵɵelement(8,"localize",36),r.ɵɵelementEnd(),r.ɵɵelementStart(9,"option",37),r.ɵɵelement(10,"localize",38),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext().$implicit;r.ɵɵadvance(1),r.ɵɵproperty("ngModel",i.level.type)("name","type"+i.levelNum)}}function f(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",8),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("value",n.id),r.ɵɵadvance(1),r.ɵɵtextInterpolate(n.name)}}function y(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"td",17),r.ɵɵelementStart(1,"select",39),r.ɵɵlistener("ngModelChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().$implicit.level.orgUnitGroupId=e})),r.ɵɵelement(2,"option"),r.ɵɵtemplate(3,f,2,2,"option",7),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext().$implicit,o=r.ɵɵnextContext(2);r.ɵɵadvance(1),r.ɵɵproperty("ngModel",i.level.orgUnitGroupId)("name","group"+i.levelNum),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",o.orgUnitGroups)}}function v(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"a",40),r.ɵɵlistener("click",(function(){r.ɵɵrestoreView(n);var e=r.ɵɵnextContext(2).$implicit;return r.ɵɵnextContext(2).configureAttributes(e)})),r.ɵɵpipe(1,"localize"),r.ɵɵelement(2,"i",45),r.ɵɵelementStart(3,"label",46),r.ɵɵelement(4,"localize",47),r.ɵɵelementEnd(),r.ɵɵelementEnd()}2&e&&r.ɵɵproperty("title",r.ɵɵpipeBind1(1,1,"sync.attr.configureAttributes.helptext"))}function b(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"td",14),r.ɵɵelementStart(1,"div"),r.ɵɵelementStart(2,"a",40),r.ɵɵlistener("click",(function(){r.ɵɵrestoreView(n);var e=r.ɵɵnextContext(),t=e.$implicit,i=e.index;return r.ɵɵnextContext(2).removeLevel(t.levelNum,i)})),r.ɵɵpipe(3,"localize"),r.ɵɵelement(4,"i",41),r.ɵɵelementStart(5,"label",42),r.ɵɵelement(6,"localize",43),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(7,"div"),r.ɵɵtemplate(8,v,5,3,"a",44),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext().$implicit;r.ɵɵadvance(2),r.ɵɵproperty("title",r.ɵɵpipeBind1(3,2,"button.delete.helptext")),r.ɵɵadvance(6),r.ɵɵproperty("ngIf",i.level.geoObjectType&&("ORG_UNITS"===i.level.type||"ALL"===i.level.type))}}function S(e,t){1&e&&(r.ɵɵelementStart(0,"label"),r.ɵɵelement(1,"localize",69),r.ɵɵelementEnd())}function C(e,t){1&e&&r.ɵɵelement(0,"localize",71)}function E(e,t){if(1&e&&(r.ɵɵelementStart(0,"label"),r.ɵɵtemplate(1,C,1,0,"localize",70),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext().$implicit;r.ɵɵadvance(1),r.ɵɵproperty("ngIf",!n.isOrgUnitGroup)}}function x(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",63),r.ɵɵelementStart(1,"label",72),r.ɵɵtext(2),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("ngValue",n.cgrAttr.name),r.ɵɵadvance(2),r.ɵɵtextInterpolate(n.cgrAttr.label)}}function O(e,t){if(1&e&&(r.ɵɵelementStart(0,"label",72),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext().$implicit;r.ɵɵadvance(1),r.ɵɵtextInterpolate(n.info.cgrAttr.typeLabel)}}function I(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"select",62),r.ɵɵlistener("ngModelChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext(2).$implicit.isOrgUnitGroup=e}))("change",(function(){r.ɵɵrestoreView(n);var e=r.ɵɵnextContext(2).$implicit;return r.ɵɵnextContext(4).onChangeTargetType(e)})),r.ɵɵelementStart(1,"option",63),r.ɵɵelement(2,"localize",75),r.ɵɵelementEnd(),r.ɵɵelementStart(3,"option",63),r.ɵɵelement(4,"localize",76),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext(2).$implicit,o=r.ɵɵnextContext(2).index;r.ɵɵproperty("ngModel",i.isOrgUnitGroup)("name","isOrgUnitGroup"+o+i.info.cgrAttr.name),r.ɵɵadvance(1),r.ɵɵproperty("ngValue",!1),r.ɵɵadvance(2),r.ɵɵproperty("ngValue",!0)}}function M(e,t){if(1&e&&(r.ɵɵelementStart(0,"td",73),r.ɵɵtemplate(1,I,5,4,"select",74),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext().$implicit;r.ɵɵadvance(1),r.ɵɵproperty("ngIf","term"===n.info.cgrAttr.type)}}function w(e,t){1&e&&(r.ɵɵelementStart(0,"td",77),r.ɵɵelementStart(1,"label",72),r.ɵɵelement(2,"localize",78),r.ɵɵelementEnd(),r.ɵɵelementEnd())}function T(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",63),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("ngValue",n.dhis2Id),r.ɵɵadvance(1),r.ɵɵtextInterpolate1(" ",n.name," ")}}var k=function(){return{standalone:!0}};function P(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"select",80),r.ɵɵlistener("ngModelChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext(2).$implicit.dhis2Id=e}))("change",(function(){r.ɵɵrestoreView(n);var e=r.ɵɵnextContext(2).$implicit;return r.ɵɵnextContext(4).onChangeDHIS2Attr(e)})),r.ɵɵelementStart(1,"option",63),r.ɵɵelement(2,"localize",81),r.ɵɵelementEnd(),r.ɵɵtemplate(3,T,2,2,"option",64),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext(2).$implicit;r.ɵɵproperty("ngModel",i.dhis2Id)("ngModelOptions",r.ɵɵpureFunction0(4,k)),r.ɵɵadvance(1),r.ɵɵproperty("ngValue",null),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",i.info.dhis2Attrs)}}function j(e,t){1&e&&(r.ɵɵelementStart(0,"label",72),r.ɵɵelement(1,"localize",82),r.ɵɵelementEnd())}function z(e,t){if(1&e&&(r.ɵɵelementStart(0,"td",57),r.ɵɵtemplate(1,P,4,5,"select",79),r.ɵɵtemplate(2,j,2,0,"label",65),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext().$implicit;r.ɵɵadvance(1),r.ɵɵproperty("ngIf",n.info.dhis2Attrs.length>0&&!n.isOrgUnitGroup),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",0==n.info.dhis2Attrs.length&&!n.isOrgUnitGroup)}}function D(e,t){1&e&&r.ɵɵelement(0,"localize",91)}function R(e,t){1&e&&r.ɵɵelement(0,"localize",92)}function L(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",8),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("value",n.code),r.ɵɵadvance(1),r.ɵɵtextInterpolate1(" ",n.name," ")}}function _(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"select",93),r.ɵɵlistener("ngModelChange",(function(e){r.ɵɵrestoreView(n);var t=r.ɵɵnextContext().$implicit;return r.ɵɵnextContext(2).$implicit.terms[t.code]=e})),r.ɵɵelementStart(1,"option",63),r.ɵɵelement(2,"localize",81),r.ɵɵelementEnd(),r.ɵɵtemplate(3,L,2,2,"option",7),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext().$implicit,o=r.ɵɵnextContext(2).$implicit,a=r.ɵɵnextContext(4);r.ɵɵproperty("ngModel",o.terms[i.code])("ngModelOptions",r.ɵɵpureFunction0(4,k)),r.ɵɵadvance(1),r.ɵɵproperty("ngValue",null),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",a.getTermOptions(o.info,o.externalId))}}function A(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",8),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("value",n.id),r.ɵɵadvance(1),r.ɵɵtextInterpolate(n.name)}}function N(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"select",94),r.ɵɵlistener("ngModelChange",(function(e){r.ɵɵrestoreView(n);var t=r.ɵɵnextContext().$implicit;return r.ɵɵnextContext(2).$implicit.terms[t.code]=e})),r.ɵɵelementStart(1,"option",63),r.ɵɵelement(2,"localize",81),r.ɵɵelementEnd(),r.ɵɵtemplate(3,A,2,2,"option",7),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext().$implicit,o=r.ɵɵnextContext(2).$implicit,a=r.ɵɵnextContext(4);r.ɵɵproperty("ngModel",o.terms[i.code])("ngModelOptions",r.ɵɵpureFunction0(4,k)),r.ɵɵadvance(1),r.ɵɵproperty("ngValue",null),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",a.orgUnitGroups)}}function V(e,t){if(1&e&&(r.ɵɵelementStart(0,"table",84),r.ɵɵelementStart(1,"thead"),r.ɵɵelementStart(2,"tr"),r.ɵɵelement(3,"th",14),r.ɵɵelementStart(4,"th",14),r.ɵɵelementStart(5,"label"),r.ɵɵelement(6,"localize",85),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelement(7,"th",14),r.ɵɵelementStart(8,"th",14),r.ɵɵelementStart(9,"label"),r.ɵɵtemplate(10,D,1,0,"localize",86),r.ɵɵtemplate(11,R,1,0,"localize",87),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(12,"tbody"),r.ɵɵelementStart(13,"tr"),r.ɵɵelement(14,"td"),r.ɵɵelementStart(15,"td"),r.ɵɵelementStart(16,"label",72),r.ɵɵtext(17),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(18,"td",88),r.ɵɵelementStart(19,"label",72),r.ɵɵelement(20,"localize",78),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(21,"td"),r.ɵɵtemplate(22,_,4,5,"select",89),r.ɵɵtemplate(23,N,4,5,"select",90),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=t.$implicit,i=r.ɵɵnextContext(2).$implicit;r.ɵɵadvance(10),r.ɵɵproperty("ngIf",!i.isOrgUnitGroup),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",i.isOrgUnitGroup),r.ɵɵadvance(6),r.ɵɵtextInterpolate(n.label),r.ɵɵadvance(5),r.ɵɵproperty("ngIf",!i.isOrgUnitGroup),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",i.isOrgUnitGroup)}}function F(e,t){if(1&e&&(r.ɵɵelementStart(0,"div"),r.ɵɵtemplate(1,V,24,5,"table",83),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext().$implicit;r.ɵɵadvance(1),r.ɵɵproperty("ngForOf",n.info.terms)}}function H(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"tr"),r.ɵɵelementStart(1,"td",54),r.ɵɵelementStart(2,"table",55),r.ɵɵelementStart(3,"thead"),r.ɵɵelementStart(4,"tr"),r.ɵɵelement(5,"th",56),r.ɵɵelementStart(6,"th",57),r.ɵɵelementStart(7,"label"),r.ɵɵelement(8,"localize",58),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(9,"th",57),r.ɵɵelementStart(10,"label"),r.ɵɵelement(11,"localize",59),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(12,"th",57),r.ɵɵtemplate(13,S,2,0,"label",60),r.ɵɵelementEnd(),r.ɵɵelementStart(14,"th",57),r.ɵɵtemplate(15,E,2,1,"label",60),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(16,"tbody"),r.ɵɵelementStart(17,"tr"),r.ɵɵelementStart(18,"td",56),r.ɵɵelementStart(19,"i",61),r.ɵɵlistener("click",(function(){r.ɵɵrestoreView(n);var e=t.index,i=r.ɵɵnextContext(2).$implicit;return r.ɵɵnextContext(2).deleteMapping(i,e)})),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(20,"td",57),r.ɵɵelementStart(21,"select",62),r.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.cgrAttrName=e}))("change",(function(e){r.ɵɵrestoreView(n);var i=t.$implicit,o=r.ɵɵnextContext(2).$implicit;return r.ɵɵnextContext(2).mapCgrAttr(0==e.target.selectedIndex?null:o.attrCfg.attrConfigInfos[e.target.selectedIndex-1],i)})),r.ɵɵelement(22,"option",63),r.ɵɵtemplate(23,x,3,2,"option",64),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(24,"td",57),r.ɵɵtemplate(25,O,2,1,"label",65),r.ɵɵelementEnd(),r.ɵɵtemplate(26,M,2,1,"td",66),r.ɵɵtemplate(27,w,3,0,"td",67),r.ɵɵtemplate(28,z,3,2,"td",68),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵtemplate(29,F,2,1,"div",60),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=t.$implicit,o=t.index,a=r.ɵɵnextContext(2),l=a.index,s=a.$implicit;r.ɵɵadvance(13),r.ɵɵproperty("ngIf",i.info&&"term"===i.info.cgrAttr.type),r.ɵɵadvance(2),r.ɵɵproperty("ngIf",i.info),r.ɵɵadvance(6),r.ɵɵproperty("ngModel",i.cgrAttrName)("name","sourceAttrSelect"+l+"-"+o+(i.cgrAttrName?i.cgrAttrName:"")),r.ɵɵadvance(1),r.ɵɵproperty("ngValue",null),r.ɵɵadvance(1),r.ɵɵproperty("ngForOf",s.attrCfg.attrConfigInfos),r.ɵɵadvance(2),r.ɵɵproperty("ngIf",i.info),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",i.info&&"term"===i.info.cgrAttr.type),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",i.info&&"term"!==i.info.cgrAttr.type&&i.info.cgrAttr.name),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",i.info),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",i.info&&(null!=i.externalId&&i.externalId.length>0||i.isOrgUnitGroup))}}function G(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"td",48),r.ɵɵelementStart(1,"h4"),r.ɵɵelement(2,"localize",49),r.ɵɵelementEnd(),r.ɵɵelementStart(3,"table",50),r.ɵɵelementStart(4,"colgroup"),r.ɵɵelement(5,"col",51),r.ɵɵelement(6,"col",52),r.ɵɵelementEnd(),r.ɵɵelementStart(7,"tbody"),r.ɵɵtemplate(8,H,30,11,"tr",53),r.ɵɵelementStart(9,"tr"),r.ɵɵelementStart(10,"td",22),r.ɵɵelementStart(11,"a",23),r.ɵɵlistener("click",(function(){r.ɵɵrestoreView(n);var e=r.ɵɵnextContext().$implicit;return r.ɵɵnextContext(2).addNewMapping(e)})),r.ɵɵpipe(12,"localize"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext().$implicit;r.ɵɵadvance(8),r.ɵɵproperty("ngForOf",i.attrCfg.mappings),r.ɵɵadvance(3),r.ɵɵproperty("title",r.ɵɵpipeBind1(12,2,"sync.attr.attributes.add.tooltip"))}}function B(e,t){if(1&e&&(r.ɵɵelementStart(0,"tr"),r.ɵɵtemplate(1,u,4,1,"td",24),r.ɵɵtemplate(2,g,4,3,"td",25),r.ɵɵtemplate(3,h,11,2,"td",25),r.ɵɵtemplate(4,y,4,3,"td",26),r.ɵɵtemplate(5,b,9,4,"td",25),r.ɵɵtemplate(6,G,13,4,"td",27),r.ɵɵelementEnd()),2&e){var n=t.$implicit,i=r.ɵɵnextContext(2);r.ɵɵstyleProp("background-color",!1===n.isAttributeEditor?"#F7F7F7":""),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",!1===n.isAttributeEditor),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",!1===n.isAttributeEditor),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",!1===n.isAttributeEditor),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",!1===n.isAttributeEditor&&i.orgUnitGroups.length>0),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",!1===n.isAttributeEditor),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",!0===n.isAttributeEditor)}}function q(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"div",1),r.ɵɵelementStart(1,"div",2),r.ɵɵelementStart(2,"label"),r.ɵɵelement(3,"localize",9),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(4,"div",4),r.ɵɵelementStart(5,"div",10),r.ɵɵelementStart(6,"table",11),r.ɵɵelementStart(7,"thead"),r.ɵɵelementStart(8,"tr"),r.ɵɵelementStart(9,"th",12),r.ɵɵelement(10,"localize",13),r.ɵɵelementEnd(),r.ɵɵelementStart(11,"th",14),r.ɵɵelement(12,"localize",15),r.ɵɵelementEnd(),r.ɵɵelementStart(13,"th",14),r.ɵɵelement(14,"localize",16),r.ɵɵelementEnd(),r.ɵɵelementStart(15,"th",17),r.ɵɵelement(16,"localize",18),r.ɵɵelementEnd(),r.ɵɵelementStart(17,"th",19),r.ɵɵelement(18,"localize",20),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(19,"tbody"),r.ɵɵtemplate(20,B,7,8,"tr",21),r.ɵɵelementStart(21,"tr"),r.ɵɵelementStart(22,"td",22),r.ɵɵelementStart(23,"a",23),r.ɵɵlistener("click",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext().addLevel()})),r.ɵɵpipe(24,"localize"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext();r.ɵɵadvance(20),r.ɵɵproperty("ngForOf",i.levelRows),r.ɵɵadvance(3),r.ɵɵproperty("title",r.ɵɵpipeBind1(24,2,"sync.levels.add.tooltip"))}}var U="net.geoprism.registry.etl.DHIS2AttributeMapping",$=function(){function e(e){this.service=e,this.message=null,this.cOrg=null,this.onError=new i.EventEmitter,this.organizations=[],this.types=[],this.levelRows=[],this.orgUnitGroups=[]}return e.prototype.ngOnInit=function(){var e=this;if(null==this.config.configuration&&(this.config.configuration={levels:[],hierarchyCode:null}),this.levelRows=[],null!=this.config.configuration.levels)for(var t=0;t<this.config.configuration.levels.length;++t){var n={level:this.config.configuration.levels[t],levelNum:t,isAttributeEditor:!1};this.levelRows.push(n)}else this.config.configuration.levels=[];null!=this.config.configuration.hierarchyCode&&this.service.getConfigForES(this.config.system,this.config.configuration.hierarchyCode).then((function(t){e.types=t.types,e.orgUnitGroups=t.orgUnitGroups})).catch((function(t){e.error(t)})),this.fieldChange.subscribe((function(){e.clearMappingData()}))},e.prototype.ngOnDestroy=function(){this.fieldChange.unsubscribe()},e.prototype.onChangeHierarchy=function(){this.clearMappingData()},e.prototype.buildDefaultMappings=function(){return[{attributeMappingStrategy:U,isOrgUnitGroup:!1,cgrAttrName:"displayLabel",externalId:null,dhis2Id:"name",dhis2AttrName:"name"},{attributeMappingStrategy:U,isOrgUnitGroup:!1,cgrAttrName:"displayLabel",externalId:null,dhis2Id:"shortName",dhis2AttrName:"shortName"},{attributeMappingStrategy:U,isOrgUnitGroup:!1,cgrAttrName:"code",dhis2Id:"code",externalId:null,dhis2AttrName:"code"},{attributeMappingStrategy:U,isOrgUnitGroup:!1,cgrAttrName:"createDate",externalId:null,dhis2Id:"openingDate",dhis2AttrName:"openingDate"}]},e.prototype.clearMappingData=function(){var e=this;this.types=[],this.levelRows=[],this.config.configuration.levels=[],null!=this.config.configuration.hierarchyCode&&this.service.getConfigForES(this.config.system,this.config.configuration.hierarchyCode).then((function(t){e.types=t.types,e.orgUnitGroups=t.orgUnitGroups})).catch((function(t){e.error(t)}));var t={type:null,geoObjectType:null,level:0,mappings:[],orgUnitGroupId:null};this.config.configuration.levels=[t],this.levelRows.push({level:t,levelNum:0,isAttributeEditor:!1})},e.prototype.onSelectLevelType=function(e){if("RELATIONSHIPS"===e.level.type){e.attrCfg.mappings=[],e.level.mappings=[];var t=this.getEditorIndex();-1!==t&&this.levelRows.splice(t,1)}else if(0===e.attrCfg.mappings.length){e.attrCfg.mappings=this.buildDefaultMappings(),e.level.mappings=e.attrCfg.mappings;for(var n=e.level.mappings.length,i=function(t){var n=e.level.mappings[t];e.attrCfg.attrConfigInfos.forEach((function(e){e.cgrAttr.name===n.cgrAttrName&&(n.info=e)}))},r=0;r<n;++r)i(r)}},e.prototype.deleteMapping=function(e,t){e.attrCfg.mappings.splice(t,1)},e.prototype.addNewMapping=function(e){e.attrCfg.mappings.push({attributeMappingStrategy:U,cgrAttrName:null,dhis2AttrName:null,externalId:null,terms:[]})},e.prototype.addLevel=function(){var e={type:null,geoObjectType:null,level:this.config.configuration.levels.length,mappings:[],orgUnitGroupId:null},t=this.config.configuration.levels.push(e);this.levelRows.push({level:e,levelNum:t-1,isAttributeEditor:!1})},e.prototype.removeLevel=function(e,t){if(e<this.config.configuration.levels.length){var n=this.getEditorIndex();n===t+1&&this.levelRows.splice(n,1),this.levelRows.splice(t,1);for(var i=0,r=0;r<this.levelRows.length;++r){var o=this.levelRows[r];o.levelNum=i,o.isAttributeEditor||(i+=1)}this.config.configuration.levels.splice(e,1)}},e.prototype.getEditorIndex=function(){for(var e=0;e<this.levelRows.length;++e){if(this.levelRows[e].isAttributeEditor)return e}return-1},e.prototype.configureAttributes=function(e){var t=this.getEditorIndex();-1!==t&&(this.levelRows.splice(t,1),t===e.levelNum+1)||this.onSelectGeoObjectType(e.level.geoObjectType,e.levelNum,!1)},e.prototype.getTermOptions=function(e,t){for(var n=0;n<e.dhis2Attrs.length;++n){var i=e.dhis2Attrs[n];if(i.dhis2Id===t)return i.options}},e.prototype.onChangeDHIS2Attr=function(e){if(null==e.dhis2Id||""===e.dhis2Id)return null!=e.terms&&(e.terms={}),void(e.dhis2AttrName=null);e.terms={};for(var t=e.info.dhis2Attrs.length,n=0;n<t;++n)e.info.dhis2Attrs[n].dhis2Id===e.dhis2Id&&(e.info.dhis2Attrs[n].dhis2Id!==e.info.dhis2Attrs[n].name?e.externalId=e.info.dhis2Attrs[n].dhis2Id:e.externalId=null,e.dhis2AttrName=e.info.dhis2Attrs[n].name)},e.prototype.onSelectGeoObjectType=function(e,t,n){var i=this;if(void 0===n&&(n=!0),""===e||null==e){var r=this.levelRows[t];return r.attrCfg=null,r.level.mappings=[],void(-1!==(o=this.getEditorIndex())&&o===t+1&&this.levelRows.splice(o,1))}var o,a=this.levelRows[t].attrCfg;null!=a&&a.geoObjectTypeCode===e?(-1!==(o=this.getEditorIndex())&&o!==t+1&&(this.levelRows.splice(o,1),o<t&&(t-=1)),this.levelRows.splice(t+1,0,{isAttributeEditor:!0,attrCfg:a})):this.service.getCustomAttrCfg(e,this.config.system).then((function(r){var o=i.getEditorIndex(),a=i.levelRows[t],l=a.level;null==l.mappings&&(l.mappings=[]),(0===l.mappings.length||n)&&(l.mappings=i.buildDefaultMappings());for(var s=l.mappings.length,c=function(e){var t=l.mappings[e];r.forEach((function(e){e.cgrAttr.name===t.cgrAttrName&&(t.info=e)})),l.mappings.forEach((function(e){e.dhis2AttrName&&e.dhis2AttrName===t.dhis2AttrName&&(e.externalId?t.dhis2Id=e.externalId:e.dhis2AttrName&&(t.dhis2Id=e.dhis2AttrName))}))},d=0;d<s;++d)c(d);a.attrCfg={geoObjectTypeCode:e,mappings:l.mappings,attrConfigInfos:r},-1!==o&&(o===t+1||r.length>0)&&(i.levelRows.splice(o,1),o<t&&(t-=1)),n||i.levelRows.splice(t+1,0,{isAttributeEditor:!0,attrCfg:a.attrCfg,level:a.level,levelNum:a.levelNum})})).catch((function(e){i.error(e)}))},e.prototype.mapCgrAttr=function(e,t){if(null==e)return t.cgrAttrName=null,t.info=null,t.dhis2AttrName=null,t.externalId=null,t.terms=null,void(t.isOrgUnitGroup=null);t.cgrAttrName=e.cgrAttr.name,t.info=e,t.dhis2AttrName=null,t.externalId=null,t.terms={},t.isOrgUnitGroup=!1,t.attributeMappingStrategy=e.attributeMappingStrategies[0]},e.prototype.onChangeTargetType=function(e){for(var t in e.externalId=null,e.terms)e.terms.hasOwnProperty(t)&&(e.terms[t]=null)},e.prototype.error=function(e){this.onError.emit(e)},e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(o.SynchronizationConfigService))},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["dhis2-synchronization-config"]],inputs:{config:"config",cOrg:"cOrg",fieldChange:"fieldChange"},outputs:{onError:"onError"},decls:3,vars:2,consts:[["class","row-holder",4,"ngIf"],[1,"row-holder"],[1,"label-holder"],["key","synchronization.config.hierarchy"],[1,"holder"],[1,"select"],["type","text","name","hierarchy","required","",3,"ngModel","disabled","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["key","synchronization.config.units"],[1,"list-table-wrapper"],["id","manage-systems-table",1,"list-table","table","table-bordered"],[2,"width","3%"],["key","settings.external.synchronization.level.label"],[2,"width","25%"],["key","settings.external.synchronization.geoobjecttype.label"],["key","settings.external.synchronization.dhis2.synch.type.label"],[2,"width","17%"],["key","synchronization.config.orgUnitGroup"],[2,"width","25%","text-align","center"],["key","settings.external.synchronization.actions.label"],[3,"background-color",4,"ngFor","ngForOf"],[1,"button-column"],[1,"fa","fa-plus",3,"title","click"],["style","width:3%",4,"ngIf"],["style","width:25%",4,"ngIf"],["style","width:17%",4,"ngIf"],["colspan","5",4,"ngIf"],[2,"padding","10px 0","margin","0"],["key","sync.level.label"],["type","text","required","",3,"ngModel","name","ngModelChange","change"],["type","text","required","",3,"ngModel","name","change","ngModelChange"],["value","ORG_UNITS"],["value","RELATIONSHIPS"],["key","synchronization.config.relationships"],["value","ALL"],["key","synchronization.config.all"],["value","NONE"],["key","synchronization.config.none"],["type","text",3,"ngModel","name","ngModelChange"],[2,"padding","10px",3,"title","click"],[1,"fa","fa-trash-o","ico-remove"],[2,"cursor","pointer","margin-left","9px"],["key","sync.level.delete"],["style","padding: 10px;",3,"title","click",4,"ngIf"],[1,"fa","fa-edit"],[2,"cursor","pointer","margin-left","3px"],["key","sync.attr.attributes.editButton"],["colspan","5"],["key","sync.attr.attributes.title"],[1,"table","table-bordered","table-striped",2,"margin-left","80px","width","calc(100% - 80px)"],["width","5%"],["width","95%"],[4,"ngFor","ngForOf"],["colspan","2",1,"row-holder"],[2,"width","80%","margin-top","15px","margin-bottom","10px"],[2,"width","5%"],[2,"width","23%"],["key","sync.attr.sourceAttribute"],["key","sync.attr.type"],[4,"ngIf"],[1,"fa","fa-times",3,"click"],[2,"width","95%",3,"ngModel","name","ngModelChange","change"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["style","color:#999;",4,"ngIf"],["style","margin-right:20px; width:23%",4,"ngIf"],["style","float:right; margin-right:20px; width:23%",4,"ngIf"],["style","width:23%",4,"ngIf"],["key","sync.attr.targetTypeHeader"],["key","sync.attr.targetAttribute",4,"ngIf"],["key","sync.attr.targetAttribute"],[2,"color","#999"],[2,"margin-right","20px","width","23%"],["style","width:95%",3,"ngModel","name","ngModelChange","change",4,"ngIf"],["key","sync.attr.targetTypeOptionSet"],["key","sync.attr.targetTypeOrgUnitGroup"],[2,"float","right","margin-right","20px","width","23%"],["key","sync.attr.to"],[3,"ngModel","ngModelOptions","ngModelChange","change",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange","change"],["key","sync.notMapped"],["key","sync.noValid"],["class","row","style","width:80%; margin-left:80px;",4,"ngFor","ngForOf"],[1,"row",2,"width","80%","margin-left","80px"],["key","sync.attr.term.cgrTerm"],["key","sync.attr.term.dhis2Option",4,"ngIf"],["key","sync.attr.term.targetOrgUnitGroup",4,"ngIf"],[2,"float","right","margin-right","20px"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["type","text",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["key","sync.attr.term.dhis2Option"],["key","sync.attr.term.targetOrgUnitGroup"],[3,"ngModel","ngModelOptions","ngModelChange"],["type","text",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div"),r.ɵɵtemplate(1,p,9,3,"div",0),r.ɵɵtemplate(2,q,25,4,"div",0),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(1),r.ɵɵproperty("ngIf",null!=t.cOrg),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",null!=t.config.configuration.hierarchyCode))},directives:[a.NgIf,l.LocalizeComponent,s.SelectControlValueAccessor,s.RequiredValidator,s.NgControlStatus,s.NgModel,s.NgSelectOption,s.ɵangular_packages_forms_forms_z,a.NgForOf],pipes:[c.LocalizePipe],encapsulation:2}),e}();t.Dhis2SynchronizationConfigComponent=$,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata($,[{type:i.Component,args:[{selector:"dhis2-synchronization-config",templateUrl:"./dhis2-synchronization-config.component.html",styleUrls:[]}]}],(function(){return[{type:o.SynchronizationConfigService}]}),{config:[{type:i.Input}],cOrg:[{type:i.Input}],fieldChange:[{type:i.Input}],onError:[{type:i.Output}]})},1112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronizationConfigManagerComponent=void 0;var i=n(0),r=(n(57),n(56),n(25),n(547)),o=n(193),a=(n(1015),n(1113)),l=n(0),s=n(1015),c=n(25),d=n(57),p=n(56),u=n(221),m=n(139),g=n(88),h=n(1),f=n(381);function y(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"tr",15),l.ɵɵelementStart(1,"td",16),l.ɵɵelementStart(2,"a",17),l.ɵɵtext(3),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(4,"td",18),l.ɵɵelementStart(5,"button",13),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=t.$implicit;return l.ɵɵnextContext().onView(e)})),l.ɵɵelement(6,"localize",19),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"button",20),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=t.$implicit;return l.ɵɵnextContext().onEdit(e)})),l.ɵɵelement(8,"localize",21),l.ɵɵelementEnd(),l.ɵɵelementStart(9,"button",22),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=t.$implicit;return l.ɵɵnextContext().onRemove(e)})),l.ɵɵelement(10,"localize",23),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var i=t.$implicit;l.ɵɵadvance(2),l.ɵɵproperty("routerLink","/registry/synchronization-config/"+i.oid),l.ɵɵadvance(1),l.ɵɵtextInterpolate1(" ",i.label.localizedValue," ")}}var v=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}},b=function(){function e(e,t,n,i){this.service=e,this.lService=t,this.router=n,this.modalService=i,this.message=null,this.page={resultSet:[],count:0,pageNumber:1,pageSize:20}}return e.prototype.ngOnInit=function(){this.onPageChange(1)},e.prototype.onPageChange=function(e){var t=this;this.service.getPage(e,this.page.pageSize).then((function(e){t.page=e})).catch((function(e){t.error(e)}))},e.prototype.create=function(){var e=this;this.service.edit(null).then((function(t){var n=e.modalService.show(a.SynchronizationConfigModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});n.content.init(null,t.orgs),n.content.onSuccess.subscribe((function(){e.onPageChange(e.page.pageNumber)}))}))},e.prototype.onEdit=function(e){var t=this;this.service.edit(e.oid).then((function(e){var n=t.modalService.show(a.SynchronizationConfigModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});n.content.init(e.config,e.orgs),n.content.onSuccess.subscribe((function(){t.onPageChange(t.page.pageNumber)}))}))},e.prototype.onRemove=function(e){var t=this;this.bsModalRef=this.modalService.show(o.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.lService.decode("confirm.modal.verify.delete")+" ["+e.label.localizedValue+"]",this.bsModalRef.content.submitText=this.lService.decode("modal.button.delete"),this.bsModalRef.content.type=r.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(){t.service.remove(e.oid).then((function(){t.onPageChange(t.page.pageNumber)})).catch((function(e){t.error(e)}))}))},e.prototype.onView=function(e){this.router.navigate(["/registry/synchronization-config/",e.oid])},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.SynchronizationConfigService),l.ɵɵdirectiveInject(c.LocalizationService),l.ɵɵdirectiveInject(d.Router),l.ɵɵdirectiveInject(p.BsModalService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["synchronization-config-manager"]],decls:22,vars:8,consts:[[1,"new-admin-design-main"],[1,"container-fluid"],[1,"heading"],["key","synchronization.config.manager"],[1,"row"],[1,"col-md-12","order-md-1"],[1,"table"],[2,"width","70%"],["key","synchronization.config.label"],["class","clickable",4,"ngFor","ngForOf"],[3,"pageChange"],[1,"row",2,"margin-top","30px","margin-bottom","30px"],[1,"col-md-6"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","hierarchy.management.button.create"],[1,"clickable"],[2,"width","70%","vertical-align","middle"],["routerLinkActive","active",3,"routerLink"],[2,"width","30%","text-align","right"],["key","modal.button.view"],["type","submit","role","button",1,"btn","btn-default",2,"margin-left","5px",3,"click"],["key","modal.button.edit"],["type","submit","role","button",1,"btn","btn-danger",2,"margin-left","5px",3,"click"],["key","modal.button.delete"]],template:function(e,t){1&e&&(l.ɵɵelementStart(0,"div",0),l.ɵɵelement(1,"cgr-header"),l.ɵɵelement(2,"loading-bar"),l.ɵɵelementStart(3,"div",1),l.ɵɵelementStart(4,"div",2),l.ɵɵelementStart(5,"h2"),l.ɵɵelement(6,"localize",3),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"div",4),l.ɵɵelementStart(8,"div",5),l.ɵɵelementStart(9,"table",6),l.ɵɵelementStart(10,"thead"),l.ɵɵelementStart(11,"tr"),l.ɵɵelementStart(12,"th",7),l.ɵɵelement(13,"localize",8),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(14,"tbody"),l.ɵɵtemplate(15,y,11,2,"tr",9),l.ɵɵpipe(16,"paginate"),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(17,"pagination-controls",10),l.ɵɵlistener("pageChange",(function(e){return t.onPageChange(e)})),l.ɵɵelementEnd(),l.ɵɵelementStart(18,"div",11),l.ɵɵelementStart(19,"div",12),l.ɵɵelementStart(20,"button",13),l.ɵɵlistener("click",(function(){return t.create()})),l.ɵɵelement(21,"localize",14),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e&&(l.ɵɵadvance(15),l.ɵɵproperty("ngForOf",l.ɵɵpipeBind2(16,1,t.page.resultSet,l.ɵɵpureFunction3(4,v,t.page.pageSize,t.page.pageNumber,t.page.count))))},directives:[u.CgrHeaderComponent,m.LoadingBarComponent,g.LocalizeComponent,h.NgForOf,f.PaginationControlsComponent,d.RouterLinkWithHref,d.RouterLinkActive],pipes:[f.PaginatePipe],encapsulation:2}),e}();t.SynchronizationConfigManagerComponent=b,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(b,[{type:i.Component,args:[{selector:"synchronization-config-manager",templateUrl:"./synchronization-config-manager.component.html",styleUrls:[]}]}],(function(){return[{type:s.SynchronizationConfigService},{type:c.LocalizationService},{type:d.Router},{type:p.BsModalService}]}),null)},1113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronizationConfigModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=(n(25),n(193)),a=(n(1015),n(0)),l=n(1015),s=n(25),c=n(56),d=n(1),p=n(88),u=n(18),m=n(545),g=n(1111),h=n(1110),f=n(1114),y=n(162);function v(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",19),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function b(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",7),a.ɵɵelementStart(1,"div",8),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",20),a.ɵɵtext(4," ("),a.ɵɵelement(5,"convert-key-label",21),a.ɵɵtext(6,") "),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(7,"div",10),a.ɵɵelementStart(8,"input",22),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵadvance(5),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("name","label-"+n.locale)("required","defaultLocale"===n.locale)}}function S(e,t){if(1&e&&(a.ɵɵelementStart(0,"option",23),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵproperty("value",n.code),a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.label)}}function C(e,t){if(1&e&&(a.ɵɵelementStart(0,"option",23),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵproperty("value",n.oid),a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.label)}}function E(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",7),a.ɵɵelementStart(1,"div",8),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",24),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(4,"div",10),a.ɵɵelementStart(5,"span",11),a.ɵɵelementStart(6,"select",25),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().config.system=e}))("change",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onChangeExternalSystem()})),a.ɵɵelement(7,"option"),a.ɵɵtemplate(8,C,2,2,"option",13),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(6),a.ɵɵproperty("ngModel",i.config.system)("disabled",null!=i.config.oid),a.ɵɵadvance(2),a.ɵɵproperty("ngForOf",i.cOrg.systems)}}function x(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div"),a.ɵɵelementStart(1,"dhis2-synchronization-config",26),a.ɵɵlistener("configChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().config=e}))("onError",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().error(e)})),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("config",i.config)("cOrg",i.cOrg)("fieldChange",i.fieldChange)}}function O(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"fhir-export-synchronization-config",31),a.ɵɵlistener("configChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).config=e}))("onError",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).error(e)})),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext(2);a.ɵɵproperty("config",i.config)("fieldChange",i.fieldChange)}}function I(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"fhir-import-synchronization-config",31),a.ɵɵlistener("configChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).config=e}))("onError",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).error(e)})),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext(2);a.ɵɵproperty("config",i.config)("fieldChange",i.fieldChange)}}function M(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div"),a.ɵɵelementStart(1,"div",7),a.ɵɵelementStart(2,"div",8),a.ɵɵelementStart(3,"label"),a.ɵɵtext(4,"Synchronization Type"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"div",10),a.ɵɵelementStart(6,"div",27),a.ɵɵelementStart(7,"label",28),a.ɵɵelementStart(8,"input",29),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().config.isImport=e})),a.ɵɵelementEnd(),a.ɵɵelementStart(9,"span"),a.ɵɵtext(10,"Export"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(11,"label",28),a.ɵɵelementStart(12,"input",29),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().config.isImport=e})),a.ɵɵelementEnd(),a.ɵɵelementStart(13,"span"),a.ɵɵtext(14,"Import"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(15,O,1,2,"fhir-export-synchronization-config",30),a.ɵɵtemplate(16,I,1,2,"fhir-import-synchronization-config",30),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(8),a.ɵɵproperty("ngModel",i.config.isImport)("checked",!i.config.isImport)("value",!1),a.ɵɵadvance(4),a.ɵɵproperty("ngModel",i.config.isImport)("checked",i.config.isImport)("value",!0),a.ɵɵadvance(3),a.ɵɵproperty("ngIf",!0!==i.config.isImport),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!0===i.config.isImport)}}var w=function(){function e(e,t,n){this.service=e,this.lService=t,this.bsModalRef=n,this.message=null,this.config={organization:null,system:null,hierarchy:null,isImport:!1,label:this.lService.create(),configuration:{}},this.organizations=[],this.cOrg=null,this.cSystem=null}return e.prototype.ngOnInit=function(){this.onSuccess=new r.Subject,this.fieldChange=new r.Subject},e.prototype.ngOnDestroy=function(){this.onSuccess.unsubscribe(),this.fieldChange.unsubscribe()},e.prototype.init=function(e,t){var n=this;if(this.organizations=t,null!=e){this.config=e;var i=this.organizations.findIndex((function(e){return e.code===n.config.organization}));-1!==i&&(this.cOrg=this.organizations[i]);var r=this.cOrg.systems.findIndex((function(e){return e.oid===n.config.system}));-1!==r&&(this.cSystem=this.cOrg.systems[r])}},e.prototype.handleFieldChange=function(e){this.fieldChange.next(e)},e.prototype.onOrganizationSelected=function(){var e=this,t=this.organizations.findIndex((function(t){return t.code===e.config.organization}));this.cOrg=-1!==t?this.organizations[t]:null,this.cSystem=null,this.handleFieldChange("organization")},e.prototype.onChangeExternalSystem=function(){var e=this,t=this.cOrg.systems.findIndex((function(t){return t.oid===e.config.system}));this.cSystem=-1!==t?this.cOrg.systems[t]:null,this.handleFieldChange("system")},e.prototype.onSubmit=function(){var e=this;this.service.apply(this.config).then((function(t){e.onSuccess.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.cancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.SynchronizationConfigService),a.ɵɵdirectiveInject(s.LocalizationService),a.ɵɵdirectiveInject(c.BsModalRef))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["synchronization-config-modal"]],decls:29,vars:15,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"text-center"],["key","synchronization.config.title"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],["class","row-holder",4,"ngFor","ngForOf"],[1,"row-holder"],[1,"label-holder"],["key","synchronization.config.organization"],[1,"holder"],[1,"select"],["type","text","name","organization","required","",3,"ngModel","disabled","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","row-holder",4,"ngIf"],[4,"ngIf"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"value","click"],["type","submit",1,"btn","btn-primary",3,"value","disabled"],["role","alert",1,"alert","alert-danger"],["key","synchronization.config.label"],[3,"key"],["type","text",1,"form-control",3,"ngModel","name","required","ngModelChange"],[3,"value"],["key","synchronization.config.system"],["type","text","name","system","required","",3,"ngModel","disabled","ngModelChange","change"],[3,"config","cOrg","fieldChange","configChange","onError"],[1,"col-md-3",2,"display","flex","align-items","center"],[1,"radio-inline","radio"],["type","radio","name","isImport",1,"inline-radio-input",2,"height","auto",3,"ngModel","checked","value","ngModelChange"],[3,"config","fieldChange","configChange","onError",4,"ngIf"],[3,"config","fieldChange","configChange","onError"]],template:function(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,v,2,1,"div",1),a.ɵɵelementStart(2,"div",2),a.ɵɵelementStart(3,"h2"),a.ɵɵelement(4,"localize",3),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"form",4,5),a.ɵɵlistener("ngSubmit",(function(){return a.ɵɵrestoreView(n),a.ɵɵreference(6).valid&&t.onSubmit()})),a.ɵɵelementStart(7,"fieldset"),a.ɵɵtemplate(8,b,9,4,"div",6),a.ɵɵelementStart(9,"div",7),a.ɵɵelementStart(10,"div",8),a.ɵɵelementStart(11,"label"),a.ɵɵelement(12,"localize",9),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(13,"div",10),a.ɵɵelementStart(14,"span",11),a.ɵɵelementStart(15,"select",12),a.ɵɵlistener("ngModelChange",(function(e){return t.config.organization=e}))("change",(function(){return t.onOrganizationSelected()})),a.ɵɵelement(16,"option"),a.ɵɵtemplate(17,S,2,2,"option",13),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(18,E,9,3,"div",14),a.ɵɵtemplate(19,x,2,3,"div",15),a.ɵɵtemplate(20,M,17,8,"div",15),a.ɵɵelementStart(21,"div",7),a.ɵɵelement(22,"div",8),a.ɵɵelementStart(23,"div",10),a.ɵɵelementStart(24,"div",16),a.ɵɵelementStart(25,"input",17),a.ɵɵlistener("click",(function(){return t.cancel()})),a.ɵɵpipe(26,"localize"),a.ɵɵelementEnd(),a.ɵɵelement(27,"input",18),a.ɵɵpipe(28,"localize"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵreference(6);a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(7),a.ɵɵproperty("ngForOf",t.config.label.localeValues),a.ɵɵadvance(7),a.ɵɵproperty("ngModel",t.config.organization)("disabled",null!=t.config.oid),a.ɵɵadvance(2),a.ɵɵproperty("ngForOf",t.organizations),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.cOrg),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.cSystem&&"DHIS2ExternalSystem"===t.cSystem.type),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.cSystem&&"FhirExternalSystem"===t.cSystem.type),a.ɵɵadvance(5),a.ɵɵproperty("value",a.ɵɵpipeBind1(26,11,"dataset.cancel")),a.ɵɵadvance(2),a.ɵɵproperty("value",a.ɵɵpipeBind1(28,13,"dataset.submit"))("disabled",!i.valid)}},directives:[d.NgIf,p.LocalizeComponent,u.ɵangular_packages_forms_forms_ba,u.NgControlStatusGroup,u.NgForm,d.NgForOf,u.SelectControlValueAccessor,u.RequiredValidator,u.NgControlStatus,u.NgModel,u.NgSelectOption,u.ɵangular_packages_forms_forms_z,m.ConvertKeyLabel,u.DefaultValueAccessor,g.Dhis2SynchronizationConfigComponent,u.RadioControlValueAccessor,h.FhirExportSynchronizationConfigComponent,f.FhirImportSynchronizationConfigComponent],pipes:[y.LocalizePipe],encapsulation:2}),e}();t.SynchronizationConfigModalComponent=w,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(w,[{type:i.Component,args:[{selector:"synchronization-config-modal",templateUrl:"./synchronization-config-modal.component.html",styleUrls:[]}]}],(function(){return[{type:l.SynchronizationConfigService},{type:s.LocalizationService},{type:c.BsModalRef}]}),null)},1114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FhirImportSynchronizationConfigComponent=void 0;var i=n(0),r=(n(44),n(378),n(1015),n(0)),o=n(1015),a=n(88),l=n(18),s=n(1);function c(e,t){if(1&e&&(r.ɵɵelementStart(0,"option",6),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("value",n.className),r.ɵɵadvance(1),r.ɵɵtextInterpolate1(" ",n.label," ")}}var d=function(){function e(e){this.service=e,this.message=null,this.onError=new i.EventEmitter,this.subscription=null,this.implementations=[]}return e.prototype.ngOnInit=function(){var e=this;this.reset(),this.subscription=this.fieldChange.subscribe((function(t){"organization"!==t&&"system"!==t||e.reset()})),this.service.getFhirImportImplementations().then((function(t){e.implementations=t}))},e.prototype.ngOnDestroy=function(){null!=this.subscription&&this.subscription.unsubscribe()},e.prototype.reset=function(){null==this.config.configuration&&(this.config.configuration={implementation:null})},e.prototype.error=function(e){this.onError.emit(e)},e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(o.SynchronizationConfigService))},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["fhir-import-synchronization-config"]],inputs:{config:"config",fieldChange:"fieldChange"},outputs:{onError:"onError"},decls:8,vars:2,consts:[[1,"row-holder"],[1,"label-holder"],["key","synchronization.config.implementation"],[1,"holder"],["name","implementation","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div",0),r.ɵɵelementStart(1,"div",1),r.ɵɵelementStart(2,"label"),r.ɵɵelement(3,"localize",2),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(4,"div",3),r.ɵɵelementStart(5,"select",4),r.ɵɵlistener("ngModelChange",(function(e){return t.config.configuration.implementation=e})),r.ɵɵelement(6,"option"),r.ɵɵtemplate(7,c,2,2,"option",5),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(5),r.ɵɵproperty("ngModel",t.config.configuration.implementation),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",t.implementations))},directives:[a.LocalizeComponent,l.SelectControlValueAccessor,l.RequiredValidator,l.NgControlStatus,l.NgModel,l.NgSelectOption,l.ɵangular_packages_forms_forms_z,s.NgForOf],encapsulation:2}),e}();t.FhirImportSynchronizationConfigComponent=d,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(d,[{type:i.Component,args:[{selector:"fhir-import-synchronization-config",templateUrl:"./fhir-import-synchronization-config.component.html",styleUrls:[]}]}],(function(){return[{type:o.SynchronizationConfigService}]}),{config:[{type:i.Input}],fieldChange:[{type:i.Input}],onError:[{type:i.Output}]})},1115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronizationConfigComponent=void 0;var i=n(0),r=(n(57),n(861)),o=(n(25),n(1015),n(385)),a=n(1036),l=n(0),s=n(1015),c=n(25),d=n(57),p=n(221),u=n(139),m=n(1),g=n(18),h=n(88),f=n(1068),y=n(381),v=n(162);function b(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",5),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.message)}}function S(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"button",25),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext(2).onGenerateFile()})),l.ɵɵpipe(1,"localize"),l.ɵɵelement(2,"localize",26),l.ɵɵelementEnd()}2&e&&l.ɵɵproperty("title",l.ɵɵpipeBind1(1,1,"synchronization.config.run"))}function C(e,t){1&e&&l.ɵɵelement(0,"localize",27)}function E(e,t){1&e&&l.ɵɵelement(0,"localize",37)}function x(e,t){1&e&&l.ɵɵelement(0,"localize",38)}function O(e,t){1&e&&l.ɵɵelement(0,"localize",39)}function I(e,t){if(1&e&&(l.ɵɵelementStart(0,"tr"),l.ɵɵelementStart(1,"td",9),l.ɵɵelement(2,"localize",29),l.ɵɵtext(3),l.ɵɵelementEnd(),l.ɵɵelementStart(4,"td"),l.ɵɵtext(5),l.ɵɵelementEnd(),l.ɵɵelementStart(6,"td",31),l.ɵɵtemplate(7,C,1,0,"localize",33),l.ɵɵtemplate(8,E,1,0,"localize",34),l.ɵɵtemplate(9,x,1,0,"localize",35),l.ɵɵtemplate(10,O,1,0,"localize",36),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=t.$implicit,i=t.index;l.ɵɵadvance(3),l.ɵɵtextInterpolate1(" ",i+1," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.geoObjectType," "),l.ɵɵadvance(2),l.ɵɵproperty("ngIf","ORG_UNITS"===n.type),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","RELATIONSHIPS"===n.type),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","ALL"===n.type),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","NONE"===n.type)}}function M(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",3),l.ɵɵelementStart(1,"div",6),l.ɵɵelementStart(2,"h4"),l.ɵɵelement(3,"localize",27),l.ɵɵelementEnd(),l.ɵɵelementStart(4,"table",28),l.ɵɵelementStart(5,"thead"),l.ɵɵelementStart(6,"tr"),l.ɵɵelementStart(7,"th"),l.ɵɵelement(8,"localize",29),l.ɵɵelementEnd(),l.ɵɵelementStart(9,"th"),l.ɵɵelement(10,"localize",30),l.ɵɵelementEnd(),l.ɵɵelementStart(11,"th",31),l.ɵɵelement(12,"localize",32),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(13,"tbody"),l.ɵɵtemplate(14,I,11,6,"tr",23),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext(2);l.ɵɵadvance(14),l.ɵɵproperty("ngForOf",n.config.configuration.levels)}}function w(e,t){if(1&e&&(l.ɵɵelementStart(0,"tr"),l.ɵɵelementStart(1,"td",9),l.ɵɵelement(2,"localize",29),l.ɵɵtext(3),l.ɵɵelementEnd(),l.ɵɵelementStart(4,"td"),l.ɵɵtext(5),l.ɵɵelementEnd(),l.ɵɵelementStart(6,"td",31),l.ɵɵtext(7),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=t.$implicit,i=t.index;l.ɵɵadvance(3),l.ɵɵtextInterpolate1(" ",i+1," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.typeLabel," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.forDate," ")}}function T(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",3),l.ɵɵelementStart(1,"div",6),l.ɵɵelementStart(2,"h4"),l.ɵɵelement(3,"localize",27),l.ɵɵelementEnd(),l.ɵɵelementStart(4,"table",28),l.ɵɵelementStart(5,"thead"),l.ɵɵelementStart(6,"tr"),l.ɵɵelementStart(7,"th"),l.ɵɵelement(8,"localize",29),l.ɵɵelementEnd(),l.ɵɵelementStart(9,"th"),l.ɵɵelement(10,"localize",40),l.ɵɵelementEnd(),l.ɵɵelementStart(11,"th",31),l.ɵɵelement(12,"localize",41),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(13,"tbody"),l.ɵɵtemplate(14,w,8,3,"tr",23),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext(2);l.ɵɵadvance(14),l.ɵɵproperty("ngForOf",n.config.configuration.levels)}}function k(e,t){if(1&e&&(l.ɵɵelementStart(0,"span",45),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext().$implicit;l.ɵɵadvance(1),l.ɵɵtextInterpolate1(" ",n.exception.message," ")}}function P(e,t){if(1&e&&l.ɵɵelement(0,"step-indicator",53),2&e){var n=l.ɵɵnextContext().$implicit;l.ɵɵproperty("steps",n.stepConfig)}}function j(e,t){if(1&e&&(l.ɵɵelementStart(0,"tr"),l.ɵɵelementStart(1,"td",9),l.ɵɵelementStart(2,"div",42),l.ɵɵelement(3,"i",43),l.ɵɵelementStart(4,"p",44),l.ɵɵelementStart(5,"span",45),l.ɵɵtext(6),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"span",45),l.ɵɵtext(8),l.ɵɵelementEnd(),l.ɵɵelementStart(9,"span",45),l.ɵɵtext(10),l.ɵɵelementEnd(),l.ɵɵtemplate(11,k,2,1,"span",46),l.ɵɵelementEnd(),l.ɵɵtemplate(12,P,1,1,"step-indicator",47),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(13,"td",48),l.ɵɵelementStart(14,"div",49),l.ɵɵelementStart(15,"a",50),l.ɵɵelementStart(16,"button",51),l.ɵɵelement(17,"localize",52),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=t.$implicit,i=l.ɵɵnextContext(2);l.ɵɵadvance(6),l.ɵɵtextInterpolate1(" ",n.fileName," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.createDate," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",i.formatJobStatus(n)," "),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",null!=n.exception&&"java.lang.RuntimeException"!=n.exception.type),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","SUCCESS"!==n.status&&"FAILURE"!==n.status&&"CANCELED"!==n.status),l.ɵɵadvance(3),l.ɵɵproperty("routerLink","/registry/sync/details/"+i.config.oid+"/"+n.historyId)}}function z(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",54),l.ɵɵelementStart(1,"pagination-controls",55),l.ɵɵlistener("pageChange",(function(e){return l.ɵɵrestoreView(n),l.ɵɵnextContext(2).onPageChange(e)})),l.ɵɵelementEnd(),l.ɵɵelementEnd()}}var D=function(e,t){return{"fa-long-arrow-right":e,"fa-long-arrow-left":t}},R=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}};function L(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",6),l.ɵɵelementStart(1,"div",3),l.ɵɵelementStart(2,"div",6),l.ɵɵelementStart(3,"h3"),l.ɵɵtext(4),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(5,"div",7),l.ɵɵelementStart(6,"div",3),l.ɵɵelementStart(7,"div",8),l.ɵɵelementStart(8,"label",9),l.ɵɵtext(9,"CGR"),l.ɵɵelementEnd(),l.ɵɵelement(10,"i",10),l.ɵɵelementStart(11,"label",9),l.ɵɵtext(12),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(13,"div",11),l.ɵɵelementStart(14,"div",12),l.ɵɵelementStart(15,"form"),l.ɵɵelementStart(16,"button",13),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().onRun()})),l.ɵɵpipe(17,"localize"),l.ɵɵelement(18,"localize",14),l.ɵɵelementEnd(),l.ɵɵtemplate(19,S,3,3,"button",15),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(20,M,15,1,"div",16),l.ɵɵtemplate(21,T,15,1,"div",16),l.ɵɵelementStart(22,"div",3),l.ɵɵelementStart(23,"div",17),l.ɵɵelementStart(24,"ul",18),l.ɵɵelementStart(25,"div",19),l.ɵɵelementStart(26,"table",20),l.ɵɵelementStart(27,"thead"),l.ɵɵelementStart(28,"tr",21),l.ɵɵelementStart(29,"th",9),l.ɵɵelement(30,"localize",22),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(31,"tbody"),l.ɵɵtemplate(32,j,18,6,"tr",23),l.ɵɵpipe(33,"paginate"),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(34,z,2,0,"div",24),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var i=l.ɵɵnextContext();l.ɵɵadvance(4),l.ɵɵtextInterpolate(i.config.label.localizedValue),l.ɵɵadvance(6),l.ɵɵproperty("ngClass",l.ɵɵpureFunction2(14,D,!i.config.isImport,i.config.isImport)),l.ɵɵadvance(2),l.ɵɵtextInterpolate(i.config.systemLabel),l.ɵɵadvance(4),l.ɵɵproperty("title",l.ɵɵpipeBind1(17,9,"synchronization.config.run")),l.ɵɵadvance(3),l.ɵɵproperty("ngIf",null!=i.config&&"FhirExternalSystem"===i.config.type&&!i.config.isImport),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",null!=i.config&&"DHIS2ExternalSystem"===i.config.type),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",null!=i.config&&"FhirExternalSystem"===i.config.type&&!i.config.isImport),l.ɵɵadvance(11),l.ɵɵproperty("ngForOf",l.ɵɵpipeBind2(33,11,i.page.resultSet,l.ɵɵpureFunction3(17,R,i.page.pageSize,i.page.pageNumber,i.page.count))),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",i.page.resultSet.length>0)}}var _=function(){function e(e,t,n){this.service=e,this.lService=t,this.route=n,this.message=null,this.config=null,this.page={pageSize:10,pageNumber:1,count:1,resultSet:[]},this.subscription=null}return e.prototype.ngOnInit=function(){var e=this,t=this.route.snapshot.paramMap.get("oid");this.service.get(t).then((function(t){e.config=t,e.onPageChange(1)}));var n=a.WebSockets.buildBaseUrl();this.notifier=r.webSocket(n+"/websocket/notify"),this.subscription=this.notifier.subscribe((function(t){"DATA_EXPORT_JOB_CHANGE"===t.type&&e.onPageChange(e.page.pageNumber)}))},e.prototype.ngOnDestroy=function(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.notifier&&this.notifier.complete()},e.prototype.onRun=function(){var e=this;this.message=null,this.service.run(this.config.oid).then((function(){e.onPageChange(e.page.pageNumber)})).catch((function(t){e.error(t)}))},e.prototype.onGenerateFile=function(){window.open(registry.contextPath+"/synchronization-config/generate-file?oid="+encodeURIComponent(this.config.oid))},e.prototype.onPageChange=function(e){var t=this;null!=this.config&&(this.message=null,this.service.getJobs(this.config.oid,e,this.page.pageSize).then((function(e){t.formatStepConfig(e),t.page=e})).catch((function(e){t.error(e)})))},e.prototype.formatJobStatus=function(e){return"FEEDBACK"===e.status?this.lService.decode("etl.JobStatus.FEEDBACK"):"RUNNING"===e.status||"NEW"===e.status?this.lService.decode("etl.JobStatus.RUNNING"):"QUEUED"===e.status?this.lService.decode("etl.JobStatus.QUEUED"):"SUCCESS"===e.status?this.lService.decode("etl.JobStatus.SUCCESS"):"CANCELED"===e.status?this.lService.decode("etl.JobStatus.CANCELED"):"FAILURE"===e.status?this.lService.decode("etl.JobStatus.FAILURE"):this.lService.decode("etl.JobStatus.RUNNING")},e.prototype.formatStepConfig=function(e){var t=this;e.resultSet.forEach((function(e){var n=[{label:t.lService.decode("synchronization.step.Queued"),status:"NEW"===e.stage?t.getJobStatus(e):t.getCompletedStatus(e.stage,"NEW")},{label:t.lService.decode("synchronization.step.Connecting"),status:"CONNECTING"===e.stage||"CONNECTION_FAILED"===e.stage?t.getJobStatus(e):t.getCompletedStatus(e.stage,"CONNECTION_FAILED")}],i=t.config.isImport?"Importing":t.lService.decode("synchronization.step.DatabaseExport");n.push({label:i,status:"EXPORT"===e.stage||"EXPORT_RESOLVE"===e.stage||"RESUME_EXPORT"===e.stage?t.getJobStatus(e):""}),e.stepConfig={steps:n}}))},e.prototype.getCompletedStatus=function(e,t){var n=["CONNECTING","CONNECTION_FAILED","EXPORT","EXPORT_RESOLVE","RESUME_EXPORT"],i=n.indexOf(e);return n.indexOf(t)<i?"COMPLETE":""},e.prototype.getJobStatus=function(e){return"QUEUED"===e.status||"RUNNING"===e.status?"WORKING":"FEEDBACK"===e.status||"FAILURE"===e.status?"STUCK":""},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.SynchronizationConfigService),l.ɵɵdirectiveInject(c.LocalizationService),l.ɵɵdirectiveInject(d.ActivatedRoute))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["synchronization-config"]],decls:7,vars:2,consts:[[1,"new-admin-design-main"],[1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"row"],["class","col-md-12",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"col-md-12"],[1,"inner-col-content-wrapper",2,"padding-top","30px","margin-top","10px"],[1,"col-md-8"],[2,"vertical-align","middle"],["aria-hidden","true",1,"fa",2,"font-size","23px","padding","0 7px","vertical-align","middle","color","#bdbdbd","margin-bottom","4px",3,"ngClass"],[1,"col-md-4"],[1,"form-group","text-right",2,"margin","0"],["type","submit","role","button",1,"btn","btn-primary",2,"margin-left","15px",3,"title","click"],["key","synchronization.config.run"],["type","submit","style","margin-left: 15px;","class","btn btn-secondary","role","button",3,"title","click",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-md-12","order-md-1"],[1,"list-group"],[1,"solid-table-wrapper"],[1,"table","table-striped"],[2,"height","56px"],["key","masterlist.jobs"],[4,"ngFor","ngForOf"],["class","solid-table-footer",4,"ngIf"],["type","submit","role","button",1,"btn","btn-secondary",2,"margin-left","15px",3,"title","click"],["key","synchronization.config.generateBundle"],["key","synchronization.config.units"],[1,"table"],["key","settings.external.synchronization.level.label"],["key","settings.external.synchronization.geoobjecttype.label"],[2,"text-align","right"],["key","settings.external.synchronization.dhis2.synch.type.label"],["key","synchronization.config.units",4,"ngIf"],["key","synchronization.config.relationships",4,"ngIf"],["key","synchronization.config.all",4,"ngIf"],["key","synchronization.config.none",4,"ngIf"],["key","synchronization.config.relationships"],["key","synchronization.config.all"],["key","synchronization.config.none"],["key","masterlist.field"],["key","masterlist.forDate"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","40px"],[2,"padding-left","60px"],[2,"display","block"],["style","display: block;",4,"ngIf"],[3,"steps",4,"ngIf"],[2,"text-align","right","vertical-align","middle"],[1,"button-holder",2,"float","right"],["routerLinkActive","active",3,"routerLink"],["role","button",1,"btn","btn-primary"],["key","scheduledjobs.detail.button"],[3,"steps"],[1,"solid-table-footer"],[3,"pageChange"]],template:function(e,t){1&e&&(l.ɵɵelementStart(0,"div",0),l.ɵɵelement(1,"cgr-header"),l.ɵɵelement(2,"loading-bar"),l.ɵɵelementStart(3,"div",1),l.ɵɵtemplate(4,b,2,1,"div",2),l.ɵɵelementStart(5,"div",3),l.ɵɵtemplate(6,L,35,21,"div",4),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e&&(l.ɵɵadvance(4),l.ɵɵproperty("ngIf",null!=t.message),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",null!=t.config))},directives:[p.CgrHeaderComponent,u.LoadingBarComponent,m.NgIf,m.NgClass,g.ɵangular_packages_forms_forms_ba,g.NgControlStatusGroup,g.NgForm,h.LocalizeComponent,m.NgForOf,d.RouterLinkWithHref,d.RouterLinkActive,f.StepIndicatorComponent,y.PaginationControlsComponent],pipes:[v.LocalizePipe,y.PaginatePipe],encapsulation:2}),e}();t.SynchronizationConfigComponent=_,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(_,[{type:i.Component,args:[{selector:"synchronization-config",templateUrl:"./synchronization-config.component.html",styleUrls:[]}]}],(function(){return[{type:s.SynchronizationConfigService},{type:c.LocalizationService},{type:d.ActivatedRoute}]}),null)},1116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncDetailsComponent=void 0;var i=n(0),r=(n(57),n(193)),o=(n(1015),n(0)),a=n(1015),l=n(57),s=n(221),c=n(139),d=n(1),p=n(88),u=n(381);function m(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",7),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵtextInterpolate(n.message)}}function g(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",8),o.ɵɵelementStart(1,"div",9),o.ɵɵelementStart(2,"div",10),o.ɵɵelement(3,"i",11),o.ɵɵelementStart(4,"p",12),o.ɵɵelementStart(5,"span",13),o.ɵɵelement(6,"localize",14),o.ɵɵtext(7),o.ɵɵelementEnd(),o.ɵɵelementStart(8,"span",13),o.ɵɵelement(9,"localize",15),o.ɵɵtext(10),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(11,"div",16),o.ɵɵelementStart(12,"div"),o.ɵɵelementStart(13,"h5"),o.ɵɵelementStart(14,"b"),o.ɵɵtext(15),o.ɵɵelement(16,"localize",17),o.ɵɵtext(17),o.ɵɵelement(18,"localize",18),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(19,"h5"),o.ɵɵtext(20),o.ɵɵelement(21,"localize",19),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(7),o.ɵɵtextInterpolate1(" ",n.job.author," "),o.ɵɵadvance(3),o.ɵɵtextInterpolate1(" ",n.job.createDate," "),o.ɵɵadvance(5),o.ɵɵtextInterpolate1("",n.job.exportedRecords," "),o.ɵɵadvance(2),o.ɵɵtextInterpolate1(" ",n.job.workTotal," "),o.ɵɵadvance(3),o.ɵɵtextInterpolate1("",n.job.workTotal-n.job.exportedRecords," ")}}function h(e,t){1&e&&(o.ɵɵelementStart(0,"span"),o.ɵɵelement(1,"localize",32),o.ɵɵtext(2," "),o.ɵɵelement(3,"localize",33),o.ɵɵelementEnd())}function f(e,t){1&e&&(o.ɵɵelementStart(0,"span"),o.ɵɵtext(1,"Resource"),o.ɵɵelementEnd())}function y(e,t){1&e&&(o.ɵɵelementStart(0,"th",25),o.ɵɵelement(1,"localize",34),o.ɵɵelementEnd())}function v(e,t){if(1&e&&(o.ɵɵelementStart(0,"td",35),o.ɵɵelementStart(1,"p"),o.ɵɵtext(2),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext().$implicit;o.ɵɵadvance(2),o.ɵɵtextInterpolate(n.rowNum)}}function b(e,t){if(1&e&&(o.ɵɵelementStart(0,"tr"),o.ɵɵelementStart(1,"td",35),o.ɵɵelementStart(2,"p"),o.ɵɵtext(3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"td",35),o.ɵɵelementStart(5,"p"),o.ɵɵtext(6),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵtemplate(7,v,3,1,"td",36),o.ɵɵelementEnd()),2&e){var n=t.$implicit,i=o.ɵɵnextContext(3);o.ɵɵadvance(3),o.ɵɵtextInterpolate(n.code),o.ɵɵadvance(3),o.ɵɵtextInterpolate(n.message),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null==i.config||!i.config.isImport)}}function S(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",30),o.ɵɵelementStart(1,"pagination-controls",37),o.ɵɵlistener("pageChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(3).onPageChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}}var C=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}};function E(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",22),o.ɵɵelementStart(1,"ul",23),o.ɵɵelementStart(2,"table",24),o.ɵɵelementStart(3,"thead"),o.ɵɵelementStart(4,"tr"),o.ɵɵelementStart(5,"th",25),o.ɵɵtemplate(6,h,4,0,"span",26),o.ɵɵtemplate(7,f,2,0,"span",26),o.ɵɵelementEnd(),o.ɵɵelementStart(8,"th",25),o.ɵɵelement(9,"localize",27),o.ɵɵelementEnd(),o.ɵɵtemplate(10,y,2,0,"th",28),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(11,"tbody"),o.ɵɵtemplate(12,b,8,3,"tr",29),o.ɵɵpipe(13,"paginate"),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(14,"div",30),o.ɵɵtemplate(15,S,2,0,"div",31),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext(2);o.ɵɵadvance(6),o.ɵɵproperty("ngIf",null==n.config||!n.config.isImport),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null!=n.config&&n.config.isImport),o.ɵɵadvance(3),o.ɵɵproperty("ngIf",null==n.config||!n.config.isImport),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",o.ɵɵpipeBind2(13,5,n.page.resultSet,o.ɵɵpureFunction3(8,C,n.page.pageSize,n.page.pageNumber,n.page.count))),o.ɵɵadvance(3),o.ɵɵproperty("ngIf",n.page.resultSet.length>0)}}function x(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",20),o.ɵɵtemplate(1,E,16,12,"div",21),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("ngIf",n.job)}}var O=function(){function e(e,t,n,i){this.configService=e,this.service=t,this.route=n,this.ioService=i,this.message=null,this.historyId="",this.config=null,this.page={count:0,pageNumber:1,pageSize:10,resultSet:[]}}return e.prototype.ngOnInit=function(){var e=this;this.historyId=this.route.snapshot.params.oid;var t=this.route.snapshot.paramMap.get("config");this.configService.get(t).then((function(t){e.config=t,e.onPageChange(1)}))},e.prototype.ngOnDestroy=function(){},e.prototype.formatAffectedRows=function(e){return e.replace(/,/g,", ")},e.prototype.formatValidationResolve=function(e){return JSON.stringify(e)},e.prototype.onPageChange=function(e){var t=this;this.message=null,this.service.getExportDetails(this.historyId,this.page.pageSize,e).then((function(e){t.job=e,t.page=t.job.exportErrors,e.exception&&e.exception.type&&-1===e.exception.type.indexOf("ExportJobHasErrors")&&t.error(e.exception)})).catch((function(e){t.error(e)}))},e.prototype.error=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.SynchronizationConfigService),o.ɵɵdirectiveInject(a.RegistryService),o.ɵɵdirectiveInject(l.ActivatedRoute),o.ɵɵdirectiveInject(a.IOService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["job"]],decls:10,vars:3,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"py-5"],["key","scheduledjobs.details.title"],["class","row","style","background: #F4F4F4;\n                                border-radius: 15px;\n                                margin-bottom: 20px;\n                                margin-top: 20px;\n                                padding: 10px;",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"row",2,"background","#F4F4F4","border-radius","15px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-4","order-md-1"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"],["key","scheduledjobs.job.uploaded.by.label"],["key","scheduledjobs.job.started.label"],[1,"col-md-3","order-md-1"],["key","scheduledjobs.job.imported.out.of.label"],["key","scheduledjobs.job.imported.total.label"],["key","scheduledjobs.job.remaining.label"],[1,"row"],["class","col-md-12 order-md-1",4,"ngIf"],[1,"col-md-12","order-md-1"],[1,"list-group"],[1,"list-table","table","table-bordered","table-striped"],[1,"label-column"],[4,"ngIf"],["key","scheduledjobs.import.table.message.header"],["class","label-column",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"solid-table-footer"],["class","solid-table-footer",4,"ngIf"],["key","geoObject.label"],["key","geoObjectType.attr.code"],["key","scheduledjobs.import.table.row.number.header"],[1,"label-column",2,"vertical-align","middle"],["class","label-column","style","vertical-align: middle;",4,"ngIf"],[3,"pageChange"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelement(1,"cgr-header"),o.ɵɵelement(2,"loading-bar"),o.ɵɵelementStart(3,"div",1),o.ɵɵtemplate(4,m,2,1,"div",2),o.ɵɵelementStart(5,"div",3),o.ɵɵelementStart(6,"h2"),o.ɵɵelement(7,"localize",4),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵtemplate(8,g,22,5,"div",5),o.ɵɵtemplate(9,x,2,1,"div",6),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(4),o.ɵɵproperty("ngIf",null!=t.message),o.ɵɵadvance(4),o.ɵɵproperty("ngIf",t.job),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.page&&t.page.resultSet.length>0))},directives:[s.CgrHeaderComponent,c.LoadingBarComponent,d.NgIf,p.LocalizeComponent,d.NgForOf,u.PaginationControlsComponent],pipes:[u.PaginatePipe],styles:[".new-admin-design-main[_ngcontent-%COMP%] {\n    \n}\n\n\n.solid-table-wrapper[_ngcontent-%COMP%] {\n    background: #F4F4F4;\n    border-radius: 15px;\n    margin-bottom: 20px;\n}\n.solid-table-footer[_ngcontent-%COMP%] {\n    \n    border-radius: 0 0 15px 15px;\n    padding: 0 0 10px 10px;\n}\n\n\n\n.wrapper[_ngcontent-%COMP%] {\n    padding: 10px;\n}"]}),e}();t.SyncDetailsComponent=O,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(O,[{type:i.Component,args:[{selector:"job",templateUrl:"./details.component.html",styleUrls:["./details.css"]}]}],(function(){return[{type:a.SynchronizationConfigService},{type:a.RegistryService},{type:l.ActivatedRoute},{type:a.IOService}]}),null)},1117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationManagerComponent=void 0;var i=n(0),r=n(1),o=(n(57),n(857)),a=(n(56),n(859)),l=n(1056),s=(n(1015),n(193)),c=(n(25),n(1016),n(197)),d=n(1118),p=n(544),u=(n(856),n(547)),m=(n(1119),n(1022),n(1120)),g=n(1020),h=(n(1069),n(291)),f=n(866),y=n(0),v=n(57),b=n(56),S=n(856),C=n(1015),E=n(1022),x=n(1016),O=n(25),I=n(1069),M=n(1),w=["simpleEditControl"],T=["FeaturePanel"];function k(e,t){if(1&e&&(y.ɵɵelementStart(0,"span"),y.ɵɵelement(1,"localize",18),y.ɵɵtext(2),y.ɵɵelementEnd()),2&e){var n=y.ɵɵnextContext().item;y.ɵɵadvance(2),y.ɵɵtextInterpolate1(" ",n.layer.versionNumber," ")}}function P(e,t){1&e&&y.ɵɵelement(0,"localize",19)}function j(e,t){if(1&e&&(y.ɵɵelementStart(0,"h5"),y.ɵɵtext(1),y.ɵɵelementEnd(),y.ɵɵelementStart(2,"h6"),y.ɵɵtext(3),y.ɵɵtemplate(4,k,3,1,"span",8),y.ɵɵtemplate(5,P,1,0,"localize",17),y.ɵɵtext(6," ) "),y.ɵɵelementEnd()),2&e){var n=t.item;y.ɵɵadvance(1),y.ɵɵtextInterpolate2("",n.name," : ",n.code,""),y.ɵɵadvance(2),y.ɵɵtextInterpolate2(" ",n.layer.label," - ",n.layer.forDate," ( "),y.ɵɵadvance(1),y.ɵɵproperty("ngIf",0!==n.layer.versionNumber),y.ɵɵadvance(1),y.ɵɵproperty("ngIf",0===n.layer.versionNumber)}}var z=function(e){return{detached:e}};function D(e,t){if(1&e){var n=y.ɵɵgetCurrentView();y.ɵɵelementStart(0,"div",6),y.ɵɵelementStart(1,"article",20),y.ɵɵelementContainerStart(2),y.ɵɵelementStart(3,"div",7),y.ɵɵelementStart(4,"div",21),y.ɵɵelement(5,"ngx-spinner",22),y.ɵɵelementStart(6,"date-field",23),y.ɵɵlistener("valueChange",(function(e){return y.ɵɵrestoreView(n),y.ɵɵnextContext().dateFieldValue=e})),y.ɵɵelementEnd(),y.ɵɵelementStart(7,"input",24),y.ɵɵlistener("keyup.enter",(function(){return y.ɵɵrestoreView(n),y.ɵɵnextContext().search()}))("ngModelChange",(function(e){return y.ɵɵrestoreView(n),y.ɵɵnextContext().searchFieldText=e})),y.ɵɵpipe(8,"localize"),y.ɵɵelementEnd(),y.ɵɵelementStart(9,"span",25),y.ɵɵelementStart(10,"button",26),y.ɵɵlistener("click",(function(){return y.ɵɵrestoreView(n),y.ɵɵnextContext().search()})),y.ɵɵelement(11,"span",27),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementContainerEnd(),y.ɵɵelementEnd(),y.ɵɵelementEnd()}if(2&e){var i=y.ɵɵnextContext();y.ɵɵadvance(1),y.ɵɵproperty("ngClass",y.ɵɵpureFunction1(13,z,0===i.data.length&&null==i.current)),y.ɵɵadvance(4),y.ɵɵproperty("fullScreen",!1)("name",i.CONSTANTS.SEARCH_OVERLAY),y.ɵɵadvance(1),y.ɵɵproperty("value",i.dateFieldValue)("inputName","date")("allowInfinity",!1)("allowFutureDates",!1)("required",!1),y.ɵɵadvance(1),y.ɵɵproperty("placeholder",y.ɵɵpipeBind1(8,11,"explorer.search.placeholder"))("ngModel",i.searchFieldText),y.ɵɵadvance(3),y.ɵɵproperty("disabled",i.isEdit)}}function R(e,t){if(1&e){var n=y.ɵɵgetCurrentView();y.ɵɵelementStart(0,"div",32),y.ɵɵelementStart(1,"div",33),y.ɵɵlistener("click",(function(){y.ɵɵrestoreView(n);var e=t.$implicit;return y.ɵɵnextContext(2).selectGeoObject(e)})),y.ɵɵelementStart(2,"div",34),y.ɵɵelementStart(3,"h4",35),y.ɵɵtext(4),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementStart(5,"div",36),y.ɵɵtext(6),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementEnd()}if(2&e){var i=t.$implicit;y.ɵɵadvance(4),y.ɵɵtextInterpolate2(" ",i.properties.code," - ",i.properties.displayLabel.localizedValue," "),y.ɵɵadvance(2),y.ɵɵtextInterpolate(i.properties.type)}}var L=function(e){return{"full-height-sidebar":e}};function _(e,t){if(1&e&&(y.ɵɵelementContainerStart(0),y.ɵɵelementStart(1,"div",6),y.ɵɵelementStart(2,"div",28),y.ɵɵelementStart(3,"div",29),y.ɵɵelementStart(4,"div",30),y.ɵɵtemplate(5,R,7,3,"div",31),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementContainerEnd()),2&e){var n=y.ɵɵnextContext();y.ɵɵadvance(2),y.ɵɵproperty("ngClass",y.ɵɵpureFunction1(2,L,n.data.length>0)),y.ɵɵadvance(3),y.ɵɵproperty("ngForOf",n.data)}}function A(e,t){if(1&e){var n=y.ɵɵgetCurrentView();y.ɵɵelementStart(0,"feature-panel",39,40),y.ɵɵlistener("forDateChange",(function(e){return y.ɵɵrestoreView(n),y.ɵɵnextContext(2).featurePanelForDateChange(e)}))("modeChange",(function(e){return y.ɵɵrestoreView(n),y.ɵɵnextContext(2).onModeChange(e)}))("panelCancel",(function(){return y.ɵɵrestoreView(n),y.ɵɵnextContext(2).clearRecord()}))("panelSubmit",(function(e){return y.ɵɵrestoreView(n),y.ɵɵnextContext(2).onPanelSubmit(e)})),y.ɵɵelementEnd()}if(2&e){var i=y.ɵɵnextContext(2);y.ɵɵproperty("type",i.typeCache.getTypeByCode(i.state.type))("code",i.current.code)("forDate",i.current.forDate)("readOnly",!1)}}function N(e,t){if(1&e){var n=y.ɵɵgetCurrentView();y.ɵɵelementStart(0,"business-object-panel",41),y.ɵɵlistener("close",(function(){y.ɵɵrestoreView(n);var e=y.ɵɵnextContext(2);return e.mode=e.MODE.VIEW})),y.ɵɵelementEnd()}if(2&e){var i=y.ɵɵnextContext(2);y.ɵɵproperty("type",i.current.businessType)("object",i.current.businessObject)}}var V=function(e,t){return{"full-height-sidebar":e,"max-height":t}};function F(e,t){if(1&e&&(y.ɵɵelementContainerStart(0),y.ɵɵelementStart(1,"div",6),y.ɵɵelementStart(2,"div",28),y.ɵɵtemplate(3,A,2,4,"feature-panel",37),y.ɵɵtemplate(4,N,1,2,"business-object-panel",38),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementContainerEnd()),2&e){var n=y.ɵɵnextContext();y.ɵɵadvance(2),y.ɵɵproperty("ngClass",y.ɵɵpureFunction2(3,V,null!=n.current,!n.searchEnabled)),y.ɵɵadvance(1),y.ɵɵproperty("ngIf","GEOOBJECT"===n.current.objectType&&n.typeCache.ready()),y.ɵɵadvance(1),y.ɵɵproperty("ngIf","BUSINESS"===n.current.objectType)}}var H=function(e,t){return{"fa-angle-double-left":e,"fa-angle-double-right":t}};function G(e,t){if(1&e){var n=y.ɵɵgetCurrentView();y.ɵɵelementStart(0,"div",42),y.ɵɵlistener("click",(function(){y.ɵɵrestoreView(n);var e=y.ɵɵnextContext();return!e.isEdit&&e.togglePanel()})),y.ɵɵelementStart(1,"div",43),y.ɵɵelement(2,"span",44),y.ɵɵpipe(3,"localize"),y.ɵɵelementEnd(),y.ɵɵelementEnd()}if(2&e){var i=y.ɵɵnextContext();y.ɵɵadvance(2),y.ɵɵproperty("title",y.ɵɵpipeBind1(3,2,"true"===i.state.attrPanelOpen?"explorer.resize.closeAttributePanel":"explorer.resize.openAttributePanel"))("ngClass",y.ɵɵpureFunction2(4,H,"true"===i.state.attrPanelOpen,!("true"===i.state.attrPanelOpen)))}}function B(e,t){if(1&e){var n=y.ɵɵgetCurrentView();y.ɵɵelementStart(0,"span",45),y.ɵɵelementStart(1,"i",46),y.ɵɵlistener("click",(function(){return y.ɵɵrestoreView(n),y.ɵɵnextContext().toggleGraphPanel()})),y.ɵɵpipe(2,"localize"),y.ɵɵelementEnd(),y.ɵɵelementEnd()}if(2&e){var i=y.ɵɵnextContext();y.ɵɵadvance(1),y.ɵɵproperty("title",y.ɵɵpipeBind1(2,1,i.graphPanelOpen?"explorer.resize.closeGraphViz":"explorer.resize.openGraphViz"))}}function q(e,t){if(1&e){var n=y.ɵɵgetCurrentView();y.ɵɵelementStart(0,"div",47),y.ɵɵelementStart(1,"div",48),y.ɵɵelementStart(2,"relationship-visualizer",49),y.ɵɵlistener("nodeSelect",(function(e){return y.ɵɵrestoreView(n),y.ɵɵnextContext().onGraphNodeSelect(e)})),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementEnd()}}var U=function(e,t){return{"col-md-6":e,"col-md-8":t}},$=function(e){return{"second-map-button":e}},J=function(e,t){return{"max-width":e,"padding-left":t}},W=function(){function e(e,t,n,i,r,o,a,s,c,d,u,m,g,h,y,v,b){this.route=e,this.router=t,this.modalService=n,this.spinner=i,this.service=r,this.cacheService=o,this.listService=a,this.mapService=s,this.geomService=c,this.lService=d,this.authService=u,this.dateService=m,this.businessObjectService=g,this.location=h,this.componentFactoryResolver=y,this.appRef=v,this.injector=b,this.pageMode="",this.coordinate={longitude:null,latitude:null},this.MODE={SEARCH:0,VIEW:1},this.CONSTANTS={SEARCH_OVERLAY:p.OverlayerIdentifier.SEARCH_PANEL},this.data=[],this.state={attrPanelOpen:"true"},this.requestedDate=null,this.calculatedDate=null,this.isEdit=!1,this.mode=this.MODE.SEARCH,this.graphPanelOpen=!1,this.showPanel=!0,this.baseLayers=[{name:"Satellite",label:"Satellite",id:"satellite-v9",sprite:"mapbox://sprites/mapbox/satellite-v9",url:"mapbox://mapbox.satellite",selected:!0}],this.preventSingleClick=!1,this.ready=!1,this.searchEnabled=!0,this.graphVisualizerEnabled=!1,this.typeahead=null,this.layersPanelSize=l.PANEL_SIZE_STATE.MINIMIZED,this.location=h,this.updateState=f.debounce(this._updateState,50)}return e.prototype.ngOnInit=function(){var e=this;this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.subscription=this.route.queryParams.subscribe((function(t){e.urlParams=t,e.handleStateChange(t)})),this.searchEnabled=registry.searchEnabled&&(this.authService.isRC(!1)||this.authService.isRM()||this.authService.isRA()),this.graphVisualizerEnabled=registry.graphVisualizerEnabled||!1,this.typeCache=this.cacheService.getTypeCache(),this.geomService.dumpLayers()},e.prototype.ngOnDestroy=function(){this.geomService.destroy(),this.subscription.unsubscribe()},e.prototype.ngAfterViewInit=function(){this.initializeMap()},e.prototype.resizeWindow=function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight},e.prototype.initializeMap=function(){var e=this,t=this.baseLayers[0],n={container:"map",style:{version:8,name:t.name,metadata:{"mapbox:autocomposite":!0},sources:{mapbox:{type:"raster",url:t.url,tileSize:256}},sprite:t.sprite,glyphs:window.location.protocol+"//"+window.location.host+registry.contextPath+"/glyphs/{fontstack}/{range}.pbf",layers:[{id:t.id,type:"raster",source:"mapbox"}]},attributionControl:!1,bounds:registry.defaultMapBounds};null!=this.state.bounds&&this.state.bounds.length>0&&(n.bounds=new o.LngLatBounds(JSON.parse(this.state.bounds))),n.logoPosition="bottom-right",this.map=new o.Map(n),this.map.on("load",(function(){e.geomService.initialize(e.map,null,!0),e.ready=!0,e.initMap()})),this.simpleEditControl&&this.map.addControl(this.simpleEditControl)},e.prototype._updateState=function(e){this.router.navigate([],{relativeTo:this.route,queryParams:e,queryParamsHandling:"merge"})},e.prototype.onGraphNodeSelect=function(e){var t=this;this.closeEditSessionSafeguard().then((function(){e.selectAnimation((function(){if("GEOOBJECT"===e.objectType){var n={properties:{type:e.typeCode,uid:e.id,code:e.code,displayLabel:new h.LocalizedValue(e.label,[])}};t.selectGeoObject(n)}else"BUSINESS"===e.objectType&&t.updateState({type:e.typeCode,code:e.code,objectType:e.objectType,uid:null,version:null,text:null})}))}))},e.prototype.handleStateChange=function(e){e=JSON.parse(JSON.stringify(e));var t=JSON.parse(JSON.stringify(this.state));if(this.ready){this.state=e;var n=this.MODE.SEARCH,i="true"===e.attrPanelOpen||void 0===e.attrPanelOpen;if(null!=e&&(null!=e.text&&(e.text===t.text&&e.date===t.date||(this.searchFieldText=e.text,this.dateFieldValue=e.date,this.loadSearchFromState()),i=!0),null!=e.objectType&&"GEOOBJECT"!==e.objectType||null==e.type||null==e.code||(t.type===e.type&&t.code===e.code||this.loadGeoObjectFromState(),i=!0,n=this.MODE.VIEW),null!=e.objectType&&"BUSINESS"===e.objectType&&e.type&&e.code&&(null!=this.current&&null!=this.current.businessObject&&this.current.businessObject.code===e.code&&this.current.businessType.code===e.type||this.selectBusinessObject(),i=!0,n=this.MODE.VIEW),null!=e.version&&null!=e.uid&&(null!=this.current&&null!=this.feature&&this.feature.version===e.version&&this.feature.id===e.uid||this.handleRecord(e.version,e.uid),i=!0,n=this.MODE.VIEW),e.pageContext&&(this.pageMode=e.pageContext),e.layersPanelSize?this.layersPanelSize=Number.parseInt(e.layersPanelSize):this.layersPanelSize="EXPLORER"===this.pageMode?l.PANEL_SIZE_STATE.FULLSCREEN:this.layersPanelSize,null!=e.attrPanelOpen&&(i="true"===e.attrPanelOpen),null!=e.graphPanelOpen&&(this.graphPanelOpen="true"===e.graphPanelOpen)),this.changeMode(n),this.setPanel(i),null!=e.bounds&&e.bounds.length>0&&!this.geomService.isMapZooming()){var r=JSON.parse(e.bounds);this.mapBounds=this.convertMapBounds(new o.LngLatBounds(r)),this.convertMapBounds(this.map.getBounds()).toString()!==this.mapBounds.toString()&&this.map.fitBounds(this.mapBounds,{animate:!1})}}},e.prototype.selectBusinessObject=function(){var e=this;this.businessObjectService.getTypeAndObject(this.state.type,this.state.code).then((function(t){e.current={objectType:"BUSINESS",code:e.state.code,businessObject:t.object,businessType:t.type},e.mode=e.MODE.VIEW})).catch((function(t){e.error(t)})).finally((function(){e.spinner.hide(p.OverlayerIdentifier.FEATURE_PANEL)}))},e.prototype.setPanel=function(e){var t=this;"true"===this.state.attrPanelOpen!==e&&(this.updateState({attrPanelOpen:e?"true":"false"}),c.timeout((function(){t.map.resize()}),1))},e.prototype.togglePanel=function(){this.setPanel(!("true"===this.state.attrPanelOpen))},e.prototype.changeMode=function(e){if(e!==this.mode)if(this.mode=e,this.isEdit&&this.geomService.stopEditing(),this.mode===this.MODE.SEARCH){this.isEdit=!1,null!=this.feature&&this.map.removeFeatureState(this.feature);var t=this.geomService.getLayers().filter((function(e){return e.getPinned()||!(e.dataSource instanceof g.ValueOverTimeDataSource)&&!(e.dataSource instanceof g.GeoObjectLayerDataSource)&&!(e.dataSource instanceof g.RelationshipVisualizionDataSource)}));this.geomService.setLayers(t),this.addSearchLayer(),this.current=null,this.feature=null}else if(this.mode===this.MODE.VIEW){t=(t=this.geomService.getLayers()).filter((function(e){return e.getPinned()||!(e.dataSource instanceof g.SearchLayerDataSource)&&!(e.dataSource instanceof g.RelationshipVisualizionDataSource)})),this.geomService.setLayers(t)}},e.prototype.onModeChange=function(e){this.isEdit=e},e.prototype.initMap=function(){var e=this;this.map.addControl(new o.AttributionControl({compact:!0}),"bottom-right"),this.map.addControl(new o.NavigationControl({visualizePitch:!0}),"bottom-right"),this.map.on("click",(function(t){e.handleMapClickEvent(t)})),this.map.on("moveend",(function(t){var n=e.convertMapBounds(e.map.getBounds());if(null==e.mapBounds||e.mapBounds.toString()!==n.toString()){var i=n.toArray();window.setTimeout((function(){e._updateState({bounds:JSON.stringify(i)})}),0)}})),this.handleStateChange(this.urlParams)},e.prototype.onCreate=function(e){var t=this;"LISTVECT"===e.dataSource.dataSourceType&&this.closeEditSessionSafeguard().then((function(){t.listService.getVersion(e.dataSource.versionId).then((function(e){e.isAbstract?(t.bsModalRef=t.modalService.show(d.SelectTypeModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),t.bsModalRef.content.init(e,(function(e){t.select({properties:{type:e,code:"__NEW__"}},null)}))):t.select({properties:{type:e.typeCode,code:"__NEW__"}},null)}))}))},e.prototype.closeEditSessionSafeguard=function(){var e=this;if(!this.isEdit)return new Promise((function(e,t){e()}));var t=this.modalService.show(s.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});t.content.message=this.lService.decode("explorer.edit.loseAllChanges"),t.content.data={},t.content.submitText=this.lService.decode("modal.button.ok"),t.content.type=u.ModalTypes.danger;return new Promise((function(n,i){var r=t.content.onConfirm.subscribe((function(t){!function(t,n,i){e.cancelEditingSession(),n(i),t.unsubscribe()}(r,n,t)}),(function(e){!function(e,t,n){t(n),e.unsubscribe()}(r,i,e)}))}))},e.prototype.handleMapClickEvent=function(e){var t=this,n=this.map.queryRenderedFeatures(e.point);if(null!=n&&n.length>0){var i=n[0];null!=i.properties.uid&&this.closeEditSessionSafeguard().then((function(){if(i.layer){var e=t.geomService.getLayerFromMapboxLayer(i.layer);if(e)if(e.dataSource.getDataSourceType()===g.SEARCH_DATASOURCE_TYPE){if(null==t.current||null==i.properties||t.state.code!==i.properties.code||t.state.type!==i.properties.type)(r=JSON.parse(JSON.stringify(i))).properties.displayLabel=null!=i.properties.displayLabel?JSON.parse(i.properties.displayLabel):null,t.selectGeoObject(r)}else if(e.dataSource.getDataSourceType()===g.LIST_VECTOR_SOURCE_TYPE){var n=e.dataSource.getVersionId();null==t.state.version||null==t.state.uid||t.state.version!==n||t.state.uid!==i.properties.uid?t.updateState({version:n,uid:i.properties.uid}):t.handleRecord(n,i.properties.uid)}else if(e.dataSource.getDataSourceType()===g.GEO_OBJECT_DATA_SOURCE_TYPE){(r=JSON.parse(JSON.stringify(i))).properties.displayLabel=null!=i.properties.displayLabel?JSON.parse(i.properties.displayLabel):null,t.selectGeoObject(r)}else if(e.dataSource.getDataSourceType()===g.RELATIONSHIP_VISUALIZER_DATASOURCE_TYPE){var r;(r=JSON.parse(JSON.stringify(i))).properties.displayLabel=null!=i.properties.displayLabel?JSON.parse(i.properties.displayLabel):null,t.selectGeoObject(r)}}}))}},e.prototype.onPanelCancel=function(){this.clearRecord()},e.prototype.onPanelSubmit=function(e){var t=this;this.geomService.saveEdits(),e.isChangeRequest?null!=this.backReference&&this.backReference.length>=2&&"CR"===this.backReference.substring(0,2)?(this.bsModalRef=this.modalService.show(s.SuccessModalComponent,{backdrop:!0,class:"error-white-space-pre"}),this.bsModalRef.content.message=this.lService.decode("geoobject-editor.changerequest.submitted"),this.bsModalRef.content.submitText=this.lService.decode("geoobject-editor.changerequest.view"),this.bsModalRef.content.onConfirm.subscribe((function(){t.router.navigate(["/registry/change-requests",e.changeRequestId])}))):(this.bsModalRef=this.modalService.show(s.ConfirmModalComponent,{backdrop:!0,class:"error-white-space-pre"}),this.bsModalRef.content.message=this.lService.decode("geoobject-editor.changerequest.submitted"),this.bsModalRef.content.submitText=this.lService.decode("geoobject-editor.changerequest.view"),this.bsModalRef.content.cancelText=this.lService.decode("geoobject-editor.cancel.returnExplorer"),this.bsModalRef.content.onConfirm.subscribe((function(){t.router.navigate(["/registry/change-requests",e.changeRequestId])})),this.bsModalRef.content.onCancel.subscribe((function(){t.clearRecord()}))):(this.bsModalRef=this.modalService.show(s.SuccessModalComponent,{backdrop:!0,class:"error-white-space-pre"}),this.bsModalRef.content.message=this.lService.decode("geoobject-editor.edit.submitted"),this.bsModalRef.content.submitText=this.lService.decode("geoobject-editor.cancel.returnExplorer"),this.bsModalRef.content.onConfirm.subscribe((function(){t.onPanelCancel()})))},e.prototype.handleBasemapStyle=function(e){this.baseLayers.forEach((function(e){e.selected=!1})),e.selected=!0,this.map.setStyle({version:8,name:e.name,metadata:{"mapbox:autocomposite":!0},sources:{mapbox:{type:"raster",url:e.url,tileSize:256}},sprite:e.sprite,glyphs:window.location.protocol+"//"+window.location.host+registry.contextPath+"/glyphs/{fontstack}/{range}.pbf",layers:[{id:e.id,type:"raster",source:"mapbox"}]})},e.prototype.getGeoObjectTypeLabel=function(e){var t=this.typeCache.getTypeByCode(e.properties.type);return null==t?"":t.label.localizedValue},e.prototype.search=function(){this.updateState({text:this.searchFieldText,date:this.dateFieldValue,type:null,code:null,version:null,uid:null})},e.prototype.loadSearchFromState=function(){this.geomService.stopEditing(),this.addSearchLayer()},e.prototype.handleRecord=function(e,t){var n=this;this.listService.record(e,t,!1).then((function(i){if(null!=n.feature&&(n.map.removeFeatureState(n.feature),n.feature=null),window.setTimeout((function(){var r=n.geomService.getLayers().findIndex((function(e){return e.dataSource.getDataSourceType()===g.LIST_VECTOR_SOURCE_TYPE&&i.version===e.dataSource.getVersionId()}));if(-1!==r){var o=n.geomService.getLayers()[r];null!=n.map.getSource(o.dataSource.getId())&&(n.feature={source:o.dataSource.getId(),sourceLayer:"context",id:t,version:e},n.map.setFeatureState(n.feature,{selected:!0}))}}),5),"LIST"===i.recordType){var r=i.bbox;if(n.requestedDate=""===i.forDate||void 0===i.forDate?null:i.forDate,r&&Array.isArray(r)){var a=n.componentFactoryResolver.resolveComponentFactory(m.RecordPopupComponent).create(n.injector);a.instance.record=i,a.instance.edit.subscribe((function(){var e=i.data.code;n.selectGeoObject({properties:{type:i.typeCode,code:e,uid:t,displayLabel:new h.LocalizedValue(i.data.displayLabelDefaultLocale,[])}})})),n.appRef.attachView(a.hostView);var l=a.hostView.rootNodes[0],s=new o.LngLatBounds([r[0],r[1]],[r[2],r[3]]);new o.Popup({closeOnClick:!0,closeButton:!1}).setLngLat(s.getCenter()).setDOMContent(l).addTo(n.map)}}})).catch((function(e){n.error(e)}))},e.prototype.cancelEditingSession=function(){this.isEdit&&this.geomService.stopEditing(),this.isEdit=!1,null!=this.feature&&this.map.removeFeatureState(this.feature),this.featurePanel.setEditMode(!1),this.feature=null},e.prototype.clearRecord=function(){this.updateState({type:null,code:null,version:null,uid:null})},e.prototype.featurePanelForDateChange=function(e){null!==e&&(this.geomService.stopEditing(),this.calculatedDate=e)},e.prototype.select=function(e,t){this.isEdit||(null!=this.feature&&(this.map.removeFeatureState(this.feature),this.feature=null),this.updateState({type:e.properties.type,code:e.properties.code,objectType:"GEOOBJECT",uid:e.properties.uid,version:null}))},e.prototype.selectGeoObject=function(e){var t=this;this.closeEditSessionSafeguard().then((function(){t.addLayerForGeoObject(e),t.updateState({type:e.properties.type,code:e.properties.code,objectType:"GEOOBJECT",uid:e.properties.uid,version:null,text:null})}))},e.prototype.loadGeoObjectFromState=function(){var e=this;this.typeCache.waitOnTypes().then((function(){var t=e.typeCache.getTypeByCode(e.state.type);e.geomService.stopEditing(),e.geomService.setGeometryType(null),e.geomService.setGeometryType(t.geometryType),e.current={objectType:"GEOOBJECT",code:e.state.code,forDate:""===e.state.date?null:e.state.date},"__NEW__"!==e.state.code&&(e.requestedDate=""===e.current.forDate?null:e.current.forDate)}))},e.prototype.addSearchLayer=function(){var e=this;if(null!=this.state.text){var t=this.geomService.getLayers(),n=t.findIndex((function(e){return e.dataSource instanceof g.SearchLayerDataSource}));if(-1!==n){var i=t[n].dataSource;if(i.getText()===this.state.text&&i.getDate()===this.state.date)return}var r=new g.SearchLayerDataSource(this.mapService,this.state.text,this.state.date);this.spinner.show(this.CONSTANTS.SEARCH_OVERLAY),r.getLayerData().then((function(n){if(e.spinner.hide(e.CONSTANTS.SEARCH_OVERLAY),e.mode===e.MODE.SEARCH){if(-1===(t=(t=e.geomService.getLayers()).filter((function(t){return t.getPinned()||!(t.dataSource instanceof g.SearchLayerDataSource)&&!(t.dataSource instanceof g.RelationshipVisualizionDataSource)||t.dataSource instanceof g.SearchLayerDataSource&&t.dataSource.getText()===e.state.text&&t.dataSource.getDate()===e.state.date}))).findIndex((function(t){return t.dataSource instanceof g.SearchLayerDataSource&&t.dataSource.getText()===e.state.text&&t.dataSource.getDate()===e.state.date}))){var i=r.createLayer(e.lService.decode("explorer.search.layer")+" ("+e.state.text+")",!0,a().hexString());t.splice(0,0,i),e.geomService.zoomOnReady(i.getId()),e.data=n.features}e.geomService.setLayers(t)}})).catch((function(){e.spinner.hide(e.CONSTANTS.SEARCH_OVERLAY),e.state.text="",e.state.date=""}))}},e.prototype.addLayerForGeoObject=function(e){var t=this;this.typeCache.waitOnTypes().then((function(){var n=t.typeCache.getTypeByCode(e.properties.type),i=t.geomService.getLayers(),r=null==t.state?null:t.state.date,o=new g.GeoObjectLayerDataSource(t.service,e.properties.code,e.properties.type,r),l=e.properties.displayLabel.localizedValue,s=n.label.localizedValue,c=l+" "+(null==r?"":" "+t.dateService.formatDateForDisplay(r))+"("+s+")",d=o.createLayer(c,!0,a().hexString());-1===(i=i.filter((function(e){return!(e.dataSource instanceof g.GeoObjectLayerDataSource)||e.getKey()===d.getKey()||e.getPinned()}))).findIndex((function(e){return e.getKey()===d.getKey()}))&&(i.splice(0,0,d),t.geomService.zoomOnReady(d.getId()),t.geomService.setLayers(i)),t.geomService.setLayers(i)}))},e.prototype.onFeatureSelect=function(e){var t=this;if(!this.isEdit){this.state.text=e.item.name;var n=e.item.feature;null!=n.properties.uid&&this.listService.getBounds(n.version,n.properties.uid).then((function(e){if(e&&Array.isArray(e)){var n=new o.LngLatBounds([e[0],e[1]],[e[2],e[3]]);t.map.fitBounds(n,{padding:50,animate:!0,maxZoom:20})}})).catch((function(e){t.error(e)})),null!=n.properties.uid&&this.updateState({type:null,code:null,version:n.version,uid:n.properties.uid})}},e.prototype.toggleGraphPanel=function(){this.graphPanelOpen=!this.graphPanelOpen,this.updateState({graphPanelOpen:this.graphPanelOpen})},e.prototype.convertMapBounds=function(e){var t=e.getNorthEast(),n=e.getSouthWest();return o.LngLatBounds.convert([[parseFloat(n.lng.toFixed(10)),parseFloat(n.lat.toFixed(10))],[parseFloat(t.lng.toFixed(10)),parseFloat(t.lat.toFixed(10))]])},e.prototype.error=function(e){this.bsModalRef=s.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(y.ɵɵdirectiveInject(v.ActivatedRoute),y.ɵɵdirectiveInject(v.Router),y.ɵɵdirectiveInject(b.BsModalService),y.ɵɵdirectiveInject(S.NgxSpinnerService),y.ɵɵdirectiveInject(C.RegistryService),y.ɵɵdirectiveInject(E.RegistryCacheService),y.ɵɵdirectiveInject(x.ListTypeService),y.ɵɵdirectiveInject(C.MapService),y.ɵɵdirectiveInject(C.GeometryService),y.ɵɵdirectiveInject(O.LocalizationService),y.ɵɵdirectiveInject(O.AuthService),y.ɵɵdirectiveInject(O.DateService),y.ɵɵdirectiveInject(I.BusinessObjectService),y.ɵɵdirectiveInject(M.Location),y.ɵɵdirectiveInject(y.ComponentFactoryResolver),y.ɵɵdirectiveInject(y.ApplicationRef),y.ɵɵdirectiveInject(y.Injector))},e.ɵcmp=y.ɵɵdefineComponent({type:e,selectors:[["location-manager"]],viewQuery:function(e,t){if(1&e&&(y.ɵɵviewQuery(w,1),y.ɵɵviewQuery(T,1)),2&e){var n=void 0;y.ɵɵqueryRefresh(n=y.ɵɵloadQuery())&&(t.simpleEditControl=n.first),y.ɵɵqueryRefresh(n=y.ɵɵloadQuery())&&(t.featurePanel=n.first)}},hostBindings:function(e,t){1&e&&y.ɵɵlistener("resize",(function(e){return t.resizeWindow(e)}),!1,y.ɵɵresolveWindow)},features:[y.ɵɵProvidersFeature([r.Location])],decls:24,vars:19,consts:[["customItemTemplate",""],["id","app-container",1,"container-fluid"],[2,"position","absolute","top","0","bottom","0","left","10px","right","10px","height","100%"],[1,"row",2,"margin-top","50px"],[1,"col-md-4",2,"z-index","999",3,"hidden"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[4,"ngIf"],[2,"z-index","4","padding-top","10px",3,"ngClass"],[2,"z-index","999","padding-top","10px","overflow-y","auto","position","absolute","top","0","overflow","visible"],["class","map-button clickable","style","padding-bottom: 5px;",3,"click",4,"ngIf"],["class","map-button visualize-mode-toggle",4,"ngIf"],["id","graph-container","style","height: calc(100vh - 74px);padding-left: 58px;",4,"ngIf"],["id","navigator-layer-panel",1,"base-layer-panel",3,"ngClass","ngStyle"],[3,"panelSize","create"],["id","map",1,"map-view-port"],["key","list.type.working.version",4,"ngIf"],["key","list.type.version"],["key","list.type.working.version"],[1,"panel-toggle",3,"ngClass"],[1,"input-group"],["type","ball-clip-rotate-multiple","size","medium",3,"fullScreen","name"],["label","",2,"display","table-cell","vertical-align","middle","width","175px",3,"value","inputName","allowInfinity","allowFutureDates","required","valueChange"],["type","text","name","text",1,"form-control",3,"placeholder","ngModel","keyup.enter","ngModelChange"],[1,"input-group-btn"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"glyphicon","glyphicon-search"],[1,"col-md-12",3,"ngClass"],["id","hierarchy-tree-container",1,"location-management-widget-section","location-management-list-container"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"card","card-default",3,"click"],[1,"card-body"],["title","View Geo-Object details",1,"clickable",2,"word-break","break-all"],[1,"card-footer"],[3,"type","code","forDate","readOnly","forDateChange","modeChange","panelCancel","panelSubmit",4,"ngIf"],[3,"type","object","close",4,"ngIf"],[3,"type","code","forDate","readOnly","forDateChange","modeChange","panelCancel","panelSubmit"],["FeaturePanel",""],[3,"type","object","close"],[1,"map-button","clickable",2,"padding-bottom","5px",3,"click"],[1,"map-button-icon"],["aria-hidden","true",1,"fa","clickable",2,"font-size","35px",3,"title","ngClass"],[1,"map-button","visualize-mode-toggle"],["aria-hidden","true",1,"visualize-mode-hierarchy","clickable","fa","fa-share-alt",2,"margin-right","initial",3,"title","click"],["id","graph-container",2,"height","calc(100vh - 74px)","padding-left","58px"],[2,"background-color","white","opacity","100%","width","100%","height","100%"],[3,"nodeSelect"]],template:function(e,t){1&e&&(y.ɵɵtemplate(0,j,7,6,"ng-template",null,0,y.ɵɵtemplateRefExtractor),y.ɵɵelement(2,"cgr-header"),y.ɵɵelement(3,"loading-bar"),y.ɵɵelementStart(4,"div",1),y.ɵɵelementStart(5,"div",2),y.ɵɵelementStart(6,"div",3),y.ɵɵelementStart(7,"div",4),y.ɵɵtemplate(8,D,12,15,"div",5),y.ɵɵelementStart(9,"div",6),y.ɵɵelementStart(10,"div",7),y.ɵɵtemplate(11,_,6,4,"ng-container",8),y.ɵɵtemplate(12,F,5,6,"ng-container",8),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementStart(13,"div",9),y.ɵɵelementStart(14,"div",10),y.ɵɵtemplate(15,G,4,7,"div",11),y.ɵɵtemplate(16,B,3,3,"span",12),y.ɵɵelementEnd(),y.ɵɵtemplate(17,q,3,0,"div",13),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementStart(18,"div",6),y.ɵɵelementStart(19,"div",7),y.ɵɵelementStart(20,"div",6),y.ɵɵelementStart(21,"article",14),y.ɵɵelementStart(22,"layer-panel",15),y.ɵɵlistener("create",(function(e){return t.onCreate(e)})),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelement(23,"div",16),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementEnd(),y.ɵɵelementEnd()),2&e&&(y.ɵɵadvance(7),y.ɵɵproperty("hidden",!("true"===t.state.attrPanelOpen)),y.ɵɵadvance(1),y.ɵɵproperty("ngIf",t.searchEnabled),y.ɵɵadvance(3),y.ɵɵproperty("ngIf",t.mode===t.MODE.SEARCH&&t.searchEnabled),y.ɵɵadvance(1),y.ɵɵproperty("ngIf",t.mode===t.MODE.VIEW&&null!=t.current),y.ɵɵadvance(1),y.ɵɵproperty("ngClass",y.ɵɵpureFunction2(11,U,!("true"===t.state.attrPanelOpen),"true"===t.state.attrPanelOpen)),y.ɵɵadvance(2),y.ɵɵproperty("ngIf",t.searchEnabled||null!=t.current),y.ɵɵadvance(1),y.ɵɵproperty("ngIf",null!=t.current&&t.graphVisualizerEnabled),y.ɵɵadvance(1),y.ɵɵproperty("ngIf",t.graphPanelOpen&&t.graphVisualizerEnabled&&t.state.type&&t.state.code),y.ɵɵadvance(4),y.ɵɵproperty("ngClass",y.ɵɵpureFunction1(14,$,t.searchEnabled&&!("true"===t.state.attrPanelOpen)))("ngStyle",y.ɵɵpureFunction2(16,J,2===t.layersPanelSize?"50%":"unset",2===t.layersPanelSize?"10px":"unset")),y.ɵɵadvance(1),y.ɵɵproperty("panelSize",t.layersPanelSize))},styles:[".map-button.visualize-mode-toggle[_ngcontent-%COMP%] {\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 7px;\n  padding-top: 14px;  \n}\n\n.visualize-mode-toggle.map[_ngcontent-%COMP%] {\n  right: 50px;\n}\n.visualize-mode-toggle.hierarchy[_ngcontent-%COMP%] {\n  right: 50px;\n}\n\n.visualize-mode-hierarchy[_ngcontent-%COMP%] {\n\tcolor: black;\n}\n\n.visualize-mode-toggle[_ngcontent-%COMP%]    > i[_ngcontent-%COMP%] {\n\tfont-size: 25px;\n}\n\n.map-view-port[_ngcontent-%COMP%] {\n  height: calc(100vh - 50px);\n}\n\n.base-layer-panel[_ngcontent-%COMP%]{\n  position:absolute;\n  top: 5px;\n  right: 5px;\n  z-index:3;\n  padding:5px;\n}\n\n.map-button[_ngcontent-%COMP%] {\n    background-color: white;\n    margin:0;\n    padding:0;\n    z-index:1001;\n    border-radius: 4px;\n    width: 46px; \n    width: fit-content;\n    margin-bottom: 20px;\n}\n.map-button-icon[_ngcontent-%COMP%] {\n    font-size:12px;\n    text-align: center;\n    width: 38px;\n    height: 30px;\n    vertical-align: middle;\n}\n.map-button-icon[_ngcontent-%COMP%]    > span.glyphicon[_ngcontent-%COMP%] {\n    line-height: 30px;\n}\n\n\n\n.site-explorer-list[_ngcontent-%COMP%] {\n  padding: 20px;\n  height: calc(100vh - 106px);\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.location-management-widget-section[_ngcontent-%COMP%] {\n\tmargin: 5px 0;\n}\n.location-management-widget-section[_ngcontent-%COMP%]    > select[_ngcontent-%COMP%] {\n\tfloat: none !important;\n}\n\n.list-group-item[_ngcontent-%COMP%] {\n\tborder: none;\n\tborder-bottom: 1px solid #ddd;\n\tmargin-bottom: 0;\n}\n.list-group-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n\n.breadcrumb[_ngcontent-%COMP%]{\n\tpadding: 10px 0;\n\tbackground-color: white;\n\tmargin:0;\n}\n\n.layer-toggle[_ngcontent-%COMP%] {\n\tbackground: #fff; \n\tpadding: 5px; \n\tborder-radius: 4px;\n\twidth: fit-content;\n\tmax-height: calc(100vh - 175px);\n\toverflow-y:auto;\n\toverflow-x:clip;\n}\n.layer-toggle[_ngcontent-%COMP%]   .fa-bars[_ngcontent-%COMP%] {\n    cursor: pointer; \n}\n.layer-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n    width: 27px;\n    height: 27px;\n}\n\n.layer-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n.layer-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n\tmargin-left: 5px;\n}\n\n.arrow[_ngcontent-%COMP%] {\n  border: solid black;\n  border-width: 0 1px 1px 0;\n  display: inline-block;\n  padding: 5px;\n}\n.arrow-right[_ngcontent-%COMP%] {\n  transform: rotate(-45deg);\n  -webkit-transform: rotate(-45deg);\n}\n.arrow-down[_ngcontent-%COMP%] {\n  transform: rotate(45deg);\n  -webkit-transform: rotate(45deg);\n}\n\n.fa.fa-arrow-left[_ngcontent-%COMP%]::before {\n\tmargin-right:5px;\n}\n\n.panel-toggle[_ngcontent-%COMP%] {\n\tposition: absolute;\n\n\tpadding: 15px 0;\n\tbackground-color: white;\n\tz-index:9;\n\t\n\tborder-color: #6BA542;\n    border-color: var(--theme-input-text-border-active);\n    outline: 0;\n    -webkit-box-shadow: inset 0 1px 1px rgb(0 0 0 / 8%), 0 0 8px rgb(107 165 66 / 60%);\n    box-shadow: inset 0 1px 1px rgb(0 0 0 / 8%), 0 0 8px rgb(107 165 66 / 60%);\n}\n[_nghost-%COMP%]     .panel-toggle input.date-input-element {\n\tborder-radius: 5px;\n\tborder-bottom-right-radius: 0;\n    border-top-right-radius: 0;\n    border: 1px solid #ccc;\n}\n.panel-toggle.detached[_ngcontent-%COMP%] {\n\tborder-radius: 3px;\n    margin: 10px 0px 10px 10px;\n    padding: 5px;\n}\n.panel-toggle.detached[_ngcontent-%COMP%]    > .col-md-12[_ngcontent-%COMP%]{\n\tpadding-right:0;\n\tpadding-left:0;\n}\n\n\n.layer-toggle-wrapper[_ngcontent-%COMP%] {\n    display: flex;\n    justify-content: left;\n    align-items: center;\n    margin: 3px 0;\n    padding-left: 20px;\n}\n\n.label-wrapper[_ngcontent-%COMP%] {\n    margin-left: 5px;\n    display: inline-block;\n}\n.label-wrapper[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%] {\n    vertical-align: middle;\n}\n.label-wrapper[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]:hover {\n    color: #6BA542;\n    color: var(--theme-submit-button-color);\n    cursor: pointer;\n}\n\n\n.full-height-sidebar[_ngcontent-%COMP%] {\n\theight: calc(100vh - 120px);\n\toverflow:auto;top: 70px;\n\tbackground:white;\n}\n.full-height-sidebar.max-height[_ngcontent-%COMP%] {\n\theight: calc(100vh - 50px);\n\ttop: 0;\n}\n\n.collapse-sidebar[_ngcontent-%COMP%], .collapse-sidebar[_ngcontent-%COMP%]   [class*='col-'][_ngcontent-%COMP%] {\n\twidth: 10px;\n\toverflow: visible;\n\tpadding: 0;\n}\n.collapse-sidebar[_ngcontent-%COMP%]   .panel-toggle[_ngcontent-%COMP%] {\n\tdisplay:none;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.cdk-drag-preview[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  border-radius: 4px;\n  box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),\n              0 8px 10px 1px rgba(0, 0, 0, 0.14),\n              0 3px 14px 2px rgba(0, 0, 0, 0.12);\n}\n\n.cdk-drag-animating[_ngcontent-%COMP%] {\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n}\n\n\n\n\n\n\n\n\n\n.custom-placeholder[_ngcontent-%COMP%] {\n  background: #ccc;\n  border: dotted 3px #999;\n  min-height: 40px;\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n}\n\n.col-fixed-50[_ngcontent-%COMP%]{\n  width:50px;\n  position:fixed;\n  height:100%;\n}"]}),e}();t.LocationManagerComponent=W,("undefined"==typeof ngDevMode||ngDevMode)&&y.ɵsetClassMetadata(W,[{type:i.Component,args:[{selector:"location-manager",providers:[r.Location],templateUrl:"./location-manager.component.html",styleUrls:["./location-manager.css"]}]}],(function(){return[{type:v.ActivatedRoute},{type:v.Router},{type:b.BsModalService},{type:S.NgxSpinnerService},{type:C.RegistryService},{type:E.RegistryCacheService},{type:x.ListTypeService},{type:C.MapService},{type:C.GeometryService},{type:O.LocalizationService},{type:O.AuthService},{type:O.DateService},{type:I.BusinessObjectService},{type:M.Location},{type:y.ComponentFactoryResolver},{type:y.ApplicationRef},{type:y.Injector}]}),{simpleEditControl:[{type:i.ViewChild,args:["simpleEditControl"]}],featurePanel:[{type:i.ViewChild,args:["FeaturePanel"]}],resizeWindow:[{type:i.HostListener,args:["window:resize",["$event"]]}]})},1118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectTypeModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(0),a=n(56);function l(e,t){if(1&e&&(o.ɵɵelementStart(0,"option",16),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵproperty("value",n.code),o.ɵɵadvance(1),o.ɵɵtextInterpolate1(" ",n.label," ")}}function s(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"fieldset"),o.ɵɵelementStart(1,"div",6),o.ɵɵelementStart(2,"div",7),o.ɵɵelementStart(3,"label"),o.ɵɵelement(4,"localize",8),o.ɵɵelementEnd(),o.ɵɵelementStart(5,"select",9),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().type=e})),o.ɵɵelement(6,"option"),o.ɵɵtemplate(7,l,2,2,"option",10),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(8,"div",6),o.ɵɵelementStart(9,"div",7),o.ɵɵelementStart(10,"div",11),o.ɵɵelementStart(11,"button",12),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().bsModalRef.hide()})),o.ɵɵelementStart(12,"span"),o.ɵɵelement(13,"localize",13),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(14,"button",14),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().confirm()})),o.ɵɵelementStart(15,"span"),o.ɵɵelement(16,"localize",15),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext(),r=o.ɵɵreference(5);o.ɵɵadvance(5),o.ɵɵproperty("ngModel",i.type),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",i.version.subtypes),o.ɵɵadvance(7),o.ɵɵproperty("disabled",r.invalid)}}var c=function(){function e(e){this.bsModalRef=e}return e.prototype.ngOnInit=function(){this.onCreate=new r.Subject},e.prototype.ngOnDestroy=function(){null!=this.subscription&&this.subscription.unsubscribe(),this.onCreate.unsubscribe()},e.prototype.init=function(e,t){this.version=e,this.subscription=this.onCreate.subscribe(t)},e.prototype.confirm=function(){this.bsModalRef.hide(),this.onCreate.next(this.type)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.BsModalRef))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["select-type-modal"]],decls:7,vars:1,consts:[["tabindex","-1","role","dialog",1,"modal-body"],[1,"heading","text-center"],["key","dropdown.select.geoobjecttype.option.label"],["name","export-form",1,"modal-form"],["form","ngForm"],[4,"ngIf"],[1,"row"],[1,"col-md-12"],["key","io.geoObjectType"],["id","type","name","type","required","",1,"select-area",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"button-holder"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","button","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","modal.button.submit"],[3,"value"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelementStart(1,"div",1),o.ɵɵelementStart(2,"h1"),o.ɵɵelement(3,"localize",2),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"form",3,4),o.ɵɵtemplate(6,s,17,3,"fieldset",5),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(6),o.ɵɵproperty("ngIf",null!=t.version))},encapsulation:2}),e}();t.SelectTypeModalComponent=c,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(c,[{type:i.Component,args:[{selector:"select-type-modal",templateUrl:"./select-type-modal.component.html",styleUrls:[]}]}],(function(){return[{type:a.BsModalRef}]}),null)},1119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeaturePanelComponent=void 0;var i=n(0),r=(n(56),n(856),n(378)),o=(n(1015),n(25),n(193)),a=n(544),l=n(0),s=n(1015),c=n(856),d=n(56),p=n(25),u=["attributeEditor"];function m(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"geoobject-shared-attribute-editor",10,11),l.ɵɵlistener("valid",(function(e){return l.ɵɵrestoreView(n),l.ɵɵnextContext(3).setValid(e)}))("calculatedDateChange",(function(e){return l.ɵɵrestoreView(n),l.ɵɵnextContext(3).editorForDateChange(e)})),l.ɵɵelementEnd()}if(2&e){var i=l.ɵɵnextContext(3);l.ɵɵproperty("geoObjectType",i.type)("postGeoObject",i.postGeoObject)("isNew",i.isNew)("isGeometryInlined",!1)("hierarchies",i.hierarchies)("readOnly",!i.isEdit)("requestedDate",i.forDate)("forDate",i.forDate)("datasetId",i.datasetId)}}function g(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",12),l.ɵɵelementStart(1,"label"),l.ɵɵelement(2,"localize",13),l.ɵɵelementEnd(),l.ɵɵelementStart(3,"textarea",14),l.ɵɵlistener("ngModelChange",(function(e){return l.ɵɵrestoreView(n),l.ɵɵnextContext(3).reason=e})),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var i=l.ɵɵnextContext(3);l.ɵɵadvance(3),l.ɵɵproperty("ngModel",i.reason)}}function h(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"button",15),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext(3).onEditAttributes()})),l.ɵɵelement(1,"localize",16),l.ɵɵelementEnd()}}function f(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"button",17),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext(3).onCancelInternal()})),l.ɵɵelement(1,"localize",18),l.ɵɵelementEnd()}}function y(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"button",19),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext(3).onSubmit()})),l.ɵɵelement(1,"localize",20),l.ɵɵelementEnd()}if(2&e){var i=l.ɵɵnextContext(3);l.ɵɵproperty("disabled",!i.canSubmit()),l.ɵɵadvance(1),l.ɵɵproperty("key",i.isMaintainer?"modal.button.submit":"change.request.page.title")}}function v(e,t){if(1&e&&(l.ɵɵelementStart(0,"div"),l.ɵɵtemplate(1,m,2,9,"geoobject-shared-attribute-editor",4),l.ɵɵtemplate(2,g,4,1,"div",5),l.ɵɵelementStart(3,"div",6),l.ɵɵtemplate(4,h,2,0,"button",7),l.ɵɵtemplate(5,f,2,0,"button",8),l.ɵɵtemplate(6,y,2,2,"button",9),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext(2);l.ɵɵadvance(1),l.ɵɵproperty("ngIf",n.hierarchies&&n.postGeoObject),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",n.isEdit&&!n.isMaintainer),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",!n.readOnly&&!n.isEdit),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",n.isEdit),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",n.isEdit)}}function b(e,t){if(1&e&&(l.ɵɵelementStart(0,"div"),l.ɵɵelement(1,"ngx-spinner",1),l.ɵɵelementStart(2,"div",2),l.ɵɵelementStart(3,"div",3),l.ɵɵelementStart(4,"h3"),l.ɵɵtext(5),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(6,v,7,5,"div",0),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵproperty("fullScreen",!1)("name",n.CONSTANTS.OVERLAY),l.ɵɵadvance(4),l.ɵɵtextInterpolate(n.type.label.localizedValue),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",n.mode==n.MODE.ATTRIBUTES&&null!=n.postGeoObject)}}var S=function(){function e(e,t,n,r,o){this.service=e,this.spinner=t,this.modalService=n,this.authService=r,this.geometryService=o,this.MODE={VERSIONS:"VERSIONS",ATTRIBUTES:"ATTRIBUTES",HIERARCHY:"HIERARCHY",GEOMETRY:"GEOMETRY"},this.CONSTANTS={OVERLAY:a.OverlayerIdentifier.FEATURE_PANEL},this.forDate=new Date,this.forDateChange=new i.EventEmitter,this.readOnly=!1,this.featureChange=new i.EventEmitter,this.modeChange=new i.EventEmitter,this.panelCancel=new i.EventEmitter,this.panelSubmit=new i.EventEmitter,this._isValid=!0,this.mode=null,this.attribute=null,this.isNew=!1,this.isEdit=!1,this.hierarchy=null,this.reason=""}return e.prototype.ngOnInit=function(){this.isMaintainer=this.authService.isSRA()||this.authService.isOrganizationRA(this.type.organizationCode)||this.authService.isGeoObjectTypeOrSuperRM(this.type),this.mode="ATTRIBUTES"},e.prototype.ngOnChanges=function(e){null==e.type&&null==e.code||this.refresh()},e.prototype.setValid=function(e){this._isValid=e},e.prototype.isValid=function(){return this._isValid&&this.attributeEditor&&this.attributeEditor.isValid()},e.prototype.updateCode=function(e){this.code=e},e.prototype.refresh=function(){var e=this;this.postGeoObject=null,this.preGeoObject=null,this.hierarchies=null,null!=this.code&&null!=this.type&&("__NEW__"!==this.code?(this.isNew=!1,this.spinner.show(this.CONSTANTS.OVERLAY),this.service.getGeoObjectOverTime(this.code,this.type.code).then((function(t){e.preGeoObject=new r.GeoObjectOverTime(e.type,JSON.parse(JSON.stringify(t)).attributes),e.postGeoObject=new r.GeoObjectOverTime(e.type,JSON.parse(JSON.stringify(e.preGeoObject)).attributes)})).catch((function(t){e.error(t)})).finally((function(){e.spinner.hide(e.CONSTANTS.OVERLAY)})),this.spinner.show(this.CONSTANTS.OVERLAY),this.service.getHierarchiesForGeoObject(this.code,this.type.code,!1).then((function(t){e.hierarchies=t})).catch((function(t){e.error(t)})).finally((function(){e.spinner.hide(e.CONSTANTS.OVERLAY)}))):(this.isNew=!0,this.spinner.show(this.CONSTANTS.OVERLAY),this.service.newGeoObjectOverTime(this.type.code,!1).then((function(t){e.preGeoObject=new r.GeoObjectOverTime(e.type,t.geoObject.attributes),e.postGeoObject=new r.GeoObjectOverTime(e.type,JSON.parse(JSON.stringify(e.preGeoObject)).attributes),e.hierarchies=t.hierarchies,e.setEditMode(!0)})).finally((function(){e.spinner.hide(e.CONSTANTS.OVERLAY)}))))},e.prototype.editorForDateChange=function(e){this.forDateChange.emit(e)},e.prototype.onCancelInternal=function(){this.panelCancel.emit()},e.prototype.canSubmit=function(){return this.isValid()&&(this.isMaintainer||this.reason&&this.reason.trim().length>0)&&(this.isNew||this.attributeEditor&&this.attributeEditor.getChangeRequestEditor().hasChanges())},e.prototype.onSubmit=function(){var e=this;if(this.isNew){var t=this.attributeEditor.getActions()[0];this.spinner.show(this.CONSTANTS.OVERLAY),this.service.applyGeoObjectCreate(t.parentJson,t.geoObjectJson,this.isNew,this.datasetId,this.reason,!1).then((function(t){t.isChangeRequest||e.featureChange.emit(e.postGeoObject),e.panelSubmit.emit(t)})).catch((function(t){e.error(t)})).finally((function(){e.spinner.hide(e.CONSTANTS.OVERLAY)}))}else this.spinner.show(this.CONSTANTS.OVERLAY),this.service.applyGeoObjectEdit(this.postGeoObject.attributes.code,this.type.code,this.attributeEditor.getActions(),this.datasetId,this.reason,!1).then((function(t){t.isChangeRequest||e.featureChange.emit(e.postGeoObject),e.panelSubmit.emit(t)})).catch((function(t){e.error(t)})).finally((function(){e.spinner.hide(e.CONSTANTS.OVERLAY)}));this.geometryService.stopEditing()},e.prototype.onManageAttributeVersion=function(e){this.attribute=e,this.mode=this.MODE.VERSIONS},e.prototype.onManageHiearchyVersion=function(e){this.hierarchy=e,this.mode=this.MODE.HIERARCHY},e.prototype.onEditAttributes=function(){this.setEditMode(!this.isEdit)},e.prototype.setEditMode=function(e){this.isEdit=e,this.reason=null,this.modeChange.emit(this.isEdit)},e.prototype.error=function(e){this.bsModalRef=o.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.RegistryService),l.ɵɵdirectiveInject(c.NgxSpinnerService),l.ɵɵdirectiveInject(d.BsModalService),l.ɵɵdirectiveInject(p.AuthService),l.ɵɵdirectiveInject(s.GeometryService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["feature-panel"]],viewQuery:function(e,t){if(1&e&&l.ɵɵviewQuery(u,1),2&e){var n;l.ɵɵqueryRefresh(n=l.ɵɵloadQuery())&&(t.attributeEditor=n.first)}},inputs:{datasetId:"datasetId",type:"type",forDate:"forDate",readOnly:"readOnly",code:"code"},outputs:{forDateChange:"forDateChange",featureChange:"featureChange",modeChange:"modeChange",panelCancel:"panelCancel",panelSubmit:"panelSubmit"},features:[l.ɵɵNgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],["type","ball-clip-rotate-multiple","size","medium",3,"fullScreen","name"],[1,"row"],[1,"col-md-12"],[3,"geoObjectType","postGeoObject","isNew","isGeometryInlined","hierarchies","readOnly","requestedDate","forDate","datasetId","valid","calculatedDateChange",4,"ngIf"],["class","form-group","style","z-index: 0;",4,"ngIf"],[1,"button-holder","text-right",2,"margin-bottom","20px"],["type","submit","class","btn btn-primary","style","width:100%;","role","button",3,"click",4,"ngIf"],["type","button","class","btn btn-default",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary","role","button",3,"disabled","click",4,"ngIf"],[3,"geoObjectType","postGeoObject","isNew","isGeometryInlined","hierarchies","readOnly","requestedDate","forDate","datasetId","valid","calculatedDateChange"],["attributeEditor",""],[1,"form-group",2,"z-index","0"],["key","change.request.reason.label"],["rows","4","cols","50","name","reason-input","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","role","button",1,"btn","btn-primary",2,"width","100%",3,"click"],["key","changeovertime.manageVersions.button.label"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],[3,"key"]],template:function(e,t){1&e&&l.ɵɵtemplate(0,b,7,4,"div",0),2&e&&l.ɵɵproperty("ngIf",t.type)},styles:["#hierarchy-tree-container[_ngcontent-%COMP%] {\n\theight: calc(100vh - 429px);\n    overflow-y: auto;\n}\n\n.location-management-widget-section[_ngcontent-%COMP%] {\n\tmargin: 5px 0;\n}\n.location-management-widget-section[_ngcontent-%COMP%]    > select[_ngcontent-%COMP%] {\n\tfloat: none !important;\n}\n\n.list-group-item[_ngcontent-%COMP%] {\n\tborder: none;\n\tborder-bottom: 1px solid #ddd;\n\tmargin-bottom: 0;\n}\n.list-group-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n\n.breadcrumb[_ngcontent-%COMP%]{\n\tpadding: 10px 0;\n\tbackground-color: white;\n\tmargin:0;\n}\n\n.layer-toggle[_ngcontent-%COMP%] {\n\tcursor: pointer; \n\tbackground: #fff; \n\tpadding: 8px; \n\tborder-radius: 4px;\n\twidth: fit-content;\n}\n\n.layer-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n.layer-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n\tmargin-left: 5px;\n}\n\n#attributes-header[_ngcontent-%COMP%] {\n\tbackground: #adadad;\n  padding: 2px 15px;\n  margin: 10px 0;\n  color: white;\n  border-radius: 3px;\n}"]}),e}();t.FeaturePanelComponent=S,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(S,[{type:i.Component,args:[{selector:"feature-panel",templateUrl:"./feature-panel.component.html",styleUrls:["./dataset-location-manager.css"]}]}],(function(){return[{type:s.RegistryService},{type:c.NgxSpinnerService},{type:d.BsModalService},{type:p.AuthService},{type:s.GeometryService}]}),{datasetId:[{type:i.Input}],type:[{type:i.Input}],forDate:[{type:i.Input}],forDateChange:[{type:i.Output}],readOnly:[{type:i.Input}],code:[{type:i.Input}],attributeEditor:[{type:i.ViewChild,args:["attributeEditor"]}],featureChange:[{type:i.Output}],modeChange:[{type:i.Output}],panelCancel:[{type:i.Output}],panelSubmit:[{type:i.Output}]})},1120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecordPopupComponent=void 0;var i=n(0),r=(n(1043),n(0));function o(e,t){if(1&e&&(r.ɵɵelementStart(0,"div"),r.ɵɵelementStart(1,"span",3),r.ɵɵtext(2),r.ɵɵelementEnd(),r.ɵɵtext(3),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext().$implicit,i=r.ɵɵnextContext(2);r.ɵɵadvance(2),r.ɵɵtextInterpolate(n.label),r.ɵɵadvance(1),r.ɵɵtextInterpolate1(" - ",i.record.data[n.name]," ")}}function a(e,t){if(1&e&&(r.ɵɵelementContainerStart(0),r.ɵɵtemplate(1,o,4,2,"div",0),r.ɵɵelementContainerEnd()),2&e){var n=t.$implicit,i=r.ɵɵnextContext(2);r.ɵɵadvance(1),r.ɵɵproperty("ngIf","code"!==n.name&&null!=i.record.data[n.name]&&i.record.data[n.name].length>0)}}function l(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"div",4),r.ɵɵelement(1,"hr"),r.ɵɵelementStart(2,"button",5),r.ɵɵlistener("click",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext(2).onEdit()})),r.ɵɵelement(3,"localize",6),r.ɵɵelementEnd(),r.ɵɵelementEnd()}}function s(e,t){if(1&e&&(r.ɵɵelementStart(0,"div"),r.ɵɵelementStart(1,"h3"),r.ɵɵtext(2),r.ɵɵelementEnd(),r.ɵɵelement(3,"hr"),r.ɵɵtemplate(4,a,2,1,"ng-container",1),r.ɵɵtemplate(5,l,4,0,"div",2),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext();r.ɵɵadvance(2),r.ɵɵtextInterpolate2("",n.record.data.code," (",n.record.typeLabel.localizedValue,")"),r.ɵɵadvance(2),r.ɵɵproperty("ngForOf",n.record.attributes),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",n.record.edit)}}var c=function(){function e(){this.canEdit=!1,this.edit=new i.EventEmitter}return e.prototype.onEdit=function(){this.edit.emit()},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["record-popup"]],inputs:{record:"record",canEdit:"canEdit"},outputs:{edit:"edit"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["class","button-holder text-right","style","margin-bottom: 20px;",4,"ngIf"],[2,"font-weight","bold"],[1,"button-holder","text-right",2,"margin-bottom","20px"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.edit"]],template:function(e,t){1&e&&r.ɵɵtemplate(0,s,6,4,"div",0),2&e&&r.ɵɵproperty("ngIf",t.record&&t.record.data)},styles:["#hierarchy-tree-container[_ngcontent-%COMP%] {\n\theight: calc(100vh - 429px);\n    overflow-y: auto;\n}\n\n.location-management-widget-section[_ngcontent-%COMP%] {\n\tmargin: 5px 0;\n}\n.location-management-widget-section[_ngcontent-%COMP%]    > select[_ngcontent-%COMP%] {\n\tfloat: none !important;\n}\n\n.list-group-item[_ngcontent-%COMP%] {\n\tborder: none;\n\tborder-bottom: 1px solid #ddd;\n\tmargin-bottom: 0;\n}\n.list-group-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n\n.breadcrumb[_ngcontent-%COMP%]{\n\tpadding: 10px 0;\n\tbackground-color: white;\n\tmargin:0;\n}\n\n.layer-toggle[_ngcontent-%COMP%] {\n\tcursor: pointer; \n\tbackground: #fff; \n\tpadding: 8px; \n\tborder-radius: 4px;\n\twidth: fit-content;\n}\n\n.layer-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n.layer-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n\tmargin-left: 5px;\n}\n\n#attributes-header[_ngcontent-%COMP%] {\n\tbackground: #adadad;\n  padding: 2px 15px;\n  margin: 10px 0;\n  color: white;\n  border-radius: 3px;\n}"]}),e}();t.RecordPopupComponent=c,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(c,[{type:i.Component,args:[{selector:"record-popup",templateUrl:"./record-popup.component.html",styleUrls:["./dataset-location-manager.css"]}]}],null,{record:[{type:i.Input}],canEdit:[{type:i.Input}],edit:[{type:i.Output}]})},1121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransitionEventTableComponent=void 0;var i=n(0),r=n(2),o=(n(56),n(193)),a=(n(1028),n(1122)),l=(n(25),n(1015),n(0)),s=n(1028),c=n(56),d=n(1015),p=n(25),u=n(88),m=n(18),g=n(1),h=n(382),f=n(379),y=n(381);function v(e,t){if(1&e&&(l.ɵɵelementStart(0,"h5"),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=t.item;l.ɵɵadvance(1),l.ɵɵtextInterpolate2("",n.name," : ",n.code,"")}}function b(e,t){if(1&e&&(l.ɵɵelementStart(0,"option",28),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=t.$implicit;l.ɵɵproperty("value",n.code),l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.label)}}function S(e,t){1&e&&(l.ɵɵelementStart(0,"span",29),l.ɵɵelement(1,"localize",30),l.ɵɵelementEnd())}var C=function(e,t){return{"fa-pencil":e,"fa-eye":t}};function E(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"a",38),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=l.ɵɵnextContext().$implicit;return l.ɵɵnextContext().onView(e)})),l.ɵɵelementEnd()}if(2&e){var i=l.ɵɵnextContext().$implicit;l.ɵɵproperty("ngClass",l.ɵɵpureFunction2(1,C,-1!==i.permissions.indexOf("WRITE"),-1===i.permissions.indexOf("WRITE")))}}function x(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"a",39),l.ɵɵlistener("click",(function(e){l.ɵɵrestoreView(n);var t=l.ɵɵnextContext().$implicit;return l.ɵɵnextContext().deleteEvent(e,t)})),l.ɵɵelementEnd()}}function O(e,t){if(1&e&&(l.ɵɵelementStart(0,"tr",31),l.ɵɵelementStart(1,"td",32),l.ɵɵtemplate(2,E,1,4,"a",33),l.ɵɵtemplate(3,x,1,0,"a",34),l.ɵɵelementEnd(),l.ɵɵelementStart(4,"td",35),l.ɵɵelementStart(5,"h5"),l.ɵɵelementStart(6,"strong"),l.ɵɵelement(7,"date-text",36),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(8,"td",2),l.ɵɵelementStart(9,"h5"),l.ɵɵelementStart(10,"strong"),l.ɵɵtext(11),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(12,"td",37),l.ɵɵelementStart(13,"h5"),l.ɵɵelementStart(14,"strong"),l.ɵɵtext(15),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(16,"td",37),l.ɵɵelementStart(17,"h5"),l.ɵɵelementStart(18,"strong"),l.ɵɵtext(19),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(20,"td",37),l.ɵɵelementStart(21,"h5"),l.ɵɵelementStart(22,"strong"),l.ɵɵtext(23),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=t.$implicit;l.ɵɵadvance(2),l.ɵɵproperty("ngIf",n.permissions.includes("READ")),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",n.permissions.includes("DELETE")),l.ɵɵadvance(4),l.ɵɵproperty("date",n.eventDate),l.ɵɵadvance(4),l.ɵɵtextInterpolate(n.description.localizedValue),l.ɵɵadvance(4),l.ɵɵtextInterpolate(n.beforeTypeLabel),l.ɵɵadvance(4),l.ɵɵtextInterpolate(n.afterTypeLabel),l.ɵɵadvance(4),l.ɵɵtextInterpolate(n.eventId)}}function I(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",40),l.ɵɵelementStart(1,"div",41),l.ɵɵelementStart(2,"button",42),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().onCreate()})),l.ɵɵelement(3,"localize",43),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}}function M(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",26),l.ɵɵelementStart(1,"pagination-controls",44),l.ɵɵlistener("pageChange",(function(e){return l.ɵɵrestoreView(n),l.ɵɵnextContext().refresh(e)})),l.ɵɵelementEnd(),l.ɵɵelementEnd()}}var w=function(){return["form-control"]},T=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}},k=function(){function e(e,t,n,i,r,o){this.service=e,this.modalService=t,this.iService=n,this.dateService=i,this.authService=r,this.localizeService=o,this.page={count:0,pageNumber:1,pageSize:10,resultSet:[]},this.attrConditions=[],this.dateCondition={attribute:"eventDate",startDate:"",endDate:""},this.beforeTypeCondition={attribute:"beforeTypeCode",value:""},this.types=[],this.readOnly=!0}return e.prototype.ngOnInit=function(){var e=this;this.readOnly=!this.authService.isSRA()&&!this.authService.isRA()&&!this.authService.isRM(),this.refresh(),this.attrConditions.push(this.dateCondition),this.attrConditions.push(this.beforeTypeCondition),this.iService.listGeoObjectTypes(!1).then((function(t){e.types=e.filterTypesBasedOnMyOrg(t)})).catch((function(t){e.error(t)}))},e.prototype.filterTypesBasedOnMyOrg=function(e){for(var t=this.authService.isSRA(),n=[],i=this.authService.getMyOrganizations(),r=0;r<e.length;++r){var o=e[r],a=o.orgCode;(-1!==i.indexOf(a)||t)&&n.push(o)}return n},e.prototype.refresh=function(e){var t=this;void 0===e&&(e=1),this.service.getPage(this.page.pageSize,e,this.attrConditions).then((function(e){t.page=e})).catch((function(e){t.error(e)}))},e.prototype.filterChange=function(){this.refresh(this.page.pageNumber)},e.prototype.onCreate=function(){var e=this;this.bsModalRef=this.modalService.show(a.TransitionEventModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.init(!1),this.bsModalRef.content.onEventChange.subscribe((function(t){e.refresh(e.page.pageNumber)}))},e.prototype.deleteEvent=function(e,t){var n=this;e.stopPropagation(),this.bsModalRef=this.modalService.show(o.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+t.eventId+"]",this.bsModalRef.content.data=t,this.bsModalRef.content.type="DANGER",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.onConfirm.subscribe((function(e){n.service.delete(t).then((function(e){n.refresh(n.page.pageNumber)})).catch((function(e){n.error(e)}))}))},e.prototype.onView=function(e){var t=this;this.service.getDetails(e.oid).then((function(e){t.bsModalRef=t.modalService.show(a.TransitionEventModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),t.bsModalRef.content.init(!1,e),t.bsModalRef.content.onEventChange.subscribe((function(e){t.refresh(t.page.pageNumber)}))})).catch((function(e){t.error(e)}))},e.prototype.error=function(e){this.bsModalRef=o.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.TransitionEventService),l.ɵɵdirectiveInject(c.BsModalService),l.ɵɵdirectiveInject(d.IOService),l.ɵɵdirectiveInject(p.DateService),l.ɵɵdirectiveInject(p.AuthService),l.ɵɵdirectiveInject(p.LocalizationService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["transition-event-table"]],decls:44,vars:25,consts:[["customItemTemplate",""],[1,"row",2,"padding-top","10px","padding-bottom","10px"],[1,"col-md-4"],["for","beforeTypeFilter"],["key","transition.event.beforeType"],["id","beforeTypeFilter","name","beforeTypeFilter",1,"select-area",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["for","startDateFilter"],["key","changeovertime.manageVersions.tableHeader.label.startDate"],["label","","name","startDateFilter","customStyles","width:100%; height:40px;",3,"value","classNames","inputName","allowFutureDates","required","valueChange","change"],["for","endDateFilter"],["key","changeovertime.manageVersions.tableHeader.label.endDate"],["label","","name","endDateFilter","customStyles","width:100%; height:40px;",3,"value","classNames","inputName","allowFutureDates","required","valueChange","change"],[1,"row"],["class","col-md-8 error-message","style","text-align:center;",4,"ngIf"],[1,"col-md-12"],[1,"table"],[2,"height","50px","color","grey"],[2,"vertical-align","middle"],["key","transition.event.actions"],["key","transition.event.date"],["key","transition.event.description"],["key","transition.event.afterType"],["key","transition.event.id"],["ngFor","",3,"ngForOf"],["style","margin-top: 30px; margin-bottom: 30px;","class","row",4,"ngIf"],[1,"solid-table-footer"],["class","solid-table-footer",4,"ngIf"],[3,"value"],[1,"col-md-8","error-message",2,"text-align","center"],["key","manage.versions.startdate.later.enddate.message"],[2,"height","50px"],[1,"col-md-1",2,"vertical-align","middle","text-align","left"],["class","fa","aria-hidden","true",3,"ngClass","click",4,"ngIf"],["class","fa fa-trash","aria-hidden","true",3,"click",4,"ngIf"],[1,"col-md-1"],[3,"date"],[1,"col-md-2"],["aria-hidden","true",1,"fa",3,"ngClass","click"],["aria-hidden","true",1,"fa","fa-trash",3,"click"],[1,"row",2,"margin-top","30px","margin-bottom","30px"],[1,"col-md-6"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","hierarchy.management.button.create"],[3,"pageChange"]],template:function(e,t){1&e&&(l.ɵɵtemplate(0,v,2,2,"ng-template",null,0,l.ɵɵtemplateRefExtractor),l.ɵɵelementStart(2,"div"),l.ɵɵelementStart(3,"div",1),l.ɵɵelementStart(4,"span",2),l.ɵɵelementStart(5,"label",3),l.ɵɵelement(6,"localize",4),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"select",5),l.ɵɵlistener("ngModelChange",(function(e){return t.beforeTypeCondition.value=e}))("change",(function(){return t.filterChange()})),l.ɵɵelement(8,"option"),l.ɵɵtemplate(9,b,2,2,"option",6),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(10,"span",2),l.ɵɵelementStart(11,"label",7),l.ɵɵelement(12,"localize",8),l.ɵɵelementEnd(),l.ɵɵelementStart(13,"date-field",9),l.ɵɵlistener("valueChange",(function(e){return t.dateCondition.startDate=e}))("change",(function(){return t.filterChange()})),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(14,"span",2),l.ɵɵelementStart(15,"label",10),l.ɵɵelement(16,"localize",11),l.ɵɵelementEnd(),l.ɵɵelementStart(17,"date-field",12),l.ɵɵlistener("valueChange",(function(e){return t.dateCondition.endDate=e}))("change",(function(){return t.filterChange()})),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(18,"div",13),l.ɵɵelement(19,"span",2),l.ɵɵtemplate(20,S,2,0,"span",14),l.ɵɵelementEnd(),l.ɵɵelementStart(21,"div",13),l.ɵɵelementStart(22,"div",15),l.ɵɵelementStart(23,"table",16),l.ɵɵelementStart(24,"thead"),l.ɵɵelementStart(25,"tr",17),l.ɵɵelementStart(26,"th",18),l.ɵɵelement(27,"localize",19),l.ɵɵelementEnd(),l.ɵɵelementStart(28,"th",18),l.ɵɵelement(29,"localize",20),l.ɵɵelementEnd(),l.ɵɵelementStart(30,"th",18),l.ɵɵelement(31,"localize",21),l.ɵɵelementEnd(),l.ɵɵelementStart(32,"th",18),l.ɵɵelement(33,"localize",4),l.ɵɵelementEnd(),l.ɵɵelementStart(34,"th",18),l.ɵɵelement(35,"localize",22),l.ɵɵelementEnd(),l.ɵɵelementStart(36,"th",18),l.ɵɵelement(37,"localize",23),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(38,"tbody"),l.ɵɵtemplate(39,O,24,7,"ng-template",24),l.ɵɵpipe(40,"paginate"),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(41,I,4,0,"div",25),l.ɵɵelementStart(42,"div",26),l.ɵɵtemplate(43,M,2,0,"div",27),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e&&(l.ɵɵadvance(7),l.ɵɵproperty("ngModel",t.beforeTypeCondition.value),l.ɵɵadvance(2),l.ɵɵproperty("ngForOf",t.types),l.ɵɵadvance(4),l.ɵɵproperty("value",t.dateCondition.startDate)("classNames",l.ɵɵpureFunction0(19,w))("inputName","startDateFilter")("allowFutureDates",!1)("required",!1),l.ɵɵadvance(4),l.ɵɵproperty("value",t.dateCondition.endDate)("classNames",l.ɵɵpureFunction0(20,w))("inputName","endDateFilter")("allowFutureDates",!1)("required",!1),l.ɵɵadvance(3),l.ɵɵproperty("ngIf",t.dateService.after(t.dateCondition.startDate,t.dateCondition.endDate)),l.ɵɵadvance(19),l.ɵɵproperty("ngForOf",l.ɵɵpipeBind2(40,16,t.page.resultSet,l.ɵɵpureFunction3(21,T,t.page.pageSize,t.page.pageNumber,t.page.count))),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",!t.readOnly),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",t.page.resultSet.length>0))},directives:[u.LocalizeComponent,m.SelectControlValueAccessor,m.NgControlStatus,m.NgModel,m.NgSelectOption,m.ɵangular_packages_forms_forms_z,g.NgForOf,h.DateFieldComponent,g.NgIf,f.DateTextComponent,g.NgClass,y.PaginationControlsComponent],pipes:[y.PaginatePipe],styles:[".vertical-center {\n\tposition: relative;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n}\n\n.fa.fa-pencil {\n\tmargin-right:10px;\n}\n\n.status-pending {\n\tcolor: orange;\n}\n\n.status-accepted,\n.status-partial {\n\tcolor: #6BA542;\n}\n\n.status-rejected {\n\tcolor: #d43f3a;\n}\n\n.status-pending-container {\n\tborder: solid 2px orange;\n}\n.status-accepted-container,\n.status-partial-container {\n\tborder: solid 2px #6BA542;\n}\n.status-rejected-container {\n\tborder: solid 2px #d43f3a;\n}\n\n.cr-filter-link-active,\n.cr-filter-link-active:active {\n\t/* border: solid 1px #6BA542; */\n    border-radius: 10px;\n    background: #6BA542;\n    color: white;\n    font-weight: bold;\n    padding: 3px 15px 3px 15px;\n}\n.cr-filter-link-active:hover,\n.cr-filter-link-active:focus {\n\tcolor:white;\n}\n\n/* .btn {\n\tborder: 2px solid; \n}\n.btn:disabled {\n\tborder: none;\n}\n\n.btn.btn-danger {\n\tbackground-color:#ffeeed; \n\tcolor:#d43f3a;\n}\n.btn.btn-danger:hover,\n.btn.btn-danger:active {\n\tcolor:#d43f3a;\n\tbackground-color:#fff7f6; \n\tborder-color: #d43f3a;\n}\n.btn.btn-danger:disabled:hover {\n\tbackground-color:#ffeeed; \n}\n\n.btn.btn-warning {\n\tbackground-color: #ffefd7;\n\tcolor: orange;\n}\n.btn.btn-warning:hover {\n\tbackground-color: #fff4e5;\n\tborder-color: orange;\n}\n.btn.btn-warning:disabled {\n\tbackground-color: #ffefd7;\n}\n\n.clickable:hover {\n\tbackground-color: #f7f7f7;\n\tcursor: pointer;\n}\n.clickable:hover .arrow.arrow-right {\n\ttransform: rotate(45deg);\n    -webkit-transform: rotate(45deg);\n} */\n\ntr.row-active {\n\tbackground-color:#f7f7f7;\n}\n\n\n.arrow {\n  border: solid black;\n  border-width: 0 1px 1px 0;\n  display: inline-block;\n  padding: 5px;\n}\n.arrow-right {\n  transform: rotate(-45deg);\n  -webkit-transform: rotate(-45deg);\n}\n.arrow-down {\n  transform: rotate(45deg);\n  -webkit-transform: rotate(45deg);\n}\n\n.form-group textarea:focus {\n\tborder-color: #edf4e8;\n\t-webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(107,165,66,.6);\n\tbox-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(107,165,66,.6);\n\n}\ntextarea[readonly]:focus {\n\tbox-shadow: none;\n\tborder: 1px solid #ccc;\n\tcursor: not-allowed;\n}\n\n\n.geoobject-panel-header{\n    width: 100%;\n    background: grey;\n    color: white;\n    padding: 10px;\n}\n"],encapsulation:2,data:{animation:[[r.trigger("fadeInOut",[r.transition(":enter",[r.style({opacity:0}),r.animate("300ms")]),r.transition(":leave",r.animate("100ms",r.style({opacity:0})))]),r.trigger("fadeIn",[r.transition(":enter",[r.style({opacity:0}),r.animate("500ms")])])]]}}),e}();t.TransitionEventTableComponent=k,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(k,[{type:i.Component,args:[{selector:"transition-event-table",templateUrl:"./transition-event-table.component.html",styleUrls:["./transition-event-table.css"],encapsulation:i.ViewEncapsulation.None,animations:[[r.trigger("fadeInOut",[r.transition(":enter",[r.style({opacity:0}),r.animate("300ms")]),r.transition(":leave",r.animate("100ms",r.style({opacity:0})))]),r.trigger("fadeIn",[r.transition(":enter",[r.style({opacity:0}),r.animate("500ms")])])]]}]}],(function(){return[{type:s.TransitionEventService},{type:c.BsModalService},{type:d.IOService},{type:p.DateService},{type:p.AuthService},{type:p.LocalizationService}]}),null)},1122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransitionEventModalComponent=t.GRAPH_LINE_COLOR=t.GRAPH_CIRCLE_FILL=t.GRAPH_GO_LABEL_COLOR=t.GRAPH_ACTIVE_TRANSITION_HIGHLIGHT_COLOR=t.VIEWPORT_SCALE_FACTOR_Y=t.VIEWPORT_SCALE_FACTOR_X=t.DRAW_SCALE_MULTIPLIER=void 0;var i=n(0),r=(n(56),n(44)),o=(n(1015),n(194),n(193)),a=(n(25),n(1028),n(858)),l=n(860),s=n(0),c=n(1028),d=n(1015),p=n(25),u=n(56),m=n(194),g=n(1),h=n(18),f=n(88),y=n(379),v=n(382),b=n(545),S=n(865),C=n(292),E=["typeaheadParent"];function x(e,t){if(1&e&&(s.ɵɵelementStart(0,"h5"),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=t.item;s.ɵɵadvance(1),s.ɵɵtextInterpolate2("",n.name," : ",n.code,"")}}function O(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",6),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext();s.ɵɵadvance(1),s.ɵɵtextInterpolate(n.message)}}function I(e,t){if(1&e&&(s.ɵɵelementStart(0,"span",29),s.ɵɵelement(1,"date-text",30),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2);s.ɵɵadvance(1),s.ɵɵproperty("date",n.event.eventDate)}}var M=function(){return["form-control"]};function w(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"date-field",31),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).event.eventDate=e}))("validChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).validChange(e)})),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2);s.ɵɵproperty("value",i.event.eventDate)("classNames",s.ɵɵpureFunction0(6,M))("inputName","eventDate")("allowFutureDates",!1)("required",!0)("disable",i.readonly||i.event.transitions.length>0)}}function T(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",8),s.ɵɵelementStart(1,"div",9),s.ɵɵelementStart(2,"label"),s.ɵɵelement(3,"localize",32),s.ɵɵelementStart(4,"span",33),s.ɵɵtext(5," ("),s.ɵɵelement(6,"convert-key-label",27),s.ɵɵtext(7,")"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(8,"div",11),s.ɵɵelementStart(9,"input",34),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit,i=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("key",n.locale),s.ɵɵadvance(3),s.ɵɵproperty("ngModel",n.value)("name","label-"+n.locale)("disabled",i.readonly)("required",!1)}}function k(e,t){if(1&e&&(s.ɵɵelementStart(0,"option",37),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=t.$implicit;s.ɵɵproperty("value",n.code),s.ɵɵadvance(1),s.ɵɵtextInterpolate(n.label)}}function P(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",11),s.ɵɵelementStart(1,"select",35),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).event.beforeTypeCode=e}))("change",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).onChange()})),s.ɵɵelement(2,"option"),s.ɵɵtemplate(3,k,2,2,"option",36),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2);s.ɵɵadvance(1),s.ɵɵproperty("ngModel",i.event.beforeTypeCode)("disabled",i.event.transitions.length>0),s.ɵɵadvance(2),s.ɵɵproperty("ngForOf",i.beforeTypes)}}function j(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",11),s.ɵɵelementStart(1,"input",38),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).event.beforeTypeLabel=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2);s.ɵɵadvance(1),s.ɵɵproperty("ngModel",i.event.beforeTypeLabel)}}function z(e,t){if(1&e&&(s.ɵɵelementStart(0,"option",37),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=t.$implicit;s.ɵɵproperty("value",n.code),s.ɵɵadvance(1),s.ɵɵtextInterpolate(n.label)}}function D(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",11),s.ɵɵelementStart(1,"select",39),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).event.afterTypeCode=e}))("change",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).onChange()})),s.ɵɵelement(2,"option"),s.ɵɵtemplate(3,z,2,2,"option",36),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2);s.ɵɵadvance(1),s.ɵɵproperty("ngModel",i.event.afterTypeCode)("disabled",i.event.transitions.length>0),s.ɵɵadvance(2),s.ɵɵproperty("ngForOf",i.afterTypes)}}function R(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",11),s.ɵɵelementStart(1,"input",40),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).event.afterTypeLabel=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2);s.ɵɵadvance(1),s.ɵɵproperty("ngModel",i.event.afterTypeLabel)}}function L(e,t){1&e&&s.ɵɵelement(0,"th")}function _(e,t){1&e&&s.ɵɵelement(0,"th",47)}function A(e,t){1&e&&(s.ɵɵelementStart(0,"tr",53),s.ɵɵelement(1,"td",54),s.ɵɵelementEnd())}function N(e,t){1&e&&(s.ɵɵelementStart(0,"td",66),s.ɵɵelement(1,"a",67),s.ɵɵelementEnd())}function V(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"span",68),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=s.ɵɵnextContext().$implicit;return s.ɵɵnextContext(3).clear(e,"sourceText")})),s.ɵɵelement(1,"i",69),s.ɵɵelementEnd()}}function F(e,t){1&e&&s.ɵɵelement(0,"span",70)}function H(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"span",68),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=s.ɵɵnextContext().$implicit;return s.ɵɵnextContext(3).clear(e,"targetText")})),s.ɵɵelement(1,"i",69),s.ɵɵelementEnd()}}function G(e,t){1&e&&s.ɵɵelement(0,"span",70)}function B(e,t){if(1&e&&(s.ɵɵelementStart(0,"label"),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit,i=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵtextInterpolate(i.localizeTransitionType(n.transitionType))}}function q(e,t){if(1&e&&(s.ɵɵelementStart(0,"label",72),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit,i=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵtextInterpolate(i.localizeTransitionType(n.typePart))}}function U(e,t){if(1&e&&(s.ɵɵelementStart(0,"td",63),s.ɵɵtemplate(1,B,2,1,"label",5),s.ɵɵtemplate(2,q,2,1,"label",71),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext().$implicit;s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!n.typeUpdown),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.typePart)}}function $(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"select",74),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).$implicit.typeUpdown=e}))("change",(function(){s.ɵɵrestoreView(n);var e=s.ɵɵnextContext(2).$implicit;return s.ɵɵnextContext(3).onChangeTypeUpdown(e)})),s.ɵɵelementStart(1,"option",75),s.ɵɵelement(2,"localize",76),s.ɵɵelementEnd(),s.ɵɵelementStart(3,"option",77),s.ɵɵelement(4,"localize",78),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2),r=i.$implicit,o=i.index,a=s.ɵɵnextContext(3);s.ɵɵproperty("name","transition.transitionType-updown-"+r.oid+"-"+o)("ngModel",r.typeUpdown)("disabled",a.readonly)}}function J(e,t){if(1&e&&(s.ɵɵelementStart(0,"td"),s.ɵɵtemplate(1,$,5,3,"select",73),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext().$implicit;s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.typeUpdown)}}function W(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"td",63),s.ɵɵelementStart(1,"span",79),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=s.ɵɵnextContext().index;return s.ɵɵnextContext(3).remove(e)})),s.ɵɵelement(2,"a",80),s.ɵɵelementEnd(),s.ɵɵelementEnd()}}function Y(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"tr",55),s.ɵɵlistener("dndStart",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext(3);return t.readonly?null:t.onDragStart(e)}))("dndCopied",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext(3);return t.readonly?null:t.onDraggableCopied(e)}))("dndLinked",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext(3);return t.readonly?null:t.onDraggableLinked(e)}))("dndMoved",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext(3);return t.readonly?null:t.onDraggableMoved(e)}))("dndCanceled",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext(3);return t.readonly?null:t.onDragCanceled(e)}))("dndEnd",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext(3);return t.readonly?null:t.onDragEnd(e)})),s.ɵɵtemplate(1,N,2,0,"td",56),s.ɵɵelementStart(2,"td"),s.ɵɵelementStart(3,"div",57),s.ɵɵelementStart(4,"input",58),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.sourceText=e}))("typeaheadOnSelect",(function(e){s.ɵɵrestoreView(n);var i=t.$implicit;return s.ɵɵnextContext(3).typeaheadOnSelect(e,i,"sourceText")})),s.ɵɵelementEnd(),s.ɵɵelementStart(5,"div",59),s.ɵɵelement(6,"div",60),s.ɵɵelementEnd(),s.ɵɵtemplate(7,V,2,0,"span",61),s.ɵɵtemplate(8,F,1,0,"span",62),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(9,"td",63),s.ɵɵelementStart(10,"label"),s.ɵɵtext(11),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(12,"td"),s.ɵɵelementStart(13,"div",57),s.ɵɵelementStart(14,"input",58),s.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.targetText=e}))("typeaheadOnSelect",(function(e){s.ɵɵrestoreView(n);var i=t.$implicit;return s.ɵɵnextContext(3).typeaheadOnSelect(e,i,"targetText")})),s.ɵɵelementEnd(),s.ɵɵelementStart(15,"div",59),s.ɵɵelement(16,"div",60),s.ɵɵelementEnd(),s.ɵɵtemplate(17,H,2,0,"span",61),s.ɵɵtemplate(18,G,1,0,"span",62),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(19,U,3,2,"td",64),s.ɵɵtemplate(20,J,2,1,"td",5),s.ɵɵtemplate(21,W,3,0,"td",65),s.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=t.index,o=s.ɵɵnextContext(3),a=s.ɵɵreference(1);s.ɵɵproperty("dndDraggable",o.readonly?null:i)("dndEffectAllowed",o.readonly?null:o.draggable.effectAllowed)("dndDisableIf",o.readonly?null:o.draggable.disable),s.ɵɵattribute("data-transOid",i.oid),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!o.readonly),s.ɵɵadvance(3),s.ɵɵproperty("name","transition.source-"+i.oid+"-"+r)("disabled",o.readonly)("ngModel",i.sourceText)("typeaheadAsync",!0)("typeahead",o.getTypeAheadObservable(!0,i,o.event.beforeTypeCode,"sourceText"))("typeaheadOptionsLimit",7)("typeaheadItemTemplate",a)("typeaheadMinLength",0)("typeaheadWaitMs",300)("container","#typeaheadParentS-"+r),s.ɵɵadvance(2),s.ɵɵproperty("id","typeaheadParentS-"+r),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!o.readonly),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",o.readonly),s.ɵɵadvance(3),s.ɵɵtextInterpolate(o.localizeTransitionImpact(i.impact)),s.ɵɵadvance(3),s.ɵɵproperty("name","transition.target-"+i.oid+"-"+r)("disabled",o.readonly)("ngModel",i.targetText)("typeaheadAsync",!0)("typeahead",o.getTypeAheadObservable(!1,i,o.event.afterTypeCode,"targetText"))("typeaheadOptionsLimit",7)("typeaheadItemTemplate",a)("typeaheadMinLength",0)("typeaheadWaitMs",300)("container","#typeaheadParentT-"+r),s.ɵɵadvance(2),s.ɵɵproperty("id","typeaheadParentT-"+r),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!o.readonly),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",o.readonly),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.typePart||!i.typeUpdown),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.typeUpdown),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!o.readonly)}}function K(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",81),s.ɵɵelementStart(1,"div",7),s.ɵɵelementStart(2,"i",82),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(3).onCreate()})),s.ɵɵelement(3,"localize",83),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}}function Q(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",8),s.ɵɵelementStart(1,"table",41),s.ɵɵelementStart(2,"thead"),s.ɵɵelementStart(3,"tr",42),s.ɵɵtemplate(4,L,1,0,"th",5),s.ɵɵelementStart(5,"th",43),s.ɵɵelement(6,"localize",21),s.ɵɵelementEnd(),s.ɵɵelementStart(7,"th",44),s.ɵɵelement(8,"localize",45),s.ɵɵelementEnd(),s.ɵɵelementStart(9,"th",43),s.ɵɵelement(10,"localize",22),s.ɵɵelementEnd(),s.ɵɵelementStart(11,"th",44),s.ɵɵelement(12,"localize",46),s.ɵɵelementEnd(),s.ɵɵelement(13,"th",47),s.ɵɵtemplate(14,_,1,0,"th",48),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(15,"tbody",49),s.ɵɵlistener("dndDrop",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext(2);return t.readonly?null:t.onDrop(e)})),s.ɵɵtemplate(16,A,2,0,"tr",50),s.ɵɵtemplate(17,Y,22,35,"tr",51),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(18,K,4,0,"div",52),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2);s.ɵɵadvance(4),s.ɵɵproperty("ngIf",!i.readonly),s.ɵɵadvance(10),s.ɵɵproperty("ngIf",!i.readonly),s.ɵɵadvance(1),s.ɵɵproperty("dndDropzone",!i.readonly||null)("dndEffectAllowed",i.readonly?null:"copyMove"),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!i.readonly),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",i.event.transitions),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!i.readonly)}}function X(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"button",84),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).onSubmit()})),s.ɵɵelement(1,"localize",85),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2),r=s.ɵɵreference(5);s.ɵɵproperty("disabled",r.invalid||!i.valid)}}function Z(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"fieldset"),s.ɵɵelementStart(1,"div",7),s.ɵɵelementStart(2,"div",8),s.ɵɵelementStart(3,"div",9),s.ɵɵelementStart(4,"label"),s.ɵɵelement(5,"localize",10),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(6,"div",11),s.ɵɵtemplate(7,I,2,1,"span",12),s.ɵɵtemplate(8,w,1,7,"date-field",13),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(9,T,10,5,"div",14),s.ɵɵelementStart(10,"div",8),s.ɵɵelementStart(11,"div",9),s.ɵɵelementStart(12,"label",15),s.ɵɵelement(13,"localize",16),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(14,P,4,3,"div",17),s.ɵɵtemplate(15,j,2,1,"div",17),s.ɵɵelementEnd(),s.ɵɵelementStart(16,"div",8),s.ɵɵelementStart(17,"div",9),s.ɵɵelementStart(18,"label",18),s.ɵɵelement(19,"localize",19),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵtemplate(20,D,4,3,"div",17),s.ɵɵtemplate(21,R,2,1,"div",17),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(22,"div",7),s.ɵɵelementStart(23,"div",20),s.ɵɵelementStart(24,"label",7),s.ɵɵelement(25,"localize",21),s.ɵɵelementEnd(),s.ɵɵelementStart(26,"label",7),s.ɵɵelement(27,"localize",22),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(28,"div",23),s.ɵɵelementEnd(),s.ɵɵtemplate(29,Q,19,7,"div",24),s.ɵɵelementStart(30,"div",8),s.ɵɵelement(31,"div",9),s.ɵɵelementStart(32,"div",11),s.ɵɵelementStart(33,"div",25),s.ɵɵelementStart(34,"button",26),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onCancel()})),s.ɵɵelement(35,"localize",27),s.ɵɵelementEnd(),s.ɵɵtemplate(36,X,2,1,"button",28),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext();s.ɵɵadvance(7),s.ɵɵproperty("ngIf",i.readonly),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!i.readonly),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",i.event.description.localeValues),s.ɵɵadvance(5),s.ɵɵproperty("ngIf",!i.readonly&&null!=i.beforeTypes),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.readonly),s.ɵɵadvance(5),s.ɵɵproperty("ngIf",!i.readonly&&null!=i.afterTypes),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",i.readonly),s.ɵɵadvance(8),s.ɵɵproperty("ngIf",null!=i.event.beforeTypeCode&&""!==i.event.beforeTypeCode&&null!=i.event.afterTypeCode&&""!==i.event.afterTypeCode&&null!=i.event.eventDate&&""!==i.event.eventDate),s.ɵɵadvance(6),s.ɵɵproperty("key",i.readonly?"io.back":"io.cancel"),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!i.readonly)}}t.DRAW_SCALE_MULTIPLIER=1,t.VIEWPORT_SCALE_FACTOR_X=1,t.VIEWPORT_SCALE_FACTOR_Y=1,t.GRAPH_ACTIVE_TRANSITION_HIGHLIGHT_COLOR="#6BA542",t.GRAPH_GO_LABEL_COLOR="black",t.GRAPH_CIRCLE_FILL="#999",t.GRAPH_LINE_COLOR="#999";var ee=function(){function e(e,t,n,i,r,o,a,l){this.service=e,this.changeDetector=t,this.rService=n,this.iService=i,this.lService=r,this.bsModalRef=o,this.authService=a,this.dateService=l,this.message=null,this.event=null,this.activeTransition=null,this.afterTypes=[],this.beforeTypes=[],this.readonly=!1,this.valid=!1,this.draggable={data:"myDragData",effectAllowed:"all",disable:!1,handle:!0}}return e.prototype.ngOnInit=function(){var e=this;this.onEventChange=new r.Subject,this.iService.listGeoObjectTypes(!1).then((function(t){for(var n=e.authService.getMyOrganizations(),i=[],r=[],o=e.authService.isSRA(),a=0;a<t.length;++a){var l=t[a].orgCode,s=null!=t[a].superTypeCode?t[a].superTypeCode:t[a].code;(-1!==n.indexOf(l)||o)&&(r.push(t[a]),e.authService.isGeoObjectTypeRM(l,s)&&i.push(t[a]))}e.beforeTypes=i,e.afterTypes=r,e.readonly=e.readonly||-1===e.event.permissions.indexOf("WRITE")})).catch((function(t){e.error(t)}))},e.prototype.ngOnDestroy=function(){this.onEventChange.unsubscribe()},e.prototype.init=function(e,t){var n=this;this.readonly=e,this.event=null!=t?t:{beforeTypeCode:"",afterTypeCode:"",eventDate:"",permissions:["WRITE","READ","DELETE","CREATE"],description:this.lService.create(),transitions:[]},setTimeout((function(){n.onChange()}),0)},e.prototype.setActiveTransition=function(e){var n=function(e,n){l.selectAll('#svgHolder p[data-goCode="'+n.sourceCode+'"][data-depth="1"],p[data-goCode="'+n.targetCode+'"][data-depth="2"]').style("color",e?t.GRAPH_ACTIVE_TRANSITION_HIGHLIGHT_COLOR:t.GRAPH_GO_LABEL_COLOR),l.selectAll('#svgHolder circle[data-goCode="'+n.sourceCode+'"][data-depth="1"],circle[data-goCode="'+n.targetCode+'"][data-depth="2"]').attr("fill",e?t.GRAPH_ACTIVE_TRANSITION_HIGHLIGHT_COLOR:t.GRAPH_CIRCLE_FILL),l.selectAll('#svgHolder path[data-transOid="'+n.oid+'"]').attr("stroke",e?t.GRAPH_ACTIVE_TRANSITION_HIGHLIGHT_COLOR:t.GRAPH_LINE_COLOR)};null!=this.activeTransition&&n(!1,this.activeTransition),this.activeTransition=e,null!=e&&n(!0,e)},e.prototype.onCreate=function(){this.event.transitions.push({oid:a.v4(),isNew:!0,sourceCode:"",sourceType:"",targetCode:"",targetType:"",transitionType:"",impact:"",order:this.event.transitions.length})},e.prototype.onChange=function(){this.calculateDerivedAttributes(),this.renderVisual();var e=this;setTimeout((function(){l.selectAll(".transition").on("mouseover",(function(t){var n=this.getAttribute("data-transOid"),i=e.event.transitions.findIndex((function(e){return e.oid===n}));e.setActiveTransition(e.event.transitions[i])})),l.select("#transition-container").on("mouseleave",(function(t){e.setActiveTransition(null)}))}),0),this.validChange()},e.prototype.getTypeAheadObservable=function(e,t,n,i){var o=this,a=e?this.dateService.addDay(-1,this.event.eventDate):this.event.eventDate;return new r.Observable((function(r){o.rService.getGeoObjectSuggestions(t[i],n,null,null,null,a,a).then((function(n){var i=n.filter((function(n){for(var i=e?n.code:t.sourceCode,r=e?t.targetCode:n.code,a=0;a<o.event.transitions.length;++a){var l=o.event.transitions[a];if(l.sourceCode===i&&l.targetCode===r)return!1}return!0}));r.next(i)}))}))},e.prototype.typeaheadOnSelect=function(e,t,n){"targetText"===n?(t.targetCode=e.item.code,t.targetType=e.item.typeCode,t.targetText=e.item.name+" ("+e.item.code+")"):(t.sourceCode=e.item.code,t.sourceType=e.item.typeCode,t.sourceText=e.item.name+" ("+e.item.code+")"),this.onChange()},e.prototype.clear=function(e,t){"targetText"===t?(e.targetCode="",e.targetType="",e.targetText=""):(e.sourceCode="",e.sourceType="",e.sourceText=""),this.onChange()},e.prototype.localizeTransitionImpact=function(e){return this.lService.decode("transition.event."+e.toLowerCase())},e.prototype.localizeTransitionType=function(e){return null==e?null:this.lService.decode("transition.event.type."+e.toLowerCase())},e.prototype.validChange=function(){var e=this;setTimeout((function(){e.valid=null!=e.event.eventDate&&e.event.eventDate.length>0&&e.event.transitions.length>0&&null!=e.event.afterTypeCode&&null!=e.event.beforeTypeCode}),0)},e.prototype.remove=function(e){this.event.transitions.splice(e,1),this.onChange()},e.prototype.onSubmit=function(){var e=this;this.service.apply(this.event).then((function(t){e.onEventChange.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.prototype.calculateDerivedAttributes=function(){var e={};this.event.transitions.forEach((function(t){null!=t.sourceCode&&""!==t.sourceCode&&null!=t.targetCode&&""!==t.targetCode&&(null==e[t.sourceCode]?e[t.sourceCode]={source:1,target:0}:e[t.sourceCode].source++,null==e[t.targetCode]?e[t.targetCode]={source:0,target:1}:e[t.targetCode].target++)})),this.event.transitions.forEach((function(t){if(null!=t.sourceCode&&""!==t.sourceCode&&null!=t.targetCode&&""!==t.targetCode){var n=e[t.sourceCode],i=e[t.targetCode],r="UPGRADE";null!=t.transitionType&&-1!==t.transitionType.indexOf("DOWNGRADE")&&(r="DOWNGRADE"),1===n.source&&1===i.target?(t.transitionType="REASSIGN",t.impact="FULL"):n.source>1?(t.impact="PARTIAL",i.target>1?t.transitionType="MERGE":t.transitionType="SPLIT"):i.target>1&&(t.impact="FULL",t.transitionType="MERGE"),t.sourceType!==t.targetType?"REASSIGN"===t.transitionType?(t.typeUpdown=r,delete t.typePart,t.transitionType=t.typeUpdown):(t.typeUpdown=r,t.typePart=t.transitionType,t.transitionType=t.typeUpdown+"_"+t.typePart):delete t.typePart}}))},e.prototype.onChangeTypeUpdown=function(e){e.typePart?e.transitionType=e.typeUpdown+"_"+e.typePart:e.transitionType=e.typeUpdown},e.prototype.onDragStart=function(e){},e.prototype.onDragEnd=function(e){},e.prototype.onDragged=function(e,t){},e.prototype.onDraggableCopied=function(e){},e.prototype.onDraggableLinked=function(e){},e.prototype.onDraggableMoved=function(e){},e.prototype.onDragCanceled=function(e){},e.prototype.onDragover=function(e){},e.prototype.onDrop=function(e){var t=this,n=e.data,i=e.index;this.event.transitions.splice(n.order,1);var r=i>n.order?i-1:i;this.event.transitions.splice(r,0,n);for(var o=0;o<this.event.transitions.length;++o)this.event.transitions[o].order=o;window.setTimeout((function(){t.onChange()}),0)},e.prototype.renderVisual=function(){if(null!=this.event.transitions&&0!==this.event.transitions.length){l.select("#svg").remove();var e=l.select("#svg");null==e.node()&&(e=l.select("#svgHolder").append("svg")).attr("id","svg");var n,i,r=this.generateAppData(),o=this.generateRenderingData(r);n=o.d3,(i=e.append("g").attr("fill","none").attr("stroke",t.GRAPH_LINE_COLOR).attr("stroke-opacity",.4).attr("stroke-width",.4*t.DRAW_SCALE_MULTIPLIER)).selectAll("path").data(n.links()).join("path").style("display",(function(e){return 0===e.source.depth?"none":null})).attr("d",(function(e){return"\n                      M"+e.target.y+","+e.target.x+"\n                       "+e.source.y+","+e.source.x+"\n                    "})).attr("data-transOid",(function(e){return"root"===e.source.data.name?null:r.linkDataMappings[e.source.data.code+":"+e.target.data.code]})),e.append("g").selectAll("circle").data(n.descendants()).join("circle").style("display",(function(e){return 0===e.depth?"none":null})).attr("cx",(function(e){return e.y})).attr("cy",(function(e){return e.x})).attr("fill",(function(e){return t.GRAPH_CIRCLE_FILL})).attr("r",.9*t.DRAW_SCALE_MULTIPLIER).attr("data-goCode",(function(e){return e.data.code})).attr("data-depth",(function(e){return e.depth})),e.append("g").attr("font-family","sans-serif").attr("font-size",2*t.DRAW_SCALE_MULTIPLIER).attr("stroke-linejoin","round").attr("stroke-width",3).selectAll("foreignObject").data(n.descendants()).join("foreignObject").style("display",(function(e){return 0===e.depth?"none":null})).attr("x",(function(e){return e.y+(1===e.depth?-13:1)})).attr("y",(function(e){return e.x+(1===e.depth?-2:-3)})).attr("font-size","0.7em").attr("font-family","sans-serif").attr("font-weight","bold").attr("width",12).attr("height",8).append("xhtml:p").attr("xmlns","http://www.w3.org/1999/xhtml").attr("data-goCode",(function(e){return e.data.code})).attr("data-depth",(function(e){return e.depth})).style("margin","0.5px").style("vertical-align","middle").style("line-height",1.5).style("color",t.GRAPH_GO_LABEL_COLOR).style("padding-left","0.4px").style("padding-top","0.2px").html((function(e){return e.data.name})).filter((function(e){return 1===e.depth})).style("text-align","right"),o.multipleParentLinks.forEach((function(e){i.append("path").attr("d",(function(){return"\n                      M"+e.parent.y+","+e.parent.x+"\n                       "+e.child.y+","+e.child.x+"\n                    "})).attr("data-transOid",(function(){return e.oid}))})),this.calculateSvgViewBox()}else l.select("#svg").remove()},e.prototype.generateRenderingData=function(e){var n=l.hierarchy(e.d3Data).sort((function(e,t){return l.ascending(e.data.order,t.data.order)}));n.dx=5*t.DRAW_SCALE_MULTIPLIER,n.dy=100/(n.height+1);var i=l.tree().nodeSize([n.dx,n.dy]).separation((function(){return 1.5}))(n),r=[];return e.multipleParentLinks.forEach((function(e){var t=n.find((function(t){return t.data.isSource&&t.data.code===e.parent.code})),i=n.find((function(t){return!t.data.isSource&&t.data.code===e.child.code}));null!=t&&null!=i&&r.push({parent:t,child:i,oid:e.oid})})),{d3:i,multipleParentLinks:r}},e.prototype.generateAppData=function(){var e=[],t=[],n={};return this.event.transitions.forEach((function(i){if(null!=i.sourceCode&&""!==i.sourceCode&&null!=i.targetCode&&""!==i.targetCode){var r=e.findIndex((function(e){return e.code===i.sourceCode}));n[i.sourceCode+":"+i.targetCode]=i.oid;var o=null;if(function(t){for(var n=0;n<e.length;++n){var i=e[n];if(i.children)for(var r=0;r<i.children.length;++r){if(i.children[r].code===t)return!0}}return!1}(i.targetCode)?t.push({oid:i.oid,child:{code:i.targetCode,text:i.targetText,type:i.targetType},parent:{code:i.sourceCode,text:i.sourceText,type:i.sourceType}}):o={name:i.targetText,code:i.targetCode,isSource:!1,children:[]},-1!==r){null!=(a=e[r]).children.findIndex((function(e){return e.code===i.targetCode}))&&null!=o&&a.children.push(o)}else{var a={name:i.sourceText,code:i.sourceCode,children:[],isSource:!0};null!=o&&a.children.push(o),e.push(a)}}})),{d3Data:{name:"root",children:e},multipleParentLinks:t,linkDataMappings:n}},e.prototype.calculateSvgViewBox=function(){var e=l.select("#svg"),n=e.node().getBBox(),i=n.x,r=n.y,o=n.width,a=n.height;e.attr("viewBox",i-0+" "+(r-2)+" "+(o+0)*t.VIEWPORT_SCALE_FACTOR_X+" "+(a+4)*t.VIEWPORT_SCALE_FACTOR_Y)},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.TransitionEventService),s.ɵɵdirectiveInject(s.ChangeDetectorRef),s.ɵɵdirectiveInject(d.RegistryService),s.ɵɵdirectiveInject(d.IOService),s.ɵɵdirectiveInject(p.LocalizationService),s.ɵɵdirectiveInject(u.BsModalRef),s.ɵɵdirectiveInject(p.AuthService),s.ɵɵdirectiveInject(m.DateService))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["transition-event-modal"]],viewQuery:function(e,t){if(1&e&&s.ɵɵviewQuery(E,1),2&e){var n;s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.typeaheadParent=n.first)}},decls:7,vars:2,consts:[["customItemTemplate",""],[1,"modal-body","row"],["class","alert alert-danger","role","alert",4,"ngIf"],["autocomplete","off",1,"modal-form"],["form","ngForm"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"col-md-6"],[1,"row-holder"],[1,"label-holder"],["key","transition.event.date"],[1,"holder"],["style","line-height: 40px;","class","date-string-display",4,"ngIf"],["label","","name","eventDate",3,"value","classNames","inputName","allowFutureDates","required","disable","valueChange","validChange",4,"ngIf"],["class","row-holder",4,"ngFor","ngForOf"],["for","beforeTypeCode"],["key","transition.event.beforeType"],["class","holder",4,"ngIf"],["for","afterTypeCode"],["key","transition.event.afterType"],[1,"row",2,"text-align","center"],["key","transition.event.before"],["key","transition.event.after"],["id","svgHolder",2,"margin-top","10px"],["class","row-holder",4,"ngIf"],[1,"button-holder"],["type","button","role","button",1,"btn","btn-default",3,"click"],[3,"key"],["type","submit","class","btn btn-primary","role","button",3,"disabled","click",4,"ngIf"],[1,"date-string-display",2,"line-height","40px"],[3,"date"],["label","","name","eventDate",3,"value","classNames","inputName","allowFutureDates","required","disable","valueChange","validChange"],["key","transition.event.description",2,"display","block"],[2,"color","#BABABA"],["type","text",1,"form-control",3,"ngModel","name","disabled","required","ngModelChange"],["id","beforeTypeCode","name","beforeTypeCode","required","",1,"select-area",3,"ngModel","disabled","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","beforeType","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["id","afterTypeCode","name","afterTypeCode","required","",1,"select-area",3,"ngModel","disabled","ngModelChange","change"],["name","afterType","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[1,"table",2,"border-collapse","separate"],[2,"height","50px","color","grey"],[2,"width","35%","vertical-align","middle"],[2,"width","10%","vertical-align","middle"],["key","transition.event.impact"],["key","transition.event.type"],[2,"width","5%","vertical-align","middle"],["style","width: 5%; vertical-align: middle;",4,"ngIf"],["id","transition-container",1,"dndList",3,"dndDropzone","dndEffectAllowed","dndDrop"],["class","dndPlaceholder","dndPlaceholderRef","",4,"ngIf"],["class","transition","style","height: 50px;",3,"dndDraggable","dndEffectAllowed","dndDisableIf","dndStart","dndCopied","dndLinked","dndMoved","dndCanceled","dndEnd",4,"ngFor","ngForOf"],["style","margin-left: 6px; margin-top: 30px; margin-bottom: 30px;","class","row",4,"ngIf"],["dndPlaceholderRef","",1,"dndPlaceholder"],["colspan","7"],[1,"transition",2,"height","50px",3,"dndDraggable","dndEffectAllowed","dndDisableIf","dndStart","dndCopied","dndLinked","dndMoved","dndCanceled","dndEnd"],["style","vertical-align: middle; text-align: center;",4,"ngIf"],[1,"input-group"],["type","text","autocomplete","off","required","",1,"form-control",3,"name","disabled","ngModel","typeaheadAsync","typeahead","typeaheadOptionsLimit","typeaheadItemTemplate","typeaheadMinLength","typeaheadWaitMs","container","ngModelChange","typeaheadOnSelect"],[2,"position","absolute"],[2,"position","fixed","z-index","10",3,"id"],["class","input-group-addon clickable addon-alert",3,"click",4,"ngIf"],["class","input-group-addon addon-alert",4,"ngIf"],[2,"vertical-align","middle"],["style","vertical-align:middle;",4,"ngIf"],["style","vertical-align: middle;",4,"ngIf"],[2,"vertical-align","middle","text-align","center"],[1,"fa","fa-bars",2,"font-size","25px","color","#969696","cursor","move"],[1,"input-group-addon","clickable","addon-alert",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"input-group-addon","addon-alert"],["style","min-width:80px;",4,"ngIf"],[2,"min-width","80px"],["style","min-width:80px;","class","select-area","required","",3,"name","ngModel","disabled","ngModelChange","change",4,"ngIf"],["required","",1,"select-area",2,"min-width","80px",3,"name","ngModel","disabled","ngModelChange","change"],["value","UPGRADE"],["key","transition.event.type.upgrade"],["value","DOWNGRADE"],["key","transition.event.type.downgrade"],[1,"clickable",3,"click"],["aria-hidden","true",1,"fa","fa-trash",2,"font-size","30px"],[1,"row",2,"margin-left","6px","margin-top","30px","margin-bottom","30px"],[1,"fa","fa-plus","clickable",3,"click"],["key","changeovertime.manageVersions.newVersion"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.submit"]],template:function(e,t){1&e&&(s.ɵɵtemplate(0,x,2,2,"ng-template",null,0,s.ɵɵtemplateRefExtractor),s.ɵɵelementStart(2,"div",1),s.ɵɵtemplate(3,O,2,1,"div",2),s.ɵɵelementStart(4,"form",3,4),s.ɵɵtemplate(6,Z,37,10,"fieldset",5),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(3),s.ɵɵproperty("ngIf",null!=t.message),s.ɵɵadvance(3),s.ɵɵproperty("ngIf",null!=t.event))},directives:[g.NgIf,h.ɵangular_packages_forms_forms_ba,h.NgControlStatusGroup,h.NgForm,f.LocalizeComponent,g.NgForOf,y.DateTextComponent,v.DateFieldComponent,b.ConvertKeyLabel,h.DefaultValueAccessor,h.NgControlStatus,h.NgModel,h.RequiredValidator,h.SelectControlValueAccessor,h.NgSelectOption,h.ɵangular_packages_forms_forms_z,S.DndDropzoneDirective,S.DndPlaceholderRefDirective,S.DndDraggableDirective,C.TypeaheadDirective],styles:[".dndList[_ngcontent-%COMP%] {\n  transition: all 300ms ease;\n}\n\n.dndPlaceholder[_ngcontent-%COMP%] {\n  height: 50px;\n  background-color: rgba(0, 0, 0, 0.1);\n}\n\n.dndPlaceholder[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\n\tborder: 1px dashed green;\n}"]}),e}();t.TransitionEventModalComponent=ee,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(ee,[{type:i.Component,args:[{selector:"transition-event-modal",templateUrl:"./transition-event-modal.component.html",styleUrls:["./transition-event-modal.component.css"]}]}],(function(){return[{type:c.TransitionEventService},{type:s.ChangeDetectorRef},{type:d.RegistryService},{type:d.IOService},{type:p.LocalizationService},{type:u.BsModalRef},{type:p.AuthService},{type:m.DateService}]}),{typeaheadParent:[{type:i.ViewChild,args:["typeaheadParent"]}]})},1123:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessTypeManagerComponent=void 0;var i=n(0),r=(n(57),n(56),n(193)),o=(n(25),n(1018),n(1124)),a=n(1125),l=n(0),s=n(1018),c=n(56),d=n(57),p=n(25),u=n(221),m=n(139),g=n(88),h=n(1);function f(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",6),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.message)}}function y(e,t){1&e&&(l.ɵɵelementStart(0,"div",7),l.ɵɵelementStart(1,"div",10),l.ɵɵelementStart(2,"div",11),l.ɵɵelementStart(3,"p",17),l.ɵɵelement(4,"localize",18),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd())}function v(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"tr",24),l.ɵɵelementStart(1,"td",25),l.ɵɵelementStart(2,"a",26),l.ɵɵtext(3),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(4,"td",27),l.ɵɵelementStart(5,"button",28),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=t.$implicit;return l.ɵɵnextContext(3).onView(e)})),l.ɵɵelement(6,"localize",29),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"button",30),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=t.$implicit,i=l.ɵɵnextContext(2).$implicit;return l.ɵɵnextContext().onEdit(i,e)})),l.ɵɵelement(8,"localize",31),l.ɵɵelementEnd(),l.ɵɵelementStart(9,"button",32),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=t.$implicit,i=l.ɵɵnextContext(2).$implicit;return l.ɵɵnextContext().onDelete(i,e)})),l.ɵɵelement(10,"localize",33),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var i=t.$implicit;l.ɵɵadvance(2),l.ɵɵproperty("routerLink","/registry/business-type/"+i.oid),l.ɵɵadvance(1),l.ɵɵtextInterpolate1(" ",i.displayLabel.localizedValue," ")}}function b(e,t){if(1&e&&(l.ɵɵelementStart(0,"ul",19),l.ɵɵelementStart(1,"table",20),l.ɵɵelementStart(2,"thead"),l.ɵɵelementStart(3,"tr"),l.ɵɵelementStart(4,"th",21),l.ɵɵelement(5,"localize",22),l.ɵɵelementEnd(),l.ɵɵelement(6,"th"),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"tbody"),l.ɵɵtemplate(8,v,11,2,"tr",23),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext().$implicit;l.ɵɵadvance(8),l.ɵɵproperty("ngForOf",n.types)}}function S(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div"),l.ɵɵelementStart(1,"button",28),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=l.ɵɵnextContext().$implicit;return l.ɵɵnextContext().onCreate(e)})),l.ɵɵelement(2,"localize",34),l.ɵɵelementEnd(),l.ɵɵelementEnd()}}function C(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",7),l.ɵɵelementStart(1,"div",8),l.ɵɵelementStart(2,"div",9),l.ɵɵelementStart(3,"div",10),l.ɵɵelementStart(4,"div",11),l.ɵɵelementStart(5,"h3"),l.ɵɵtext(6),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(7,y,5,0,"div",12),l.ɵɵtemplate(8,b,9,1,"ul",13),l.ɵɵelementStart(9,"div",14),l.ɵɵelementStart(10,"div",15),l.ɵɵtemplate(11,S,3,0,"div",16),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=t.$implicit;l.ɵɵadvance(6),l.ɵɵtextInterpolate(n.label),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",n.types&&0===n.types.length),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",n.types&&n.types.length>0),l.ɵɵadvance(3),l.ɵɵproperty("ngIf",n.write)}}var E=function(){function e(e,t,n,i){this.service=e,this.modalService=t,this.router=n,this.localizeService=i,this.message=null}return e.prototype.ngOnInit=function(){var e=this;this.service.getByOrganization().then((function(t){e.orgs=t})).catch((function(t){e.error(t)}))},e.prototype.onCreate=function(e){this.bsModalRef=this.modalService.show(o.CreateBusinessTypeModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.init(e),this.bsModalRef.content.onBusinessTypeChange.subscribe((function(t){e.types.push(t)}))},e.prototype.onView=function(e){var t=this;this.service.edit(e.oid).then((function(e){t.bsModalRef=t.modalService.show(a.ManageBusinessTypeModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),t.bsModalRef.content.init(e,!0)})).catch((function(e){t.error(e)}))},e.prototype.onEdit=function(e,t){var n=this;this.service.edit(t.oid).then((function(i){n.bsModalRef=n.modalService.show(a.ManageBusinessTypeModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),n.bsModalRef.content.init(i,!1),n.bsModalRef.content.onBusinessTypeChange.subscribe((function(n){var i=e.types.findIndex((function(e){return t.code===e.code}));-1!==i&&(e.types[i]=n)}))})).catch((function(e){n.error(e)}))},e.prototype.onDelete=function(e,t){var n=this;this.bsModalRef=this.modalService.show(r.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+t.displayLabel.localizedValue+"]",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.type="danger",this.bsModalRef.content.onConfirm.subscribe((function(i){n.service.remove(t).then((function(){e.types=e.types.filter((function(e){return e.code!==t.code}))})).catch((function(e){n.error(e)}))}))},e.prototype.error=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.BusinessTypeService),l.ɵɵdirectiveInject(c.BsModalService),l.ɵɵdirectiveInject(d.Router),l.ɵɵdirectiveInject(p.LocalizationService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["business-type-manager"]],decls:9,vars:2,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],[1,"heading"],["key","settings.organizations.heading"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-danger"],[1,"row"],[1,"col-md-12","order-md-1"],[1,"row",2,"margin-top","30px"],[1,"col-md-12"],[1,"py-5"],["class","row",4,"ngIf"],["class","type-group","style","border-bottom: 2px solid lightgrey; margin-top: 30px;",4,"ngIf"],[1,"row",2,"margin-top","30px","margin-bottom","30px"],[1,"col-md-6"],[4,"ngIf"],[1,"inline-message"],["key","business.data.noTypes"],[1,"type-group",2,"border-bottom","2px solid lightgrey","margin-top","30px"],[1,"table"],[2,"width","70%"],["key","business.data.types"],["class","clickable",4,"ngFor","ngForOf"],[1,"clickable"],[2,"width","70%","vertical-align","middle"],["routerLinkActive","active",3,"routerLink"],[2,"width","30%","text-align","right"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","modal.button.view"],["type","submit","role","button",1,"btn","btn-default",3,"click"],["key","modal.button.edit"],["type","submit","role","button",1,"btn","btn-danger",3,"click"],["key","modal.button.delete"],["key","hierarchy.management.button.create"]],template:function(e,t){1&e&&(l.ɵɵelementStart(0,"div",0),l.ɵɵelement(1,"cgr-header"),l.ɵɵelement(2,"loading-bar"),l.ɵɵelementStart(3,"div",1),l.ɵɵelementStart(4,"div",2),l.ɵɵelementStart(5,"h2"),l.ɵɵelement(6,"localize",3),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(7,f,2,1,"div",4),l.ɵɵtemplate(8,C,12,4,"div",5),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e&&(l.ɵɵadvance(7),l.ɵɵproperty("ngIf",null!=t.message),l.ɵɵadvance(1),l.ɵɵproperty("ngForOf",t.orgs))},directives:[u.CgrHeaderComponent,m.LoadingBarComponent,g.LocalizeComponent,h.NgIf,h.NgForOf,d.RouterLinkWithHref,d.RouterLinkActive],styles:['li.list-group-item[_ngcontent-%COMP%] {\n\tfont-size: 14px;\n\tborder: none;\n}\n\nli.list-group-item.active[_ngcontent-%COMP%] {\n    background-color: #DBD7A5;\n}\n\nli.list-group-item.got-li-item[_ngcontent-%COMP%]\n{\n\tborder-top: 15px solid #a0a0a0;\n\tborder-radius: 5px;\n}\n\nli.list-group-item.got-li-item.got-group-parent[_ngcontent-%COMP%]{\n}\nli.list-group-item.got-li-item.got-group-child[_ngcontent-%COMP%] {\n\tmargin-left: 40px;\n}\nli.list-group-item.got-li-item.got-group-child[_ngcontent-%COMP%]:before {\n    content: "";\n    position: absolute;\n    left: -8px;\n    border-left: 3px solid white;\n    height: 44px;\n    width: 1px;\n    top: -10px;\n}\n\nli.list-group-item.hier-li-item[_ngcontent-%COMP%] {\n\tbackground: #6e6775;\n    border: 2px solid #3E2A5A;\n    color: white;\n}\nli.list-group-item.hier-li-item[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%] {\n\tcolor: white;\n}\n\nli.list-group-item.hier-li-item.primary[_ngcontent-%COMP%]\n{\n\tbackground: #3E2A5A;\n}\n\n\nul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child:before {\n   \n   top: 6px; \n}\n\nul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:before {\n    \n   height: 6px; \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.got-org-label-wrapper[_ngcontent-%COMP%]{\n\tpadding: 7px 0;\n}\n.got-org-label-wrapper[_ngcontent-%COMP%]    > label[_ngcontent-%COMP%] {\n\tborder-bottom: solid 1px;\n\twidth: 100%;\n}\n\n.sidebar-section-content[_ngcontent-%COMP%] {\n\toverflow-y: auto;\n}\n\n.hierarchy-sidebar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n\tmargin:0;\n}\n\n.hierarchy-sidebar[_ngcontent-%COMP%] {\n    z-index: 999;\n    background: #f1f1f1;\n\n\ttransition: all 0.3s;\n  \tpadding:0;\n    vertical-align: top;\n    height: calc(100vh - 50px);\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n.hierarchy-content[_ngcontent-%COMP%] {\n\theight: calc(100vh - 50px);\n    overflow: auto;\n}\n\n#overflow-div[_ngcontent-%COMP%] {\n\ttop: 0;\n}\n\n.upload-text[_ngcontent-%COMP%] {\n\tposition:relative;\n\ttop:40%;\n}\n\n.sidebar-section[_ngcontent-%COMP%] {\n\n\ttext-align: left;\n\n}\n\n\n\n.hierarchy-sidebar-content[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%] {\n\n\tbackground-color: #f1f1f1;\n\tmax-height: 500px;\n    overflow: auto;\n}\n\n.sidebar-section-header[_ngcontent-%COMP%] {\n\tmargin-left:20px;\n\tcursor: pointer;\n}\n\n\naccordion-group.panel[_ngcontent-%COMP%] {\n\n}\n\nli.list-group-item[_ngcontent-%COMP%] {\n\tbackground-color: rgba(255, 255, 255, 1.0);\n\tmargin-bottom:5px;\n}\n\n.drop-box-container[_ngcontent-%COMP%] {\n    width: 80%;\n    border: 3px grey dashed;\n    border-radius: 5px;\n    margin: 0 auto;\n    margin-top: 50px;\n}\n\n.hierarchy-drop-box[_ngcontent-%COMP%] {\n  position:relative;\n  height: 100%;\n  cursor: default;\n}\n\nli.got-li-item.dragging[_ngcontent-%COMP%] {\n\tposition: fixed;\n\tcursor: grabbing !important;\n\tz-index: 99999999;\n}\n\n[data-candrag="true"][_ngcontent-%COMP%] {\n\tcursor: pointer;\n}\n[data-candrag="false"][_ngcontent-%COMP%] {\n  cursor: not-allowed;\n}\n\n#NodeTooltip[_ngcontent-%COMP%] {\n\topacity:0;\n\tleft:-10000;\n\ttop:-10000;\n\tposition:fixed;\n\twidth: 400px;\n\tmin-width: 400px;\n}\n#NodeTooltip[_ngcontent-%COMP%]   .modal-form[_ngcontent-%COMP%] {\n\tpadding-top:10px;\n}\n#NodeTooltip[_ngcontent-%COMP%]   .modal-form[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%] {\n\tpadding-bottom: 0px;\n}\n#NodeTooltip[_ngcontent-%COMP%]   .label-holder[_ngcontent-%COMP%] {\n\twidth: 40%;\n}\n#NodeTooltip[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%] {\n\twidth: 60%;\n}\n#NodeTooltip[_ngcontent-%COMP%]   .holder[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  line-height:2.8;\n}\n\n[_nghost-%COMP%]     .panel .panel-heading .accordion-toggle:after {\n    \n    font-family: \'Glyphicons Halflings\';  \n    content: "\\e080";    \n    float: right;        \n\n    margin-top: -30px;\n}\n[_nghost-%COMP%]     .panel.panel-open .panel-heading .accordion-toggle:after {\n    \n    content: "\\e114";    \n}']}),e}();t.BusinessTypeManagerComponent=E,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(E,[{type:i.Component,args:[{selector:"business-type-manager",templateUrl:"./business-type-manager.component.html",styleUrls:["./business-type-manager.css"]}]}],(function(){return[{type:s.BusinessTypeService},{type:c.BsModalService},{type:d.Router},{type:p.LocalizationService}]}),null)},1124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateBusinessTypeModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(193),a=(n(25),n(1018),n(0)),l=n(1018),s=n(25),c=n(56),d=n(18),p=n(1),u=n(88),m=n(1029),g=n(545);function h(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",23),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function f(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",8),a.ɵɵelementStart(1,"label"),a.ɵɵelement(2,"localize",24),a.ɵɵelementStart(3,"span",25),a.ɵɵtext(4," ("),a.ɵɵelement(5,"convert-key-label",26),a.ɵɵtext(6,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(7,"input",27),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵadvance(5),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(2),a.ɵɵproperty("ngModel",n.value)("name","label-"+n.locale)("required","defaultLocale"===n.locale)}}var y=function(){function e(e,t,n){this.service=e,this.lService=t,this.bsModalRef=n,this.organization=null,this.message=null,this.onBusinessTypeChange=new r.Subject}return e.prototype.ngOnInit=function(){this.type={code:"",organization:"",displayLabel:this.lService.create(),description:this.lService.create(),attributes:[],labelAttribute:""}},e.prototype.init=function(e){this.organization=e,this.type.organization=this.organization.code,this.type.organizationLabel=this.organization.label},e.prototype.handleOnSubmit=function(){var e=this;this.message=null,this.service.apply(this.type).then((function(t){e.onBusinessTypeChange.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.BusinessTypeService),a.ɵɵdirectiveInject(s.LocalizationService),a.ɵɵdirectiveInject(c.BsModalRef))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["create-business-type-modal"]],decls:34,vars:7,consts:[[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading","text-center"],["key","business.data.type"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["for","codeInput"],["key","data.property.label.code"],["name","code","type","text","id","codeInput","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group",4,"ngFor","ngForOf"],["key","data.property.label.description",3,"value","inlinelayout","valueChange"],["for","organization"],["key","attribute.organization.label"],[1,"text"],["type","text","name","organization","disabled","","required","",3,"ngModel","ngModelChange"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["key","modal.button.ok"],["role","alert",1,"alert","alert-danger"],["key","data.property.label.label"],[2,"color","#BABABA"],[3,"key"],["type","input",1,"form-control",3,"ngModel","name","required","ngModelChange"]],template:function(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"form",0,1),a.ɵɵlistener("ngSubmit",(function(){return a.ɵɵrestoreView(n),a.ɵɵreference(1).valid&&t.handleOnSubmit()})),a.ɵɵelementStart(2,"div",2),a.ɵɵtemplate(3,h,2,1,"div",3),a.ɵɵelementStart(4,"div",4),a.ɵɵelementStart(5,"h1"),a.ɵɵelement(6,"localize",5),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(7,"div",6),a.ɵɵelementStart(8,"div",7),a.ɵɵelementStart(9,"div",8),a.ɵɵelementStart(10,"div"),a.ɵɵelementStart(11,"label",9),a.ɵɵelement(12,"localize",10),a.ɵɵelementEnd(),a.ɵɵelementStart(13,"input",11),a.ɵɵlistener("ngModelChange",(function(e){return t.type.code=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(14,"div",6),a.ɵɵelementStart(15,"div",7),a.ɵɵtemplate(16,f,8,4,"div",12),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(17,"div",6),a.ɵɵelementStart(18,"div",7),a.ɵɵelementStart(19,"localized-text",13),a.ɵɵlistener("valueChange",(function(e){return t.type.description=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(20,"div",6),a.ɵɵelementStart(21,"div",7),a.ɵɵelementStart(22,"div",8),a.ɵɵelementStart(23,"label",14),a.ɵɵelement(24,"localize",15),a.ɵɵelementEnd(),a.ɵɵelementStart(25,"span",16),a.ɵɵelementStart(26,"input",17),a.ɵɵlistener("ngModelChange",(function(e){return t.type.organizationLabel=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(27,"div",6),a.ɵɵelementStart(28,"div",7),a.ɵɵelementStart(29,"div",18),a.ɵɵelementStart(30,"button",19),a.ɵɵlistener("click",(function(){return t.bsModalRef.hide()})),a.ɵɵelement(31,"localize",20),a.ɵɵelementEnd(),a.ɵɵelementStart(32,"button",21),a.ɵɵelement(33,"localize",22),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵreference(1);a.ɵɵadvance(3),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(10),a.ɵɵproperty("ngModel",t.type.code),a.ɵɵadvance(3),a.ɵɵproperty("ngForOf",t.type.displayLabel.localeValues),a.ɵɵadvance(3),a.ɵɵproperty("value",t.type.description)("inlinelayout",!0),a.ɵɵadvance(7),a.ɵɵproperty("ngModel",t.type.organizationLabel),a.ɵɵadvance(6),a.ɵɵproperty("disabled",i.invalid)}},directives:[d.ɵangular_packages_forms_forms_ba,d.NgControlStatusGroup,d.NgForm,p.NgIf,u.LocalizeComponent,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,p.NgForOf,m.LocalizedTextComponent,g.ConvertKeyLabel],encapsulation:2}),e}();t.CreateBusinessTypeModalComponent=y,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(y,[{type:i.Component,args:[{selector:"create-business-type-modal",templateUrl:"./create-business-type-modal.component.html",styleUrls:[]}]}],(function(){return[{type:l.BusinessTypeService},{type:s.LocalizationService},{type:c.BsModalRef}]}),null)},1125:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageBusinessTypeModalComponent=void 0;var i=n(0),r=n(2),o=(n(56),n(44)),a=n(193),l=(n(1018),n(544)),s=n(547),c=(n(25),n(0)),d=n(1018),p=n(25),u=n(56),m=n(1),g=n(18),h=n(88),f=n(1033),y=n(57),v=n(1057),b=n(1058),S=n(1059),C=n(1060),E=n(162);function x(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",7),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(2);c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.message)}}function O(e,t){1&e&&c.ɵɵelement(0,"localize",36)}function I(e,t){1&e&&c.ɵɵelement(0,"localize",37)}function M(e,t){if(1&e&&(c.ɵɵelementStart(0,"option",38),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵproperty("value",n.code),c.ɵɵadvance(1),c.ɵɵtextInterpolate1(" ",n.label.localizedValue," ")}}function w(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementContainerStart(0),c.ɵɵelementStart(1,"a",40),c.ɵɵlistener("click",(function(e){c.ɵɵrestoreView(n);var t=c.ɵɵnextContext().$implicit;return c.ɵɵnextContext(3).editAttribute(t,e)})),c.ɵɵpipe(2,"localize"),c.ɵɵelementEnd(),c.ɵɵelementStart(3,"a",41),c.ɵɵlistener("click",(function(e){c.ɵɵrestoreView(n);var t=c.ɵɵnextContext().$implicit;return c.ɵɵnextContext(3).removeAttributeType(t,e)})),c.ɵɵpipe(4,"localize"),c.ɵɵelementEnd(),c.ɵɵelementContainerEnd()}2&e&&(c.ɵɵadvance(1),c.ɵɵproperty("title",c.ɵɵpipeBind1(2,2,"modal.button.edit")),c.ɵɵadvance(2),c.ɵɵproperty("title",c.ɵɵpipeBind1(4,4,"modal.button.remove")))}function T(e,t){if(1&e&&(c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td"),c.ɵɵtext(2),c.ɵɵelementEnd(),c.ɵɵelementStart(3,"td",39),c.ɵɵtemplate(4,w,5,6,"ng-container",0),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=t.$implicit,i=c.ɵɵnextContext(3);c.ɵɵadvance(2),c.ɵɵtextInterpolate(n.label.localizedValue),c.ɵɵadvance(2),c.ɵɵproperty("ngIf",!i.readOnly&&!n.isDefault)}}function k(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"i",42),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext(3).createAttribute()})),c.ɵɵelement(1,"localize",43),c.ɵɵelementEnd()}}function P(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"button",44),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext(3).update()})),c.ɵɵelement(1,"localize",45),c.ɵɵelementEnd()}if(2&e){c.ɵɵnextContext();var i=c.ɵɵreference(1);c.ɵɵproperty("disabled",i.invalid)}}function j(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"form",8,9),c.ɵɵlistener("ngSubmit",(function(){return c.ɵɵrestoreView(n),c.ɵɵreference(1).valid})),c.ɵɵelementStart(2,"div",10),c.ɵɵelementStart(3,"h1"),c.ɵɵtemplate(4,O,1,0,"localize",11),c.ɵɵtemplate(5,I,1,0,"localize",12),c.ɵɵtext(6),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(7,"fieldset"),c.ɵɵelementStart(8,"div",13),c.ɵɵelementStart(9,"div",14),c.ɵɵelementStart(10,"label"),c.ɵɵelement(11,"localize",15),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(12,"div",16),c.ɵɵelementStart(13,"span",17),c.ɵɵelementStart(14,"input",18),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).type.code=e})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(15,"localized-input",19),c.ɵɵlistener("valueChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).type.displayLabel=e})),c.ɵɵelementEnd(),c.ɵɵelementStart(16,"div",13),c.ɵɵelementStart(17,"div",14),c.ɵɵelementStart(18,"label"),c.ɵɵelement(19,"localize",20),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(20,"div",16),c.ɵɵelementStart(21,"span",17),c.ɵɵelementStart(22,"input",21),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).type.organizationLabel=e})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(23,"div",13),c.ɵɵelementStart(24,"div",14),c.ɵɵelementStart(25,"label"),c.ɵɵelement(26,"localize",22),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(27,"div",16),c.ɵɵelementStart(28,"select",23),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).type.labelAttribute=e})),c.ɵɵtemplate(29,M,2,2,"option",24),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(30,"div",13),c.ɵɵelementStart(31,"div",14),c.ɵɵelementStart(32,"label"),c.ɵɵelement(33,"localize",25),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(34,"div",16),c.ɵɵelementStart(35,"div",26),c.ɵɵelementStart(36,"div",27),c.ɵɵelementStart(37,"div",28),c.ɵɵelementStart(38,"table",29),c.ɵɵelementStart(39,"tbody"),c.ɵɵtemplate(40,T,5,2,"tr",30),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵtemplate(41,k,2,0,"i",31),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(42,"div",13),c.ɵɵelementStart(43,"div",32),c.ɵɵelementStart(44,"button",33),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).close()})),c.ɵɵelement(45,"localize",34),c.ɵɵelementEnd(),c.ɵɵtemplate(46,P,2,1,"button",35),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var i=c.ɵɵnextContext(2);c.ɵɵadvance(4),c.ɵɵproperty("ngIf",i.readOnly),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",!i.readOnly),c.ɵɵadvance(1),c.ɵɵtextInterpolate1(" : ",i.type.displayLabel.localizedValue," "),c.ɵɵadvance(8),c.ɵɵproperty("ngModel",i.type.code),c.ɵɵadvance(1),c.ɵɵproperty("disabled",i.readOnly)("value",i.type.displayLabel),c.ɵɵadvance(7),c.ɵɵproperty("ngModel",i.type.organizationLabel),c.ɵɵadvance(6),c.ɵɵproperty("ngModel",i.type.labelAttribute)("disabled",i.readOnly),c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",i.type.attributes),c.ɵɵadvance(11),c.ɵɵproperty("ngForOf",i.type.attributes),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",!i.readOnly),c.ɵɵadvance(5),c.ɵɵproperty("ngIf",!i.readOnly)}}function z(e,t){if(1&e&&(c.ɵɵelementContainerStart(0),c.ɵɵtemplate(1,x,2,1,"div",5),c.ɵɵtemplate(2,j,47,13,"form",6),c.ɵɵelementContainerEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(1),c.ɵɵproperty("ngIf",null!=n.message),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",n.type)}}function D(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"define-attribute-modal-content",46),c.ɵɵlistener("geoObjectTypeChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onTypeChange(e)}))("stateChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onModalStateChange(e)})),c.ɵɵelementEnd()}if(2&e){var i=c.ɵɵnextContext();c.ɵɵproperty("geoObjectType",i.type)("service",i.service)}}function R(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"edit-attribute-modal-content",47),c.ɵɵlistener("geoObjectTypeChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onTypeChange(e)}))("stateChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onModalStateChange(e)})),c.ɵɵelementEnd()}if(2&e){var i=c.ɵɵnextContext();c.ɵɵproperty("geoObjectType",i.type)("attribute",i.modalState.attribute)("service",i.service)}}function L(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"manage-term-options",48),c.ɵɵlistener("stateChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onModalStateChange(e)})),c.ɵɵelementEnd()}if(2&e){var i=c.ɵɵnextContext();c.ɵɵproperty("attribute",i.modalState.attribute)}}function _(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"edit-term-option-input",49),c.ɵɵlistener("stateChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onModalStateChange(e)})),c.ɵɵelementEnd()}if(2&e){var i=c.ɵɵnextContext();c.ɵɵproperty("attribute",i.modalState.attribute)("termOption",i.modalState.termOption)}}var A=function(){function e(e,t,n,i){this.service=e,this.localizationService=t,this.modalService=n,this.bsModalRef=i,this.modalState={state:l.GeoObjectTypeModalStates.manageGeoObjectType,attribute:"",termOption:""},this.message=null,this.readOnly=!1}return e.prototype.ngOnInit=function(){this.onBusinessTypeChange=new o.Subject},e.prototype.init=function(e,t){this.type=e,this.readOnly=t},e.prototype.createAttribute=function(){this.onModalStateChange({state:l.GeoObjectTypeModalStates.defineAttribute,attribute:"",termOption:""})},e.prototype.editAttribute=function(e,t){this.onModalStateChange({state:l.GeoObjectTypeModalStates.editAttribute,attribute:e,termOption:""})},e.prototype.removeAttributeType=function(e,t){var n=this,i=this.modalService.show(a.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});i.content.message=this.localizationService.decode("confirm.modal.verify.delete")+"["+e.label.localizedValue+"]",i.content.data={attributeType:e,geoObjectType:this.type},i.content.submitText=this.localizationService.decode("modal.button.delete"),i.content.type=s.ModalTypes.danger,i.content.onConfirm.subscribe((function(t){n.service.deleteAttributeType(n.type.code,e.code).then((function(){n.type.attributes.splice(n.type.attributes.indexOf(e),1),n.onBusinessTypeChange.next(n.type)})).catch((function(e){n.error(e)}))}))},e.prototype.onModalStateChange=function(e){this.modalState=e},e.prototype.onTypeChange=function(e){this.onBusinessTypeChange.next(e)},e.prototype.update=function(){var e=this;this.service.apply(this.type).then((function(t){e.onBusinessTypeChange.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.close=function(){var e=this;null!=this.type.oid?this.service.unlock(this.type.oid).then((function(){e.bsModalRef.hide()})).catch((function(t){e.error(t)})):this.bsModalRef.hide()},e.prototype.error=function(e){this.message=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(c.ɵɵdirectiveInject(d.BusinessTypeService),c.ɵɵdirectiveInject(p.LocalizationService),c.ɵɵdirectiveInject(u.BsModalService),c.ɵɵdirectiveInject(u.BsModalRef))},e.ɵcmp=c.ɵɵdefineComponent({type:e,selectors:[["manage-business-type-modal"]],decls:6,vars:5,consts:[[4,"ngIf"],[3,"geoObjectType","service","geoObjectTypeChange","stateChange",4,"ngIf"],[3,"geoObjectType","attribute","service","geoObjectTypeChange","stateChange",4,"ngIf"],[3,"attribute","stateChange",4,"ngIf"],[3,"attribute","termOption","stateChange",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","modal-form",3,"ngSubmit",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,"heading","text-center"],["key","business.data.view.type",4,"ngIf"],["key","business.data.edit.type",4,"ngIf"],[1,"row-holder"],[1,"label-holder"],["key","data.property.label.code"],[1,"holder"],[1,"text"],["type","text","name","code","disabled","","required","",3,"ngModel","ngModelChange"],["key","data.property.label.label",3,"disabled","value","valueChange"],["key","attribute.organization.label"],["type","text","name","organization","disabled","","required","",3,"ngModel","ngModelChange"],["key","attribute.labelAttribute.label"],["name","labelAttribute",1,"select-area",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["key","hierarchy.management.manage.attributes.label.displayAttributes"],[1,"panel","panel-default"],[1,"panel-body"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["class","fa fa-plus clickable","style","font-size:20px;margin:10px 0 10px 0;","aria-hidden","true",3,"click",4,"ngIf"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],["key","business.data.view.type"],["key","business.data.edit.type"],[3,"value"],[1,"button-column",2,"width","60px"],[1,"fa","fa-pencil","ico-edit",3,"routerLink","title","click"],[1,"fa","fa-trash-o","ico-remove",3,"routerLink","title","click"],["aria-hidden","true",1,"fa","fa-plus","clickable",2,"font-size","20px","margin","10px 0 10px 0",3,"click"],["key","modal.button.add"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["key","modal.button.submit"],[3,"geoObjectType","service","geoObjectTypeChange","stateChange"],[3,"geoObjectType","attribute","service","geoObjectTypeChange","stateChange"],[3,"attribute","stateChange"],[3,"attribute","termOption","stateChange"]],template:function(e,t){1&e&&(c.ɵɵelementStart(0,"div"),c.ɵɵtemplate(1,z,3,2,"ng-container",0),c.ɵɵtemplate(2,D,1,2,"define-attribute-modal-content",1),c.ɵɵtemplate(3,R,1,3,"edit-attribute-modal-content",2),c.ɵɵtemplate(4,L,1,1,"manage-term-options",3),c.ɵɵtemplate(5,_,1,2,"edit-term-option-input",4),c.ɵɵelementEnd()),2&e&&(c.ɵɵadvance(1),c.ɵɵproperty("ngIf","MANAGE-GEO-OBJECT-TYPE"===t.modalState.state),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","DEFINE-ATTRIBUTE"===t.modalState.state),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","EDIT-ATTRIBUTE"===t.modalState.state),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","MANAGE-TERM-OPTION"===t.modalState.state),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","EDIT-TERM-OPTION"===t.modalState.state))},directives:[m.NgIf,g.ɵangular_packages_forms_forms_ba,g.NgControlStatusGroup,g.NgForm,h.LocalizeComponent,g.DefaultValueAccessor,g.RequiredValidator,g.NgControlStatus,g.NgModel,f.LocalizedInputComponent,g.SelectControlValueAccessor,m.NgForOf,g.NgSelectOption,g.ɵangular_packages_forms_forms_z,y.RouterLinkWithHref,v.DefineAttributeModalContentComponent,b.EditAttributeModalContentComponent,S.ManageTermOptionsComponent,C.EditTermOptionInputComponent],pipes:[E.LocalizePipe],styles:[""],data:{animation:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")]),r.transition(":leave",r.animate("500ms",r.style({opacity:0})))])]]}}),e}();t.ManageBusinessTypeModalComponent=A,("undefined"==typeof ngDevMode||ngDevMode)&&c.ɵsetClassMetadata(A,[{type:i.Component,args:[{selector:"manage-business-type-modal",templateUrl:"./manage-business-type-modal.component.html",styleUrls:["./manage-business-type-modal.css"],animations:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")]),r.transition(":leave",r.animate("500ms",r.style({opacity:0})))])]]}]}],(function(){return[{type:d.BusinessTypeService},{type:p.LocalizationService},{type:u.BsModalService},{type:u.BsModalRef}]}),null)},1126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessTableComponent=void 0;var i=n(0),r=(n(57),n(1018),n(25),n(0)),o=n(1018),a=n(25),l=n(57),s=n(221),c=n(139),d=n(1),p=n(548),u=function(e){return{typeCode:e}};function m(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementContainerStart(0),r.ɵɵelementStart(1,"h2"),r.ɵɵtext(2),r.ɵɵelementEnd(),r.ɵɵelementStart(3,"generic-table",3),r.ɵɵlistener("click",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().onClick(e)})),r.ɵɵelementEnd(),r.ɵɵelementContainerEnd()}if(2&e){var i=r.ɵɵnextContext();r.ɵɵadvance(2),r.ɵɵtextInterpolate(i.businessType.displayLabel.localizedValue),r.ɵɵadvance(1),r.ɵɵproperty("cols",i.cols)("config",i.config)("pageConfig",r.ɵɵpureFunction1(4,u,i.businessType.code))}}var g=function(){function e(e,t,n){this.service=e,this.localizationService=t,this.route=n,this.message=null,this.config=null,this.cols=[]}return e.prototype.ngOnInit=function(){var e=this,t=this.route.snapshot.paramMap.get("oid");this.service.get(t).then((function(t){e.businessType=t,e.cols=[],e.businessType.attributes.forEach((function(t){var n="TEXT",i=!0;"integer"===t.type||"decimal"===t.type?n="NUMBER":"boolean"===t.type?n="BOOLEAN":"term"===t.type?i=!1:"date"===t.type&&(n="DATE"),e.cols.push({header:t.label.localizedValue,field:t.code,type:n,sortable:i,filter:i})})),e.config={service:e.service,remove:!1,view:!1,create:!1,label:e.businessType.displayLabel.localizedValue,sort:{field:"code",order:1}}}))},e.prototype.onClick=function(e){},e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(o.BusinessTypeService),r.ɵɵdirectiveInject(a.LocalizationService),r.ɵɵdirectiveInject(l.ActivatedRoute))},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["business-table"]],decls:5,vars:1,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],[4,"ngIf"],[3,"cols","config","pageConfig","click"]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div",0),r.ɵɵelement(1,"cgr-header"),r.ɵɵelement(2,"loading-bar"),r.ɵɵelementStart(3,"div",1),r.ɵɵtemplate(4,m,4,6,"ng-container",2),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(4),r.ɵɵproperty("ngIf",null!=t.businessType))},directives:[s.CgrHeaderComponent,c.LoadingBarComponent,d.NgIf,p.GenericTableComponent],encapsulation:2}),e}();t.BusinessTableComponent=g,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(g,[{type:i.Component,args:[{selector:"business-table",templateUrl:"./business-table.component.html",styles:[]}]}],(function(){return[{type:o.BusinessTypeService},{type:a.LocalizationService},{type:l.ActivatedRoute}]}),null)},1127:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessImporterComponent=void 0;var i=n(0),r=(n(56),n(380)),o=n(193),a=(n(25),n(1015),n(1066)),l=n(544),s=(n(1018),n(0)),c=n(25),d=n(56),p=n(1015),u=n(1018),m=n(221),g=n(139),h=n(88),f=n(1),y=n(18),v=n(382),b=n(546),S=n(380),C=["myFile"],E=function(){return{active:!0}};function x(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div"),s.ɵɵelementStart(1,"div"),s.ɵɵelementStart(2,"div",2),s.ɵɵelement(3,"div",9),s.ɵɵelementStart(4,"div",10),s.ɵɵelementStart(5,"label",11),s.ɵɵelementStart(6,"input",12),s.ɵɵlistener("change",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().setImportSource(e,"FILE")})),s.ɵɵelementEnd(),s.ɵɵelementStart(7,"span",13),s.ɵɵelement(8,"localize",14),s.ɵɵelementEnd(),s.ɵɵelementStart(9,"p",15),s.ɵɵelement(10,"localize",16),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(11,"div",17),s.ɵɵelementStart(12,"button",18),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onNext()})),s.ɵɵelement(13,"localize",19),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(14,"div",20),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}2&e&&(s.ɵɵadvance(6),s.ɵɵproperty("value",!0)("checked",!0),s.ɵɵadvance(1),s.ɵɵproperty("ngClass",s.ɵɵpureFunction0(3,E)))}function O(e,t){if(1&e&&(s.ɵɵelementStart(0,"option",46),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=t.$implicit;s.ɵɵpropertyInterpolate("value",n.code),s.ɵɵadvance(1),s.ɵɵtextInterpolate1("",n.displayLabel.localizedValue," ")}}function I(e,t){if(1&e&&(s.ɵɵelementStart(0,"option",46),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=t.$implicit;s.ɵɵpropertyInterpolate("value",n.code),s.ɵɵadvance(1),s.ɵɵtextInterpolate1(" ",n.label,"")}}function M(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",23),s.ɵɵelementStart(1,"label",47),s.ɵɵelement(2,"localize",48),s.ɵɵelementEnd(),s.ɵɵelementStart(3,"div",26),s.ɵɵelementStart(4,"select",49),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).hierarchyCode=e}))("change",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).onSelectHierarchy()})),s.ɵɵelement(5,"option"),s.ɵɵtemplate(6,I,2,2,"option",28),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(7,"div",29),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2);s.ɵɵadvance(4),s.ɵɵproperty("ngModel",i.hierarchyCode),s.ɵɵadvance(2),s.ɵɵproperty("ngForOf",i.filteredHierarchyViews)}}function w(e,t){if(1&e&&(s.ɵɵelementStart(0,"option",46),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=t.$implicit;s.ɵɵpropertyInterpolate("value",n.code),s.ɵɵadvance(1),s.ɵɵtextInterpolate1(" ",n.super?n.super.label+" : "+n.label:n.label," ")}}function T(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",23),s.ɵɵelementStart(1,"label",50),s.ɵɵelement(2,"localize",51),s.ɵɵelementEnd(),s.ɵɵelementStart(3,"div",26),s.ɵɵelementStart(4,"select",52),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).typeCode=e}))("change",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).onSelectType()})),s.ɵɵelement(5,"option"),s.ɵɵtemplate(6,w,2,2,"option",28),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(7,"div",29),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext(2);s.ɵɵadvance(4),s.ɵɵproperty("ngModel",i.typeCode),s.ɵɵadvance(2),s.ɵɵproperty("ngForOf",i.filteredTypeViews)}}function k(e,t){1&e&&s.ɵɵelement(0,"localize",53)}function P(e,t){if(1&e&&(s.ɵɵelementStart(0,"option",46),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=t.$implicit;s.ɵɵpropertyInterpolate("value",n.strategy),s.ɵɵadvance(1),s.ɵɵtextInterpolate(n.label)}}function j(e,t){1&e&&s.ɵɵelement(0,"localize",54)}function z(e,t){if(1&e&&s.ɵɵelement(0,"input",55,56),2&e){var n=s.ɵɵnextContext(2);s.ɵɵproperty("uploader",n.uploader)}}function D(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div"),s.ɵɵelementStart(1,"div"),s.ɵɵelementStart(2,"form",21,22),s.ɵɵelementStart(4,"div",23),s.ɵɵelementStart(5,"label",24),s.ɵɵelement(6,"localize",25),s.ɵɵelementEnd(),s.ɵɵelementStart(7,"div",26),s.ɵɵelementStart(8,"select",27),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().businessTypeCode=e})),s.ɵɵelement(9,"option"),s.ɵɵtemplate(10,O,2,2,"option",28),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(11,"div",29),s.ɵɵelementEnd(),s.ɵɵtemplate(12,M,8,2,"div",30),s.ɵɵtemplate(13,T,8,2,"div",30),s.ɵɵelementStart(14,"div",23),s.ɵɵelementStart(15,"label",31),s.ɵɵtemplate(16,k,1,0,"localize",32),s.ɵɵelementEnd(),s.ɵɵelementStart(17,"div",26),s.ɵɵelementStart(18,"select",33),s.ɵɵlistener("ngModelChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().importStrategy=e})),s.ɵɵtemplate(19,P,2,2,"option",28),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(20,"div",29),s.ɵɵelementEnd(),s.ɵɵelementStart(21,"div",23),s.ɵɵelementStart(22,"label",34),s.ɵɵtext(23,"Date"),s.ɵɵelementEnd(),s.ɵɵelementStart(24,"div",26),s.ɵɵelementStart(25,"date-field",35,36),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().date=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(27,"div",29),s.ɵɵelementEnd(),s.ɵɵelementStart(28,"div",23),s.ɵɵelementStart(29,"label",37),s.ɵɵelement(30,"localize",38),s.ɵɵelementEnd(),s.ɵɵelementStart(31,"div",26),s.ɵɵelementStart(32,"boolean-field",39),s.ɵɵlistener("valueChange",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext().copyBlank=e})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(33,"div",29),s.ɵɵelementEnd(),s.ɵɵelementStart(34,"div",23),s.ɵɵelementStart(35,"label",40),s.ɵɵtemplate(36,j,1,0,"localize",41),s.ɵɵelementEnd(),s.ɵɵelementStart(37,"div",26),s.ɵɵtemplate(38,z,2,1,"input",42),s.ɵɵelementEnd(),s.ɵɵelement(39,"div",29),s.ɵɵelementEnd(),s.ɵɵelementStart(40,"div",23),s.ɵɵelement(41,"div",29),s.ɵɵelementStart(42,"div",43),s.ɵɵelementStart(43,"button",44),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext().onClick()})),s.ɵɵelement(44,"localize",45),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(45,"div",29),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵreference(3),r=s.ɵɵnextContext();s.ɵɵadvance(8),s.ɵɵproperty("ngModel",r.businessTypeCode),s.ɵɵadvance(2),s.ɵɵproperty("ngForOf",r.businessTypes),s.ɵɵadvance(2),s.ɵɵproperty("ngIf",r.filteredHierarchyViews),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",r.filteredTypeViews),s.ɵɵadvance(3),s.ɵɵproperty("ngIf","EXCEL"===r.format),s.ɵɵadvance(2),s.ɵɵproperty("ngModel",r.importStrategy),s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",r.importStrategies),s.ɵɵadvance(6),s.ɵɵproperty("value",r.date)("inputName","date")("allowFutureDates",!1),s.ɵɵadvance(7),s.ɵɵproperty("value",r.copyBlank),s.ɵɵadvance(4),s.ɵɵproperty("ngIf","EXCEL"===r.format),s.ɵɵadvance(2),s.ɵɵproperty("ngIf","EXCEL"===r.format),s.ɵɵadvance(5),s.ɵɵproperty("disabled",i.invalid)}}var R=function(){function e(e,t,n,i,r){this.eventService=e,this.modalService=t,this.localizationService=n,this.hierarchyService=i,this.businessService=r,this.currentDate=new Date,this.showImportConfig=!0,this.isValid=!1,this.businessTypes=[],this.businessTypeCode=null,this.importStrategies=[{strategy:l.ImportStrategy.NEW_AND_UPDATE,label:this.localizationService.decode("etl.import.ImportStrategy.NEW_AND_UPDATE")},{strategy:l.ImportStrategy.NEW_ONLY,label:this.localizationService.decode("etl.import.ImportStrategy.NEW_ONLY")},{strategy:l.ImportStrategy.UPDATE_ONLY,label:this.localizationService.decode("etl.import.ImportStrategy.UPDATE_ONLY")}],this.typeCode=null,this.hierarchyCode=null,this.date=null,this.format="EXCEL",this.copyBlank=!0}return e.prototype.ngOnInit=function(){var e=this;this.businessService.getAll().then((function(t){e.businessTypes=t})),this.hierarchyService.getHierarchyGroupedTypes().then((function(t){e.allHierarchyViews=t,e.allTypeViews=[];for(var n=e.allHierarchyViews.length,i=0;i<n;++i)for(var r=e.allHierarchyViews[i],o=r.types.length,a=function(t){for(var n=r.types[t],i=e.allHierarchyViews.length,o=0;o<i;++o){var a=e.allHierarchyViews[o],l=a.types.findIndex((function(e){return n.code===e.code}));-1!==l&&(a.types[l]=n)}},l=0;l<o;++l)a(l);var s=e.allHierarchyViews.length,c=function(t){for(var n=e.allHierarchyViews[t],i=n.types.length,r=function(t){var i=n.types[t],r=e.allTypeViews.findIndex((function(e){return e.code===i.code}));if(-1!==r){var o=e.allTypeViews[r];-1===o.hierarchies.findIndex((function(e){return e.code===n.code}))&&o.hierarchies.push(n)}else null==i.hierarchies&&(i.hierarchies=[]),i.hierarchies.push(n),e.allTypeViews.push(i)},o=0;o<i;++o)r(o)};for(i=0;i<s;++i)c(i);e.filteredHierarchyViews=e.allHierarchyViews,e.filteredTypeViews=e.allTypeViews})).catch((function(t){e.error(t)}));var t={queueLimit:1,removeAfterUpload:!0,url:registry.contextPath+"/excel/get-business-config"};this.uploader=new r.FileUploader(t),this.uploader.onBuildItemForm=function(t,n){n.append("type",e.businessTypeCode),n.append("copyBlank",e.copyBlank),null!=e.date&&n.append("date",e.date),e.importStrategy&&n.append("strategy",e.importStrategy)},this.uploader.onBeforeUploadItem=function(t){e.eventService.start()},this.uploader.onCompleteItem=function(t,n,i,r){e.fileRef.nativeElement.value="",e.eventService.complete()},this.uploader.onSuccessItem=function(t,n,i,r){var o=JSON.parse(n);o.hierarchy=e.hierarchyCode,o.geoObjectType={code:e.typeCode},e.bsModalRef=e.modalService.show(a.SpreadsheetModalComponent,{backdrop:!0,ignoreBackdropClick:!0}),e.bsModalRef.content.init(o,"geoObjectType",!0)},this.uploader.onErrorItem=function(t,n,i,r){var o=JSON.parse(n);e.error({error:o})}},e.prototype.onSelectHierarchy=function(){for(var e=null,t=this.allHierarchyViews.length,n=0;n<t;++n)if(this.allHierarchyViews[n].code===this.hierarchyCode){e=this.allHierarchyViews[n];break}this.filteredTypeViews=null!=e?e.types:this.allTypeViews},e.prototype.onSelectType=function(){for(var e=null,t=this.allTypeViews.length,n=0;n<t;++n)if(this.allTypeViews[n].code===this.typeCode){e=this.allTypeViews[n];break}this.filteredHierarchyViews=null!=e?e.hierarchies:this.allHierarchyViews},e.prototype.onClick=function(){null!=this.uploader.queue&&this.uploader.queue.length>0?this.uploader.uploadAll():this.error({message:this.localizationService.decode("io.missing.file"),error:{}})},e.prototype.onNext=function(){this.showImportConfig=!0},e.prototype.onBack=function(){this.showImportConfig=!1},e.prototype.error=function(e){this.bsModalRef=o.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.EventService),s.ɵɵdirectiveInject(d.BsModalService),s.ɵɵdirectiveInject(c.LocalizationService),s.ɵɵdirectiveInject(p.HierarchyService),s.ɵɵdirectiveInject(u.BusinessTypeService))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["business-importer"]],viewQuery:function(e,t){if(1&e&&s.ɵɵviewQuery(C,1),2&e){var n;s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.fileRef=n.first)}},inputs:{format:"format"},decls:14,vars:2,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],[1,"row"],[1,"col-md-1"],[1,"col-md-10",2,"padding-top","30px"],[1,"heading"],["key","business.data.import"],[1,"inner-col-content-wrapper",2,"padding-top","30px","margin-top","10px"],[4,"ngIf"],[1,"col-xs-1"],[1,"col-xs-9","radio-btn-wrapper"],[1,"radio"],["type","checkbox","name","import-source",3,"value","checked","change"],[3,"ngClass"],["key","importer.import.from-file.label"],[1,"radio-label-description"],["key","importer.import.from-file.description"],[1,"button-holder"],["type","submit",1,"btn","btn-primary",3,"click"],["key","io.next"],[1,"col-xs-2"],["autocomplete","off"],["form","ngForm"],[1,"form-group","row"],["for","businessTypeCode",1,"col-md-2","text-right"],["key","business.data.type"],[1,"col-md-8"],["id","businessTypeCode","name","businessTypeCode","required","",1,"select-area",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],["class","form-group row",4,"ngIf"],["for","strategy",1,"col-md-2","text-right"],["key","spreadsheet.import.import.strategy",4,"ngIf"],["id","strategy","name","strategy","required","",1,"select-area",3,"ngModel","ngModelChange"],["for","date",1,"col-md-2","text-right"],["label","",3,"value","inputName","allowFutureDates","valueChange"],["dateFieldComponents",""],["for","copyBlank",1,"col-md-2","text-right"],["key","dataimporter.importblankcells"],["label","",3,"value","valueChange"],["for","file",1,"col-md-2","text-right"],["key","io.spreadsheet",4,"ngIf"],["class","ghost-input","name","file","type","file","ng2FileSelect","","accept",".xls, .xlsx","required","",3,"uploader",4,"ngIf"],[1,"button-holder","col-md-8","text-right"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["key","io.submit"],[3,"value"],["for","hierarchyCode",1,"col-md-2","text-right"],["key","io.modal.hierarchy"],["id","hierarchyCode","name","hierarchyCode","required","",1,"select-area",3,"ngModel","ngModelChange","change"],["for","code",1,"col-md-2","text-right"],["key","io.geoObjectType"],["id","code","name","code","required","",1,"select-area",3,"ngModel","ngModelChange","change"],["key","spreadsheet.import.import.strategy"],["key","io.spreadsheet"],["name","file","type","file","ng2FileSelect","","accept",".xls, .xlsx","required","",1,"ghost-input",3,"uploader"],["myFile",""]],template:function(e,t){1&e&&(s.ɵɵelementStart(0,"div",0),s.ɵɵelement(1,"cgr-header"),s.ɵɵelement(2,"loading-bar"),s.ɵɵelementStart(3,"div",1),s.ɵɵelementStart(4,"div",2),s.ɵɵelement(5,"div",3),s.ɵɵelementStart(6,"div",4),s.ɵɵelementStart(7,"div",5),s.ɵɵelementStart(8,"h2"),s.ɵɵelement(9,"localize",6),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(10,"div",7),s.ɵɵtemplate(11,x,15,4,"div",8),s.ɵɵtemplate(12,D,46,14,"div",8),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelement(13,"div",3),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(11),s.ɵɵproperty("ngIf",!t.showImportConfig),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",t.showImportConfig))},directives:[m.CgrHeaderComponent,g.LoadingBarComponent,h.LocalizeComponent,f.NgIf,f.NgClass,y.ɵangular_packages_forms_forms_ba,y.NgControlStatusGroup,y.NgForm,y.SelectControlValueAccessor,y.RequiredValidator,y.NgControlStatus,y.NgModel,y.NgSelectOption,y.ɵangular_packages_forms_forms_z,f.NgForOf,v.DateFieldComponent,b.BooleanFieldComponent,S.FileSelectDirective],styles:[".radio-btn-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n\tfont-size: 17px;\n\tfont-weight: normal;\n}\n\n.radio-btn-wrapper[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%] {\n\tcolor: #6BA542;\n\tfont-weight: bold;\n}\n\n.radio-btn-wrapper[_ngcontent-%COMP%]   p.radio-label-description[_ngcontent-%COMP%]{\n\tcolor: #a3a0a0;\n\tmargin-left: 30px;\n}"]}),e}();t.BusinessImporterComponent=R,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(R,[{type:i.Component,args:[{selector:"business-importer",templateUrl:"./business-importer.component.html",styleUrls:["./business-importer.css"]}]}],(function(){return[{type:c.EventService},{type:d.BsModalService},{type:c.LocalizationService},{type:p.HierarchyService},{type:u.BusinessTypeService}]}),{fileRef:[{type:i.ViewChild,args:["myFile"]}],format:[{type:i.Input}]})},1128:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HistoricalReportComponent=void 0;var i=n(0),r=n(58),o=n(2),a=n(193),l=(n(1028),n(25),n(1015),n(0)),s=n(1028),c=n(1015),d=n(25),p=n(18),u=n(88),m=n(1),g=n(382),h=n(379),f=n(381);function y(e,t){if(1&e&&(l.ɵɵelementStart(0,"option",40),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=t.$implicit;l.ɵɵproperty("value",n.code),l.ɵɵadvance(1),l.ɵɵtextInterpolate1(" ",n.super?n.super.label+" : "+n.label:n.label," ")}}function v(e,t){1&e&&(l.ɵɵelementStart(0,"span",41),l.ɵɵelement(1,"localize",42),l.ɵɵelementEnd())}function b(e,t){if(1&e&&(l.ɵɵelementStart(0,"tr",43),l.ɵɵelementStart(1,"td"),l.ɵɵtext(2),l.ɵɵelementEnd(),l.ɵɵelementStart(3,"td"),l.ɵɵelement(4,"date-text",44),l.ɵɵelementEnd(),l.ɵɵelementStart(5,"td"),l.ɵɵtext(6),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"td"),l.ɵɵtext(8),l.ɵɵelementEnd(),l.ɵɵelementStart(9,"td"),l.ɵɵtext(10),l.ɵɵelementEnd(),l.ɵɵelementStart(11,"td"),l.ɵɵtext(12),l.ɵɵelementEnd(),l.ɵɵelementStart(13,"td"),l.ɵɵtext(14),l.ɵɵelementEnd(),l.ɵɵelementStart(15,"td"),l.ɵɵtext(16),l.ɵɵelementEnd(),l.ɵɵelementStart(17,"td"),l.ɵɵtext(18),l.ɵɵelementEnd(),l.ɵɵelementStart(19,"td"),l.ɵɵtext(20),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=t.$implicit;l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.eventId," "),l.ɵɵadvance(2),l.ɵɵproperty("date",n.eventDate),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.eventType," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.description.localizedValue," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.beforeType," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.beforeCode," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.beforeLabel.localizedValue," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.afterType," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.afterCode," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.afterLabel.localizedValue," ")}}function S(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",38),l.ɵɵelementStart(1,"pagination-controls",45),l.ɵɵlistener("pageChange",(function(e){return l.ɵɵrestoreView(n),l.ɵɵnextContext().refresh(e)})),l.ɵɵelementEnd(),l.ɵɵelementEnd()}}var C=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}},E=function(){function e(e,t,n,i){this.service=e,this.iService=t,this.authService=n,this.dateService=i,this.message=null,this.page={count:0,pageNumber:1,pageSize:10,resultSet:[]},this.data={type:"",startDate:"",endDate:""},this.types=[],this.isValid=!1}return e.prototype.ngOnInit=function(){var e=this;this.iService.listGeoObjectTypes(!0).then((function(t){e.types=t})).catch((function(t){e.error(t)}))},e.prototype.refresh=function(e){var t=this;void 0===e&&(e=1),this.service.getHistoricalReport(this.data.type,this.data.startDate,this.data.endDate,this.page.pageSize,e).then((function(e){t.page=e})).catch((function(e){t.error(e)}))},e.prototype.exportToExcel=function(){var e=new r.HttpParams;e=(e=(e=e.set("typeCode",this.data.type.toString())).set("startDate",this.data.startDate.toString())).set("endDate",this.data.endDate.toString()),window.location.href=registry.contextPath+"/transition-event/export-excel?"+e.toString()},e.prototype.checkDates=function(){var e=this;setTimeout((function(){e.isValid=null!=e.data.startDate&&null!=e.data.endDate&&!e.dateService.after(e.data.startDate,e.data.endDate)}),0)},e.prototype.error=function(e){this.message=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.TransitionEventService),l.ɵɵdirectiveInject(c.IOService),l.ɵɵdirectiveInject(d.AuthService),l.ɵɵdirectiveInject(d.DateService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["historical-report"]],decls:62,vars:23,consts:[["autocomplete","off"],["form","ngForm"],[1,"form-group","row"],["for","code",1,"col-md-2","text-right"],["key","io.geoObjectType"],[1,"col-md-8"],["id","code","name","code","required","",1,"select-area",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],["for","startDate",1,"col-md-2","text-right"],["key","io.startDate"],["label","",3,"value","inputName","allowFutureDates","required","valueChange","change"],["dateFieldComponents",""],["class","col-md-8 error-message","style","text-align:center;",4,"ngIf"],["for","endDate",1,"col-md-2","text-right"],["key","io.endDate"],[1,"col-md-4"],["label","",3,"value","inputName","allowInfinity","allowFutureDates","required","valueChange","change"],[1,"button-holder","col-md-8","text-right"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["key","io.submit"],["key","io.export"],[1,"row"],[1,"col-md-12"],[1,"table"],[2,"height","50px","color","grey"],[2,"vertical-align","middle"],["key","historical.row.eventId"],["key","historical.row.eventDate"],["key","historical.row.eventType"],["key","historical.row.description"],["key","historical.row.beforeType"],["key","historical.row.beforeCode"],["key","historical.row.beforeLabel"],["key","historical.row.afterType"],["key","historical.row.afterCode"],["key","historical.row.afterLabel"],["ngFor","",3,"ngForOf"],[1,"solid-table-footer"],["class","solid-table-footer",4,"ngIf"],[3,"value"],[1,"col-md-8","error-message",2,"text-align","center"],["key","manage.versions.startdate.later.enddate.message"],[2,"height","50px"],[3,"date"],[3,"pageChange"]],template:function(e,t){if(1&e&&(l.ɵɵelementStart(0,"div"),l.ɵɵelementStart(1,"form",0,1),l.ɵɵelementStart(3,"div",2),l.ɵɵelementStart(4,"label",3),l.ɵɵelement(5,"localize",4),l.ɵɵelementEnd(),l.ɵɵelementStart(6,"div",5),l.ɵɵelementStart(7,"select",6),l.ɵɵlistener("ngModelChange",(function(e){return t.data.type=e})),l.ɵɵelement(8,"option"),l.ɵɵtemplate(9,y,2,2,"option",7),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelement(10,"div",8),l.ɵɵelementEnd(),l.ɵɵelementStart(11,"div",2),l.ɵɵelementStart(12,"label",9),l.ɵɵelement(13,"localize",10),l.ɵɵelementEnd(),l.ɵɵelementStart(14,"div",8),l.ɵɵelementStart(15,"date-field",11,12),l.ɵɵlistener("valueChange",(function(e){return t.data.startDate=e}))("change",(function(){return t.checkDates()})),l.ɵɵelementEnd(),l.ɵɵtemplate(17,v,2,0,"span",13),l.ɵɵelementEnd(),l.ɵɵelementStart(18,"label",14),l.ɵɵelement(19,"localize",15),l.ɵɵelementEnd(),l.ɵɵelementStart(20,"div",16),l.ɵɵelementStart(21,"date-field",17,12),l.ɵɵlistener("valueChange",(function(e){return t.data.endDate=e}))("change",(function(){return t.checkDates()})),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(23,"div",2),l.ɵɵelement(24,"div",8),l.ɵɵelementStart(25,"div",18),l.ɵɵelementStart(26,"button",19),l.ɵɵlistener("click",(function(){return t.refresh()})),l.ɵɵelement(27,"localize",20),l.ɵɵelementEnd(),l.ɵɵelementStart(28,"button",19),l.ɵɵlistener("click",(function(){return t.exportToExcel()})),l.ɵɵelement(29,"localize",21),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelement(30,"div",8),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(31,"div",22),l.ɵɵelementStart(32,"div",23),l.ɵɵelementStart(33,"table",24),l.ɵɵelementStart(34,"thead"),l.ɵɵelementStart(35,"tr",25),l.ɵɵelementStart(36,"th",26),l.ɵɵelement(37,"localize",27),l.ɵɵelementEnd(),l.ɵɵelementStart(38,"th",26),l.ɵɵelement(39,"localize",28),l.ɵɵelementEnd(),l.ɵɵelementStart(40,"th",26),l.ɵɵelement(41,"localize",29),l.ɵɵelementEnd(),l.ɵɵelementStart(42,"th",26),l.ɵɵelement(43,"localize",30),l.ɵɵelementEnd(),l.ɵɵelementStart(44,"th",26),l.ɵɵelement(45,"localize",31),l.ɵɵelementEnd(),l.ɵɵelementStart(46,"th",26),l.ɵɵelement(47,"localize",32),l.ɵɵelementEnd(),l.ɵɵelementStart(48,"th",26),l.ɵɵelement(49,"localize",33),l.ɵɵelementEnd(),l.ɵɵelementStart(50,"th",26),l.ɵɵelement(51,"localize",34),l.ɵɵelementEnd(),l.ɵɵelementStart(52,"th",26),l.ɵɵelement(53,"localize",35),l.ɵɵelementEnd(),l.ɵɵelementStart(54,"th",26),l.ɵɵelement(55,"localize",36),l.ɵɵelementEnd(),l.ɵɵelement(56,"th"),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(57,"tbody"),l.ɵɵtemplate(58,b,21,10,"ng-template",37),l.ɵɵpipe(59,"paginate"),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(60,"div",38),l.ɵɵtemplate(61,S,2,0,"div",39),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵreference(2);l.ɵɵadvance(7),l.ɵɵproperty("ngModel",t.data.type),l.ɵɵadvance(2),l.ɵɵproperty("ngForOf",t.types),l.ɵɵadvance(6),l.ɵɵproperty("value",t.data.startDate)("inputName","startDate")("allowFutureDates",!1)("required",!0),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",t.dateService.after(t.data.startDate,t.data.endDate)),l.ɵɵadvance(4),l.ɵɵproperty("value",t.data.endDate)("inputName","endDate")("allowInfinity",!0)("allowFutureDates",!0)("required",!0),l.ɵɵadvance(5),l.ɵɵproperty("disabled",!t.isValid||n.invalid),l.ɵɵadvance(2),l.ɵɵproperty("disabled",!t.isValid||n.invalid),l.ɵɵadvance(30),l.ɵɵproperty("ngForOf",l.ɵɵpipeBind2(59,16,t.page.resultSet,l.ɵɵpureFunction3(19,C,t.page.pageSize,t.page.pageNumber,t.page.count))),l.ɵɵadvance(3),l.ɵɵproperty("ngIf",t.page.resultSet.length>0)}},directives:[p.ɵangular_packages_forms_forms_ba,p.NgControlStatusGroup,p.NgForm,u.LocalizeComponent,p.SelectControlValueAccessor,p.RequiredValidator,p.NgControlStatus,p.NgModel,p.NgSelectOption,p.ɵangular_packages_forms_forms_z,m.NgForOf,g.DateFieldComponent,m.NgIf,h.DateTextComponent,f.PaginationControlsComponent],pipes:[f.PaginatePipe],encapsulation:2,data:{animation:[[o.trigger("fadeInOut",[o.transition(":enter",[o.style({opacity:0}),o.animate("300ms")]),o.transition(":leave",o.animate("100ms",o.style({opacity:0})))]),o.trigger("fadeIn",[o.transition(":enter",[o.style({opacity:0}),o.animate("500ms")])])]]}}),e}();t.HistoricalReportComponent=E,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(E,[{type:i.Component,args:[{selector:"historical-report",templateUrl:"./historical-report.component.html",styleUrls:[],encapsulation:i.ViewEncapsulation.None,animations:[[o.trigger("fadeInOut",[o.transition(":enter",[o.style({opacity:0}),o.animate("300ms")]),o.transition(":leave",o.animate("100ms",o.style({opacity:0})))]),o.trigger("fadeIn",[o.transition(":enter",[o.style({opacity:0}),o.animate("500ms")])])]]}]}],(function(){return[{type:s.TransitionEventService},{type:c.IOService},{type:d.AuthService},{type:d.DateService}]}),null)},1129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HistoricalEventModuleComponent=void 0;var i=n(0),r=(n(25),n(0)),o=n(25),a=n(221),l=n(139),s=n(1),c=n(88),d=n(57),p=n(1121),u=n(1128);function m(e,t){1&e&&r.ɵɵelement(0,"localize",10)}function g(e,t){1&e&&r.ɵɵelement(0,"localize",11)}function h(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"div",2),r.ɵɵelementStart(1,"div",3),r.ɵɵelementStart(2,"div",12),r.ɵɵelementStart(3,"a",13),r.ɵɵlistener("click",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext().handleTab("HISTORICAL-EVENT")})),r.ɵɵelement(4,"localize",10),r.ɵɵelementEnd(),r.ɵɵelementStart(5,"a",14),r.ɵɵlistener("click",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext().handleTab("HISTORICAL-REPORT")})),r.ɵɵelement(6,"localize",11),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelement(7,"hr",15),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext();r.ɵɵadvance(3),r.ɵɵproperty("ngClass","HISTORICAL-EVENT"===i.tab?"cr-filter-link-active":""),r.ɵɵadvance(2),r.ɵɵproperty("ngClass","HISTORICAL-REPORT"===i.tab?"cr-filter-link-active":"")}}function f(e,t){1&e&&r.ɵɵelement(0,"transition-event-table")}function y(e,t){1&e&&r.ɵɵelement(0,"historical-report")}var v=function(){function e(e){this.authService=e,this.tab="HISTORICAL-EVENT",this.readOnly=!1}return e.prototype.ngOnInit=function(){this.readOnly=this.authService.isRC(!0),this.tab=this.readOnly?"HISTORICAL-REPORT":"HISTORICAL-EVENT"},e.prototype.handleTab=function(e){this.tab=e},e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(o.AuthService))},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["historical-event-module"]],decls:17,vars:5,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid",2,"height","100%"],[1,"row"],[1,"col-md-12"],[1,"heading"],["key","transition.event.events",4,"ngIf"],["key","historical.row.report",4,"ngIf"],[1,"inner-col-content-wrapper",2,"padding-top","30px","margin-top","10px"],["class","row",4,"ngIf"],[4,"ngIf"],["key","transition.event.events"],["key","historical.row.report"],[1,"form-group","button-row"],[2,"border-bottom","1px solid",3,"routerLink","ngClass","click"],[2,"margin-left","5px","border-bottom","1px solid",3,"routerLink","ngClass","click"],[2,"border-top","solid 3px #6BA542"]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div",0),r.ɵɵelement(1,"cgr-header"),r.ɵɵelement(2,"loading-bar"),r.ɵɵelementStart(3,"div",1),r.ɵɵelementStart(4,"div",2),r.ɵɵelementStart(5,"div",3),r.ɵɵelementStart(6,"div"),r.ɵɵelementStart(7,"div",4),r.ɵɵelementStart(8,"h2"),r.ɵɵtemplate(9,m,1,0,"localize",5),r.ɵɵtemplate(10,g,1,0,"localize",6),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(11,"div",7),r.ɵɵtemplate(12,h,8,2,"div",8),r.ɵɵelementStart(13,"div",2),r.ɵɵelementStart(14,"div",3),r.ɵɵtemplate(15,f,1,0,"transition-event-table",9),r.ɵɵtemplate(16,y,1,0,"historical-report",9),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(9),r.ɵɵproperty("ngIf","HISTORICAL-EVENT"===t.tab),r.ɵɵadvance(1),r.ɵɵproperty("ngIf","HISTORICAL-REPORT"===t.tab),r.ɵɵadvance(2),r.ɵɵproperty("ngIf",!t.readOnly),r.ɵɵadvance(3),r.ɵɵproperty("ngIf","HISTORICAL-EVENT"===t.tab),r.ɵɵadvance(1),r.ɵɵproperty("ngIf","HISTORICAL-REPORT"===t.tab))},directives:[a.CgrHeaderComponent,l.LoadingBarComponent,s.NgIf,c.LocalizeComponent,d.RouterLinkWithHref,s.NgClass,p.TransitionEventTableComponent,u.HistoricalReportComponent],encapsulation:2}),e}();t.HistoricalEventModuleComponent=v,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(v,[{type:i.Component,args:[{selector:"historical-event-module",templateUrl:"./historical-event-module.component.html",styleUrls:[]}]}],(function(){return[{type:o.AuthService}]}),null)},1130:function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,r++)i[r]=o[a];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.ListTypeManagerComponent=void 0;var r=n(0),o=(n(57),n(1015),n(140),n(193)),a=(n(1016),n(384)),l=n(0),s=n(1016),c=n(1015),d=n(57),p=n(140),u=n(221),m=n(139),g=n(1),h=n(1131),f=n(1132),y=["typesByOrgIter"];function v(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",11),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.message)}}var b=function(e){return{"got-group-child":e}},S=function(e){return{typeCode:e}};function C(e,t){if(1&e&&(l.ɵɵelementStart(0,"li",15,16),l.ɵɵelementStart(2,"a",17),l.ɵɵtext(3),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=t.$implicit;l.ɵɵproperty("ngClass",l.ɵɵpureFunction1(5,b,n.superTypeCode))("id",n.code),l.ɵɵadvance(2),l.ɵɵproperty("routerLink","/registry/master-lists")("queryParams",l.ɵɵpureFunction1(7,S,n.code)),l.ɵɵadvance(1),l.ɵɵtextInterpolate1(" ",n.label.localizedValue," ")}}function E(e,t){if(1&e&&(l.ɵɵelementStart(0,"ul",12),l.ɵɵelementStart(1,"div"),l.ɵɵelementStart(2,"div",13),l.ɵɵelementStart(3,"h3"),l.ɵɵtext(4),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(5,C,4,9,"li",14),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=t.$implicit;l.ɵɵadvance(4),l.ɵɵtextInterpolate(n.org.label.localizedValue),l.ɵɵadvance(1),l.ɵɵproperty("ngForOf",n.types)}}function x(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"lists-for-type",18),l.ɵɵlistener("error",(function(e){return l.ɵɵrestoreView(n),l.ɵɵnextContext().error(e)})),l.ɵɵelementEnd()}if(2&e){var i=l.ɵɵnextContext();l.ɵɵproperty("listByType",i.listByType)}}function O(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"list-type",19),l.ɵɵlistener("error",(function(e){return l.ɵɵrestoreView(n),l.ɵɵnextContext().error(e)})),l.ɵɵelementEnd()}if(2&e){var i=l.ɵɵnextContext();l.ɵɵproperty("list",i.current)}}var I=function(){function e(e,t,n,i){this.service=e,this.registryService=t,this.route=n,this.authService=i,this.message=null,this.typesByOrg=[],this.listByType=null,this.current=null,this.subscription=null,this.noQueryParams=!1}return e.prototype.ngOnInit=function(){var e=this;this.subscription=this.route.queryParams.subscribe((function(t){var n=t.typeCode,i=t.listId;null!=i&&i.length>0?e.service.entries(i).then((function(t){e.current=t,e.listByType=null})).catch((function(t){e.error(t)})):null!=n&&n.length>0?e.service.listForType(n).then((function(t){e.listByType=t,e.current=null})).catch((function(t){e.error(t)})):e.noQueryParams=!0})),0===this.typesByOrg.length&&this.registryService.init().then((function(t){if(e.typesByOrg=[],t.organizations.sort((function(e,t){return e.label.localizedValue<t.label.localizedValue?-1:e.label.localizedValue>t.label.localizedValue?1:0})),!e.authService.isSRA()){var n,r=e.authService.getMyOrganizations();(n=t.organizations.findIndex((function(e){return e.code===r[0]})))>=0&&a.default.arrayMove(t.organizations,n,0)}t.organizations.forEach((function(n,r){var o=t.types.filter((function(e){return e.organizationCode===n.code})),a=o.filter((function(e){return!e.superTypeCode}));a.sort((function(e,t){return e.label.localizedValue<t.label.localizedValue?-1:e.label.localizedValue>t.label.localizedValue?1:0}));var l=[];a.filter((function(e){return e.isAbstract})).forEach((function(e){var t={group:e,members:[]};o.forEach((function(n){n.superTypeCode===e.code&&t.members.push(n)})),l.push(t)})),l.forEach((function(e){var t=a.findIndex((function(t){return e.group.code===t.code}));-1!==t&&a.splice.apply(a,i([t+1,0],e.members))})),e.typesByOrg.push({org:n,types:a})}))})).catch((function(t){e.error(t)}))},e.prototype.ngAfterViewInit=function(){var e=this;this.typesByOrgIterEls.changes.subscribe((function(t){if(e.noQueryParams&&t.length>0){var n=document.getElementsByClassName("got-li-item");if(n&&n.length>0)n[0].firstChild.click()}}))},e.prototype.ngOnDestroy=function(){null!=this.subscription&&this.subscription.unsubscribe()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.ListTypeService),l.ɵɵdirectiveInject(c.RegistryService),l.ɵɵdirectiveInject(d.ActivatedRoute),l.ɵɵdirectiveInject(p.AuthService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["list-type-manager"]],viewQuery:function(e,t){if(1&e&&l.ɵɵviewQuery(y,1),2&e){var n;l.ɵɵqueryRefresh(n=l.ɵɵloadQuery())&&(t.typesByOrgIterEls=n)}},decls:13,vars:4,consts:[[1,"new-admin-design-main",2,"overflow-y","hidden"],["id","app-container",1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"row"],[1,"col-md-3","list-sidebar"],[1,"sidebar-section-content"],["class","list-group",4,"ngFor","ngForOf"],[1,"col-md-9","list-type-content"],["id","overflow-div"],[3,"listByType","error",4,"ngIf"],[3,"list","error",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"list-group"],[1,"got-org-label-wrapper"],["class","list-group-item got-li-item",3,"ngClass","id",4,"ngFor","ngForOf"],[1,"list-group-item","got-li-item",3,"ngClass","id"],["typesByOrgIter",""],["routerLinkActive","active",3,"routerLink","queryParams"],[3,"listByType","error"],[3,"list","error"]],template:function(e,t){1&e&&(l.ɵɵelementStart(0,"div",0),l.ɵɵelement(1,"cgr-header"),l.ɵɵelement(2,"loading-bar"),l.ɵɵelementStart(3,"div",1),l.ɵɵtemplate(4,v,2,1,"div",2),l.ɵɵelementStart(5,"div",3),l.ɵɵelementStart(6,"nav",4),l.ɵɵelementStart(7,"div",5),l.ɵɵtemplate(8,E,6,2,"ul",6),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(9,"div",7),l.ɵɵelementStart(10,"div",8),l.ɵɵtemplate(11,x,1,1,"lists-for-type",9),l.ɵɵtemplate(12,O,1,1,"list-type",10),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e&&(l.ɵɵadvance(4),l.ɵɵproperty("ngIf",null!=t.message),l.ɵɵadvance(4),l.ɵɵproperty("ngForOf",t.typesByOrg),l.ɵɵadvance(3),l.ɵɵproperty("ngIf",null!=t.listByType),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",null!=t.current))},directives:[u.CgrHeaderComponent,m.LoadingBarComponent,g.NgIf,g.NgForOf,g.NgClass,d.RouterLinkWithHref,d.RouterLinkActive,h.ListsForTypeComponent,f.ListTypeComponent],styles:[".list-sidebar[_ngcontent-%COMP%] {\n    z-index: 999;\n    background: #f1f1f1;\n    transition: all 0.3s;\n    vertical-align: top;\n    height: calc(100vh - 50px);\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n.list-type-content[_ngcontent-%COMP%] {\n    overflow-y: auto;\n    height: calc(100vh - 50px);\n}\n\n.list-group-item[_ngcontent-%COMP%], li.list-group-item[_ngcontent-%COMP%] {\n    background-color: transparent;\n    padding: 3px 10px;\n}\n\n.got-group-child[_ngcontent-%COMP%] {\n    margin-left: 10px;\n}\n.got-group-child[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\n    padding-left: 5px;\n    border-left: 1px solid;\n}\n\n.cr-sort-arrow[_ngcontent-%COMP%] {\n\tfont-size: 14px;\n}\n\n.cr-filter-link-active[_ngcontent-%COMP%], .cr-filter-link-active[_ngcontent-%COMP%]:active {\n\t\n    border-radius: 10px;\n    background: #6BA542;\n    color: white;\n    font-weight: bold;\n    padding: 3px 15px 3px 15px;\n}\n.cr-filter-link-active[_ngcontent-%COMP%]:hover, .cr-filter-link-active[_ngcontent-%COMP%]:focus {\n\tcolor:white;\n}\n\n.panel-body[_ngcontent-%COMP%] {\n    color: #333;\n    background-color: #f5f5f5;\n    border-color: #ddd;\n}\n\n.unstyled-list[_ngcontent-%COMP%] {\n    list-style: none;\n    padding: 0;\n    color: #707070;\n}\n\n.fa[_ngcontent-%COMP%] {\n    top: 5px;\n}\n.fa-stack[_ngcontent-%COMP%] {\n    width: 1.5em;\n}\n.fa-stack[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    text-align: left;\n}\n.second-stacked-el[_ngcontent-%COMP%]:before {\n    background:#f5f5f5;\n}\n\n\n.full-width-radio-button[_ngcontent-%COMP%] {\n      position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%], .changeSpan[_ngcontent-%COMP%] {\n    position: absolute;\n}\n\nlabel.settings[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]    > i.fa.fa-cog[_ngcontent-%COMP%] {\n    font-size: 15px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%] {\n    display: inline-block;\n    position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .changeSpan[_ngcontent-%COMP%] {\n  right: 2.5px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasErrors[_ngcontent-%COMP%]:before {\n  content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: left;\n  color: red;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasChanges[_ngcontent-%COMP%]:after {\n    content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: right;\n  color: orange;\n}\n\n.warning-text[_ngcontent-%COMP%]{\n    color: orange;\n}"]}),e}();t.ListTypeManagerComponent=I,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(I,[{type:r.Component,args:[{selector:"list-type-manager",templateUrl:"./list-type-manager.component.html",styleUrls:["./list-type-manager.css"]}]}],(function(){return[{type:s.ListTypeService},{type:c.RegistryService},{type:d.ActivatedRoute},{type:p.AuthService}]}),{typesByOrgIterEls:[{type:r.ViewChildren,args:["typesByOrgIter"]}]})},1131:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListsForTypeComponent=void 0;var i=n(0),r=(n(56),n(193)),o=(n(25),n(1043),n(1016),n(1070)),a=n(44),l=n(0),s=n(1016),c=n(56),d=n(25),p=n(88),u=n(1),m=n(57),g=n(379);function h(e,t){1&e&&l.ɵɵelement(0,"i",23)}function f(e,t){1&e&&(l.ɵɵelementStart(0,"span",24),l.ɵɵelement(1,"i",25),l.ɵɵelement(2,"i",26),l.ɵɵelementEnd())}function y(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"button",27),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=l.ɵɵnextContext().$implicit;return l.ɵɵnextContext(2).onDelete(e)})),l.ɵɵelement(1,"localize",28),l.ɵɵelementEnd()}}function v(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",12),l.ɵɵelementStart(1,"div",9),l.ɵɵelementStart(2,"ul",29),l.ɵɵelementStart(3,"li"),l.ɵɵelement(4,"localize",30),l.ɵɵtext(5,": "),l.ɵɵelement(6,"date-text",31),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext().$implicit;l.ɵɵadvance(6),l.ɵɵproperty("date",n.validOn)}}function b(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",12),l.ɵɵelementStart(1,"div",9),l.ɵɵelementStart(2,"ul",29),l.ɵɵelementStart(3,"li"),l.ɵɵelement(4,"localize",32),l.ɵɵtext(5,": "),l.ɵɵelement(6,"date-text",31),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"li"),l.ɵɵelement(8,"localize",33),l.ɵɵtext(9),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext().$implicit;l.ɵɵadvance(6),l.ɵɵproperty("date",n.publishingStartDate),l.ɵɵadvance(3),l.ɵɵtextInterpolate1(": ",n.frequency," ")}}function S(e,t){if(1&e&&(l.ɵɵelementStart(0,"li"),l.ɵɵelement(1,"date-text",31),l.ɵɵtext(2," - "),l.ɵɵelement(3,"date-text",31),l.ɵɵelementEnd()),2&e){var n=t.$implicit;l.ɵɵadvance(1),l.ɵɵproperty("date",n.startDate),l.ɵɵadvance(2),l.ɵɵproperty("date",n.endDate)}}function C(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",12),l.ɵɵelementStart(1,"div",9),l.ɵɵelement(2,"localize",30),l.ɵɵtext(3,": "),l.ɵɵelementStart(4,"ul",29),l.ɵɵtemplate(5,S,4,2,"li",34),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext().$implicit;l.ɵɵadvance(5),l.ɵɵproperty("ngForOf",n.intervalJson)}}var E=function(e,t){return{typeCode:e,listId:t}};function x(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",8),l.ɵɵelementStart(1,"div",9),l.ɵɵelementStart(2,"div",10),l.ɵɵelementStart(3,"div",11),l.ɵɵelementStart(4,"div",12),l.ɵɵelementStart(5,"div",13),l.ɵɵtemplate(6,h,1,0,"i",14),l.ɵɵtemplate(7,f,3,0,"span",15),l.ɵɵelementStart(8,"a",16),l.ɵɵtext(9),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(10,"div",17),l.ɵɵelementStart(11,"button",18),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=t.$implicit;return l.ɵɵnextContext(2).onEdit(e)})),l.ɵɵelement(12,"localize",19),l.ɵɵelementEnd(),l.ɵɵtemplate(13,y,2,0,"button",20),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(14,v,7,1,"div",21),l.ɵɵtemplate(15,b,10,2,"div",21),l.ɵɵtemplate(16,C,6,1,"div",21),l.ɵɵelementStart(17,"div",12),l.ɵɵelementStart(18,"div",9),l.ɵɵelementStart(19,"p",22),l.ɵɵtext(20),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=l.ɵɵnextContext().listByType;l.ɵɵadvance(6),l.ɵɵproperty("ngIf","single"===i.listType),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","single"!==i.listType),l.ɵɵadvance(1),l.ɵɵproperty("routerLink","/registry/master-lists")("queryParams",l.ɵɵpureFunction2(10,E,r.typeCode,i.oid)),l.ɵɵadvance(1),l.ɵɵtextInterpolate1(" ",i.displayLabel.localizedValue," "),l.ɵɵadvance(4),l.ɵɵproperty("ngIf",i.write),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","single"===i.listType),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","incremental"===i.listType),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","interval"===i.listType),l.ɵɵadvance(4),l.ɵɵtextInterpolate(i.description.localizedValue)}}function O(e,t){if(1&e&&l.ɵɵtemplate(0,x,21,13,"div",7),2&e){var n=t.lists;l.ɵɵproperty("ngForOf",n)}}function I(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",35),l.ɵɵelementStart(1,"div",36),l.ɵɵelementStart(2,"div"),l.ɵɵelementStart(3,"button",37),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().onCreate()})),l.ɵɵelement(4,"localize",38),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}}var M=function(e,t){return{lists:e,listByType:t}};function w(e,t){if(1&e&&(l.ɵɵelementStart(0,"div"),l.ɵɵelementStart(1,"h3"),l.ɵɵelement(2,"localize",39),l.ɵɵelementEnd(),l.ɵɵelementContainer(3,40),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext(),i=l.ɵɵreference(1);l.ɵɵadvance(3),l.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",l.ɵɵpureFunction2(2,M,n.groups.single,n.listByType))}}function T(e,t){if(1&e&&(l.ɵɵelementStart(0,"div"),l.ɵɵelementStart(1,"h3"),l.ɵɵelement(2,"localize",41),l.ɵɵelementEnd(),l.ɵɵelementContainer(3,40),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext(),i=l.ɵɵreference(1);l.ɵɵadvance(3),l.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",l.ɵɵpureFunction2(2,M,n.groups.incremental,n.listByType))}}function k(e,t){if(1&e&&(l.ɵɵelementStart(0,"div"),l.ɵɵelementStart(1,"h3"),l.ɵɵelement(2,"localize",42),l.ɵɵelementEnd(),l.ɵɵelementContainer(3,40),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext(),i=l.ɵɵreference(1);l.ɵɵadvance(3),l.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",l.ɵɵpureFunction2(2,M,n.groups.interval,n.listByType))}}function P(e,t){1&e&&(l.ɵɵelementStart(0,"div",43),l.ɵɵelement(1,"localize",44),l.ɵɵelementEnd())}var j=function(){function e(e,t,n){this.service=e,this.modalService=t,this.localizeService=n,this.listByType=null,this.error=new i.EventEmitter,this.groups={single:[],interval:[],incremental:[]}}return e.prototype.ngOnInit=function(){var e=this;this.onListTypeChange=new a.Subject,this.onListTypeChange.subscribe((function(){e.service.listForType(e.listByType.typeCode).then((function(t){e.listByType=t,e.createGroups(e.listByType)})).catch((function(t){e.error.emit(t)}))}))},e.prototype.ngOnDestroy=function(){this.onListTypeChange.unsubscribe()},e.prototype.ngOnChanges=function(e){null!=e.listByType&&this.createGroups(e.listByType.currentValue)},e.prototype.createGroups=function(e){var t=this;this.groups={single:[],interval:[],incremental:[]},e.lists.forEach((function(e){"single"===e.listType?t.groups.single.push(e):"interval"===e.listType?t.groups.interval.push(e):"incremental"===e.listType&&t.groups.incremental.push(e)}))},e.prototype.onCreate=function(){this.bsModalRef=this.modalService.show(o.ListTypePublishModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.init(this.listByType,this.onListTypeChange)},e.prototype.onEdit=function(e){this.bsModalRef=this.modalService.show(o.ListTypePublishModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.init(this.listByType,this.onListTypeChange,e)},e.prototype.onDelete=function(e){var t=this;this.bsModalRef=this.modalService.show(r.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+e.displayLabel.localizedValue+"]",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.type="danger",this.bsModalRef.content.onConfirm.subscribe((function(n){t.service.remove(e).then((function(n){t.listByType.lists=t.listByType.lists.filter((function(t,n,i){return t.oid!==e.oid}))})).catch((function(e){t.error.emit(e)}))}))},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.ListTypeService),l.ɵɵdirectiveInject(c.BsModalService),l.ɵɵdirectiveInject(d.LocalizationService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["lists-for-type"]],inputs:{listByType:"listByType"},outputs:{error:"error"},features:[l.ɵɵNgOnChangesFeature],decls:15,vars:7,consts:[["groupDetail",""],[1,"heading"],[1,"subheading"],["key","list.type.heading"],["style","margin-top:30px;margin-bottom:30px;","class","row",4,"ngIf"],[4,"ngIf"],["style","font-style:italic;",4,"ngIf"],["class","row","style","margin-bottom: 5px;",4,"ngFor","ngForOf"],[1,"row",2,"margin-bottom","5px"],[1,"col-md-12"],[1,"panel","panel-default"],[1,"panel-body"],[1,"row"],[1,"col-md-7",2,"vertical-align","middle","line-height","40px"],["class","fa fa-table","aria-hidden","true",4,"ngIf"],["class","fa-stack fa-lg",4,"ngIf"],["routerLinkActive","active",2,"font-size","18px",3,"routerLink","queryParams"],[1,"col-md-5",2,"text-align","right"],["type","submit","role","button",1,"btn","btn-default",3,"click"],["key","masterlist.button.configuration"],["type","submit","class","btn btn-danger","role","button",3,"click",4,"ngIf"],["class","row",4,"ngIf"],[2,"color","#707070"],["aria-hidden","true",1,"fa","fa-table"],[1,"fa-stack","fa-lg"],[1,"fa","fa-table","fa-stack-2x"],[1,"fa","fa-table","fa-stack-1x","second-stacked-el",2,"margin-left","8px","margin-top","-4px"],["type","submit","role","button",1,"btn","btn-danger",3,"click"],["key","modal.button.delete"],[1,"unstyled-list"],["key","list.type.valid.on"],[3,"date"],["key","data.property.label.publishingStartDate"],["key","data.property.label.frequency"],[4,"ngFor","ngForOf"],[1,"row",2,"margin-top","30px","margin-bottom","30px"],[1,"col-md-6"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","list.type.button.create"],["key","list.type.single.date"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["key","list.type.incremental.series"],["key","list.type.interval.series"],[2,"font-style","italic"],["key","list.type.no.lists.message"]],template:function(e,t){1&e&&(l.ɵɵtemplate(0,O,1,1,"ng-template",null,0,l.ɵɵtemplateRefExtractor),l.ɵɵelementContainerStart(2),l.ɵɵelementStart(3,"div",1),l.ɵɵelementStart(4,"h2"),l.ɵɵtext(5),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(6,"div",2),l.ɵɵelementStart(7,"h3"),l.ɵɵelement(8,"localize",3),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelement(9,"hr"),l.ɵɵtemplate(10,I,5,0,"div",4),l.ɵɵtemplate(11,w,4,5,"div",5),l.ɵɵtemplate(12,T,4,5,"div",5),l.ɵɵtemplate(13,k,4,5,"div",5),l.ɵɵtemplate(14,P,2,0,"div",6),l.ɵɵelementContainerEnd()),2&e&&(l.ɵɵadvance(5),l.ɵɵtextInterpolate2(" ",t.listByType.orgLabel," : ",t.listByType.typeLabel," "),l.ɵɵadvance(5),l.ɵɵproperty("ngIf",t.listByType.write),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.groups.single.length>0),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.groups.incremental.length>0),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.groups.interval.length>0),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",0===t.listByType.lists.length))},directives:[p.LocalizeComponent,u.NgIf,u.NgForOf,m.RouterLinkWithHref,m.RouterLinkActive,g.DateTextComponent,u.NgTemplateOutlet],styles:[".list-sidebar[_ngcontent-%COMP%] {\n    z-index: 999;\n    background: #f1f1f1;\n    transition: all 0.3s;\n    vertical-align: top;\n    height: calc(100vh - 50px);\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n.list-type-content[_ngcontent-%COMP%] {\n    overflow-y: auto;\n    height: calc(100vh - 50px);\n}\n\n.list-group-item[_ngcontent-%COMP%], li.list-group-item[_ngcontent-%COMP%] {\n    background-color: transparent;\n    padding: 3px 10px;\n}\n\n.got-group-child[_ngcontent-%COMP%] {\n    margin-left: 10px;\n}\n.got-group-child[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\n    padding-left: 5px;\n    border-left: 1px solid;\n}\n\n.cr-sort-arrow[_ngcontent-%COMP%] {\n\tfont-size: 14px;\n}\n\n.cr-filter-link-active[_ngcontent-%COMP%], .cr-filter-link-active[_ngcontent-%COMP%]:active {\n\t\n    border-radius: 10px;\n    background: #6BA542;\n    color: white;\n    font-weight: bold;\n    padding: 3px 15px 3px 15px;\n}\n.cr-filter-link-active[_ngcontent-%COMP%]:hover, .cr-filter-link-active[_ngcontent-%COMP%]:focus {\n\tcolor:white;\n}\n\n.panel-body[_ngcontent-%COMP%] {\n    color: #333;\n    background-color: #f5f5f5;\n    border-color: #ddd;\n}\n\n.unstyled-list[_ngcontent-%COMP%] {\n    list-style: none;\n    padding: 0;\n    color: #707070;\n}\n\n.fa[_ngcontent-%COMP%] {\n    top: 5px;\n}\n.fa-stack[_ngcontent-%COMP%] {\n    width: 1.5em;\n}\n.fa-stack[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    text-align: left;\n}\n.second-stacked-el[_ngcontent-%COMP%]:before {\n    background:#f5f5f5;\n}\n\n\n.full-width-radio-button[_ngcontent-%COMP%] {\n      position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%], .changeSpan[_ngcontent-%COMP%] {\n    position: absolute;\n}\n\nlabel.settings[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]    > i.fa.fa-cog[_ngcontent-%COMP%] {\n    font-size: 15px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%] {\n    display: inline-block;\n    position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .changeSpan[_ngcontent-%COMP%] {\n  right: 2.5px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasErrors[_ngcontent-%COMP%]:before {\n  content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: left;\n  color: red;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasChanges[_ngcontent-%COMP%]:after {\n    content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: right;\n  color: orange;\n}\n\n.warning-text[_ngcontent-%COMP%]{\n    color: orange;\n}"]}),e}();t.ListsForTypeComponent=j,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(j,[{type:i.Component,args:[{selector:"lists-for-type",templateUrl:"./lists-for-type.component.html",styleUrls:["./list-type-manager.css"]}]}],(function(){return[{type:s.ListTypeService},{type:c.BsModalService},{type:d.LocalizationService}]}),{listByType:[{type:i.Input}],error:[{type:i.Output}]})},1132:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListTypeComponent=void 0;var i=n(0),r=(n(56),n(193)),o=(n(25),n(1043),n(1070)),a=(n(1016),n(1133)),l=(n(57),n(857)),s=n(859),c=n(1020),d=(n(1019),n(0)),p=n(57),u=n(1016),m=n(56),g=n(25),h=n(1019),f=n(88),y=n(1),v=n(120),b=n(379);function S(e,t){if(1&e&&(d.ɵɵelementStart(0,"span",30),d.ɵɵelement(1,"localize",31),d.ɵɵtext(2),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext().version;d.ɵɵadvance(2),d.ɵɵtextInterpolate1(" ",n.versionNumber," ")}}function C(e,t){1&e&&(d.ɵɵelementStart(0,"span",30),d.ɵɵelement(1,"localize",32),d.ɵɵelementEnd())}function E(e,t){1&e&&d.ɵɵelement(0,"localize",33)}function x(e,t){1&e&&d.ɵɵelement(0,"localize",34)}function O(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"button",35),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext(),t=e.entry,i=e.version;return d.ɵɵnextContext().onDelete(t,i)})),d.ɵɵelement(1,"localize",36),d.ɵɵelementEnd()}}function I(e,t){if(1&e&&(d.ɵɵelementStart(0,"a",37),d.ɵɵelement(1,"localize",38),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext().version;d.ɵɵproperty("routerLink","/registry/master-list/"+n.oid)}}function M(e,t){1&e&&(d.ɵɵelementStart(0,"span"),d.ɵɵelement(1,"localize",38),d.ɵɵelementEnd())}function w(e,t){1&e&&d.ɵɵelement(0,"localize",39)}function T(e,t){1&e&&d.ɵɵelement(0,"localize",40)}function k(e,t){1&e&&d.ɵɵelement(0,"localize",41)}function P(e,t){1&e&&d.ɵɵelement(0,"localize",42)}function j(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"a",43),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().version;return d.ɵɵnextContext().onGotoMap(e)})),d.ɵɵelement(1,"localize",44),d.ɵɵelementEnd()}}function z(e,t){1&e&&(d.ɵɵelementStart(0,"span"),d.ɵɵelement(1,"localize",44),d.ɵɵelementEnd())}function D(e,t){1&e&&d.ɵɵelement(0,"localize",39)}function R(e,t){1&e&&d.ɵɵelement(0,"localize",40)}function L(e,t){1&e&&d.ɵɵelement(0,"localize",41)}function _(e,t){1&e&&d.ɵɵelement(0,"localize",42)}var A=function(e,t){return{"fa-chevron-down":e,"fa-chevron-right":t}};function N(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"div",9),d.ɵɵelementStart(1,"div",10),d.ɵɵelementStart(2,"span",11),d.ɵɵlistener("click",(function(){var e=t.version;return e.collapsed=!e.collapsed})),d.ɵɵelement(3,"i",12),d.ɵɵtemplate(4,S,3,1,"span",13),d.ɵɵtemplate(5,C,2,0,"span",13),d.ɵɵelementStart(6,"span",14),d.ɵɵelement(7,"localize",15),d.ɵɵtext(8),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(9,"div",16),d.ɵɵelementStart(10,"button",17),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=t.entry,i=t.version;return d.ɵɵnextContext().onEdit(e,i)})),d.ɵɵtemplate(11,E,1,0,"localize",18),d.ɵɵtemplate(12,x,1,0,"localize",19),d.ɵɵelementEnd(),d.ɵɵtemplate(13,O,2,0,"button",20),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(14,"div",21),d.ɵɵelementStart(15,"ul",22),d.ɵɵelementStart(16,"li"),d.ɵɵtemplate(17,I,2,1,"a",23),d.ɵɵtemplate(18,M,2,0,"span",24),d.ɵɵelementStart(19,"span"),d.ɵɵtext(20," ( "),d.ɵɵtemplate(21,w,1,0,"localize",25),d.ɵɵtemplate(22,T,1,0,"localize",26),d.ɵɵtext(23," ) "),d.ɵɵelementEnd(),d.ɵɵelementStart(24,"span"),d.ɵɵtext(25," ( "),d.ɵɵtemplate(26,k,1,0,"localize",27),d.ɵɵtemplate(27,P,1,0,"localize",28),d.ɵɵtext(28," ) "),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(29,"li"),d.ɵɵtemplate(30,j,2,0,"a",29),d.ɵɵtemplate(31,z,2,0,"span",24),d.ɵɵelementStart(32,"span"),d.ɵɵtext(33," ( "),d.ɵɵtemplate(34,D,1,0,"localize",25),d.ɵɵtemplate(35,R,1,0,"localize",26),d.ɵɵtext(36," ) "),d.ɵɵelementEnd(),d.ɵɵelementStart(37,"span"),d.ɵɵtext(38," ( "),d.ɵɵtemplate(39,L,1,0,"localize",27),d.ɵɵtemplate(40,_,1,0,"localize",28),d.ɵɵtext(41," ) "),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd()}if(2&e){var i=t.version,r=d.ɵɵnextContext();d.ɵɵadvance(2),d.ɵɵattribute("aria-expanded",!i.collapsed),d.ɵɵadvance(1),d.ɵɵproperty("ngClass",d.ɵɵpureFunction2(21,A,i.collapsed,!i.collapsed)),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",!i.working),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",i.working),d.ɵɵadvance(3),d.ɵɵtextInterpolate1(": ",i.createDate," "),d.ɵɵadvance(3),d.ɵɵproperty("ngIf",i.working),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",!i.working),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",r.list.write&&!i.working),d.ɵɵadvance(1),d.ɵɵproperty("collapse",!i.collapsed),d.ɵɵadvance(3),d.ɵɵproperty("ngIf",i.isMember||"PUBLIC"===i.listMetadata.visibility),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",!(i.isMember||"PUBLIC"===i.listMetadata.visibility)),d.ɵɵadvance(3),d.ɵɵproperty("ngIf","PUBLIC"===i.listMetadata.visibility),d.ɵɵadvance(1),d.ɵɵproperty("ngIf","PUBLIC"!==i.listMetadata.visibility),d.ɵɵadvance(4),d.ɵɵproperty("ngIf",i.listMetadata.master),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",!i.listMetadata.master),d.ɵɵadvance(3),d.ɵɵproperty("ngIf",i.isMember||"PUBLIC"===i.geospatialMetadata.visibility),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",!(i.isMember||"PUBLIC"===i.geospatialMetadata.visibility)),d.ɵɵadvance(3),d.ɵɵproperty("ngIf","PUBLIC"===i.geospatialMetadata.visibility),d.ɵɵadvance(1),d.ɵɵproperty("ngIf","PUBLIC"!==i.geospatialMetadata.visibility),d.ɵɵadvance(4),d.ɵɵproperty("ngIf",i.geospatialMetadata.master),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",!i.geospatialMetadata.master)}}function V(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"button",45),d.ɵɵlistener("click",(function(){return d.ɵɵrestoreView(n),d.ɵɵnextContext().onCreateEntries()})),d.ɵɵelement(1,"localize",46),d.ɵɵelementEnd()}}function F(e,t){if(1&e&&(d.ɵɵelementContainerStart(0),d.ɵɵtext(1),d.ɵɵelementContainerEnd()),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵadvance(1),d.ɵɵtextInterpolate1(" ",n.period.value," ")}}function H(e,t){if(1&e&&(d.ɵɵelementContainerStart(0),d.ɵɵelement(1,"date-text",56),d.ɵɵelementContainerEnd()),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵadvance(1),d.ɵɵproperty("date",n.period.value)}}function G(e,t){if(1&e&&(d.ɵɵelementContainerStart(0),d.ɵɵelement(1,"date-text",56),d.ɵɵtext(2," - "),d.ɵɵelement(3,"date-text",56),d.ɵɵelementContainerEnd()),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵadvance(1),d.ɵɵproperty("date",n.period.value.startDate),d.ɵɵadvance(2),d.ɵɵproperty("date",n.period.value.endDate)}}var B=function(e,t){return{entry:e,version:t}};function q(e,t){if(1&e&&d.ɵɵelementContainer(0,57),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵnextContext();var i=d.ɵɵreference(1);d.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",d.ɵɵpureFunction2(2,B,n,n.versions[n.versions.length-1]))}}function U(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"button",45),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().$implicit;return d.ɵɵnextContext().onCreate(e)})),d.ɵɵelement(1,"localize",58),d.ɵɵelementEnd()}}function $(e,t){1&e&&d.ɵɵelement(0,"localize",61)}function J(e,t){1&e&&d.ɵɵelement(0,"localize",62)}function W(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"button",17),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().$implicit;return d.ɵɵnextContext().toggleVersions(e)})),d.ɵɵtemplate(1,$,1,0,"localize",59),d.ɵɵtemplate(2,J,1,0,"localize",60),d.ɵɵelementEnd()}if(2&e){var i=d.ɵɵnextContext().$implicit;d.ɵɵadvance(1),d.ɵɵproperty("ngIf",!i.showAll),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",i.showAll)}}function Y(e,t){if(1&e&&d.ɵɵelementContainer(0,57),2&e){var n=d.ɵɵnextContext().$implicit,i=d.ɵɵnextContext(2).$implicit;d.ɵɵnextContext();var r=d.ɵɵreference(1);d.ɵɵproperty("ngTemplateOutlet",r)("ngTemplateOutletContext",d.ɵɵpureFunction2(2,B,i,n))}}function K(e,t){if(1&e&&(d.ɵɵelementContainerStart(0),d.ɵɵtemplate(1,Y,1,5,"ng-container",50),d.ɵɵelementContainerEnd()),2&e){var n=t.index,i=d.ɵɵnextContext(2).$implicit;d.ɵɵadvance(1),d.ɵɵproperty("ngIf",0===n||i.showAll&&n!==i.versions.length-1)}}function Q(e,t){if(1&e&&(d.ɵɵelementContainerStart(0),d.ɵɵtemplate(1,K,2,1,"ng-container",63),d.ɵɵelementContainerEnd()),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵadvance(1),d.ɵɵproperty("ngForOf",n.versions)}}function X(e,t){1&e&&(d.ɵɵelementStart(0,"div",2),d.ɵɵelementStart(1,"div",3),d.ɵɵelement(2,"localize",64),d.ɵɵelementEnd(),d.ɵɵelementEnd())}function Z(e,t){if(1&e&&(d.ɵɵelementStart(0,"div",47),d.ɵɵelementStart(1,"div",3),d.ɵɵelementStart(2,"div",48),d.ɵɵelementStart(3,"div",49),d.ɵɵelementStart(4,"div",2),d.ɵɵelementStart(5,"div",3),d.ɵɵelementStart(6,"h3"),d.ɵɵtemplate(7,F,2,1,"ng-container",24),d.ɵɵtemplate(8,H,2,1,"ng-container",24),d.ɵɵtemplate(9,G,4,2,"ng-container",24),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵtemplate(10,q,1,5,"ng-container",50),d.ɵɵelement(11,"hr",51),d.ɵɵelementStart(12,"h4",52),d.ɵɵelement(13,"localize",53),d.ɵɵelementEnd(),d.ɵɵelementStart(14,"div"),d.ɵɵtemplate(15,U,2,0,"button",7),d.ɵɵtemplate(16,W,3,2,"button",54),d.ɵɵelementEnd(),d.ɵɵtemplate(17,Q,2,1,"ng-container",24),d.ɵɵtemplate(18,X,3,0,"div",55),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd()),2&e){var n=t.$implicit,i=d.ɵɵnextContext();d.ɵɵadvance(7),d.ɵɵproperty("ngIf","text"===n.period.type),d.ɵɵadvance(1),d.ɵɵproperty("ngIf","date"===n.period.type),d.ɵɵadvance(1),d.ɵɵproperty("ngIf","range"===n.period.type),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",n.versions.length>0&&n.versions[n.versions.length-1].working),d.ɵɵadvance(5),d.ɵɵproperty("ngIf",i.list.write),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",n.versions.length>2),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",n.versions.length>1),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",1===n.versions.length)}}var ee=function(){function e(e,t,n,r,o,a){this.router=e,this.service=t,this.modalService=n,this.localizeService=r,this.geomService=o,this.authService=a,this.error=new i.EventEmitter,this.isRC=!1}return e.prototype.ngOnInit=function(){this.isRC=this.authService.isGeoObjectTypeOrSuperRC({organizationCode:this.list.organization,code:this.list.typeCode,superTypeCode:this.list.superTypeCode}),this.list.entries.filter((function(e){return null!=e.versions&&e.versions.length>0})).forEach((function(e){e.versions[0].collapsed=!0}))},e.prototype.ngOnDestroy=function(){},e.prototype.toggleVersions=function(e){e.showAll=!e.showAll},e.prototype.onCreate=function(e){this.bsModalRef=this.modalService.show(a.PublishVersionComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.init(this.list,e)},e.prototype.onCreateEntries=function(){var e=this;this.service.createEntries(this.list.oid).then((function(t){t.entries.forEach((function(t){-1===e.list.entries.findIndex((function(e){return e.oid===t.oid}))&&e.list.entries.push(t)}))})).catch((function(t){e.error.emit(t)}))},e.prototype.onEdit=function(e,t){this.bsModalRef=this.modalService.show(a.PublishVersionComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.init(this.list,e,t)},e.prototype.onViewConfiguration=function(e){this.bsModalRef=this.modalService.show(o.ListTypePublishModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.init(e,null,e)},e.prototype.onDelete=function(e,t){var n=this;this.bsModalRef=this.modalService.show(r.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" Version ["+t.versionNumber+"]",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.type="danger",this.bsModalRef.content.onConfirm.subscribe((function(i){n.service.removeVersion(t).then((function(n){var i=e.versions.findIndex((function(e){return e.oid===t.oid}));-1!==i&&e.versions.splice(i,1)})).catch((function(e){n.error.emit(e)}))}))},e.prototype.layerFromVersion=function(e){var t=new c.ListVectorLayerDataSource(this.service,e.oid).createLayer(e.displayLabel,!0,s().hexString());return this.geomService.zoomOnReady(t.getId()),this.geomService.getDataSourceFactory().serializeLayers([t])},e.prototype.onGotoMap=function(e){var t=this;this.service.getBounds(e.oid).then((function(n){var i={layers:JSON.stringify(t.layerFromVersion(e))};if(n&&Array.isArray(n)){var r=new l.LngLatBounds([n[0],n[1]],[n[2],n[3]]).toArray();i.bounds=JSON.stringify(r)}t.router.navigate(["/registry/location-manager"],{queryParams:i})})).catch((function(e){t.error.emit(e)}))},e.ɵfac=function(t){return new(t||e)(d.ɵɵdirectiveInject(p.Router),d.ɵɵdirectiveInject(u.ListTypeService),d.ɵɵdirectiveInject(m.BsModalService),d.ɵɵdirectiveInject(g.LocalizationService),d.ɵɵdirectiveInject(h.GeometryService),d.ɵɵdirectiveInject(g.AuthService))},e.ɵcmp=d.ɵɵdefineComponent({type:e,selectors:[["list-type"]],inputs:{list:"list"},outputs:{error:"error"},decls:14,vars:3,consts:[["versionDetail",""],[1,"heading"],[1,"row"],[1,"col-md-12"],[1,"col-md-12",2,"padding","20px 15px"],["type","submit","role","button",1,"btn","btn-default",2,"padding-right","10px",3,"click"],["key","masterlist.button.configuration"],["type","submit","class","btn btn-primary","style","margin:0;","role","button",3,"click",4,"ngIf"],["class","row","style","margin-bottom: 5px;",4,"ngFor","ngForOf"],[1,"row",2,"margin-bottom","5px","line-height","40px"],[1,"col-md-7",2,"vertical-align","middle"],[1,"clickable",3,"click"],[1,"fa","fa-chevron-right",2,"font-size","14px",3,"ngClass"],["class","h4",4,"ngIf"],[2,"margin-left","10px","color","grey"],["key","list.type.date.generated"],[1,"col-md-5",2,"text-align","right"],["type","submit","role","button",1,"btn","btn-default",3,"click"],["key","masterlist.button.metadata",4,"ngIf"],["key","masterlist.snapshot.button.metadata",4,"ngIf"],["type","submit","class","btn btn-danger","role","button",3,"click",4,"ngIf"],[1,"row",2,"margin-bottom","5px",3,"collapse"],[2,"list-style","none"],["routerLinkActive","active",3,"routerLink",4,"ngIf"],[4,"ngIf"],["key","masterlist.public",4,"ngIf"],["key","masterlist.private",4,"ngIf"],["key","list.type.master",4,"ngIf"],["key","list.type.non.master",4,"ngIf"],[3,"click",4,"ngIf"],[1,"h4"],["key","list.type.version"],["key","list.type.working.version"],["key","masterlist.button.metadata"],["key","masterlist.snapshot.button.metadata"],["type","submit","role","button",1,"btn","btn-danger",3,"click"],["key","modal.button.delete"],["routerLinkActive","active",3,"routerLink"],["key","list.type.list"],["key","masterlist.public"],["key","masterlist.private"],["key","list.type.master"],["key","list.type.non.master"],[3,"click"],["key","list.type.geospatial"],["type","submit","role","button",1,"btn","btn-primary",2,"margin","0",3,"click"],["key","list.type.create.entries"],[1,"row",2,"margin-bottom","5px"],[1,"panel","panel-default"],[1,"panel-body"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[2,"border-color","lightgrey"],[2,"margin-top","20px"],["key","list.type.published.versions.header"],["type","submit","class","btn btn-default","role","button",3,"click",4,"ngIf"],["class","row",4,"ngIf"],[3,"date"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["key","list.type.new.version"],["key","list.type.see.versions",4,"ngIf"],["key","list.type.hide.versions",4,"ngIf"],["key","list.type.see.versions"],["key","list.type.hide.versions"],[4,"ngFor","ngForOf"],["key","list.type.no.versions",2,"color","grey","font-style","italic"]],template:function(e,t){1&e&&(d.ɵɵtemplate(0,N,42,24,"ng-template",null,0,d.ɵɵtemplateRefExtractor),d.ɵɵelementContainerStart(2),d.ɵɵelementStart(3,"div",1),d.ɵɵelementStart(4,"div",2),d.ɵɵelementStart(5,"div",3),d.ɵɵelementStart(6,"h2"),d.ɵɵtext(7),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(8,"div",2),d.ɵɵelementStart(9,"div",4),d.ɵɵelementStart(10,"button",5),d.ɵɵlistener("click",(function(){return t.onViewConfiguration(t.list)})),d.ɵɵelement(11,"localize",6),d.ɵɵelementEnd(),d.ɵɵtemplate(12,V,2,0,"button",7),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵtemplate(13,Z,19,8,"div",8),d.ɵɵelementContainerEnd()),2&e&&(d.ɵɵadvance(7),d.ɵɵtextInterpolate1(" ",t.list.displayLabel.localizedValue," "),d.ɵɵadvance(5),d.ɵɵproperty("ngIf","incremental"===t.list.listType),d.ɵɵadvance(1),d.ɵɵproperty("ngForOf",t.list.entries))},directives:[f.LocalizeComponent,y.NgIf,y.NgForOf,y.NgClass,v.CollapseDirective,p.RouterLinkWithHref,p.RouterLinkActive,b.DateTextComponent,y.NgTemplateOutlet],styles:[".list-sidebar[_ngcontent-%COMP%] {\n    z-index: 999;\n    background: #f1f1f1;\n    transition: all 0.3s;\n    vertical-align: top;\n    height: calc(100vh - 50px);\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n.list-type-content[_ngcontent-%COMP%] {\n    overflow-y: auto;\n    height: calc(100vh - 50px);\n}\n\n.list-group-item[_ngcontent-%COMP%], li.list-group-item[_ngcontent-%COMP%] {\n    background-color: transparent;\n    padding: 3px 10px;\n}\n\n.got-group-child[_ngcontent-%COMP%] {\n    margin-left: 10px;\n}\n.got-group-child[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\n    padding-left: 5px;\n    border-left: 1px solid;\n}\n\n.cr-sort-arrow[_ngcontent-%COMP%] {\n\tfont-size: 14px;\n}\n\n.cr-filter-link-active[_ngcontent-%COMP%], .cr-filter-link-active[_ngcontent-%COMP%]:active {\n\t\n    border-radius: 10px;\n    background: #6BA542;\n    color: white;\n    font-weight: bold;\n    padding: 3px 15px 3px 15px;\n}\n.cr-filter-link-active[_ngcontent-%COMP%]:hover, .cr-filter-link-active[_ngcontent-%COMP%]:focus {\n\tcolor:white;\n}\n\n.panel-body[_ngcontent-%COMP%] {\n    color: #333;\n    background-color: #f5f5f5;\n    border-color: #ddd;\n}\n\n.unstyled-list[_ngcontent-%COMP%] {\n    list-style: none;\n    padding: 0;\n    color: #707070;\n}\n\n.fa[_ngcontent-%COMP%] {\n    top: 5px;\n}\n.fa-stack[_ngcontent-%COMP%] {\n    width: 1.5em;\n}\n.fa-stack[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    text-align: left;\n}\n.second-stacked-el[_ngcontent-%COMP%]:before {\n    background:#f5f5f5;\n}\n\n\n.full-width-radio-button[_ngcontent-%COMP%] {\n      position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%], .changeSpan[_ngcontent-%COMP%] {\n    position: absolute;\n}\n\nlabel.settings[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]    > i.fa.fa-cog[_ngcontent-%COMP%] {\n    font-size: 15px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%] {\n    display: inline-block;\n    position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .changeSpan[_ngcontent-%COMP%] {\n  right: 2.5px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasErrors[_ngcontent-%COMP%]:before {\n  content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: left;\n  color: red;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasChanges[_ngcontent-%COMP%]:after {\n    content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: right;\n  color: orange;\n}\n\n.warning-text[_ngcontent-%COMP%]{\n    color: orange;\n}"]}),e}();t.ListTypeComponent=ee,("undefined"==typeof ngDevMode||ngDevMode)&&d.ɵsetClassMetadata(ee,[{type:i.Component,args:[{selector:"list-type",templateUrl:"./list-type.component.html",styleUrls:["./list-type-manager.css"]}]}],(function(){return[{type:p.Router},{type:u.ListTypeService},{type:m.BsModalService},{type:g.LocalizationService},{type:h.GeometryService},{type:g.AuthService}]}),{list:[{type:i.Input}],error:[{type:i.Output}]})},1133:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PublishVersionComponent=void 0;var r=n(0),o=(n(56),n(193)),a=(n(1016),n(0)),l=n(1016),s=n(56),c=n(1),d=n(88),p=n(546),u=n(18),m=n(545);function g(e,t){1&e&&(a.ɵɵelementStart(0,"option",23),a.ɵɵelement(1,"localize",24),a.ɵɵelementEnd())}function h(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",4),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",25),a.ɵɵelementStart(4,"span",26),a.ɵɵtext(5," ("),a.ɵɵelement(6,"convert-key-label",27),a.ɵɵtext(7,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",6),a.ɵɵelementStart(9,"input",28),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext(2);a.ɵɵadvance(6),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("name","metadata-displayLabel-"+n.locale)("disabled",i.readonly)("required",!1)}}function f(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",4),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",29),a.ɵɵelementStart(4,"span",26),a.ɵɵtext(5," ("),a.ɵɵelement(6,"convert-key-label",27),a.ɵɵtext(7,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",6),a.ɵɵelementStart(9,"textarea",30),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext(2);a.ɵɵadvance(6),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("disabled",i.readonly)("required",!1)}}function y(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",4),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",31),a.ɵɵelementStart(4,"span",26),a.ɵɵtext(5," ("),a.ɵɵelement(6,"convert-key-label",27),a.ɵɵtext(7,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",6),a.ɵɵelementStart(9,"textarea",32),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext(2);a.ɵɵadvance(6),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("disabled",i.readonly)("required",!1)}}function v(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",4),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",33),a.ɵɵelementStart(4,"span",26),a.ɵɵtext(5," ("),a.ɵɵelement(6,"convert-key-label",27),a.ɵɵtext(7,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",6),a.ɵɵelementStart(9,"input",28),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext(2);a.ɵɵadvance(6),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("name","progress-"+n.locale)("disabled",i.readonly)("required",!1)}}function b(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",4),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",34),a.ɵɵelementStart(4,"span",26),a.ɵɵtext(5," ("),a.ɵɵelement(6,"convert-key-label",27),a.ɵɵtext(7,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",6),a.ɵɵelementStart(9,"input",28),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext(2);a.ɵɵadvance(6),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("name","accessConstraints-"+n.locale)("disabled",i.readonly)("required",!1)}}function S(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",4),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",35),a.ɵɵelementStart(4,"span",26),a.ɵɵtext(5," ("),a.ɵɵelement(6,"convert-key-label",27),a.ɵɵtext(7,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",6),a.ɵɵelementStart(9,"input",28),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext(2);a.ɵɵadvance(6),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("name","useConstraints-"+n.locale)("disabled",i.readonly)("required",!1)}}function C(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",4),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",36),a.ɵɵelementStart(4,"span",26),a.ɵɵtext(5," ("),a.ɵɵelement(6,"convert-key-label",27),a.ɵɵtext(7,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",6),a.ɵɵelementStart(9,"textarea",37),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext(2);a.ɵɵadvance(6),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("disabled",i.readonly)("required",!1)}}function E(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",4),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",38),a.ɵɵelementStart(4,"span",26),a.ɵɵtext(5," ("),a.ɵɵelement(6,"convert-key-label",27),a.ɵɵtext(7,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",6),a.ɵɵelementStart(9,"textarea",39),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext(2);a.ɵɵadvance(6),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("disabled",i.readonly)("required",!1)}}function x(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementContainerStart(0),a.ɵɵelementStart(1,"div",3),a.ɵɵelementStart(2,"div",4),a.ɵɵelementStart(3,"label"),a.ɵɵelement(4,"localize",40),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"div",6),a.ɵɵelementStart(6,"input",41),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().metadata.topicCategories=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(7,"div",3),a.ɵɵelementStart(8,"div",4),a.ɵɵelementStart(9,"label"),a.ɵɵelement(10,"localize",42),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(11,"div",6),a.ɵɵelementStart(12,"input",43),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().metadata.placeKeywords=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(13,"div",3),a.ɵɵelementStart(14,"div",4),a.ɵɵelementStart(15,"label"),a.ɵɵelement(16,"localize",44),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(17,"div",6),a.ɵɵelementStart(18,"input",45),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().metadata.updateFrequency=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(19,"div",3),a.ɵɵelementStart(20,"div",4),a.ɵɵelementStart(21,"label"),a.ɵɵelement(22,"localize",46),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(23,"div",6),a.ɵɵelementStart(24,"input",47),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().metadata.lineage=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(25,"div",3),a.ɵɵelementStart(26,"div",4),a.ɵɵelementStart(27,"label"),a.ɵɵelement(28,"localize",48),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(29,"div",6),a.ɵɵelementStart(30,"input",49),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().metadata.languages=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(31,"div",3),a.ɵɵelementStart(32,"div",4),a.ɵɵelementStart(33,"label"),a.ɵɵelement(34,"localize",50),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(35,"div",6),a.ɵɵelementStart(36,"input",51),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().metadata.scaleResolution=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(37,"div",3),a.ɵɵelementStart(38,"div",4),a.ɵɵelementStart(39,"label"),a.ɵɵelement(40,"localize",52),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(41,"div",6),a.ɵɵelementStart(42,"select",53),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().metadata.spatialRepresentation=e})),a.ɵɵelementStart(43,"option",54),a.ɵɵelement(44,"localize",55),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(45,"div",3),a.ɵɵelementStart(46,"div",4),a.ɵɵelementStart(47,"label"),a.ɵɵelement(48,"localize",56),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(49,"div",6),a.ɵɵelementStart(50,"select",57),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().metadata.referenceSystem=e})),a.ɵɵelementStart(51,"option",58),a.ɵɵelement(52,"localize",59),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(53,"div",3),a.ɵɵelementStart(54,"div",4),a.ɵɵelementStart(55,"label"),a.ɵɵelement(56,"localize",60),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(57,"div",6),a.ɵɵelementStart(58,"input",61),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().metadata.reportSpecification=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(59,"div",3),a.ɵɵelementStart(60,"div",4),a.ɵɵelementStart(61,"label"),a.ɵɵelement(62,"localize",62),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(63,"div",6),a.ɵɵelementStart(64,"select",63),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().metadata.distributionFormat=e})),a.ɵɵelement(65,"option"),a.ɵɵelementStart(66,"option",64),a.ɵɵelement(67,"localize",65),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementContainerEnd()}if(2&e){var i=a.ɵɵnextContext().metadata,r=a.ɵɵnextContext();a.ɵɵadvance(6),a.ɵɵproperty("ngModel",i.topicCategories)("disabled",r.readonly),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",i.placeKeywords)("disabled",r.readonly),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",i.updateFrequency)("disabled",r.readonly),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",i.lineage)("disabled",r.readonly),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",i.languages)("disabled",r.readonly),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",i.scaleResolution)("disabled",r.readonly),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",i.spatialRepresentation)("disabled",!0),a.ɵɵadvance(8),a.ɵɵproperty("ngModel",i.referenceSystem)("disabled",!0),a.ɵɵadvance(8),a.ɵɵproperty("ngModel",i.reportSpecification)("disabled",r.readonly),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",i.distributionFormat)("disabled",!0)}}function O(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",4),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",5),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(4,"div",6),a.ɵɵelementStart(5,"boolean-field",7),a.ɵɵlistener("valueChange",(function(e){return t.metadata.master=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(6,"div",3),a.ɵɵelementStart(7,"div",4),a.ɵɵelementStart(8,"label"),a.ɵɵelement(9,"localize",8),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"div",6),a.ɵɵelementStart(11,"select",9),a.ɵɵlistener("ngModelChange",(function(e){return t.metadata.visibility=e})),a.ɵɵelementStart(12,"option",10),a.ɵɵelement(13,"localize",11),a.ɵɵelementEnd(),a.ɵɵtemplate(14,g,2,0,"option",12),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(15,h,10,5,"div",13),a.ɵɵelementStart(16,"div",3),a.ɵɵelementStart(17,"div",4),a.ɵɵelementStart(18,"label"),a.ɵɵelement(19,"localize",14),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(20,"div",6),a.ɵɵelementStart(21,"input",15),a.ɵɵlistener("ngModelChange",(function(e){return t.metadata.originator=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(22,f,10,4,"div",13),a.ɵɵtemplate(23,y,10,4,"div",13),a.ɵɵtemplate(24,v,10,5,"div",13),a.ɵɵtemplate(25,b,10,5,"div",13),a.ɵɵtemplate(26,S,10,5,"div",13),a.ɵɵtemplate(27,C,10,4,"div",13),a.ɵɵtemplate(28,E,10,4,"div",13),a.ɵɵtemplate(29,x,68,20,"ng-container",2),a.ɵɵelementStart(30,"div",3),a.ɵɵelement(31,"div",4),a.ɵɵelementStart(32,"div",6),a.ɵɵelement(33,"localize",16),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(34,"div",3),a.ɵɵelementStart(35,"div",4),a.ɵɵelementStart(36,"label"),a.ɵɵelement(37,"localize",17),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(38,"div",6),a.ɵɵelementStart(39,"input",18),a.ɵɵlistener("ngModelChange",(function(e){return t.metadata.contactName=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(40,"div",3),a.ɵɵelementStart(41,"div",4),a.ɵɵelementStart(42,"label"),a.ɵɵelement(43,"localize",19),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(44,"div",6),a.ɵɵelementStart(45,"input",20),a.ɵɵlistener("ngModelChange",(function(e){return t.metadata.telephoneNumber=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(46,"div",3),a.ɵɵelementStart(47,"div",4),a.ɵɵelementStart(48,"label"),a.ɵɵelement(49,"localize",21),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(50,"div",6),a.ɵɵelementStart(51,"input",22),a.ɵɵlistener("ngModelChange",(function(e){return t.metadata.email=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.metadata,i=t.list,r=t.type,o=a.ɵɵnextContext();a.ɵɵadvance(5),a.ɵɵproperty("disable",o.readonly)("value",n.master),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",n.visibility)("disabled",o.readonly),a.ɵɵadvance(3),a.ɵɵproperty("ngIf",!i.typePrivate),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",n.label.localeValues),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",n.originator)("disabled",o.readonly),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",n.description.localeValues),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",n.process.localeValues),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",n.progress.localeValues),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",n.accessConstraints.localeValues),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",n.useConstraints.localeValues),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",n.acknowledgements.localeValues),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",n.disclaimer.localeValues),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","geospatial"===r),a.ɵɵadvance(10),a.ɵɵproperty("ngModel",n.contactName)("disabled",o.readonly),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",n.telephoneNumber)("disabled",o.readonly),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",n.email)("disabled",o.readonly)}}function I(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",85),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}var M=function(e,t){return{metadata:e,list:t,type:"list"}};function w(e,t){if(1&e&&a.ɵɵelementContainer(0,86),2&e){var n=a.ɵɵnextContext(2),i=a.ɵɵreference(1);a.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",a.ɵɵpureFunction2(2,M,n.metadata.listMetadata,n.list))}}var T=function(e,t){return{metadata:e,list:t,type:"geospatial"}};function k(e,t){if(1&e&&a.ɵɵelementContainer(0,86),2&e){var n=a.ɵɵnextContext(2),i=a.ɵɵreference(1);a.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",a.ɵɵpureFunction2(2,T,n.metadata.geospatialMetadata,n.list))}}function P(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"button",87),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).onSubmit()})),a.ɵɵelement(1,"localize",88),a.ɵɵelementEnd()}if(2&e){a.ɵɵnextContext();var i=a.ɵɵreference(7);a.ɵɵproperty("disabled",!i.valid)}}function j(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementContainerStart(0),a.ɵɵtemplate(1,I,2,1,"div",66),a.ɵɵelementStart(2,"div",67),a.ɵɵelementStart(3,"h2"),a.ɵɵelement(4,"localize",68),a.ɵɵelementEnd(),a.ɵɵelement(5,"hr"),a.ɵɵelementEnd(),a.ɵɵelementStart(6,"form",69,70),a.ɵɵelementStart(8,"fieldset"),a.ɵɵelementStart(9,"div",71),a.ɵɵelementStart(10,"div",72),a.ɵɵelementStart(11,"div",73),a.ɵɵelement(12,"div",4),a.ɵɵelementStart(13,"div",6),a.ɵɵelementStart(14,"div",74),a.ɵɵelementStart(15,"div",75),a.ɵɵelementStart(16,"label",76),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().handleTab("LIST")})),a.ɵɵelementStart(17,"span",77),a.ɵɵelement(18,"localize",78),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(19,"label",76),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().handleTab("GEOSPATIAL")})),a.ɵɵelementStart(20,"span",77),a.ɵɵelement(21,"localize",79),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(22,"hr",80),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(23,"div",72),a.ɵɵelementStart(24,"div",73),a.ɵɵtemplate(25,w,1,5,"ng-container",81),a.ɵɵtemplate(26,k,1,5,"ng-container",81),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(27,"div",3),a.ɵɵelement(28,"div",4),a.ɵɵelementStart(29,"div",82),a.ɵɵelementStart(30,"button",83),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onCancel()})),a.ɵɵelement(31,"localize",27),a.ɵɵelementEnd(),a.ɵɵtemplate(32,P,2,1,"button",84),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementContainerEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=i.message),a.ɵɵadvance(15),a.ɵɵproperty("ngClass","LIST"===i.tab?"active":""),a.ɵɵadvance(3),a.ɵɵproperty("ngClass","GEOSPATIAL"===i.tab?"active":""),a.ɵɵadvance(6),a.ɵɵproperty("ngIf","LIST"===i.tab),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","GEOSPATIAL"===i.tab),a.ɵɵadvance(5),a.ɵɵproperty("key",i.readonly?"io.back":"io.cancel"),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!i.readonly)}}var z=function(){function e(e,t){this.service=e,this.bsModalRef=t,this.message=null,this.list=null,this.entry=null,this.metadata=null,this.tab="LIST",this.readonly=!1}return e.prototype.ngOnInit=function(){},e.prototype.init=function(e,t,n){if(this.list=e,this.entry=t,this.readonly=!e.write,null==n){var r=t.versions[t.versions.length-1];this.metadata={listMetadata:i({visibility:"PRIVATE",master:!1},JSON.parse(JSON.stringify(r.listMetadata))),geospatialMetadata:i({visibility:"PRIVATE",master:!1},JSON.parse(JSON.stringify(r.geospatialMetadata)))}}else this.metadata=n},e.prototype.onSubmit=function(){var e=this;null!=this.metadata.oid?this.service.applyVersion(this.metadata).then((function(t){if(null!=e.entry.versions){var n=e.entry.versions.findIndex((function(e){return e.oid===t.oid}));t.collapsed=e.entry.versions[n].collapsed,e.entry.versions[n]=t}e.bsModalRef.hide()})).catch((function(t){e.error(t)})):this.service.createVersion(this.entry,this.metadata).then((function(t){e.entry.versions.unshift(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.handleTab=function(e){this.tab=e},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.ListTypeService),a.ɵɵdirectiveInject(s.BsModalRef))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["publish-version"]],decls:4,vars:1,consts:[["metadataDetail",""],[1,"modal-body"],[4,"ngIf"],[1,"row-holder"],[1,"label-holder"],["key","masterlist.ismaster"],[1,"holder"],["label","",3,"disable","value","valueChange"],["key","masterlist.visibility"],["name","visibility","required","",1,"select-area",3,"ngModel","disabled","ngModelChange"],["value","PRIVATE"],["key","masterlist.private"],["value","PUBLIC",4,"ngIf"],["class","row-holder",4,"ngFor","ngForOf"],["key","list.type.originator"],["name","originator","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.contact"],["key","masterlist.contactName"],["name","contactName","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.telephoneNumber"],["name","telephoneNumber","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.email"],["name","email","type","email",1,"form-control",3,"ngModel","disabled","ngModelChange"],["value","PUBLIC"],["key","masterlist.public"],["key","masterlist.label"],[2,"color","#BABABA"],[3,"key"],["type","text",1,"form-control",3,"ngModel","name","disabled","required","ngModelChange"],["key","masterlist.listAbstract"],["name","'description-' + localeValue.locale",1,"form-control",3,"ngModel","disabled","required","ngModelChange"],["key","masterlist.process"],["name","'process-' + localeValue.locale",1,"form-control",3,"ngModel","disabled","required","ngModelChange"],["key","masterlist.progress"],["key","masterlist.accessConstraints"],["key","masterlist.useConstraints"],["key","masterlist.acknowledgements"],["name","'acknowledgements-' + localeValue.locale",1,"form-control",3,"ngModel","disabled","required","ngModelChange"],["key","masterlist.disclaimer"],["name","'disclaimer-' + localeValue.locale",1,"form-control",3,"ngModel","disabled","required","ngModelChange"],["key","list.type.topicCategories"],["name","topicCategories",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.placeKeywords"],["name","placeKeywords",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.updateFrequency"],["name","updateFrequency",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.lineage"],["name","lineage",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.languages"],["name","languages",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.scaleResolution"],["name","scaleResolution",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.spatialRepresentation"],["name","spatialRepresentation",1,"select-area",3,"ngModel","disabled","ngModelChange"],["value","vector"],["key","list.type.vector"],["key","list.type.referenceSystem"],["name","referenceSystem",1,"select-area",3,"ngModel","disabled","ngModelChange"],["value","EPSG4326"],["key","list.type.epsg4326"],["key","list.type.reportSpecification"],["name","reportSpecification","type","reportSpecification",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","list.type.distributionFormat"],["name","distributionFormat",1,"select-area",3,"ngModel","disabled","ngModelChange"],["value","SHAPEFILE"],["key","io.shapefile"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"text-center"],["key","type.publish.metadata.header"],["autocomplete","off",1,"modal-form"],["form","ngForm"],[1,"inner-col-content-wrapper",2,"padding-top","30px","margin-top","10px"],[1,"row"],[1,"col-md-12"],[1,"form-group",2,"text-align","center"],[1,"btn-group","geobject-editor-tab-holder"],[1,"btn","full-width-radio-button",2,"width","50%",3,"ngClass","click"],[2,"display","inline-block","width","90%"],["key","list.type.list"],["key","list.type.geospatial"],[2,"border-top","solid 3px #6BA542"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[1,"button-holder"],["type","button","role","button",1,"btn","btn-default",3,"click"],["type","submit","class","btn btn-primary","role","button",3,"disabled","click",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.submit"]],template:function(e,t){1&e&&(a.ɵɵtemplate(0,O,52,22,"ng-template",null,0,a.ɵɵtemplateRefExtractor),a.ɵɵelementStart(2,"div",1),a.ɵɵtemplate(3,j,33,7,"ng-container",2),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(3),a.ɵɵproperty("ngIf",null!=t.metadata))},directives:[c.NgIf,d.LocalizeComponent,p.BooleanFieldComponent,u.SelectControlValueAccessor,u.RequiredValidator,u.NgControlStatus,u.NgModel,u.NgSelectOption,u.ɵangular_packages_forms_forms_z,c.NgForOf,u.DefaultValueAccessor,m.ConvertKeyLabel,u.ɵangular_packages_forms_forms_ba,u.NgControlStatusGroup,u.NgForm,c.NgClass,c.NgTemplateOutlet],styles:[".list-sidebar[_ngcontent-%COMP%] {\n    z-index: 999;\n    background: #f1f1f1;\n    transition: all 0.3s;\n    vertical-align: top;\n    height: calc(100vh - 50px);\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n.list-type-content[_ngcontent-%COMP%] {\n    overflow-y: auto;\n    height: calc(100vh - 50px);\n}\n\n.list-group-item[_ngcontent-%COMP%], li.list-group-item[_ngcontent-%COMP%] {\n    background-color: transparent;\n    padding: 3px 10px;\n}\n\n.got-group-child[_ngcontent-%COMP%] {\n    margin-left: 10px;\n}\n.got-group-child[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\n    padding-left: 5px;\n    border-left: 1px solid;\n}\n\n.cr-sort-arrow[_ngcontent-%COMP%] {\n\tfont-size: 14px;\n}\n\n.cr-filter-link-active[_ngcontent-%COMP%], .cr-filter-link-active[_ngcontent-%COMP%]:active {\n\t\n    border-radius: 10px;\n    background: #6BA542;\n    color: white;\n    font-weight: bold;\n    padding: 3px 15px 3px 15px;\n}\n.cr-filter-link-active[_ngcontent-%COMP%]:hover, .cr-filter-link-active[_ngcontent-%COMP%]:focus {\n\tcolor:white;\n}\n\n.panel-body[_ngcontent-%COMP%] {\n    color: #333;\n    background-color: #f5f5f5;\n    border-color: #ddd;\n}\n\n.unstyled-list[_ngcontent-%COMP%] {\n    list-style: none;\n    padding: 0;\n    color: #707070;\n}\n\n.fa[_ngcontent-%COMP%] {\n    top: 5px;\n}\n.fa-stack[_ngcontent-%COMP%] {\n    width: 1.5em;\n}\n.fa-stack[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    text-align: left;\n}\n.second-stacked-el[_ngcontent-%COMP%]:before {\n    background:#f5f5f5;\n}\n\n\n.full-width-radio-button[_ngcontent-%COMP%] {\n      position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%], .changeSpan[_ngcontent-%COMP%] {\n    position: absolute;\n}\n\nlabel.settings[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]    > i.fa.fa-cog[_ngcontent-%COMP%] {\n    font-size: 15px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%] {\n    display: inline-block;\n    position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .changeSpan[_ngcontent-%COMP%] {\n  right: 2.5px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasErrors[_ngcontent-%COMP%]:before {\n  content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: left;\n  color: red;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasChanges[_ngcontent-%COMP%]:after {\n    content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: right;\n  color: orange;\n}\n\n.warning-text[_ngcontent-%COMP%]{\n    color: orange;\n}"]}),e}();t.PublishVersionComponent=z,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(z,[{type:r.Component,args:[{selector:"publish-version",templateUrl:"./publish-version.component.html",styleUrls:["./list-type-manager.css"]}]}],(function(){return[{type:l.ListTypeService},{type:s.BsModalRef}]}),null)},1134:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,r++)i[r]=o[a];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.ListComponent=void 0;var o=n(0),a=(n(57),n(56),n(44)),l=n(861),s=n(1042),c=n(859),d=n(193),p=(n(25),n(1016),n(1135)),u=n(1036),m=n(857),g=n(1020),h=(n(1019),n(0)),f=n(57),y=n(56),v=n(1016),b=n(25),S=n(1019),C=n(221),E=n(139),x=n(1),O=n(295),I=n(88),M=n(379),w=n(546),T=n(224),k=n(548);function P(e,t){1&e&&h.ɵɵelement(0,"progress-bar")}function j(e,t){if(1&e&&(h.ɵɵelementStart(0,"div",18),h.ɵɵtext(1),h.ɵɵelementEnd()),2&e){var n=h.ɵɵnextContext(2);h.ɵɵadvance(1),h.ɵɵtextInterpolate(n.message)}}function z(e,t){if(1&e&&(h.ɵɵelementStart(0,"div",19),h.ɵɵelementStart(1,"h2"),h.ɵɵtext(2),h.ɵɵelementEnd(),h.ɵɵelementEnd()),2&e){var n=h.ɵɵnextContext(2);h.ɵɵadvance(2),h.ɵɵtextInterpolate1(" ",n.list.displayLabel," ")}}function D(e,t){1&e&&h.ɵɵelement(0,"localize",31)}function R(e,t){if(1&e&&(h.ɵɵelementStart(0,"span"),h.ɵɵtemplate(1,D,1,0,"localize",30),h.ɵɵtext(2),h.ɵɵelementEnd()),2&e){var n=h.ɵɵnextContext(3);h.ɵɵadvance(1),h.ɵɵproperty("ngIf",!n.list.working),h.ɵɵadvance(1),h.ɵɵtextInterpolate1(" ",n.list.versionNumber," ")}}function L(e,t){1&e&&(h.ɵɵelementStart(0,"span"),h.ɵɵelement(1,"localize",32),h.ɵɵelementEnd())}function _(e,t){1&e&&h.ɵɵelement(0,"localize",33)}function A(e,t){1&e&&h.ɵɵelement(0,"localize",34)}function N(e,t){1&e&&h.ɵɵelement(0,"localize",35)}function V(e,t){1&e&&h.ɵɵelement(0,"localize",36)}function F(e,t){if(1&e&&(h.ɵɵelementStart(0,"div",5),h.ɵɵelementStart(1,"div",9),h.ɵɵelementStart(2,"h4"),h.ɵɵtemplate(3,R,3,2,"span",1),h.ɵɵtemplate(4,L,2,0,"span",1),h.ɵɵelementEnd(),h.ɵɵelementStart(5,"h4"),h.ɵɵelement(6,"localize",20),h.ɵɵtext(7," : "),h.ɵɵelementStart(8,"span",21),h.ɵɵtemplate(9,_,1,0,"localize",22),h.ɵɵtemplate(10,A,1,0,"localize",23),h.ɵɵelementEnd(),h.ɵɵelementEnd(),h.ɵɵelementStart(11,"h4"),h.ɵɵelement(12,"localize",24),h.ɵɵtext(13," : "),h.ɵɵelementStart(14,"span",21),h.ɵɵtemplate(15,N,1,0,"localize",25),h.ɵɵtemplate(16,V,1,0,"localize",26),h.ɵɵelementEnd(),h.ɵɵelementEnd(),h.ɵɵelementEnd(),h.ɵɵelementStart(17,"div",11),h.ɵɵelementStart(18,"h4"),h.ɵɵelement(19,"localize",27),h.ɵɵtext(20," : "),h.ɵɵelementStart(21,"span",21),h.ɵɵelement(22,"date-text",28),h.ɵɵelementEnd(),h.ɵɵelementEnd(),h.ɵɵelementStart(23,"h4"),h.ɵɵelement(24,"localize",29),h.ɵɵtext(25," : "),h.ɵɵelementStart(26,"span",21),h.ɵɵelement(27,"date-text",28),h.ɵɵelementEnd(),h.ɵɵelementEnd(),h.ɵɵelementEnd(),h.ɵɵelementEnd()),2&e){var n=h.ɵɵnextContext(2);h.ɵɵadvance(3),h.ɵɵproperty("ngIf",!n.list.working),h.ɵɵadvance(1),h.ɵɵproperty("ngIf",n.list.working),h.ɵɵadvance(5),h.ɵɵproperty("ngIf","PUBLIC"===n.list.listMetadata.visibility),h.ɵɵadvance(1),h.ɵɵproperty("ngIf","PUBLIC"!==n.list.listMetadata.visibility),h.ɵɵadvance(5),h.ɵɵproperty("ngIf",n.list.listMetadata.master),h.ɵɵadvance(1),h.ɵɵproperty("ngIf",!n.list.listMetadata.master),h.ɵɵadvance(6),h.ɵɵproperty("date",n.list.publishDate),h.ɵɵadvance(5),h.ɵɵproperty("date",n.list.forDate)}}function H(e,t){1&e&&(h.ɵɵelementStart(0,"span",21),h.ɵɵelement(1,"localize",43),h.ɵɵelementEnd())}var G=function(e){return["/registry/curation-job",e]};function B(e,t){if(1&e&&(h.ɵɵelementStart(0,"a",44),h.ɵɵelement(1,"localize",45),h.ɵɵelement(2,"date-text",28),h.ɵɵelementEnd()),2&e){var n=h.ɵɵnextContext(3);h.ɵɵproperty("routerLink",h.ɵɵpureFunction1(2,G,n.list.oid)),h.ɵɵadvance(2),h.ɵɵproperty("date",n.list.curation.lastRun)}}function q(e,t){if(1&e){var n=h.ɵɵgetCurrentView();h.ɵɵelementStart(0,"div",37),h.ɵɵelementStart(1,"button",38),h.ɵɵlistener("click",(function(){return h.ɵɵrestoreView(n),h.ɵɵnextContext(2).onRunCuration()})),h.ɵɵelement(2,"localize",39),h.ɵɵelementEnd(),h.ɵɵelementStart(3,"span",40),h.ɵɵtemplate(4,H,2,0,"span",41),h.ɵɵtemplate(5,B,3,4,"a",42),h.ɵɵelementEnd(),h.ɵɵelementEnd()}if(2&e){var i=h.ɵɵnextContext(2);h.ɵɵadvance(4),h.ɵɵproperty("ngIf",null==i.list.curation.lastRun),h.ɵɵadvance(1),h.ɵɵproperty("ngIf",null!=i.list.curation.lastRun)}}function U(e,t){if(1&e){var n=h.ɵɵgetCurrentView();h.ɵɵelementStart(0,"span",46),h.ɵɵelementStart(1,"boolean-field",47),h.ɵɵlistener("valueChange",(function(e){return h.ɵɵrestoreView(n),h.ɵɵnextContext(2).showInvalid=e}))("change",(function(){return h.ɵɵrestoreView(n),h.ɵɵnextContext(2).handleShowInvalidChange()})),h.ɵɵelementEnd(),h.ɵɵelementEnd()}if(2&e){var i=h.ɵɵnextContext(2);h.ɵɵadvance(1),h.ɵɵproperty("value",i.showInvalid)("localizeLabelKey","masterlist.showInvalid")}}var $=function(){return{"fa fa-refresh clickable":!0}};function J(e,t){if(1&e){var n=h.ɵɵgetCurrentView();h.ɵɵelementStart(0,"span",48),h.ɵɵlistener("click",(function(){return h.ɵɵrestoreView(n),h.ɵɵnextContext(2).onPublish()})),h.ɵɵelement(1,"i",49),h.ɵɵelement(2,"localize",50),h.ɵɵelementEnd()}2&e&&(h.ɵɵadvance(1),h.ɵɵproperty("ngClass",h.ɵɵpureFunction0(1,$)))}function W(e,t){if(1&e){var n=h.ɵɵgetCurrentView();h.ɵɵelementStart(0,"button",51),h.ɵɵlistener("click",(function(){return h.ɵɵrestoreView(n),h.ɵɵnextContext(2).onGotoMap(null)})),h.ɵɵelement(1,"localize",52),h.ɵɵelementEnd()}}function Y(e,t){if(1&e){var n=h.ɵɵgetCurrentView();h.ɵɵelementStart(0,"button",51),h.ɵɵlistener("click",(function(){return h.ɵɵrestoreView(n),h.ɵɵnextContext(2).onNewGeoObject()})),h.ɵɵelement(1,"localize",53),h.ɵɵelementEnd()}}function K(e,t){if(1&e){var n=h.ɵɵgetCurrentView();h.ɵɵelementStart(0,"li"),h.ɵɵelementStart(1,"a",61),h.ɵɵlistener("click",(function(){h.ɵɵrestoreView(n);var e=t.$implicit;return h.ɵɵnextContext(4).onNewGeoObject(e.code)})),h.ɵɵtext(2),h.ɵɵelementEnd(),h.ɵɵelementEnd()}if(2&e){var i=t.$implicit;h.ɵɵadvance(2),h.ɵɵtextInterpolate(i.label)}}function Q(e,t){if(1&e&&(h.ɵɵelementStart(0,"ul",59),h.ɵɵtemplate(1,K,3,1,"li",60),h.ɵɵelementEnd()),2&e){var n=h.ɵɵnextContext(3);h.ɵɵadvance(1),h.ɵɵproperty("ngForOf",n.list.subtypes)}}function X(e,t){1&e&&(h.ɵɵelementStart(0,"span",54,55),h.ɵɵelementStart(2,"button",56),h.ɵɵelement(3,"localize",53),h.ɵɵelement(4,"span",57),h.ɵɵelementEnd(),h.ɵɵtemplate(5,Q,2,1,"ul",58),h.ɵɵelementEnd())}function Z(e,t){1&e&&h.ɵɵelement(0,"localize",64)}function ee(e,t){1&e&&h.ɵɵelement(0,"localize",65)}function te(e,t){if(1&e){var n=h.ɵɵgetCurrentView();h.ɵɵelementStart(0,"button",51),h.ɵɵlistener("click",(function(){return h.ɵɵrestoreView(n),h.ɵɵnextContext(2).onExport()})),h.ɵɵtemplate(1,Z,1,0,"localize",62),h.ɵɵtemplate(2,ee,1,0,"localize",63),h.ɵɵelementEnd()}if(2&e){var i=h.ɵɵnextContext(2);h.ɵɵadvance(1),h.ɵɵproperty("ngIf",null==i.filters),h.ɵɵadvance(1),h.ɵɵproperty("ngIf",null!=i.filters)}}var ne=function(e,t){return{oid:e,showInvalid:t}};function ie(e,t){if(1&e){var n=h.ɵɵgetCurrentView();h.ɵɵelementContainerStart(0),h.ɵɵelementStart(1,"generic-table",67),h.ɵɵlistener("click",(function(e){return h.ɵɵrestoreView(n),h.ɵɵnextContext(3).onClick(e)}))("onFilter",(function(e){return h.ɵɵrestoreView(n),h.ɵɵnextContext(3).onFilter(e)})),h.ɵɵelementEnd(),h.ɵɵelementContainerEnd()}if(2&e){var i=h.ɵɵnextContext(3);h.ɵɵadvance(1),h.ɵɵproperty("cols",i.cols)("config",i.config)("refresh",i.refresh)("pageConfig",h.ɵɵpureFunction2(4,ne,i.list.oid,i.showInvalid))}}function re(e,t){if(1&e&&(h.ɵɵelementStart(0,"div",66),h.ɵɵtemplate(1,ie,2,7,"ng-container",1),h.ɵɵelementEnd()),2&e){var n=h.ɵɵnextContext(2);h.ɵɵadvance(1),h.ɵɵproperty("ngIf",null!=n.cols&&null!=n.config)}}function oe(e,t){if(1&e&&(h.ɵɵelementStart(0,"div",3),h.ɵɵtemplate(1,j,2,1,"div",4),h.ɵɵelementStart(2,"div",5),h.ɵɵtemplate(3,z,3,1,"div",6),h.ɵɵelementEnd(),h.ɵɵtemplate(4,F,28,8,"div",7),h.ɵɵelementStart(5,"div",8),h.ɵɵelementStart(6,"div",9),h.ɵɵtemplate(7,q,6,2,"div",10),h.ɵɵelementEnd(),h.ɵɵelementStart(8,"div",11),h.ɵɵelementStart(9,"div",12),h.ɵɵtemplate(10,U,2,2,"span",13),h.ɵɵtemplate(11,J,3,2,"span",14),h.ɵɵtemplate(12,W,2,0,"button",15),h.ɵɵtemplate(13,Y,2,0,"button",15),h.ɵɵtemplate(14,X,6,0,"span",16),h.ɵɵtemplate(15,te,3,2,"button",15),h.ɵɵelementEnd(),h.ɵɵelementEnd(),h.ɵɵelementEnd(),h.ɵɵelementStart(16,"div",5),h.ɵɵtemplate(17,re,2,1,"div",17),h.ɵɵelementEnd(),h.ɵɵelementEnd()),2&e){var n=h.ɵɵnextContext();h.ɵɵadvance(1),h.ɵɵproperty("ngIf",null!=n.message),h.ɵɵadvance(2),h.ɵɵproperty("ngIf",n.list),h.ɵɵadvance(1),h.ɵɵproperty("ngIf",n.list),h.ɵɵadvance(3),h.ɵɵproperty("ngIf",n.list.working&&(n.isRM||n.isRA||n.isSRA)),h.ɵɵadvance(3),h.ɵɵproperty("ngIf",n.isWritable),h.ɵɵadvance(1),h.ɵɵproperty("ngIf",n.list.working),h.ɵɵadvance(1),h.ɵɵproperty("ngIf",n.list.isMember||"PUBLIC"===n.list.geospatialMetadata.visibility),h.ɵɵadvance(1),h.ɵɵproperty("ngIf",n.list.working&&n.isWritable&&!n.list.isAbstract),h.ɵɵadvance(1),h.ɵɵproperty("ngIf",n.list.working&&n.isWritable&&n.list.isAbstract),h.ɵɵadvance(1),h.ɵɵproperty("ngIf","PUBLIC"===n.list.listMetadata.visibility||"PUBLIC"===n.list.geospatialMetadata.visibility||n.isListInOrg()||n.isSRA),h.ɵɵadvance(2),h.ɵɵproperty("ngIf",n.list)}}var ae=function(){function e(e,t,n,i,r,o,a){this.router=e,this.route=t,this.modalService=n,this.service=i,this.pService=r,this.geomService=o,this.authService=a,this.message=null,this.list=null,this.current="",this.isRefreshing=!1,this.isWritable=!1,this.isRM=!1,this.isSRA=!1,this.config=null,this.cols=null,this.filters=null,this.showInvalid=!1,this.historyOid=null,this.progressSubscription=null,this.jobSubscription=null,this.userOrgCodes=this.authService.getMyOrganizations()}return e.prototype.ngOnInit=function(){var e=this,t=this.route.snapshot.paramMap.get("oid");this.service.getVersion(t).then((function(t){e.list=t,e.orgCode=e.list.orgCode;var n=null!=e.list.superTypeCode?e.list.superTypeCode:e.list.typeCode;e.isWritable=e.authService.isGeoObjectTypeRC(e.orgCode,n),e.isRM=e.authService.isGeoObjectTypeRM(e.orgCode,n),e.isSRA=e.authService.isSRA(),e.refreshColumns(),e.config={service:e.service,remove:!1,view:!0,create:!1,label:e.list.displayLabel,sort:{field:"code",order:1}},null!=t.refreshProgress&&e.handleProgressChange(t.refreshProgress)}));var n=u.WebSockets.buildBaseUrl();this.progressNotifier=l.webSocket(n+"/websocket/progress/"+t),this.progressSubscription=this.progressNotifier.subscribe((function(t){null!=t.content?e.handleProgressChange(t.content):e.handleProgressChange(t)})),this.jobNotifier=l.webSocket(n+"/websocket/notify"),this.jobSubscription=this.jobNotifier.subscribe((function(t){e.handleJobChange()})),this.refresh=new a.Subject},e.prototype.ngOnDestroy=function(){null!=this.refresh&&this.refresh.unsubscribe(),null!=this.progressSubscription&&this.progressSubscription.unsubscribe(),this.progressNotifier.complete(),null!=this.jobSubscription&&this.jobSubscription.unsubscribe(),this.jobNotifier.complete()},e.prototype.ngAfterViewInit=function(){},e.prototype.onClick=function(e){"view"===e.type&&this.onGotoMap(e.row)},e.prototype.refreshColumns=function(){var e=this;this.cols=[],(this.list.isMember||"PUBLIC"===this.list.geospatialMetadata.visibility)&&this.cols.push({header:"",type:"ACTIONS",sortable:!1});var t=[],n=this.list.attributes.filter((function(e){return"code"===e.name})),i=this.list.attributes.filter((function(e){return e.name.includes("displayLabel")}));t.push.apply(t,r([n[0]],i));var o=[],a=[];this.list.attributes.forEach((function(e){"input"===e.type&&"latitude"!==e.name&&"longitude"!==e.name?o.push(e):"code"===e.name||e.name.includes("displayLabel")||"latitude"===e.name||"longitude"===e.name||a.push(e)})),t.push.apply(t,r(o,a));var l=this.list.attributes.filter((function(e){return"latitude"===e.name||"longitude"===e.name}));2===l.length&&t.push.apply(t,l),t.forEach((function(t){if(e.showInvalid||"invalid"!==t.name){var n={header:t.label,field:t.name,type:"TEXT",sortable:!0,filter:!0};"date"===t.type?n.type="DATE":"invalid"===t.name||"boolean"===t.type?n.type="BOOLEAN":"number"===t.type?n.type="NUMBER":"list"===t.type&&(n.type="AUTOCOMPLETE",n.text="",n.onComplete=function(){e.service.values(e.list.oid,n.text,t.name,e.filters).then((function(e){n.results=e})).catch((function(t){e.error(t)}))}),e.cols.push(n)}}))},e.prototype.handleShowInvalidChange=function(){this.refreshColumns(),this.refresh.next()},e.prototype.handleProgressChange=function(e){this.isRefreshing=e.current<e.total,this.pService.progress(e),this.isRefreshing||null==this.refresh||this.refresh.next()},e.prototype.handleJobChange=function(){var e=this;null!=this.historyOid&&this.service.getJob(this.historyOid).then((function(t){null!=t&&("SUCCESS"!==t.status&&"FAILURE"!==t.status||(e.handleProgressChange({current:1,total:1}),e.historyOid=null),"FAILURE"===t.status&&null!=t.exception&&(e.message=t.exception.message))}))},e.prototype.onEdit=function(e){var t=this,n=this.modalService.show(s.GeoObjectEditorComponent,{backdrop:!0,ignoreBackdropClick:!0});n.content.configureAsExisting(e.code,this.list.typeCode,this.list.forDate,this.list.isGeometryEditable),n.content.setListId(this.list.oid),n.content.setOnSuccessCallback((function(){t.refresh.next()}))},e.prototype.onPublish=function(){var e=this;this.message=null,this.service.publishList(this.list.oid).toPromise().then((function(t){e.isRefreshing=!0,e.list.curation={},e.historyOid=t.jobOid})).catch((function(t){e.error(t)}))},e.prototype.onNewGeoObject=function(e){void 0===e&&(e=null),e||(e=this.list.typeCode);var t={layers:JSON.stringify(this.layerFromVersion(this.list)),type:e,code:"__NEW__"};this.router.navigate(["/registry/location-manager"],{queryParams:t})},e.prototype.onExport=function(){var e=this,t={filters:null!=this.filters?i({},this.filters):{}};this.showInvalid||(t.filters.invalid={value:!1,matchMode:"equals"}),this.bsModalRef=this.modalService.show(p.ExportFormatModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.onFormat.subscribe((function(n){"SHAPEFILE"===n?window.location.href=registry.contextPath+"/list-type/export-shapefile?oid="+e.list.oid+"&criteria="+encodeURIComponent(JSON.stringify(t)):"EXCEL"===n&&(window.location.href=registry.contextPath+"/list-type/export-spreadsheet?oid="+e.list.oid+"&criteria="+encodeURIComponent(JSON.stringify(t)))}))},e.prototype.onWheel=function(e){e.target.parentElement.closest("table").parentElement.scrollLeft+=e.deltaY,e.preventDefault()},e.prototype.layerFromVersion=function(e){var t=new g.ListVectorLayerDataSource(this.service,e.oid).createLayer(e.displayLabel,!0,c().hexString());return this.geomService.zoomOnReady(t.getId()),this.geomService.getDataSourceFactory().serializeLayers([t])},e.prototype.onGotoMap=function(e){var t=this,n={layers:JSON.stringify(this.layerFromVersion(this.list))};null!=e?(n.version=this.list.oid,n.uid=e.uid,n.pageContext="DATA",this.router.navigate(["/registry/location-manager"],{queryParams:n})):this.service.getBounds(this.list.oid).then((function(e){if(e&&Array.isArray(e)){var i=new m.LngLatBounds([e[0],e[1]],[e[2],e[3]]).toArray();n.bounds=JSON.stringify(i)}t.router.navigate(["/registry/location-manager"],{queryParams:n})})).catch((function(e){t.error(e)}))},e.prototype.onRunCuration=function(){var e=this;this.service.createCurationJob(this.list).then((function(t){e.router.navigate(["/registry/curation-job",e.list.oid])})).catch((function(t){e.error(t)}))},e.prototype.onFilter=function(e){this.filters=null,null!=e.filters&&(this.filters=e.filters)},e.prototype.isListInOrg=function(){return!!(this.userOrgCodes&&this.userOrgCodes.length>0&&-1!==this.userOrgCodes.indexOf(this.orgCode))},e.prototype.error=function(e){this.message=d.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(h.ɵɵdirectiveInject(f.Router),h.ɵɵdirectiveInject(f.ActivatedRoute),h.ɵɵdirectiveInject(y.BsModalService),h.ɵɵdirectiveInject(v.ListTypeService),h.ɵɵdirectiveInject(b.ProgressService),h.ɵɵdirectiveInject(S.GeometryService),h.ɵɵdirectiveInject(b.AuthService))},e.ɵcmp=h.ɵɵdefineComponent({type:e,selectors:[["list"]],decls:5,vars:2,consts:[[1,"new-admin-design-main"],[4,"ngIf"],["id","app-container","class","container-fluid",4,"ngIf"],["id","app-container",1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"row"],["class","col-md-12",4,"ngIf"],["class","row",4,"ngIf"],[1,"row",2,"margin-bottom","10px"],[1,"col-md-4"],["class","button-holder pull-left",4,"ngIf"],[1,"col-md-8"],[1,"button-holder","pull-right"],["class","clickable","style","vertical-align:middle;display:inline-block;line-height:0;",4,"ngIf"],["class","clickable","style","padding: 10px;",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary","role","button",3,"click",4,"ngIf"],["dropdown","","class","dropdown",4,"ngIf"],["class","col-md-12","style","max-height:calc(100vh - 460px); min-height:calc(100vh - 460px);",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"col-md-12"],["key","masterlist.list.visibility"],[1,"date-string-display"],["key","masterlist.public",4,"ngIf"],["key","masterlist.private",4,"ngIf"],["key","masterlists.list.authoritativeness"],["key","list.type.master",4,"ngIf"],["key","list.type.non.master",4,"ngIf"],["key","masterlist.generatedDate"],[3,"date"],["key","masterlist.forDate"],["key","list.type.version",4,"ngIf"],["key","list.type.version"],["key","list.type.working.version"],["key","masterlist.public"],["key","masterlist.private"],["key","list.type.master"],["key","list.type.non.master"],[1,"button-holder","pull-left"],["type","submit","role","button",1,"btn","btn-primary",2,"margin-left","0",3,"click"],["key","list.type.run.curation"],[2,"vertical-align","middle","display","inline-block","font-style","italic","margin-left","5px","color","grey"],["class","date-string-display",4,"ngIf"],["routerLinkActive","active",3,"routerLink",4,"ngIf"],["key","list.type.run.na"],["routerLinkActive","active",3,"routerLink"],["key","list.type.last.validation.date"],[1,"clickable",2,"vertical-align","middle","display","inline-block","line-height","0"],[3,"value","localizeLabelKey","valueChange","change"],[1,"clickable",2,"padding","10px",3,"click"],["aria-hidden","true",2,"font-size","24px","vertical-align","middle","padding-right","5px",3,"ngClass"],["key","masterlist.publish"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","masterlist.viewOnMap"],["key","masterlist.newGeoObject"],["dropdown","",1,"dropdown"],["dropdown","bs-dropdown"],["dropdownToggle","","type","button","id","dropdownMenu1","data-toggle","dropdown","aria-haspopup","true","aria-expanded","true",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],["class","dropdown-menu","aria-labelledby","dropdownMenu1",4,"dropdownMenu"],["aria-labelledby","dropdownMenu1",1,"dropdown-menu"],[4,"ngFor","ngForOf"],[3,"click"],["key","io.export.allrows",4,"ngIf"],["key","io.export.filteredrows",4,"ngIf"],["key","io.export.allrows"],["key","io.export.filteredrows"],[1,"col-md-12",2,"max-height","calc(100vh - 460px)","min-height","calc(100vh - 460px)"],[3,"cols","config","refresh","pageConfig","click","onFilter"]],template:function(e,t){1&e&&(h.ɵɵelementStart(0,"div",0),h.ɵɵelement(1,"cgr-header"),h.ɵɵelement(2,"loading-bar"),h.ɵɵtemplate(3,P,1,0,"progress-bar",1),h.ɵɵtemplate(4,oe,18,11,"div",2),h.ɵɵelementEnd()),2&e&&(h.ɵɵadvance(3),h.ɵɵproperty("ngIf",t.isRefreshing),h.ɵɵadvance(1),h.ɵɵproperty("ngIf",null!=t.list))},directives:[C.CgrHeaderComponent,E.LoadingBarComponent,x.NgIf,O.ProgressBarComponent,I.LocalizeComponent,M.DateTextComponent,f.RouterLinkWithHref,f.RouterLinkActive,w.BooleanFieldComponent,x.NgClass,T.BsDropdownDirective,T.BsDropdownToggleDirective,T.BsDropdownMenuDirective,x.NgForOf,k.GenericTableComponent],styles:[".version-busy-overlay[_ngcontent-%COMP%]\n{\n\theight:100%;\n\twidth:100%;\n\tbackground-color: #CCCCCC;\n  position: absolute;\n  display: block;\n  opacity: 0.8;\n  z-index: 99999 !important;\n}\n\n[_nghost-%COMP%]  input {\n    width: 100%;\n}\n\n[_nghost-%COMP%]  .ui-corner-all {\n    border-radius: 5px;\n    border: 1px solid;\n    border-color: #767676;\n    border-color: var(--theme-input-text-border);\n}\n\n[_nghost-%COMP%]  .ui-inputtext:enabled:focus:not(.ui-state-error) {\n    border-color: #6BA542;\n    border-color: var(--theme-input-text-border-active);\n    outline: 0;\n    -webkit-box-shadow: inset 0 1px 1px rgb(0 0 0 / 8%), 0 0 8px rgb(107 165 66 / 60%);\n    box-shadow: inset 0 1px 1px rgb(0 0 0 / 8%), 0 0 8px rgb(107 165 66 / 60%);\n}\n\n[_nghost-%COMP%]  .ui-table .ui-sortable-column.ui-state-highlight {\n    background: #6BA542;\n}\n\n[_nghost-%COMP%]  .ui-table .ui-sortable-column:focus {\n    -webkit-box-shadow: inset 0 0 0 0.2em #6BA542;\n    -moz-box-shadow: inset 0 0 0 0.2em #6BA542;\n    box-shadow: inset 0 0 0 0.2em #6BA542;\n}\n\n[_nghost-%COMP%]  .ui-table {\n    height: calc(100vh - 295px);\n}\n\n[_nghost-%COMP%]  .ui-table .ui-table-wrapper {\n\theight: 100%;\n}\n\n[_nghost-%COMP%]  .ui-table .ui-table-scrollable-wrapper {\n\theight: 100%;\n}"]}),e}();t.ListComponent=ae,("undefined"==typeof ngDevMode||ngDevMode)&&h.ɵsetClassMetadata(ae,[{type:o.Component,args:[{selector:"list",templateUrl:"./list.component.html",styleUrls:["./list.component.css"]}]}],(function(){return[{type:f.Router},{type:f.ActivatedRoute},{type:y.BsModalService},{type:v.ListTypeService},{type:b.ProgressService},{type:S.GeometryService},{type:b.AuthService}]}),null)},1135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExportFormatModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(0),a=n(56),l=n(18),s=n(88),c=function(){function e(e){this.bsModalRef=e}return e.prototype.ngOnInit=function(){this.onFormat=new r.Subject},e.prototype.confirm=function(){this.bsModalRef.hide(),this.onFormat.next(this.format)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.BsModalRef))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["export-format-modal"]],decls:25,vars:2,consts:[["tabindex","-1","role","dialog",1,"modal-body"],[1,"heading","text-center"],["name","export-form",1,"modal-form"],[1,"row"],[1,"col-md-12"],["key","export-modal.message"],["id","format","name","format","required","",1,"select-area",3,"ngModel","ngModelChange"],["value","EXCEL"],["key","export.option.spreadsheet"],["value","SHAPEFILE"],["key","export.option.shapefile"],[1,"button-holder"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","button","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","modal.button.submit"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelementStart(1,"div",1),o.ɵɵelementStart(2,"h1"),o.ɵɵtext(3," Export "),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"form",2),o.ɵɵelementStart(5,"fieldset"),o.ɵɵelementStart(6,"div",3),o.ɵɵelementStart(7,"div",4),o.ɵɵelementStart(8,"label"),o.ɵɵelement(9,"localize",5),o.ɵɵelementEnd(),o.ɵɵelementStart(10,"select",6),o.ɵɵlistener("ngModelChange",(function(e){return t.format=e})),o.ɵɵelement(11,"option"),o.ɵɵelementStart(12,"option",7),o.ɵɵelement(13,"localize",8),o.ɵɵelementEnd(),o.ɵɵelementStart(14,"option",9),o.ɵɵelement(15,"localize",10),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(16,"div",3),o.ɵɵelementStart(17,"div",4),o.ɵɵelementStart(18,"div",11),o.ɵɵelementStart(19,"button",12),o.ɵɵlistener("click",(function(){return t.bsModalRef.hide()})),o.ɵɵelementStart(20,"span"),o.ɵɵelement(21,"localize",13),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(22,"button",14),o.ɵɵlistener("click",(function(){return t.confirm()})),o.ɵɵelementStart(23,"span"),o.ɵɵelement(24,"localize",15),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(10),o.ɵɵproperty("ngModel",t.format),o.ɵɵadvance(12),o.ɵɵproperty("disabled",null==t.format||""==t.format))},directives:[l.ɵangular_packages_forms_forms_ba,l.NgControlStatusGroup,l.NgForm,s.LocalizeComponent,l.SelectControlValueAccessor,l.RequiredValidator,l.NgControlStatus,l.NgModel,l.NgSelectOption,l.ɵangular_packages_forms_forms_z],encapsulation:2}),e}();t.ExportFormatModalComponent=c,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(c,[{type:i.Component,args:[{selector:"export-format-modal",templateUrl:"./export-format-modal.component.html",styleUrls:[]}]}],(function(){return[{type:a.BsModalRef}]}),null)},1136:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CurationJobComponent=void 0;var i=n(0),r=(n(57),n(56),n(861)),o=(n(194),n(193)),a=(n(25),n(1016),n(1036)),l=n(0),s=n(57),c=n(1016),d=n(56),p=n(194),u=n(25),m=n(221),g=n(139),h=n(1),f=n(88),y=n(379),v=n(546),b=n(381),S=n(162);function C(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",7),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.message)}}function E(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",8),l.ɵɵelementStart(1,"div",9),l.ɵɵelementStart(2,"div",10),l.ɵɵelement(3,"i",11),l.ɵɵelementStart(4,"p",12),l.ɵɵelementStart(5,"span",13),l.ɵɵelementStart(6,"strong"),l.ɵɵtext(7),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(8,"span",13),l.ɵɵelement(9,"localize",14),l.ɵɵtext(10),l.ɵɵelementEnd(),l.ɵɵelementStart(11,"span",13),l.ɵɵelement(12,"localize",15),l.ɵɵelementStart(13,"span",16),l.ɵɵelement(14,"date-text",17),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(15,"div",18),l.ɵɵelementStart(16,"div"),l.ɵɵelementStart(17,"h5"),l.ɵɵelementStart(18,"b"),l.ɵɵtext(19),l.ɵɵelement(20,"localize",19),l.ɵɵtext(21),l.ɵɵelement(22,"localize",20),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(23,"h5"),l.ɵɵtext(24),l.ɵɵelement(25,"localize",21),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelement(26,"div",22),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(7),l.ɵɵtextInterpolate(n.version.label),l.ɵɵadvance(3),l.ɵɵtextInterpolate1(" ",n.job.lastRunBy," "),l.ɵɵadvance(4),l.ɵɵproperty("date",n.job.lastRun),l.ɵɵadvance(5),l.ɵɵtextInterpolate1("",n.job.workProgress," "),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",n.job.workTotal," "),l.ɵɵadvance(3),l.ɵɵtextInterpolate1("",n.job.workTotal-n.job.workProgress," ")}}function x(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"button",39),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=l.ɵɵnextContext(2).$implicit;return l.ɵɵnextContext(3).onEdit(e)})),l.ɵɵelement(1,"localize",40),l.ɵɵelementEnd()}}function O(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"td",36),l.ɵɵtemplate(1,x,2,0,"button",37),l.ɵɵelementStart(2,"boolean-field",38),l.ɵɵlistener("change",(function(){l.ɵɵrestoreView(n);var e=l.ɵɵnextContext().$implicit;return l.ɵɵnextContext(3).toggleResolution(e)})),l.ɵɵpipe(3,"localize"),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var i=l.ɵɵnextContext().$implicit;l.ɵɵadvance(1),l.ɵɵproperty("ngIf","APPLY_GEO_OBJECT"!==i.resolution),l.ɵɵadvance(1),l.ɵɵproperty("value","APPLY_GEO_OBJECT"===i.resolution)("label",l.ɵɵpipeBind1(3,3,"list.type.problem.resolved"))}}function I(e,t){if(1&e&&(l.ɵɵelementStart(0,"tr"),l.ɵɵelementStart(1,"td",34),l.ɵɵelementStart(2,"p"),l.ɵɵtext(3),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(4,"td",34),l.ɵɵelementStart(5,"p"),l.ɵɵtext(6),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(7,O,4,5,"td",35),l.ɵɵelementEnd()),2&e){var n=t.$implicit,i=l.ɵɵnextContext(3);l.ɵɵadvance(3),l.ɵɵtextInterpolate(i.getFriendlyProblemType(n.type)),l.ɵɵadvance(3),l.ɵɵtextInterpolate(n.goCode),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",i.isAdmin||i.isMaintainer)}}function M(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",32),l.ɵɵelementStart(1,"pagination-controls",41),l.ɵɵlistener("pageChange",(function(e){return l.ɵɵrestoreView(n),l.ɵɵnextContext(3).onPageChange(e)})),l.ɵɵelementEnd(),l.ɵɵelementEnd()}}var w=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}};function T(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",25),l.ɵɵelementStart(1,"ul",26),l.ɵɵelementStart(2,"table",27),l.ɵɵelementStart(3,"thead"),l.ɵɵelementStart(4,"tr"),l.ɵɵelementStart(5,"th",28),l.ɵɵelement(6,"localize",29),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"th",28),l.ɵɵelement(8,"localize",30),l.ɵɵelementEnd(),l.ɵɵelement(9,"th",28),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(10,"tbody"),l.ɵɵtemplate(11,I,8,3,"tr",31),l.ɵɵpipe(12,"paginate"),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(13,"div",32),l.ɵɵtemplate(14,M,2,0,"div",33),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext(2);l.ɵɵadvance(11),l.ɵɵproperty("ngForOf",l.ɵɵpipeBind2(12,2,n.page.resultSet,l.ɵɵpureFunction3(5,w,n.page.pageSize,n.page.pageNumber,n.page.count))),l.ɵɵadvance(3),l.ɵɵproperty("ngIf",n.page.resultSet.length>0)}}function k(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",23),l.ɵɵtemplate(1,T,15,9,"div",24),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵproperty("ngIf",n.job)}}function P(e,t){1&e&&(l.ɵɵelementStart(0,"div",23),l.ɵɵelementStart(1,"div",25),l.ɵɵelement(2,"localize",42),l.ɵɵelementEnd(),l.ɵɵelementEnd())}var j=function(){function e(e,t,n,i,r,o,a){this.router=e,this.service=t,this.modalService=n,this.route=i,this.dateService=r,this.localizeService=o,this.message=null,this.page={count:0,pageNumber:1,pageSize:10,resultSet:[]},this.timeCounter=0,this.isPolling=!1,this.hasRowValidationProblem=!1,this.subscription=null,this.isAdmin=a.isAdmin(),this.isMaintainer=this.isAdmin||a.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||a.isContributer()}return e.prototype.ngOnInit=function(){var e=this,t=this.route.snapshot.params.oid;this.service.getVersion(t).then((function(t){e.version=t,e.onPageChange(1)}));var n=a.WebSockets.buildBaseUrl();this.notifier=r.webSocket(n+"/websocket/notify"),this.subscription=this.notifier.subscribe((function(t){"CURATION_JOB_CHANGE"===t.type&&e.onPageChange(e.page.pageNumber)}))},e.prototype.ngOnDestroy=function(){null!=this.subscription&&this.subscription.unsubscribe(),this.notifier.complete()},e.prototype.formatAffectedRows=function(e){return e.replace(/,/g,", ")},e.prototype.formatValidationResolve=function(e){return JSON.stringify(e)},e.prototype.onProblemResolved=function(e){var t=this.page.resultSet.findIndex((function(t){return t.id===e.id}));-1!==t&&this.page.resultSet.splice(t,1)},e.prototype.getFriendlyProblemType=function(e){return"NO_GEOMETRY"===e?this.localizeService.decode("list.type.no.geometry"):"INVALID_GEOMETRY"===e?this.localizeService.decode("list.type.invalid.geometry"):e},e.prototype.onEdit=function(e){var t={layers:JSON.stringify([this.version.oid]),version:this.version.oid,uid:e.goUid,pageContext:"DATA"};this.router.navigate(["/registry/location-manager"],{queryParams:t})},e.prototype.toggleResolution=function(e){var t=this,n=null==e.resolution||0===e.resolution.length||"UNRESOLVED"===e.resolution?"APPLY_GEO_OBJECT":"UNRESOLVED";this.service.setResolution(e,n).then((function(){e.resolution=n})).catch((function(e){t.error(e)}))},e.prototype.onPageChange=function(e){var t=this;null!=this.version&&(this.message=null,this.service.getCurationInfo(this.version,!1,e,this.page.pageSize).then((function(e){t.job=e,"SUCCESS"===t.job.status&&(t.page=t.job.page)})).catch((function(e){t.error(e)})))},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.Router),l.ɵɵdirectiveInject(c.ListTypeService),l.ɵɵdirectiveInject(d.BsModalService),l.ɵɵdirectiveInject(s.ActivatedRoute),l.ɵɵdirectiveInject(p.DateService),l.ɵɵdirectiveInject(u.LocalizationService),l.ɵɵdirectiveInject(u.AuthService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["curation-job"]],decls:11,vars:4,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"py-5"],["key","curation.job.title"],["class","row","style","background: #F4F4F4;\n                                border-radius: 15px;\n                                margin-bottom: 20px;\n                                margin-top: 20px;\n                                padding: 10px;",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"row",2,"background","#F4F4F4","border-radius","15px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-4","order-md-1"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"],["key","list.type.job.started.by"],["key","scheduledjobs.job.started.label"],[1,"date-string-display"],[3,"date"],[1,"col-md-3","order-md-1"],["key","list.type.validated.out.of"],["key","scheduledjobs.job.imported.total.label"],["key","scheduledjobs.job.remaining.label"],[1,"col-md-5","order-md-1"],[1,"row"],["class","col-md-12 order-md-1",4,"ngIf"],[1,"col-md-12","order-md-1"],[1,"list-group"],[1,"list-table","table","table-bordered","table-striped"],[1,"label-column"],["key","scheduledjobs.import.table.problem.type.header"],["key","data.property.label.code"],[4,"ngFor","ngForOf"],[1,"solid-table-footer"],["class","solid-table-footer",4,"ngIf"],[1,"label-column",2,"vertical-align","middle"],["class","label-column","style","text-align: right;",4,"ngIf"],[1,"label-column",2,"text-align","right"],["type","submit","class","btn btn-link","role","button",3,"click",4,"ngIf"],[2,"vertical-align","middle","line-height","0",3,"value","label","change"],["type","submit","role","button",1,"btn","btn-link",3,"click"],["key","scheduledjobs.fix.problem.button"],[3,"pageChange"],["key","list.type.validation.empty"]],template:function(e,t){1&e&&(l.ɵɵelementStart(0,"div",0),l.ɵɵelement(1,"cgr-header"),l.ɵɵelement(2,"loading-bar"),l.ɵɵelementStart(3,"div",1),l.ɵɵtemplate(4,C,2,1,"div",2),l.ɵɵelementStart(5,"div",3),l.ɵɵelementStart(6,"h2"),l.ɵɵelement(7,"localize",4),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(8,E,27,6,"div",5),l.ɵɵtemplate(9,k,2,1,"div",6),l.ɵɵtemplate(10,P,3,0,"div",6),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e&&(l.ɵɵadvance(4),l.ɵɵproperty("ngIf",null!=t.message),l.ɵɵadvance(4),l.ɵɵproperty("ngIf",t.job),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.page&&t.page.resultSet.length>0),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.job&&"SUCCESS"===t.job.status&&t.page&&0===t.page.resultSet.length))},directives:[m.CgrHeaderComponent,g.LoadingBarComponent,h.NgIf,f.LocalizeComponent,y.DateTextComponent,h.NgForOf,v.BooleanFieldComponent,b.PaginationControlsComponent],pipes:[b.PaginatePipe,S.LocalizePipe],encapsulation:2}),e}();t.CurationJobComponent=j,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(j,[{type:i.Component,args:[{selector:"curation-job",templateUrl:"./curation-job.component.html",styleUrls:[]}]}],(function(){return[{type:s.Router},{type:c.ListTypeService},{type:d.BsModalService},{type:s.ActivatedRoute},{type:p.DateService},{type:u.LocalizationService},{type:u.AuthService}]}),null)},1137:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClassificationTypeManagerComponent=void 0;var i=n(0),r=n(193),o=(n(1027),n(56),n(25),n(1138)),a=(n(57),n(0)),l=n(57),s=n(1027),c=n(25),d=n(56),p=n(221),u=n(139),m=n(1),g=n(88),h=n(1139),f=n(162);function y(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",15),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}var v=function(e){return{typeCode:e}};function b(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"li",16),a.ɵɵelementStart(1,"a",17),a.ɵɵtext(2),a.ɵɵelementEnd(),a.ɵɵelementStart(3,"span",18),a.ɵɵelementStart(4,"a",19),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=t.$implicit;return a.ɵɵnextContext().onEdit(e)})),a.ɵɵpipe(5,"localize"),a.ɵɵelementEnd(),a.ɵɵelementStart(6,"a",20),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=t.$implicit;return a.ɵɵnextContext().onDelete(e)})),a.ɵɵpipe(7,"localize"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=t.$implicit;a.ɵɵproperty("id",i.code),a.ɵɵadvance(1),a.ɵɵproperty("routerLink","/registry/classification-type")("queryParams",a.ɵɵpureFunction1(10,v,i.code)),a.ɵɵadvance(1),a.ɵɵtextInterpolate1(" ",i.displayLabel.localizedValue," "),a.ɵɵadvance(2),a.ɵɵproperty("title",a.ɵɵpipeBind1(5,6,"modal.button.edit")),a.ɵɵadvance(2),a.ɵɵproperty("title",a.ɵɵpipeBind1(7,8,"button.delete.helptext"))}}function S(e,t){if(1&e&&a.ɵɵelement(0,"classification-type",21),2&e){var n=a.ɵɵnextContext();a.ɵɵproperty("classificationType",n.classificationType)}}var C=function(){function e(e,t,n,i,r){this.route=e,this.router=t,this.service=n,this.lService=i,this.modalService=r,this.message=null,this.page={count:0,pageNumber:1,pageSize:10,resultSet:[]},this.querySubscription=null,this.subscription=null,this.classificationType=null}return e.prototype.ngOnInit=function(){var e=this;this.querySubscription=this.route.queryParams.subscribe((function(t){var n=t.typeCode;null!=n&&n.length>0?null!=e.classificationType&&e.classificationType.code===n||(e.classificationType=null,e.service.get(n).then((function(t){e.classificationType=t})).catch((function(t){e.error(t)}))):e.classificationType=null})),this.refresh()},e.prototype.ngOnDestroy=function(){null!=this.querySubscription&&this.querySubscription.unsubscribe(),this.querySubscription=null,null!=this.subscription&&this.subscription.unsubscribe(),this.subscription=null},e.prototype.onCreate=function(){var e=this;null!=this.subscription&&this.subscription.unsubscribe(),this.bsModalRef=this.modalService.show(o.ClassificationTypePublishModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.subscription=this.bsModalRef.content.init((function(){return e.refresh()}))},e.prototype.onEdit=function(e){var t=this;null!=this.subscription&&this.subscription.unsubscribe(),this.bsModalRef=this.modalService.show(o.ClassificationTypePublishModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.subscription=this.bsModalRef.content.init((function(){return t.refresh()}),e)},e.prototype.onDelete=function(e){var t=this;this.bsModalRef=this.modalService.show(r.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.lService.decode("confirm.modal.verify.delete")+" ["+e.displayLabel.localizedValue+"]",this.bsModalRef.content.submitText=this.lService.decode("modal.button.delete"),this.bsModalRef.content.type="danger",this.bsModalRef.content.onConfirm.subscribe((function(){t.service.remove(e).then((function(){var n=t.page.resultSet.findIndex((function(t){return t.oid===e.oid}));-1!==n&&t.page.resultSet.splice(n,1),null!=t.classificationType&&e.code===t.classificationType.code&&t.router.navigate([],{relativeTo:t.route,queryParams:{typeCode:null}})})).catch((function(e){t.error(e)}))}))},e.prototype.refresh=function(){var e=this;this.service.page({}).then((function(t){e.page=t})).catch((function(t){e.error(t)}))},e.prototype.error=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.ActivatedRoute),a.ɵɵdirectiveInject(l.Router),a.ɵɵdirectiveInject(s.ClassificationTypeService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(d.BsModalService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["classification-type-manager"]],decls:17,vars:3,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"row"],[1,"col-md-3","list-sidebar"],[1,"sidebar-section-content",2,"padding-top","20px"],[1,"list-group"],["class","list-group-item got-li-item",3,"id",4,"ngFor","ngForOf"],[1,"list-group-item","got-li-item"],[1,"bottom"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","hierarchy.management.button.create"],[1,"col-md-9","hierarchy-content"],["id","overflow-div"],[3,"classificationType",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"list-group-item","got-li-item",3,"id"],["routerLinkActive","active",3,"routerLink","queryParams"],[2,"position","absolute","right","10px","top","50%","transform","translateY(-50%)"],[1,"fa","fa-pencil","ico-edit",3,"title","click"],[1,"fa","fa-trash-o","ico-remove",3,"title","click"],[3,"classificationType"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵelement(1,"cgr-header"),a.ɵɵelement(2,"loading-bar"),a.ɵɵelementStart(3,"div",1),a.ɵɵtemplate(4,y,2,1,"div",2),a.ɵɵelementStart(5,"div",3),a.ɵɵelementStart(6,"nav",4),a.ɵɵelementStart(7,"div",5),a.ɵɵelementStart(8,"ul",6),a.ɵɵtemplate(9,b,8,12,"li",7),a.ɵɵelementStart(10,"li",8),a.ɵɵelement(11,"hr",9),a.ɵɵelementStart(12,"button",10),a.ɵɵlistener("click",(function(){return t.onCreate()})),a.ɵɵelement(13,"localize",11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(14,"div",12),a.ɵɵelementStart(15,"div",13),a.ɵɵtemplate(16,S,1,1,"classification-type",14),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(4),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(5),a.ɵɵproperty("ngForOf",t.page.resultSet),a.ɵɵadvance(7),a.ɵɵproperty("ngIf",null!=t.classificationType))},directives:[p.CgrHeaderComponent,u.LoadingBarComponent,m.NgIf,m.NgForOf,g.LocalizeComponent,l.RouterLinkWithHref,l.RouterLinkActive,h.ClassificationTypeComponent],pipes:[f.LocalizePipe],styles:[".list-sidebar[_ngcontent-%COMP%] {\n    z-index: 999;\n    background: #f1f1f1;\n    transition: all 0.3s;\n    vertical-align: top;\n    height: calc(100vh - 50px);\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n.list-group-item[_ngcontent-%COMP%], li.list-group-item[_ngcontent-%COMP%] {\n    background-color: transparent;\n    padding: 3px 10px;\n}\n\n.cr-sort-arrow[_ngcontent-%COMP%] {\n\tfont-size: 14px;\n}\n\n.cr-filter-link-active[_ngcontent-%COMP%], .cr-filter-link-active[_ngcontent-%COMP%]:active {\n\t\n    border-radius: 10px;\n    background: #6BA542;\n    color: white;\n    font-weight: bold;\n    padding: 3px 15px 3px 15px;\n}\n.cr-filter-link-active[_ngcontent-%COMP%]:hover, .cr-filter-link-active[_ngcontent-%COMP%]:focus {\n\tcolor:white;\n}\n\n.panel-body[_ngcontent-%COMP%] {\n    color: #333;\n    background-color: #f5f5f5;\n    border-color: #ddd;\n}\n\n.unstyled-list[_ngcontent-%COMP%] {\n    list-style: none;\n    padding: 0;\n    color: #707070;\n}\n\n.fa[_ngcontent-%COMP%] {\n    top: 5px;\n}\n.fa-stack[_ngcontent-%COMP%] {\n    width: 1.5em;\n}\n.fa-stack[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    text-align: left;\n}\n.second-stacked-el[_ngcontent-%COMP%]:before {\n    background:#f5f5f5;\n}\n\n\n.full-width-radio-button[_ngcontent-%COMP%] {\n      position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%], .changeSpan[_ngcontent-%COMP%] {\n    position: absolute;\n}\n\nlabel.settings[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]    > i.fa.fa-cog[_ngcontent-%COMP%] {\n    font-size: 15px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%] {\n    display: inline-block;\n    position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .changeSpan[_ngcontent-%COMP%] {\n  right: 2.5px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasErrors[_ngcontent-%COMP%]:before {\n  content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: left;\n  color: red;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasChanges[_ngcontent-%COMP%]:after {\n    content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: right;\n  color: orange;\n}\n\nhr.bottom[_ngcontent-%COMP%] {\n    border-top: 1px solid #776f6f;\n}"]}),e}();t.ClassificationTypeManagerComponent=C,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(C,[{type:i.Component,args:[{selector:"classification-type-manager",templateUrl:"./classification-type-manager.component.html",styleUrls:["./classification-type-manager.css"]}]}],(function(){return[{type:l.ActivatedRoute},{type:l.Router},{type:s.ClassificationTypeService},{type:c.LocalizationService},{type:d.BsModalService}]}),null)},1138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClassificationTypePublishModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(193),a=(n(25),n(1027),n(0)),l=n(1027),s=n(25),c=n(56),d=n(1),p=n(18),u=n(88),m=n(545);function g(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",16),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function h(e,t){1&e&&(a.ɵɵelementStart(0,"h1"),a.ɵɵelement(1,"localize",17),a.ɵɵelementEnd())}function f(e,t){if(1&e&&(a.ɵɵelementStart(0,"h1"),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(1),a.ɵɵtextInterpolate1(" ",n.type.displayLabel.localizedValue," ")}}function y(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",6),a.ɵɵelementStart(1,"div",7),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",18),a.ɵɵelementStart(4,"span",19),a.ɵɵtext(5," ("),a.ɵɵelement(6,"convert-key-label",14),a.ɵɵtext(7,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",9),a.ɵɵelementStart(9,"input",20),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext(2);a.ɵɵadvance(6),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("name","label-"+n.locale)("disabled",i.readonly)("required","defaultLocale"===n.locale)}}function v(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",6),a.ɵɵelementStart(1,"div",7),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",21),a.ɵɵelementStart(4,"span",19),a.ɵɵtext(5,"  ("),a.ɵɵelement(6,"convert-key-label",14),a.ɵɵtext(7,") "),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",9),a.ɵɵelementStart(9,"input",20),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext(2);a.ɵɵadvance(6),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("name","description-"+n.locale)("disabled",i.readonly)("required","defaultLocale"===n.locale)}}function b(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"button",22),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).onSubmit()})),a.ɵɵelement(1,"localize",23),a.ɵɵelementEnd()}if(2&e){a.ɵɵnextContext();var i=a.ɵɵreference(6),r=a.ɵɵnextContext();a.ɵɵproperty("disabled",i.invalid||!r.valid)}}function S(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementContainerStart(0),a.ɵɵtemplate(1,g,2,1,"div",2),a.ɵɵelementStart(2,"div",3),a.ɵɵtemplate(3,h,2,0,"h1",1),a.ɵɵtemplate(4,f,2,1,"h1",1),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"form",4,5),a.ɵɵelementStart(7,"fieldset"),a.ɵɵelementStart(8,"div",6),a.ɵɵelementStart(9,"div",7),a.ɵɵelementStart(10,"label"),a.ɵɵelement(11,"localize",8),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(12,"div",9),a.ɵɵelementStart(13,"input",10),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().type.code=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(14,y,10,5,"div",11),a.ɵɵtemplate(15,v,10,5,"div",11),a.ɵɵelementStart(16,"div",6),a.ɵɵelement(17,"div",7),a.ɵɵelementStart(18,"div"),a.ɵɵelementStart(19,"div",12),a.ɵɵelementStart(20,"button",13),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onCancel()})),a.ɵɵelement(21,"localize",14),a.ɵɵelementEnd(),a.ɵɵtemplate(22,b,2,1,"button",15),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementContainerEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=i.message),a.ɵɵadvance(2),a.ɵɵproperty("ngIf",i.isNew),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!i.isNew),a.ɵɵadvance(9),a.ɵɵproperty("ngModel",i.type.code)("disabled",i.readonly||!i.isNew),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",i.type.displayLabel.localeValues),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",i.type.description.localeValues),a.ɵɵadvance(6),a.ɵɵproperty("key",i.readonly?"io.back":"io.cancel"),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!i.readonly)}}var C=function(){function e(e,t,n){this.service=e,this.lService=t,this.bsModalRef=n,this.currentDate=new Date,this.message=null,this.onClassificationTypeChange=null,this.type=null,this.readonly=!1,this.isNew=!1,this.valid=!0}return e.prototype.ngOnInit=function(){this.onClassificationTypeChange=new r.Subject},e.prototype.ngOnDestroy=function(){null!=this.onClassificationTypeChange&&this.onClassificationTypeChange.unsubscribe()},e.prototype.init=function(e,t){return null==t?(this.isNew=!0,this.type={oid:null,displayLabel:this.lService.create(),description:this.lService.create(),code:""}):(this.type=t,this.isNew=!1),this.onClassificationTypeChange.subscribe(e)},e.prototype.onSubmit=function(){var e=this;this.service.apply(this.type).then((function(t){e.onClassificationTypeChange.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.stringify=function(e){return JSON.stringify(e)},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.ClassificationTypeService),a.ɵɵdirectiveInject(s.LocalizationService),a.ɵɵdirectiveInject(c.BsModalRef))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["classification-type-publish-modal"]],decls:2,vars:1,consts:[[1,"modal-body"],[4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading","text-center"],["autocomplete","off",1,"modal-form"],["form","ngForm"],[1,"row-holder"],[1,"label-holder"],["key","data.property.label.code"],[1,"holder"],["name","code","type","text","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","row-holder",4,"ngFor","ngForOf"],[1,"button-holder"],["type","button","role","button",1,"btn","btn-default",3,"click"],[3,"key"],["type","submit","class","btn btn-primary","role","button",3,"disabled","click",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["key","data.type.create.classification"],["key","data.property.label.label"],[2,"color","#BABABA"],["type","text",1,"form-control",3,"ngModel","name","disabled","required","ngModelChange"],["key","data.property.label.description"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.submit"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,S,23,9,"ng-container",1),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.type))},directives:[d.NgIf,p.ɵangular_packages_forms_forms_ba,p.NgControlStatusGroup,p.NgForm,u.LocalizeComponent,p.DefaultValueAccessor,p.RequiredValidator,p.NgControlStatus,p.NgModel,d.NgForOf,m.ConvertKeyLabel],styles:[".list-sidebar[_ngcontent-%COMP%] {\n    z-index: 999;\n    background: #f1f1f1;\n    transition: all 0.3s;\n    vertical-align: top;\n    height: calc(100vh - 50px);\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n.list-group-item[_ngcontent-%COMP%], li.list-group-item[_ngcontent-%COMP%] {\n    background-color: transparent;\n    padding: 3px 10px;\n}\n\n.cr-sort-arrow[_ngcontent-%COMP%] {\n\tfont-size: 14px;\n}\n\n.cr-filter-link-active[_ngcontent-%COMP%], .cr-filter-link-active[_ngcontent-%COMP%]:active {\n\t\n    border-radius: 10px;\n    background: #6BA542;\n    color: white;\n    font-weight: bold;\n    padding: 3px 15px 3px 15px;\n}\n.cr-filter-link-active[_ngcontent-%COMP%]:hover, .cr-filter-link-active[_ngcontent-%COMP%]:focus {\n\tcolor:white;\n}\n\n.panel-body[_ngcontent-%COMP%] {\n    color: #333;\n    background-color: #f5f5f5;\n    border-color: #ddd;\n}\n\n.unstyled-list[_ngcontent-%COMP%] {\n    list-style: none;\n    padding: 0;\n    color: #707070;\n}\n\n.fa[_ngcontent-%COMP%] {\n    top: 5px;\n}\n.fa-stack[_ngcontent-%COMP%] {\n    width: 1.5em;\n}\n.fa-stack[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    text-align: left;\n}\n.second-stacked-el[_ngcontent-%COMP%]:before {\n    background:#f5f5f5;\n}\n\n\n.full-width-radio-button[_ngcontent-%COMP%] {\n      position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%], .changeSpan[_ngcontent-%COMP%] {\n    position: absolute;\n}\n\nlabel.settings[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]    > i.fa.fa-cog[_ngcontent-%COMP%] {\n    font-size: 15px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%] {\n    display: inline-block;\n    position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .changeSpan[_ngcontent-%COMP%] {\n  right: 2.5px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasErrors[_ngcontent-%COMP%]:before {\n  content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: left;\n  color: red;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasChanges[_ngcontent-%COMP%]:after {\n    content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: right;\n  color: orange;\n}\n\nhr.bottom[_ngcontent-%COMP%] {\n    border-top: 1px solid #776f6f;\n}"]}),e}();t.ClassificationTypePublishModalComponent=C,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(C,[{type:i.Component,args:[{selector:"classification-type-publish-modal",templateUrl:"./classification-type-publish-modal.component.html",styleUrls:["./classification-type-manager.css"]}]}],(function(){return[{type:l.ClassificationTypeService},{type:s.LocalizationService},{type:c.BsModalRef}]}),null)},1139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClassificationTypeComponent=void 0;var i=n(0),r=(n(56),n(383)),o=(n(293),n(193)),a=(n(1166),n(25),n(1021),n(1140)),l=n(0),s=n(293),c=n(56),d=n(1021),p=n(25),u=n(1),m=n(88),g=n(383),h=["nodeMenu"];function f(e,t){1&e&&l.ɵɵelement(0,"localize",7)}function y(e,t){1&e&&l.ɵɵelement(0,"localize",8)}function v(e,t){1&e&&l.ɵɵelement(0,"localize",9)}function b(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",10),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.message)}}function S(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementContainerStart(0),l.ɵɵelementStart(1,"button",13),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext(2).onCreate(null)})),l.ɵɵelement(2,"localize",14),l.ɵɵelementEnd(),l.ɵɵelementContainerEnd()}}function C(e,t){if(1&e&&l.ɵɵelement(0,"tree-root",15,16),2&e){var n=l.ɵɵnextContext(2);l.ɵɵproperty("options",n.options)("nodes",n.nodes)}}function E(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",3),l.ɵɵelementStart(1,"div",4),l.ɵɵtemplate(2,S,3,0,"ng-container",11),l.ɵɵelementStart(3,"div"),l.ɵɵtemplate(4,C,2,2,"tree-root",12),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(2),l.ɵɵproperty("ngIf",0===n.nodes.length),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",n.nodes.length>0)}}var x;!function(e){e[e.CLASSIFICATION=0]="CLASSIFICATION",e[e.LINK=1]="LINK"}(x||(x={}));var O=function(){function e(e,t,n,i){var r=this;this.contextMenuService=e,this.modalService=t,this.service=n,this.lService=i,this.message=null,this.classificationType=null,this.nodes=null,this.subscription=null,this.options={idField:"code",getChildren:function(e){return r.getChildren(e)},actionMapping:{mouse:{click:function(e,t,n){r.treeNodeOnClick(t,n)},contextMenu:function(e,t,n){r.handleOnMenu(t,n)},drop:function(e,t,n,i){r.onMoveNode(e,t,n,i)}}},allowDrag:function(e){if(e.data.type===x.CLASSIFICATION){var t=e.data.classification.code;return-1===r.nodes.findIndex((function(e){return e.classification.code===t}))}return!1},allowDrop:function(e,t){return null!=t&&null!=t.parent&&t.parent.data.type===x.CLASSIFICATION},animateExpand:!0,scrollOnActivate:!0,animateSpeed:2,animateAcceleration:1.01}}return e.prototype.ngOnInit=function(){var e=this;this.getChildren(null).then((function(t){e.nodes=t,e.nodes.length>0&&window.setTimeout((function(){e.tree.treeModel.getFirstRoot().expand()}),50)}))},e.prototype.ngOnDestroy=function(){null!=this.subscription&&this.subscription.unsubscribe(),this.subscription=null},e.prototype.getChildren=function(e){var t=this,n=null!=e?e.data:null,i=null!=n?n.classification.code:null;return this.service.getChildren(this.classificationType.code,i,1,100).then((function(e){var i=t.createNodes(n,e);return null!=n&&(null==n.children&&(n.children=[]),n.children.concat(i)),i})).catch((function(e){return[]}))},e.prototype.createNodes=function(e,t){var n=t.resultSet.map((function(e){return{code:e.code,name:e.displayLabel.localizedValue,type:x.CLASSIFICATION,classification:e,hasChildren:!0}}));return t.count>t.pageNumber*t.pageSize&&n.push({code:"...",name:"...",type:x.LINK,hasChildren:!1,pageNumber:t.pageNumber+1,parent:e}),n},e.prototype.handleOnMenu=function(e,t){this.contextMenuService.show.next({contextMenu:this.nodeMenuComponent,event:t,item:e}),t.preventDefault(),t.stopPropagation()},e.prototype.treeNodeOnClick=function(e,t){var n=this,i=null!=e?e.data:null;if(null!=i&&i.type===x.LINK){if(null!=e.parent){var r=e.parent.data,o=r.classification.code,a=i.pageNumber;this.service.getChildren(this.classificationType.code,o,a,100).then((function(e){var t=n.createNodes(r,e);r.children=r.children.filter((function(e){return"..."!==e.code})),r.children=r.children.concat(t),n.tree.treeModel.update()})).catch((function(e){}))}}else e.isExpanded?e.collapse():e.expand(),e.setActiveAndVisible()},e.prototype.onCreate=function(e){var t=this;null!=this.subscription&&this.subscription.unsubscribe();var n=null!=e?e.data:null;this.bsModalRef=this.modalService.show(a.ClassificationPublishModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.subscription=this.bsModalRef.content.init((function(i){var r={code:i.code,name:i.displayLabel.localizedValue,type:x.CLASSIFICATION,classification:i,hasChildren:!0};null!=e?n.children.push(r):t.nodes.push(r),t.tree.treeModel.update()}),this.classificationType,null!=n?n.classification:null)},e.prototype.onEdit=function(e){var t=this;null!=this.subscription&&this.subscription.unsubscribe(),this.bsModalRef=this.modalService.show(a.ClassificationPublishModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.subscription=this.bsModalRef.content.init((function(n){var i=e.data;i.classification=n,i.name=n.displayLabel.localizedValue,t.tree.treeModel.update()}),this.classificationType,null,e.data.classification)},e.prototype.onRemove=function(e){var t=this;this.bsModalRef=this.modalService.show(o.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.lService.decode("confirm.modal.verify.delete")+" ["+e.data.classification.code+"]",this.bsModalRef.content.submitText=this.lService.decode("modal.button.delete"),this.bsModalRef.content.type="danger",this.bsModalRef.content.onConfirm.subscribe((function(){t.removeTreeNode(e)}))},e.prototype.onMoveNode=function(e,t,n,i){var a=this,l=t.data.classification,s=i.from.data.classification,c=l.code,d=s.code,p=this.lService.decode("classification.move.message");p=(p=p.replace("{0}",s.displayLabel.localizedValue)).replace("{1}",l.displayLabel.localizedValue),this.bsModalRef=this.modalService.show(o.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=p,this.bsModalRef.content.type="danger",this.bsModalRef.content.onConfirm.subscribe((function(){a.message=null,a.service.move(a.classificationType.code,d,c).then((function(){r.TREE_ACTIONS.MOVE_NODE(e,t,n,i)})).catch((function(e){a.error(e)}))}))},e.prototype.removeTreeNode=function(e){var t=this;this.message=null,this.service.remove(this.classificationType.code,e.data.classification.code).then((function(){null==e.parent.data.classification&&(t.nodes=[]);var n=e.parent,i=n.data.children;n.data.children=i.filter((function(t){return t.id!==e.data.id})),0===n.data.children.length&&(n.data.hasChildren=!1),t.tree.treeModel.update()})).catch((function(e){t.error(e)}))},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.ContextMenuService),l.ɵɵdirectiveInject(c.BsModalService),l.ɵɵdirectiveInject(d.ClassificationService),l.ɵɵdirectiveInject(p.LocalizationService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["classification-type"]],viewQuery:function(e,t){if(1&e&&(l.ɵɵviewQuery(r.TreeComponent,1),l.ɵɵviewQuery(h,1)),2&e){var n=void 0;l.ɵɵqueryRefresh(n=l.ɵɵloadQuery())&&(t.tree=n.first),l.ɵɵqueryRefresh(n=l.ɵɵloadQuery())&&(t.nodeMenuComponent=n.first)}},inputs:{classificationType:"classificationType"},decls:13,vars:3,consts:[["nodeMenu",""],["contextMenuItem","",3,"execute"],[1,"heading"],[1,"row"],[1,"col-md-12"],["class","alert alert-danger","style","margin-top: 5px;","role","alert",4,"ngIf"],["class","row",4,"ngIf"],["key","modal.button.edit"],["key","modal.button.delete"],["key","hierarchy.content.addChild"],["role","alert",1,"alert","alert-danger",2,"margin-top","5px"],[4,"ngIf"],[3,"options","nodes",4,"ngIf"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","classification.set.root"],[3,"options","nodes"],["tree",""]],template:function(e,t){1&e&&(l.ɵɵelementStart(0,"context-menu",null,0),l.ɵɵtemplate(2,f,1,0,"ng-template",1),l.ɵɵlistener("execute",(function(e){return t.onEdit(e.item)})),l.ɵɵtemplate(3,y,1,0,"ng-template",1),l.ɵɵlistener("execute",(function(e){return t.onRemove(e.item)})),l.ɵɵtemplate(4,v,1,0,"ng-template",1),l.ɵɵlistener("execute",(function(e){return t.onCreate(e.item)})),l.ɵɵelementEnd(),l.ɵɵelementContainerStart(5),l.ɵɵelementStart(6,"div",2),l.ɵɵelementStart(7,"div",3),l.ɵɵelementStart(8,"div",4),l.ɵɵtemplate(9,b,2,1,"div",5),l.ɵɵelementStart(10,"h2"),l.ɵɵtext(11),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(12,E,5,2,"div",6),l.ɵɵelementContainerEnd()),2&e&&(l.ɵɵadvance(9),l.ɵɵproperty("ngIf",null!=t.message),l.ɵɵadvance(2),l.ɵɵtextInterpolate1(" ",t.classificationType.displayLabel.localizedValue," "),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",null!=t.classificationType&&null!=t.nodes))},directives:[s.ContextMenuComponent,s.ɵb,u.NgIf,m.LocalizeComponent,g.TreeComponent],styles:[".list-sidebar[_ngcontent-%COMP%] {\n    z-index: 999;\n    background: #f1f1f1;\n    transition: all 0.3s;\n    vertical-align: top;\n    height: calc(100vh - 50px);\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n.list-group-item[_ngcontent-%COMP%], li.list-group-item[_ngcontent-%COMP%] {\n    background-color: transparent;\n    padding: 3px 10px;\n}\n\n.cr-sort-arrow[_ngcontent-%COMP%] {\n\tfont-size: 14px;\n}\n\n.cr-filter-link-active[_ngcontent-%COMP%], .cr-filter-link-active[_ngcontent-%COMP%]:active {\n\t\n    border-radius: 10px;\n    background: #6BA542;\n    color: white;\n    font-weight: bold;\n    padding: 3px 15px 3px 15px;\n}\n.cr-filter-link-active[_ngcontent-%COMP%]:hover, .cr-filter-link-active[_ngcontent-%COMP%]:focus {\n\tcolor:white;\n}\n\n.panel-body[_ngcontent-%COMP%] {\n    color: #333;\n    background-color: #f5f5f5;\n    border-color: #ddd;\n}\n\n.unstyled-list[_ngcontent-%COMP%] {\n    list-style: none;\n    padding: 0;\n    color: #707070;\n}\n\n.fa[_ngcontent-%COMP%] {\n    top: 5px;\n}\n.fa-stack[_ngcontent-%COMP%] {\n    width: 1.5em;\n}\n.fa-stack[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    text-align: left;\n}\n.second-stacked-el[_ngcontent-%COMP%]:before {\n    background:#f5f5f5;\n}\n\n\n.full-width-radio-button[_ngcontent-%COMP%] {\n      position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%], .changeSpan[_ngcontent-%COMP%] {\n    position: absolute;\n}\n\nlabel.settings[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]    > i.fa.fa-cog[_ngcontent-%COMP%] {\n    font-size: 15px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%] {\n    display: inline-block;\n    position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .changeSpan[_ngcontent-%COMP%] {\n  right: 2.5px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasErrors[_ngcontent-%COMP%]:before {\n  content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: left;\n  color: red;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasChanges[_ngcontent-%COMP%]:after {\n    content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: right;\n  color: orange;\n}\n\nhr.bottom[_ngcontent-%COMP%] {\n    border-top: 1px solid #776f6f;\n}"]}),e}();t.ClassificationTypeComponent=O,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(O,[{type:i.Component,args:[{selector:"classification-type",templateUrl:"./classification-type.component.html",styleUrls:["./classification-type-manager.css"]}]}],(function(){return[{type:s.ContextMenuService},{type:c.BsModalService},{type:d.ClassificationService},{type:p.LocalizationService}]}),{classificationType:[{type:i.Input}],tree:[{type:i.ViewChild,args:[r.TreeComponent]}],nodeMenuComponent:[{type:i.ViewChild,args:["nodeMenu"]}]})},1140:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClassificationPublishModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(193),a=(n(25),n(1021),n(0)),l=n(1021),s=n(25),c=n(56),d=n(1),p=n(18),u=n(88),m=n(545);function g(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",16),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function h(e,t){1&e&&(a.ɵɵelementStart(0,"h1"),a.ɵɵelement(1,"localize",17),a.ɵɵelementEnd())}function f(e,t){if(1&e&&(a.ɵɵelementStart(0,"h1"),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(1),a.ɵɵtextInterpolate1(" ",n.classificationType.displayLabel.localizedValue," ")}}function y(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",6),a.ɵɵelementStart(1,"div",7),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",18),a.ɵɵelementStart(4,"span",19),a.ɵɵtext(5," ("),a.ɵɵelement(6,"convert-key-label",14),a.ɵɵtext(7,")"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",9),a.ɵɵelementStart(9,"input",20),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext(2);a.ɵɵadvance(6),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("name","label-"+n.locale)("disabled",i.readonly)("required","defaultLocale"===n.locale)}}function v(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",6),a.ɵɵelementStart(1,"div",7),a.ɵɵelementStart(2,"label"),a.ɵɵelement(3,"localize",21),a.ɵɵelementStart(4,"span",19),a.ɵɵtext(5,"  ("),a.ɵɵelement(6,"convert-key-label",14),a.ɵɵtext(7,") "),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",9),a.ɵɵelementStart(9,"input",20),a.ɵɵlistener("ngModelChange",(function(e){return t.$implicit.value=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit,i=a.ɵɵnextContext(2);a.ɵɵadvance(6),a.ɵɵproperty("key",n.locale),a.ɵɵadvance(3),a.ɵɵproperty("ngModel",n.value)("name","description-"+n.locale)("disabled",i.readonly)("required","defaultLocale"===n.locale)}}function b(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"button",22),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).onSubmit()})),a.ɵɵelement(1,"localize",23),a.ɵɵelementEnd()}if(2&e){a.ɵɵnextContext();var i=a.ɵɵreference(6),r=a.ɵɵnextContext();a.ɵɵproperty("disabled",i.invalid||!r.valid)}}function S(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementContainerStart(0),a.ɵɵtemplate(1,g,2,1,"div",2),a.ɵɵelementStart(2,"div",3),a.ɵɵtemplate(3,h,2,0,"h1",1),a.ɵɵtemplate(4,f,2,1,"h1",1),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"form",4,5),a.ɵɵelementStart(7,"fieldset"),a.ɵɵelementStart(8,"div",6),a.ɵɵelementStart(9,"div",7),a.ɵɵelementStart(10,"label"),a.ɵɵelement(11,"localize",8),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(12,"div",9),a.ɵɵelementStart(13,"input",10),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().classification.code=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(14,y,10,5,"div",11),a.ɵɵtemplate(15,v,10,5,"div",11),a.ɵɵelementStart(16,"div",6),a.ɵɵelement(17,"div",7),a.ɵɵelementStart(18,"div"),a.ɵɵelementStart(19,"div",12),a.ɵɵelementStart(20,"button",13),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onCancel()})),a.ɵɵelement(21,"localize",14),a.ɵɵelementEnd(),a.ɵɵtemplate(22,b,2,1,"button",15),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementContainerEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=i.message),a.ɵɵadvance(2),a.ɵɵproperty("ngIf",i.isNew),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!i.isNew),a.ɵɵadvance(9),a.ɵɵproperty("ngModel",i.classification.code)("disabled",i.readonly||!i.isNew),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",i.classification.displayLabel.localeValues),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",i.classification.description.localeValues),a.ɵɵadvance(6),a.ɵɵproperty("key",i.readonly?"io.back":"io.cancel"),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!i.readonly)}}var C=function(){function e(e,t,n){this.service=e,this.lService=t,this.bsModalRef=n,this.message=null,this.onClassificationChange=null,this.classificationType=null,this.parent=null,this.classification=null,this.readonly=!1,this.isNew=!1,this.valid=!0}return e.prototype.ngOnInit=function(){this.onClassificationChange=new r.Subject},e.prototype.ngOnDestroy=function(){null!=this.onClassificationChange&&this.onClassificationChange.unsubscribe()},e.prototype.init=function(e,t,n,i){return this.classificationType=t,this.parent=n,null==i?(this.isNew=!0,this.classification={code:"",displayLabel:this.lService.create(),description:this.lService.create()}):(this.classification=i,this.isNew=!1),this.onClassificationChange.subscribe(e)},e.prototype.onSubmit=function(){var e=this,t=this.classificationType.code,n=null!=this.parent?this.parent.code:null;this.service.apply(t,n,this.classification,this.isNew).then((function(t){e.onClassificationChange.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.ClassificationService),a.ɵɵdirectiveInject(s.LocalizationService),a.ɵɵdirectiveInject(c.BsModalRef))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["classification-publish-modal"]],decls:2,vars:1,consts:[[1,"modal-body"],[4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading","text-center"],["autocomplete","off",1,"modal-form"],["form","ngForm"],[1,"row-holder"],[1,"label-holder"],["key","data.property.label.code"],[1,"holder"],["name","code","type","text","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","row-holder",4,"ngFor","ngForOf"],[1,"button-holder"],["type","button","role","button",1,"btn","btn-default",3,"click"],[3,"key"],["type","submit","class","btn btn-primary","role","button",3,"disabled","click",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["key","data.type.create.classification"],["key","data.property.label.label"],[2,"color","#BABABA"],["type","text",1,"form-control",3,"ngModel","name","disabled","required","ngModelChange"],["key","data.property.label.description"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.submit"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,S,23,9,"ng-container",1),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.classification))},directives:[d.NgIf,p.ɵangular_packages_forms_forms_ba,p.NgControlStatusGroup,p.NgForm,u.LocalizeComponent,p.DefaultValueAccessor,p.RequiredValidator,p.NgControlStatus,p.NgModel,d.NgForOf,m.ConvertKeyLabel],styles:[".list-sidebar[_ngcontent-%COMP%] {\n    z-index: 999;\n    background: #f1f1f1;\n    transition: all 0.3s;\n    vertical-align: top;\n    height: calc(100vh - 50px);\n    overflow-x: hidden;\n    overflow-y: auto;\n}\n\n.list-group-item[_ngcontent-%COMP%], li.list-group-item[_ngcontent-%COMP%] {\n    background-color: transparent;\n    padding: 3px 10px;\n}\n\n.cr-sort-arrow[_ngcontent-%COMP%] {\n\tfont-size: 14px;\n}\n\n.cr-filter-link-active[_ngcontent-%COMP%], .cr-filter-link-active[_ngcontent-%COMP%]:active {\n\t\n    border-radius: 10px;\n    background: #6BA542;\n    color: white;\n    font-weight: bold;\n    padding: 3px 15px 3px 15px;\n}\n.cr-filter-link-active[_ngcontent-%COMP%]:hover, .cr-filter-link-active[_ngcontent-%COMP%]:focus {\n\tcolor:white;\n}\n\n.panel-body[_ngcontent-%COMP%] {\n    color: #333;\n    background-color: #f5f5f5;\n    border-color: #ddd;\n}\n\n.unstyled-list[_ngcontent-%COMP%] {\n    list-style: none;\n    padding: 0;\n    color: #707070;\n}\n\n.fa[_ngcontent-%COMP%] {\n    top: 5px;\n}\n.fa-stack[_ngcontent-%COMP%] {\n    width: 1.5em;\n}\n.fa-stack[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    text-align: left;\n}\n.second-stacked-el[_ngcontent-%COMP%]:before {\n    background:#f5f5f5;\n}\n\n\n.full-width-radio-button[_ngcontent-%COMP%] {\n      position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%], .changeSpan[_ngcontent-%COMP%] {\n    position: absolute;\n}\n\nlabel.settings[_ngcontent-%COMP%]    > span[_ngcontent-%COMP%]    > i.fa.fa-cog[_ngcontent-%COMP%] {\n    font-size: 15px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%] {\n    display: inline-block;\n    position: relative;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .changeSpan[_ngcontent-%COMP%] {\n  right: 2.5px;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasErrors[_ngcontent-%COMP%]:before {\n  content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: left;\n  color: red;\n}\n\n.full-width-radio-button[_ngcontent-%COMP%]   .tabHasChanges[_ngcontent-%COMP%]:after {\n    content: ' \\25CF';\n  font-size: 20px;\n  line-height:12px;\n  text-align: right;\n  color: orange;\n}\n\nhr.bottom[_ngcontent-%COMP%] {\n    border-top: 1px solid #776f6f;\n}"]}),e}();t.ClassificationPublishModalComponent=C,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(C,[{type:i.Component,args:[{selector:"classification-publish-modal",templateUrl:"./classification-publish-modal.component.html",styleUrls:["./classification-type-manager.css"]}]}],(function(){return[{type:l.ClassificationService},{type:s.LocalizationService},{type:c.BsModalRef}]}),null)},1144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerDiffingStrategy=t.LayerDiff=void 0;var i=function(){function e(e,t,n,i,r){this.type=e,this.newLayer=t,this.newLayerIndex=n,this.oldLayer=i,this.oldLayerIndex=r}return e.prototype.equals=function(t){return t instanceof e&&(this.type===t.type&&this.newLayerIndex===t.newLayerIndex&&this.oldLayerIndex===t.oldLayerIndex&&(null==this.newLayer&&null==t.newLayer||null!=this.newLayer&&null!=t.newLayer&&this.newLayer.getId()===t.newLayer.getId())&&(null==this.oldLayer&&null==t.oldLayer||null!=this.oldLayer&&null!=t.oldLayer&&this.oldLayer.getId()===t.oldLayer.getId()))},e}();t.LayerDiff=i;var r=function(){function e(e,t){this.diffs=[],this.newLayers=e,this.oldLayers=t,this.calculateDiffs()}return e.prototype.getDiffs=function(){return this.diffs},e.prototype.calculateDiffs=function(){this.diffs=[];for(var e=Math.max(this.newLayers.length,this.oldLayers.length),t=function(e){var t=null,i=null,r=-1,o=-1;e<n.newLayers.length&&(t=n.newLayers[e],r=e,-1!==(o=n.oldLayers.findIndex((function(e){return e.getId()===t.getId()})))&&(i=n.oldLayers[o]),n.diffLayers(t,r,i,o)),t=null,i=null,r=-1,o=-1,e<n.oldLayers.length&&(i=n.oldLayers[e],o=e,-1!==(r=n.newLayers.findIndex((function(e){return e.getId()===i.getId()})))&&(t=n.newLayers[r]),n.diffLayers(t,r,i,o))},n=this,i=0;i<e;++i)t(i)},e.prototype.addDiff=function(e){-1===this.diffs.findIndex((function(t){return t.equals(e)}))&&this.diffs.push(e)},e.prototype.diffLayers=function(e,t,n,r){null!=e&&null!=n?(t!==r&&this.addDiff(new i("LAYER_REORDER",e,t,n,r)),e.rendered!==n.rendered&&this.addDiff(new i("RENDERED_CHANGE",e,t,n,r)),e.color!==n.color&&this.addDiff(new i("COLOR_CHANGE",e,t,n,r))):null!=e&&null==n?this.addDiff(new i("NEW_LAYER",e,t,n,r)):null==e&&null!=n&&this.addDiff(new i("REMOVE_LAYER",e,t,n,r))},e}();t.LayerDiffingStrategy=r},1145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SvgHierarchyNode=void 0;var i=n(860),r=n(1061),o=n(1088),a=n(1039),l=n(193),s=function(){function e(e,t,n,i,r,o,a){this.localizeService=r,this.modalService=o,this.authService=a,this.hierarchyComponent=e,this.svgHierarchyType=t,this.geoObjectType=n,this.treeNode=i}return e.prototype.getCode=function(){return this.geoObjectType.code},e.prototype.setPos=function(e,t,n){var r=this.getBbox();i.select('.g-hierarchy[data-primary=true] .svg-got-body-rect[data-gotCode="'+this.getCode()+'"]').classed("dragging",n).attr("x",e).attr("y",t),i.select('.g-hierarchy[data-primary=true] .svg-got-header-rect[data-gotCode="'+this.getCode()+'"]').classed("dragging",n).attr("x",e).attr("y",t-o.SvgHierarchyType.gotRectH/2+2),i.select('.g-hierarchy[data-primary=true] .svg-got-label-text[data-gotCode="'+this.getCode()+'"]').classed("dragging",n).attr("x",e+5).attr("y",t+1),i.select('.g-hierarchy[data-primary=true] .svg-got-relatedhiers-button[data-gotCode="'+this.getCode()+'"]').classed("dragging",n).attr("x",e+r.width-20).attr("y",t+17);var a=i.select('.g-hierarchy[data-primary=true] .hierarchy-inherit-button[data-gotCode="'+this.getCode()+'"]').node();if(null!=a){var l=e+r.width-60,s=t+r.height-24,c=a.getBBox();i.select('.g-hierarchy[data-primary=true] .hierarchy-inherit-button[data-gotCode="'+this.getCode()+'"]').classed("dragging",n).attr("transform","translate("+(l-c.x)+" "+(s-c.y)+")")}var d=i.select('.g-hierarchy[data-primary=true] .hierarchy-uninherit-button[data-gotCode="'+this.getCode()+'"]').node();if(null!=d){l=e+r.width-71,s=t+r.height-24;var p=d.getBBox();i.select('.g-hierarchy[data-primary=true] .hierarchy-uninherit-button[data-gotCode="'+this.getCode()+'"]').classed("dragging",n).attr("transform","translate("+(l-p.x)+" "+(s-p.y)+")")}},e.prototype.getPos=function(){var e=i.select('.g-hierarchy[data-primary=true] .svg-got-body-rect[data-gotCode="'+this.getCode()+'"]');return{x:parseInt(e.attr("x")),y:parseInt(e.attr("y"))}},e.prototype.getBbox=function(){var e=i.select('.g-hierarchy[data-primary=true] .svg-got-body-rect[data-gotCode="'+this.getCode()+'"]');return{x:parseInt(e.attr("x")),y:parseInt(e.attr("y"))-3,width:parseInt(e.attr("width")),height:parseInt(e.attr("height"))+3}},e.prototype.getTreeNode=function(){return this.treeNode},e.prototype.hideRelatedHierarchy=function(){var e=i.select('.g-hierarchy[data-primary="false"]');if(null!=e.node())return e.remove(),this.hierarchyComponent.calculateSvgViewBox(),e.attr("data-code")},e.prototype.renderRelatedHierarchiesMenu=function(){var e=this,t=this,n=i.select(".g-context-menu");if(null==n.node()){var a=i.select("#svg").append("g").classed("g-context-menu",!0),l=this.svgHierarchyType.getRelatedHierarchies(this.getCode()),s=this.authService.isSRA()||this.authService.isOrganizationRA(this.svgHierarchyType.hierarchyType.organizationCode),c=this.getBbox(),d=c.x+c.width-5,p=c.y+c.height/2-8,u=this.hierarchyComponent.localize("hierarchy.content.relatedHierarchies"),m=this.hierarchyComponent.localize("hierarchy.content.actionsTitle"),g=this.hierarchyComponent.localize("hierarchy.content.removeFromHierarchy"),h=this.hierarchyComponent.localize("hierarchy.content.noRelatedHierarchies"),f=this.hierarchyComponent.localize("hierarchy.content.hideRelatedHierarchy"),y=this.hierarchyComponent.localize("hierarchy.content.uninherit"),v=this.hierarchyComponent.localize("hierarchy.content.inherit"),b=null!=i.select('.g-hierarchy[data-primary="false"]').node(),S=s?b?2:1:0,C=r.calculateTextWidth(u,9),E=r.calculateTextWidth(g,8);if(C=E>C?E:C,b){var x=r.calculateTextWidth(f,8);C=x>C?x:C}if(null!=this.treeNode.parent&&null!=this.treeNode.parent.data.inheritedHierarchyCode&&""!=this.treeNode.parent.data.inheritedHierarchyCode){var O=r.calculateTextWidth(y,8);C=O>C?O:C,S++}else{if(null!=(P=i.select('.g-hierarchy[data-primary="false"]')).node()){var I=P.attr("data-code"),M=this.hierarchyComponent.findHierarchyByCode(I),w=null!=new o.SvgHierarchyType(this.hierarchyComponent,i.select("#svg"),M,!0,this.localizeService,this.modalService,this.authService).getNodeByCode(this.getCode()).getTreeNode().parent;if(null==this.treeNode.parent&&w){var T=r.calculateTextWidth(v,8);C=T>C?T:C,S++}}}if(l.length>0)l.forEach((function(t){var n=e.hierarchyComponent.findHierarchyByCode(t),i=n.label.localizedValue;null!=e.treeNode.parent&&e.treeNode.parent.data.inheritedHierarchyCode===n.code&&(i=i+" ("+e.hierarchyComponent.localize("hierarchy.content.inherited")+")");var o=r.calculateTextWidth(i,8);o>C&&(C=o)}));else{var k=r.calculateTextWidth(h,8);C=k>C?k:C}C+=10;var P,j=l.length>0?S+2:S+3;if(a.append("rect").classed("contextmenu-relatedhiers-background",!0).attr("x",d).attr("y",p).attr("rx",5).attr("width",C).attr("height",20*(l.length+j)).attr("fill","white").attr("stroke-width",.5).attr("stroke","#aaaaaa"),a.append("text").classed("contextmenu-relatedhiers-title",!0).attr("x",d+5).attr("y",p+10+4.5).attr("font-size",9).attr("font-family","sans-serif").attr("font-weight","bold").text(u),p+=20,a.append("line").classed("contextmenu-relatedhiers-divider",!0).attr("x1",d).attr("y1",p).attr("x2",d+C).attr("y2",p).attr("stroke","#aaaaaa").attr("stroke-width",.5),l.length>0)for(var z=function(e){var n=l[e],i=D.hierarchyComponent.findHierarchyByCode(n),r=i.label.localizedValue;null!=D.treeNode.parent&&D.treeNode.parent.data.inheritedHierarchyCode===i.code&&(r=r+" ("+D.hierarchyComponent.localize("hierarchy.content.inherited")+")"),a.append("text").classed("contextmenu-relatedhiers-text",!0).attr("data-hierCode",n).attr("x",d+5).attr("y",p+10+4).attr("font-size",8).attr("font-family","sans-serif").text(r).style("cursor","pointer").on("click",(function(e,n){t.renderSecondaryHierarchy(i)})),p+=20,e<l.length&&a.append("line").classed("contextmenu-relatedhiers-divider",!0).attr("data-hierCode",n).attr("x1",d+5).attr("y1",p).attr("x2",d+C-5).attr("y2",p).attr("stroke","#e4e4e4").attr("stroke-width",.5)},D=this,R=0;R<l.length;++R)z(R);else a.append("text").classed("contextmenu-relatedhiers-text",!0).attr("x",d+5).attr("y",p+10+4).attr("font-size",8).attr("font-family","sans-serif").text(h),p+=20,a.append("line").classed("contextmenu-relatedhiers-divider",!0).attr("x1",d+5).attr("y1",p).attr("x2",d+C-5).attr("y2",p).attr("stroke","#e4e4e4").attr("stroke-width",.5);if(s)if(a.append("text").classed("contextmenu-relatedhiers-title",!0).attr("x",d+5).attr("y",p+10+4.5).attr("font-size",9).attr("font-family","sans-serif").attr("font-weight","bold").text(m),p+=20,a.append("line").classed("contextmenu-relatedhiers-divider",!0).attr("x1",d).attr("y1",p).attr("x2",d+C).attr("y2",p).attr("stroke","#aaaaaa").attr("stroke-width",.5),a.append("text").classed("contextmenu-relatedhiers-text",!0).attr("data-remove","REPLACE---gotCode").attr("x",d+5).attr("y",p+10+4).attr("font-size",8).attr("font-family","sans-serif").text(g).style("cursor","pointer").on("click",(function(e,n){t.removeGotFromHierarchy()})),p+=20,null!=this.treeNode.parent&&null!=this.treeNode.parent.data.inheritedHierarchyCode&&""!=this.treeNode.parent.data.inheritedHierarchyCode)a.append("line").classed("contextmenu-relatedhiers-divider",!0).attr("x1",d).attr("y1",p).attr("x2",d+C).attr("y2",p).attr("stroke","#aaaaaa").attr("stroke-width",.5),a.append("text").classed("contextmenu-relatedhiers-text",!0).attr("x",d+5).attr("y",p+10+4).attr("font-size",8).attr("font-family","sans-serif").text(y).style("cursor","pointer").on("click",(function(e,n){t.onClickUninheritHierarchy()})),p+=20;else if(null!=(P=i.select('.g-hierarchy[data-primary="false"]')).node()){I=P.attr("data-code");var L=this.hierarchyComponent.findHierarchyByCode(I);w=null!=new o.SvgHierarchyType(this.hierarchyComponent,i.select("#svg"),L,!0,this.localizeService,this.modalService,this.authService).getNodeByCode(this.getCode()).getTreeNode().parent;null==this.treeNode.parent&&w&&(a.append("line").classed("contextmenu-relatedhiers-divider",!0).attr("x1",d).attr("y1",p).attr("x2",d+C).attr("y2",p).attr("stroke","#aaaaaa").attr("stroke-width",.5),a.append("text").classed("contextmenu-relatedhiers-text",!0).attr("x",d+5).attr("y",p+10+4).attr("font-size",8).attr("font-family","sans-serif").text(v).style("cursor","pointer").on("click",(function(e,n){t.onClickInheritHierarchy(L)})),p+=20)}b&&(a.append("line").classed("contextmenu-relatedhiers-divider",!0).attr("x1",d).attr("y1",p).attr("x2",d+C).attr("y2",p).attr("stroke","#aaaaaa").attr("stroke-width",.5),a.append("text").classed("contextmenu-relatedhiers-text",!0).attr("x",d+5).attr("y",p+10+4).attr("font-size",8).attr("font-family","sans-serif").text(f).style("cursor","pointer").on("click",(function(e,n){t.hideRelatedHierarchy();var r=i.select(".g-context-menu");null!=r.node()&&r.remove(),i.select(".g-hierarchy-got-connector").remove()}))),this.hierarchyComponent.calculateSvgViewBox()}else n.remove()},e.prototype.removeGotFromHierarchy=function(){var e=this,t=this.hierarchyComponent.primarySvgHierarchy.getNodeByCode(this.geoObjectType.code),n=this.hierarchyComponent.findGeoObjectTypeByCode(t.getCode());this.bsModalRef=this.modalService.show(l.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});var i=this.localizeService.decode("confirm.modal.verify.remove.hierarchy");i=i.replace("{label}",n.label.localizedValue),this.bsModalRef.content.message=i,this.bsModalRef.content.data=n.code,this.bsModalRef.content.onConfirm.subscribe((function(n){var i=t.getTreeNode(),r=null;r=null==i.parent||null!=i.parent.data.inheritedHierarchyCode?"ROOT":i.parent.data.geoObjectType,e.hierarchyComponent.removeFromHierarchy(r,t.getCode(),(function(e){console.log(e)}))}))},e.prototype.renderSecondaryHierarchy=function(e){i.select(".g-context-menu").remove(),i.select(".g-hierarchy-got-connector").remove();var t=this.getBbox(),n=i.select("#svg");if(this.hideRelatedHierarchy()!==e.code){var r=i.select(".g-hierarchy[data-primary=true]").node().getBBox();new o.SvgHierarchyType(this.hierarchyComponent,n,e,!1,this.localizeService,this.modalService,this.authService).render();var l=i.select('.g-hierarchy[data-primary="false"]'),s=i.select('.g-hierarchy[data-primary="false"]').node().getBBox(),c=r.width+40+(r.x-s.x);l.attr("transform","translate("+c+" 0)");var d=i.select('.g-hierarchy[data-primary=false] .svg-got-body-rect[data-gotCode="'+this.getCode()+'"]'),p={x:parseInt(d.attr("x")),y:parseInt(d.attr("y"))-3,width:parseInt(d.attr("width")),height:parseInt(d.attr("height"))+3};p.x=p.x+c,i.select(".g-hierarchy-got-connector").remove();var u=i.select("#svg").append("g").classed("g-hierarchy-got-connector",!0);u.append("path").classed("hierarchy-got-connector",!0).attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-dasharray","5,5").attr("stroke-width",1.5).attr("d","M"+(t.x+t.width)+","+(t.y+t.height/2)+"H"+((p.x-(t.x+t.width))/2+t.x+t.width)+"V"+(p.y+p.height/2)+"H"+p.x);var m=10,g=7,h=u.append("g").classed("g-hierarchy-got-connector-arrow",!0);h.append("rect").classed("hierarchy-got-connector-arrow-rect",!0).attr("x",t.x+t.width-g/2).attr("y",t.y+t.height/2-m/2).attr("width",g).attr("height",m).attr("fill",a.RELATED_NODE_BANNER_COLOR),h.append("path").classed("hierarchy-got-connector-arrow-path",!0).attr("fill","none").attr("stroke","white").attr("stroke-width",1.5).attr("d","M"+(t.x+t.width-g/2+2*g/3)+","+(t.y+t.height/2-m/2+2*m/3)+"L"+(t.x+t.width+g/2-2*g/3)+","+(t.y+t.height/2)+"L"+(t.x+t.width-g/2+2*g/3)+","+(t.y+t.height/2-m/2+m/3)),this.hierarchyComponent.calculateSvgViewBox()}},e.prototype.onClickInheritHierarchy=function(e){this.hierarchyComponent.handleInheritHierarchy(this.svgHierarchyType.getCode(),e.code,this.getCode())},e.prototype.onClickUninheritHierarchy=function(){this.hierarchyComponent.handleUninheritHierarchy(this.svgHierarchyType.getCode(),this.getCode())},e}();t.SvgHierarchyNode=s},1146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DagreNodesOnlyLayout=t.Alignment=t.Orientation=void 0;var i,r=n(1089),o=n(161);!function(e){e.LEFT_TO_RIGHT="LR",e.RIGHT_TO_LEFT="RL",e.TOP_TO_BOTTOM="TB",e.BOTTOM_TO_TOM="BT"}(i=t.Orientation||(t.Orientation={})),function(e){e.CENTER="C",e.UP_LEFT="UL",e.UP_RIGHT="UR",e.DOWN_LEFT="DL",e.DOWN_RIGHT="DR"}(t.Alignment||(t.Alignment={}));var a=function(){function e(){this.defaultSettings={orientation:i.LEFT_TO_RIGHT,marginX:0,marginY:0,edgePadding:r.DIMENSIONS.PADDING.BETWEEN_NODES,rankPadding:100,nodePadding:r.DIMENSIONS.PADDING.BETWEEN_NODES,curveDistance:0,multigraph:!1,compound:!0},this.settings={}}return e.prototype.run=function(e){this.createDagreGraph(e),o.layout(this.dagreGraph),e.edgeLabels=this.dagreGraph._edgeLabels;var t=function(t){var i=n.dagreGraph._nodes[t],r=e.nodes.find((function(e){return e.id===i.id}));r.position={x:i.x,y:i.y},r.dimension={width:i.width,height:i.height}},n=this;for(var i in this.dagreGraph._nodes)t(i);for(var r=0,a=e.edges;r<a.length;r++){var l=a[r];this.updateEdge(e,l)}return e},e.prototype.updateEdge=function(e,t){var n,i,r,o,a=e.nodes.find((function(e){return e.id===t.source})),l=e.nodes.find((function(e){return e.id===t.target})),s="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",c="y"===s?"x":"y",d="y"===s?"height":"width",p=a.position[s]<=l.position[s]?-1:1,u=((n={})[c]=a.position[c],n[s]=a.position[s]-p*(a.dimension[d]/2),n),m=((i={})[c]=l.position[c],i[s]=l.position[s]+p*(l.dimension[d]/2),i);this.settings.curveDistance||this.defaultSettings.curveDistance;t.points=[u,(r={},r[s]=a.position[s]+(l.position[s]-a.position[s])/2,r[c]=u[c],r),(o={},o[c]=m[c],o[s]=a.position[s]+(l.position[s]-a.position[s])/2,o),m];var g=t.source+""+t.target+"\0",h=e.edgeLabels[g];return h&&(h.points=t.points),e},e.prototype.createDagreGraph=function(e){var t=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new o.graphlib.Graph({compound:t.compound,multigraph:t.multigraph}),this.dagreGraph.setGraph({rankdir:t.orientation,marginx:t.marginX,marginy:t.marginY,edgesep:t.edgePadding,ranksep:t.rankPadding,nodesep:t.nodePadding,align:t.align,acyclicer:t.acyclicer,ranker:t.ranker,multigraph:t.multigraph,compound:t.compound}),this.dagreGraph.setDefaultEdgeLabel((function(){return{}})),this.dagreNodes=e.nodes.map((function(e){var t=Object.assign({},e);return t.width=e.dimension.width,t.height=e.dimension.height,t.x=e.position.x,t.y=e.position.y,t})),this.dagreEdges=e.edges.map((function(e){var t=1,n=Object.assign({},e);return n.id||(n.id=t,t++),n}));for(var n=0,i=this.dagreNodes;n<i.length;n++){var r=i[n];r.width||(r.width=20),r.height||(r.height=30),this.dagreGraph.setNode(r.id,r)}for(var a=0,l=this.dagreEdges;a<l.length;a++){var s=l[a];t.multigraph?this.dagreGraph.setEdge(s.source,s.target,s,s.id):this.dagreGraph.setEdge(s.source,s.target)}return this.dagreGraph},e}();t.DagreNodesOnlyLayout=a},1147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddChildToHierarchyModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(193),a=(n(1015),n(0)),l=n(1015),s=n(56),c=n(18),d=n(1),p=n(88);function u(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",13),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function m(e,t){if(1&e&&(a.ɵɵelementStart(0,"option",18),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵpropertyInterpolate("value",n.code),a.ɵɵadvance(1),a.ɵɵtextInterpolate1(" ",n.label.localizedValue," ")}}function g(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"select",14),a.ɵɵlistener("change",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).onSelect(e.target.value)})),a.ɵɵelementStart(1,"option",15),a.ɵɵtext(2,"-- "),a.ɵɵelement(3,"localize",16),a.ɵɵtext(4," --"),a.ɵɵelementEnd(),a.ɵɵelement(5,"option"),a.ɵɵtemplate(6,m,2,2,"option",17),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext(2);a.ɵɵadvance(1),a.ɵɵproperty("value",i.selectUndefinedOptionValue),a.ɵɵadvance(5),a.ɵɵproperty("ngForOf",i.allGeoObjectTypes)}}function h(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",2),a.ɵɵtemplate(1,u,2,1,"div",3),a.ɵɵelementStart(2,"div",4),a.ɵɵelementStart(3,"h1"),a.ɵɵelement(4,"localize",5),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"fieldset"),a.ɵɵelementStart(6,"div",6),a.ɵɵtemplate(7,g,7,2,"select",7),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",8),a.ɵɵelementStart(9,"button",9),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().bsModalRef.hide()})),a.ɵɵelementStart(10,"span"),a.ɵɵelement(11,"localize",10),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(12,"button",11),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().handleOnSubmit()})),a.ɵɵelementStart(13,"span"),a.ɵɵelement(14,"localize",12),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=i.message),a.ɵɵadvance(6),a.ɵɵproperty("ngIf",i.allGeoObjectTypes)}}var f=function(){function e(e,t){this.hierarchyService=e,this.bsModalRef=t,this.toRoot=!1,this.message=null}return e.prototype.ngOnInit=function(){this.onNodeChange=new r.Subject},e.prototype.onSelect=function(e){var t=this;this.allGeoObjectTypes.forEach((function(n){n.code===e&&(t.selectedGeoObjectType=n)}))},e.prototype.handleOnSubmit=function(){var e=this;this.message=null;var t=this.toRoot?"ROOT":this.parent.data.geoObjectType;this.hierarchyService.addChildToHierarchy(this.hierarchyType.code,t,this.selectedGeoObjectType.code).then((function(t){e.onNodeChange.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.HierarchyService),a.ɵɵdirectiveInject(s.BsModalRef))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["add-child-to-hierarchy-modal"]],decls:2,vars:1,consts:[[1,"modal-form"],["class","modal-body",4,"ngIf"],[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading","text-center"],["key","hierarchy.management.button.addRelationship"],[1,"form-group"],[3,"change",4,"ngIf"],[1,"button-holder"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit","role","button","aria-disabled","false",1,"btn","btn-primary",3,"click"],["key","modal.button.ok"],["role","alert",1,"alert","alert-danger"],[3,"change"],["disabled","","hidden","",3,"value"],["key","hierarchy.management.create.child.option.label.selectType"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"form",0),a.ɵɵtemplate(1,h,15,2,"div",1),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.parent))},directives:[c.ɵangular_packages_forms_forms_ba,c.NgControlStatusGroup,c.NgForm,d.NgIf,p.LocalizeComponent,c.NgSelectOption,c.ɵangular_packages_forms_forms_z,d.NgForOf],encapsulation:2}),e}();t.AddChildToHierarchyModalComponent=f,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(f,[{type:i.Component,args:[{selector:"add-child-to-hierarchy-modal",templateUrl:"./add-child-to-hierarchy-modal.component.html",styleUrls:[]}]}],(function(){return[{type:l.HierarchyService},{type:s.BsModalRef}]}),null)},1148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageAttributesModalComponent=void 0;var i=n(0),r=(n(56),n(44)),o=n(547),a=n(193),l=(n(25),n(378),n(544)),s=(n(1015),n(0)),c=n(56),d=n(25),p=n(1015),u=n(1),m=n(18),g=n(88),h=n(57),f=n(162);function y(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",3),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext();s.ɵɵadvance(1),s.ɵɵtextInterpolate(n.message)}}function v(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"a",29),s.ɵɵlistener("click",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext().$implicit;return s.ɵɵnextContext(2).editAttribute(t,e)})),s.ɵɵpipe(1,"localize"),s.ɵɵelementEnd()}2&e&&s.ɵɵproperty("title",s.ɵɵpipeBind1(1,1,"modal.button.edit"))}function b(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"a",30),s.ɵɵlistener("click",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext().$implicit;return s.ɵɵnextContext(2).removeAttributeType(t,e)})),s.ɵɵpipe(1,"localize"),s.ɵɵelementEnd()}2&e&&s.ɵɵproperty("title",s.ɵɵpipeBind1(1,1,"modal.button.remove"))}function S(e,t){if(1&e&&(s.ɵɵelementStart(0,"tr"),s.ɵɵelementStart(1,"td"),s.ɵɵtext(2),s.ɵɵelementEnd(),s.ɵɵelementStart(3,"td",26),s.ɵɵtemplate(4,v,2,3,"a",27),s.ɵɵtemplate(5,b,2,3,"a",28),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=t.$implicit;s.ɵɵadvance(2),s.ɵɵtextInterpolate(n.label.localizedValue),s.ɵɵadvance(2),s.ɵɵproperty("ngIf",!n.isDefault&&"keyName"!==n.code),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!n.isDefault&&"keyName"!==n.code)}}function C(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"form",4,5),s.ɵɵlistener("ngSubmit",(function(){return s.ɵɵrestoreView(n),s.ɵɵreference(1).valid})),s.ɵɵelementStart(2,"div",6),s.ɵɵelementStart(3,"h1"),s.ɵɵelement(4,"localize",7),s.ɵɵtext(5),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(6,"fieldset"),s.ɵɵelementStart(7,"div"),s.ɵɵelementStart(8,"div",8),s.ɵɵelementStart(9,"label"),s.ɵɵelement(10,"localize",9),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(11,"div",10),s.ɵɵelementStart(12,"div",11),s.ɵɵelementStart(13,"table",12),s.ɵɵelementStart(14,"thead"),s.ɵɵelementStart(15,"tr"),s.ɵɵelementStart(16,"th"),s.ɵɵelement(17,"localize",13),s.ɵɵelementEnd(),s.ɵɵelementStart(18,"th",14),s.ɵɵelement(19,"localize",15),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(20,"tbody"),s.ɵɵtemplate(21,S,6,3,"tr",16),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(22,"div",17),s.ɵɵelement(23,"div",8),s.ɵɵelementStart(24,"div",18),s.ɵɵelementStart(25,"i",19),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext().defineAttributeModal()})),s.ɵɵelement(26,"localize",20),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementStart(27,"div",21),s.ɵɵelementStart(28,"div",22),s.ɵɵelementStart(29,"div",23),s.ɵɵelementStart(30,"button",24),s.ɵɵlistener("click",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext().close()})),s.ɵɵelement(31,"localize",25),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var i=s.ɵɵnextContext();s.ɵɵadvance(5),s.ɵɵtextInterpolate1(" ",i.geoObjectType.label.localizedValue,""),s.ɵɵadvance(16),s.ɵɵproperty("ngForOf",i.geoObjectType.attributes)}}var E=function(){function e(e,t,n,r,o,a){this.bsModalRef=e,this.confirmBsModalRef=t,this.modalService=n,this.localizeService=r,this.modalStepIndicatorService=o,this.registryService=a,this.attribute=null,this.geoObjectTypeChange=new i.EventEmitter,this.stateChange=new i.EventEmitter,this.message=null,this.modalStepConfig={steps:[{label:this.localizeService.decode("modal.step.indicator.manage.geoobjecttype"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.attributes"),active:!0,enabled:!0}]},this.modalState={state:l.GeoObjectTypeModalStates.manageAttributes,attribute:this.attribute,termOption:""}}return e.prototype.ngOnInit=function(){this.onDeleteAttribute=new r.Subject,this.modalStepIndicatorService.setStepConfig(this.modalStepConfig)},e.prototype.ngOnDestroy=function(){this.onDeleteAttribute.unsubscribe()},e.prototype.defineAttributeModal=function(){this.stateChange.emit({state:l.GeoObjectTypeModalStates.defineAttribute,attribute:"",termOption:""})},e.prototype.editAttribute=function(e,t){this.stateChange.emit({state:l.GeoObjectTypeModalStates.editAttribute,attribute:e,termOption:""})},e.prototype.removeAttributeType=function(e,t){var n=this;this.confirmBsModalRef=this.modalService.show(a.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.confirmBsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+"["+e.label.localizedValue+"]",this.confirmBsModalRef.content.data={attributeType:e,geoObjectType:this.geoObjectType},this.confirmBsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.confirmBsModalRef.content.type=o.ModalTypes.danger,this.confirmBsModalRef.content.onConfirm.subscribe((function(e){n.deleteAttributeType(e.geoObjectType.code,e.attributeType)}))},e.prototype.deleteAttributeType=function(e,t){var n=this;this.registryService.deleteAttributeType(e,t.code).then((function(e){n.onDeleteAttribute.next(e),e&&n.geoObjectType.attributes.splice(n.geoObjectType.attributes.indexOf(t),1),n.geoObjectTypeChange.emit(n.geoObjectType)})).catch((function(e){n.error(e)}))},e.prototype.close=function(){this.stateChange.emit({state:l.GeoObjectTypeModalStates.manageGeoObjectType,attribute:this.attribute,termOption:""})},e.prototype.error=function(e){this.message=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(c.BsModalRef),s.ɵɵdirectiveInject(c.BsModalRef),s.ɵɵdirectiveInject(c.BsModalService),s.ɵɵdirectiveInject(d.LocalizationService),s.ɵɵdirectiveInject(d.ModalStepIndicatorService),s.ɵɵdirectiveInject(p.RegistryService))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["manage-attributes-modal"]],inputs:{geoObjectType:"geoObjectType",attribute:"attribute"},outputs:{geoObjectTypeChange:"geoObjectTypeChange",stateChange:"stateChange"},decls:3,vars:2,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","modal-form",3,"ngSubmit",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,"heading"],["key","hierarchy.management.manage.attributes.title"],[1,"label-holder"],["key","hierarchy.management.manage.attributes.label.displayAttributes"],[1,"holder","dataset-attr-holder"],[1,"table-responsive"],[1,"table"],["key","data.property.label.label"],[1,"button-column-header"],["key","data.property.label.actions"],[4,"ngFor","ngForOf"],[1,"row-holder"],[1,"holder"],["aria-hidden","true",1,"fa","fa-plus","clickable",2,"font-size","20px","margin","10px 0 10px 0",3,"click"],["key","modal.button.add"],[1,"row"],[1,"col-md-12"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.back"],[1,"button-column"],["class","fa fa-pencil ico-edit",3,"routerLink","title","click",4,"ngIf"],["class","fa fa-trash-o ico-remove",3,"routerLink","title","click",4,"ngIf"],[1,"fa","fa-pencil","ico-edit",3,"routerLink","title","click"],[1,"fa","fa-trash-o","ico-remove",3,"routerLink","title","click"]],template:function(e,t){1&e&&(s.ɵɵelementStart(0,"div",0),s.ɵɵtemplate(1,y,2,1,"div",1),s.ɵɵtemplate(2,C,32,2,"form",2),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(1),s.ɵɵproperty("ngIf",null!=t.message),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",t.geoObjectType))},directives:[u.NgIf,m.ɵangular_packages_forms_forms_ba,m.NgControlStatusGroup,m.NgForm,g.LocalizeComponent,u.NgForOf,h.RouterLinkWithHref],pipes:[f.LocalizePipe],styles:["li.list-group-item[_ngcontent-%COMP%] {\n    font-size: inherit;\n    color: grey;\n}\n\n.button-column[_ngcontent-%COMP%] {\n    text-align: right;\n}\n.button-column[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    font-size: 25px;\n    \n}\n\n\n.button-column[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    font-size: inherit;\n}\n\n\nth.button-column-header[_ngcontent-%COMP%]{\n    text-align: right;\n}"]}),e}();t.ManageAttributesModalComponent=E,("undefined"==typeof ngDevMode||ngDevMode)&&s.ɵsetClassMetadata(E,[{type:i.Component,args:[{selector:"manage-attributes-modal",templateUrl:"./manage-attributes-modal.component.html",styleUrls:["./manage-attributes-modal.css"]}]}],(function(){return[{type:c.BsModalRef},{type:c.BsModalRef},{type:c.BsModalService},{type:d.LocalizationService},{type:d.ModalStepIndicatorService},{type:p.RegistryService}]}),{geoObjectType:[{type:i.Input}],attribute:[{type:i.Input}],geoObjectTypeChange:[{type:i.Output}],stateChange:[{type:i.Output}]})},1149:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.HierarchyCREditor=void 0;var o=n(1097),a=n(378),l=n(1023),s=n(858),c=n(544),d=function(e){function t(t,n,i,r,o){var a=e.call(this,t,n,i)||this;return a.existRangeStale=!1,a.hierarchyEntry=r,a.hierarchyOverTime=o,null!=a.hierarchyEntry&&(a.hierarchyEntry.loading={}),a}return r(t,e),t.prototype.getGeoObjectTimeRangeStorage=function(){return this.hierarchyEntry},t.prototype.getValueFromGeoObjectForDiff=function(){var e=null==this.hierarchyEntry?null:this.hierarchyEntry.parents[this.hierarchyOverTime.types[this.hierarchyOverTime.types.length-1].code].geoObject;return null==e?null:e.properties.type+"_~VST~_"+e.properties.code},t.prototype.onChange=function(t){t!==c.ChangeType.END_DATE&&t!==c.ChangeType.START_DATE||(this.existRangeStale=!0),e.prototype.onChange.call(this,t)},t.prototype.validate=function(){var t=this;if(e.prototype.validate.call(this),this._isValid&&null!=this.hierarchyEntry){for(var n=this.changeRequestAttributeEditor.changeRequestEditor.dateService.invalidParent,i=this.changeRequestAttributeEditor.changeRequestEditor.dateService.parentDoesNotExist,r=this.changeRequestAttributeEditor.changeRequestEditor.registryService,o=this.hierarchyOverTime.types.length,a=function(e){var o=l.hierarchyOverTime.types[e];if(Object.prototype.hasOwnProperty.call(l.hierarchyEntry.parents,o.code)&&l.hierarchyEntry.parents[o.code].geoObject){var a=l.hierarchyEntry.parents[o.code].geoObject;l.existRangeStale?r.doesGeoObjectExistAtRange(l.startDate,l.endDate,o.code,a.properties.code).then((function(e){a.properties.invalid=e.invalid,a.properties.exists=e.exists,t.conflictMessages.delete(n),t.conflictMessages.delete(i),a.properties.invalid&&(t._isValid=!1,t.conflictMessages.add(n)),a.properties.exists||(t._isValid=!1,t.conflictMessages.add(i))})).catch((function(e){console.log(e)})):(a.properties.invalid&&(l._isValid=!1,l.conflictMessages.add(n)),a.properties.exists||(l._isValid=!1,l.conflictMessages.add(i)))}},l=this,s=o-1;s>=0;--s)a(s);this.existRangeStale=!1}return this._isValid},t.prototype.validateUpdateReference=function(){},t.prototype.setParentValue=function(e,t){if(null==this.diff||"DELETE"!==this.diff.action){var n=null;if(null!=e&&(n=t[e.code].geoObject),"UpdateAttributeAction"===this.action.actionType){if(null==this.diff)if(null==this.hierarchyEntry)this.diff=new l.ValueOverTimeDiff,this.diff.oid=s.v4(),this.diff.action="CREATE",this.action.attributeDiff.hierarchyCode=this.hierarchyOverTime.code,this.action.attributeDiff.valuesOverTime.push(this.diff);else{var i=this.getLowestLevelFromHierarchyEntry(this.hierarchyEntry.parents).geoObject,r=null==i?null:i.properties.type+"_~VST~_"+i.properties.code;if(null==i&&null==n||null!=i&&null!=n&&i.properties.code===n.properties.code)return;this.diff=new l.ValueOverTimeDiff,this.diff.action="UPDATE",this.diff.oid=this.hierarchyEntry.oid,this.diff.oldValue=r,this.diff.oldParents=JSON.parse(JSON.stringify(this.hierarchyEntry.parents)),this.diff.oldStartDate=this.hierarchyEntry.startDate,this.diff.oldEndDate=this.hierarchyEntry.endDate,this.action.attributeDiff.hierarchyCode=this.hierarchyOverTime.code,this.action.attributeDiff.valuesOverTime.push(this.diff)}var o=null;null!=n&&(o=n.properties.type+"_~VST~_"+n.properties.code),o===this.diff.oldValue?delete this.diff.newValue:this.diff.newValue=o,this.diff.parents=t,this.removeEmptyDiff()}else"CreateGeoObjectAction"===this.action.actionType&&(this.hierarchyEntry.parents=t);this.onChange(c.ChangeType.VALUE)}},t.prototype.getLowestLevelFromHierarchyEntry=function(e){for(var t=this.hierarchyOverTime.types.length-1;t>=0;--t){var n=this.hierarchyOverTime.types[t];if(Object.prototype.hasOwnProperty.call(e,n.code)&&e[n.code].geoObject)return e[n.code]}return null},Object.defineProperty(t.prototype,"value",{get:function(){return null!=this.diff&&void 0!==this.diff.parents?this.diff:null!=this.hierarchyEntry?this.hierarchyEntry:null},set:function(e){throw new Error("Invoke setParentValue instead")},enumerable:!1,configurable:!0}),t.prototype.removeType=function(e){var t=JSON.parse(JSON.stringify(this.value.parents));t[e.code]={text:"",geoObject:null};for(var n=this.value,i=this.hierarchyOverTime.types.length-1;i>=0;--i){var r=this.hierarchyOverTime.types[i];if(Object.prototype.hasOwnProperty.call(n.parents,r.code)&&n.parents[r.code].geoObject)return void this.setParentValue(r,t)}this.setParentValue(null,t)},t.prototype.createEmptyHierarchyEntry=function(){var e=new a.HierarchyOverTimeEntry;if(e.loading={},e.oid=s.v4(),e.parents={},this.hierarchyOverTime)for(var t=0;t<this.hierarchyOverTime.types.length;t++){var n=this.hierarchyOverTime.types[t];e.parents[n.code]={text:"",geoObject:null},e.loading={}}return e},t.prototype.remove=function(){var e=this;if("UpdateAttributeAction"===this.action.actionType)if(null!=this.diff&&"CREATE"===this.diff.action){var t=this.action;(r=t.attributeDiff.valuesOverTime.findIndex((function(t){return t.oid===e.diff.oid})))>-1&&t.attributeDiff.valuesOverTime.splice(r,1)}else{if(null!=this.diff)return delete this.diff.newValue,delete this.diff.newStartDate,delete this.diff.newEndDate,this.removeEmptyDiff(),void this.onChange(c.ChangeType.REMOVE);if(null!=this.hierarchyEntry&&null==this.diff){var n=this.getLowestLevelFromHierarchyEntry(this.hierarchyEntry.parents).geoObject,i=null==n?null:n.properties.type+"_~VST~_"+n.properties.code;this.diff=new l.ValueOverTimeDiff,this.diff.action="DELETE",this.diff.oid=this.hierarchyEntry.oid,this.diff.oldValue=i,this.diff.oldStartDate=this.hierarchyEntry.startDate,this.diff.oldEndDate=this.hierarchyEntry.endDate,this.action.attributeDiff.valuesOverTime.push(this.diff),this.action.attributeDiff.hierarchyCode=this.hierarchyOverTime.code}}else if("CreateGeoObjectAction"===this.action.actionType){var r;-1!==(r=this.hierarchyOverTime.entries.findIndex((function(t){return t.oid===e.hierarchyEntry.oid})))&&this.hierarchyOverTime.entries.splice(r,1)}this.onChange(c.ChangeType.REMOVE)},t}(o.ValueOverTimeCREditor);t.HierarchyCREditor=d},1150:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardAttributeCRModel=void 0;var i=n(1023),r=n(544),o=function(){function e(e,t,n){this._isValid=!0,this.attribute=e,this.geoObject=t,this.changeRequest=n,this.initialize()}return e.prototype.initialize=function(){var e=this,t=this.changeRequest.actions;"CreateGeoObject"===this.changeRequest.type?t.length>0&&t[0].actionType===r.ActionTypes.CREATEGEOOBJECTACTION&&(this.editAction=t[0]):(t.forEach((function(t){if(t.actionType===r.ActionTypes.UPDATEATTRIBUTETACTION){var n=t;e.attribute.code===n.attributeName&&(e.editAction=t)}})),null==this.editAction&&(this.editAction=new i.UpdateAttributeAction(this.attribute.code)));for(var n=this.changeRequest.actions.length,o=0;o<n;++o){var a=t[o];if(a.actionType===r.ActionTypes.UPDATEATTRIBUTETACTION){var l=a;this.attribute.code===l.attributeName&&(this.diff=l.attributeDiff)}else a.actionType===r.ActionTypes.CREATEGEOOBJECTACTION||console.log("Unexpected action : "+a.actionType,a)}},e.prototype.hasChanges=function(){return null!=this.diff},e.prototype.isValid=function(){return this._isValid},e.prototype.validate=function(){return this._isValid},Object.defineProperty(e.prototype,"value",{get:function(){return"CreateGeoObject"===this.changeRequest.type?this.geoObject.attributes[this.attribute.code]:null!=this.diff?this.diff.newValue:this.geoObject.attributes[this.attribute.code]},set:function(e){var t=this;if("CreateGeoObject"===this.changeRequest.type)this.geoObject.attributes[this.attribute.code]=e;else if(null!=this.diff)if(this.areValuesEqual(this.diff.oldValue,e)){delete this.editAction.attributeDiff,this.diff=null;var n=this.changeRequest.actions.findIndex((function(e){return e===t.editAction}));-1!==n&&this.changeRequest.actions.splice(n,1)}else this.diff.newValue=e;else this.diff={oldValue:this.geoObject.attributes[this.attribute.code],newValue:e},this.editAction.attributeDiff=this.diff,this.changeRequest.actions.push(this.editAction)},enumerable:!1,configurable:!0}),e.prototype.areValuesEqual=function(e,t){return"boolean"===this.attribute.type?e===t:""===e&&null==t||""===t&&null==e||(!e&&!t||!(!e&&t||!t&&e)&&e===t)},e}();t.StandardAttributeCRModel=o},1151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VersionDiffView=void 0;var i=n(1023),r=n(291),o=function(){function e(e,t){var n=this;this.objectLayer=null,this.editingLayer=null,this.oldLayer=null,this.component=e,this.editor=t,this.populate(t),this.editor.onChangeSubject.subscribe((function(){n.populate(n.editor)}))}return e.prototype.populate=function(e){if("local"===this.component.attributeType.type&&null!=this._value&&null!=this.editor.value)r.LocalizedValue.populate(this._value,this.editor.value);else if("_PARENT_"===this.component.attributeType.code&&null!=this._value&&null!=this.editor.value&&null!=this.editor.value.parents)for(var t=0;t<this.component.hierarchy.types.length;t++){var n=this.component.hierarchy.types[t];this._value.parents[n.code].text=this.editor.value.parents[n.code].text,this._value.parents[n.code].geoObject=this.editor.value.parents[n.code].geoObject}else"_PARENT_"===this.component.attributeType.code?this._value=JSON.parse(JSON.stringify(this.editor.value)):this._value=this.convertValueForDisplay(null==this.editor.value?null:JSON.parse(JSON.stringify(this.editor.value)));"_PARENT_"===this.component.attributeType.code&&(this._value.loading={}),this.calculateSummaryKey()},Object.defineProperty(e.prototype,"oid",{get:function(){return this.editor.oid},set:function(e){this.editor.oid=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startDate",{get:function(){return null!=this.editor.diff&&"DELETE"===this.editor.diff.action?this.editor.oldStartDate:this.editor.startDate},set:function(e){this.editor.startDate=e,this.calculateSummaryKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldStartDate",{get:function(){return null!=this.editor.diff&&"DELETE"===this.editor.diff.action?null:null!=this.editor.diff&&null!=this.editor.diff.newStartDate&&void 0!==this.editor.oldStartDate?this.convertDateForDisplay(this.editor.oldStartDate):null},set:function(e){this.editor.oldStartDate=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endDate",{get:function(){return null!=this.editor.diff&&"DELETE"===this.editor.diff.action?this.editor.oldEndDate:this.editor.endDate},set:function(e){this.editor.endDate=e,this.calculateSummaryKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldEndDate",{get:function(){return null!=this.editor.diff&&"DELETE"===this.editor.diff.action?null:null!=this.editor.diff&&null!=this.editor.diff.newEndDate&&void 0!==this.editor.oldEndDate?this.convertDateForDisplay(this.editor.oldEndDate):null},set:function(e){this.editor.oldEndDate=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this.editor.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldValue",{get:function(){return null!=this.editor.diff&&"DELETE"===this.editor.diff.action?null:null!=this.editor.diff&&null!=this.editor.diff.newValue&&void 0!==this.editor.oldValue?this.convertOldValueForDisplay(this.editor.oldValue):null},set:function(e){this.editor.oldValue=e},enumerable:!1,configurable:!0}),e.prototype.convertDateForDisplay=function(e){return null==e||0===e.length?null:this.component.dateService.formatDateForDisplay(e)},e.prototype.convertOldValueForDisplay=function(e){if("date"===this.component.attributeType.type)return this.component.dateService.formatDateForDisplay(new Date(e));if("_PARENT_"===this.component.attributeType.code&&e.includes("_~VST~_"))return e.split("_~VST~_")[1];if("term"===this.component.attributeType.type){var t=e;t instanceof Array&&(t=e[0]);var n=this.component.attributeType.rootTerm.children,i=n.findIndex((function(e){return e.code===t}));return-1!==i?n[i].label.localizedValue:e}return"classification"===this.component.attributeType.type?e.label.localizedValue:e},e.prototype.convertValueForDisplay=function(e){return null==e?null:e},e.prototype.calculateSummaryKey=function(){if(null!=this.editor.diff)if("CREATE"!==this.editor.diff.action)if("DELETE"!==this.editor.diff.action){var e=null!=this.editor.diff.newStartDate||null!=this.editor.diff.newEndDate,t=Object.prototype.hasOwnProperty.call(this.editor.diff,"newValue");this.summaryKey=e&&t?i.SummaryKey.UPDATE:e?i.SummaryKey.TIME_CHANGE:t?i.SummaryKey.VALUE_CHANGE:i.SummaryKey.UNMODIFIED}else this.summaryKey=i.SummaryKey.DELETE;else this.summaryKey=i.SummaryKey.NEW;else this.summaryKey=i.SummaryKey.UNMODIFIED},Object.defineProperty(e.prototype,"summaryKey",{get:function(){return this.summaryKeyData},set:function(e){this.summaryKeyData=e,this.localizeSummaryKey()},enumerable:!1,configurable:!0}),e.prototype.localizeSummaryKey=function(){this.summaryKeyLocalized=this.component.lService.decode("changeovertime.manageVersions.summaryKey."+this.summaryKeyData)},e.prototype.conflictMessagesHasSeverity=function(e){var t=!1;return this.editor.conflictMessages.forEach((function(n){n.severity===e&&(t=!0)})),t},e.prototype.hasError=function(){return this.editor.conflictMessages&&this.editor.conflictMessages.size>0&&this.conflictMessagesHasSeverity("ERROR")},e.prototype.hasWarning=function(){return!this.hasError()&&this.editor.conflictMessages&&this.editor.conflictMessages.size>0&&this.conflictMessagesHasSeverity("WARNING")},e.prototype.destroy=function(e){var t=[];null!=this.editingLayer&&(t.push(this.editingLayer.getId()),this.editingLayer=null),null!=this.oldLayer&&(t.push(this.oldLayer.getId()),this.oldLayer=null),e.geomService.removeLayers(t)},e}();t.VersionDiffView=o},1152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateUpdateGeoObjectDetailComponent=void 0;var i=n(0),r=(n(56),n(1015),n(25),n(193)),o=n(0),a=n(1015),l=n(56),s=n(25),c=n(88),d=n(18),p=n(1),u=n(1037),m=["attributeEditor"],g=["geometryEditor"],h=function(e){return[e]},f=function(e,t){return{geoObject:e,actions:t}};function y(e,t){if(1&e&&o.ɵɵelement(0,"geoobject-shared-attribute-editor",16,17),2&e){var n=o.ɵɵnextContext();o.ɵɵproperty("readOnly",n.readOnly)("geoObjectType",n.geoObjectType)("geoObjectData",o.ɵɵpureFunction2(8,f,n.postGeoObject,o.ɵɵpureFunction1(6,h,n.action)))("forDate",n.forDate)("readOnly",!1)("isGeometryInlined",!0)}}function v(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"button",18),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().startEdit()})),o.ɵɵelement(1,"localize",19),o.ɵɵelementEnd()}}function b(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"button",20),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().endEdit()})),o.ɵɵelement(1,"localize",21),o.ɵɵelementEnd()}}function S(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"button",18),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().applyAction()})),o.ɵɵelement(1,"localize",22),o.ɵɵelementEnd()}}var C=function(){function e(e,t,n,i){this.changeRequestService=e,this.modalService=t,this.registryService=n,this.authService=i,this.isMaintainer=!1,this.preGeoObject=null,this.postGeoObject=null,this.geoObjectType=null,this.isEditing=!1,this.dateStr=null,this.forDate=null,this.isMaintainer=i.isAdmin()||i.isMaintainer(),this.forDate=new Date;var r=this.forDate.getUTCDate();this.dateStr=this.forDate.getUTCFullYear()+"-"+(this.forDate.getUTCMonth()+1)+"-"+(r<10?"0":"")+r}return e.prototype.ngOnInit=function(){this.postGeoObject=this.action.geoObjectJson,this.geoObjectType=this.action.geoObjectType,this.isNew()&&(this.preGeoObject=this.postGeoObject),this.onSelect(this.action)},e.prototype.isNew=function(){return"net.geoprism.registry.action.geoobject.CreateGeoObjectAction"===this.action.actionType},e.prototype.handleDateChange=function(){this.forDate=new Date(Date.parse(this.dateStr))},e.prototype.applyAction=function(){var e=this.action;e.geoObjectJson=this.attributeEditor.getGeoObject(),null!=this.geometryEditor&&(e.geoObjectJson.geometry=this.geometryEditor.saveDraw().geometry)},e.prototype.onSelect=function(e){var t=this;"net.geoprism.registry.action.geoobject.UpdateGeoObjectAction"===this.action.actionType&&this.registryService.getGeoObjectOverTime(this.postGeoObject.attributes.code,this.geoObjectType.code).then((function(e){t.preGeoObject=e})).catch((function(e){t.error(e)}))},e.prototype.startEdit=function(){},e.prototype.endEdit=function(){},e.prototype.getUsername=function(){return this.authService.getUsername()},e.prototype.error=function(e){this.bsModalRef=r.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.ChangeRequestService),o.ɵɵdirectiveInject(l.BsModalService),o.ɵɵdirectiveInject(a.RegistryService),o.ɵɵdirectiveInject(s.AuthService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["crtable-detail-create-geo-object"]],viewQuery:function(e,t){if(1&e&&(o.ɵɵviewQuery(m,1),o.ɵɵviewQuery(g,1)),2&e){var n=void 0;o.ɵɵqueryRefresh(n=o.ɵɵloadQuery())&&(t.attributeEditor=n.first),o.ɵɵqueryRefresh(n=o.ɵɵloadQuery())&&(t.geometryEditor=n.first)}},inputs:{action:"action",readOnly:"readOnly"},decls:22,vars:9,consts:[[1,"crtable-detail-container"],[1,"heading","text-center"],[1,"action-detail-header"],[1,"detail-content"],["key","io.geoObjectType"],[2,"margin","20px 0"],[2,"margin-right","10px"],["key","changeOverTime.forDate"],["type","date","name","dateStr",3,"ngModel","ngModelChange","change"],[3,"readOnly","geoObjectType","geoObjectData","forDate","isGeometryInlined",4,"ngIf"],[1,"detail-label"],["key","change.request.action.detail.contributorNotes"],[1,"detail-value",2,"width","100%","border-radius","8px","height","70px",3,"ngModel","disabled","ngModelChange"],[1,"button-holder","text-right",2,"margin","40px 0 20px 0"],["class","btn btn-primary detail-accept",3,"click",4,"ngIf"],["class","btn btn-default detail-reject",3,"click",4,"ngIf"],[3,"readOnly","geoObjectType","geoObjectData","forDate","isGeometryInlined"],["attributeEditor",""],[1,"btn","btn-primary","detail-accept",3,"click"],["key","modal.button.edit"],[1,"btn","btn-default","detail-reject",3,"click"],["key","modal.button.cancel"],["key","modal.button.submit"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelementStart(1,"div",1),o.ɵɵelementStart(2,"h1",2),o.ɵɵtext(3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"div",3),o.ɵɵelementStart(5,"h4"),o.ɵɵelement(6,"localize",4),o.ɵɵtext(7),o.ɵɵelementEnd(),o.ɵɵelementStart(8,"div",5),o.ɵɵelementStart(9,"span",6),o.ɵɵelement(10,"localize",7),o.ɵɵelementEnd(),o.ɵɵelementStart(11,"input",8),o.ɵɵlistener("ngModelChange",(function(e){return t.dateStr=e}))("change",(function(){return t.handleDateChange()})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵtemplate(12,y,2,11,"geoobject-shared-attribute-editor",9),o.ɵɵelementStart(13,"div"),o.ɵɵelementStart(14,"label",10),o.ɵɵelement(15,"localize",11),o.ɵɵtext(16," : "),o.ɵɵelementEnd(),o.ɵɵelementStart(17,"textarea",12),o.ɵɵlistener("ngModelChange",(function(e){return t.action.contributorNotes=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(18,"div",13),o.ɵɵtemplate(19,v,2,0,"button",14),o.ɵɵtemplate(20,b,2,0,"button",15),o.ɵɵtemplate(21,S,2,0,"button",14),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(3),o.ɵɵtextInterpolate(t.action.actionLabel),o.ɵɵadvance(4),o.ɵɵtextInterpolate1(": ",t.action.geoObjectType.code," "),o.ɵɵadvance(4),o.ɵɵproperty("ngModel",t.dateStr),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.action),o.ɵɵadvance(5),o.ɵɵproperty("ngModel",t.action.contributorNotes)("disabled",!t.isEditing),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",!t.readOnly&&!t.isEditing),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",!t.readOnly&&t.isEditing),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",!t.readOnly&&t.isEditing))},directives:[c.LocalizeComponent,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,p.NgIf,u.GeoObjectSharedAttributeEditorComponent],styles:["/* \n   WARNING viewencapsulation on the detail.component.tx was set to none to set these css\n   values to be globally scoped \n*/\n.crtable-detail-container .modal-form .label-holder {\n    display: none;\n}\n\n.crtable-detail-container .modal-form .holder {\n    border-left: 0;\n    width: 100%;\n    padding: 0;\n}\n\n.crtable-detail-container .modal-form .holder .panel .panel-body {\n    padding: 0;\n}"],encapsulation:2}),e}();t.CreateUpdateGeoObjectDetailComponent=C,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(C,[{type:i.Component,args:[{selector:"crtable-detail-create-geo-object",templateUrl:"./detail.component.html",styleUrls:["./crtable-detail-create-geo-object.css"],encapsulation:i.ViewEncapsulation.None}]}],(function(){return[{type:a.ChangeRequestService},{type:l.BsModalService},{type:a.RegistryService},{type:s.AuthService}]}),{action:[{type:i.Input}],readOnly:[{type:i.Input}],attributeEditor:[{type:i.ViewChild,args:["attributeEditor"]}],geometryEditor:[{type:i.ViewChild,args:["geometryEditor"]}]})},1153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StabilityPeriodComponent=void 0;var i=n(0),r=n(2),o=(n(25),n(194),n(1096)),a=(n(1041),n(1037),n(544)),l=n(0),s=n(25),c=n(194),d=n(1),p=n(88);function u(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"a",15),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext(2).setActiveTimelineEntry(null)})),l.ɵɵtext(1,"("),l.ɵɵelement(2,"localize",16),l.ɵɵtext(3,")"),l.ɵɵelementEnd()}}function m(e,t){1&e&&(l.ɵɵelementStart(0,"div",17),l.ɵɵelement(1,"localize",18),l.ɵɵelementEnd()),2&e&&l.ɵɵproperty("@fadeInOut",void 0)}function g(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"a",15),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=l.ɵɵnextContext(2);return e.setActiveTimelineEntry(e.forDateEntry)})),l.ɵɵtext(1,"("),l.ɵɵelement(2,"localize",19),l.ɵɵtext(3,")"),l.ɵɵelementEnd()}}function h(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"a",15),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=l.ɵɵnextContext(2);return e.setActiveTimelineEntry(e.forDateEntry)})),l.ɵɵtext(1,"("),l.ɵɵelement(2,"localize",20),l.ɵɵtext(3,")"),l.ɵɵelementEnd()}}function f(e,t){1&e&&(l.ɵɵelementStart(0,"span",21),l.ɵɵtext(1," ("),l.ɵɵelement(2,"localize",22),l.ɵɵtext(3,") "),l.ɵɵelementEnd())}function y(e,t){if(1&e&&(l.ɵɵelementContainerStart(0),l.ɵɵtext(1),l.ɵɵelementContainerEnd()),2&e){var n=l.ɵɵnextContext(2);l.ɵɵadvance(1),l.ɵɵtextInterpolate2(" ",n.activeEntry.period.startDate," - ",n.dateService.formatDateForDisplay(n.activeEntry.period.endDate)," ")}}function v(e,t){if(1&e&&(l.ɵɵelementContainerStart(0),l.ɵɵtext(1),l.ɵɵelementContainerEnd()),2&e){var n=l.ɵɵnextContext(2);l.ɵɵadvance(1),l.ɵɵtextInterpolate2(" ",n.dataTimeSpan.displayStartDate," - ",n.dataTimeSpan.displayEndDate," ")}}var b=function(e,t){return{"active-timeline-entry":e,"not-clickable":t}},S=function(e,t){return{width:e,left:t}};function C(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"a",25),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=t.$implicit;return l.ɵɵnextContext(3).setActiveTimelineEntry(e)})),l.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=l.ɵɵnextContext(3);l.ɵɵproperty("ngClass",l.ɵɵpureFunction2(2,b,null==r.activeEntry||null!=r.activeEntry&&i.period.startDate===r.activeEntry.period.startDate,r.periods.length<=1))("ngStyle",l.ɵɵpureFunction2(5,S,i.width+"%",i.x+"%"))}}function E(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",23),l.ɵɵtemplate(1,C,1,8,"a",24),l.ɵɵelementEnd()),2&e){var n=t.$implicit;l.ɵɵadvance(1),l.ɵɵproperty("ngForOf",n)}}function x(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",1),l.ɵɵelementStart(1,"span",2),l.ɵɵelement(2,"localize",3),l.ɵɵelementStart(3,"span"),l.ɵɵtemplate(4,u,4,0,"a",4),l.ɵɵtemplate(5,m,2,1,"div",5),l.ɵɵtemplate(6,g,4,0,"a",4),l.ɵɵtemplate(7,h,4,0,"a",4),l.ɵɵtemplate(8,f,4,0,"span",6),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(9,"span",7),l.ɵɵtemplate(10,y,2,2,"ng-container",8),l.ɵɵtemplate(11,v,2,2,"ng-container",8),l.ɵɵelementEnd(),l.ɵɵelementStart(12,"div",9),l.ɵɵtemplate(13,E,2,1,"div",10),l.ɵɵelementStart(14,"div",11),l.ɵɵelementStart(15,"a",12),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().navigateRelative(-1)})),l.ɵɵelement(16,"i",13),l.ɵɵelementEnd(),l.ɵɵelementStart(17,"a",12),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().navigateRelative(1)})),l.ɵɵelement(18,"i",14),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var i=l.ɵɵnextContext();l.ɵɵadvance(4),l.ɵɵproperty("ngIf",i.activeEntry),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",i._showHint),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",!i.activeEntry&&i.forDate&&"LIST"===i.context),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",!i.activeEntry&&i.forDate&&"EXPLORER"===i.context),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",!i.activeEntry&&!i.forDate),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",i.activeEntry),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",!i.activeEntry),l.ɵɵadvance(2),l.ɵɵproperty("ngForOf",i.timelines)}}var O=function(){function e(e,t){this.lService=e,this.dateService=t,this.latestPeriodIsActive=!1,this.periods=[],this.activeEntry=null,this.forDateEntry=null,this.infinityDayPadding=15,this.dataTimeSpan=null,this._showHint=!1}return Object.defineProperty(e.prototype,"showHint",{set:function(e){var t=this;this._showHint=e,setTimeout((function(){t.showHint=!1}),1e4)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.generate(),this.changeRequestEditor.onChangeSubject.subscribe((function(t){t!==a.ChangeType.END_DATE&&t!==a.ChangeType.START_DATE||e.generate()}));var t=this.timelines[0];if(t&&t.length>1){if(null!=this.filterDate){var n=t.findIndex((function(t){return e.dateService.between(e.filterDate,t.period.startDate,t.period.endDate)}));-1!==n&&(this.activeEntry=t[n])}else this.latestPeriodIsActive&&this.setActiveTimelineEntry(t[t.length-1]);if(null!=this.forDate){var i=t.findIndex((function(t){return e.dateService.between(e.forDate,t.period.startDate,t.period.endDate)}));-1!==i&&(this.forDateEntry=t[i])}}},e.prototype.navigateRelative=function(e){var t=this,n=this.timelines[0];if(null!=n&&0!==n.length)if(null!=this.activeEntry){var i=n.findIndex((function(e){return e.period.startDate===t.activeEntry.period.startDate}));if(-1!==i){var r=i+e;r<0?r=n.length-1:r>=n.length&&(r=0),this.setActiveTimelineEntry(n[r])}}else this.setActiveTimelineEntry(n[0])},e.prototype.setActiveTimelineEntry=function(e,t){void 0===t&&(t=!0),this.periods.length<=1&&(e=null),this.activeEntry&&e&&e.period.startDate===this.activeEntry.period.startDate&&(e=null),this.activeEntry=e,this.sharedAttributeEditor.setFilterDate(null==e?null:e.period.startDate,t)},e.prototype.generate=function(){this.generatePeriods(),this.generateTimelines()},e.prototype.calculateDataTimeSpan=function(){var e=null,t=null,n=null,i=null;this.periods.length>0&&(e=this.periods[0].startDate,t=this.periods[this.periods.length-1].endDate,i=this.dateService.getDateFromDateString(e).getTime()/864e5,"5000-12-31"===t?this.periods.length>1?(n=this.dateService.getDateFromDateString(this.periods[this.periods.length-1].startDate).getTime()/864e5,this.infinityDayPadding=.05*(n-i),n=this.infinityDayPadding+n):n=i+this.infinityDayPadding:n=this.dateService.getDateFromDateString(t).getTime()/864e5),this.dataTimeSpan={startDay:i,startDate:e,displayStartDate:this.dateService.formatDateForDisplay(e),endDay:n,endDate:t,displayEndDate:this.dateService.formatDateForDisplay(t),span:n-i}},e.prototype.generateTimelines=function(){if(this.timelines=[],0!==this.periods.length){1===this.periods.length&&this.setActiveTimelineEntry(null,!1),this.calculateDataTimeSpan();var e=[];this.timelines.push(e);for(var t=this.dataTimeSpan.span,n=this.periods.length,i=0;i<n;++i){var r=this.periods[i],o=this.dateService.getDateFromDateString(r.startDate),a=this.dateService.getDateFromDateString(r.endDate),l=o.getTime()/864e5,s=a.getTime()/864e5;"5000-12-31"===r.endDate&&(s=l+this.infinityDayPadding);var c=s-l;if(t-c<0){var d=t,p={width:d/this.dataTimeSpan.span*100,x:(l-this.dataTimeSpan.startDay)/this.dataTimeSpan.span*100,period:r};e.push(p),e=[],this.timelines.push(e),t=this.dataTimeSpan.span;var u={width:(c-d)/this.dataTimeSpan.span*100,x:(l-this.dataTimeSpan.startDay)/this.dataTimeSpan.span*100,period:r};e.push(u)}else{var m={width:c/this.dataTimeSpan.span*100,x:(l-this.dataTimeSpan.startDay)/this.dataTimeSpan.span*100,period:r};e.push(m),0===(t-=c)&&(e=[],this.timelines.push(e),t=this.dataTimeSpan.span)}}}},e.prototype.generatePeriods=function(){for(var e=[],t=this.changeRequestEditor.getEditors(),n=t.length,i=0;i<n;++i)if(t[i]instanceof o.ChangeRequestChangeOverTimeAttributeEditor)for(var r=t[i].getEditors(),a=r.length,l=function(t){var n=r[t];if(null!=n.startDate&&null!=n.endDate&&!n.isDelete()){var i=e.findIndex((function(e){return n.startDate===e.date}));-1!==i?e[i].isStart=!0:e.push({date:n.startDate,isStart:!0,isEnd:!1});var o=e.findIndex((function(e){return n.endDate===e.date}));-1!==o?e[o].isEnd=!0:e.push({date:n.endDate,isStart:!1,isEnd:!0})}},s=0;s<a;++s)l(s);e.sort((function(e,t){return null==e.date||""===e.date?1:null==t.date||""===t.date?-1:new Date(e.date)-new Date(t.date)})),this.periods=[];var c=e.length;for(i=0;i<c;++i){var d=e[i],p=i+1>c?null:e[i+1];if(d.isStart&&d.isEnd&&this.periods.push({startDate:d.date,endDate:d.date}),!d.isEnd||null==p||!p.isStart||this.dateService.addDay(1,d.date)!==p.date){var u=d.isEnd?this.dateService.addDay(1,d.date):d.date;if(null!=p&&this.changeRequestEditor.existsAtDate(u)){var m=p.isStart?this.dateService.addDay(-1,p.date):p.date;this.periods.push({startDate:u,endDate:m})}}}this.dateService.sort(this.periods)},e.prototype.formatDate=function(e){return this.dateService.formatDateForDisplay(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.LocalizationService),l.ɵɵdirectiveInject(c.DateService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["stability-period"]],inputs:{changeRequestEditor:"changeRequestEditor",sharedAttributeEditor:"sharedAttributeEditor",filterDate:"filterDate",forDate:"forDate",context:"context",latestPeriodIsActive:"latestPeriodIsActive",showHint:"showHint"},decls:1,vars:1,consts:[["style","margin-bottom:10px;",4,"ngIf"],[2,"margin-bottom","10px"],[2,"margin-left","20px"],["key","manage.versions.historyTitle"],["class","view-all",3,"click",4,"ngIf"],["id","time-hint",4,"ngIf"],["class","view-all",4,"ngIf"],[2,"float","right","color","#6ba542","margin-right","20px"],[4,"ngIf"],[2,"padding","0 20px"],["class","timeline",4,"ngFor","ngForOf"],[1,"timeline-nav-btn-wrapper"],[3,"click"],[1,"fa","fa-chevron-left"],[1,"fa","fa-chevron-right"],[1,"view-all",3,"click"],["key","manage.versions.history.viewAll"],["id","time-hint"],["key","changeovertime.manageVersions.time.hint.message"],["key","manage.versions.history.viewListPeriod"],["key","manage.versions.history.viewExplorerPeriod"],[1,"view-all"],["key","manage.versions.history.viewingAll"],[1,"timeline"],["class","timeline-entry",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"timeline-entry",3,"ngClass","ngStyle","click"]],template:function(e,t){1&e&&l.ɵɵtemplate(0,x,19,8,"div",0),2&e&&l.ɵɵproperty("ngIf",t.dataTimeSpan)},directives:[d.NgIf,p.LocalizeComponent,d.NgForOf,d.NgClass,d.NgStyle],styles:['.timeline[_ngcontent-%COMP%] {\n\t  height: 50px;\n\t  width: 100%;\n\t  position:relative;\n\t  display: inline-block;\n\t  z-index: 99;\n}\n.timeline[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-child {\n    border-top-left-radius: 4px;\n    border-bottom-left-radius: 4px;\n}\n.timeline[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child {\n    border-top-right-radius: 4px;\n    border-bottom-right-radius: 4px;\n}\n\n.timeline-entry[_ngcontent-%COMP%] {\n\t  height: 50px;\n\t  border:1px solid lightgrey;\n\t  position: absolute;\n\t  display: inline-block;\n}\n\n.timeline-entry.not-clickable[_ngcontent-%COMP%] {\n\t  cursor: default;\n}\n\n.active-timeline-entry[_ngcontent-%COMP%] {\n\t  background-color:#EDF4E8;\n\t  border-color: #6ba542;\n}\n\n.timeline-nav-btn[_ngcontent-%COMP%] {\n\n}\n\n.timeline-nav-btn-wrapper[_ngcontent-%COMP%] {\n    top: 36px;\n    width: 100%;\n    position: absolute;\n    height: 20px;\n    right: 0;\n    left: 0;\n    padding: 0 15px;\n    z-index:0;\n}\n.timeline-nav-btn-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child {\n    float: right;\n}\n\n.navigation-controls[_ngcontent-%COMP%] {\n\t  width: 100%;\n\t  text-align:center;\n}\n\n.navigation-controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n\n\n\n\t  \n\t  \n\t  -webkit-touch-callout: none; \n    -webkit-user-select: none; \n     -khtml-user-select: none; \n       -moz-user-select: none; \n        -ms-user-select: none; \n            user-select: none; \n}\n\n.view-all[_ngcontent-%COMP%] {\n\t  margin-left: 5px;\n}\n\n#time-hint[_ngcontent-%COMP%] {\n    width: fit-content;\n    background: lightgrey;\n    padding: 5px;\n    margin-left: 70px;\n    position: absolute;\n    margin-top: 9px;\n    z-index: 999;\n    border-radius: 3px;\n}\n#time-hint[_ngcontent-%COMP%]:before {\n    content: "";\n    display: block;\n    position: absolute;\n    left: 15px;\n    top: -10px;\n    border-bottom: 10px solid lightgrey;\n    border-left: 10px solid transparent;\n    border-right: 10px solid transparent;\n}'],data:{animation:[[r.trigger("fadeInOut",[r.transition(":enter",[r.style({opacity:0}),r.animate("1000ms")]),r.transition(":leave",r.animate("1000ms",r.style({opacity:0})))])]]}}),e}();t.StabilityPeriodComponent=O,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(O,[{type:i.Component,args:[{selector:"stability-period",templateUrl:"./stability-period.component.html",styleUrls:["./stability-period.component.css"],animations:[[r.trigger("fadeInOut",[r.transition(":enter",[r.style({opacity:0}),r.animate("1000ms")]),r.transition(":leave",r.animate("1000ms",r.style({opacity:0})))])]]}]}],(function(){return[{type:s.LocalizationService},{type:c.DateService}]}),{changeRequestEditor:[{type:i.Input}],sharedAttributeEditor:[{type:i.Input}],filterDate:[{type:i.Input}],forDate:[{type:i.Input}],context:[{type:i.Input}],latestPeriodIsActive:[{type:i.Input}],showHint:[{type:i.Input}]})},1154:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardAttributeEditorComponent=void 0;var i=n(0),r=n(2),o=(n(378),n(1023)),a=n(544),l=(n(140),n(193)),s=(n(56),n(1015),n(1024),n(194),n(25),n(18)),c=(n(1041),n(0)),d=n(1015),p=n(25),u=n(194),m=n(140),g=n(1024),h=n(56),f=n(1),y=n(18),v=n(88),b=n(162);function S(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",7),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(2);c.ɵɵadvance(1),c.ɵɵtextInterpolate1(" ",n.view.summaryKeyLocalized," ")}}var C=function(e){return{"has-changed":e}};function E(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"div"),c.ɵɵelementStart(2,"label",8),c.ɵɵelementStart(3,"input",9),c.ɵɵlistener("change",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).onValueChange()}))("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).changeRequestAttributeEditor.value=e})),c.ɵɵelementEnd(),c.ɵɵelementStart(4,"span",10),c.ɵɵelement(5,"localize",11),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(6,"label",12),c.ɵɵelementStart(7,"input",9),c.ɵɵlistener("change",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).onValueChange()}))("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).changeRequestAttributeEditor.value=e})),c.ɵɵelementEnd(),c.ɵɵelementStart(8,"span",10),c.ɵɵelement(9,"localize",11),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var i=c.ɵɵnextContext(2);c.ɵɵadvance(3),c.ɵɵpropertyInterpolate1("id","mod-",i.geoObjectType.code,"-true"),c.ɵɵpropertyInterpolate1("name","mod-",i.geoObjectType.code,"-true"),c.ɵɵproperty("checked","invalid"===i.view.attributeCode?!1===i.view.value:!0===i.view.value)("value","invalid"!==i.view.attributeCode)("ngModel",i.changeRequestAttributeEditor.value)("disabled",i.readonly),c.ɵɵadvance(1),c.ɵɵproperty("ngClass",c.ɵɵpureFunction1(16,C,i.view.oldValue&&!i.isNew)),c.ɵɵadvance(1),c.ɵɵproperty("key","invalid"===i.view.attributeCode?"change.request.boolean.option.valid":"change.request.boolean.option.true"),c.ɵɵadvance(2),c.ɵɵpropertyInterpolate1("id","mod-",i.geoObjectType.code,"-false"),c.ɵɵpropertyInterpolate1("name","mod-",i.geoObjectType.code,"-false"),c.ɵɵproperty("checked","invalid"===i.view.attributeCode?!0===i.changeRequestAttributeEditor.value:!1===i.changeRequestAttributeEditor.value)("value","invalid"===i.view.attributeCode)("ngModel",i.changeRequestAttributeEditor.value)("disabled",i.readonly),c.ɵɵadvance(1),c.ɵɵproperty("ngClass",c.ɵɵpureFunction1(18,C,i.view.oldValue&&!i.isNew)),c.ɵɵadvance(1),c.ɵɵproperty("key","invalid"===i.view.attributeCode?"change.request.boolean.option.invalid":"change.request.boolean.option.false")}}function x(e,t){if(1&e&&(c.ɵɵelementStart(0,"span"),c.ɵɵelement(1,"localize",11),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(4);c.ɵɵadvance(1),c.ɵɵproperty("key","invalid"===n.view.attributeCode?"change.request.boolean.option.valid":"change.request.boolean.option.true")}}function O(e,t){if(1&e&&(c.ɵɵelementStart(0,"span"),c.ɵɵelement(1,"localize",11),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(4);c.ɵɵadvance(1),c.ɵɵproperty("key","invalid"===n.view.attributeCode?"change.request.boolean.option.invalid":"change.request.boolean.option.false")}}function I(e,t){if(1&e&&(c.ɵɵelementStart(0,"span"),c.ɵɵtemplate(1,x,2,1,"span",6),c.ɵɵtemplate(2,O,2,1,"span",6),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(3);c.ɵɵadvance(1),c.ɵɵproperty("ngIf","invalid"===n.view.attributeCode?!1===n.view.oldValue:!0===n.view.oldValue),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","invalid"===n.view.attributeCode?!0===n.view.oldValue:!1===n.view.oldValue)}}function M(e,t){if(1&e&&(c.ɵɵelementStart(0,"span"),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(3);c.ɵɵadvance(1),c.ɵɵtextInterpolate1(" ",n.view.oldValue," ")}}function w(e,t){if(1&e&&(c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"p",13),c.ɵɵelement(2,"localize",14),c.ɵɵtext(3,"  "),c.ɵɵtemplate(4,I,3,2,"span",6),c.ɵɵtemplate(5,M,2,1,"span",6),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(2);c.ɵɵadvance(4),c.ɵɵproperty("ngIf","boolean"===n.attributeType.type),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","boolean"!==n.attributeType.type)}}var T=function(e){return{warning:e}};function k(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",3),c.ɵɵtemplate(1,S,2,1,"div",4),c.ɵɵelementStart(2,"div",5),c.ɵɵtemplate(3,E,10,20,"div",6),c.ɵɵtemplate(4,w,6,2,"div",6),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵproperty("ngClass",c.ɵɵpureFunction1(4,T,n.view.summaryKey&&"UNMODIFIED"!==n.view.summaryKey)),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",n.view.summaryKey&&"UNMODIFIED"!==n.view.summaryKey),c.ɵɵadvance(2),c.ɵɵproperty("ngIf","boolean"===n.attributeType.type),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",null!==n.view.oldValue&&void 0!==n.view.oldValue&&!n.isNew)}}function P(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"button",16),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).onApprove()})),c.ɵɵpipe(2,"localize"),c.ɵɵelement(3,"localize",17),c.ɵɵelementEnd(),c.ɵɵelementStart(4,"button",18),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).onReject()})),c.ɵɵpipe(5,"localize"),c.ɵɵelement(6,"localize",19),c.ɵɵelementEnd(),c.ɵɵelementStart(7,"button",20),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).onPending()})),c.ɵɵpipe(8,"localize"),c.ɵɵelement(9,"localize",21),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var i=c.ɵɵnextContext(2);c.ɵɵadvance(1),c.ɵɵproperty("disabled","ACCEPTED"===i.changeRequestAttributeEditor.editAction.approvalStatus)("title",c.ɵɵpipeBind1(2,6,"change.request.action.accept.btn.hover")),c.ɵɵadvance(3),c.ɵɵproperty("disabled","REJECTED"===i.changeRequestAttributeEditor.editAction.approvalStatus)("title",c.ɵɵpipeBind1(5,8,"change.request.action.reject.btn.hover")),c.ɵɵadvance(3),c.ɵɵproperty("disabled","PENDING"===i.changeRequestAttributeEditor.editAction.approvalStatus)("title",c.ɵɵpipeBind1(8,10,"change.request.action.pending.btn.hover"))}}function j(e,t){1&e&&(c.ɵɵelementStart(0,"strong",24),c.ɵɵelement(1,"localize",25),c.ɵɵelementEnd())}function z(e,t){1&e&&(c.ɵɵelementStart(0,"strong",26),c.ɵɵelement(1,"localize",27),c.ɵɵelementEnd())}function D(e,t){if(1&e&&(c.ɵɵelementStart(0,"div"),c.ɵɵtemplate(1,j,2,0,"strong",22),c.ɵɵtemplate(2,z,2,0,"strong",23),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(2);c.ɵɵadvance(1),c.ɵɵproperty("ngIf","ACCEPTED"===n.changeRequestAttributeEditor.editAction.approvalStatus),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","REJECTED"===n.changeRequestAttributeEditor.editAction.approvalStatus)}}function R(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",15),c.ɵɵtemplate(1,P,10,12,"div",6),c.ɵɵtemplate(2,D,3,2,"div",6),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(1),c.ɵɵproperty("ngIf","PENDING"===n.changeRequest.approvalStatus&&n.changeRequest.permissions.includes("WRITE_APPROVAL_STATUS")&&n.changeRequestAttributeEditor.editAction&&n.changeRequestAttributeEditor.diff),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","PENDING"!==n.changeRequest.approvalStatus)}}var L=function(){function e(e,t,n,r,o,a,l,s,c){this.cdr=e,this.service=t,this.lService=n,this.changeDetectorRef=r,this.dateService=o,this.authService=a,this.requestService=l,this.modalService=s,this.elementRef=c,this.isNew=!1,this.message=null,this.isValid=!0,this.isValidChange=new i.EventEmitter,this.readonly=!1,this.isNewGeoObject=!1}return e.prototype.ngOnInit=function(){this.changeRequestAttributeEditor=this.changeRequestEditor.getEditorForAttribute(this.attributeType,null),this.calculateView()},e.prototype.ngAfterViewInit=function(){},e.prototype.calculateView=function(){var e=this.changeRequestAttributeEditor.diff;if(null!=e){var t=null==e.newValue?null:JSON.parse(JSON.stringify(e.newValue));this.view={value:t,summaryKey:o.SummaryKey.VALUE_CHANGE,summaryKeyLocalized:this.lService.decode("changeovertime.manageVersions.summaryKey."+o.SummaryKey.VALUE_CHANGE),attributeCode:this.changeRequestAttributeEditor.attribute.code},null!==e.oldValue&&void 0!==e.oldValue&&(this.view.oldValue=JSON.parse(JSON.stringify(e.oldValue)))}else this.view={value:this.changeRequestAttributeEditor.value,summaryKey:o.SummaryKey.UNMODIFIED,summaryKeyLocalized:this.lService.decode("changeovertime.manageVersions.summaryKey."+o.SummaryKey.UNMODIFIED),attributeCode:this.changeRequestAttributeEditor.attribute.code}},e.prototype.onValueChange=function(){this.calculateView()},e.prototype.onApprove=function(){var e=this,t=this.changeRequestAttributeEditor.editAction;this.requestService.setActionStatus(t.oid,a.GovernanceStatus.ACCEPTED).then((function(e){t.approvalStatus=a.GovernanceStatus.ACCEPTED})).catch((function(t){e.error(t)}))},e.prototype.onReject=function(){var e=this,t=this.changeRequestAttributeEditor.editAction;this.requestService.setActionStatus(t.oid,a.GovernanceStatus.REJECTED).then((function(e){t.approvalStatus=a.GovernanceStatus.REJECTED})).catch((function(t){e.error(t)}))},e.prototype.onPending=function(){var e=this,t=this.changeRequestAttributeEditor.editAction;this.requestService.setActionStatus(t.oid,a.GovernanceStatus.PENDING).then((function(e){t.approvalStatus=a.GovernanceStatus.PENDING})).catch((function(t){e.error(t)}))},e.prototype.error=function(e){this.bsModalRef=l.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(c.ɵɵdirectiveInject(c.ChangeDetectorRef),c.ɵɵdirectiveInject(d.RegistryService),c.ɵɵdirectiveInject(p.LocalizationService),c.ɵɵdirectiveInject(c.ChangeDetectorRef),c.ɵɵdirectiveInject(u.DateService),c.ɵɵdirectiveInject(m.AuthService),c.ɵɵdirectiveInject(g.ChangeRequestService),c.ɵɵdirectiveInject(h.BsModalService),c.ɵɵdirectiveInject(c.ElementRef))},e.ɵcmp=c.ɵɵdefineComponent({type:e,selectors:[["standard-attribute-editor"]],hostVars:1,hostBindings:function(e,t){2&e&&c.ɵɵsyntheticHostProperty("@fadeInOut",!0)},inputs:{isNew:"isNew",readonly:"readonly",attributeType:"attributeType",changeRequest:"changeRequest",geoObjectType:"geoObjectType",geoObject:"geoObject",isNewGeoObject:"isNewGeoObject",changeRequestEditor:"changeRequestEditor"},outputs:{isValidChange:"isValidChange"},features:[c.ɵɵProvidersFeature([],[{provide:s.ControlContainer,useExisting:s.NgForm}])],decls:4,vars:3,consts:[[1,"value-box"],["class","value-box-wrapper",3,"ngClass",4,"ngIf"],["class","cr-maintainer-options",4,"ngIf"],[1,"value-box-wrapper",3,"ngClass"],["class","value-box-indicator",4,"ngIf"],[1,"inner-value"],[4,"ngIf"],[1,"value-box-indicator"],[1,"radio","radio-inline",2,"padding-left","0"],["type","radio",1,"inline-radio-input",3,"checked","value","ngModel","id","name","disabled","change","ngModelChange"],[3,"ngClass"],[3,"key"],[1,"radio","radio-inline"],[1,"warning-text","display-current-value",2,"color","var(--theme-text-dark)"],["key","change.request.changed.value.prefix"],[1,"cr-maintainer-options"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","title","click"],["key","change.request.accept.btn"],["type","submit","role","button",1,"btn","btn-danger",3,"disabled","title","click"],["key","change.request.reject.btn"],["type","submit","role","button",1,"btn","btn-warning",3,"disabled","title","click"],["key","change.request.pending.btn"],["style","color:#6BA542;",4,"ngIf"],["style","color:#6d0400;",4,"ngIf"],[2,"color","#6BA542"],["key","change.request.status.accepted"],[2,"color","#6d0400"],["key","change.request.status.rejected"]],template:function(e,t){1&e&&(c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"div",0),c.ɵɵtemplate(2,k,5,6,"div",1),c.ɵɵelementEnd(),c.ɵɵtemplate(3,R,3,2,"div",2),c.ɵɵelementEnd()),2&e&&(c.ɵɵadvance(1),c.ɵɵproperty("@fadeInOut",void 0),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",t.view),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",t.changeRequest&&!t.changeRequest.isNew))},directives:[f.NgIf,f.NgClass,y.RadioControlValueAccessor,y.DefaultValueAccessor,y.NgControlStatus,y.NgModel,v.LocalizeComponent],pipes:[b.LocalizePipe],styles:[".cr-maintainer-options[_ngcontent-%COMP%] {\n\tpadding-top:15px;\n}\n\np.warning-text.display-current-value[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.value-box-wrapper[_ngcontent-%COMP%] {\n\tpadding-top: 0px;\n\tpadding-left: 0px;\n\tborder: solid 1px lightgrey;\n}\n.value-box-wrapper.warning[_ngcontent-%COMP%] {\n    background-color: inherit;\n    border-color: orange;\n    border-left: solid 5px orange;\n}\n\n.value-box[_ngcontent-%COMP%] {\n background-color: #f9f9f9;\n margin-top: 10px;\n}\n\n.value-box[_ngcontent-%COMP%]   .inner-value[_ngcontent-%COMP%] {\n\tpadding-left: 10px;\n}\n\n.value-box-wrapper[_ngcontent-%COMP%]   .value-box-indicator[_ngcontent-%COMP%] {\n\tposition: relative;\n\tbackground: grey;\n    color: white;\n    left: -1px;\n    font-size: 14px;\n    font-weight: bold;\n    padding: 0 6px;\n    width: fit-content;\n    top: -1px;\n}\n.value-box-wrapper.warning[_ngcontent-%COMP%]   .value-box-indicator[_ngcontent-%COMP%] {\n    background-color: orange;\n}\n\n.value-box-wrapper[_ngcontent-%COMP%]   .manage-version-button[_ngcontent-%COMP%] {\n    border: solid 1px lightgrey;\n}\n.value-box-wrapper.warning[_ngcontent-%COMP%]   .manage-version-button[_ngcontent-%COMP%] {\n border-color: orange;\n}\n\n.has-changed[_ngcontent-%COMP%] {\n\tcolor: orange;\n}"],data:{animation:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")]),r.transition(":leave",r.animate("500ms",r.style({opacity:0})))])]]}}),e}();t.StandardAttributeEditorComponent=L,("undefined"==typeof ngDevMode||ngDevMode)&&c.ɵsetClassMetadata(L,[{type:i.Component,args:[{selector:"standard-attribute-editor",templateUrl:"./standard-attribute-editor.component.html",styleUrls:["./standard-attribute-editor.component.css"],host:{"[@fadeInOut]":"true"},animations:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")]),r.transition(":leave",r.animate("500ms",r.style({opacity:0})))])]],viewProviders:[{provide:s.ControlContainer,useExisting:s.NgForm}]}]}],(function(){return[{type:c.ChangeDetectorRef},{type:d.RegistryService},{type:p.LocalizationService},{type:c.ChangeDetectorRef},{type:u.DateService},{type:m.AuthService},{type:g.ChangeRequestService},{type:h.BsModalService},{type:c.ElementRef}]}),{isNew:[{type:i.Input}],isValidChange:[{type:i.Output}],readonly:[{type:i.Input}],attributeType:[{type:i.Input}],changeRequest:[{type:i.Input}],geoObjectType:[{type:i.Input}],geoObject:[{type:i.Input}],isNewGeoObject:[{type:i.Input}],changeRequestEditor:[{type:i.Input}]})},1155:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleEditControl=void 0;var i=n(0),r=n(0),o=n(1),a=n(88),l=n(162),s=function(e,t){return{"fa-pencil-square-o":e,"fa-save":t}};function c(e,t){if(1&e&&(r.ɵɵelement(0,"button",3),r.ɵɵpipe(1,"localize")),2&e){var n=r.ɵɵnextContext();r.ɵɵproperty("ngClass",r.ɵɵpureFunction2(4,s,!n.save,n.save))("title",r.ɵɵpipeBind1(1,2,"changeovertime.manageVersions.button.label"))}}function d(e,t){1&e&&(r.ɵɵelementStart(0,"div",4),r.ɵɵelementStart(1,"div",5),r.ɵɵelement(2,"localize",6),r.ɵɵelementEnd(),r.ɵɵelement(3,"div",7),r.ɵɵelementEnd())}var p=function(){function e(e){this.editEmitter=new i.EventEmitter,this.visible=!0,this.editSessionEnabled=!1,this.save=!1,this.elRef=e}return e.prototype.onAdd=function(e){return this.elRef.nativeElement},e.prototype.onRemove=function(e){this.elRef.nativeElement.remove()},e.prototype.onClick=function(){this.editEmitter.emit()},e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(r.ElementRef))},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["simple-edit-control"]],inputs:{visible:"visible",editSessionEnabled:"editSessionEnabled",save:"save"},outputs:{editEmitter:"editEmitter"},decls:3,vars:2,consts:[[1,"mapboxgl-ctrl-group","mapboxgl-ctrl",3,"click"],["class","fa","style","color: black; font-size: 18px;",3,"ngClass","title",4,"ngIf"],["class","map-button-info-hint-wrapper",4,"ngIf"],[1,"fa",2,"color","black","font-size","18px",3,"ngClass","title"],[1,"map-button-info-hint-wrapper"],[1,"map-button-info-hint"],["key","map.button.info.hint"],[1,"map-button-pointer"]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div",0),r.ɵɵlistener("click",(function(){return t.onClick()})),r.ɵɵtemplate(1,c,2,7,"button",1),r.ɵɵtemplate(2,d,4,0,"div",2),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(1),r.ɵɵproperty("ngIf",t.editSessionEnabled),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",t.editSessionEnabled))},directives:[o.NgIf,o.NgClass,a.LocalizeComponent],pipes:[l.LocalizePipe],styles:[".mapboxgl-ctrl-group.mapboxgl-ctrl[_ngcontent-%COMP%]    > button[_ngcontent-%COMP%]:hover, .mapboxgl-ctrl-group.mapboxgl-ctrl[_ngcontent-%COMP%]:hover {\n\tcursor: pointer;\n}\n\n.map-button-info-hint-wrapper[_ngcontent-%COMP%] {\n\tanimation: fadeIn ease 2s;\n\t-webkit-animation: fadeIn ease 2s;\n\t-moz-animation: fadeIn ease 2s;\n\t-o-animation: fadeIn ease 2s;\n\t-ms-animation: fadeIn ease 2s;\n}\n\n@keyframes fadeIn {\n0% {opacity:0;}\n100% {opacity:1;}\n}\n\n@-moz-keyframes fadeIn {\n0% {opacity:0;}\n100% {opacity:1;}\n}\n\n@-webkit-keyframes fadeIn {\n0% {opacity:0;}\n100% {opacity:1;}\n}\n\n@-o-keyframes fadeIn {\n0% {opacity:0;}\n100% {opacity:1;}\n}\n\n@-ms-keyframes fadeIn {\n0% {opacity:0;}\n100% {opacity:1;}\n}\n\n\n.map-button-info-hint[_ngcontent-%COMP%] {\n\tposition: absolute;\n\ttop: 0;\n\tright: 45px;\n\tbackground: rgba(255,255,255,.9);\n\tpadding: 5px;\n\twhite-space: nowrap;\n}\n\n.map-button-pointer[_ngcontent-%COMP%] {\n\tborder: solid 15px transparent;\n    border-left-color: rgba(255,255,255,.9);\n    position: absolute;\n    margin: -29px 0 0 -16px;\n}"]}),e}();t.SimpleEditControl=p,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(p,[{type:i.Component,args:[{selector:"simple-edit-control",templateUrl:"./simple-edit-control.component.html",styleUrls:["./simple-edit-control.css"]}]}],(function(){return[{type:r.ElementRef}]}),{editEmitter:[{type:i.Output}],visible:[{type:i.Input}],editSessionEnabled:[{type:i.Input}],save:[{type:i.Input}]})},1156:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CascadingGeoSelector=void 0;var i=n(0),r=(n(56),n(1015),n(193)),o=n(0),a=n(56),l=n(1015),s=n(18),c=n(1),d=n(88),p=["mainForm"];function u(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",10),o.ɵɵtext(1),o.ɵɵelement(2,"input",11),o.ɵɵelementEnd()),2&e){var n=t.$implicit,i=o.ɵɵnextContext().$implicit;o.ɵɵadvance(1),o.ɵɵtextInterpolate1(" ",n.label," "),o.ɵɵadvance(1),o.ɵɵproperty("value",n.geoObject.properties.displayLabel.localizedValue+" : "+n.geoObject.properties.code)("name",i.code+"-"+n.code+"-input")}}function m(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",7),o.ɵɵelementStart(1,"div",12),o.ɵɵelementStart(2,"div",13),o.ɵɵelementStart(3,"button",14),o.ɵɵlistener("click",(function(){o.ɵɵrestoreView(n);var e=o.ɵɵnextContext().$implicit;return o.ɵɵnextContext().onManageVersions(e.code)})),o.ɵɵelement(4,"localize",15),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}}function g(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",3),o.ɵɵelementStart(1,"div",4),o.ɵɵelementStart(2,"label"),o.ɵɵtext(3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"div",5),o.ɵɵelementStart(5,"div",6),o.ɵɵelementStart(6,"div",7),o.ɵɵtemplate(7,u,3,3,"div",8),o.ɵɵelementEnd(),o.ɵɵtemplate(8,m,5,0,"div",9),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=t.$implicit,i=o.ɵɵnextContext();o.ɵɵadvance(3),o.ɵɵtextInterpolate1(" ",n.label," "),o.ɵɵadvance(4),o.ɵɵproperty("ngForOf",n.parents),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",!i.readOnly)}}var h=function(){function e(e,t){this.modalService=e,this.registryService=t,this.valid=new i.EventEmitter,this.isValid=!0,this.readOnly=!1,this.forDate=new Date,this.customEvent=!1,this.onManageVersion=new i.EventEmitter,this.cHierarchies=[],this.parentMap={}}return e.prototype.ngOnInit=function(){var e=this.forDate.getUTCDate();this.dateStr=this.forDate.getUTCFullYear()+"-"+(this.forDate.getUTCMonth()+1)+"-"+(e<10?"0":"")+e,this.forDate=new Date(Date.parse(this.dateStr)),this.calculate()},e.prototype.ngOnChanges=function(e){e.forDate&&this.calculate()},e.prototype.calculate=function(){var e=this,t=this.forDate.getTime();this.isValid=!0,this.cHierarchies=[],this.hierarchies.forEach((function(n){var i={};i.label=n.label,i.code=n.code,e.isValid=e.isValid&&e.hierarchies.length>0,n.entries.forEach((function(e){var r=Date.parse(e.startDate),o=Date.parse(e.endDate);if(t>=r&&t<=o){var a=[];n.types.forEach((function(t){var n={code:t.code,label:t.label};null!=e.parents[t.code]&&(n.text=e.parents[t.code].text,n.geoObject=e.parents[t.code].geoObject),a.push(n)})),i.parents=a}})),e.cHierarchies.push(i)})),this.valid.emit()},e.prototype.getIsValid=function(){return!0},e.prototype.getHierarchies=function(){return this.hierarchies},e.prototype.onManageVersions=function(e){var t=this.hierarchies.find((function(t){return t.code===e}));this.customEvent&&this.onManageVersion.emit(t)},e.prototype.error=function(e){this.bsModalRef=r.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.BsModalService),o.ɵɵdirectiveInject(l.RegistryService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["cascading-geo-selector"]],viewQuery:function(e,t){if(1&e&&o.ɵɵviewQuery(p,1),2&e){var n;o.ɵɵqueryRefresh(n=o.ɵɵloadQuery())&&(t.mainForm=n.first)}},inputs:{hierarchies:"hierarchies",isValid:"isValid",readOnly:"readOnly",forDate:"forDate",customEvent:"customEvent"},outputs:{valid:"valid",onManageVersion:"onManageVersion"},features:[o.ɵɵNgOnChangesFeature],decls:5,vars:1,consts:[["name","cascading-geo-selector",1,"modal-form",2,"overflow","visible"],["mainForm","ngForm"],["class","row-holder","style","overflow:visible;",4,"ngFor","ngForOf"],[1,"row-holder",2,"overflow","visible"],[1,"label-holder"],[1,"holder"],[1,"container",2,"width","100%"],[1,"row"],["class","col-sm-12","style","float:left;width:150px;",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"col-sm-12",2,"float","left","width","150px"],["type","text","disabled","",1,"form-control",2,"width","150px",3,"value","name"],[1,"col-sm-12"],[1,"button-holder",2,"padding","20px 0 20px 0","text-align","left"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","changeovertime.manageVersions.button.label"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"form",0,1),o.ɵɵelementStart(2,"fieldset"),o.ɵɵelementStart(3,"div"),o.ɵɵtemplate(4,g,9,3,"div",2),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(4),o.ɵɵproperty("ngForOf",t.cHierarchies))},directives:[s.ɵangular_packages_forms_forms_ba,s.NgControlStatusGroup,s.NgForm,c.NgForOf,c.NgIf,d.LocalizeComponent],encapsulation:2}),e}();t.CascadingGeoSelector=h,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(h,[{type:i.Component,args:[{selector:"cascading-geo-selector",templateUrl:"./cascading-geo-selector.html"}]}],(function(){return[{type:a.BsModalService},{type:l.RegistryService}]}),{hierarchies:[{type:i.Input}],valid:[{type:i.Output}],isValid:[{type:i.Input}],readOnly:[{type:i.Input}],mainForm:[{type:i.ViewChild,args:["mainForm"]}],forDate:[{type:i.Input}],customEvent:[{type:i.Input}],onManageVersion:[{type:i.Output}]})},1157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeGeoSelector=void 0;var i=n(0),r=(n(378),n(0)),o=n(1),a=n(383),l=n(88);function s(e,t){if(1&e&&(r.ɵɵelementStart(0,"div",6),r.ɵɵelement(1,"tree-root",7),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext();r.ɵɵadvance(1),r.ɵɵproperty("nodes",n.nodes)("options",n.options)}}function c(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"button",8),r.ɵɵlistener("click",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext().onEdit()})),r.ɵɵelement(1,"localize",9),r.ɵɵelementEnd()}}var d=function(){function e(){this.readOnly=!1,this.forDate=null,this.onManageVersion=new i.EventEmitter,this.nodes=[],this.actionMapping={mouse:{click:null}},this.options={displayField:"name",isExpandedField:"expanded",idField:"code",actionMapping:this.actionMapping}}return e.prototype.ngOnInit=function(){this.calculate()},e.prototype.ngOnChanges=function(e){e.forDate&&this.calculate()},e.prototype.calculate=function(){var e=this,t=null;null!=this.forDate&&(t=this.forDate.getTime());var n=[],i=null;this.hierarchy.entries.forEach((function(r){var o=Date.parse(r.startDate),a=Date.parse(r.endDate);(null==t||t>=o&&t<=a)&&e.hierarchy.types.forEach((function(e){var o={code:e.code,label:e.label,children:[],expanded:!1};null!=r.parents[e.code]&&(o.name=r.parents[e.code].text,null==t&&(o.name=o.name+" ("+r.startDate+" -> "+r.endDate+")"),o.geoObject=r.parents[e.code].geoObject),null==i?n.push(o):(i.children.push(o),i.expanded=!0),i=o})),i=null})),this.nodes=n},e.prototype.onEdit=function(){this.onManageVersion.emit(this.hierarchy)},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["tree-geo-selector"]],inputs:{hierarchy:"hierarchy",readOnly:"readOnly",forDate:"forDate"},outputs:{onManageVersion:"onManageVersion"},features:[r.ɵɵNgOnChangesFeature],decls:8,vars:3,consts:[[1,"panel","panel-default"],[1,"panel-heading"],[2,"margin","0"],[1,"panel-body"],["class","tree",4,"ngIf"],["class","btn btn-primary","style","width:100%;margin-top:10px;",3,"click",4,"ngIf"],[1,"tree"],[3,"nodes","options"],[1,"btn","btn-primary",2,"width","100%","margin-top","10px",3,"click"],["key","modal.button.edit"]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div"),r.ɵɵelementStart(1,"div",0),r.ɵɵelementStart(2,"div",1),r.ɵɵelementStart(3,"h4",2),r.ɵɵtext(4),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(5,"div",3),r.ɵɵtemplate(6,s,2,2,"div",4),r.ɵɵtemplate(7,c,2,0,"button",5),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(4),r.ɵɵtextInterpolate(t.hierarchy.label),r.ɵɵadvance(2),r.ɵɵproperty("ngIf",t.nodes.length>0),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",!t.readOnly))},directives:[o.NgIf,a.TreeComponent,l.LocalizeComponent],styles:[""]}),e}();t.TreeGeoSelector=d,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(d,[{type:i.Component,args:[{selector:"tree-geo-selector",templateUrl:"./tree-geo-selector.html",styleUrls:["./tree-geo-selector.css"]}]}],(function(){return[]}),{hierarchy:[{type:i.Input}],readOnly:[{type:i.Input}],forDate:[{type:i.Input}],onManageVersion:[{type:i.Output}]})},1158:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionDetailModalComponent=void 0;var i=n(0),r=(n(56),n(0)),o=n(56),a=["cuDetail"],l=["arDetail"],s=["spDetail"];function c(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"crtable-detail-create-geo-object",7,8),r.ɵɵlistener("actionChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().action=e})),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext();r.ɵɵproperty("action",i.action)("readOnly",i.readonly)}}function d(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"crtable-detail-add-remove-child",7,9),r.ɵɵlistener("actionChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().action=e})),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext();r.ɵɵproperty("action",i.action)("readOnly",i.readonly)}}function p(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"set-parent-detail",7,10),r.ɵɵlistener("actionChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().action=e})),r.ɵɵelementEnd()}if(2&e){var i=r.ɵɵnextContext();r.ɵɵproperty("action",i.action)("readOnly",i.readonly)}}var u=function(){function e(e){this.bsModalRef=e}return e.prototype.curAction=function(e,t){this.action=e,this.readonly=t},e.prototype.ngOnInit=function(){},e.prototype.cancel=function(){null!=this.cuDetail&&this.cuDetail.endEdit(),null!=this.arDetail&&this.arDetail.endEdit(),null!=this.spDetail&&this.spDetail.endEdit(),this.bsModalRef.hide()},e.prototype.confirm=function(){this.bsModalRef.hide()},e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(o.BsModalRef))},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["action-detail-modal"]],viewQuery:function(e,t){if(1&e&&(r.ɵɵviewQuery(a,1),r.ɵɵviewQuery(l,1),r.ɵɵviewQuery(s,1)),2&e){var n=void 0;r.ɵɵqueryRefresh(n=r.ɵɵloadQuery())&&(t.cuDetail=n.first),r.ɵɵqueryRefresh(n=r.ɵɵloadQuery())&&(t.arDetail=n.first),r.ɵɵqueryRefresh(n=r.ɵɵloadQuery())&&(t.spDetail=n.first)}},inputs:{curAction:"curAction"},decls:13,vars:3,consts:[["tabindex","-1","role","dialog",1,"modal-body"],[1,"row"],[1,"col-md-12"],[3,"action","readOnly","actionChange",4,"ngIf"],[1,"button-holder","text-right"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",3,"click"],["key","modal.button.close"],[3,"action","readOnly","actionChange"],["cuDetail",""],["arDetail",""],["spDetail",""]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div",0),r.ɵɵelementStart(1,"div",1),r.ɵɵelementStart(2,"div",2),r.ɵɵtemplate(3,c,2,2,"crtable-detail-create-geo-object",3),r.ɵɵtemplate(4,d,2,2,"crtable-detail-add-remove-child",3),r.ɵɵtemplate(5,p,2,2,"set-parent-detail",3),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelement(6,"hr"),r.ɵɵelementStart(7,"div",1),r.ɵɵelementStart(8,"div",2),r.ɵɵelementStart(9,"div",4),r.ɵɵelementStart(10,"button",5),r.ɵɵlistener("click",(function(){return t.cancel()})),r.ɵɵelementStart(11,"span"),r.ɵɵelement(12,"localize",6),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(3),r.ɵɵproperty("ngIf",t.action&&(t.action.actionType.endsWith("CreateGeoObjectAction")||t.action.actionType.endsWith("UpdateGeoObjectAction"))),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",t.action&&(t.action.actionType.endsWith("AddChildAction")||t.action.actionType.endsWith("RemoveChildAction"))),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",t.action&&t.action.actionType.endsWith("SetParentAction")))},encapsulation:2}),e}();t.ActionDetailModalComponent=u,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(u,[{type:i.Component,args:[{selector:"action-detail-modal",templateUrl:"./action-detail-modal.component.html",styleUrls:[]}]}],(function(){return[{type:o.BsModalRef}]}),{cuDetail:[{type:i.ViewChild,args:["cuDetail"]}],arDetail:[{type:i.ViewChild,args:["arDetail"]}],spDetail:[{type:i.ViewChild,args:["spDetail"]}],curAction:[{type:i.Input}]})},1159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataExportComponent=void 0;var i=n(0),r=(n(56),n(193)),o=(n(1015),n(25),n(0)),a=n(1015),l=n(56),s=n(25),c=n(139),d=n(1),p=n(18),u=n(88);function m(e,t){if(1&e&&(o.ɵɵelementStart(0,"option",19),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵproperty("value",n.code),o.ɵɵadvance(1),o.ɵɵtextInterpolate(n.label)}}function g(e,t){if(1&e&&(o.ɵɵelementStart(0,"option",19),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵproperty("value",n.code),o.ɵɵadvance(1),o.ɵɵtextInterpolate(n.label)}}function h(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",2),o.ɵɵelementStart(1,"label",20),o.ɵɵelement(2,"localize",21),o.ɵɵelementEnd(),o.ɵɵelementStart(3,"div",5),o.ɵɵelementStart(4,"select",22),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).hierarchy=e})),o.ɵɵelement(5,"option"),o.ɵɵtemplate(6,g,2,2,"option",7),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵnextContext(2);o.ɵɵadvance(4),o.ɵɵproperty("ngModel",i.hierarchy),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",i.hierarchies)}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"form",null,1),o.ɵɵelementStart(2,"div",2),o.ɵɵelementStart(3,"label",3),o.ɵɵelement(4,"localize",4),o.ɵɵelementEnd(),o.ɵɵelementStart(5,"div",5),o.ɵɵelementStart(6,"select",6),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().code=e}))("change",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().onChange(e.target.value)})),o.ɵɵelement(7,"option"),o.ɵɵtemplate(8,m,2,2,"option",7),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵtemplate(9,h,7,2,"div",8),o.ɵɵelementStart(10,"div",2),o.ɵɵelementStart(11,"label",9),o.ɵɵelement(12,"localize",10),o.ɵɵelementEnd(),o.ɵɵelementStart(13,"div",5),o.ɵɵelementStart(14,"select",11),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().format=e})),o.ɵɵelement(15,"option"),o.ɵɵelementStart(16,"option",12),o.ɵɵelement(17,"localize",13),o.ɵɵelementEnd(),o.ɵɵelementStart(18,"option",14),o.ɵɵelement(19,"localize",15),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(20,"div",2),o.ɵɵelementStart(21,"div",16),o.ɵɵelementStart(22,"button",17),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().onExport()})),o.ɵɵelement(23,"localize",18),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var i=o.ɵɵreference(1),r=o.ɵɵnextContext();o.ɵɵadvance(6),o.ɵɵproperty("ngModel",r.code),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",r.types),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",r.hierarchies.length>0),o.ɵɵadvance(5),o.ɵɵproperty("ngModel",r.format),o.ɵɵadvance(8),o.ɵɵproperty("disabled",i.invalid)}}var y=function(){function e(e,t,n){this.service=e,this.modalService=t,this.authService=n,this.code=null,this.hierarchies=[],this.hierarchy=null,this.format=null}return e.prototype.ngOnInit=function(){var e=this;this.service.listGeoObjectTypes(!0).then((function(t){for(var n=[],i=0;i<t.length;++i)e.authService.isOrganizationRA(t[i].orgCode)&&n.push(t[i]);e.types=n})).catch((function(t){e.error(t)}))},e.prototype.onChange=function(e){var t=this;null!=e&&e.length>0?this.service.getHierarchiesForType(e,!1).then((function(e){t.hierarchies=e,t.hierarchy=null})).catch((function(e){t.error(e)})):(this.hierarchies=[],this.hierarchy=null)},e.prototype.onExport=function(){"SHAPEFILE"===this.format?window.location.href=registry.contextPath+"/shapefile/export-shapefile?type="+this.code+"&hierarchyType="+this.hierarchy:"EXCEL"===this.format&&(window.location.href=registry.contextPath+"/excel/export-spreadsheet?type="+this.code+"&hierarchyType="+this.hierarchy)},e.prototype.error=function(e){this.bsModalRef=r.ErrorHandler.showErrorAsDialog(e,this.modalService)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(a.IOService),o.ɵɵdirectiveInject(l.BsModalService),o.ɵɵdirectiveInject(s.AuthService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["data-export"]],decls:2,vars:1,consts:[[4,"ngIf"],["form","ngForm"],[1,"form-group","row"],["for","code",1,"col-md-3","text-right"],["key","io.geoObjectType"],[1,"col-md-9"],["id","code","name","code","required","",1,"select-area",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","form-group row",4,"ngIf"],["for","format",1,"col-md-3","text-right"],["key","io.format"],["id","format","name","format","required","",1,"select-area",3,"ngModel","ngModelChange"],["value","EXCEL"],["key","export.option.spreadsheet"],["value","SHAPEFILE"],["key","export.option.shapefile"],[1,"col-md-12","text-right"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["key","io.export"],[3,"value"],[1,"col-sm-3","text-right"],["key","io.modal.hierarchy"],["name","hierarchy","required","",1,"select-area",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(o.ɵɵelement(0,"loading-bar"),o.ɵɵtemplate(1,f,24,5,"form",0)),2&e&&(o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.types))},directives:[c.LoadingBarComponent,d.NgIf,p.ɵangular_packages_forms_forms_ba,p.NgControlStatusGroup,p.NgForm,u.LocalizeComponent,p.SelectControlValueAccessor,p.RequiredValidator,p.NgControlStatus,p.NgModel,p.NgSelectOption,p.ɵangular_packages_forms_forms_z,d.NgForOf],encapsulation:2}),e}();t.DataExportComponent=y,("undefined"==typeof ngDevMode||ngDevMode)&&o.ɵsetClassMetadata(y,[{type:i.Component,args:[{selector:"data-export",templateUrl:"./data-export.component.html",styleUrls:[]}]}],(function(){return[{type:a.IOService},{type:l.BsModalService},{type:s.AuthService}]}),null)},1160:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerPanelComponent=void 0;var i=n(0),r=(n(57),n(1016),n(859)),o=n(862),a=n(1056),l=(n(856),n(544)),s=(n(1019),n(1020)),c=(n(1025),n(1026),n(1081)),d=(n(195),n(0)),p=n(57),u=n(856),m=n(1016),g=n(1019),h=n(1025),f=n(1026),y=n(195),v=n(1),b=n(88),S=n(379),C=n(546),E=n(862),x=n(18),O=n(382),I=n(162);function M(e,t){if(1&e&&(d.ɵɵelementStart(0,"a",13),d.ɵɵelement(1,"localize",14),d.ɵɵtext(2),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext().versionOrLayer;d.ɵɵproperty("routerLink","/registry/master-list/"+n.oid),d.ɵɵadvance(2),d.ɵɵtextInterpolate1(" ",n.versionNumber," ")}}function w(e,t){1&e&&d.ɵɵelement(0,"localize",16)}function T(e,t){if(1&e&&(d.ɵɵelementStart(0,"a",13),d.ɵɵtemplate(1,w,1,0,"localize",15),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext().versionOrLayer;d.ɵɵproperty("routerLink","/registry/master-list/"+n.oid),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",0===n.versionNumber)}}function k(e,t){if(1&e&&(d.ɵɵtext(0," ( "),d.ɵɵtemplate(1,M,3,2,"a",12),d.ɵɵtemplate(2,T,2,2,"a",12),d.ɵɵtext(3," )\n")),2&e){var n=t.versionOrLayer;d.ɵɵadvance(1),d.ɵɵproperty("ngIf",0!==n.versionNumber),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",0===n.versionNumber)}}function P(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"boolean-field",30),d.ɵɵlistener("change",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().$implicit,t=d.ɵɵnextContext(3).list;return d.ɵɵnextContext().clickToggleLayerRendered(e.layer,t)})),d.ɵɵelementEnd()}if(2&e){var i=d.ɵɵnextContext().$implicit;d.ɵɵproperty("value",i.layer.rendered)("disable",!1)}}function j(e,t){if(1&e&&(d.ɵɵelementStart(0,"a",13),d.ɵɵelement(1,"localize",14),d.ɵɵtext(2),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵproperty("routerLink","/registry/master-list/"+n.oid),d.ɵɵadvance(2),d.ɵɵtextInterpolate1(" ",n.versionNumber," ")}}function z(e,t){1&e&&d.ɵɵelement(0,"localize",16)}function D(e,t){if(1&e&&(d.ɵɵelementStart(0,"a",13),d.ɵɵtemplate(1,z,1,0,"localize",15),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵproperty("routerLink","/registry/master-list/"+n.oid),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",0===n.versionNumber)}}var R=function(e){return{"background-color":e}};function L(e,t){if(1&e&&d.ɵɵelement(0,"div",31),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵproperty("ngStyle",d.ɵɵpureFunction1(1,R,n.color))}}var _=function(e,t){return{"fa-minus":e,"fa-plus":t}};function A(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"div"),d.ɵɵelementStart(1,"div",24),d.ɵɵelementStart(2,"a",25),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=t.$implicit,i=d.ɵɵnextContext(3).list;return d.ɵɵnextContext().toggleVersionLayer(e,i)})),d.ɵɵpipe(3,"localize"),d.ɵɵelementEnd(),d.ɵɵtemplate(4,P,1,2,"boolean-field",26),d.ɵɵelementStart(5,"div",27),d.ɵɵelement(6,"date-text",28),d.ɵɵtext(7," ( "),d.ɵɵtemplate(8,j,3,2,"a",12),d.ɵɵtemplate(9,D,2,2,"a",12),d.ɵɵtext(10," ) "),d.ɵɵtemplate(11,L,1,3,"div",29),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd()}if(2&e){var i=t.$implicit;d.ɵɵadvance(2),d.ɵɵproperty("ngClass",d.ɵɵpureFunction2(9,_,i.layer,!i.layer))("title",d.ɵɵpipeBind1(3,7,i.layer?"explorer.layerPanel.removeFromLegend":"explorer.layerPanel.addToLegend")),d.ɵɵadvance(2),d.ɵɵproperty("ngIf",i.layer),d.ɵɵadvance(2),d.ɵɵproperty("date",i.forDate),d.ɵɵadvance(2),d.ɵɵproperty("ngIf",0!==i.versionNumber),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",0===i.versionNumber),d.ɵɵadvance(2),d.ɵɵproperty("ngIf",null!=i.color)}}function N(e,t){if(1&e&&(d.ɵɵelementStart(0,"div",22),d.ɵɵtemplate(1,A,12,12,"div",23),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext(2).list;d.ɵɵadvance(1),d.ɵɵproperty("ngForOf",n.versions)}}var V=function(e,t){return{"fa-chevron-down":e,"fa-chevron-right":t}};function F(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"div",18),d.ɵɵelementStart(1,"h4"),d.ɵɵelementStart(2,"a",19),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().list;return e.open=!e.open})),d.ɵɵelement(3,"i",20),d.ɵɵtext(4),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵtemplate(5,N,2,1,"div",21),d.ɵɵelementEnd()}if(2&e){var i=d.ɵɵnextContext().list;d.ɵɵadvance(3),d.ɵɵproperty("ngClass",d.ɵɵpureFunction2(3,V,i.open,!i.open)),d.ɵɵadvance(1),d.ɵɵtextInterpolate(i.label),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",i.open)}}function H(e,t){if(1&e&&d.ɵɵtemplate(0,F,6,6,"div",17),2&e){var n=t.list;d.ɵɵproperty("ngIf",n.versions.length>0)}}var G=function(e,t){return{"fa-compress":e,"fa-expand":t}};function B(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵnamespaceSVG(),d.ɵɵnamespaceHTML(),d.ɵɵelementStart(0,"i",32),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext();return e.setPanelSize(2===e.panelSize?1:2)})),d.ɵɵpipe(1,"localize"),d.ɵɵelementEnd()}if(2&e){var i=d.ɵɵnextContext();d.ɵɵproperty("ngClass",d.ɵɵpureFunction2(4,G,2===i.panelSize,1===i.panelSize))("title",d.ɵɵpipeBind1(1,2,2===i.panelSize?"explorer.resize.collapseLayerPanel":"explorer.resize.expandLayerPanel"))}}function q(e,t){1&e&&d.ɵɵelement(0,"div",44)}function U(e,t){if(1&e&&(d.ɵɵelementStart(0,"span"),d.ɵɵtext(1),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext().$implicit,i=d.ɵɵnextContext(3);d.ɵɵadvance(1),d.ɵɵtextInterpolate1("- ",i.versionMap[n.getId()].forDate,"")}}function $(e,t){if(1&e&&(d.ɵɵelementStart(0,"a",13),d.ɵɵelement(1,"localize",14),d.ɵɵtext(2),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext(2).$implicit,i=d.ɵɵnextContext(3);d.ɵɵproperty("routerLink","/registry/master-list/"+n.dataSource.getVersionId()),d.ɵɵadvance(2),d.ɵɵtextInterpolate1(" ",i.versionMap[n.getId()].versionNumber," ")}}function J(e,t){1&e&&d.ɵɵelement(0,"localize",16)}function W(e,t){if(1&e&&(d.ɵɵelementStart(0,"a",13),d.ɵɵtemplate(1,J,1,0,"localize",15),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext(2).$implicit,i=d.ɵɵnextContext(3);d.ɵɵproperty("routerLink","/registry/master-list/"+n.dataSource.getVersionId()),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",0===i.versionMap[n.getId()].versionNumber)}}function Y(e,t){if(1&e&&(d.ɵɵelementContainerStart(0),d.ɵɵtext(1," ( "),d.ɵɵtemplate(2,$,3,2,"a",12),d.ɵɵtemplate(3,W,2,2,"a",12),d.ɵɵtext(4," ) "),d.ɵɵelementContainerEnd()),2&e){var n=d.ɵɵnextContext().$implicit,i=d.ɵɵnextContext(3);d.ɵɵadvance(2),d.ɵɵproperty("ngIf",0!==i.versionMap[n.getId()].versionNumber),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",0===i.versionMap[n.getId()].versionNumber)}}function K(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"i",45),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().$implicit;return d.ɵɵnextContext(3).togglePinned(e)})),d.ɵɵpipe(1,"localize"),d.ɵɵelementEnd()}if(2&e){var i=d.ɵɵnextContext().$implicit;d.ɵɵproperty("title",d.ɵɵpipeBind1(1,2,"explorer.layerPanel.pin"))("ngClass",i.getPinned()?"active":"not-active")}}function Q(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"i",46),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().$implicit;return d.ɵɵnextContext(3).onCreate(e)})),d.ɵɵpipe(1,"localize"),d.ɵɵelementEnd()}2&e&&d.ɵɵproperty("title",d.ɵɵpipeBind1(1,1,"explorer.layerPanel.addNewGeoObject"))}function X(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"div",37),d.ɵɵelementStart(1,"div",38),d.ɵɵtemplate(2,q,1,0,"div",39),d.ɵɵelementStart(3,"boolean-field",30),d.ɵɵlistener("change",(function(){d.ɵɵrestoreView(n);var e=t.$implicit;return d.ɵɵnextContext(3).toggleLayerRendered(e)})),d.ɵɵelementEnd(),d.ɵɵelementStart(4,"div",27),d.ɵɵtext(5),d.ɵɵtemplate(6,U,2,1,"span",10),d.ɵɵtemplate(7,Y,5,2,"ng-container",10),d.ɵɵelement(8,"div",31),d.ɵɵelementStart(9,"i",40),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=t.$implicit;return d.ɵɵnextContext(3).onGotoBounds(e)})),d.ɵɵpipe(10,"localize"),d.ɵɵelementEnd(),d.ɵɵtemplate(11,K,2,4,"i",41),d.ɵɵtemplate(12,Q,2,3,"i",42),d.ɵɵelementStart(13,"i",43),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=t.$implicit;return d.ɵɵnextContext(3).removeLayer(e)})),d.ɵɵpipe(14,"localize"),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=d.ɵɵnextContext(3);d.ɵɵadvance(3),d.ɵɵproperty("value",i.rendered)("disable",!1),d.ɵɵadvance(2),d.ɵɵtextInterpolate1(" ",i.legendLabel," "),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",r.versionMap[i.getId()]),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",null!=r.versionMap[i.getId()]),d.ɵɵadvance(1),d.ɵɵproperty("ngStyle",d.ɵɵpureFunction1(14,R,i.color)),d.ɵɵadvance(1),d.ɵɵproperty("title",d.ɵɵpipeBind1(10,10,"explorer.layerPanel.zoomToFeature")),d.ɵɵadvance(2),d.ɵɵproperty("ngIf",!(i.dataSource.getDataSourceType()===r.CONSTANTS.LIST_VECTOR_SOURCE_TYPE)),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",r.versionMap[i.getId()]&&0===r.versionMap[i.getId()].versionNumber),d.ɵɵadvance(1),d.ɵɵproperty("title",d.ɵɵpipeBind1(14,12,"explorer.layerPanel.removeLayer"))}}function Z(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"div"),d.ɵɵelementStart(1,"label",34),d.ɵɵtext(2),d.ɵɵelementEnd(),d.ɵɵelementStart(3,"div",35),d.ɵɵlistener("cdkDropListDropped",(function(e){d.ɵɵrestoreView(n);var i=t.$implicit;return d.ɵɵnextContext(2).drop(e,i)})),d.ɵɵtemplate(4,X,15,16,"div",36),d.ɵɵelementEnd(),d.ɵɵelementEnd()}if(2&e){var i=t.$implicit;d.ɵɵadvance(2),d.ɵɵtextInterpolate(i.getLabel()),d.ɵɵadvance(2),d.ɵɵproperty("ngForOf",i.getLayers())}}function ee(e,t){if(1&e&&(d.ɵɵnamespaceSVG(),d.ɵɵnamespaceHTML(),d.ɵɵelementStart(0,"div"),d.ɵɵelementStart(1,"div",33),d.ɵɵtemplate(2,Z,5,2,"div",23),d.ɵɵelementEnd(),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext();d.ɵɵadvance(2),d.ɵɵproperty("ngForOf",n.layerGroups)}}function te(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"div",64),d.ɵɵelementStart(1,"input",65),d.ɵɵlistener("change",(function(){d.ɵɵrestoreView(n);var e=t.$implicit;return d.ɵɵnextContext(3).toggleBaseLayer(e)})),d.ɵɵelementEnd(),d.ɵɵelementStart(2,"label",66),d.ɵɵelement(3,"localize",67),d.ɵɵelementEnd(),d.ɵɵelementEnd()}if(2&e){var i=t.$implicit;d.ɵɵadvance(1),d.ɵɵproperty("value",i.id)("checked",i.selected),d.ɵɵadvance(2),d.ɵɵproperty("key",i.label)}}function ne(e,t){if(1&e&&(d.ɵɵelementStart(0,"div",33),d.ɵɵelementStart(1,"h4"),d.ɵɵelement(2,"localize",62),d.ɵɵelementEnd(),d.ɵɵtemplate(3,te,4,3,"div",63),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext(2);d.ɵɵadvance(3),d.ɵɵproperty("ngForOf",n.baseLayers)}}function ie(e,t){1&e&&(d.ɵɵelementStart(0,"p",68),d.ɵɵelement(1,"localize",69),d.ɵɵelementEnd())}var re=function(e){return{list:e}};function oe(e,t){if(1&e&&d.ɵɵelementContainer(0,70),2&e){var n=d.ɵɵnextContext(2),i=d.ɵɵreference(3);d.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",d.ɵɵpureFunction1(2,re,n.graphList))}}function ae(e,t){if(1&e&&d.ɵɵelementContainer(0,70),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵnextContext(6);var i=d.ɵɵreference(3);d.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",d.ɵɵpureFunction1(2,re,n))}}function le(e,t){if(1&e&&(d.ɵɵelementStart(0,"div"),d.ɵɵtemplate(1,ae,1,4,"ng-container",61),d.ɵɵelementEnd()),2&e){var n=t.$implicit;d.ɵɵadvance(1),d.ɵɵproperty("ngIf",n)}}function se(e,t){if(1&e&&(d.ɵɵelementStart(0,"div",72),d.ɵɵelementStart(1,"h4"),d.ɵɵtext(2),d.ɵɵelementEnd(),d.ɵɵtemplate(3,le,2,1,"div",23),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵadvance(2),d.ɵɵtextInterpolate(n.typeLabel.localizedValue),d.ɵɵadvance(1),d.ɵɵproperty("ngForOf",n.lists)}}function ce(e,t){if(1&e&&(d.ɵɵelementStart(0,"div"),d.ɵɵtemplate(1,se,4,2,"div",71),d.ɵɵelementEnd()),2&e){var n=t.$implicit;d.ɵɵadvance(1),d.ɵɵproperty("ngIf",n.lists.length>0)}}function de(e,t){if(1&e&&(d.ɵɵelementStart(0,"div",72),d.ɵɵelementStart(1,"h3"),d.ɵɵtext(2),d.ɵɵelementEnd(),d.ɵɵtemplate(3,ce,2,1,"div",23),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext().$implicit;d.ɵɵadvance(2),d.ɵɵtextInterpolate(n.orgLabel.localizedValue),d.ɵɵadvance(1),d.ɵɵproperty("ngForOf",n.types)}}function pe(e,t){if(1&e&&(d.ɵɵelementStart(0,"div"),d.ɵɵtemplate(1,de,4,2,"div",71),d.ɵɵelementEnd()),2&e){var n=t.$implicit;d.ɵɵadvance(1),d.ɵɵproperty("ngIf",n.types.length>0)}}var ue=function(){return["form-control"]};function me(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵnamespaceSVG(),d.ɵɵnamespaceHTML(),d.ɵɵelementStart(0,"div",47),d.ɵɵtemplate(1,ne,4,1,"div",48),d.ɵɵelementStart(2,"form",49),d.ɵɵelementStart(3,"fieldset",50),d.ɵɵelementStart(4,"div",2),d.ɵɵelementStart(5,"div",51),d.ɵɵelementStart(6,"label"),d.ɵɵelement(7,"localize",52),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(8,"div",53),d.ɵɵelementStart(9,"label"),d.ɵɵelement(10,"localize",54),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(11,"div",2),d.ɵɵelementStart(12,"div",51),d.ɵɵelementStart(13,"date-field",55),d.ɵɵlistener("valueChange",(function(e){return d.ɵɵrestoreView(n),d.ɵɵnextContext().form.startDate=e})),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(14,"div",53),d.ɵɵelementStart(15,"date-field",56),d.ɵɵlistener("valueChange",(function(e){return d.ɵɵrestoreView(n),d.ɵɵnextContext().form.endDate=e})),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(16,"div",57),d.ɵɵelementStart(17,"button",58),d.ɵɵlistener("click",(function(){return d.ɵɵrestoreView(n),d.ɵɵnextContext().handleSearch()})),d.ɵɵelementStart(18,"span"),d.ɵɵelement(19,"localize",59),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(20,"div",2),d.ɵɵelementStart(21,"div",3),d.ɵɵtemplate(22,ie,2,0,"p",60),d.ɵɵelementStart(23,"div",22),d.ɵɵtemplate(24,oe,1,4,"ng-container",61),d.ɵɵtemplate(25,pe,2,1,"div",23),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd()}if(2&e){var i=d.ɵɵnextContext();d.ɵɵadvance(1),d.ɵɵproperty("ngIf",i.baseLayers.length>1),d.ɵɵadvance(12),d.ɵɵproperty("value",i.form.startDate)("classNames",d.ɵɵpureFunction0(10,ue))("allowFutureDates",!1),d.ɵɵadvance(2),d.ɵɵproperty("value",i.form.endDate)("classNames",d.ɵɵpureFunction0(11,ue))("allowFutureDates",!1),d.ɵɵadvance(7),d.ɵɵproperty("ngIf",i.listOrgGroups.length<1),d.ɵɵadvance(2),d.ɵɵproperty("ngIf",i.graphList),d.ɵɵadvance(1),d.ɵɵproperty("ngForOf",i.listOrgGroups)}}var ge=function(){function e(e,t,n,r,o,c,d,p,u){this.route=e,this.router=t,this.spinner=n,this.service=r,this.geomService=o,this.registryService=c,this.vizService=d,this.localService=p,this.listService=u,this.draggable={data:"myDragData",effectAllowed:"all",disable:!1,handle:!1},this.CONSTANTS={OVERLAY:l.OverlayerIdentifier.LAYER_PANEL,SEARCH_DATASOURCE_TYPE:s.SEARCH_DATASOURCE_TYPE,GEO_OBJECT_DATA_SOURCE_TYPE:s.GEO_OBJECT_DATA_SOURCE_TYPE,RELATIONSHIP_VISUALIZER_DATASOURCE_TYPE:s.RELATIONSHIP_VISUALIZER_DATASOURCE_TYPE,LIST_VECTOR_SOURCE_TYPE:s.LIST_VECTOR_SOURCE_TYPE},this.filter=[],this.includeSearchLayer=!1,this.baseLayerChange=new i.EventEmitter,this.create=new i.EventEmitter,this.panelSize=a.PANEL_SIZE_STATE.MINIMIZED,this.panelSizeChange=new i.EventEmitter,this.listOrgGroups=[],this.layers=[],this.layerGroups=[],this.versionMap={},this.graphList=null,this.form={startDate:"",currentStartDate:"",endDate:"",currentEndDate:""},this.baseLayers=[{name:"Satellite",label:"baselayer.satellite",id:"satellite-v9",sprite:"mapbox://sprites/mapbox/satellite-v9",url:"mapbox://mapbox.satellite",selected:!0}],this.params=null}return e.prototype.ngOnInit=function(){var e=this;this.subscription=this.geomService.layersChange.subscribe((function(t){e.layersChange(t)}))},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.setPanelSize=function(e){this.panelSize=e,0===this.layers.length&&this.panelSize===a.PANEL_SIZE_STATE.WINDOWED&&(this.panelSize=a.PANEL_SIZE_STATE.FULLSCREEN),this.panelSize>a.PANEL_SIZE_STATE.FULLSCREEN&&(this.panelSize=0),this.panelSizeChange.emit(this.panelSize),this.router.navigate([],{relativeTo:this.route,queryParams:{layersPanelSize:this.panelSize},queryParamsHandling:"merge"})},e.prototype.togglePanelOpen=function(){this.setPanelSize(0===this.panelSize?1:0)},e.prototype.layersChange=function(e){var t=this;this.layers=this.geomService.getLayers(),this.layerGroups=new c.LayerGroupSorter(this.localService).getLayerGroups(e);var n=this.layers.filter((function(e){return null==t.versionMap[e.getId()]&&e.dataSource.getDataSourceType()===s.LIST_VECTOR_SOURCE_TYPE})).map((function(e){return e.dataSource.getVersionId()}));n.length>0&&this.service.fetchVersionsAsListVersion(n).then((function(e){e.forEach((function(e){var n=t.layers.findIndex((function(t){return t.dataSource.getDataSourceType()===s.LIST_VECTOR_SOURCE_TYPE&&t.dataSource.getVersionId()===e.oid}));if(-1!==n){var i=t.layers[n];e.layer=i,t.versionMap[i.getId()]=e}}))})),this.refreshListLayerReferences()},e.prototype.handleSearch=function(){var e=this;return this.spinner.show(this.CONSTANTS.OVERLAY),this.service.getGeospatialVersions(this.form.startDate,this.form.endDate).then((function(t){return e.form.currentStartDate=e.form.startDate,e.form.currentEndDate=e.form.endDate,e.listOrgGroups=t,e.refreshListLayerReferences(),t})).finally((function(){e.spinner.hide(e.CONSTANTS.OVERLAY)}))},e.prototype.refreshListLayerReferences=function(){var e=this;this.listOrgGroups.forEach((function(t){t.types.forEach((function(t){t.lists.forEach((function(t){t.versions=t.versions.filter((function(t){return-1===e.filter.indexOf(t.oid)}));for(var n=function(n){var i=t.versions[n],r=e.layers.findIndex((function(e){return e.dataSource.getDataSourceType()===s.LIST_VECTOR_SOURCE_TYPE&&e.dataSource.getVersionId()===i.oid}));if(-1!==r){var o=e.layers[r];i.layer=o,e.versionMap[o.getId()]=i}},i=0;i<t.versions.length;++i)n(i)}))}))}));for(var t=function(e,t){var i=t,r=n.layers.findIndex((function(t){return t.getId()===e}));if(-1!==r){var o=n.layers[r];i.layer=o}},n=this,i=0,r=Object.entries(this.versionMap);i<r.length;i++){var o=r[i];t(o[0],o[1])}},e.prototype.clickToggleLayerRendered=function(e,t){this.toggleLayerRendered(e)},e.prototype.toggleLayerRendered=function(e){e.rendered=!e.rendered,this.geomService.addOrUpdateLayer(e)},e.prototype.onGotoBounds=function(e){var t=this.geomService.getLayers().filter((function(t){return t.getId()===e.getId()}));t.length>0&&this.geomService.zoomToLayer(t[0])},e.prototype.togglePinned=function(e){var t=this.geomService.getLayers(),n=this.geomService.getLayers().findIndex((function(t){return t.getId()===e.getId()}));if(-1!==n){var i=t[n];i.setPinned(!i.getPinned()),this.geomService.setLayers(t)}},e.prototype.onCreate=function(e){this.create.emit(e)},e.prototype.toggleVersionLayer=function(e,t){if(e.layer)this.geomService.removeLayer(e.layer.getId()),delete this.versionMap[e.layer.getId()],delete e.layer;else{var n=new s.ListVectorLayerDataSource(this.listService,e.oid);e.layer=n.createLayer(t.label,!0,r().hexString()),this.versionMap[e.layer.getId()]=e,this.geomService.addOrUpdateLayer(e.layer)}},e.prototype.removeLayer=function(e){this.geomService.removeLayer(e.getId());var t=this.versionMap[e.getId()];t&&(delete this.versionMap[t.layer.getId()],delete t.layer)},e.prototype.toggleBaseLayer=function(e){this.baseLayers.forEach((function(e){e.selected=!1})),e.selected=!0,this.baseLayerChange.emit(e)},e.prototype.drop=function(e,t){o.moveItemInArray(t.getLayers(),e.previousIndex,e.currentIndex);var n=[];this.layerGroups.forEach((function(e){return e.getLayers().forEach((function(e){return n.push(e)}))})),this.geomService.setLayers(n)},e.ɵfac=function(t){return new(t||e)(d.ɵɵdirectiveInject(p.ActivatedRoute),d.ɵɵdirectiveInject(p.Router),d.ɵɵdirectiveInject(u.NgxSpinnerService),d.ɵɵdirectiveInject(m.ListTypeService),d.ɵɵdirectiveInject(g.GeometryService),d.ɵɵdirectiveInject(h.RegistryService),d.ɵɵdirectiveInject(f.RelationshipVisualizationService),d.ɵɵdirectiveInject(y.LocalizationService),d.ɵɵdirectiveInject(m.ListTypeService))},e.ɵcmp=d.ɵɵdefineComponent({type:e,selectors:[["layer-panel"]],inputs:{filter:"filter",includeSearchLayer:"includeSearchLayer",visualizeMode:"visualizeMode",panelSize:"panelSize"},outputs:{baseLayerChange:"baseLayerChange",create:"create",panelSizeChange:"panelSizeChange"},decls:18,vars:8,consts:[["versionDetail",""],["listView",""],[1,"row"],[1,"col-md-12"],[1,"layer-toggle"],["type","ball-clip-rotate-multiple","size","medium",3,"fullScreen","name"],[1,"clickable",2,"width","27px","height","27px","float","right","margin","5px",3,"title","click"],["version","1.1","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 122.88 105.02",0,"xml","space","preserve",2,"enable-background","new 0 0 122.88 105.02"],["d","M97.25,40.58l23.85,10.28c1.48,0.64,2.17,2.36,1.53,3.85c-0.32,0.75-0.93,1.3-1.63,1.57l-23.19,9.39l23.29,10.04 c1.48,0.64,2.17,2.36,1.53,3.84c-0.32,0.75-0.93,1.3-1.63,1.57l-58.52,23.69c-0.73,0.3-1.52,0.27-2.2,0L1.83,81.05 c-1.5-0.61-2.22-2.31-1.61-3.81c0.33-0.82,0.99-1.4,1.76-1.67l22.97-9.96l-23.12-9.4c-1.5-0.61-2.22-2.31-1.61-3.81 c0.33-0.82,0.99-1.4,1.76-1.67l23.53-10.21L1.83,30.9c-1.5-0.61-2.22-2.31-1.61-3.81c0.33-0.82,0.99-1.4,1.76-1.67L60.02,0.24 c0.77-0.33,1.6-0.31,2.31,0l0-0.01l58.77,25.32c1.48,0.64,2.17,2.36,1.53,3.84c-0.32,0.75-0.93,1.3-1.63,1.57L97.25,40.58 L97.25,40.58z M112.36,53.47l-22.73-9.79L62.49,54.66c-0.73,0.3-1.52,0.27-2.2,0L33.08,43.6L10.47,53.4L61.39,74.1L112.36,53.47 L112.36,53.47z M90.19,68.75l-27.7,11.21c-0.73,0.3-1.52,0.27-2.2,0L32.52,68.68l-22.05,9.56l50.92,20.69l50.97-20.63L90.19,68.75 L90.19,68.75z M61.17,6.1l-50.7,21.99l50.92,20.69l50.97-20.63L61.17,6.1L61.17,6.1z"],["class","clickable fa","style","width:30px;height:30px;margin-right:5px;font-size:25px;padding:5px;",3,"ngClass","title","click",4,"ngIf"],[4,"ngIf"],["style","margin-top: 10px;",4,"ngIf"],["routerLinkActive","active",3,"routerLink",4,"ngIf"],["routerLinkActive","active",3,"routerLink"],["key","list.type.version"],["key","list.type.working.version",4,"ngIf"],["key","list.type.working.version"],["class","list-group-item","style","border: none; padding-top:0; padding-bottom:0;",4,"ngIf"],[1,"list-group-item",2,"border","none","padding-top","0","padding-bottom","0"],[3,"click"],[1,"fa","fa-chevron-right",2,"font-size","14px",3,"ngClass"],["class","list-group",4,"ngIf"],[1,"list-group"],[4,"ngFor","ngForOf"],[1,"layer-toggle-wrapper"],[1,"fa",2,"padding-right","10px",3,"ngClass","title","click"],["label","","style","line-height:0;",3,"value","disable","change",4,"ngIf"],[1,"label-wrapper"],[3,"date"],["class","layer-legend-square","style","width:15px;height:15px;display:inline-block;vertical-align:middle;",3,"ngStyle",4,"ngIf"],["label","",2,"line-height","0",3,"value","disable","change"],[1,"layer-legend-square",2,"width","15px","height","15px","display","inline-block","vertical-align","middle",3,"ngStyle"],[1,"clickable","fa",2,"width","30px","height","30px","margin-right","5px","font-size","25px","padding","5px",3,"ngClass","title","click"],[2,"margin-bottom","10px"],[2,"font-weight","bold"],["cdkDropList","",1,"list-group",3,"cdkDropListDropped"],["class","list-group-item","style","padding:5px;","cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag","",1,"list-group-item",2,"padding","5px"],[1,"layer-toggle-wrapper",2,"cursor","move"],["class","custom-placeholder",4,"cdkDragPlaceholder"],["aria-hidden","true",1,"fa","fa-eye",3,"title","click"],["class","fa fa-thumb-tack clickable","aria-hidden","true",3,"title","ngClass","click",4,"ngIf"],["class","fa fa-plus","aria-hidden","true",3,"title","click",4,"ngIf"],["aria-hidden","true",1,"fa","fa-times",3,"title","click"],[1,"custom-placeholder"],["aria-hidden","true",1,"fa","fa-thumb-tack","clickable",3,"title","ngClass","click"],["aria-hidden","true",1,"fa","fa-plus",3,"title","click"],[2,"margin-top","10px"],["style","margin-bottom: 10px;",4,"ngIf"],["name","export-form",1,"modal-form",2,"overflow","visible"],[2,"padding","10px"],[1,"col-md-4",2,"padding-left","10px","padding-right","0"],["key","io.startDate"],[1,"col-md-4",2,"padding-left","5px","padding-right","0"],["key","io.endDate"],["label","","inputName","startDate","name","startDate",3,"value","classNames","allowFutureDates","valueChange"],["label","","inputName","endDate","name","endDate",3,"value","classNames","allowFutureDates","valueChange"],[1,"col-md-4",2,"text-align","center","padding-left","5px"],["type","button","role","button",1,"btn","btn-primary",2,"width","100%",3,"click"],["key","explorer.find.layers.by.date.range.button"],["style","font-style: italic; color: grey;",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["key","explorer.base.layers.label"],["class","row-form",4,"ngFor","ngForOf"],[1,"row-form"],["type","radio","name","baselayers",1,"layer-toggle-input",3,"value","checked","change"],[1,"layer-toggle-label"],[3,"key"],[2,"font-style","italic","color","grey"],["key","explorer.find.layers.no.layers.found.message"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","list-group-item","style","border: none;",4,"ngIf"],[1,"list-group-item",2,"border","none"]],template:function(e,t){1&e&&(d.ɵɵtemplate(0,k,4,2,"ng-template",null,0,d.ɵɵtemplateRefExtractor),d.ɵɵtemplate(2,H,1,1,"ng-template",null,1,d.ɵɵtemplateRefExtractor),d.ɵɵelementStart(4,"div",2),d.ɵɵelementStart(5,"div",3),d.ɵɵelementStart(6,"div",4),d.ɵɵelement(7,"ngx-spinner",5),d.ɵɵelementStart(8,"div",2),d.ɵɵelementStart(9,"div",3),d.ɵɵelementStart(10,"span",6),d.ɵɵlistener("click",(function(){return t.togglePanelOpen()})),d.ɵɵpipe(11,"localize"),d.ɵɵnamespaceSVG(),d.ɵɵelementStart(12,"svg",7),d.ɵɵelementStart(13,"g"),d.ɵɵelement(14,"path",8),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵtemplate(15,B,2,7,"i",9),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵtemplate(16,ee,3,1,"div",10),d.ɵɵtemplate(17,me,26,12,"div",11),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd()),2&e&&(d.ɵɵadvance(7),d.ɵɵproperty("fullScreen",!1)("name",t.CONSTANTS.OVERLAY),d.ɵɵadvance(3),d.ɵɵproperty("title",d.ɵɵpipeBind1(11,6,0===t.panelSize?"explorer.resize.openLayerPanel":"explorer.resize.closeLayerPanel")),d.ɵɵadvance(5),d.ɵɵproperty("ngIf",2===t.panelSize&&t.layers.length>0||1===t.panelSize),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",0!==t.panelSize&&t.layers.length>0),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",2===t.panelSize))},directives:[u.NgxSpinnerComponent,v.NgIf,p.RouterLinkWithHref,p.RouterLinkActive,b.LocalizeComponent,v.NgClass,v.NgForOf,S.DateTextComponent,C.BooleanFieldComponent,v.NgStyle,E.CdkDropList,E.CdkDrag,E.CdkDragPlaceholder,x.ɵangular_packages_forms_forms_ba,x.NgControlStatusGroup,x.NgForm,O.DateFieldComponent,v.NgTemplateOutlet],pipes:[I.LocalizePipe],styles:[".map-button.visualize-mode-toggle[_ngcontent-%COMP%] {\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 7px;\n  padding-top: 14px;  \n}\n\n.visualize-mode-toggle.map[_ngcontent-%COMP%] {\n  right: 50px;\n}\n.visualize-mode-toggle.hierarchy[_ngcontent-%COMP%] {\n  right: 50px;\n}\n\n.visualize-mode-hierarchy[_ngcontent-%COMP%] {\n\tcolor: black;\n}\n\n.visualize-mode-toggle[_ngcontent-%COMP%]    > i[_ngcontent-%COMP%] {\n\tfont-size: 25px;\n}\n\n.map-view-port[_ngcontent-%COMP%] {\n  height: calc(100vh - 50px);\n}\n\n.base-layer-panel[_ngcontent-%COMP%]{\n  position:absolute;\n  top: 5px;\n  right: 5px;\n  z-index:3;\n  padding:5px;\n}\n\n.map-button[_ngcontent-%COMP%] {\n    background-color: white;\n    margin:0;\n    padding:0;\n    z-index:1001;\n    border-radius: 4px;\n    width: 46px; \n    width: fit-content;\n    margin-bottom: 20px;\n}\n.map-button-icon[_ngcontent-%COMP%] {\n    font-size:12px;\n    text-align: center;\n    width: 38px;\n    height: 30px;\n    vertical-align: middle;\n}\n.map-button-icon[_ngcontent-%COMP%]    > span.glyphicon[_ngcontent-%COMP%] {\n    line-height: 30px;\n}\n\n\n\n.site-explorer-list[_ngcontent-%COMP%] {\n  padding: 20px;\n  height: calc(100vh - 106px);\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.location-management-widget-section[_ngcontent-%COMP%] {\n\tmargin: 5px 0;\n}\n.location-management-widget-section[_ngcontent-%COMP%]    > select[_ngcontent-%COMP%] {\n\tfloat: none !important;\n}\n\n.list-group-item[_ngcontent-%COMP%] {\n\tborder: none;\n\tborder-bottom: 1px solid #ddd;\n\tmargin-bottom: 0;\n}\n.list-group-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n\n.breadcrumb[_ngcontent-%COMP%]{\n\tpadding: 10px 0;\n\tbackground-color: white;\n\tmargin:0;\n}\n\n.layer-toggle[_ngcontent-%COMP%] {\n\tbackground: #fff; \n\tpadding: 5px; \n\tborder-radius: 4px;\n\twidth: fit-content;\n\tmax-height: calc(100vh - 175px);\n\toverflow-y:auto;\n\toverflow-x:clip;\n}\n.layer-toggle[_ngcontent-%COMP%]   .fa-bars[_ngcontent-%COMP%] {\n    cursor: pointer; \n}\n.layer-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\n    width: 27px;\n    height: 27px;\n}\n\n.layer-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n.layer-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n\tmargin-left: 5px;\n}\n\n.arrow[_ngcontent-%COMP%] {\n  border: solid black;\n  border-width: 0 1px 1px 0;\n  display: inline-block;\n  padding: 5px;\n}\n.arrow-right[_ngcontent-%COMP%] {\n  transform: rotate(-45deg);\n  -webkit-transform: rotate(-45deg);\n}\n.arrow-down[_ngcontent-%COMP%] {\n  transform: rotate(45deg);\n  -webkit-transform: rotate(45deg);\n}\n\n.fa.fa-arrow-left[_ngcontent-%COMP%]::before {\n\tmargin-right:5px;\n}\n\n.panel-toggle[_ngcontent-%COMP%] {\n\tposition: absolute;\n\n\tpadding: 15px 0;\n\tbackground-color: white;\n\tz-index:9;\n\t\n\tborder-color: #6BA542;\n    border-color: var(--theme-input-text-border-active);\n    outline: 0;\n    -webkit-box-shadow: inset 0 1px 1px rgb(0 0 0 / 8%), 0 0 8px rgb(107 165 66 / 60%);\n    box-shadow: inset 0 1px 1px rgb(0 0 0 / 8%), 0 0 8px rgb(107 165 66 / 60%);\n}\n[_nghost-%COMP%]     .panel-toggle input.date-input-element {\n\tborder-radius: 5px;\n\tborder-bottom-right-radius: 0;\n    border-top-right-radius: 0;\n    border: 1px solid #ccc;\n}\n.panel-toggle.detached[_ngcontent-%COMP%] {\n\tborder-radius: 3px;\n    margin: 10px 0px 10px 10px;\n    padding: 5px;\n}\n.panel-toggle.detached[_ngcontent-%COMP%]    > .col-md-12[_ngcontent-%COMP%]{\n\tpadding-right:0;\n\tpadding-left:0;\n}\n\n\n.layer-toggle-wrapper[_ngcontent-%COMP%] {\n    display: flex;\n    justify-content: left;\n    align-items: center;\n    margin: 3px 0;\n    padding-left: 20px;\n}\n\n.label-wrapper[_ngcontent-%COMP%] {\n    margin-left: 5px;\n    display: inline-block;\n}\n.label-wrapper[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%] {\n    vertical-align: middle;\n}\n.label-wrapper[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]:hover {\n    color: #6BA542;\n    color: var(--theme-submit-button-color);\n    cursor: pointer;\n}\n\n\n.full-height-sidebar[_ngcontent-%COMP%] {\n\theight: calc(100vh - 120px);\n\toverflow:auto;top: 70px;\n\tbackground:white;\n}\n.full-height-sidebar.max-height[_ngcontent-%COMP%] {\n\theight: calc(100vh - 50px);\n\ttop: 0;\n}\n\n.collapse-sidebar[_ngcontent-%COMP%], .collapse-sidebar[_ngcontent-%COMP%]   [class*='col-'][_ngcontent-%COMP%] {\n\twidth: 10px;\n\toverflow: visible;\n\tpadding: 0;\n}\n.collapse-sidebar[_ngcontent-%COMP%]   .panel-toggle[_ngcontent-%COMP%] {\n\tdisplay:none;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.cdk-drag-preview[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  border-radius: 4px;\n  box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),\n              0 8px 10px 1px rgba(0, 0, 0, 0.14),\n              0 3px 14px 2px rgba(0, 0, 0, 0.12);\n}\n\n.cdk-drag-animating[_ngcontent-%COMP%] {\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n}\n\n\n\n\n\n\n\n\n\n.custom-placeholder[_ngcontent-%COMP%] {\n  background: #ccc;\n  border: dotted 3px #999;\n  min-height: 40px;\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n}\n\n.col-fixed-50[_ngcontent-%COMP%]{\n  width:50px;\n  position:fixed;\n  height:100%;\n}",".layer-toggle-wrapper[_ngcontent-%COMP%] {\n\tpadding-left: 0;\n}"]}),e}();t.LayerPanelComponent=ge,("undefined"==typeof ngDevMode||ngDevMode)&&d.ɵsetClassMetadata(ge,[{type:i.Component,args:[{selector:"layer-panel",templateUrl:"./layer-panel.component.html",styleUrls:["./location-manager.css","./layer-panel.css"]}]}],(function(){return[{type:p.ActivatedRoute},{type:p.Router},{type:u.NgxSpinnerService},{type:m.ListTypeService},{type:g.GeometryService},{type:h.RegistryService},{type:f.RelationshipVisualizationService},{type:y.LocalizationService},{type:m.ListTypeService}]}),{filter:[{type:i.Input}],includeSearchLayer:[{type:i.Input}],visualizeMode:[{type:i.Input}],baseLayerChange:[{type:i.Output}],create:[{type:i.Output}],panelSize:[{type:i.Input}],panelSizeChange:[{type:i.Output}]})},1161:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryPanelComponent=void 0;var i=n(0),r=n(2),o=n(378),a=(n(25),n(194),n(5)),l=n(0),s=n(25),c=n(194),d=n(1),p=n(18),u=n(88),m=n(382),g=n(162),h=["dateFieldComponents"];function f(e,t){1&e&&(l.ɵɵelementStart(0,"div",11),l.ɵɵelement(1,"localize",12),l.ɵɵelementEnd())}function y(e,t){1&e&&(l.ɵɵelementStart(0,"p",23),l.ɵɵelement(1,"localize",24),l.ɵɵelementEnd())}function v(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"tr",37),l.ɵɵelementStart(1,"td",38),l.ɵɵelementStart(2,"button",39),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=l.ɵɵnextContext(),t=e.$implicit,i=e.index;return l.ɵɵnextContext(2).edit(t,i)})),l.ɵɵelement(3,"localize",40),l.ɵɵelementEnd(),l.ɵɵelementStart(4,"button",41),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=l.ɵɵnextContext().$implicit;return l.ɵɵnextContext(2).onCloneGeometryToNewVersion(e)})),l.ɵɵelement(5,"localize",42),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}}var b=function(e,t){return{"error-message":e,"warning-message":t}};function S(e,t){if(1&e&&(l.ɵɵelementStart(0,"p",25),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=t.$implicit;l.ɵɵproperty("ngClass",l.ɵɵpureFunction2(2,b,"ERROR"===n.type,"WARNING"===n.type)),l.ɵɵadvance(1),l.ɵɵtextInterpolate1(" ",n.message," ")}}function C(e,t){if(1&e&&(l.ɵɵelementStart(0,"tr"),l.ɵɵtemplate(1,S,2,5,"p",19),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext().$implicit;l.ɵɵadvance(1),l.ɵɵproperty("ngForOf",n.conflictMessage)}}var E=function(e,t){return{"error-border":e,"warning-border":t}},x=function(e){return{active:e}};function O(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"tr",25),l.ɵɵelementStart(1,"td",25),l.ɵɵelementStart(2,"table"),l.ɵɵtemplate(3,v,6,0,"tr",26),l.ɵɵelementStart(4,"tr",27),l.ɵɵelementStart(5,"td"),l.ɵɵelementStart(6,"h5"),l.ɵɵelement(7,"localize",28),l.ɵɵelementEnd(),l.ɵɵelementStart(8,"date-field",29,30),l.ɵɵlistener("valueChange",(function(e){return t.$implicit.startDate=e}))("change",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext(2).onDateChange()})),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(10,"td"),l.ɵɵelementStart(11,"div",31),l.ɵɵelementStart(12,"h5"),l.ɵɵelement(13,"localize",32),l.ɵɵelementEnd(),l.ɵɵelementStart(14,"date-field",33,30),l.ɵɵlistener("valueChange",(function(e){return t.$implicit.endDate=e}))("change",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext(2).onDateChange()})),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(16,C,2,1,"tr",34),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(17,"td",35),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=t.$implicit;return l.ɵɵnextContext(2).remove(e)})),l.ɵɵpipe(18,"localize"),l.ɵɵelement(19,"i",36),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=t.index,o=l.ɵɵnextContext(2);l.ɵɵproperty("ngClass",l.ɵɵpureFunction2(17,E,i.conflictMessage&&i.conflictMessage.length>0&&"ERROR"===i.conflictMessage[0].type,i.conflictMessage&&i.conflictMessage.length>0&&"WARNING"===i.conflictMessage[0].type)),l.ɵɵadvance(1),l.ɵɵproperty("ngClass",l.ɵɵpureFunction1(20,x,r===o.isVersionForHighlight)),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",o.geoObjectType.isGeometryEditable),l.ɵɵadvance(5),l.ɵɵproperty("value",i.startDate)("inputName","startDate_"+r)("allowFutureDates",!1)("required",!0),l.ɵɵadvance(6),l.ɵɵproperty("value",i.endDate)("inputName","endDate_"+r)("allowInfinity",!0)("allowFutureDates",!0)("required",!0)("placement","bottom"),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",i.conflictMessage&&i.conflictMessage.length>0),l.ɵɵadvance(1),l.ɵɵproperty("title",l.ɵɵpipeBind1(18,15,"changeovertime.manageVersions.remove.version"))}}function I(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",13),l.ɵɵelementStart(1,"ul",14),l.ɵɵelementStart(2,"li",15),l.ɵɵelementStart(3,"table",16),l.ɵɵelementStart(4,"tbody",17),l.ɵɵtemplate(5,y,2,0,"p",18),l.ɵɵtemplate(6,O,20,22,"tr",19),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"li",20),l.ɵɵelementStart(8,"i",21),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().onAddNewVersion(null)})),l.ɵɵelement(9,"localize",22),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var i=l.ɵɵnextContext();l.ɵɵadvance(5),l.ɵɵproperty("ngIf",0===i.geoObjectOverTime.attributes.geometry.values.length),l.ɵɵadvance(1),l.ɵɵproperty("ngForOf",i.geoObjectOverTime.attributes.geometry.values)}}function M(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"button",41),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().onCancel()})),l.ɵɵelement(1,"localize",43),l.ɵɵelementEnd()}}function w(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"button",44),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().onSubmit()})),l.ɵɵelement(1,"localize",45),l.ɵɵelementEnd()}if(2&e){var i=l.ɵɵnextContext(),r=l.ɵɵreference(3);l.ɵɵproperty("disabled",!i.isValid||!r.valid)}}var T=function(){function e(e,t,n){this.lService=e,this.changeDetectorRef=t,this.dateService=n,this.currentDate=new Date,this.isValid=!0,this.message=null,this.readonly=!1,this.hasConflict=!1,this.onChange=new i.EventEmitter,this.onCloneGeometry=new i.EventEmitter,this.onEdit=new i.EventEmitter,this.isNewGeoObject=!1,this.hasDuplicateDate=!1}return Object.defineProperty(e.prototype,"geoObjectOverTimeInput",{set:function(e){this.originalGeoObjectOverTime=JSON.parse(JSON.stringify(e)),this.geoObjectOverTime=e},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.checkDateFieldValidity=function(){for(var e=this.dateFieldComponentsArray.toArray(),t=0;t<e.length;t++){if(!e[t].valid)return!1}return!0},e.prototype.onDateChange=function(){this.hasConflict=!1,this.isValid=this.checkDateFieldValidity();var e=this.geoObjectOverTime.attributes.geometry.values;this.hasConflict=this.dateService.checkRanges(null,e)},e.prototype.edit=function(e,t){this.onEdit.emit(e),this.isVersionForHighlight=t},e.prototype.onAddNewVersion=function(e){var t=this.geoObjectOverTime.attributes.geometry.values,n=new o.ValueOverTime;n.startDate=null,n.endDate=null,e&&e.value?n.value=e.value:n.value={type:this.geoObjectType.geometryType,coordinates:[]},"MULTIPOLYGON"===this.geoObjectType.geometryType?n.value.type="MultiPolygon":"POLYGON"===this.geoObjectType.geometryType?n.value.type="Polygon":"POINT"===this.geoObjectType.geometryType?n.value.type="Point":"MULTIPOINT"===this.geoObjectType.geometryType?n.value.type="MultiPoint":"LINE"===this.geoObjectType.geometryType?n.value.type="Line":"MULTILINE"===this.geoObjectType.geometryType?n.value.type="MultiLine":"MIXED"===this.geoObjectType.geometryType&&(n.value.type="Mixed"),t.push(n),this.changeDetectorRef.detectChanges()},e.prototype.getVersionData=function(e){var t=[];return this.geoObjectOverTime.attributes[e.code].values.forEach((function(e){e.value.localeValues.forEach((function(e){t.push(e)}))})),t},e.prototype.getDefaultLocaleVal=function(e){var t=null;return e.localeValues.forEach((function(e){"defaultLocale"===e.locale&&(t=e.value)})),t},e.prototype.setDateAttribute=function(e,t){e.value=new Date(t).getTime().toString()},e.prototype.remove=function(e){for(var t=this.geoObjectOverTime.attributes.geometry,n=-1,i=0;i<t.values.length;i++){t.values[i].startDate===e.startDate&&(n=i)}n>-1&&t.values.splice(n,1)},e.prototype.formatDate=function(e){var t=a.localeData(e).longDateFormat("L");return a().format(t)},e.prototype.setInfinity=function(e,t){e.endDate===o.PRESENT?e.endDate=new Date:e.endDate=o.PRESENT,this.onDateChange()},e.prototype.sort=function(e){e.sort((function(e,t){return null==e.startDate||""===e.startDate?1:null==t.startDate||""===t.startDate?-1:new Date(e.startDate)-new Date(t.startDate)}))},e.prototype.onCloneGeometryToNewVersion=function(e){this.onAddNewVersion(e)},e.prototype.onSubmit=function(){this.onChange.emit(this.geoObjectOverTime)},e.prototype.onCancel=function(){this.onChange.emit(this.originalGeoObjectOverTime)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(s.LocalizationService),l.ɵɵdirectiveInject(l.ChangeDetectorRef),l.ɵɵdirectiveInject(c.DateService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["geometry-panel"]],viewQuery:function(e,t){if(1&e&&l.ɵɵviewQuery(h,1),2&e){var n;l.ɵɵqueryRefresh(n=l.ɵɵloadQuery())&&(t.dateFieldComponentsArray=n)}},hostVars:1,hostBindings:function(e,t){2&e&&l.ɵɵsyntheticHostProperty("@fadeInOut",!0)},inputs:{geoObjectType:"geoObjectType",geoObjectOverTimeInput:"geoObjectOverTimeInput",isNewGeoObject:"isNewGeoObject"},outputs:{onChange:"onChange",onCloneGeometry:"onCloneGeometry",onEdit:"onEdit"},decls:13,vars:4,consts:[["class","alert alert-danger","role","alert",4,"ngIf"],["autocomplete","off",1,"modal-form"],["versionsform","ngForm"],[1,"row"],[1,"col-md-12"],["class","attribute-version-wrapper",4,"ngIf"],[1,"row-holder"],[1,"holder",2,"border","none","width","100%"],[1,"button-holder","pull-right"],["type","submit","class","btn btn-default","role","button",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary","role","button",3,"disabled","click",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["key","changeovertime.manageVersions.duplicateDate"],[1,"attribute-version-wrapper"],[1,"list-group"],[1,"list-group-item",2,"text-align","left","padding","0"],[1,"table","table-striped"],[1,"attribute-element-wrapper"],["class","message",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"list-group-item",2,"text-align","left"],[1,"fa","fa-plus","clickable",3,"click"],["key","changeovertime.manageVersions.newVersion"],[1,"message"],["key","changeovertime.manageVersions.no.versions.message"],[3,"ngClass"],["class","attribute-value-row",4,"ngIf"],[1,"attribute-date-input-row"],["key","changeovertime.manageVersions.tableHeader.label.startDate"],["label","",3,"value","inputName","allowFutureDates","required","valueChange","change"],["dateFieldComponents",""],[1,"version-edit-date-container"],["key","changeovertime.manageVersions.tableHeader.label.endDate"],["label","",3,"value","inputName","allowInfinity","allowFutureDates","required","placement","valueChange","change"],[4,"ngIf"],[1,"manage-version-button","clickable",2,"vertical-align","middle",3,"title","click"],[1,"fa","fa-times"],[1,"attribute-value-row"],["colspan","2"],["role","button",1,"btn","btn-primary",3,"click"],["key","changeovertime.manageVersions.geometry.edit"],["type","submit","role","button",1,"btn","btn-default",3,"click"],["key","changeovertime.manageVersions.copy.geometry.button"],["key","io.cancel"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","modal.button.submit"]],template:function(e,t){1&e&&(l.ɵɵelementStart(0,"div"),l.ɵɵtemplate(1,f,2,0,"div",0),l.ɵɵelementStart(2,"form",1,2),l.ɵɵelementStart(4,"fieldset"),l.ɵɵelementStart(5,"div",3),l.ɵɵelementStart(6,"div",4),l.ɵɵtemplate(7,I,10,2,"div",5),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(8,"div",6),l.ɵɵelementStart(9,"div",7),l.ɵɵelementStart(10,"div",8),l.ɵɵtemplate(11,M,2,0,"button",9),l.ɵɵtemplate(12,w,2,1,"button",10),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e&&(l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.hasDuplicateDate),l.ɵɵadvance(6),l.ɵɵproperty("ngIf",t.geoObjectOverTime),l.ɵɵadvance(4),l.ɵɵproperty("ngIf",!t.readonly),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",!t.readonly))},directives:[d.NgIf,p.ɵangular_packages_forms_forms_ba,p.NgControlStatusGroup,p.NgForm,u.LocalizeComponent,d.NgForOf,d.NgClass,m.DateFieldComponent],pipes:[g.LocalizePipe],styles:['@charset "UTF-8";\n\n.active[_ngcontent-%COMP%] {\n\tbackground-color: #f4fcef !important;\n\tborder: solid 1px #6BA542;\n}'],data:{animation:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")]),r.transition(":leave",r.animate("500ms",r.style({opacity:0})))])]]}}),e}();t.GeometryPanelComponent=T,("undefined"==typeof ngDevMode||ngDevMode)&&l.ɵsetClassMetadata(T,[{type:i.Component,args:[{selector:"geometry-panel",templateUrl:"./geometry-panel.component.html",styleUrls:["./geometry-panel.css"],host:{"[@fadeInOut]":"true"},animations:[[r.trigger("fadeInOut",[r.transition("void => *",[r.style({opacity:0}),r.animate("500ms")]),r.transition(":leave",r.animate("500ms",r.style({opacity:0})))])]]}]}],(function(){return[{type:s.LocalizationService},{type:l.ChangeDetectorRef},{type:c.DateService}]}),{dateFieldComponentsArray:[{type:i.ViewChildren,args:["dateFieldComponents"]}],onChange:[{type:i.Output}],onCloneGeometry:[{type:i.Output}],onEdit:[{type:i.Output}],geoObjectType:[{type:i.Input}],geoObjectOverTimeInput:[{type:i.Input}],isNewGeoObject:[{type:i.Input}]})},1162:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectTypePipe=void 0;var i=n(0),r=n(0),o=function(){function e(){}return e.prototype.transform=function(e,t){if(!e||!t)return e;var n=[];return this.buildUnassignedGeoObjTypes(t,n),e.filter((function(e){return-1===n.indexOf(e.code)}))},e.prototype.buildUnassignedGeoObjTypes=function(e,t){var n=this;e.forEach((function(e){n.processHierarchyNodes(e,t)}))},e.prototype.processHierarchyNodes=function(e,t){var n=this;t.push(e.geoObjectType),e.children.forEach((function(e){n.processHierarchyNodes(e,t)}))},e.ɵfac=function(t){return new(t||e)},e.ɵpipe=r.ɵɵdefinePipe({name:"geoobjecttype",type:e,pure:!1}),e}();t.GeoObjectTypePipe=o,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(o,[{type:i.Pipe,args:[{name:"geoobjecttype",pure:!1}]}],null,null)},1163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectAttributeExcludesPipe=void 0;var i=n(0),r=n(0),o=function(){function e(){}return e.prototype.transform=function(e,t){return e&&t?e.filter((function(e){return-1===t.indexOf(e.code)})):e},e.ɵfac=function(t){return new(t||e)},e.ɵpipe=r.ɵɵdefinePipe({name:"geoObjectAttributeExcludesFilter",type:e,pure:!0}),e}();t.GeoObjectAttributeExcludesPipe=o,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(o,[{type:i.Pipe,args:[{name:"geoObjectAttributeExcludesFilter",pure:!0}]}],null,null)},1164:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToEpochDateTimePipe=void 0;var i=n(0),r=n(0),o=function(){function e(){}return e.prototype.transform=function(e){return e?new Date(e).getTime():e},e.ɵfac=function(t){return new(t||e)},e.ɵpipe=r.ɵɵdefinePipe({name:"toEpochDateTime",type:e,pure:!0}),e}();t.ToEpochDateTimePipe=o,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(o,[{type:i.Pipe,args:[{name:"toEpochDateTime",pure:!0}]}],null,null)},1165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistryRoutingModule=void 0;var i=n(0),r=n(1),o=n(57),a=n(1039),l=n(1067),s=n(1093),c=n(1100),d=n(1101),p=n(1102),u=n(1109),m=n(1112),g=n(1115),h=n(1116),f=n(1117),y=n(222),v=n(1123),b=n(1127),S=n(1129),C=n(1130),E=n(1134),x=n(1136),O=n(1126),I=n(1137),M=n(0),w=n(57),T=[{path:"",component:a.HierarchyComponent,canActivate:[y.AuthGuard]},{path:"hierarchies",component:a.HierarchyComponent,canActivate:[y.AuthGuard]},{path:"data",component:s.DataPageComponent,canActivate:[y.MaintainerGuard]},{path:"change-requests",component:c.ChangeRequestPageComponent,canActivate:[y.ContributerGuard]},{path:"change-requests/:oid",component:c.ChangeRequestPageComponent,canActivate:[y.ContributerGuard]},{path:"master-lists",component:C.ListTypeManagerComponent,canActivate:[y.AuthGuard]},{path:"master-list/:oid",component:E.ListComponent,canActivate:[y.AuthGuard]},{path:"scheduled-jobs",component:d.ScheduledJobsComponent,canActivate:[y.MaintainerGuard]},{path:"job/:oid",component:p.JobComponent,canActivate:[y.MaintainerGuard]},{path:"change-request",component:l.SubmitChangeRequestComponent,canActivate:[y.ContributerGuard]},{path:"tasks",component:u.TaskViewerComponent,canActivate:[y.MaintainerGuard]},{path:"synchronization-configs",component:m.SynchronizationConfigManagerComponent,canActivate:[y.AuthGuard]},{path:"synchronization-config/:oid",component:g.SynchronizationConfigComponent,canActivate:[y.AuthGuard]},{path:"location-manager",component:f.LocationManagerComponent,canActivate:[y.AuthGuard]},{path:"sync/details/:config/:oid",component:h.SyncDetailsComponent,canActivate:[y.MaintainerGuard]},{path:"curation-job/:oid",component:x.CurationJobComponent,canActivate:[y.MaintainerGuard]},{path:"historical-events",component:S.HistoricalEventModuleComponent,canActivate:[y.ContributerGuard]},{path:"business-types",component:v.BusinessTypeManagerComponent,canActivate:[y.AuthGuard]},{path:"business-importer",component:b.BusinessImporterComponent,canActivate:[y.AuthGuard]},{path:"business-type/:oid",component:O.BusinessTableComponent,canActivate:[y.AuthGuard]},{path:"classification-type",component:I.ClassificationTypeManagerComponent,canActivate:[y.AuthGuard]}],k=function(){function e(){}return e.ɵfac=function(t){return new(t||e)},e.ɵmod=M.ɵɵdefineNgModule({type:e}),e.ɵinj=M.ɵɵdefineInjector({providers:[{provide:r.LocationStrategy,useClass:r.HashLocationStrategy}],imports:[[o.RouterModule.forChild(T)],o.RouterModule]}),e}();t.RegistryRoutingModule=k,("undefined"==typeof ngJitMode||ngJitMode)&&M.ɵɵsetNgModuleScope(k,{imports:[w.RouterModule],exports:[o.RouterModule]}),("undefined"==typeof ngDevMode||ngDevMode)&&M.ɵsetClassMetadata(k,[{type:i.NgModule,args:[{imports:[o.RouterModule.forChild(T)],exports:[o.RouterModule],providers:[{provide:r.LocationStrategy,useClass:r.HashLocationStrategy}]}]}],null,null)},1166:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClassificationNode=t.Classification=t.ClassificationType=void 0;var i=function(){};t.ClassificationType=i;var r=function(){};t.Classification=r;var o=function(){};t.ClassificationNode=o},1167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecordPanelComponent=void 0;var i=n(0),r=(n(1043),n(0)),o=n(18),a=n(1),l=n(88);function s(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"li",10),r.ɵɵelementStart(1,"div",11),r.ɵɵelementStart(2,"div",12),r.ɵɵelementStart(3,"h4",13),r.ɵɵelementStart(4,"span"),r.ɵɵtext(5),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(6,"div",14),r.ɵɵelementStart(7,"input",15),r.ɵɵlistener("ngModelChange",(function(e){r.ɵɵrestoreView(n);var i=t.$implicit;return r.ɵɵnextContext().record.data[i.name]=e})),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var i=t.$implicit,o=r.ɵɵnextContext();r.ɵɵadvance(5),r.ɵɵtextInterpolate1(" ",i.label," "),r.ɵɵadvance(2),r.ɵɵproperty("ngModel",o.record.data[i.name])("name","mod-"+i.name)}}var c=function(){function e(){this.close=new i.EventEmitter}return e.prototype.onClose=function(){this.close.emit()},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["record-panel"]],inputs:{record:"record"},outputs:{close:"close"},decls:16,vars:2,consts:[[1,"row"],[1,"col-md-12"],["name","geobject-shared-attribute-editor",1,"modal-form"],["attributeForm","ngForm"],[1,"text"],[1,"list-group"],["class","list-group-item","style","text-align:left;border:none;padding:0;",4,"ngFor","ngForOf"],[1,"button-holder","text-right",2,"margin-bottom","20px"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],[1,"list-group-item",2,"text-align","left","border","none","padding","0"],[1,"panel","panel-default"],[1,"panel-heading"],[2,"margin","0"],[1,"panel-body"],["type","text","disabled","true",3,"ngModel","name","ngModelChange"]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div"),r.ɵɵelementStart(1,"div",0),r.ɵɵelementStart(2,"div",1),r.ɵɵelementStart(3,"h3"),r.ɵɵtext(4),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(5,"form",2,3),r.ɵɵelementStart(7,"fieldset"),r.ɵɵelementStart(8,"div",0),r.ɵɵelementStart(9,"div",1),r.ɵɵelement(10,"span",4),r.ɵɵelementStart(11,"ul",5),r.ɵɵtemplate(12,s,8,3,"li",6),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(13,"div",7),r.ɵɵelementStart(14,"button",8),r.ɵɵlistener("click",(function(){return t.onClose()})),r.ɵɵelement(15,"localize",9),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(4),r.ɵɵtextInterpolate(t.record.typeLabel.localizedValue),r.ɵɵadvance(8),r.ɵɵproperty("ngForOf",t.record.attributes))},directives:[o.ɵangular_packages_forms_forms_ba,o.NgControlStatusGroup,o.NgForm,a.NgForOf,l.LocalizeComponent,o.DefaultValueAccessor,o.NgControlStatus,o.NgModel],styles:["#hierarchy-tree-container[_ngcontent-%COMP%] {\n\theight: calc(100vh - 429px);\n    overflow-y: auto;\n}\n\n.location-management-widget-section[_ngcontent-%COMP%] {\n\tmargin: 5px 0;\n}\n.location-management-widget-section[_ngcontent-%COMP%]    > select[_ngcontent-%COMP%] {\n\tfloat: none !important;\n}\n\n.list-group-item[_ngcontent-%COMP%] {\n\tborder: none;\n\tborder-bottom: 1px solid #ddd;\n\tmargin-bottom: 0;\n}\n.list-group-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n\n.breadcrumb[_ngcontent-%COMP%]{\n\tpadding: 10px 0;\n\tbackground-color: white;\n\tmargin:0;\n}\n\n.layer-toggle[_ngcontent-%COMP%] {\n\tcursor: pointer; \n\tbackground: #fff; \n\tpadding: 8px; \n\tborder-radius: 4px;\n\twidth: fit-content;\n}\n\n.layer-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n.layer-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n\tmargin-left: 5px;\n}\n\n#attributes-header[_ngcontent-%COMP%] {\n\tbackground: #adadad;\n  padding: 2px 15px;\n  margin: 10px 0;\n  color: white;\n  border-radius: 3px;\n}"]}),e}();t.RecordPanelComponent=c,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(c,[{type:i.Component,args:[{selector:"record-panel",templateUrl:"./record-panel.component.html",styleUrls:["./dataset-location-manager.css"]}]}],null,{record:[{type:i.Input}],close:[{type:i.Output}]})},1168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CurationProblemModalComponent=void 0;var i=n(0),r=(n(56),n(193)),o=n(1042),a=(n(25),n(1016),n(0)),l=n(1016),s=n(56),c=n(25),d=n(1),p=n(88),u=n(18),m=n(379);function g(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",5),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function h(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",5),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function f(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",10),a.ɵɵelementStart(1,"div",25),a.ɵɵelementStart(2,"div",26),a.ɵɵelement(3,"i",27),a.ɵɵelementStart(4,"p",28),a.ɵɵelementStart(5,"span",29),a.ɵɵelement(6,"localize",30),a.ɵɵtext(7),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"span",29),a.ɵɵelement(9,"localize",31),a.ɵɵtext(10,": "),a.ɵɵelementStart(11,"span",32),a.ɵɵelement(12,"date-text",33),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(13,"div",25),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(7),a.ɵɵtextInterpolate1(": ",n.job.lastRunBy," "),a.ɵɵadvance(5),a.ɵɵproperty("date",n.job.lastRun)}}function y(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"form",6,7),a.ɵɵelementStart(2,"fieldset"),a.ɵɵelementStart(3,"div",8),a.ɵɵtemplate(4,h,2,1,"div",1),a.ɵɵtemplate(5,f,14,2,"div",9),a.ɵɵelementStart(6,"div",10),a.ɵɵelementStart(7,"div",11),a.ɵɵelementStart(8,"div",12),a.ɵɵelementStart(9,"div",13),a.ɵɵelementStart(10,"div",14),a.ɵɵelementStart(11,"h4"),a.ɵɵelementStart(12,"strong"),a.ɵɵelement(13,"localize",15),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(14,"p",16),a.ɵɵtext(15),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(16,"div",17),a.ɵɵelementStart(17,"div",18),a.ɵɵelementStart(18,"button",19),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onEditGeoObject()})),a.ɵɵelement(19,"localize",20),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(20,"div",21),a.ɵɵelementStart(21,"div",8),a.ɵɵelementStart(22,"div",22),a.ɵɵelementStart(23,"button",23),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onCancel()})),a.ɵɵelement(24,"localize",24),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var i=a.ɵɵnextContext();a.ɵɵadvance(4),a.ɵɵproperty("ngIf",null!=i.message),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",i.problem&&i.job),a.ɵɵadvance(10),a.ɵɵtextInterpolate1("",i.getFriendlyProblemType(i.problem.type)," ")}}var v=function(){function e(e,t,n,i){this.service=e,this.bsModalRef=t,this.modalService=n,this.dateService=i,this.message=null,this.readonly=!1,this.edit=!1}return e.prototype.init=function(e,t,n,i){this.version=e,this.problem=t,this.job=n,this.callback=i},e.prototype.getFriendlyProblemType=function(e){return"NO_GEOMETRY"===e?"Missing geometry":e},e.prototype.onEditGeoObject=function(){var e=this,t=this.modalService.show(o.GeoObjectEditorComponent,{backdrop:!0,ignoreBackdropClick:!0});t.content.configureAsExisting(this.problem.goCode,this.problem.typeCode,this.version.forDate,!0),t.content.setMasterListId(this.version.oid),t.content.submitFunction=function(n,i,r){if(null!=r.changeRequest){var o=r.changeRequest,a={historyId:e.job.historyId,problemId:e.problem.id,resolution:"APPLY_GEO_OBJECT",code:e.problem.goCode,typeCode:e.problem.typeCode,actions:o.actions};e.service.submitErrorResolve(a).then((function(){e.callback({action:"RESOLVED",data:e.problem}),t.hide()})).catch((function(e){t.content.error(e)}))}},t.content.setOnSuccessCallback((function(){e.onProblemResolvedListener(e.problem),e.bsModalRef.hide()}))},e.prototype.onProblemResolvedListener=function(e){this.callback({action:"RESOLVED",data:e})},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.ListTypeService),a.ɵɵdirectiveInject(s.BsModalRef),a.ɵɵdirectiveInject(s.BsModalService),a.ɵɵdirectiveInject(c.DateService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["curation-problem-modal"]],decls:6,vars:2,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"text-center"],["key","scheduledjobs.problemdetail.modal.title"],["class","modal-form",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"modal-form"],["form","ngForm"],[1,""],["class","row","style","background: #F4F4F4;\n                                                    border-radius: 10px;\n                                                    margin-bottom: 20px;\n                                                    margin-top: 20px;\n                                                    padding: 10px;",4,"ngIf"],[1,"row",2,"background","#F4F4F4","border-radius","10px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-12"],[1,"row","equal",2,"display","flex","display","-webkit-flex","flex-wrap","wrap"],[1,"col-md-6",2,"padding-right","5px"],[2,"background","white","border-radius","10px","padding","10px","height","100%"],["key","etl.problem.header.problem"],[2,"font-style","italic"],[1,"col-md-6",2,"padding-left","5px"],[2,"background","white","border-radius","10px","padding","10px","height","100%","text-align","center"],["type","submit","role","button",1,"btn","btn-primary",2,"width","90%",3,"click"],["key","scheduledjobs.editGeoObject"],[1,"row-holder"],[1,"button-holder"],["type","button","role","button",1,"btn","btn-default",3,"click"],["key","io.back"],[1,"col-md-6"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"],["key","importproblem.uploaded.by.label"],["key","importproblem.started.date.label"],[1,"date-string-display",2,"margin-left","5px"],[3,"date"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,g,2,1,"div",1),a.ɵɵelementStart(2,"div",2),a.ɵɵelementStart(3,"h2"),a.ɵɵelement(4,"localize",3),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(5,y,25,3,"form",4),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(4),a.ɵɵproperty("ngIf",null!=t.problem))},directives:[d.NgIf,p.LocalizeComponent,u.ɵangular_packages_forms_forms_ba,u.NgControlStatusGroup,u.NgForm,m.DateTextComponent],encapsulation:2}),e}();t.CurationProblemModalComponent=v,("undefined"==typeof ngDevMode||ngDevMode)&&a.ɵsetClassMetadata(v,[{type:i.Component,args:[{selector:"curation-problem-modal",templateUrl:"./curation-problem-modal.component.html",styleUrls:[]}]}],(function(){return[{type:l.ListTypeService},{type:s.BsModalRef},{type:s.BsModalService},{type:c.DateService}]}),null)},1169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessObjectPanelComponent=void 0;var i=n(0),r=(n(1170),n(0)),o=n(18),a=n(1),l=n(379);function s(e,t){if(1&e&&(r.ɵɵelementStart(0,"li",8),r.ɵɵelementStart(1,"div",9),r.ɵɵelementStart(2,"div",10),r.ɵɵelementStart(3,"h4",11),r.ɵɵelementStart(4,"span"),r.ɵɵtext(5),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(6,"div",12),r.ɵɵelementContainerStart(7,13),r.ɵɵelementContainerStart(8,14),r.ɵɵelement(9,"date-text",15),r.ɵɵelementContainerEnd(),r.ɵɵelementContainerStart(10,16),r.ɵɵtext(11),r.ɵɵelementContainerEnd(),r.ɵɵelementContainerEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext().$implicit,i=r.ɵɵnextContext();r.ɵɵadvance(5),r.ɵɵtextInterpolate1(" ",n.label.localizedValue," "),r.ɵɵadvance(4),r.ɵɵproperty("value",i.object.data[n.code]),r.ɵɵadvance(2),r.ɵɵtextInterpolate1(" ",i.object.data[n.code]," ")}}function c(e,t){if(1&e&&(r.ɵɵelementContainerStart(0),r.ɵɵtemplate(1,s,12,3,"li",7),r.ɵɵelementContainerEnd()),2&e){var n=t.$implicit,i=r.ɵɵnextContext();r.ɵɵadvance(1),r.ɵɵproperty("ngIf",null!=i.object.data[n.code])}}var d=function(){function e(){this.close=new i.EventEmitter}return e.prototype.onClose=function(){this.close.emit()},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["business-object-panel"]],inputs:{type:"type",object:"object"},outputs:{close:"close"},decls:13,vars:2,consts:[[1,"row"],[1,"col-md-12"],["name","geobject-shared-attribute-editor",1,"modal-form"],["attributeForm","ngForm"],[1,"text"],[1,"list-group"],[4,"ngFor","ngForOf"],["class","list-group-item","style","text-align:left;border:none;padding:0;",4,"ngIf"],[1,"list-group-item",2,"text-align","left","border","none","padding","0"],[1,"panel","panel-default"],[1,"panel-heading"],[2,"margin","0"],[1,"panel-body"],["ng-switch","attributeType.type"],["ng-switch-when","'date'"],[3,"value"],["ng-switch-default",""]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div"),r.ɵɵelementStart(1,"div",0),r.ɵɵelementStart(2,"div",1),r.ɵɵelementStart(3,"h3"),r.ɵɵtext(4),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(5,"form",2,3),r.ɵɵelementStart(7,"fieldset"),r.ɵɵelementStart(8,"div",0),r.ɵɵelementStart(9,"div",1),r.ɵɵelement(10,"span",4),r.ɵɵelementStart(11,"ul",5),r.ɵɵtemplate(12,c,2,1,"ng-container",6),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(4),r.ɵɵtextInterpolate(t.type.displayLabel.localizedValue),r.ɵɵadvance(8),r.ɵɵproperty("ngForOf",t.type.attributes))},directives:[o.ɵangular_packages_forms_forms_ba,o.NgControlStatusGroup,o.NgForm,a.NgForOf,a.NgIf,l.DateTextComponent],styles:["#hierarchy-tree-container[_ngcontent-%COMP%] {\n\theight: calc(100vh - 429px);\n    overflow-y: auto;\n}\n\n.location-management-widget-section[_ngcontent-%COMP%] {\n\tmargin: 5px 0;\n}\n.location-management-widget-section[_ngcontent-%COMP%]    > select[_ngcontent-%COMP%] {\n\tfloat: none !important;\n}\n\n.list-group-item[_ngcontent-%COMP%] {\n\tborder: none;\n\tborder-bottom: 1px solid #ddd;\n\tmargin-bottom: 0;\n}\n.list-group-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n\n.breadcrumb[_ngcontent-%COMP%]{\n\tpadding: 10px 0;\n\tbackground-color: white;\n\tmargin:0;\n}\n\n.layer-toggle[_ngcontent-%COMP%] {\n\tcursor: pointer; \n\tbackground: #fff; \n\tpadding: 8px; \n\tborder-radius: 4px;\n\twidth: fit-content;\n}\n\n.layer-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n.layer-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n\tmargin-left: 5px;\n}\n\n#attributes-header[_ngcontent-%COMP%] {\n\tbackground: #adadad;\n  padding: 2px 15px;\n  margin: 10px 0;\n  color: white;\n  border-radius: 3px;\n}"]}),e}();t.BusinessObjectPanelComponent=d,("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(d,[{type:i.Component,args:[{selector:"business-object-panel",templateUrl:"./business-object-panel.component.html",styleUrls:["./dataset-location-manager.css"]}]}],null,{type:[{type:i.Input}],object:[{type:i.Input}],close:[{type:i.Output}]})},1170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessObject=t.BusinessTypeByOrg=t.BusinessType=void 0;var i=function(){};t.BusinessType=i;var r=function(){};t.BusinessTypeByOrg=r;var o=function(){};t.BusinessObject=o},558:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistryModule=void 0;var i=n(0),r=n(1),o=n(57),a=n(18),l=n(383),s=n(293),c=n(224),d=n(309),p=n(292),u=n(380),m=n(381),g=n(225),h=n(120),f=n(390),y=n(865),v=n(862),b=n(856),S=n(1079),C=n(1033),E=n(1029),x=n(1039),O=n(1089),I=n(1080),M=n(1147),w=n(1082),T=n(1148),k=n(1057),P=n(1058),j=n(1090),z=n(1062),D=n(1063),R=n(1064),L=n(1091),_=n(1065),A=n(1092),N=n(1066),V=n(1093),F=n(1087),H=n(1035),G=n(1060),B=n(1059),q=n(1084),U=n(1083),$=n(1095),J=n(1152),W=n(1037),Y=n(1153),K=n(1098),Q=n(1154),X=n(1067),Z=n(1100),ee=n(1042),te=n(1099),ne=n(1155),ie=n(1156),re=n(1157),oe=n(1158),ae=n(1094),le=n(1159),se=n(1101),ce=n(1102),de=n(1103),pe=n(1108),ue=n(1105),me=n(1106),ge=n(1107),he=n(1068),fe=n(1104),ye=n(1109),ve=n(1110),be=n(1111),Se=n(1112),Ce=n(1113),Ee=n(1115),xe=n(1116),Oe=n(1117),Ie=n(1160),Me=n(1119),we=n(1161),Te=n(1085),ke=n(1162),Pe=n(1163),je=n(1164),ze=n(1025),De=n(1055),Re=n(1051),Le=n(1026),_e=n(1054),Ae=n(1053),Ne=n(1024),Ve=n(1052),Fe=n(1034),He=n(1114),Ge=n(1028),Be=n(1121),qe=n(1122),Ue=n(1123),$e=n(1126),Je=n(1018),We=n(1124),Ye=n(1125),Ke=n(1127),Qe=n(1128),Xe=n(1129),Ze=n(1165),et=n(387),tt=n(863);n(386);var nt=n(864),it=n(1130),rt=n(1070),ot=n(1016),at=n(1131),lt=n(1132),st=n(1134),ct=n(1133),dt=n(1135),pt=n(1167),ut=n(1120),mt=n(1118),gt=n(1136),ht=n(1168),ft=n(1137),yt=n(1027),vt=n(1138),bt=n(1139),St=n(1140),Ct=n(1021),Et=n(1040),xt=n(1086),Ot=n(1019),It=n(1022),Mt=n(1169),wt=n(1069),Tt=n(0),kt=n(863),Pt=n(1),jt=n(546),zt=n(88),Dt=n(18),Rt=n(221),Lt=n(139),_t=n(856),At=n(382),Nt=n(162),Vt=function(){function e(){}return e.ɵfac=function(t){return new(t||e)},e.ɵmod=Tt.ɵɵdefineNgModule({type:e}),e.ɵinj=Tt.ɵɵdefineInjector({providers:[Fe.MapService,Re.HierarchyService,Le.RelationshipVisualizationService,Ae.LocalizationManagerService,Ne.ChangeRequestService,Ve.IOService,ze.RegistryService,It.RegistryCacheService,De.TaskService,r.DatePipe,je.ToEpochDateTimePipe,he.StepIndicatorComponent,_e.SynchronizationConfigService,Ge.TransitionEventService,Je.BusinessTypeService,wt.BusinessObjectService,ot.ListTypeService,yt.ClassificationTypeService,Ct.ClassificationService,Ot.GeometryService],imports:[[r.CommonModule,o.RouterModule,a.FormsModule,a.ReactiveFormsModule,u.FileUploadModule,l.TreeModule,s.ContextMenuModule,c.BsDropdownModule,d.ButtonsModule,p.TypeaheadModule,g.ProgressbarModule,f.TabsModule,h.CollapseModule,m.NgxPaginationModule,et.SharedModule,Ze.RegistryRoutingModule,y.DndModule,nt.NgxGraphModule,v.DragDropModule,tt.AccordionModule.forRoot(),b.NgxSpinnerModule]]}),e}();t.RegistryModule=Vt,("undefined"==typeof ngJitMode||ngJitMode)&&Tt.ɵɵsetNgModuleScope(Vt,{declarations:[x.HierarchyComponent,O.RelationshipVisualizerComponent,$.RequestTableComponent,J.CreateUpdateGeoObjectDetailComponent,S.ImportTypesModalComponent,ve.FhirExportSynchronizationConfigComponent,He.FhirImportSynchronizationConfigComponent,be.Dhis2SynchronizationConfigComponent,I.CreateHierarchyTypeModalComponent,M.AddChildToHierarchyModalComponent,w.CreateGeoObjTypeModalComponent,T.ManageAttributesModalComponent,k.DefineAttributeModalContentComponent,j.ShapefileModalComponent,z.AttributesPageComponent,D.LocationPageComponent,R.LocationProblemPageComponent,L.LocationProblemComponent,_.TermProblemPageComponent,A.TermProblemComponent,N.SpreadsheetModalComponent,ke.GeoObjectTypePipe,Te.GeoObjectAttributeCodeValidator,P.EditAttributeModalContentComponent,F.TermOptionWidgetComponent,H.AttributeInputComponent,G.EditTermOptionInputComponent,U.ManageGeoObjectTypeModalComponent,q.GeoObjectTypeInputComponent,B.ManageTermOptionsComponent,C.LocalizedInputComponent,E.LocalizedTextComponent,W.GeoObjectSharedAttributeEditorComponent,Y.StabilityPeriodComponent,K.ManageVersionsComponent,Q.StandardAttributeEditorComponent,X.SubmitChangeRequestComponent,ee.GeoObjectEditorComponent,Pe.GeoObjectAttributeExcludesPipe,je.ToEpochDateTimePipe,te.GeoObjectEditorMapComponent,ne.SimpleEditControl,V.DataPageComponent,Z.ChangeRequestPageComponent,ie.CascadingGeoSelector,re.TreeGeoSelector,oe.ActionDetailModalComponent,ae.DataImporterComponent,le.DataExportComponent,dt.ExportFormatModalComponent,se.ScheduledJobsComponent,ce.JobComponent,de.JobConflictModalComponent,pe.ReuploadModalComponent,ue.ParentReferenceProblemWidgetComponent,me.TermReferenceProblemWidgetComponent,ge.RowValidationProblemWidgetComponent,he.StepIndicatorComponent,fe.ImportProblemWidgetComponent,ye.TaskViewerComponent,Se.SynchronizationConfigManagerComponent,Ce.SynchronizationConfigModalComponent,Ee.SynchronizationConfigComponent,xe.SyncDetailsComponent,Oe.LocationManagerComponent,Ie.LayerPanelComponent,Me.FeaturePanelComponent,we.GeometryPanelComponent,Be.TransitionEventTableComponent,qe.TransitionEventModalComponent,pt.RecordPanelComponent,ut.RecordPopupComponent,Mt.BusinessObjectPanelComponent,Ue.BusinessTypeManagerComponent,We.CreateBusinessTypeModalComponent,Ye.ManageBusinessTypeModalComponent,Ke.BusinessImporterComponent,$e.BusinessTableComponent,Qe.HistoricalReportComponent,Xe.HistoricalEventModuleComponent,mt.SelectTypeModalComponent,it.ListTypeManagerComponent,rt.ListTypePublishModalComponent,at.ListsForTypeComponent,lt.ListTypeComponent,st.ListComponent,ct.PublishVersionComponent,gt.CurationJobComponent,ht.CurationProblemModalComponent,ft.ClassificationTypeManagerComponent,vt.ClassificationTypePublishModalComponent,bt.ClassificationTypeComponent,St.ClassificationPublishModalComponent,Et.ClassificationFieldComponent,xt.ClassificationFieldModalComponent],imports:[r.CommonModule,o.RouterModule,a.FormsModule,a.ReactiveFormsModule,u.FileUploadModule,l.TreeModule,s.ContextMenuModule,c.BsDropdownModule,d.ButtonsModule,p.TypeaheadModule,g.ProgressbarModule,f.TabsModule,h.CollapseModule,m.NgxPaginationModule,et.SharedModule,Ze.RegistryRoutingModule,y.DndModule,nt.NgxGraphModule,v.DragDropModule,kt.AccordionModule,b.NgxSpinnerModule]}),("undefined"==typeof ngDevMode||ngDevMode)&&Tt.ɵsetClassMetadata(Vt,[{type:i.NgModule,args:[{imports:[r.CommonModule,o.RouterModule,a.FormsModule,a.ReactiveFormsModule,u.FileUploadModule,l.TreeModule,s.ContextMenuModule,c.BsDropdownModule,d.ButtonsModule,p.TypeaheadModule,g.ProgressbarModule,f.TabsModule,h.CollapseModule,m.NgxPaginationModule,et.SharedModule,Ze.RegistryRoutingModule,y.DndModule,nt.NgxGraphModule,v.DragDropModule,tt.AccordionModule.forRoot(),b.NgxSpinnerModule],declarations:[x.HierarchyComponent,O.RelationshipVisualizerComponent,$.RequestTableComponent,J.CreateUpdateGeoObjectDetailComponent,S.ImportTypesModalComponent,ve.FhirExportSynchronizationConfigComponent,He.FhirImportSynchronizationConfigComponent,be.Dhis2SynchronizationConfigComponent,I.CreateHierarchyTypeModalComponent,M.AddChildToHierarchyModalComponent,w.CreateGeoObjTypeModalComponent,T.ManageAttributesModalComponent,k.DefineAttributeModalContentComponent,j.ShapefileModalComponent,z.AttributesPageComponent,D.LocationPageComponent,R.LocationProblemPageComponent,L.LocationProblemComponent,_.TermProblemPageComponent,A.TermProblemComponent,N.SpreadsheetModalComponent,ke.GeoObjectTypePipe,Te.GeoObjectAttributeCodeValidator,P.EditAttributeModalContentComponent,F.TermOptionWidgetComponent,H.AttributeInputComponent,G.EditTermOptionInputComponent,U.ManageGeoObjectTypeModalComponent,q.GeoObjectTypeInputComponent,B.ManageTermOptionsComponent,C.LocalizedInputComponent,E.LocalizedTextComponent,W.GeoObjectSharedAttributeEditorComponent,Y.StabilityPeriodComponent,K.ManageVersionsComponent,Q.StandardAttributeEditorComponent,X.SubmitChangeRequestComponent,ee.GeoObjectEditorComponent,Pe.GeoObjectAttributeExcludesPipe,je.ToEpochDateTimePipe,te.GeoObjectEditorMapComponent,ne.SimpleEditControl,V.DataPageComponent,Z.ChangeRequestPageComponent,ie.CascadingGeoSelector,re.TreeGeoSelector,oe.ActionDetailModalComponent,ae.DataImporterComponent,le.DataExportComponent,dt.ExportFormatModalComponent,se.ScheduledJobsComponent,ce.JobComponent,de.JobConflictModalComponent,pe.ReuploadModalComponent,ue.ParentReferenceProblemWidgetComponent,me.TermReferenceProblemWidgetComponent,ge.RowValidationProblemWidgetComponent,he.StepIndicatorComponent,fe.ImportProblemWidgetComponent,ye.TaskViewerComponent,Se.SynchronizationConfigManagerComponent,Ce.SynchronizationConfigModalComponent,Ee.SynchronizationConfigComponent,xe.SyncDetailsComponent,Oe.LocationManagerComponent,Ie.LayerPanelComponent,Me.FeaturePanelComponent,we.GeometryPanelComponent,Be.TransitionEventTableComponent,qe.TransitionEventModalComponent,pt.RecordPanelComponent,ut.RecordPopupComponent,Mt.BusinessObjectPanelComponent,Ue.BusinessTypeManagerComponent,We.CreateBusinessTypeModalComponent,Ye.ManageBusinessTypeModalComponent,Ke.BusinessImporterComponent,$e.BusinessTableComponent,Qe.HistoricalReportComponent,Xe.HistoricalEventModuleComponent,mt.SelectTypeModalComponent,it.ListTypeManagerComponent,rt.ListTypePublishModalComponent,at.ListsForTypeComponent,lt.ListTypeComponent,st.ListComponent,ct.PublishVersionComponent,gt.CurationJobComponent,ht.CurationProblemModalComponent,ft.ClassificationTypeManagerComponent,vt.ClassificationTypePublishModalComponent,bt.ClassificationTypeComponent,St.ClassificationPublishModalComponent,Et.ClassificationFieldComponent,xt.ClassificationFieldModalComponent],providers:[Fe.MapService,Re.HierarchyService,Le.RelationshipVisualizationService,Ae.LocalizationManagerService,Ne.ChangeRequestService,Ve.IOService,ze.RegistryService,It.RegistryCacheService,De.TaskService,r.DatePipe,je.ToEpochDateTimePipe,he.StepIndicatorComponent,_e.SynchronizationConfigService,Ge.TransitionEventService,Je.BusinessTypeService,wt.BusinessObjectService,ot.ListTypeService,yt.ClassificationTypeService,Ct.ClassificationService,Ot.GeometryService],entryComponents:[M.AddChildToHierarchyModalComponent,w.CreateGeoObjTypeModalComponent,T.ManageAttributesModalComponent,k.DefineAttributeModalContentComponent,P.EditAttributeModalContentComponent,I.CreateHierarchyTypeModalComponent,j.ShapefileModalComponent,N.SpreadsheetModalComponent,F.TermOptionWidgetComponent,H.AttributeInputComponent,G.EditTermOptionInputComponent,U.ManageGeoObjectTypeModalComponent,q.GeoObjectTypeInputComponent,B.ManageTermOptionsComponent,W.GeoObjectSharedAttributeEditorComponent,X.SubmitChangeRequestComponent,ee.GeoObjectEditorComponent,dt.ExportFormatModalComponent,V.DataPageComponent,Z.ChangeRequestPageComponent,oe.ActionDetailModalComponent,de.JobConflictModalComponent,pe.ReuploadModalComponent,he.StepIndicatorComponent,Ce.SynchronizationConfigModalComponent,We.CreateBusinessTypeModalComponent,Ye.ManageBusinessTypeModalComponent,qe.TransitionEventModalComponent,rt.ListTypePublishModalComponent,ct.PublishVersionComponent,mt.SelectTypeModalComponent,ht.CurationProblemModalComponent,vt.ClassificationTypePublishModalComponent,St.ClassificationPublishModalComponent,xt.ClassificationFieldModalComponent,ut.RecordPopupComponent]}]}],null,null),Tt.ɵɵsetComponentScope(W.GeoObjectSharedAttributeEditorComponent,[Pt.NgIf,Y.StabilityPeriodComponent,jt.BooleanFieldComponent,Pt.NgClass,zt.LocalizeComponent,Dt.ɵangular_packages_forms_forms_ba,Dt.NgControlStatusGroup,Dt.NgForm,Pt.NgForOf,K.ManageVersionsComponent,Dt.DefaultValueAccessor,Dt.RequiredValidator,Dt.NgControlStatus,Dt.NgModel,Q.StandardAttributeEditorComponent],[Pe.GeoObjectAttributeExcludesPipe]),Tt.ɵɵsetComponentScope(oe.ActionDetailModalComponent,[Pt.NgIf,J.CreateUpdateGeoObjectDetailComponent,zt.LocalizeComponent],[]),Tt.ɵɵsetComponentScope(Oe.LocationManagerComponent,[Pt.NgIf,zt.LocalizeComponent,Rt.CgrHeaderComponent,Lt.LoadingBarComponent,Pt.NgClass,_t.NgxSpinnerComponent,At.DateFieldComponent,Dt.DefaultValueAccessor,Dt.NgControlStatus,Dt.NgModel,Pt.NgForOf,Me.FeaturePanelComponent,Mt.BusinessObjectPanelComponent,O.RelationshipVisualizerComponent,Pt.NgStyle,Ie.LayerPanelComponent],[Nt.LocalizePipe]),Tt.ɵɵsetComponentScope(Me.FeaturePanelComponent,[Pt.NgIf,_t.NgxSpinnerComponent,W.GeoObjectSharedAttributeEditorComponent,zt.LocalizeComponent,Dt.DefaultValueAccessor,Dt.RequiredValidator,Dt.NgControlStatus,Dt.NgModel],[]),Tt.ɵɵsetComponentScope(ut.RecordPopupComponent,[Pt.NgIf,Pt.NgForOf,zt.LocalizeComponent],[]),Tt.ɵɵsetComponentScope(mt.SelectTypeModalComponent,[zt.LocalizeComponent,Dt.ɵangular_packages_forms_forms_ba,Dt.NgControlStatusGroup,Dt.NgForm,Pt.NgIf,Dt.SelectControlValueAccessor,Dt.RequiredValidator,Dt.NgControlStatus,Dt.NgModel,Dt.NgSelectOption,Dt.ɵangular_packages_forms_forms_z,Pt.NgForOf],[])}}]);
//# sourceMappingURL=1.chunk.js.map