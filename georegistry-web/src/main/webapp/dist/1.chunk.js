(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistryModule=void 0;n(0);var r=n(1),o=n(28),i=n(27),a=n(183),l=n(184),c=n(131),s=n(194),d=n(175),p=n(247),m=n(246),u=n(132),g=n(185),f=n(252),h=n(1),v=n(553),b=n(565),y=n(590),S=n(591),C=n(592),E=n(593),x=n(596),O=n(597),I=n(599),M=n(603),w=n(573),j=n(574),k=n(575),T=n(604),P=n(576),z=n(605),V=n(606),N=n(607),R=n(600),A=n(551),D=n(602),L=n(601),F=n(595),_=n(594),G=n(609),H=n(552),$=n(610),B=n(611),q=n(641),J=n(642),U=n(644),W=n(554),Q=n(613),Y=n(580),X=n(618),K=n(581),Z=n(577),ee=n(615),te=n(579),ne=n(617),re=n(612),oe=n(608),ie=n(645),ae=n(619),le=n(620),ce=n(621),se=n(622),de=n(623),pe=n(624),me=n(625),ue=n(630),ge=n(627),fe=n(628),he=n(629),ve=n(582),be=n(626),ye=n(631),Se=n(632),Ce=n(633),Ee=n(634),xe=n(635),Oe=n(636),Ie=n(637),Me=n(598),we=n(646),je=n(616),ke=n(578),Te=n(570),Pe=n(572),ze=n(550),Ve=n(571),Ne=n(568),Re=n(566),Ae=n(567),De=n(569),Le=n(549),Fe=n(647),_e=n(251);n(250);var Ge=n(0),He=n(1),$e=n(28),Be=n(27),qe=n(247),Je=n(183),Ue=n(184),We=n(131),Qe=n(194),Ye=n(175),Xe=n(132),Ke=n(252),Ze=n(185),et=n(246),tt=n(44),nt=n(335),rt=n(85),ot=n(178),it=n(86),at=n(179),lt=n(180),ct=n(181),st=n(176),dt=n(336),pt=n(337),mt=n(338),ut=n(182),gt=n(177),ft=n(128),ht=n(130),vt=n(100),bt=n(339),yt=function(){function e(){}return e.ɵmod=Ge.ɵɵdefineNgModule({type:e}),e.ɵinj=Ge.ɵɵdefineInjector({factory:function(t){return new(t||e)},providers:[De.MapService,ze.HierarchyService,Ne.LocalizationManagerService,Re.ChangeRequestService,Ae.IOService,Le.GeoObjectTypeManagementService,Te.RegistryService,Pe.TaskService,h.DatePipe,ke.ToEpochDateTimePipe,ve.StepIndicatorComponent,Ve.SynchronizationConfigService],imports:[[r.CommonModule,o.RouterModule,i.FormsModule,i.ReactiveFormsModule,p.FileUploadModule,a.TreeModule,l.ContextMenuModule,c.BsDropdownModule,s.ButtonsModule,d.TypeaheadModule,u.ProgressbarModule,f.TabsModule,g.CollapseModule,m.NgxPaginationModule,_e.SharedModule,Fe.RegistryRoutingModule]]}),e}();t.RegistryModule=yt,("undefined"==typeof ngJitMode||ngJitMode)&&Ge.ɵɵsetNgModuleScope(yt,{declarations:[y.HierarchyComponent,B.RequestTableComponent,q.CreateUpdateGeoObjectDetailComponent,J.AddRemoveChildDetailComponent,U.SetParentDetailComponent,S.CreateHierarchyTypeModalComponent,C.AddChildToHierarchyModalComponent,E.CreateGeoObjTypeModalComponent,x.ManageAttributesModalComponent,O.DefineAttributeModalContentComponent,M.ShapefileModalComponent,w.AttributesPageComponent,j.LocationPageComponent,k.LocationProblemPageComponent,T.LocationProblemComponent,P.TermProblemPageComponent,z.TermProblemComponent,V.SpreadsheetModalComponent,we.GeoObjectTypePipe,Me.GeoObjectAttributeCodeValidator,I.EditAttributeModalContentComponent,R.TermOptionWidgetComponent,A.AttributeInputComponent,D.EditTermOptionInputComponent,_.ManageGeoObjectTypeModalComponent,F.GeoObjectTypeInputComponent,L.ManageTermOptionsComponent,v.LocalizedInputComponent,b.LocalizedTextComponent,W.GeoObjectSharedAttributeEditorComponent,Q.ManageVersionsModalComponent,Y.SubmitChangeRequestComponent,K.GeoObjectEditorComponent,je.GeoObjectAttributeExcludesPipe,ke.ToEpochDateTimePipe,Z.GeoObjectEditorMapComponent,ee.SimpleEditControl,N.DataPageComponent,X.ChangeRequestPageComponent,te.CascadingGeoSelector,ne.ManageParentVersionsModalComponent,re.ActionDetailModalComponent,y.HierarchyComponent,oe.DataImporterComponent,ie.DataExportComponent,G.MasterListManagerComponent,ae.MasterListComponent,ce.MasterListHistoryComponent,le.PublishedMasterListHistoryComponent,H.PublishModalComponent,se.MasterListViewComponent,$.ExportFormatModalComponent,de.ScheduledJobsComponent,pe.JobComponent,me.JobConflictModalComponent,ue.ReuploadModalComponent,ge.ParentReferenceProblemWidgetComponent,fe.TermReferenceProblemWidgetComponent,he.RowValidationProblemWidgetComponent,ve.StepIndicatorComponent,be.ImportProblemWidgetComponent,ye.TaskViewerComponent,Se.SynchronizationConfigManagerComponent,Ce.SynchronizationConfigModalComponent,Ee.SynchronizationConfigComponent,xe.SyncDetailsComponent,Oe.LocationManagerComponent,Ie.ContextLayerModalComponent],imports:[r.CommonModule,o.RouterModule,i.FormsModule,i.ReactiveFormsModule,p.FileUploadModule,a.TreeModule,l.ContextMenuModule,c.BsDropdownModule,s.ButtonsModule,d.TypeaheadModule,u.ProgressbarModule,f.TabsModule,g.CollapseModule,m.NgxPaginationModule,_e.SharedModule,Fe.RegistryRoutingModule]}),Ge.ɵɵsetComponentScope(re.ActionDetailModalComponent,[He.NgClass,He.NgComponentOutlet,He.NgForOf,He.NgIf,He.NgTemplateOutlet,He.NgStyle,He.NgSwitch,He.NgSwitchCase,He.NgSwitchDefault,He.NgPlural,He.NgPluralCase,$e.RouterOutlet,$e.RouterLink,$e.RouterLinkWithHref,$e.RouterLinkActive,$e.ɵangular_packages_router_router_l,Be.ɵangular_packages_forms_forms_y,Be.NgSelectOption,Be.ɵangular_packages_forms_forms_x,Be.DefaultValueAccessor,Be.NumberValueAccessor,Be.RangeValueAccessor,Be.CheckboxControlValueAccessor,Be.SelectControlValueAccessor,Be.SelectMultipleControlValueAccessor,Be.RadioControlValueAccessor,Be.NgControlStatus,Be.NgControlStatusGroup,Be.RequiredValidator,Be.MinLengthValidator,Be.MaxLengthValidator,Be.PatternValidator,Be.CheckboxRequiredValidator,Be.EmailValidator,Be.NgModel,Be.NgModelGroup,Be.NgForm,Be.FormControlDirective,Be.FormGroupDirective,Be.FormControlName,Be.FormGroupName,Be.FormArrayName,qe.FileDropDirective,qe.FileSelectDirective,Je.TreeComponent,Je.TreeNodeComponent,Je.TreeNodeContent,Je.LoadingComponent,Je.TreeDropDirective,Je.TreeDragDirective,Je.TreeNodeExpanderComponent,Je.TreeNodeChildrenComponent,Je.TreeNodeDropSlot,Je.TreeNodeCollectionComponent,Je.TreeViewportComponent,Je.TreeNodeWrapperComponent,Je.TreeNodeCheckboxComponent,Je.TreeAnimateOpenDirective,Je.TreeMobxAutorunDirective,Ue.ɵa,Ue.ContextMenuComponent,Ue.ɵb,We.BsDropdownMenuDirective,We.BsDropdownToggleDirective,We.BsDropdownDirective,Qe.ButtonCheckboxDirective,Qe.ButtonRadioDirective,Qe.ButtonRadioGroupDirective,Ye.TypeaheadContainerComponent,Ye.TypeaheadDirective,Xe.BarComponent,Xe.ProgressbarComponent,Ke.TabDirective,Ke.TabsetComponent,Ke.TabHeadingDirective,Ke.NgTranscludeDirective,Ze.CollapseDirective,et.PaginationControlsComponent,et.PaginationControlsDirective,tt.LocalizeComponent,nt.BooleanFieldComponent,rt.LoadingBarComponent,ot.ErrorMessageComponent,it.MessageComponent,at.ConfirmModalComponent,lt.ErrorModalComponent,ct.SuccessModalComponent,st.PasswordStrengthBarComponent,dt.OnlyNumber,pt.MustMatchDirective,mt.ValidationComponent,ut.ProgressBarComponent,gt.ModalStepIndicatorComponent,ft.CgrHeaderComponent,ht.ProfileComponent,y.HierarchyComponent,B.RequestTableComponent,q.CreateUpdateGeoObjectDetailComponent,J.AddRemoveChildDetailComponent,U.SetParentDetailComponent,S.CreateHierarchyTypeModalComponent,C.AddChildToHierarchyModalComponent,E.CreateGeoObjTypeModalComponent,x.ManageAttributesModalComponent,O.DefineAttributeModalContentComponent,M.ShapefileModalComponent,w.AttributesPageComponent,j.LocationPageComponent,k.LocationProblemPageComponent,T.LocationProblemComponent,P.TermProblemPageComponent,z.TermProblemComponent,V.SpreadsheetModalComponent,Me.GeoObjectAttributeCodeValidator,I.EditAttributeModalContentComponent,R.TermOptionWidgetComponent,A.AttributeInputComponent,D.EditTermOptionInputComponent,_.ManageGeoObjectTypeModalComponent,F.GeoObjectTypeInputComponent,L.ManageTermOptionsComponent,v.LocalizedInputComponent,b.LocalizedTextComponent,W.GeoObjectSharedAttributeEditorComponent,Q.ManageVersionsModalComponent,Y.SubmitChangeRequestComponent,K.GeoObjectEditorComponent,Z.GeoObjectEditorMapComponent,ee.SimpleEditControl,N.DataPageComponent,X.ChangeRequestPageComponent,te.CascadingGeoSelector,ne.ManageParentVersionsModalComponent,re.ActionDetailModalComponent,oe.DataImporterComponent,ie.DataExportComponent,G.MasterListManagerComponent,ae.MasterListComponent,ce.MasterListHistoryComponent,le.PublishedMasterListHistoryComponent,H.PublishModalComponent,se.MasterListViewComponent,$.ExportFormatModalComponent,de.ScheduledJobsComponent,pe.JobComponent,me.JobConflictModalComponent,ue.ReuploadModalComponent,ge.ParentReferenceProblemWidgetComponent,fe.TermReferenceProblemWidgetComponent,he.RowValidationProblemWidgetComponent,ve.StepIndicatorComponent,be.ImportProblemWidgetComponent,ye.TaskViewerComponent,Se.SynchronizationConfigManagerComponent,Ce.SynchronizationConfigModalComponent,Ee.SynchronizationConfigComponent,xe.SyncDetailsComponent,Oe.LocationManagerComponent,Ie.ContextLayerModalComponent],[He.AsyncPipe,He.UpperCasePipe,He.LowerCasePipe,He.JsonPipe,He.SlicePipe,He.DecimalPipe,He.PercentPipe,He.TitleCasePipe,He.CurrencyPipe,He.DatePipe,He.I18nPluralPipe,He.I18nSelectPipe,He.KeyValuePipe,et.PaginatePipe,vt.LocalizePipe,bt.PhonePipe,we.GeoObjectTypePipe,je.GeoObjectAttributeExcludesPipe,ke.ToEpochDateTimePipe])},545:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.services=void 0;var i=n(566),a=n(549),l=n(550),c=n(567),s=n(568),d=n(569),p=n(570),m=n(571),u=n(572);t.services=[i.ChangeRequestService,a.GeoObjectTypeManagementService,l.HierarchyService,c.IOService,s.LocalizationManagerService,d.MapService,p.RegistryService,m.SynchronizationConfigService,u.TaskService],o(n(566),t),o(n(549),t),o(n(550),t),o(n(567),t),o(n(568),t),o(n(569),t),o(n(570),t),o(n(571),t),o(n(572),t)},546:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ContextLayerGroup=t.ContextLayer=t.ExportScheduledJob=t.OrgSyncInfo=t.SynchronizationConfig=t.MasterListByOrg=t.ImportStrategy=t.HierarchyOverTime=t.MasterListVersion=t.MasterList=t.Step=t.StepConfig=t.ImportErrorObject=t.ServerExceptionAttribute=t.ServerException=t.ImportError=t.ScheduledJobOverview=t.ScheduledJob=t.AbstractScheduledJob=t.PaginationPage=t.ManageGeoObjectTypeModalState=t.ParentTreeNode=t.ChildTreeNode=t.TreeNode=t.GeoObjectTypeModalStates=t.AttributeDecimal=t.AttributeTerm=t.Attribute=t.ValueOverTime=t.GeoObjectOverTime=t.Task=t.GeoObjectType=t.GeoObject=t.Term=t.TreeEntity=t.PRESENT=void 0,t.PRESENT="5000-12-31";var i=function(){};t.TreeEntity=i;var a=function(){function e(e,t,n){this.children=[],this.code=e,this.label=t,this.description=n}return e.prototype.addChild=function(e){this.children.push(e)},e}();t.Term=a;var l=function(){};t.GeoObject=l;var c=function(){this.attributes=[]};t.GeoObjectType=c;var s=function(){};t.Task=s;var d=function(){function e(e,t){this.geoObjectType=e,this.attributes=t}return e.prototype.getVotAtDate=function(e,t,n){for(var r={startDate:e,endDate:null,value:null},o=e.getTime(),i=function(e){var i=a.geoObjectType.attributes[e];if(i.code===t){if("local"===i.type&&(r.value=n.create()),i.isChangeOverTime)a.attributes[i.code].values.forEach((function(e){var t=Date.parse(e.startDate),n=Date.parse(e.endDate);o>=t&&o<=n&&("local"===i.type?r.value=JSON.parse(JSON.stringify(e.value)):"term"===i.type&&null!=e.value&&Array.isArray(e.value)&&e.value.length>0?r.value=e.value[0]:r.value=e.value)}));else r.value=a.attributes[i.code];return"break"}},a=this,l=0;l<this.geoObjectType.attributes.length;++l){if("break"===i(l))break}return r},e}();t.GeoObjectOverTime=d;var p=function(){};t.ValueOverTime=p;var m=function(e,t,n,r,o,i,a,l){this.code=e,this.type=t,this.label=n,this.description=r,this.isDefault=o,this.required=!1,this.unique=a,this.isChangeOverTime=l};t.Attribute=m;var u=function(e){function t(t,n,r,o,i,l,c,s){var d=e.call(this,t,n,r,o,i,l,c,s)||this;return d.rootTerm=new a(null,null,null),d.termOptions=[],d}return o(t,e),t.prototype.setRootTerm=function(e){this.rootTerm=e},t}(m);t.AttributeTerm=u;var g=function(e){function t(t,n,r,o,i,a,l,c){var s=e.call(this,t,n,r,o,i,a,l,c)||this;return s.precision=32,s.scale=8,s}return o(t,e),t}(m);t.AttributeDecimal=g,function(e){e.manageAttributes="MANAGE-ATTRIBUTES",e.editAttribute="EDIT-ATTRIBUTE",e.defineAttribute="DEFINE-ATTRIBUTE",e.manageTermOption="MANAGE-TERM-OPTION",e.editTermOption="EDIT-TERM-OPTION",e.manageGeoObjectType="MANAGE-GEO-OBJECT-TYPE"}(t.GeoObjectTypeModalStates||(t.GeoObjectTypeModalStates={}));var f=function(){};t.TreeNode=f;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(f);t.ChildTreeNode=h;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(f);t.ParentTreeNode=v;var b=function(){};t.ManageGeoObjectTypeModalState=b;var y=function(){};t.PaginationPage=y;var S=function(){};t.AbstractScheduledJob=S;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(S);t.ScheduledJob=C;var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(C);t.ScheduledJobOverview=E;var x=function(){};t.ImportError=x;var O=function(){};t.ServerException=O;var I=function(){};t.ServerExceptionAttribute=I;var M=function(){};t.ImportErrorObject=M;var w=function(){};t.StepConfig=w;var j=function(){};t.Step=j;var k=function(){};t.MasterList=k;var T=function(){};t.MasterListVersion=T;var P=function(){};t.HierarchyOverTime=P,function(e){e.NEW_AND_UPDATE="NEW_AND_UPDATE",e.NEW_ONLY="NEW_ONLY",e.UPDATE_ONLY="UPDATE_ONLY"}(t.ImportStrategy||(t.ImportStrategy={}));var z=function(){};t.MasterListByOrg=z;var V=function(){};t.SynchronizationConfig=V;var N=function(){};t.OrgSyncInfo=N;var R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(S);t.ExportScheduledJob=R;var A=function(){};t.ContextLayer=A;var D=function(){};t.ContextLayerGroup=D},548:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportConfiguration=t.Synonym=t.Exclusion=t.LocationProblem=t.TermProblem=t.Term=t.Location=t.ImportSheet=void 0;var r=function(){};t.ImportSheet=r;var o=function(){};t.Location=o;var i=function(){};t.Term=i;var a=function(){};t.TermProblem=a;var l=function(){};t.LocationProblem=l;var c=function(){};t.Exclusion=c;var s=function(){};t.Synonym=s;var d=function(){};t.ImportConfiguration=d},549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectTypeManagementService=void 0;n(0);var r=n(37),o=n(0),i=function(){function e(){this.modalStateChangedSource=new r.Subject,this.modalStepChange=this.modalStateChangedSource.asObservable()}return e.prototype.getModalState=function(){return this.modalState},e.prototype.setModalState=function(e){this.modalState=e,this.modalStateChangedSource.next(this.modalState)},e.ɵfac=function(t){return new(t||e)},e.ɵprov=o.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.GeoObjectTypeManagementService=i},550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HierarchyService=void 0;n(0);var r=n(31),o=n(32),i=(n(15),n(0)),a=n(31),l=n(15),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.getHierarchyTypes=function(e){var t=new r.HttpParams;return t=t.set("types",JSON.stringify(e)),this.http.get(acp+"/cgr/hierarchytype/get-all",{params:t}).toPromise()},e.prototype.addChildToHierarchy=function(e,t,n){var i=this,a=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/hierarchytype/add",JSON.stringify({hierarchyCode:e,parentGeoObjectTypeCode:t,childGeoObjectTypeCode:n}),{headers:a}).pipe(o.finalize((function(){i.eventService.complete()}))).toPromise()},e.prototype.removeFromHierarchy=function(e,t,n){var i=this,a=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/hierarchytype/remove",JSON.stringify({hierarchyCode:e,parentGeoObjectTypeCode:t,childGeoObjectTypeCode:n}),{headers:a}).pipe(o.finalize((function(){i.eventService.complete()}))).toPromise()},e.prototype.createHierarchyType=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/hierarchytype/create",JSON.stringify({htJSON:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.updateHierarchyType=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/hierarchytype/update",JSON.stringify({htJSON:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.deleteHierarchyType=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/hierarchytype/delete",{code:e},{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.ɵfac=function(t){return new(t||e)(i.ɵɵinject(a.HttpClient),i.ɵɵinject(l.EventService))},e.ɵprov=i.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.HierarchyService=c},551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeInputComponent=void 0;var r=n(0),o=n(7),i=(n(546),n(545),n(0)),a=n(545),l=n(44),c=n(27),s=n(598),d=n(553),p=n(1),m=n(565),u=n(336);function g(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"localized-text",9),i.ɵɵlistener("valueChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().attribute.description=e})),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵproperty("value",r.attribute.description)}}function f(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",0),i.ɵɵelementStart(1,"div",1),i.ɵɵelementStart(2,"label"),i.ɵɵelement(3,"localize",10),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"div",3),i.ɵɵelementStart(5,"span",4),i.ɵɵelementStart(6,"input",11),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().attribute.precision=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(6),i.ɵɵproperty("ngModel",r.attribute.precision)}}function h(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",0),i.ɵɵelementStart(1,"div",1),i.ɵɵelementStart(2,"label"),i.ɵɵelement(3,"localize",12),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"div",3),i.ɵɵelementStart(5,"span",4),i.ɵɵelementStart(6,"input",13),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().attribute.scale=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(6),i.ɵɵproperty("ngModel",r.attribute.scale)}}var v=function(){function e(e,t){this.hierarchyService=e,this.cdr=t,this.disableCodeField=!1,this.excludeDescription=!1,this.isDecimal=!1,this.attributeChange=new r.EventEmitter,this.message=null,this.state="none"}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.state="show",this.cdr.detectChanges()},e.prototype.ngOnChanges=function(){},e.prototype.ngOnDestroy=function(){},e.prototype.handleOnSubmit=function(){},e.prototype.toggleIsUnique=function(){this.attribute.unique=!this.attribute.unique},e.prototype.animate=function(){this.state="none"},e.prototype.onAnimationDone=function(e){this.state="show"},e.prototype.isValid=function(){return!!this.attribute.code&&(-1===this.attribute.code.indexOf(" ")&&(0!==this.attribute.label.localeValues[0].value.length&&(this.isDecimal&&console.log(this.attribute),(!this.isDecimal||null!=this.attribute.precision&&""!=this.attribute.precision.toString())&&(!this.isDecimal||null!=this.attribute.scale&&""!=this.attribute.scale.toString()))))},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.HierarchyService),i.ɵɵdirectiveInject(i.ChangeDetectorRef))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["attribute-input"]],inputs:{disableCodeField:"disableCodeField",excludeDescription:"excludeDescription",isDecimal:"isDecimal",geoObjectType:"geoObjectType",attribute:"attribute"},outputs:{attributeChange:"attributeChange"},features:[i.ɵɵNgOnChangesFeature],decls:12,vars:6,consts:[[1,"row-holder"],[1,"label-holder"],["key","data.property.label.code"],[1,"holder"],[1,"text"],["autofocus","","type","text","name","code","required","","geoObjectAttributeCode","",3,"disabled","ngModel","ngModelChange"],["key","data.property.label.label",3,"value","valueChange"],["key","data.property.label.description",3,"value","valueChange",4,"ngIf"],["class","row-holder",4,"ngIf"],["key","data.property.label.description",3,"value","valueChange"],["key","data.property.label.length"],["type","text","name","precision","OnlyNumber","true","required","",3,"ngModel","ngModelChange"],["key","data.property.label.decimal"],["type","text","name","scale","OnlyNumber","true","required","",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.ɵɵelementStart(0,"div"),i.ɵɵelementStart(1,"div",0),i.ɵɵelementStart(2,"div",1),i.ɵɵelementStart(3,"label"),i.ɵɵelement(4,"localize",2),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"div",3),i.ɵɵelementStart(6,"span",4),i.ɵɵelementStart(7,"input",5),i.ɵɵlistener("ngModelChange",(function(e){return t.attribute.code=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(8,"localized-input",6),i.ɵɵlistener("valueChange",(function(e){return t.attribute.label=e})),i.ɵɵelementEnd(),i.ɵɵtemplate(9,g,1,1,"localized-text",7),i.ɵɵtemplate(10,f,7,1,"div",8),i.ɵɵtemplate(11,h,7,1,"div",8),i.ɵɵelementEnd()),2&e&&(i.ɵɵadvance(7),i.ɵɵproperty("disabled",t.disableCodeField)("ngModel",t.attribute.code),i.ɵɵadvance(1),i.ɵɵproperty("value",t.attribute.label),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",!t.excludeDescription),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",t.isDecimal),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",t.isDecimal))},directives:[l.LocalizeComponent,c.DefaultValueAccessor,c.RequiredValidator,s.GeoObjectAttributeCodeValidator,c.NgControlStatus,c.NgModel,d.LocalizedInputComponent,p.NgIf,m.LocalizedTextComponent,u.OnlyNumber],styles:['input[type="text"][_ngcontent-%COMP%] {\n    margin: 2px 0 2px 0 !important;\n    float: none !important;\n}\n\nbutton[_ngcontent-%COMP%] {\n    margin-top: 5px;\n    float: right;\n}\n\nlabel[_ngcontent-%COMP%] {\n    color: #999;\n    font-weight: bold;\n}'],data:{animation:[o.trigger("toggleInputs",[o.state("none, void",o.style({opacity:0})),o.state("show",o.style({opacity:1})),o.transition("none => show",o.animate("300ms"))])]}}),e}();t.AttributeInputComponent=v},552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublishModalComponent=void 0;n(0),n(30);var r=n(37),o=(n(545),n(174)),i=(n(15),n(0)),a=n(545),l=n(15),c=n(30),s=n(1),d=n(27),p=n(44);function m(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",59),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.message)}}function u(e,t){1&e&&(i.ɵɵelementStart(0,"h2"),i.ɵɵelement(1,"localize",60),i.ɵɵelementEnd())}function g(e,t){if(1&e&&(i.ɵɵelementStart(0,"h2"),i.ɵɵtext(1),i.ɵɵelement(2,"localize",61),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵtextInterpolate1(" ",n.master.displayLabel.localizedValue," ")}}function f(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",8),i.ɵɵelementStart(1,"div",9),i.ɵɵelementStart(2,"label"),i.ɵɵelement(3,"localize",62),i.ɵɵtext(4),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"div",11),i.ɵɵelementStart(6,"input",63),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),t.$implicit.value=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=i.ɵɵnextContext();i.ɵɵadvance(4),i.ɵɵtextInterpolate1(" (",r.locale,") "),i.ɵɵadvance(2),i.ɵɵproperty("ngModel",r.value)("name","label-"+r.locale)("disabled",o.readonly)("required","defaultLocale"===r.locale)}}function h(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",68),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵproperty("value",n.code),i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.label)}}function v(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",8),i.ɵɵelementStart(1,"div",9),i.ɵɵelementStart(2,"label",64),i.ɵɵelement(3,"localize",65),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"div",11),i.ɵɵelementStart(5,"select",66),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().master.typeCode=e}))("change",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().onChange(e)})),i.ɵɵelement(6,"option"),i.ɵɵtemplate(7,h,2,2,"option",67),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(5),i.ɵɵproperty("ngModel",r.master.typeCode),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",r.types)}}function b(e,t){1&e&&(i.ɵɵelementStart(0,"small",69),i.ɵɵelement(1,"localize",70),i.ɵɵelementEnd())}function y(e,t){1&e&&(i.ɵɵelementStart(0,"div",8),i.ɵɵelement(1,"div",9),i.ɵɵelementStart(2,"div",11),i.ɵɵelement(3,"localize",71),i.ɵɵelementEnd(),i.ɵɵelementEnd())}var S=function(e,t){return{"chk-checked":e,disabled:t}};function C(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",30),i.ɵɵelementStart(1,"div",31),i.ɵɵelementStart(2,"div",73),i.ɵɵlistener("click",(function(e){i.ɵɵrestoreView(n);var r=t.$implicit;return i.ɵɵnextContext(2).getIsDisabled(e)?null:r.selected=!r.selected})),i.ɵɵelement(3,"span"),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"label",74),i.ɵɵtext(5),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=i.ɵɵnextContext(2);i.ɵɵadvance(2),i.ɵɵproperty("ngClass",i.ɵɵpureFunction2(2,S,r.selected,o.readonly||o.edit)),i.ɵɵadvance(3),i.ɵɵtextInterpolate(r.label)}}function E(e,t){if(1&e&&(i.ɵɵelementStart(0,"div"),i.ɵɵelementStart(1,"div",8),i.ɵɵelementStart(2,"div",9),i.ɵɵelementStart(3,"label"),i.ɵɵtext(4),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"div",11),i.ɵɵtemplate(6,C,6,5,"div",72),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵadvance(4),i.ɵɵtextInterpolate1(" ",n.label," "),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",n.parents)}}function x(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"button",75),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext().onSubmit()})),i.ɵɵelement(1,"localize",76),i.ɵɵelementEnd()}if(2&e){i.ɵɵnextContext();var r=i.ɵɵreference(6);i.ɵɵproperty("disabled",r.invalid)}}var O=function(){function e(e,t,n,r,o){this.service=e,this.iService=t,this.lService=n,this.bsModalRef=r,this.authService=o,this.message=null,this.readonly=!1,this.edit=!1,this.isNew=!1}return e.prototype.ngOnInit=function(){var e=this;this.onMasterListChange=new r.Subject,null!=this.master&&this.readonly||(this.iService.listGeoObjectTypes(!0).then((function(t){for(var n=[],r=0;r<t.length;++r)e.authService.isGeoObjectTypeRM(t[r].orgCode,t[r].code)&&n.push(t[r]);e.types=n})).catch((function(t){e.error(t)})),this.master={oid:null,typeCode:"",displayLabel:this.lService.create(),code:"",representativityDate:null,publishDate:null,listAbstract:"",process:"",progress:"",accessConstraints:"",useConstraints:"",acknowledgements:"",disclaimer:"",contactName:"",organization:"",telephoneNumber:"",email:"",hierarchies:[],leaf:!1,frequency:"ANNUAL",isMaster:null,visibility:null})},e.prototype.init=function(e){this.master.organization=e.oid},e.prototype.getIsDisabled=function(e){for(var t=e.target.classList,n=0;n<t.length;n++){if("disabled"===t[n])return!0}return!1},e.prototype.onChange=function(){var e=this;null!=this.master.typeCode&&this.master.typeCode.length>0?this.iService.getHierarchiesForType(this.master.typeCode,!0).then((function(t){e.master.hierarchies=t})).catch((function(t){e.error(t)})):this.master.hierarchies=[]},e.prototype.onSubmit=function(){var e=this;this.service.createMasterList(this.master).then((function(t){e.onMasterListChange.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.RegistryService),i.ɵɵdirectiveInject(a.IOService),i.ɵɵdirectiveInject(l.LocalizationService),i.ɵɵdirectiveInject(c.BsModalRef),i.ɵɵdirectiveInject(l.AuthService))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["publish-modal"]],decls:124,vars:40,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"text-center"],[4,"ngIf"],[1,"modal-form"],["form","ngForm"],["class","row-holder",4,"ngFor","ngForOf"],["class","row-holder",4,"ngIf"],[1,"row-holder"],[1,"label-holder"],["key","masterlist.code"],[1,"holder"],["name","code","type","text","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","data.property.label.frequency"],["name","frequency","required","",1,"select-area",3,"ngModel","disabled","ngModelChange"],["frequency","ngModel"],["value","ANNUAL"],["key","georegistry.frequency.annual"],["value","QUARTER"],["key","georegistry.frequency.quarter"],["value","MONTHLY"],["key","georegistry.frequency.monthly"],["class","form-text text-danger",4,"ngIf"],["key","masterlist.visibility"],["name","visibility","required","",1,"select-area",3,"ngModel","disabled","ngModelChange"],["value","PUBLIC"],["key","masterlist.public"],["value","PRIVATE"],["key","masterlist.private"],["key","masterlist.ismaster"],[1,"row"],[1,"check-block",2,"margin","10px"],["name","isMaster",1,"jcf-unselectable","chk-area",2,"margin","0",3,"ngClass","click"],["key","masterlist.listAbstract"],["name","listAbstract",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.process"],["name","process",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.progress"],["name","progress","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.accessConstraints"],["name","accessConstraints","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.useConstraints"],["name","useConstraints","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.acknowledgements"],["name","acknowledgements",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.disclaimer"],["name","disclaimer",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.contact"],["key","masterlist.contactName"],["name","contactName","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.telephoneNumber"],["name","telephoneNumber","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["key","masterlist.email"],["name","email","type","email",1,"form-control",3,"ngModel","disabled","ngModelChange"],[4,"ngFor","ngForOf"],[1,"button-holder"],["type","button","role","button",1,"btn","btn-default",3,"click"],[3,"key"],["type","submit","class","btn btn-primary","role","button",3,"disabled","click",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["key","type.publish.title"],["key","type.publish.view.title"],["key","masterlist.label"],["type","text",1,"form-control",3,"ngModel","name","disabled","required","ngModelChange"],["for","typeCode"],["key","io.geoObjectType"],["id","typeCode","name","typeCode","required","",1,"select-area",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-text","text-danger"],["key","masterlist.change.frequency"],["key","masterlist.parents"],["class","row",4,"ngFor","ngForOf"],["name","unique",1,"jcf-unselectable","chk-area",2,"margin","0",3,"ngClass","click"],[2,"margin","3px 10px"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.submit"]],template:function(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",0),i.ɵɵtemplate(1,m,2,1,"div",1),i.ɵɵelementStart(2,"div",2),i.ɵɵtemplate(3,u,2,0,"h2",3),i.ɵɵtemplate(4,g,3,1,"h2",3),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"form",4,5),i.ɵɵelementStart(7,"fieldset"),i.ɵɵtemplate(8,f,7,5,"div",6),i.ɵɵtemplate(9,v,8,2,"div",7),i.ɵɵelementStart(10,"div",8),i.ɵɵelementStart(11,"div",9),i.ɵɵelementStart(12,"label"),i.ɵɵelement(13,"localize",10),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(14,"div",11),i.ɵɵelementStart(15,"input",12),i.ɵɵlistener("ngModelChange",(function(e){return t.master.code=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(16,"div",8),i.ɵɵelementStart(17,"div",9),i.ɵɵelementStart(18,"label"),i.ɵɵelement(19,"localize",13),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(20,"div",11),i.ɵɵelementStart(21,"select",14,15),i.ɵɵlistener("ngModelChange",(function(e){return t.master.frequency=e})),i.ɵɵelement(23,"option"),i.ɵɵelementStart(24,"option",16),i.ɵɵelement(25,"localize",17),i.ɵɵelementEnd(),i.ɵɵelementStart(26,"option",18),i.ɵɵelement(27,"localize",19),i.ɵɵelementEnd(),i.ɵɵelementStart(28,"option",20),i.ɵɵelement(29,"localize",21),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(30,b,2,0,"small",22),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(31,"div",8),i.ɵɵelementStart(32,"div",9),i.ɵɵelementStart(33,"label"),i.ɵɵelement(34,"localize",23),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(35,"div",11),i.ɵɵelementStart(36,"select",24),i.ɵɵlistener("ngModelChange",(function(e){return t.master.visibility=e})),i.ɵɵelement(37,"option"),i.ɵɵelementStart(38,"option",25),i.ɵɵelement(39,"localize",26),i.ɵɵelementEnd(),i.ɵɵelementStart(40,"option",27),i.ɵɵelement(41,"localize",28),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(42,"div",8),i.ɵɵelementStart(43,"div",9),i.ɵɵelementStart(44,"label"),i.ɵɵelement(45,"localize",29),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(46,"div",11),i.ɵɵelementStart(47,"div",30),i.ɵɵelementStart(48,"div",31),i.ɵɵelementStart(49,"div",32),i.ɵɵlistener("click",(function(e){return t.getIsDisabled(e)?null:t.master.isMaster=!t.master.isMaster})),i.ɵɵelement(50,"span"),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(51,"div",8),i.ɵɵelementStart(52,"div",9),i.ɵɵelementStart(53,"label"),i.ɵɵelement(54,"localize",33),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(55,"div",11),i.ɵɵelementStart(56,"textarea",34),i.ɵɵlistener("ngModelChange",(function(e){return t.master.listAbstract=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(57,"div",8),i.ɵɵelementStart(58,"div",9),i.ɵɵelementStart(59,"label"),i.ɵɵelement(60,"localize",35),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(61,"div",11),i.ɵɵelementStart(62,"textarea",36),i.ɵɵlistener("ngModelChange",(function(e){return t.master.process=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(63,"div",8),i.ɵɵelementStart(64,"div",9),i.ɵɵelementStart(65,"label"),i.ɵɵelement(66,"localize",37),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(67,"div",11),i.ɵɵelementStart(68,"input",38),i.ɵɵlistener("ngModelChange",(function(e){return t.master.progress=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(69,"div",8),i.ɵɵelementStart(70,"div",9),i.ɵɵelementStart(71,"label"),i.ɵɵelement(72,"localize",39),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(73,"div",11),i.ɵɵelementStart(74,"input",40),i.ɵɵlistener("ngModelChange",(function(e){return t.master.accessConstraints=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(75,"div",8),i.ɵɵelementStart(76,"div",9),i.ɵɵelementStart(77,"label"),i.ɵɵelement(78,"localize",41),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(79,"div",11),i.ɵɵelementStart(80,"input",42),i.ɵɵlistener("ngModelChange",(function(e){return t.master.useConstraints=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(81,"div",8),i.ɵɵelementStart(82,"div",9),i.ɵɵelementStart(83,"label"),i.ɵɵelement(84,"localize",43),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(85,"div",11),i.ɵɵelementStart(86,"textarea",44),i.ɵɵlistener("ngModelChange",(function(e){return t.master.acknowledgements=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(87,"div",8),i.ɵɵelementStart(88,"div",9),i.ɵɵelementStart(89,"label"),i.ɵɵelement(90,"localize",45),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(91,"div",11),i.ɵɵelementStart(92,"textarea",46),i.ɵɵlistener("ngModelChange",(function(e){return t.master.disclaimer=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(93,"div",8),i.ɵɵelement(94,"div",9),i.ɵɵelementStart(95,"div",11),i.ɵɵelement(96,"localize",47),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(97,"div",8),i.ɵɵelementStart(98,"div",9),i.ɵɵelementStart(99,"label"),i.ɵɵelement(100,"localize",48),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(101,"div",11),i.ɵɵelementStart(102,"input",49),i.ɵɵlistener("ngModelChange",(function(e){return t.master.contactName=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(103,"div",8),i.ɵɵelementStart(104,"div",9),i.ɵɵelementStart(105,"label"),i.ɵɵelement(106,"localize",50),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(107,"div",11),i.ɵɵelementStart(108,"input",51),i.ɵɵlistener("ngModelChange",(function(e){return t.master.telephoneNumber=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(109,"div",8),i.ɵɵelementStart(110,"div",9),i.ɵɵelementStart(111,"label"),i.ɵɵelement(112,"localize",52),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(113,"div",11),i.ɵɵelementStart(114,"input",53),i.ɵɵlistener("ngModelChange",(function(e){return t.master.email=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(115,y,4,0,"div",7),i.ɵɵtemplate(116,E,7,2,"div",54),i.ɵɵelementStart(117,"div",8),i.ɵɵelement(118,"div",9),i.ɵɵelementStart(119,"div",11),i.ɵɵelementStart(120,"div",55),i.ɵɵelementStart(121,"button",56),i.ɵɵlistener("click",(function(){return t.onCancel()})),i.ɵɵelement(122,"localize",57),i.ɵɵelementEnd(),i.ɵɵtemplate(123,x,2,1,"button",58),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵreference(22);i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null!=t.message),i.ɵɵadvance(2),i.ɵɵproperty("ngIf",t.isNew),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",!t.isNew),i.ɵɵadvance(4),i.ɵɵproperty("ngForOf",t.master.displayLabel.localeValues),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",t.types&&!(t.readonly||t.edit)),i.ɵɵadvance(6),i.ɵɵproperty("ngModel",t.master.code)("disabled",t.readonly||t.edit),i.ɵɵadvance(6),i.ɵɵproperty("ngModel",t.master.frequency)("disabled",t.readonly),i.ɵɵadvance(9),i.ɵɵproperty("ngIf",t.edit&&n.dirty),i.ɵɵadvance(6),i.ɵɵproperty("ngModel",t.master.visibility)("disabled",t.readonly),i.ɵɵadvance(13),i.ɵɵproperty("ngClass",i.ɵɵpureFunction2(37,S,t.master.isMaster,t.readonly||t.edit)),i.ɵɵadvance(7),i.ɵɵproperty("ngModel",t.master.listAbstract)("disabled",t.readonly),i.ɵɵadvance(6),i.ɵɵproperty("ngModel",t.master.process)("disabled",t.readonly),i.ɵɵadvance(6),i.ɵɵproperty("ngModel",t.master.progress)("disabled",t.readonly),i.ɵɵadvance(6),i.ɵɵproperty("ngModel",t.master.accessConstraints)("disabled",t.readonly),i.ɵɵadvance(6),i.ɵɵproperty("ngModel",t.master.useConstraints)("disabled",t.readonly),i.ɵɵadvance(6),i.ɵɵproperty("ngModel",t.master.acknowledgements)("disabled",t.readonly),i.ɵɵadvance(6),i.ɵɵproperty("ngModel",t.master.disclaimer)("disabled",t.readonly),i.ɵɵadvance(10),i.ɵɵproperty("ngModel",t.master.contactName)("disabled",t.readonly),i.ɵɵadvance(6),i.ɵɵproperty("ngModel",t.master.telephoneNumber)("disabled",t.readonly),i.ɵɵadvance(6),i.ɵɵproperty("ngModel",t.master.email)("disabled",t.readonly),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",t.master.hierarchies.length>0),i.ɵɵadvance(1),i.ɵɵproperty("ngForOf",t.master.hierarchies),i.ɵɵadvance(6),i.ɵɵproperty("key",t.readonly?"io.back":"io.cancel"),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",!t.readonly)}},directives:[s.NgIf,d.ɵangular_packages_forms_forms_y,d.NgControlStatusGroup,d.NgForm,s.NgForOf,p.LocalizeComponent,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,d.SelectControlValueAccessor,d.NgSelectOption,d.ɵangular_packages_forms_forms_x,s.NgClass],encapsulation:2}),e}();t.PublishModalComponent=O},553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalizedInputComponent=void 0;var r=n(0),o=(n(248),n(0)),i=n(1),a=n(44),l=n(27);function c(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",1),o.ɵɵelementStart(1,"div",2),o.ɵɵelementStart(2,"label"),o.ɵɵelement(3,"localize",3),o.ɵɵtext(4),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(5,"div",4),o.ɵɵelementStart(6,"span",5),o.ɵɵelementStart(7,"input",6),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),t.$implicit.value=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=t.$implicit,i=o.ɵɵnextContext();o.ɵɵadvance(3),o.ɵɵproperty("key",i.key),o.ɵɵadvance(1),o.ɵɵtextInterpolate1(" (",r.locale,") "),o.ɵɵadvance(3),o.ɵɵproperty("ngModel",r.value)("name","label-"+r.locale)("disabled",i.disabled)("required","defaultLocale"===r.locale)}}var s=function(){function e(){this.key="",this.disabled=!1,this.valueChange=new r.EventEmitter}return e.ɵfac=function(t){return new(t||e)},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["localized-input"]],inputs:{key:"key",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:1,vars:1,consts:[["class","row-holder",4,"ngFor","ngForOf"],[1,"row-holder"],[1,"label-holder"],[3,"key"],[1,"holder"],[1,"text"],["type","text",1,"form-control",3,"ngModel","name","disabled","required","ngModelChange"]],template:function(e,t){1&e&&o.ɵɵtemplate(0,c,8,6,"div",0),2&e&&o.ɵɵproperty("ngForOf",t.value.localeValues)},directives:[i.NgForOf,a.LocalizeComponent,l.DefaultValueAccessor,l.NgControlStatus,l.NgModel,l.RequiredValidator],encapsulation:2}),e}();t.LocalizedInputComponent=s},554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectSharedAttributeEditorComponent=void 0;var r=n(0),o=(n(30),n(1)),i=n(248),a=(n(15),n(613)),l=(n(545),n(546)),c=(n(578),n(614)),s=n(0),d=n(545),p=n(30),m=n(1),u=n(578),g=n(15),f=n(27),h=n(44),v=n(577),b=n(616),y=["geometryEditor"],S=["attributeForm"];function C(e,t){1&e&&(s.ɵɵelementStart(0,"span"),s.ɵɵelement(1,"localize",13),s.ɵɵelementEnd())}function E(e,t){1&e&&(s.ɵɵelementStart(0,"span"),s.ɵɵelement(1,"localize",14),s.ɵɵelementEnd())}function x(e,t){if(1&e&&(s.ɵɵelementStart(0,"span"),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit;s.ɵɵadvance(1),s.ɵɵtextInterpolate1(" ",n.label.localizedValue," ")}}function O(e,t){if(1&e&&(s.ɵɵelementStart(0,"span"),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵtextInterpolate2(" (",r.calculatedPostObject[n.code].startDate," - ",r.calculatedPostObject[n.code].endDate,") ")}}function I(e,t){if(1&e&&(s.ɵɵelementStart(0,"h5"),s.ɵɵtemplate(1,C,2,0,"span",2),s.ɵɵtemplate(2,E,2,0,"span",2),s.ɵɵtemplate(3,x,2,1,"span",2),s.ɵɵtemplate(4,O,2,2,"span",2),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext().$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵproperty("ngIf","code"===n.code),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","displayLabel"===n.code),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","code"!==n.code&&"displayLabel"!==n.code),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.isChangeOverTime&&null!=r.calculatedPostObject[n.code]&&null!=r.calculatedPostObject[n.code].startDate)}}function M(e,t){if(1&e&&(s.ɵɵelementStart(0,"span"),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵtextInterpolate2(" (",r.calculatedPostObject[n.code].startDate," - ",r.calculatedPostObject[n.code].endDate,") ")}}function w(e,t){if(1&e&&(s.ɵɵelementStart(0,"h5"),s.ɵɵelement(1,"localize",15),s.ɵɵtemplate(2,M,2,2,"span",2),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext().$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(2),s.ɵɵproperty("ngIf",n.isChangeOverTime&&null!=r.calculatedPostObject[n.code]&&null!=r.calculatedPostObject[n.code].startDate)}}function j(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"input",17),s.ɵɵlistener("ngModelChange",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext(2).$implicit;return s.ɵɵnextContext(3).calculatedPostObject[t.code]=e}))("change",(function(e){return s.ɵɵrestoreView(n),s.ɵɵnextContext(5).handleChangeCode(e)})),s.ɵɵelementEnd()}if(2&e){var r=s.ɵɵnextContext(2).$implicit,o=s.ɵɵnextContext(3);s.ɵɵpropertyInterpolate1("id","mod-",r.code,""),s.ɵɵpropertyInterpolate1("name","mod-",r.code,""),s.ɵɵproperty("ngModel",o.calculatedPostObject[r.code])("disabled",!o.isNew)}}function k(e,t){if(1&e&&(s.ɵɵelementStart(0,"div"),s.ɵɵtemplate(1,j,1,4,"input",16),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(4);s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.postGeoObject)}}function T(e,t){if(1&e&&s.ɵɵelement(0,"input",20),2&e){var n=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵpropertyInterpolate1("id","mod-",n.code,""),s.ɵɵpropertyInterpolate1("name","mod-",n.code,""),s.ɵɵproperty("ngModel",r.calculatedPostObject[n.code].value)}}function P(e,t){if(1&e&&(s.ɵɵelementStart(0,"p",21),s.ɵɵelement(1,"localize",22),s.ɵɵtext(2),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(2),s.ɵɵtextInterpolate1(" ",r.calculatedPreObject[n.code].value," ")}}function z(e,t){if(1&e&&(s.ɵɵelementStart(0,"div"),s.ɵɵtemplate(1,T,1,3,"input",18),s.ɵɵtemplate(2,P,3,1,"p",19),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext().$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵproperty("ngIf",r.postGeoObject),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!r.isNew&&r.isDifferentText(n))}}function V(e,t){if(1&e&&(s.ɵɵelementStart(0,"p",21),s.ɵɵelement(1,"localize",22),s.ɵɵtext(2),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext().index,r=s.ɵɵnextContext(3).$implicit,o=s.ɵɵnextContext(3);s.ɵɵadvance(2),s.ɵɵtextInterpolate1(" ",o.calculatedPreObject[r.code].value.localeValues[n].value," ")}}function N(e,t){if(1&e&&(s.ɵɵelementStart(0,"li",25),s.ɵɵelementStart(1,"h5"),s.ɵɵtext(2),s.ɵɵelementEnd(),s.ɵɵelement(3,"input",26),s.ɵɵtemplate(4,V,3,1,"p",19),s.ɵɵelementEnd()),2&e){var n=t.$implicit,r=t.index,o=s.ɵɵnextContext(3).$implicit,i=s.ɵɵnextContext(3);s.ɵɵadvance(2),s.ɵɵtextInterpolate(n.locale),s.ɵɵadvance(1),s.ɵɵproperty("required","defaultLocale"===n.locale)("ngModel",n.value)("name","mod-"+o.code+"-"+n.locale),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!i.isNew&&null!=i.calculatedPreObject[o.code].value&&null!=n.value&&n.value.trim()!==i.calculatedPreObject[o.code].value.localeValues[r].value)}}function R(e,t){if(1&e&&(s.ɵɵelementStart(0,"ul",9),s.ɵɵtemplate(1,N,5,5,"li",24),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵproperty("ngForOf",r.calculatedPostObject[n.code].value.localeValues)}}function A(e,t){if(1&e&&(s.ɵɵelementStart(0,"div"),s.ɵɵtemplate(1,R,2,1,"ul",23),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext().$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵproperty("ngIf",null!=r.calculatedPostObject[n.code].value)}}function D(e,t){if(1&e&&(s.ɵɵelementStart(0,"p",21),s.ɵɵelement(1,"localize",22),s.ɵɵtext(2),s.ɵɵpipe(3,"date"),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(2),s.ɵɵtextInterpolate1(" ",s.ɵɵpipeBind1(3,1,r.calculatedPreObject[n.code].value)," ")}}function L(e,t){if(1&e&&(s.ɵɵelementStart(0,"div"),s.ɵɵelement(1,"input",27),s.ɵɵpipe(2,"date"),s.ɵɵtemplate(3,D,4,3,"p",19),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext().$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵpropertyInterpolate1("id","mod-",n.code,""),s.ɵɵpropertyInterpolate1("name","mod-",n.code,""),s.ɵɵproperty("ngModel",s.ɵɵpipeBind2(2,4,r.calculatedPostObject[n.code].value,"yyyy-MM-dd")),s.ɵɵadvance(2),s.ɵɵproperty("ngIf",!r.isNew&&r.isDifferentValue(n))}}function F(e,t){if(1&e&&(s.ɵɵelementStart(0,"p",21),s.ɵɵelement(1,"localize",22),s.ɵɵtext(2),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(2),s.ɵɵtextInterpolate1(" ",r.calculatedPreObject[n.code].value," ")}}function _(e,t){if(1&e&&(s.ɵɵelementStart(0,"div"),s.ɵɵelementStart(1,"label"),s.ɵɵelement(2,"input",28),s.ɵɵelement(3,"localize",29),s.ɵɵelementEnd(),s.ɵɵelementStart(4,"label"),s.ɵɵelement(5,"input",28),s.ɵɵelement(6,"localize",30),s.ɵɵelementEnd(),s.ɵɵtemplate(7,F,3,1,"p",19),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext().$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(2),s.ɵɵpropertyInterpolate1("id","mod-",n.code,"-true"),s.ɵɵpropertyInterpolate1("name","mod-",n.code,"-true"),s.ɵɵproperty("checked",r.calculatedPostObject[n.code].value)("value",!0),s.ɵɵadvance(3),s.ɵɵpropertyInterpolate1("id","mod-",n.code,"-false"),s.ɵɵpropertyInterpolate1("name","mod-",n.code,"-false"),s.ɵɵproperty("checked",!r.calculatedPostObject[n.code].value)("value",!1),s.ɵɵadvance(2),s.ɵɵproperty("ngIf",!r.isNew&&r.isDifferentValue(n))}}function G(e,t){if(1&e&&(s.ɵɵelementStart(0,"p",21),s.ɵɵelement(1,"localize",22),s.ɵɵtext(2),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(2),s.ɵɵtextInterpolate1(" ",r.calculatedPreObject[n.code].value," ")}}function H(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div"),s.ɵɵelementStart(1,"input",31),s.ɵɵlistener("ngModelChange",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext().$implicit;return s.ɵɵnextContext(3).calculatedPostObject[t.code].value=e})),s.ɵɵelementEnd(),s.ɵɵtemplate(2,G,3,1,"p",19),s.ɵɵelementEnd()}if(2&e){var r=s.ɵɵnextContext().$implicit,o=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵpropertyInterpolate1("id","mod-",r.code,""),s.ɵɵpropertyInterpolate1("name","mod-",r.code,""),s.ɵɵproperty("ngModel",o.calculatedPostObject[r.code].value),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!o.isNew&&o.isDifferentValue(r))}}function $(e,t){if(1&e&&(s.ɵɵelementStart(0,"p",21),s.ɵɵelement(1,"localize",22),s.ɵɵtext(2),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(2),s.ɵɵtextInterpolate1(" ",r.calculatedPreObject[n.code].value," ")}}function B(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div"),s.ɵɵelementStart(1,"input",32),s.ɵɵlistener("ngModelChange",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext().$implicit;return s.ɵɵnextContext(3).calculatedPostObject[t.code].value=e})),s.ɵɵelementEnd(),s.ɵɵtemplate(2,$,3,1,"p",19),s.ɵɵelementEnd()}if(2&e){var r=s.ɵɵnextContext().$implicit,o=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵpropertyInterpolate1("id","mod-",r.code,""),s.ɵɵpropertyInterpolate1("name","mod-",r.code,""),s.ɵɵproperty("ngModel",o.calculatedPostObject[r.code].value),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!o.isNew&&o.isDifferentValue(r))}}function q(e,t){if(1&e&&(s.ɵɵelementStart(0,"option",36),s.ɵɵtext(1),s.ɵɵelementEnd()),2&e){var n=t.$implicit;s.ɵɵproperty("value",n.code),s.ɵɵadvance(1),s.ɵɵtextInterpolate(n.label.localizedValue)}}function J(e,t){if(1&e&&(s.ɵɵelementStart(0,"p",21),s.ɵɵelement(1,"localize",22),s.ɵɵtext(2),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2).$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(2),s.ɵɵtextInterpolate1(" ",r.calculatedPreObject[n.code].value," ")}}function U(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div"),s.ɵɵelementStart(1,"select",33),s.ɵɵlistener("ngModelChange",(function(e){s.ɵɵrestoreView(n);var t=s.ɵɵnextContext().$implicit;return s.ɵɵnextContext(3).calculatedPostObject[t.code].value=e})),s.ɵɵelement(2,"option",34),s.ɵɵtemplate(3,q,2,2,"option",35),s.ɵɵelementEnd(),s.ɵɵtemplate(4,J,3,1,"p",19),s.ɵɵelementEnd()}if(2&e){var r=s.ɵɵnextContext().$implicit,o=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵpropertyInterpolate1("id","mod-",r.code,""),s.ɵɵpropertyInterpolate1("name","mod-term-",r.code,""),s.ɵɵproperty("ngModel",o.calculatedPostObject[r.code].value),s.ɵɵadvance(2),s.ɵɵproperty("ngForOf",o.getGeoObjectTypeTermAttributeOptions(r.code)),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!o.isNew&&o.isStatusChanged(o.calculatedPostObject[r.code].value,o.calculatedPreObject[r.code].value))}}function W(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div"),s.ɵɵelementStart(1,"geoobject-editor-map",37,38),s.ɵɵlistener("onClickEdit",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(4).onManageGeometryVersions()})),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var r=s.ɵɵnextContext(4);s.ɵɵadvance(1),s.ɵɵproperty("geometryType",r.geoObjectType.geometryType)("readOnly",!0)("preGeometry",null!=r.calculatedPreObject.geometry?r.calculatedPreObject.geometry.value:null)("postGeometry",null!=r.calculatedPostObject.geometry?r.calculatedPostObject.geometry.value:null)("bboxCode",r.preGeoObject.attributes.code)("bboxType",r.geoObjectType.code)("bboxDate",r.forDate.toISOString().split("T")[0])}}function Q(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div",39),s.ɵɵelementStart(1,"button",40),s.ɵɵlistener("click",(function(){s.ɵɵrestoreView(n);var e=s.ɵɵnextContext().$implicit;return s.ɵɵnextContext(3).onManageAttributeVersions(e)})),s.ɵɵelement(2,"localize",41),s.ɵɵelementEnd(),s.ɵɵelementEnd()}}function Y(e,t){if(1&e&&(s.ɵɵelementStart(0,"li",11),s.ɵɵtemplate(1,I,5,4,"h5",2),s.ɵɵtemplate(2,w,3,1,"h5",2),s.ɵɵtemplate(3,k,2,1,"div",2),s.ɵɵtemplate(4,z,3,2,"div",2),s.ɵɵtemplate(5,A,2,1,"div",2),s.ɵɵtemplate(6,L,4,7,"div",2),s.ɵɵtemplate(7,_,8,9,"div",2),s.ɵɵtemplate(8,H,3,4,"div",2),s.ɵɵtemplate(9,B,3,4,"div",2),s.ɵɵtemplate(10,U,5,5,"div",2),s.ɵɵtemplate(11,W,3,7,"div",2),s.ɵɵtemplate(12,Q,3,0,"div",12),s.ɵɵelementEnd()),2&e){var n=t.$implicit,r=s.ɵɵnextContext(3);s.ɵɵadvance(1),s.ɵɵproperty("ngIf","geometry"!==n.code),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","geometry"===n.code),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","code"===n.code),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","character"===n.type&&"code"!==n.code),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","local"===n.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","date"===n.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","boolean"===n.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","float"===n.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","integer"===n.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","term"===n.type),s.ɵɵadvance(1),s.ɵɵproperty("ngIf","geometry"===n.type&&r.isGeometryInlined),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.isChangeOverTime)}}function X(e,t){if(1&e&&(s.ɵɵelementStart(0,"div",4),s.ɵɵelementStart(1,"div",5),s.ɵɵelement(2,"span",6),s.ɵɵelementStart(3,"div",7),s.ɵɵelementStart(4,"div",8),s.ɵɵelementStart(5,"ul",9),s.ɵɵtemplate(6,Y,13,12,"li",10),s.ɵɵpipe(7,"geoObjectAttributeExcludesFilter"),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext(2);s.ɵɵadvance(6),s.ɵɵproperty("ngForOf",s.ɵɵpipeBind2(7,1,n.geoObjectType.attributes,n.geoObjectAttributeExcludes))}}function K(e,t){if(1&e){var n=s.ɵɵgetCurrentView();s.ɵɵelementStart(0,"div"),s.ɵɵelementStart(1,"div",42),s.ɵɵelementStart(2,"geoobject-editor-map",37,38),s.ɵɵlistener("onClickEdit",(function(){return s.ɵɵrestoreView(n),s.ɵɵnextContext(2).onManageGeometryVersions()})),s.ɵɵelementEnd(),s.ɵɵelementEnd(),s.ɵɵelementEnd()}if(2&e){var r=s.ɵɵnextContext(2);s.ɵɵadvance(2),s.ɵɵproperty("geometryType",r.geoObjectType.geometryType)("readOnly",!0)("preGeometry",null!=r.calculatedPreObject.geometry?r.calculatedPreObject.geometry.value:null)("postGeometry",null!=r.calculatedPostObject.geometry?r.calculatedPostObject.geometry.value:null)("bboxCode",r.preGeoObject.attributes.code)("bboxType",r.geoObjectType.code)("bboxDate",r.forDate.toISOString().split("T")[0])}}function Z(e,t){if(1&e&&(s.ɵɵelementStart(0,"div"),s.ɵɵtemplate(1,X,8,4,"div",3),s.ɵɵtemplate(2,K,4,7,"div",2),s.ɵɵelementEnd()),2&e){var n=s.ɵɵnextContext();s.ɵɵadvance(1),s.ɵɵproperty("ngIf",!n.isEditingGeometries),s.ɵɵadvance(1),s.ɵɵproperty("ngIf",n.isEditingGeometries&&!n.isGeometryInlined)}}var ee=function(){function e(e,t,n,o,i,a,l,c,s){this.service=e,this.modalService=t,this.changeDetectorRef=n,this.registryService=o,this.elRef=i,this.changeRequestService=a,this.datePipe=l,this.toEpochDateTimePipe=c,this.lService=s,this.preGeoObject=null,this.calculatedPreObject={},this.postGeoObject=null,this.calculatedPostObject={},this.attributeExcludes=[],this.forDate=new Date,this.readOnly=!1,this.isNew=!1,this.isEditingGeometries=!1,this.isGeometryInlined=!1,this.valid=new r.EventEmitter,this.modifiedTermOption=null,this.currentTermOption=null,this.isValid=!0,this.geoObjectAttributeExcludes=["uid","sequence","type","lastUpdateDate","createDate"]}return e.prototype.ngOnInit=function(){this.preGeoObject=new l.GeoObjectOverTime(this.geoObjectType,JSON.parse(JSON.stringify(this.preGeoObject)).attributes),null==this.postGeoObject?this.postGeoObject=new l.GeoObjectOverTime(this.geoObjectType,JSON.parse(JSON.stringify(this.preGeoObject)).attributes):this.postGeoObject=new l.GeoObjectOverTime(this.geoObjectType,JSON.parse(JSON.stringify(this.postGeoObject)).attributes),null!=this.attributeExcludes&&(this.geoObjectAttributeExcludes.push.apply(this.geoObjectAttributeExcludes,this.attributeExcludes),this.isGeometryInlined||this.geoObjectAttributeExcludes.push("geometry"));for(var e=null,t=0;t<this.geoObjectType.attributes.length;++t)"geometry"===this.geoObjectType.attributes[t].code&&(e=this.geoObjectType.attributes[t]);if(null==e){var n=new l.Attribute("geometry","geometry",new i.LocalizedValue("Geometry",null),new i.LocalizedValue("Geometry",null),!0,!1,!1,!0);this.geoObjectType.attributes.push(n)}this.calculate()},e.prototype.ngAfterViewInit=function(){var e=this;this.attributeForm.statusChanges.subscribe((function(t){e.isValid="VALID"===t||"DISABLED"===t,e.valid.emit(e.isValid)}))},e.prototype.ngOnChanges=function(e){e.forDate&&this.calculate()},e.prototype.calculate=function(){this.calculatedPreObject=this.calculateCurrent(this.preGeoObject),this.calculatedPostObject=this.calculateCurrent(this.postGeoObject),null!=this.geometryEditor&&this.geometryEditor.reload()},e.prototype.calculateCurrent=function(e){for(var t=this,n={},r=this.forDate.getTime(),o=function(o){var a=i.geoObjectType.attributes[o];(n[a.code]=null,"local"===a.type&&(n[a.code]=i.lService.create()),a.isChangeOverTime)?e.attributes[a.code].values.forEach((function(e){var o=Date.parse(e.startDate),i=Date.parse(e.endDate);r>=o&&r<=i&&("local"===a.type?n[a.code]={startDate:t.formatDate(e.startDate),endDate:t.formatDate(e.endDate),value:JSON.parse(JSON.stringify(e.value))}:"term"===a.type&&null!=e.value&&Array.isArray(e.value)&&e.value.length>0?n[a.code]={startDate:t.formatDate(e.startDate),endDate:t.formatDate(e.endDate),value:e.value[0]}:n[a.code]={startDate:t.formatDate(e.startDate),endDate:t.formatDate(e.endDate),value:e.value})})):n[a.code]=e.attributes[a.code]},i=this,a=0;a<this.geoObjectType.attributes.length;++a)o(a);for(a=0;a<this.geoObjectType.attributes.length;++a){var l=this.geoObjectType.attributes[a];l.isChangeOverTime&&null==n[l.code]&&(n[l.code]={startDate:null,endDate:null,value:""})}return n},e.prototype.formatDate=function(e){return e===l.PRESENT?this.lService.localize("changeovertime","present"):e},e.prototype.handleChangeCode=function(e){this.postGeoObject.attributes.code=this.calculatedPostObject.code},e.prototype.onManageAttributeVersions=function(e){var t=this;this.bsModalRef=this.modalService.show(a.ManageVersionsModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.geoObjectOverTime=this.postGeoObject,this.bsModalRef.content.geoObjectType=this.geoObjectType,this.bsModalRef.content.isNewGeoObject=this.isNew,this.bsModalRef.content.attribute=e,this.bsModalRef.content.onAttributeVersionChange.subscribe((function(e){t.calculate()})),this.bsModalRef.content.tfInit()},e.prototype.onManageGeometryVersions=function(){for(var e=null,t=0;t<this.geoObjectType.attributes.length;++t)"geometry"===this.geoObjectType.attributes[t].code&&(e=this.geoObjectType.attributes[t]);this.onManageAttributeVersions(e)},e.prototype.isDifferentText=function(e){return null==this.calculatedPostObject[e.code]&&null!=this.calculatedPreObject[e.code]||this.calculatedPostObject[e.code].value&&this.calculatedPostObject[e.code].value.trim()!==this.calculatedPreObject[e.code].value},e.prototype.isDifferentValue=function(e){return null==this.calculatedPostObject[e.code]&&null!=this.calculatedPreObject[e.code]||this.calculatedPostObject[e.code].value&&this.calculatedPostObject[e.code].value!==this.calculatedPreObject[e.code].value},e.prototype.onSelectPropertyOption=function(e,t){this.currentTermOption=JSON.parse(JSON.stringify(this.modifiedTermOption))},e.prototype.getGeoObjectTypeTermAttributeOptions=function(e){for(var t=0;t<this.geoObjectType.attributes.length;t++){var n=this.geoObjectType.attributes[t];if("term"===n.type&&n.code===e){var r=(n=n).rootTerm.children;return"status"===n.code?c.default.removeStatuses(r):r}}return null},e.prototype.isStatusChanged=function(e,t){if(null!=t&&null==e)return!0;if(null==t||null==e||0==t.length||0==e.length)return!1;var n=t;Array.isArray(t)&&(n=t[0]);var r=e;return Array.isArray(e)&&(r=e[0]),n!==r},e.prototype.getTypeDefinition=function(e){for(var t=0;t<this.geoObjectType.attributes.length;t++){var n=this.geoObjectType.attributes[t];if(n.code===e)return n.type}return null},e.prototype.getIsValid=function(){return this.isValid},e.prototype.getGeoObject=function(){return this.postGeoObject},e.ɵfac=function(t){return new(t||e)(s.ɵɵdirectiveInject(d.IOService),s.ɵɵdirectiveInject(p.BsModalService),s.ɵɵdirectiveInject(s.ChangeDetectorRef),s.ɵɵdirectiveInject(d.RegistryService),s.ɵɵdirectiveInject(s.ElementRef),s.ɵɵdirectiveInject(d.ChangeRequestService),s.ɵɵdirectiveInject(m.DatePipe),s.ɵɵdirectiveInject(u.ToEpochDateTimePipe),s.ɵɵdirectiveInject(g.LocalizationService))},e.ɵcmp=s.ɵɵdefineComponent({type:e,selectors:[["geoobject-shared-attribute-editor"]],viewQuery:function(e,t){var n;(1&e&&(s.ɵɵviewQuery(y,!0),s.ɵɵviewQuery(S,!0)),2&e)&&(s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.geometryEditor=n.first),s.ɵɵqueryRefresh(n=s.ɵɵloadQuery())&&(t.attributeForm=n.first))},inputs:{preGeoObject:"preGeoObject",postGeoObject:"postGeoObject",geoObjectType:"geoObjectType",attributeExcludes:"attributeExcludes",forDate:"forDate",readOnly:"readOnly",isNew:"isNew",isEditingGeometries:"isEditingGeometries",isGeometryInlined:"isGeometryInlined"},outputs:{valid:"valid"},features:[s.ɵɵProvidersFeature([o.DatePipe]),s.ɵɵNgOnChangesFeature],decls:4,vars:1,consts:[["name","geobject-shared-attribute-editor",1,"modal-form"],["attributeForm","ngForm"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"text"],[1,"panel",2,"box-shadow","none"],[1,"panel-body"],[1,"list-group"],["class","list-group-item","style","text-align:left; border: 1px solid #ddd;",4,"ngFor","ngForOf"],[1,"list-group-item",2,"text-align","left","border","1px solid #ddd"],["class","button-holder","style","text-align:left;",4,"ngIf"],["key","geoobject.code.alternate.label"],["key","geoobject.displayLabel.alternate.label"],["key","shared.attributes.attribute.geometry.label"],["type","text","required","",3,"ngModel","id","name","disabled","ngModelChange","change",4,"ngIf"],["type","text","required","",3,"ngModel","id","name","disabled","ngModelChange","change"],["type","text","disabled","",3,"ngModel","id","name",4,"ngIf"],["class","warning-text",4,"ngIf"],["type","text","disabled","",3,"ngModel","id","name"],[1,"warning-text"],["key","change.request.changed.value.prefix"],["class","list-group",4,"ngIf"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],["disabled","","type","text",3,"required","ngModel","name"],["type","date","disabled","",3,"ngModel","id","name"],["type","radio","disabled","",3,"checked","value","id","name"],["key","change.request.boolean.option.true"],["key","change.request.boolean.option.false"],["disabled","","type","number",3,"ngModel","id","name","ngModelChange"],["type","number","disabled","",3,"ngModel","id","name","ngModelChange"],["disabled","",1,"select-area",2,"float","none",3,"id","name","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"geometryType","readOnly","preGeometry","postGeometry","bboxCode","bboxType","bboxDate","onClickEdit"],["geometryEditor",""],[1,"button-holder",2,"text-align","left"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","changeovertime.manageVersions.button.label"],[1,""]],template:function(e,t){1&e&&(s.ɵɵelementStart(0,"form",0,1),s.ɵɵelementStart(2,"fieldset"),s.ɵɵtemplate(3,Z,3,2,"div",2),s.ɵɵelementEnd(),s.ɵɵelementEnd()),2&e&&(s.ɵɵadvance(3),s.ɵɵproperty("ngIf",t.preGeoObject))},directives:[f.ɵangular_packages_forms_forms_y,f.NgControlStatusGroup,f.NgForm,m.NgIf,m.NgForOf,h.LocalizeComponent,f.DefaultValueAccessor,f.RequiredValidator,f.NgControlStatus,f.NgModel,f.NumberValueAccessor,f.SelectControlValueAccessor,f.NgSelectOption,f.ɵangular_packages_forms_forms_x,v.GeoObjectEditorMapComponent],pipes:[b.GeoObjectAttributeExcludesPipe,m.DatePipe],styles:['.modal-form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   input[type="text"][_ngcontent-%COMP%] {\n    background: #f5f5f5;\n}\n\n.modal-form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   input[type="text"][_ngcontent-%COMP%]:disabled {\n    background: #eee;\n}\n\nli.list-group-item[_ngcontent-%COMP%] {\n    font-size: 18px;\n}\n\n.warning-text[_ngcontent-%COMP%]{\n    color: orange;\n}\n\n\nform.modal-form[_ngcontent-%COMP%] {\n    overflow: visible;\n}\n\nfieldset[_ngcontent-%COMP%] {\n    width: 100% !important;\n}']}),e}();t.GeoObjectSharedAttributeEditorComponent=ee},565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalizedTextComponent=void 0;var r=n(0),o=(n(248),n(0)),i=n(1),a=n(44),l=n(27);function c(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",1),o.ɵɵelementStart(1,"div",2),o.ɵɵelementStart(2,"label"),o.ɵɵelement(3,"localize",3),o.ɵɵtext(4),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(5,"div",4),o.ɵɵelementStart(6,"span",5),o.ɵɵelementStart(7,"textarea",6),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),t.$implicit.value=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=t.$implicit,i=o.ɵɵnextContext();o.ɵɵadvance(3),o.ɵɵproperty("key",i.key),o.ɵɵadvance(1),o.ɵɵtextInterpolate1(" (",r.locale,") "),o.ɵɵadvance(3),o.ɵɵproperty("ngModel",r.value)("disabled",i.disabled)("name","description-"+r.locale)}}var s=function(){function e(){this.key="",this.disabled=!1,this.valueChange=new r.EventEmitter}return e.ɵfac=function(t){return new(t||e)},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["localized-text"]],inputs:{key:"key",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:1,vars:1,consts:[["class","row-holder",4,"ngFor","ngForOf"],[1,"row-holder"],[1,"label-holder"],[3,"key"],[1,"holder"],[1,"text"],[3,"ngModel","disabled","name","ngModelChange"]],template:function(e,t){1&e&&o.ɵɵtemplate(0,c,8,5,"div",0),2&e&&o.ɵɵproperty("ngForOf",t.value.localeValues)},directives:[i.NgForOf,a.LocalizeComponent,l.DefaultValueAccessor,l.NgControlStatus,l.NgModel],encapsulation:2}),e}();t.LocalizedTextComponent=s},566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeRequestService=void 0;n(0);var r=n(31),o=n(32),i=(n(15),n(0)),a=n(31),l=n(15),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.getAllActions=function(e){var t=this,n=new r.HttpParams;return null!=e&&(n=n.set("requestId",e)),this.eventService.start(),this.http.get(acp+"/changerequest/getAllActions",{params:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.applyAction=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/changerequest/applyAction",JSON.stringify({action:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.applyActionStatusProperties=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/changerequest/applyActionStatusProperties",JSON.stringify({action:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.lockAction=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/changerequest/lockAction",JSON.stringify({actionId:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.unlockAction=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/changerequest/unlockAction",JSON.stringify({actionId:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.getAllRequests=function(e){var t=new r.HttpParams;return t=t.set("filter",e),this.http.get(acp+"/changerequest/get-all-requests",{params:t}).toPromise()},e.prototype.getRequestDetails=function(e){var t=this,n=new r.HttpParams;return n=n.set("requestId",e),this.eventService.start(),this.http.get(acp+"/changerequest/get-request-details",{params:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.confirmChangeRequest=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/changerequest/confirm-change-request",JSON.stringify({requestId:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.execute=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/changerequest/execute-actions",JSON.stringify({requestId:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.rejectAllActions=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/changerequest/reject-all-actions",JSON.stringify({requestId:e,actions:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.approveAllActions=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/changerequest/approve-all-actions",JSON.stringify({requestId:e,actions:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.submitChangeRequest=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"}),i=new r.HttpParams;return i=i.set("actions",e),this.eventService.start(),this.http.post(acp+"/cgr/submitChangeRequest",{actions:e},{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.ɵfac=function(t){return new(t||e)(i.ɵɵinject(a.HttpClient),i.ɵɵinject(l.EventService))},e.ɵprov=i.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.ChangeRequestService=c},567:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IOService=void 0;n(0);var r=n(31),o=n(32),i=(n(15),n(0)),a=n(31),l=n(15),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.importSpreadsheet=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/etl/import",JSON.stringify({json:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.cancelImport=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/etl/cancel-import",JSON.stringify({configuration:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.importShapefile=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/etl/import",JSON.stringify({json:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.listGeoObjectTypes=function(e){var t=new r.HttpParams;return t=t.set("includeLeafTypes",e.toString()),this.http.get(acp+"/cgr/geoobjecttype/list-types",{params:t}).toPromise()},e.prototype.getTypeAncestors=function(e,t,n){var o=new r.HttpParams;return o=(o=(o=o.set("code",e)).set("hierarchyCode",t)).set("includeInheritedTypes",n.toString()),this.http.get(acp+"/cgr/geoobjecttype/get-ancestors",{params:o}).toPromise()},e.prototype.getHierarchiesForType=function(e,t){var n=this,i=new r.HttpParams;return i=(i=i.set("code",e)).set("includeTypes",t.toString()),this.eventService.start(),this.http.get(acp+"/cgr/geoobjecttype/get-hierarchies",{params:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getGeoObjectSuggestions=function(e,t,n,o){var i=new r.HttpHeaders({"Content-Type":"application/json"}),a={text:e,type:t};return null!=n&&null!=o&&(a.parent=n,a.hierarchy=n),this.http.post(acp+"/cgr/geoobject/suggestions",JSON.stringify(a),{headers:i}).toPromise()},e.prototype.createGeoObjectSynonym=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/geo-synonym/createGeoEntitySynonym",JSON.stringify({entityId:e,label:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.deleteGeoObjectSynonym=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/geo-synonym/deleteGeoEntitySynonym",JSON.stringify({synonymId:e,vOid:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getTermSuggestions=function(e,t,n){var o=new r.HttpParams;return o=(o=(o=o.set("mdAttributeId",e)).set("text",t)).set("limit",n),this.http.get(acp+"/uploader/getClassifierSuggestions",{params:o}).toPromise()},e.prototype.createTermSynonym=function(e,t){var n=new r.HttpHeaders({"Content-Type":"application/json"}),o=JSON.stringify({classifierId:e,label:t});return this.http.post(acp+"/uploader/createClassifierSynonym",o,{headers:n}).toPromise()},e.prototype.deleteTermSynonym=function(e){var t=new r.HttpHeaders({"Content-Type":"application/json"}),n=JSON.stringify({synonymId:e});return this.http.post(acp+"/uploader/deleteClassifierSynonym",n,{headers:t}).toPromise()},e.prototype.createTerm=function(e,t,n){var o=new r.HttpHeaders({"Content-Type":"application/json"}),i={parentTermCode:n,termJSON:{label:e,code:t}};return this.http.post(acp+"/cgr/geoobjecttype/addterm",JSON.stringify(i),{headers:o}).toPromise()},e.prototype.removeTerm=function(e,t){var n=new r.HttpHeaders({"Content-Type":"application/json"});return this.http.post(acp+"/cgr/geoobjecttype/deleteterm",JSON.stringify({parentTermCode:e,termCode:t}),{headers:n}).toPromise()},e.ɵfac=function(t){return new(t||e)(i.ɵɵinject(a.HttpClient),i.ɵɵinject(l.EventService))},e.ɵprov=i.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.IOService=c},568:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalizationManagerService=void 0;n(0);var r=n(31),o=(n(15),n(0)),i=n(31),a=n(15),l=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.getNewLocaleInfo=function(){return this.http.get(acp+"/localization/getNewLocaleInformation").toPromise()},e.prototype.installLocale=function(e,t,n){var o=new r.HttpParams;return null!=e&&(o=o.set("language",e)),null!=t&&(o=o.set("country",t)),null!=n&&(o=o.set("variant",n)),this.http.get(acp+"/localization/installLocale",{params:o}).toPromise()},e.ɵfac=function(t){return new(t||e)(o.ɵɵinject(i.HttpClient),o.ɵɵinject(a.EventService))},e.ɵprov=o.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.LocalizationManagerService=l},569:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapService=void 0;n(0);var r=n(31),o=n(32),i=n(541),a=(n(15),n(0)),l=n(31),c=n(15),s=function(){function e(e,t){this.http=e,this.eventService=t,i.accessToken="pk.eyJ1IjoidGVycmFmcmFtZSIsImEiOiJjanZxNWE5bWkwazYwNGFtb3loOGxsbjR1In0.ZNEwT-pBnGookEb-BF_jQQ"}return e.prototype.roots=function(e,t,n){var i=this,a=new r.HttpParams;return null!=e&&(a=a.set("typeCode",e)),null!=t&&(a=a.set("hierarchyCode",t)),null!=n&&(a=a.set("date",n)),this.eventService.start(),this.http.get(acp+"/registrylocation/roots",{params:a}).pipe(o.finalize((function(){i.eventService.complete()}))).toPromise()},e.prototype.select=function(e,t,n,i,a){var l=this,c=new r.HttpParams;return c=(c=c.set("code",e)).set("typeCode",t),null!=a&&(c=c.set("date",a)),null!=n&&(c=c.set("childTypeCode",n)),null!=i&&(c=c.set("hierarchyCode",i)),this.eventService.start(),this.http.get(acp+"/registrylocation/select",{params:c}).pipe(o.finalize((function(){l.eventService.complete()}))).toPromise()},e.ɵfac=function(t){return new(t||e)(a.ɵɵinject(l.HttpClient),a.ɵɵinject(c.EventService))},e.ɵprov=a.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.MapService=s},570:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistryService=void 0;n(0);var r=n(31),o=n(32),i=(n(15),n(0)),a=n(31),l=n(15),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.init=function(){return this.http.get(acp+"/cgr/init").toPromise()},e.prototype.getGeoObjectTypes=function(e,t){var n=new r.HttpParams;return null!=e&&(n=n.set("types",JSON.stringify(e))),null!=t&&(n=n.set("hierarchies",JSON.stringify(t))),this.http.get(acp+"/cgr/geoobjecttype/get-all",{params:n}).toPromise()},e.prototype.getParentGeoObjects=function(e,t,n,o,i){var a=new r.HttpParams;return a=(a=(a=(a=a.set("childId",e)).set("childTypeCode",t)).set("parentTypes",JSON.stringify(n))).set("recursive",JSON.stringify(o)),null!=i&&(a=a.set("date",i)),this.http.get(acp+"/cgr/geoobject/get-parent-geoobjects",{params:a}).toPromise()},e.prototype.getChildGeoObjects=function(e,t,n,o){var i=new r.HttpParams;return i=(i=(i=(i=i.set("parentId",e)).set("parentTypeCode",t)).set("childrenTypes",JSON.stringify(n))).set("recursive",JSON.stringify(o)),this.http.get(acp+"/cgr/geoobject/getchildren",{params:i}).toPromise()},e.prototype.newGeoObjectInstance=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/geoobject/newGeoObjectInstance",JSON.stringify({typeCode:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.createGeoObjectType=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/geoobjecttype/create",JSON.stringify({gtJSON:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.updateGeoObjectType=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/geoobjecttype/update",JSON.stringify({gtJSON:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.deleteGeoObjectType=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/geoobjecttype/delete",JSON.stringify({code:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.addAttributeType=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/geoobjecttype/addattribute",JSON.stringify({geoObjTypeId:e,attributeType:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.updateAttributeType=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/geoobjecttype/updateattribute",JSON.stringify({geoObjTypeId:e,attributeType:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.deleteAttributeType=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/geoobjecttype/deleteattribute",JSON.stringify({geoObjTypeId:e,attributeName:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.addAttributeTermTypeOption=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/geoobjecttype/addterm",JSON.stringify({parentTermCode:e,termJSON:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.updateAttributeTermTypeOption=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/geoobjecttype/updateterm",JSON.stringify({parentTermCode:e,termJSON:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.deleteAttributeTermTypeOption=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/geoobjecttype/deleteterm",JSON.stringify({parentTermCode:e,termCode:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getGeoObject=function(e,t){var n=new r.HttpParams;return n=(n=n.set("id",e)).set("typeCode",t),this.http.get(acp+"/cgr/geoobject/get",{params:n}).toPromise()},e.prototype.getGeoObjectBounds=function(e,t){var n=new r.HttpParams;return n=(n=n.set("code",e)).set("typeCode",t),this.http.get(acp+"/cgr/geoobject/get-bounds",{params:n}).toPromise()},e.prototype.getGeoObjectBoundsAtDate=function(e,t,n){var o=new r.HttpParams;return o=(o=(o=o.set("code",e)).set("typeCode",t)).set("date",n),this.http.get(acp+"/cgr/geoobject-time/get-bounds",{params:o}).toPromise()},e.prototype.getGeoObjectByCode=function(e,t){var n=new r.HttpParams;return n=(n=n.set("code",e)).set("typeCode",t),this.http.get(acp+"/cgr/geoobject/get-code",{params:n}).toPromise()},e.prototype.getHierarchiesForGeoObject=function(e,t){var n=this,i=new r.HttpParams;return i=(i=i.set("code",e)).set("typeCode",t),this.eventService.start(),this.http.get(acp+"/cgr/geoobject/get-hierarchies-over-time",{params:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getGeoObjectSuggestions=function(e,t,n,o,i){var a=new r.HttpHeaders({"Content-Type":"application/json"}),l={text:e,type:t};return null!=n&&null!=o&&(l.parent=n,l.hierarchy=o),null!=i&&(l.date=i),this.http.post(acp+"/cgr/geoobject/suggestions",JSON.stringify(l),{headers:a}).toPromise()},e.prototype.getGeoObjectSuggestionsTypeAhead=function(e,t){var n=new r.HttpHeaders({"Content-Type":"application/json"}),o={text:e,type:t};return this.http.post(acp+"/cgr/geoobject/suggestions",JSON.stringify(o),{headers:n}).toPromise()},e.prototype.getScheduledJobs=function(e,t,n,o){var i=new r.HttpParams;return i=(i=(i=(i=i.set("pageSize",e.toString())).set("pageNumber",t.toString())).set("sortAttr",n)).set("isAscending",o.toString()),this.http.get(acp+"/etl/get-active",{params:i}).toPromise()},e.prototype.getCompletedScheduledJobs=function(e,t,n,o){var i=new r.HttpParams;return i=(i=(i=(i=i.set("pageSize",e.toString())).set("pageNumber",t.toString())).set("sortAttr",n)).set("isAscending",o.toString()),this.http.get(acp+"/etl/get-completed",{params:i}).toPromise()},e.prototype.getScheduledJob=function(e,t,n,o){var i=new r.HttpParams;return i=(i=(i=(i=i.set("historyId",e)).set("pageSize",t.toString())).set("pageNumber",n.toString())).set("onlyUnresolved",o.toString()),this.http.get(acp+"/etl/get-import-details",{params:i}).toPromise()},e.prototype.getExportDetails=function(e,t,n){var o=new r.HttpParams;return o=(o=(o=o.set("historyId",e)).set("pageSize",t.toString())).set("pageNumber",n.toString()),this.http.get(acp+"/etl/get-export-details",{params:o}).toPromise()},e.prototype.resolveScheduledJob=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/etl/import-resolve",JSON.stringify({historyId:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.submitValidationResolve=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/etl/validation-resolve",JSON.stringify({config:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.submitErrorResolve=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/etl/error-resolve",JSON.stringify({config:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.getMasterLists=function(){var e=new r.HttpParams;return this.http.get(acp+"/master-list/list-all",{params:e}).toPromise()},e.prototype.getMasterListHistory=function(e,t){var n=new r.HttpParams;return n=(n=n.set("oid",e)).set("versionType",t),this.http.get(acp+"/master-list/versions",{params:n}).toPromise()},e.prototype.getAllMasterListVersions=function(){var e=new r.HttpParams;return this.http.get(acp+"/master-list/list-all-versions",{params:e}).toPromise()},e.prototype.getMasterListVersion=function(e){var t=new r.HttpParams;return t=t.set("oid",e),this.http.get(acp+"/master-list/version",{params:t}).toPromise()},e.prototype.getLocales=function(){var e=new r.HttpParams;return this.http.get(acp+"/localization/get-locales",{params:e}).toPromise()},e.prototype.getGeoObjectOverTime=function(e,t){new r.HttpHeaders({"Content-Type":"application/json"});var n=new r.HttpParams;return n=(n=n.set("code",e)).set("typeCode",t),this.http.get(acp+"/cgr/geoobject-time/get-code",{params:n}).toPromise()},e.prototype.newGeoObjectOverTime=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/cgr/geoobject-time/newGeoObjectInstance",JSON.stringify({typeCode:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.setAttributeVersions=function(e,t,n,i){var a=this,l=new r.HttpHeaders({"Content-Type":"application/json"}),c={geoObjectCode:e,geoObjectTypeCode:t,attributeName:n,collection:i};return this.eventService.start(),this.http.post(acp+"/cgr/geoobject/setAttributeVersions",JSON.stringify(c),{headers:l}).pipe(o.finalize((function(){a.eventService.complete()}))).toPromise()},e.prototype.createMasterList=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/master-list/create",JSON.stringify({list:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.createMasterListVersion=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/master-list/create-version",JSON.stringify({oid:e,forDate:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.publishMasterListVersions=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/master-list/publish-versions",JSON.stringify({oid:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.deleteMasterList=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/master-list/remove",JSON.stringify({oid:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.deleteMasterListVersion=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/master-list/remove-version",JSON.stringify({oid:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.publishMasterList=function(e){var t=new r.HttpHeaders({"Content-Type":"application/json"});return this.http.post(acp+"/master-list/publish",JSON.stringify({oid:e}),{headers:t})},e.prototype.getMasterList=function(e){var t=new r.HttpParams;return t=t.set("oid",e),this.http.get(acp+"/master-list/get",{params:t}).toPromise()},e.prototype.applyGeoObjectEdit=function(e,t,n,i,a){var l=this,c=new r.HttpHeaders({"Content-Type":"application/json"}),s={parentTreeNode:e,geoObject:t,isNew:n,masterListId:i};return null!=a&&(s.notes=a),this.eventService.start(),this.http.post(acp+"/geoobject-editor/apply",JSON.stringify(s),{headers:c}).pipe(o.finalize((function(){l.eventService.complete()}))).toPromise()},e.prototype.data=function(e,t,n,o,i){var a=new r.HttpHeaders({"Content-Type":"application/json"}),l={oid:e,sort:i};return null!=t&&(l.pageNumber=t),null!=n&&(l.pageSize=n),o.length>0&&(l.filter=o),this.http.post(acp+"/master-list/data",JSON.stringify(l),{headers:a}).toPromise()},e.prototype.values=function(e,t,n,o,i){var a=new r.HttpHeaders({"Content-Type":"application/json"}),l={oid:e,attributeName:n,valueAttribute:o};return i.length>0&&(l.filter=i),null!=t&&t.length>0&&(l.value=t),this.http.post(acp+"/master-list/values",JSON.stringify(l),{headers:a}).toPromise()},e.prototype.publishShapefile=function(e){var t=new r.HttpHeaders({"Content-Type":"application/json"}),n={oid:e};return this.http.post(acp+"/master-list/generate-shapefile",JSON.stringify(n),{headers:t}).toPromise()},e.prototype.progress=function(e){var t=new r.HttpParams;return t=t.set("oid",e),this.http.get(acp+"/master-list/progress",{params:t}).toPromise()},e.prototype.getMasterListsByOrg=function(){var e=new r.HttpParams;return this.http.get(acp+"/master-list/list-org",{params:e}).toPromise()},e.prototype.getPublishMasterListJobs=function(e,t,n,o,i){var a=new r.HttpParams;return a=(a=(a=(a=(a=a.set("oid",e)).set("pageSize",t.toString())).set("pageNumber",n.toString())).set("sortAttr",o)).set("isAscending",i.toString()),this.http.get(acp+"/master-list/get-publish-jobs",{params:a}).toPromise()},e.prototype.getOrganizations=function(){var e=this;return this.eventService.start(),this.http.get(acp+"/cgr/organizations/get-all").pipe(o.finalize((function(){e.eventService.complete()}))).toPromise()},e.ɵfac=function(t){return new(t||e)(i.ɵɵinject(a.HttpClient),i.ɵɵinject(l.EventService))},e.ɵprov=i.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.RegistryService=c},571:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronizationConfigService=void 0;n(0);var r=n(31),o=n(32),i=(n(15),n(0)),a=n(31),l=n(15),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.getPage=function(e,t){var n=this,i=new r.HttpParams;return i=(i=i.set("pageNumber",e.toString())).set("pageSize",t.toString()),this.eventService.start(),this.http.get(acp+"/synchronization-config/get-all",{params:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.get=function(e){var t=this,n=new r.HttpParams;return n=n.set("oid",e),this.eventService.start(),this.http.get(acp+"/synchronization-config/get",{params:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.getCustomAttrCfg=function(e,t){var n=this,i=new r.HttpParams;return i=(i=i.set("externalId",t)).set("geoObjectTypeCode",e),this.eventService.start(),this.http.get(acp+"/synchronization-config/get-custom-attr",{params:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.getConfigForES=function(e,t){var n=this,i=new r.HttpParams;return i=(i=i.set("externalSystemId",e)).set("hierarchyTypeCode",t),this.eventService.start(),this.http.get(acp+"/synchronization-config/get-config-for-es",{params:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.prototype.apply=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/synchronization-config/apply",JSON.stringify({config:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.edit=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"}),i={};return null!=e&&(i={oid:e}),this.eventService.start(),this.http.post(acp+"/synchronization-config/edit",JSON.stringify(i),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.remove=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/synchronization-config/remove",JSON.stringify({oid:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.unlock=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/synchronization-config/unlock",JSON.stringify({oid:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.run=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/synchronization-config/run",JSON.stringify({oid:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.getJobs=function(e,t,n){var o=new r.HttpParams;return o=(o=(o=o.set("oid",e)).set("pageNumber",t.toString())).set("pageSize",n.toString()),this.http.get(acp+"/synchronization-config/get-jobs",{params:o}).toPromise()},e.ɵfac=function(t){return new(t||e)(i.ɵɵinject(a.HttpClient),i.ɵɵinject(l.EventService))},e.ɵprov=i.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.SynchronizationConfigService=c},572:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskService=void 0;n(0);var r=n(31),o=n(32),i=(n(15),n(0)),a=n(31),l=n(15),c=function(){function e(e,t){this.http=e,this.eventService=t}return e.prototype.getMyTasks=function(e,t,n){var o=new r.HttpParams;return o=(o=(o=(o=o.set("orderBy","createDate")).set("pageNum",e.toString())).set("pageSize",t.toString())).set("whereStatus",n),this.http.get(acp+"/tasks/get",{params:o}).toPromise()},e.prototype.completeTask=function(e){var t=this,n=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/tasks/complete",JSON.stringify({id:e}),{headers:n}).pipe(o.finalize((function(){t.eventService.complete()}))).toPromise()},e.prototype.setTaskStatus=function(e,t){var n=this,i=new r.HttpHeaders({"Content-Type":"application/json"});return this.eventService.start(),this.http.post(acp+"/tasks/setTaskStatus",JSON.stringify({id:e,status:t}),{headers:i}).pipe(o.finalize((function(){n.eventService.complete()}))).toPromise()},e.ɵfac=function(t){return new(t||e)(i.ɵɵinject(a.HttpClient),i.ɵɵinject(l.EventService))},e.ɵprov=i.ɵɵdefineInjectable({token:e,factory:e.ɵfac}),e}();t.TaskService=c},573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttributesPageComponent=void 0;var r=n(0),o=(n(548),n(0)),i=n(44),a=n(27),l=n(1);function c(e,t){if(1&e&&(o.ɵɵelementStart(0,"option",22),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵpropertyInterpolate("value",n.code),o.ɵɵadvance(1),o.ɵɵtextInterpolate(n.label)}}function s(e,t){if(1&e&&(o.ɵɵelementStart(0,"option",22),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵpropertyInterpolate("value",n),o.ɵɵadvance(1),o.ɵɵtextInterpolate(n)}}function d(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",6),o.ɵɵelementStart(1,"div",7),o.ɵɵelementStart(2,"div",8),o.ɵɵelementStart(3,"label",9),o.ɵɵtext(4),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(5,"div",11),o.ɵɵelementStart(6,"select",23),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),t.$implicit.target=e})),o.ɵɵelement(7,"option"),o.ɵɵtemplate(8,s,2,2,"option",13),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=t.$implicit,i=o.ɵɵnextContext();o.ɵɵadvance(4),o.ɵɵtextInterpolate(r.label.localizedValue),o.ɵɵadvance(2),o.ɵɵproperty("name",r.code+(null!=r.locale?r.locale:""))("ngModel",r.target)("required",r.required),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",i.configuration.sheet.attributes[r.baseType])}}var p=function(e){return{"chk-checked":e}};function m(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",6),o.ɵɵelementStart(1,"div",7),o.ɵɵelementStart(2,"div",8),o.ɵɵelementStart(3,"label",9),o.ɵɵelement(4,"localize",24),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(5,"div",25),o.ɵɵelementStart(6,"div",26),o.ɵɵelementStart(7,"div",27),o.ɵɵlistener("click",(function(){o.ɵɵrestoreView(n);var e=o.ɵɵnextContext();return e.configuration.postalCode=!e.configuration.postalCode})),o.ɵɵelement(8,"span"),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext();o.ɵɵadvance(7),o.ɵɵproperty("ngClass",o.ɵɵpureFunction1(1,p,r.configuration.postalCode))}}function u(e,t){if(1&e&&(o.ɵɵelementStart(0,"option",22),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵpropertyInterpolate("value",n),o.ɵɵadvance(1),o.ɵɵtextInterpolate(n)}}function g(e,t){if(1&e&&(o.ɵɵelementStart(0,"option",22),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵpropertyInterpolate("value",n),o.ɵɵadvance(1),o.ɵɵtextInterpolate(n)}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",7),o.ɵɵelementStart(1,"div",8),o.ɵɵelementStart(2,"label",9),o.ɵɵelement(3,"localize",31),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"div",11),o.ɵɵelementStart(5,"select",32),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration.revealGeometryColumn=e})),o.ɵɵelement(6,"option"),o.ɵɵtemplate(7,g,2,2,"option",13),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext(2);o.ɵɵadvance(5),o.ɵɵproperty("ngModel",r.configuration.revealGeometryColumn)("required",!1),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",r.configuration.sheet.attributes.text)}}function h(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",6),o.ɵɵelementStart(1,"div",7),o.ɵɵelementStart(2,"div",8),o.ɵɵelementStart(3,"label",9),o.ɵɵelement(4,"localize",28),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(5,"div",11),o.ɵɵelementStart(6,"select",29),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().configuration.externalIdAttributeTarget=e})),o.ɵɵelement(7,"option"),o.ɵɵtemplate(8,u,2,2,"option",13),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵtemplate(9,f,8,3,"div",30),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext();o.ɵɵadvance(6),o.ɵɵproperty("ngModel",r.configuration.externalIdAttributeTarget)("required",!0),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",r.configuration.sheet.attributes.text),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","RevealExternalSystem"===r.configuration.externalSystem.type&&"EXCEL"===r.configuration.formatType)}}function v(e,t){1&e&&o.ɵɵelement(0,"localize",33)}function b(e,t){1&e&&o.ɵɵelement(0,"localize",34)}var y=function(){function e(){this.configurationChange=new r.EventEmitter,this.stateChange=new r.EventEmitter}return e.prototype.onNext=function(){this.configurationChange.emit(this.configuration),this.stateChange.emit("NEXT")},e.prototype.onCancel=function(){this.stateChange.emit("CANCEL")},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["attributes-page"]],inputs:{configuration:"configuration"},outputs:{configurationChange:"configurationChange",stateChange:"stateChange"},decls:30,vars:8,consts:[[1,"text-center"],["key","io.attributes.title"],[1,"lead"],["key","io.attributes.description"],[1,"modal-form"],["form","ngForm"],[1,"form-group"],[1,"row-holder"],[1,"label-holder"],[1,""],["key","io.modal.hierarchy"],[1,"holder"],["name","hierarchy","required","",1,"select-area",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[1,"button-holder"],["type","button","role","button",1,"btn","btn-default",3,"click"],["key","io.cancel"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.next",4,"ngIf"],["key","io.ok",4,"ngIf"],[3,"value"],[1,"select-area",3,"name","ngModel","required","ngModelChange"],["key","io.modal.postalCode"],[1,"form-check"],[1,"check-block"],["name","postalCode",1,"jcf-unselectable","chk-area",2,"margin","0",3,"ngClass","click"],["key","io.modal.external"],["name","externalId",1,"select-area",3,"ngModel","required","ngModelChange"],["class","row-holder",4,"ngIf"],["key","io.import.revealGeometryAttribute"],["name","revealGeometryColumn",1,"select-area",3,"ngModel","required","ngModelChange"],["key","io.next"],["key","io.ok"]],template:function(e,t){if(1&e&&(o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"div",0),o.ɵɵelementStart(2,"h2"),o.ɵɵelement(3,"localize",1),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"p",2),o.ɵɵelement(5,"localize",3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(6,"form",4,5),o.ɵɵelementStart(8,"div",6),o.ɵɵelementStart(9,"div",7),o.ɵɵelementStart(10,"div",8),o.ɵɵelementStart(11,"label",9),o.ɵɵelement(12,"localize",10),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(13,"div",11),o.ɵɵelementStart(14,"select",12),o.ɵɵlistener("ngModelChange",(function(e){return t.configuration.hierarchy=e})),o.ɵɵelement(15,"option"),o.ɵɵtemplate(16,c,2,2,"option",13),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelement(17,"hr"),o.ɵɵtemplate(18,d,9,5,"div",14),o.ɵɵelement(19,"hr"),o.ɵɵtemplate(20,m,9,3,"div",15),o.ɵɵtemplate(21,h,10,4,"div",15),o.ɵɵelementStart(22,"div",6),o.ɵɵelementStart(23,"div",7),o.ɵɵelementStart(24,"div",16),o.ɵɵelementStart(25,"button",17),o.ɵɵlistener("click",(function(){return t.onCancel()})),o.ɵɵelement(26,"localize",18),o.ɵɵelementEnd(),o.ɵɵelementStart(27,"button",19),o.ɵɵlistener("click",(function(){return t.onNext()})),o.ɵɵtemplate(28,v,1,0,"localize",20),o.ɵɵtemplate(29,b,1,0,"localize",21),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵreference(7);o.ɵɵadvance(14),o.ɵɵproperty("ngModel",t.configuration.hierarchy),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",t.configuration.hierarchies),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",t.configuration.type.attributes),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",t.configuration.hasPostalCode),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.configuration.isExternal),o.ɵɵadvance(6),o.ɵɵproperty("disabled",n.invalid),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",!t.configuration.postalCode),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.configuration.postalCode)}},directives:[i.LocalizeComponent,a.ɵangular_packages_forms_forms_y,a.NgControlStatusGroup,a.NgForm,a.SelectControlValueAccessor,a.RequiredValidator,a.NgControlStatus,a.NgModel,a.NgSelectOption,a.ɵangular_packages_forms_forms_x,l.NgForOf,l.NgIf,l.NgClass],encapsulation:2}),e}();t.AttributesPageComponent=y},574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationPageComponent=void 0;var r=n(0),o=(n(548),n(545),n(0)),i=n(545),a=n(27),l=n(44),c=n(1);function s(e,t){if(1&e&&(o.ɵɵelementStart(0,"option",35),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵproperty("value",n),o.ɵɵadvance(1),o.ɵɵtextInterpolate(n)}}function d(e,t){1&e&&(o.ɵɵelementStart(0,"option",36),o.ɵɵelement(1,"localize",37),o.ɵɵelementEnd())}function p(e,t){1&e&&(o.ɵɵelementStart(0,"option",38),o.ɵɵelement(1,"localize",39),o.ɵɵelementEnd())}function m(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",17),o.ɵɵelementStart(1,"div",9),o.ɵɵelementStart(2,"div",18),o.ɵɵelementStart(3,"div",19),o.ɵɵelementStart(4,"label"),o.ɵɵtext(5),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(6,"div",20),o.ɵɵelementStart(7,"div",21),o.ɵɵelementStart(8,"label"),o.ɵɵelement(9,"localize",22),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(10,"div",23),o.ɵɵelementStart(11,"select",24),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),t.$implicit.target=e})),o.ɵɵelement(12,"option",25),o.ɵɵtemplate(13,s,2,2,"option",26),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(14,"div",21),o.ɵɵelementStart(15,"label"),o.ɵɵelement(16,"localize",27),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(17,"div",23),o.ɵɵelementStart(18,"select",28),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),t.$implicit.matchStrategy=e})),o.ɵɵelement(19,"option"),o.ɵɵelementStart(20,"option",29),o.ɵɵelement(21,"localize",30),o.ɵɵelementEnd(),o.ɵɵelementStart(22,"option",31),o.ɵɵelement(23,"localize",32),o.ɵɵelementEnd(),o.ɵɵtemplate(24,d,2,0,"option",33),o.ɵɵtemplate(25,p,2,0,"option",34),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=t.$implicit,i=t.index,a=o.ɵɵnextContext();o.ɵɵadvance(5),o.ɵɵtextInterpolate1(" ",r.label," "),o.ɵɵadvance(6),o.ɵɵproperty("ngModel",r.target)("name",i+"-location"),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",a.configuration.sheet.attributes.text),o.ɵɵadvance(5),o.ɵɵproperty("name",i+"-matchStrategy")("ngModel",r.matchStrategy)("required",null!=r.target&&""!==r.target),o.ɵɵadvance(6),o.ɵɵproperty("ngIf",a.configuration.isExternal),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",a.configuration.isExternal&&"DHIS2ExternalSystem"===a.configuration.externalSystem.type)}}var u=function(){function e(e){this.service=e,this.configurationChange=new r.EventEmitter,this.stateChange=new r.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.service.getTypeAncestors(this.configuration.type.code,this.configuration.hierarchy,!0).then((function(t){e.configuration.locations=t}))},e.prototype.onNext=function(){this.configurationChange.emit(this.configuration),this.stateChange.emit("NEXT")},e.prototype.onBack=function(){this.stateChange.emit("BACK")},e.prototype.onCancel=function(){this.stateChange.emit("CANCEL")},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.IOService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["location-page"]],inputs:{configuration:"configuration"},outputs:{configurationChange:"configurationChange",stateChange:"stateChange"},decls:19,vars:2,consts:[[1,"modal-form"],[1,"text-center"],["key","io.location.title"],[1,"lead"],["key","io.location.description"],[1,"col-md-12","order-md-1"],["form","ngForm"],["class","form-group",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"row-holder"],[1,"button-holder"],["type","submit","role","button",1,"btn","btn-default",3,"click"],["key","io.back"],["type","btn","role","button",1,"btn","btn-default",3,"click"],["key","io.cancel"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.submit"],[1,"form-group"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-body"],[1,"label-holder"],["key","io.import.modal.parent.source"],[1,"holder"],[1,"select-area",3,"ngModel","name","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["key","io.import.modal.parent.matchStrategy"],[1,"select-area",3,"name","ngModel","required","ngModelChange"],["value","ALL"],["key","io.modal.all"],["value","CODE"],["key","io.modal.code"],["value","EXTERNAL",4,"ngIf"],["value","DHIS2_PATH",4,"ngIf"],[3,"value"],["value","EXTERNAL"],["key","io.modal.external"],["value","DHIS2_PATH"],["key","io.modal.dhis2path"]],template:function(e,t){if(1&e&&(o.ɵɵelementStart(0,"form",0),o.ɵɵelementStart(1,"div",1),o.ɵɵelementStart(2,"h2"),o.ɵɵelement(3,"localize",2),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"p",3),o.ɵɵelement(5,"localize",4),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(6,"div",5),o.ɵɵelementStart(7,"form",null,6),o.ɵɵtemplate(9,m,26,9,"div",7),o.ɵɵelementStart(10,"div",8),o.ɵɵelementStart(11,"div",9),o.ɵɵelementStart(12,"div",10),o.ɵɵelementStart(13,"button",11),o.ɵɵlistener("click",(function(){return t.onBack()})),o.ɵɵelement(14,"localize",12),o.ɵɵelementEnd(),o.ɵɵelementStart(15,"button",13),o.ɵɵlistener("click",(function(){return t.onCancel()})),o.ɵɵelement(16,"localize",14),o.ɵɵelementEnd(),o.ɵɵelementStart(17,"button",15),o.ɵɵlistener("click",(function(){return t.onNext()})),o.ɵɵelement(18,"localize",16),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵreference(8);o.ɵɵadvance(9),o.ɵɵproperty("ngForOf",t.configuration.locations),o.ɵɵadvance(8),o.ɵɵproperty("disabled",n.invalid)}},directives:[a.ɵangular_packages_forms_forms_y,a.NgControlStatusGroup,a.NgForm,l.LocalizeComponent,c.NgForOf,a.SelectControlValueAccessor,a.NgControlStatus,a.NgModel,a.NgSelectOption,a.ɵangular_packages_forms_forms_x,a.RequiredValidator,c.NgIf],encapsulation:2}),e}();t.LocationPageComponent=u},575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationProblemPageComponent=void 0;var r=n(0),o=(n(548),n(174)),i=n(0),a=n(44),l=n(1),c=n(27),s=n(604);function d(e,t){1&e&&(i.ɵɵelementStart(0,"div",6),i.ɵɵelementStart(1,"div",20),i.ɵɵelement(2,"localize",21),i.ɵɵelementEnd(),i.ɵɵelementEnd())}function p(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",6),i.ɵɵelementStart(1,"div",20),i.ɵɵtext(2),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(2),i.ɵɵtextInterpolate(n.message)}}function m(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div"),i.ɵɵelementStart(1,"location-problem",22),i.ɵɵlistener("onError",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().handleError(e)})),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=t.index,a=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵproperty("problem",r)("configuration",a.configuration)("index",o)}}function u(e,t){1&e&&i.ɵɵelement(0,"localize",23)}function g(e,t){1&e&&i.ɵɵelement(0,"localize",24)}var f=function(){function e(){this.stateChange=new r.EventEmitter,this.message=null}return e.prototype.ngOnInit=function(){},e.prototype.hasProblems=function(){for(var e=0;e<this.configuration.locationProblems.length;e++)if(!this.configuration.locationProblems[e].resolved)return!0;return!1},e.prototype.handleError=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.prototype.onNext=function(){null==this.configuration.exclusions&&(this.configuration.exclusions=[]);for(var e=0;e<this.configuration.locationProblems.length;e++){var t=this.configuration.locationProblems[e];if(t.resolved&&"IGNOREATLOCATION"==t.action.name){var n={code:"##PARENT##",value:null!=t.parent?t.parent+"-"+t.label:t.label};this.configuration.exclusions.push(n)}}this.stateChange.emit("NEXT")},e.prototype.onCancel=function(){this.stateChange.emit("CANCEL")},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["location-problem-page"]],inputs:{configuration:"configuration"},outputs:{stateChange:"stateChange"},decls:34,vars:6,consts:[[1,"text-center"],["key","io.locationProblem.title"],[1,"lead"],["key","io.locationProblem.description"],["class","row",4,"ngIf"],["form","ngForm"],[1,"row"],[1,"col-sm-4"],["key","dataUploader.locationContext"],[1,"col-sm-2"],["key","dataUploader.unknownLocation"],["key","dataUploader.synonymn"],["key","dataUploader.actions"],[4,"ngFor","ngForOf"],[1,"col-sm-12","text-right",2,"margin-top","20px"],["type","button","role","button",1,"btn","btn-default",3,"click"],["key","io.cancel"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.next",4,"ngIf"],["key","io.ok",4,"ngIf"],[1,"alert","alert-danger"],["key","dataUploader.existingProblems"],[3,"problem","configuration","index","onError"],["key","io.next"],["key","io.ok"]],template:function(e,t){1&e&&(i.ɵɵelementStart(0,"div"),i.ɵɵelementStart(1,"div",0),i.ɵɵelementStart(2,"h2"),i.ɵɵelement(3,"localize",1),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"p",2),i.ɵɵelement(5,"localize",3),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(6,"div"),i.ɵɵtemplate(7,d,3,0,"div",4),i.ɵɵtemplate(8,p,3,1,"div",4),i.ɵɵelementStart(9,"form",null,5),i.ɵɵelementStart(11,"div",6),i.ɵɵelementStart(12,"div",7),i.ɵɵelementStart(13,"label"),i.ɵɵelement(14,"localize",8),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(15,"div",9),i.ɵɵelementStart(16,"label"),i.ɵɵelement(17,"localize",10),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(18,"div",7),i.ɵɵelementStart(19,"label"),i.ɵɵelement(20,"localize",11),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(21,"div",9),i.ɵɵelementStart(22,"label"),i.ɵɵelement(23,"localize",12),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(24,m,2,3,"div",13),i.ɵɵelementStart(25,"div",6),i.ɵɵelementStart(26,"div",14),i.ɵɵelementStart(27,"button",15),i.ɵɵlistener("click",(function(){return t.onCancel()})),i.ɵɵelementStart(28,"span"),i.ɵɵelement(29,"localize",16),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(30,"button",17),i.ɵɵlistener("click",(function(){return t.onNext()})),i.ɵɵelementStart(31,"span"),i.ɵɵtemplate(32,u,1,0,"localize",18),i.ɵɵtemplate(33,g,1,0,"localize",19),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e&&(i.ɵɵadvance(7),i.ɵɵproperty("ngIf",t.hasProblems()),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null!=t.message),i.ɵɵadvance(16),i.ɵɵproperty("ngForOf",t.configuration.locationProblems),i.ɵɵadvance(6),i.ɵɵproperty("disabled",t.hasProblems()),i.ɵɵadvance(2),i.ɵɵproperty("ngIf",null!=t.configuration.termProblems),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null==t.configuration.termProblems))},directives:[a.LocalizeComponent,l.NgIf,c.ɵangular_packages_forms_forms_y,c.NgControlStatusGroup,c.NgForm,l.NgForOf,s.LocationProblemComponent],encapsulation:2}),e}();t.LocationProblemPageComponent=f},576:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TermProblemPageComponent=void 0;var r=n(0),o=(n(548),n(0)),i=n(44),a=n(1),l=n(27),c=n(605);function s(e,t){1&e&&(o.ɵɵelementStart(0,"div",7),o.ɵɵelementStart(1,"div",20),o.ɵɵelement(2,"localize",21),o.ɵɵelementEnd(),o.ɵɵelementEnd())}function d(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",7),o.ɵɵelementStart(1,"div",20),o.ɵɵtext(2),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(2),o.ɵɵtextInterpolate(n.message)}}function p(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"term-problem",22),o.ɵɵlistener("onError",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().handleError(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=t.$implicit,i=t.index,a=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("problem",r)("configuration",a.configuration)("index",i)}}var m=function(){function e(){this.stateChange=new r.EventEmitter,this.message=null}return e.prototype.ngOnInit=function(){},e.prototype.hasProblems=function(){for(var e=0;e<this.configuration.termProblems.length;e++)if(!this.configuration.termProblems[e].resolved)return!0;return!1},e.prototype.onNext=function(){null==this.configuration.exclusions&&(this.configuration.exclusions=[]);for(var e=0;e<this.configuration.termProblems.length;e++){var t=this.configuration.termProblems[e];if(t.resolved&&"IGNORE"==t.action.name){var n={code:t.attributeCode,value:t.label};this.configuration.exclusions.push(n)}}this.stateChange.emit("NEXT")},e.prototype.onCancel=function(){this.stateChange.emit("CANCEL")},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["term-problem-page"]],inputs:{configuration:"configuration"},outputs:{stateChange:"stateChange"},decls:33,vars:4,consts:[[1,"text-center"],["key","io.termProblem.title"],[1,"lead"],["key","io.termProblem.description"],[1,"col-md-12","order-md-1"],["class","row",4,"ngIf"],["form","ngForm"],[1,"row"],[1,"col-sm-4"],["key","dataUploader.categoryAttribute"],[1,"col-sm-2"],["key","dataUploader.unknownCategory"],["key","dataUploader.synonymn"],["key","dataUploader.actions"],[4,"ngFor","ngForOf"],[1,"col-sm-12","text-right"],["type","button","role","button",1,"btn",3,"click"],["key","io.cancel"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.ok"],[1,"alert","alert-danger"],["key","dataUploader.existingProblems"],[3,"problem","configuration","index","onError"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"div",0),o.ɵɵelementStart(2,"h2"),o.ɵɵelement(3,"localize",1),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"p",2),o.ɵɵelement(5,"localize",3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(6,"div",4),o.ɵɵtemplate(7,s,3,0,"div",5),o.ɵɵtemplate(8,d,3,1,"div",5),o.ɵɵelementStart(9,"form",null,6),o.ɵɵelementStart(11,"div",7),o.ɵɵelementStart(12,"div",8),o.ɵɵelementStart(13,"label"),o.ɵɵelement(14,"localize",9),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(15,"div",10),o.ɵɵelementStart(16,"label"),o.ɵɵelement(17,"localize",11),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(18,"div",8),o.ɵɵelementStart(19,"label"),o.ɵɵelement(20,"localize",12),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(21,"div",10),o.ɵɵelementStart(22,"label"),o.ɵɵelement(23,"localize",13),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵtemplate(24,p,2,3,"div",14),o.ɵɵelementStart(25,"div",7),o.ɵɵelementStart(26,"div",15),o.ɵɵelementStart(27,"button",16),o.ɵɵlistener("click",(function(){return t.onCancel()})),o.ɵɵelementStart(28,"span"),o.ɵɵelement(29,"localize",17),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(30,"button",18),o.ɵɵlistener("click",(function(){return t.onNext()})),o.ɵɵelementStart(31,"span"),o.ɵɵelement(32,"localize",19),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(7),o.ɵɵproperty("ngIf",t.hasProblems()),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null!=t.message),o.ɵɵadvance(16),o.ɵɵproperty("ngForOf",t.configuration.termProblems),o.ɵɵadvance(6),o.ɵɵproperty("disabled",t.hasProblems()))},directives:[i.LocalizeComponent,a.NgIf,l.ɵangular_packages_forms_forms_y,l.NgControlStatusGroup,l.NgForm,a.NgForOf,c.TermProblemComponent],encapsulation:2}),e}();t.TermProblemPageComponent=m},577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectEditorMapComponent=void 0;var r=n(0),o=(n(545),n(541)),i=n(543),a=n(541),l=n(0),c=n(545),s=n(615),d=["simpleEditControl"],p=["mapDiv"],m=["geometryType",""],u=function(){function e(e){this.registryService=e,this.geometryChange=new r.EventEmitter,this.readOnly=!1,this.onClickEdit=new r.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout((function(){a.accessToken="pk.eyJ1IjoidGVycmFmcmFtZSIsImEiOiJjanZxNTFnaTYyZ2RuNDlxcmNnejNtNjN6In0.-kmlS8Tgb2fNc1NPb5rJEQ",e.mapDiv.nativeElement.id=Math.floor(899999*Math.random())+1e5,e.map=new o.Map({container:e.mapDiv.nativeElement.id,style:"mapbox://styles/mapbox/satellite-v9",zoom:2,center:[110.880453,10.897852]}),e.map.on("load",(function(){e.initMap()})),e.map.on("draw.create",(function(){e.onValidChange()})),e.map.on("draw.delete",(function(){e.onValidChange()})),e.map.on("draw.update",(function(){e.onValidChange()}))}),10)},e.prototype.ngOnChanges=function(e){(e.preGeometry||e.postGeometry)&&this.reload()},e.prototype.reload=function(){null!=this.map&&(this.removeLayers(),this.addLayers())},e.prototype.ngOnDestroy=function(){this.map.remove()},e.prototype.getIsValid=function(){if(!this.readOnly){var e=!1;if(null!=this.editingControl)this.editingControl.getAll().features.length>0&&(e=!0);return e}return!0},e.prototype.onValidChange=function(){this.geometryChange.emit(this.saveDraw())},e.prototype.initMap=function(){var e=this;this.map.on("style.load",(function(){e.addLayers(),e.onValidChange()})),this.addLayers(),null!=this.preGeometry&&""!==this.preGeometry&&this.zoomToBbox(),this.map.addControl(new o.NavigationControl),this.readOnly?this.addEditButton():this.enableEditing(),this.onValidChange()},e.prototype.addEditButton=function(){var e=this;this.simpleEditControl.editEmitter.subscribe((function(t){e.onClickEdit.emit()})),this.map.addControl(this.simpleEditControl)},e.prototype.enableEditing=function(){"MULTIPOLYGON"===this.geometryType||"POLYGON"===this.geometryType?this.editingControl=new i({controls:{point:!1,line_string:!1,polygon:!0,trash:!0,combine_features:!1,uncombine_features:!1}}):"POINT"===this.geometryType||"MULTIPOINT"===this.geometryType?this.editingControl=new i({controls:{point:!0,line_string:!1,polygon:!1,trash:!0,combine_features:!1,uncombine_features:!1}}):"LINE"!==this.geometryType&&"MULTILINE"!==this.geometryType||(this.editingControl=new i({controls:{point:!1,line_string:!0,polygon:!1,trash:!0,combine_features:!1,uncombine_features:!1}})),this.map.addControl(this.editingControl),null!=this.postGeometry&&this.editingControl.add(this.postGeometry)},e.prototype.removeSource=function(e){var t=e+"-geoobject";"MULTIPOLYGON"===this.geometryType||"POLYGON"===this.geometryType?this.map.removeLayer(t+"-polygon"):"POINT"===this.geometryType||"MULTIPOINT"===this.geometryType?this.map.removeLayer(t+"-point"):"LINE"!==this.geometryType&&"MultiLine"!==this.geometryType||this.map.removeLayer(t+"-line"),this.map.removeSource(t)},e.prototype.removeLayers=function(){this.map.getSource("pre-geoobject")&&this.removeSource("pre"),this.map.getSource("post-geoobject")&&this.removeSource("post")},e.prototype.addLayers=function(){null!=this.preGeometry&&""!==this.preGeometry&&this.renderGeometryAsLayer(this.preGeometry,"pre","#EFA22E"),this.readOnly&&null!=this.postGeometry&&""!==this.postGeometry&&this.renderGeometryAsLayer(this.postGeometry,"post","#3368EF")},e.prototype.renderGeometryAsLayer=function(e,t,n){var r=t+"-geoobject";this.map.addSource(r,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),"MULTIPOLYGON"===this.geometryType||"POLYGON"===this.geometryType?this.map.addLayer({id:r+"-polygon",type:"fill",source:r,paint:{"fill-color":n,"fill-outline-color":"black","fill-opacity":.7}}):"POINT"===this.geometryType||"MULTIPOINT"===this.geometryType?this.map.addLayer({id:r+"-point",type:"circle",source:r,paint:{"circle-radius":3,"circle-color":n,"circle-stroke-width":2,"circle-stroke-color":"#FFFFFF"}}):"LINE"!==this.geometryType&&"MULTILINE"!==this.geometryType||this.map.addLayer({id:r+"-line",source:r,type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":n,"line-width":2}}),this.map.getSource(r).setData(e)},e.prototype.zoomToBbox=function(){var e=this;null!=this.bboxCode&&null!=this.bboxType&&(null==this.bboxDate?this.registryService.getGeoObjectBounds(this.bboxCode,this.bboxType).then((function(t){var n=new o.LngLatBounds([t[0],t[1]],[t[2],t[3]]);e.map.fitBounds(n,{padding:50})})).catch((function(t){e.error(t)})):this.registryService.getGeoObjectBoundsAtDate(this.bboxCode,this.bboxType,this.bboxDate).then((function(t){var n=new o.LngLatBounds([t[0],t[1]],[t[2],t[3]]);e.map.fitBounds(n,{padding:50})})).catch((function(t){e.error(t)})))},e.prototype.saveDraw=function(){if(null!=this.editingControl){var e=this.editingControl.getAll();if(e.features.length>0){if("MULTIPOLYGON"===this.geometryType){for(var t=[],n=0;n<e.features.length;n++){if("MultiPolygon"===(a=e.features[n]).geometry.type)for(var r=0;r<a.geometry.coordinates.length;r++)t.push(a.geometry.coordinates[r]);else t.push(a.geometry.coordinates)}return{coordinates:t,type:"MultiPolygon"}}if("MULTIPOINT"===this.geometryType){var o=[];for(n=0;n<e.features.length;n++){if("MultiPoint"===(a=e.features[n]).geometry.type)for(r=0;r<a.geometry.coordinates.length;r++)o.push(a.geometry.coordinates[r]);else o.push(a.geometry.coordinates)}return{coordinates:o,type:"MultiPoint"}}if("MULTILINE"===this.geometryType){var i=[];for(n=0;n<e.features.length;n++){var a;if("MultiLineString"===(a=e.features[n]).geometry.type)for(r=0;r<a.geometry.coordinates.length;r++)i.push(a.geometry.coordinates[r]);else i.push(a.geometry.coordinates)}return{coordinates:i,type:"MultiLineString"}}return e.features[0].geometry}return this.postGeometry}return this.postGeometry},e.prototype.error=function(e){console.log("ERROR",e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(c.RegistryService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["geoobject-editor-map","geometryType",""]],viewQuery:function(e,t){var n;(1&e&&(l.ɵɵviewQuery(d,!0),l.ɵɵviewQuery(p,!0)),2&e)&&(l.ɵɵqueryRefresh(n=l.ɵɵloadQuery())&&(t.simpleEditControl=n.first),l.ɵɵqueryRefresh(n=l.ɵɵloadQuery())&&(t.mapDiv=n.first))},inputs:{geometryType:"geometryType",preGeometry:"preGeometry",postGeometry:"postGeometry",bboxCode:"bboxCode",bboxType:"bboxType",bboxDate:"bboxDate",readOnly:"readOnly"},outputs:{geometryChange:"geometryChange",onClickEdit:"onClickEdit"},features:[l.ɵɵNgOnChangesFeature],attrs:m,decls:4,vars:0,consts:[[1,"map-view-port","text-left",2,"height","400px"],["mapDiv",""],["simpleEditControl",""]],template:function(e,t){1&e&&(l.ɵɵelement(0,"div",0,1),l.ɵɵelement(2,"simple-edit-control",null,2))},directives:[s.SimpleEditControl],styles:[""]}),e}();t.GeoObjectEditorMapComponent=u},578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToEpochDateTimePipe=void 0;n(0);var r=n(0),o=function(){function e(){}return e.prototype.transform=function(e){return e?new Date(e).getTime():e},e.ɵfac=function(t){return new(t||e)},e.ɵpipe=r.ɵɵdefinePipe({name:"toEpochDateTime",type:e,pure:!0}),e}();t.ToEpochDateTimePipe=o},579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CascadingGeoSelector=void 0;var r=n(0),o=(n(30),n(545),n(617)),i=n(174),a=n(0),l=n(30),c=n(545),s=n(27),d=n(1),p=n(44),m=["mainForm"];function u(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",13),a.ɵɵtext(1),a.ɵɵelementStart(2,"input",14),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),t.$implicit.geoObject.properties.displayLabel.localizedValue=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=a.ɵɵnextContext().$implicit;a.ɵɵadvance(1),a.ɵɵtextInterpolate1(" ",r.label," "),a.ɵɵadvance(1),a.ɵɵpropertyInterpolate2("name","",o.code,"-",r.code,"-input"),a.ɵɵproperty("ngModel",r.geoObject.properties.displayLabel.localizedValue)}}function g(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",4),a.ɵɵelementStart(2,"label"),a.ɵɵtext(3),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(4,"div",5),a.ɵɵelementStart(5,"div",6),a.ɵɵelementStart(6,"div",7),a.ɵɵtemplate(7,u,3,4,"div",8),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",7),a.ɵɵelementStart(9,"div",9),a.ɵɵelementStart(10,"div",10),a.ɵɵelementStart(11,"button",11),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=t.$implicit;return a.ɵɵnextContext().onManageVersions(e.code)})),a.ɵɵelement(12,"localize",12),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=t.$implicit;a.ɵɵadvance(3),a.ɵɵtextInterpolate1(" ",r.label," "),a.ɵɵadvance(4),a.ɵɵproperty("ngForOf",r.parents)}}var f=function(){function e(e,t){this.modalService=e,this.registryService=t,this.valid=new r.EventEmitter,this.isValid=!0,this.forDate=new Date,this.cHierarchies=[],this.parentMap={}}return e.prototype.ngOnInit=function(){var e=this.forDate.getUTCDate();this.dateStr=this.forDate.getUTCFullYear()+"-"+(this.forDate.getUTCMonth()+1)+"-"+(e<10?"0":"")+e,this.forDate=new Date(Date.parse(this.dateStr)),this.calculate()},e.prototype.ngOnChanges=function(e){e.forDate&&this.calculate()},e.prototype.calculate=function(){var e=this,t=this.forDate.getTime();this.isValid=!0,this.cHierarchies=[],this.hierarchies.forEach((function(n){var r={};r.label=n.label,r.code=n.code,e.isValid=e.isValid&&e.hierarchies.length>0,n.entries.forEach((function(e){var o=Date.parse(e.startDate),i=Date.parse(e.endDate);if(t>=o&&t<=i){var a=[];n.types.forEach((function(t){var n={code:t.code,label:t.label};null!=e.parents[t.code]&&(n.text=e.parents[t.code].text,n.geoObject=e.parents[t.code].geoObject),a.push(n)})),r.parents=a}})),e.cHierarchies.push(r)})),this.valid.emit()},e.prototype.getIsValid=function(){return!0},e.prototype.getHierarchies=function(){return this.hierarchies},e.prototype.onManageVersions=function(e){var t=this,n=this.hierarchies.find((function(t){return t.code===e}));this.bsModalRef=this.modalService.show(o.ManageParentVersionsModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.init(n),this.bsModalRef.content.onVersionChange.subscribe((function(e){t.calculate()}))},e.prototype.error=function(e){this.modalService.show(i.ErrorModalComponent,{backdrop:!0}).content.message=i.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.BsModalService),a.ɵɵdirectiveInject(c.RegistryService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["cascading-geo-selector"]],viewQuery:function(e,t){var n;(1&e&&a.ɵɵviewQuery(m,!0),2&e)&&(a.ɵɵqueryRefresh(n=a.ɵɵloadQuery())&&(t.mainForm=n.first))},inputs:{hierarchies:"hierarchies",isValid:"isValid",forDate:"forDate"},outputs:{valid:"valid"},features:[a.ɵɵNgOnChangesFeature],decls:5,vars:1,consts:[["name","cascading-geo-selector",1,"modal-form",2,"overflow","visible"],["mainForm","ngForm"],["class","row-holder","style","overflow:visible;",4,"ngFor","ngForOf"],[1,"row-holder",2,"overflow","visible"],[1,"label-holder"],[1,"holder"],[1,"container",2,"width","100%"],[1,"row"],["class","col-sm-12","style","float:left;width:150px;",4,"ngFor","ngForOf"],[1,"col-sm-12"],[1,"button-holder",2,"padding","20px 0 20px 0","text-align","left"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","changeovertime.manageVersions.button.label"],[1,"col-sm-12",2,"float","left","width","150px"],["type","text","disabled","",1,"form-control",2,"width","150px",3,"ngModel","name","ngModelChange"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"form",0,1),a.ɵɵelementStart(2,"fieldset"),a.ɵɵelementStart(3,"div"),a.ɵɵtemplate(4,g,13,2,"div",2),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(4),a.ɵɵproperty("ngForOf",t.cHierarchies))},directives:[s.ɵangular_packages_forms_forms_y,s.NgControlStatusGroup,s.NgForm,d.NgForOf,p.LocalizeComponent,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel],encapsulation:2}),e}();t.CascadingGeoSelector=f},580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubmitChangeRequestComponent=void 0;n(0),n(1),n(30);var r=n(37),o=n(174),i=(n(15),n(545),n(0)),a=n(545),l=n(30),c=n(1),s=n(15),d=n(85),p=n(27),m=n(44),u=n(175),g=n(554),f=["attributeEditor"],h=["geometryEditor"];function v(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",22),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵproperty("ngValue",n),i.ɵɵadvance(1),i.ɵɵtextInterpolate1("",n.label.localizedValue," ")}}function b(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div"),i.ɵɵelementStart(1,"geoobject-shared-attribute-editor",23,24),i.ɵɵlistener("valid",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().onValidChange(e)}))("postGeoObjectChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().postGeoObject=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵproperty("geoObjectType",r.geoObjectType)("preGeoObject",r.preGeoObject)("postGeoObject",r.postGeoObject)("isGeometryInlined",!0)}}var y=function(){function e(e,t,n,o,i,a,l,c,s){var d=this;this.service=e,this.modalService=t,this.changeDetectorRef=n,this.registryService=o,this.elRef=i,this.changeRequestService=a,this.date=l,this.localizeService=c,this.authService=s,this.geoObjectTypes=[],this.geoObjectId="",this.reason="",this.preGeoObject=null,this.postGeoObject=null,this.isValid=!1,this.geoObjectAttributeExcludes=["uid","sequence","type","lastUpdateDate","createDate","status"],this.dataSource=r.Observable.create((function(e){d.registryService.getGeoObjectSuggestionsTypeAhead(d.geoObjectId,d.geoObjectType.code).then((function(t){e.next(t)}))}))}return e.prototype.ngOnInit=function(){var e=this;this.registryService.getGeoObjectTypes([],null).then((function(t){for(var n=[],r=0;r<t.length;++r)e.authService.isGeoObjectTypeRC(t[r].organizationCode,t[r].code)&&n.push(t[r]);e.geoObjectTypes=n,e.geoObjectTypes.sort((function(e,t){return e.label.localizedValue.toLowerCase()<t.label.localizedValue.toLowerCase()?-1:e.label.localizedValue.toLowerCase()>t.label.localizedValue.toLowerCase()?1:0}));var o=e.getGeoObjectTypePosition("ROOT");o&&e.geoObjectTypes.splice(o,1)})).catch((function(t){e.error(t)}))},e.prototype.onValidChange=function(e){null!=this.preGeoObject&&(null==this.geometryEditor||this.geometryEditor.getIsValid())&&(null==this.attributeEditor||this.attributeEditor.getIsValid())?this.isValid=!0:this.isValid=!1},e.prototype.getGeoObjectTypePosition=function(e){for(var t=0;t<this.geoObjectTypes.length;t++){if(this.geoObjectTypes[t].code===e)return t}return null},e.prototype.changeTypeaheadLoading=function(e){this.typeaheadLoading=e},e.prototype.typeaheadOnSelect=function(e){var t=this;this.registryService.getGeoObjectOverTime(e.item.code,this.geoObjectType.code).then((function(e){t.preGeoObject=e,t.postGeoObject=JSON.parse(JSON.stringify(t.preGeoObject))})).catch((function(e){t.error(e)}))},e.prototype.submit=function(){var e=this,t=this.attributeEditor.getGeoObject();if(null!=this.geometryEditor)this.geometryEditor.saveDraw();var n=[{actionType:"geoobject/update",apiVersion:"1.0-SNAPSHOT",createActionDate:(new Date).getTime(),geoObject:t,contributorNotes:this.reason}];this.changeRequestService.submitChangeRequest(JSON.stringify(n)).then((function(t){e.cancel(),e.bsModalRef=e.modalService.show(o.SuccessModalComponent,{backdrop:!0}),e.bsModalRef.content.message=e.localizeService.decode("change.request.success.message")})).catch((function(t){e.error(t)})),this.isValid=!1},e.prototype.cancel=function(){this.isValid=!1,this.preGeoObject=null,this.postGeoObject=null,this.geoObjectId=null,this.geoObjectType=null,this.reason=null},e.prototype.error=function(e){this.bsModalRef=this.modalService.show(o.ErrorModalComponent,{backdrop:!0}),this.bsModalRef.content.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.IOService),i.ɵɵdirectiveInject(l.BsModalService),i.ɵɵdirectiveInject(i.ChangeDetectorRef),i.ɵɵdirectiveInject(a.RegistryService),i.ɵɵdirectiveInject(i.ElementRef),i.ɵɵdirectiveInject(a.ChangeRequestService),i.ɵɵdirectiveInject(c.DatePipe),i.ɵɵdirectiveInject(s.LocalizationService),i.ɵɵdirectiveInject(s.AuthService))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["submit-change-request"]],viewQuery:function(e,t){var n;(1&e&&(i.ɵɵviewQuery(f,!0),i.ɵɵviewQuery(h,!0)),2&e)&&(i.ɵɵqueryRefresh(n=i.ɵɵloadQuery())&&(t.attributeEditor=n.first),i.ɵɵqueryRefresh(n=i.ɵɵloadQuery())&&(t.geometryEditor=n.first))},decls:36,vars:10,consts:[["name","geobject-shared-attribute-editor",1,"modal-form"],["attributeForm","ngForm"],[2,"min-height","50vh"],[1,"row-holder"],[1,"label-holder"],["key","dropdown.select.geoobjecttype.label"],[1,"holder"],[1,"text"],["id","geoObjectTypeSelect","name","geoObjectTypeSelect","required","",1,"select-area",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"row-holder",2,"overflow","visible"],["key","dropdown.select.geoobject.label"],["type","text","name","geoObjectId","typeaheadOptionField","name","autocomplete","off","required","",1,"form-control",3,"ngModel","disabled","typeaheadAsync","typeahead","typeaheadOptionsLimit","ngModelChange","typeaheadOnSelect"],[4,"ngIf"],[1,"row-holder",2,"z-index","0"],["key","change.request.reason.label"],["rows","4","cols","50","name","reason-input","required","",3,"ngModel","ngModelChange"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["key","modal.button.submit"],[3,"ngValue"],[3,"geoObjectType","preGeoObject","postGeoObject","isGeometryInlined","valid","postGeoObjectChange"],["attributeEditor",""]],template:function(e,t){if(1&e&&(i.ɵɵelement(0,"loading-bar"),i.ɵɵelementStart(1,"form",0,1),i.ɵɵelementStart(3,"fieldset"),i.ɵɵelementStart(4,"div",2),i.ɵɵelementStart(5,"div",3),i.ɵɵelementStart(6,"div",4),i.ɵɵelementStart(7,"label"),i.ɵɵelement(8,"localize",5),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(9,"div",6),i.ɵɵelementStart(10,"span",7),i.ɵɵelementStart(11,"select",8),i.ɵɵlistener("ngModelChange",(function(e){return t.geoObjectType=e})),i.ɵɵtemplate(12,v,2,2,"option",9),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(13,"div",10),i.ɵɵelementStart(14,"div",4),i.ɵɵelementStart(15,"label"),i.ɵɵelement(16,"localize",11),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(17,"div",6),i.ɵɵelementStart(18,"span",7),i.ɵɵelementStart(19,"input",12),i.ɵɵlistener("ngModelChange",(function(e){return t.geoObjectId=e}))("typeaheadOnSelect",(function(e){return t.typeaheadOnSelect(e)})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(20,b,3,4,"div",13),i.ɵɵelementStart(21,"div",14),i.ɵɵelementStart(22,"div",4),i.ɵɵelementStart(23,"label"),i.ɵɵelement(24,"localize",15),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(25,"div",6),i.ɵɵelementStart(26,"span",7),i.ɵɵelementStart(27,"textarea",16),i.ɵɵlistener("ngModelChange",(function(e){return t.reason=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(28,"div",3),i.ɵɵelement(29,"div",4),i.ɵɵelementStart(30,"div",6),i.ɵɵelementStart(31,"div",17),i.ɵɵelementStart(32,"button",18),i.ɵɵlistener("click",(function(){return t.cancel()})),i.ɵɵelement(33,"localize",19),i.ɵɵelementEnd(),i.ɵɵelementStart(34,"button",20),i.ɵɵlistener("click",(function(){return t.submit()})),i.ɵɵelement(35,"localize",21),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵreference(2);i.ɵɵadvance(11),i.ɵɵproperty("ngModel",t.geoObjectType),i.ɵɵadvance(1),i.ɵɵproperty("ngForOf",t.geoObjectTypes),i.ɵɵadvance(7),i.ɵɵproperty("ngModel",t.geoObjectId)("disabled",!t.geoObjectType)("typeaheadAsync",!0)("typeahead",t.dataSource)("typeaheadOptionsLimit",7),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",t.preGeoObject),i.ɵɵadvance(7),i.ɵɵproperty("ngModel",t.reason),i.ɵɵadvance(7),i.ɵɵproperty("disabled",!n.valid)}},directives:[d.LoadingBarComponent,p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,p.NgForm,m.LocalizeComponent,p.SelectControlValueAccessor,p.RequiredValidator,p.NgControlStatus,p.NgModel,c.NgForOf,p.DefaultValueAccessor,u.TypeaheadDirective,c.NgIf,p.NgSelectOption,p.ɵangular_packages_forms_forms_x,g.GeoObjectSharedAttributeEditorComponent],encapsulation:2}),e}();t.SubmitChangeRequestComponent=y},581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectEditorComponent=void 0;n(0),n(30),n(30);var r=n(1),o=n(174),i=(n(545),n(15),n(546)),a=n(37),l=n(0),c=n(30),s=n(545),d=n(15),p=n(27),m=n(1),u=n(44),g=n(554),f=n(579),h=["attributeEditor"],v=["parentSelector"];function b(e,t){1&e&&(l.ɵɵelementStart(0,"div",24),l.ɵɵelement(1,"localize",25),l.ɵɵelementEnd())}function y(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"geoobject-shared-attribute-editor",26,27),l.ɵɵlistener("valid",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().onValidChange()})),l.ɵɵelementEnd()}if(2&e){var r=l.ɵɵnextContext();l.ɵɵproperty("geoObjectType",r.geoObjectType)("preGeoObject",r.goPropertiesPre)("postGeoObject",r.goPropertiesPost)("forDate",r.forDate)("isNew",r.isNewGeoObject)("isEditingGeometries",r.isEditingGeometries)}}function S(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div"),l.ɵɵelementStart(1,"cascading-geo-selector",28,29),l.ɵɵlistener("valid",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().onValidChange()})),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var r=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵproperty("isValid",r.isValid)("forDate",r.forDate)("hierarchies",r.hierarchies)}}function C(e,t){1&e&&(l.ɵɵelementStart(0,"p",36),l.ɵɵtext(1,"Notes are required."),l.ɵɵelementEnd())}function E(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",30),l.ɵɵelementStart(1,"div",15),l.ɵɵelementStart(2,"label"),l.ɵɵelement(3,"localize",31),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(4,"div",32),l.ɵɵelementStart(5,"textarea",33),l.ɵɵlistener("ngModelChange",(function(e){return l.ɵɵrestoreView(n),l.ɵɵnextContext().notes=e})),l.ɵɵelementEnd(),l.ɵɵelementStart(6,"div",34),l.ɵɵtemplate(7,C,2,0,"p",35),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var r=l.ɵɵnextContext();l.ɵɵadvance(5),l.ɵɵproperty("ngModel",r.notes),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",!r.notes)}}var x=function(e){return{active:e}},O=function(e,t){return{active:e,error:t}},I=function(e,t){return{active:e,disabled:t}},M=function(){function e(e,t,n,r,o){this.modalService=e,this.bsModalRef=t,this.registryService=n,this.localizeService=r,this.isValid=!1,this.tabIndex=0,this.isNewGeoObject=!1,this.submitFunction=null,this.arePropertiesValid=!1,this.areParentsValid=!0,this.dateStr=null,this.forDate=null,this.isEditingGeometries=!1,this.isAdmin=o.isAdmin(),this.isMaintainer=this.isAdmin||o.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||o.isContributer(),this.forDate=new Date;var i=this.forDate.getUTCDate();this.dateStr=this.forDate.getUTCFullYear()+"-"+(this.forDate.getUTCMonth()+1)+"-"+(i<10?"0":"")+i}return e.prototype.ngOnInit=function(){},e.prototype.findVotWithStartDate=function(e,t){for(var n=0;n<e.length;++n)if(e[n].startDate===t)return e[n];return null},e.prototype.setMasterListId=function(e){this.masterListId=e},e.prototype.handleDateChange=function(){this.forDate=new Date(Date.parse(this.dateStr))},e.prototype.setOnSuccessCallback=function(e){this.onSuccessCallback=e},e.prototype.configureAsNew=function(e,t,n){var r=this;this.isNewGeoObject=!0,this.dateStr=t,this.forDate=new Date(Date.parse(this.dateStr)),this.isGeometryEditable=n,this.fetchGeoObjectType(e),this.fetchLocales(),this.registryService.newGeoObjectOverTime(e).then((function(e){r.goPropertiesPre=new i.GeoObjectOverTime(r.geoObjectType,e.geoObject.attributes),r.goPropertiesPost=new i.GeoObjectOverTime(r.geoObjectType,JSON.parse(JSON.stringify(r.goPropertiesPre)).attributes),r.hierarchies=e.hierarchies}))},e.prototype.configureFromImportError=function(e,t,n,r){var o=this,a=e.object.geoObject.attributes.type;this.isNewGeoObject=e.object.isNew,this.dateStr=n,this.forDate=new Date(Date.parse(n)),this.isGeometryEditable=r,this.fetchGeoObjectType(a),this.fetchLocales(),null!=e.object&&null!=e.object.parents&&e.object.parents.length>0?(this.hierarchies=e.object.parents,this.areParentsValid=!0):(this.registryService.newGeoObjectOverTime(a).then((function(e){o.hierarchies=e.hierarchies})),this.areParentsValid=!1),this.goPropertiesPre=new i.GeoObjectOverTime(this.geoObjectType,e.object.geoObject.attributes),this.goPropertiesPost=new i.GeoObjectOverTime(this.geoObjectType,e.object.geoObject.attributes),this.submitFunction=function(){var n={historyId:t,importErrorId:e.id,resolution:"APPLY_GEO_OBJECT",parentTreeNode:o.hierarchies,geoObject:o.goSubmit,isNew:e.object.isNew};o.registryService.submitErrorResolve(n).then((function(){null!=o.onSuccessCallback&&o.onSuccessCallback()})).catch((function(e){o.error(e)}))}},e.prototype.configureAsExisting=function(e,t,n,r){this.isNewGeoObject=!1,this.dateStr=n,this.forDate=new Date(Date.parse(this.dateStr)),this.isGeometryEditable=r,this.fetchGeoObject(e,t),this.fetchGeoObjectType(t),this.fetchHierarchies(e,t),this.fetchLocales()},e.prototype.fetchGeoObject=function(e,t){var n=this;this.registryService.getGeoObjectOverTime(e,t).then((function(e){n.goPropertiesPre=new i.GeoObjectOverTime(n.geoObjectType,JSON.parse(JSON.stringify(e)).attributes),n.goPropertiesPost=new i.GeoObjectOverTime(n.geoObjectType,JSON.parse(JSON.stringify(n.goPropertiesPre)).attributes),n.goSubmit=n.goPropertiesPost,n.arePropertiesValid=!0,n.isValid=!0})).catch((function(e){n.error(e)}))},e.prototype.fetchLocales=function(){var e=this;this.registryService.getLocales().then((function(t){e.localizeService.setLocales(t)})).catch((function(t){e.error(t)}))},e.prototype.fetchGeoObjectType=function(e){var t=this;this.registryService.getGeoObjectTypes([e],null).then((function(e){t.geoObjectType=e[0],null!=t.goPropertiesPre&&(t.goPropertiesPre.geoObjectType=t.geoObjectType),null!=t.goPropertiesPost&&(t.goPropertiesPost.geoObjectType=t.geoObjectType),t.geoObjectType.isGeometryEditable})).catch((function(e){console.log(e)}))},e.prototype.fetchHierarchies=function(e,t){var n=this;this.registryService.getHierarchiesForGeoObject(e,t).then((function(e){n.hierarchies=e,n.areParentsValid=!0})).catch((function(e){n.error(e)}))},e.prototype.getTypeAheadObservable=function(e,t){var n=this;return a.Observable.create((function(r){n.registryService.getGeoObjectSuggestionsTypeAhead(e,t).then((function(e){r.next(e)}))}))},e.prototype.typeaheadOnSelect=function(e,t){var n=this;this.registryService.getGeoObjectByCode(e.item.code,t.geoObject.properties.type).then((function(e){t.geoObject=e})).catch((function(e){n.error(e)}))},e.prototype.onValidChange=function(){null!=this.attributeEditor&&(this.arePropertiesValid=this.attributeEditor.getIsValid()),null!=this.parentSelector&&(this.areParentsValid=this.parentSelector.getIsValid()),this.isValid=this.arePropertiesValid&&this.areParentsValid},e.prototype.changePage=function(e,t){void 0===t&&(t=!1),(e!==this.tabIndex||t)&&(this.persistModelChanges(),this.tabIndex=e,this.onValidChange(),this.isEditingGeometries=2===e)},e.prototype.persistModelChanges=function(){null!=this.attributeEditor&&(this.goPropertiesPost=this.attributeEditor.getGeoObject()),null!=this.parentSelector&&(this.hierarchies=this.parentSelector.getHierarchies()),this.goSubmit=this.goPropertiesPost},e.prototype.error=function(e){this.bsModalRef=this.modalService.show(o.ErrorModalComponent,{backdrop:!0}),this.bsModalRef.content.message=o.ErrorHandler.getMessageFromError(e)},e.prototype.cancel=function(){this.bsModalRef.hide()},e.prototype.submit=function(){var e=this;this.isValid&&(this.bsModalRef.hide(),this.persistModelChanges(),null==this.submitFunction?this.registryService.applyGeoObjectEdit(this.hierarchies,this.goSubmit,this.isNewGeoObject,this.masterListId,this.notes).then((function(){null!=e.onSuccessCallback&&e.onSuccessCallback()})).catch((function(t){e.error(t)})):this.submitFunction())},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(c.BsModalService),l.ɵɵdirectiveInject(c.BsModalRef),l.ɵɵdirectiveInject(s.RegistryService),l.ɵɵdirectiveInject(d.LocalizationService),l.ɵɵdirectiveInject(d.AuthService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["geoobject-editor"]],viewQuery:function(e,t){var n;(1&e&&(l.ɵɵviewQuery(h,!0),l.ɵɵviewQuery(v,!0)),2&e)&&(l.ɵɵqueryRefresh(n=l.ɵɵloadQuery())&&(t.attributeEditor=n.first),l.ɵɵqueryRefresh(n=l.ɵɵloadQuery())&&(t.parentSelector=n.first))},inputs:{geoObjectType:"geoObjectType",onSuccessCallback:"onSuccessCallback"},features:[l.ɵɵProvidersFeature([r.DatePipe])],decls:31,vars:18,consts:[[1,"modal-body"],[1,"modal-form",2,"overflow","visible"],["goForm","ngForm"],[1,"row"],[1,"col-md-12"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"btn-group","geobject-editor-tab-holder"],[1,"btn","full-width-radio-button",3,"ngClass","click"],["key","geoobject.editor.tabZero"],["key","geoobject.editor.tabOne"],["key","geoobject.editor.tabTwo"],[3,"geoObjectType","preGeoObject","postGeoObject","forDate","isNew","isEditingGeometries","valid",4,"ngIf"],[4,"ngIf"],["class","row-holder","style","padding-top: 10px;",4,"ngIf"],[1,"row-holder",2,"margin-bottom","20px"],[1,"label-holder"],["key","changeOverTime.forDate"],[1,"holder"],["type","date","name","dateStr",2,"width","100%",3,"ngModel","ngModelChange","change"],[1,"button-holder","text-left"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[3,"key"],["role","alert",1,"alert","alert-danger"],["key","geoobject.editor.modal.parents.must.be.assigned.message"],[3,"geoObjectType","preGeoObject","postGeoObject","forDate","isNew","isEditingGeometries","valid"],["attributeEditor",""],[3,"isValid","forDate","hierarchies","valid"],["parentSelector",""],[1,"row-holder",2,"padding-top","10px"],["key","change.request.action.detail.contributorNotes"],[1,"holder","text-left"],["name","notes","required","",1,"detail-value",2,"width","100%","border-radius","8px","height","70px","padding","5px",3,"ngModel","ngModelChange"],[1,"form-input-validation-error-message-wrapper"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",0),l.ɵɵelementStart(1,"form",1,2),l.ɵɵelementStart(3,"div",3),l.ɵɵelementStart(4,"div",4),l.ɵɵtemplate(5,b,2,0,"div",5),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(6,"div",3),l.ɵɵelementStart(7,"div",4),l.ɵɵelementStart(8,"div",6),l.ɵɵelementStart(9,"label",7),l.ɵɵlistener("click",(function(){return t.changePage(0)})),l.ɵɵelement(10,"localize",8),l.ɵɵelementEnd(),l.ɵɵelementStart(11,"label",7),l.ɵɵlistener("click",(function(){return t.changePage(1)})),l.ɵɵelement(12,"localize",9),l.ɵɵelementEnd(),l.ɵɵelementStart(13,"label",7),l.ɵɵlistener("click",(function(){return t.isGeometryEditable&&t.changePage(2)})),l.ɵɵelement(14,"localize",10),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(15,y,2,6,"geoobject-shared-attribute-editor",11),l.ɵɵtemplate(16,S,3,3,"div",12),l.ɵɵtemplate(17,E,8,2,"div",13),l.ɵɵelementStart(18,"div",14),l.ɵɵelementStart(19,"div",15),l.ɵɵelementStart(20,"label"),l.ɵɵelement(21,"localize",16),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(22,"div",17),l.ɵɵelementStart(23,"input",18),l.ɵɵlistener("ngModelChange",(function(e){return t.dateStr=e}))("change",(function(){return t.handleDateChange()})),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(24,"div",3),l.ɵɵelementStart(25,"div",4),l.ɵɵelementStart(26,"div",19),l.ɵɵelementStart(27,"button",20),l.ɵɵlistener("click",(function(){return t.cancel()})),l.ɵɵelement(28,"localize",21),l.ɵɵelementEnd(),l.ɵɵelementStart(29,"button",22),l.ɵɵlistener("click",(function(){return t.submit()})),l.ɵɵelement(30,"localize",23),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵreference(2);l.ɵɵadvance(5),l.ɵɵproperty("ngIf",!t.areParentsValid),l.ɵɵadvance(4),l.ɵɵproperty("ngClass",l.ɵɵpureFunction1(10,x,0===t.tabIndex)),l.ɵɵadvance(2),l.ɵɵproperty("ngClass",l.ɵɵpureFunction2(12,O,1===t.tabIndex,!t.areParentsValid)),l.ɵɵadvance(2),l.ɵɵproperty("ngClass",l.ɵɵpureFunction2(15,I,2===t.tabIndex,!t.isGeometryEditable)),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",(0===t.tabIndex||2===t.tabIndex)&&t.geoObjectType&&t.goPropertiesPre&&t.goPropertiesPost),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",1===t.tabIndex&&null!=t.hierarchies),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",!t.isMaintainer),l.ɵɵadvance(6),l.ɵɵproperty("ngModel",t.dateStr),l.ɵɵadvance(6),l.ɵɵproperty("disabled",n.invalid||!t.isValid),l.ɵɵadvance(1),l.ɵɵproperty("key",t.isMaintainer?"modal.button.submit":"change.request.page.title")}},directives:[p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,p.NgForm,m.NgIf,m.NgClass,u.LocalizeComponent,p.DefaultValueAccessor,p.NgControlStatus,p.NgModel,g.GeoObjectSharedAttributeEditorComponent,f.CascadingGeoSelector,p.RequiredValidator],styles:['.modal-content[_ngcontent-%COMP%] {\n    overflow-y: visible !important;\n}\n\n.modal-form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   input[type="text"][_ngcontent-%COMP%]:disabled {\n    background: #eee;\n}\n\nli.list-group-item[_ngcontent-%COMP%] {\n    font-size: 18px;\n}\n\n.warning-text[_ngcontent-%COMP%]{\n    color: orange;\n}\n\n\n\n.btn-group.geobject-editor-tab-holder[_ngcontent-%COMP%]   label.btn.full-width-radio-button.disabled[_ngcontent-%COMP%] {\n    border-color: #a7a7a7 !important;\n    font-weight: normal;\n    color: #a7a7a7;\n}\n.btn-group.geobject-editor-tab-holder[_ngcontent-%COMP%]   .btn.full-width-radio-button.disabled[_ngcontent-%COMP%]:active, .btn-group.geobject-editor-tab-holder[_ngcontent-%COMP%]   .btn.full-width-radio-button.disabled[_ngcontent-%COMP%]:focus {\n    background: white !important;\n    background: var(--theme-button-color) !important;\n    outline: 0px !important;\n}\n\n\nlabel.btn.full-width-radio-button.error[_ngcontent-%COMP%] {\n    border-color: #8c0000;\n}']}),e}();t.GeoObjectEditorComponent=M},582:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepIndicatorComponent=void 0;n(0),n(15),n(546);var r=n(0),o=n(15),i=n(1),a=function(e,t,n){return{complete:e,stuck:t,working:n}};function l(e,t){if(1&e&&(r.ɵɵelementStart(0,"li",4),r.ɵɵtext(1),r.ɵɵelementEnd()),2&e){var n=t.$implicit;r.ɵɵproperty("ngClass",r.ɵɵpureFunction3(2,a,"COMPLETE"===n.status,"STUCK"===n.status,"WORKING"===n.status)),r.ɵɵadvance(1),r.ɵɵtextInterpolate1(" ",n.label," ")}}function c(e,t){if(1&e&&(r.ɵɵelementStart(0,"ul",2),r.ɵɵtemplate(1,l,2,6,"li",3),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext();r.ɵɵadvance(1),r.ɵɵproperty("ngForOf",n._stepConfig.steps)}}var s=function(){function e(e){this.localizeService=e,this._stepConfig={steps:[]}}return Object.defineProperty(e.prototype,"steps",{set:function(e){this._stepConfig=e},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){},e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(o.LocalizationService))},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["step-indicator"]],inputs:{steps:"steps"},decls:2,vars:1,consts:[[1,"step-indicator"],["class","nav nav-justified",4,"ngIf"],[1,"nav","nav-justified"],["class","nav-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"nav-item",3,"ngClass"]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div",0),r.ɵɵtemplate(1,c,2,1,"ul",1),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(1),r.ɵɵproperty("ngIf",t._stepConfig&&t._stepConfig.steps&&t._stepConfig.steps.length>0))},directives:[i.NgIf,i.NgForOf,i.NgClass],styles:[".step-indicator[_ngcontent-%COMP%] {\n    margin-top: 5px;\n}\n\n.step-indicator[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] {\n    \n    background-color: white;\n    text-align: center;\n    vertical-align: middle;\n    \n    \n    \n    border-collapse: separate; \n    border-spacing: 0;\n    color: black;\n}\n.step-indicator[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:first-child):not(:last-child) {\n    border-left: solid 2px white;\n}\n.step-indicator[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]:first-child {\n    -moz-border-radius-topleft: 10px;\n    -moz-border-radius-bottomleft: 10px;\n\n    -webkit-border-top-left-radius: 10px;\n    -webkit-border-bottom-left-radius: 10px;\n    border-top-left-radius: 10px;\n    border-bottom-left-radius: 10px;\n}\n.step-indicator[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]:last-child {\n    -moz-border-radius-topright: 10px;\n    -moz-border-radius-bottomright: 10px;\n\n    -webkit-border-top-right-radius: 10px;\n    -webkit-border-bottom-right-radius: 10px;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n}\n.step-indicator[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] {\n    font-weight: bold;\n}\n.step-indicator[_ngcontent-%COMP%]   .nav-item.complete[_ngcontent-%COMP%]{\n    background-color: #B7A2D5;\n}\n.step-indicator[_ngcontent-%COMP%]   .nav-item.stuck[_ngcontent-%COMP%]{\n    background-color: #f05d5d;\n}\n.step-indicator[_ngcontent-%COMP%]   .nav-item.working[_ngcontent-%COMP%]{\n    background-color: #ffbc58;\n}"]}),e}();t.StepIndicatorComponent=s},590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HierarchyComponent=void 0;n(0);var r=n(183),o=(n(30),n(184),n(591)),i=n(592),a=n(593),l=n(594),c=n(174),s=(n(15),n(334)),d=(n(545),n(0)),p=n(545),m=n(30),u=n(184),g=n(15),f=n(128),h=n(85),v=n(44),b=n(1),y=n(183),S=n(100),C=["nodeMenu"],E=["leafMenu"];function x(e,t){1&e&&d.ɵɵelement(0,"i",18)}function O(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"i",21),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext(2).$implicit;return d.ɵɵnextContext().deleteGeoObjectType(e)})),d.ɵɵpipe(1,"localize"),d.ɵɵelementEnd()}2&e&&d.ɵɵproperty("title",d.ɵɵpipeBind1(1,1,"button.delete.helptext"))}function I(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"span"),d.ɵɵtemplate(1,O,2,3,"i",19),d.ɵɵelementStart(2,"i",20),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().$implicit;return d.ɵɵnextContext().manageGeoObjectType(e,!1)})),d.ɵɵpipe(3,"localize"),d.ɵɵelementEnd(),d.ɵɵelementEnd()}if(2&e){var r=d.ɵɵnextContext().$implicit,o=d.ɵɵnextContext();d.ɵɵadvance(1),d.ɵɵproperty("ngIf",!o.excludeGeoObjectTypeDeletes(r)),d.ɵɵadvance(1),d.ɵɵproperty("title",d.ɵɵpipeBind1(3,2,"button.edit.helptext"))}}function M(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"span"),d.ɵɵelementStart(1,"i",22),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().$implicit;return d.ɵɵnextContext().manageGeoObjectType(e,!0)})),d.ɵɵpipe(2,"localize"),d.ɵɵelementEnd(),d.ɵɵelementEnd()}2&e&&(d.ɵɵadvance(1),d.ɵɵproperty("title",d.ɵɵpipeBind1(2,1,"button.view.helptext")))}function w(e,t){if(1&e&&(d.ɵɵelementStart(0,"li",16),d.ɵɵtext(1),d.ɵɵtemplate(2,x,1,0,"i",17),d.ɵɵtemplate(3,I,4,4,"span",11),d.ɵɵtemplate(4,M,3,3,"span",11),d.ɵɵelementEnd()),2&e){var n=t.$implicit,r=d.ɵɵnextContext();d.ɵɵadvance(1),d.ɵɵtextInterpolate1(" ",n.label.localizedValue," "),d.ɵɵadvance(1),d.ɵɵproperty("ngIf","true"===n.isLeaf),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",r.isOrganizationRA(n.organizationCode)),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",!r.isOrganizationRA(n.organizationCode))}}function j(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"button",23),d.ɵɵlistener("click",(function(){return d.ɵɵrestoreView(n),d.ɵɵnextContext().createGeoObjectType()})),d.ɵɵelement(1,"localize",24),d.ɵɵelementEnd()}}function k(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"i",21),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext(2).$implicit;return d.ɵɵnextContext().deleteHierarchyType(e)})),d.ɵɵpipe(1,"localize"),d.ɵɵelementEnd()}2&e&&d.ɵɵproperty("title",d.ɵɵpipeBind1(1,1,"button.delete.helptext"))}function T(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"span"),d.ɵɵtemplate(1,k,2,3,"i",19),d.ɵɵelementStart(2,"i",27),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().$implicit;return d.ɵɵnextContext().editHierarchyType(e,!1)})),d.ɵɵpipe(3,"localize"),d.ɵɵelementEnd(),d.ɵɵelementEnd()}if(2&e){var r=d.ɵɵnextContext().$implicit,o=d.ɵɵnextContext();d.ɵɵadvance(1),d.ɵɵproperty("ngIf",!o.excludeHierarchyTypeDeletes(r)),d.ɵɵadvance(1),d.ɵɵproperty("title",d.ɵɵpipeBind1(3,2,"button.edit.helptext"))}}function P(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"span"),d.ɵɵelementStart(1,"i",28),d.ɵɵlistener("click",(function(){d.ɵɵrestoreView(n);var e=d.ɵɵnextContext().$implicit;return d.ɵɵnextContext().editHierarchyType(e,!0)})),d.ɵɵpipe(2,"localize"),d.ɵɵelementEnd(),d.ɵɵelementEnd()}2&e&&(d.ɵɵadvance(1),d.ɵɵproperty("title",d.ɵɵpipeBind1(2,1,"button.view.helptext")))}var z=function(e){return{active:e}};function V(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"li",25),d.ɵɵlistener("click",(function(e){d.ɵɵrestoreView(n);var r=t.$implicit;return d.ɵɵnextContext().hierarchyOnClick(e,r)})),d.ɵɵelement(1,"i",26),d.ɵɵtext(2),d.ɵɵtemplate(3,T,4,4,"span",11),d.ɵɵtemplate(4,P,3,3,"span",11),d.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=d.ɵɵnextContext();d.ɵɵproperty("ngClass",d.ɵɵpureFunction1(4,z,o.isActive(r))),d.ɵɵadvance(2),d.ɵɵtextInterpolate1(" ",r.label.localizedValue," "),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",o.isOrganizationRA(r.organizationCode)),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",!o.isOrganizationRA(r.organizationCode))}}function N(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"button",23),d.ɵɵlistener("click",(function(){return d.ɵɵrestoreView(n),d.ɵɵnextContext().createHierarchy()})),d.ɵɵelement(1,"localize",24),d.ɵɵelementEnd()}}function R(e,t){if(1&e&&(d.ɵɵelementStart(0,"span"),d.ɵɵtext(1),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext();d.ɵɵadvance(1),d.ɵɵtextInterpolate1(" ",n.currentHierarchy.label.localizedValue,"")}}function A(e,t){if(1&e&&(d.ɵɵelementStart(0,"div",29),d.ɵɵelement(1,"tree-root",30),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext();d.ɵɵadvance(1),d.ɵɵproperty("nodes",n.nodes)("options",n.options)}}function D(e,t){if(1&e){var n=d.ɵɵgetCurrentView();d.ɵɵelementStart(0,"button",23),d.ɵɵlistener("click",(function(){return d.ɵɵrestoreView(n),d.ɵɵnextContext(2).addChildAndRootToHierarchy()})),d.ɵɵelement(1,"localize",31),d.ɵɵelementEnd()}}function L(e,t){if(1&e&&(d.ɵɵelementStart(0,"div"),d.ɵɵelementStart(1,"div"),d.ɵɵtemplate(2,D,2,0,"button",7),d.ɵɵelementEnd(),d.ɵɵelementEnd()),2&e){var n=d.ɵɵnextContext();d.ɵɵadvance(2),d.ɵɵproperty("ngIf",n.isRA())}}function F(e,t){1&e&&d.ɵɵelement(0,"localize",32)}function _(e,t){1&e&&d.ɵɵelement(0,"localize",33)}function G(e,t){if(1&e&&(d.ɵɵelement(0,"localize",33),d.ɵɵtext(1)),2&e){var n=t.$implicit;d.ɵɵadvance(1),d.ɵɵtextInterpolate1(" ",null==n?null:n.data.label.localizedValue," ")}}var H=function(){},$=function(){function e(e,t,n,r,o,i,a){var l=this;this.hierarchyService=e,this.modalService=t,this.contextMenuService=n,this.changeDetectorRef=r,this.localizeService=o,this.registryService=i,this.authService=a,this.instance=new H,this.geoObjectTypes=[],this.nodes=[],this.currentHierarchy=null,this.hierarchyTypeDeleteExclusions=["AllowedIn","IsARelationship"],this.geoObjectTypeDeleteExclusions=["ROOT"],this.options={displayField:"label",actionMapping:{mouse:{click:function(e,t,n){l.treeNodeOnClick(t,n)},contextMenu:function(e,t,n){l.handleOnMenu(t,n)}}},mouse:{}}}return e.prototype.ngOnInit=function(){this.refreshAll(null)},e.prototype.ngAfterViewInit=function(){},e.prototype.isRA=function(){return this.authService.isRA()},e.prototype.isOrganizationRA=function(e){return this.authService.isOrganizationRA(e)},e.prototype.refreshAll=function(e){var t=this;this.registryService.init().then((function(n){t.localizeService.setLocales(n.locales),t.geoObjectTypes=n.types,t.geoObjectTypes.sort((function(e,t){return e.label.localizedValue.toLowerCase()<t.label.localizedValue.toLowerCase()?-1:e.label.localizedValue.toLowerCase()>t.label.localizedValue.toLowerCase()?1:0}));var r=t.getGeoObjectTypePosition("ROOT");r&&t.geoObjectTypes.splice(r,1),t.setHierarchies(n.hierarchies),t.setNodesOnInit(e)})).catch((function(e){t.error(e)}))},e.prototype.excludeHierarchyTypeDeletes=function(e){return-1!==this.hierarchyTypeDeleteExclusions.indexOf(e.code)},e.prototype.excludeGeoObjectTypeDeletes=function(e){return-1!==this.geoObjectTypeDeleteExclusions.indexOf(e.code)},e.prototype.setNodesOnInit=function(e){var t=this,n=-1;if(null!=e?n=this.hierarchies.findIndex((function(t){return t.code===e.code})):this.hierarchies.length>0&&(n=0),n>-1){var r=this.hierarchies[n];this.nodes=r.rootGeoObjectTypes,this.currentHierarchy=r,setTimeout((function(){t.tree&&t.tree.treeModel.expandAll()}),1)}},e.prototype.setNodesForHierarchy=function(e){for(var t=this,n=0;n<this.hierarchies.length;n++){var r=this.hierarchies[n];if(r.code===e.code){this.nodes=e.rootGeoObjectTypes,this.currentHierarchy=r;break}}setTimeout((function(){t.tree.treeModel.expandAll()}),1)},e.prototype.getHierarchy=function(e){var t=null;return this.hierarchies.forEach((function(n){e===n.code&&(t=n)})),t},e.prototype.setHierarchies=function(e){var t=this,n=[];e.forEach((function(e,r){e.rootGeoObjectTypes.length>0&&e.rootGeoObjectTypes.forEach((function(e){t.processHierarchyNodes(e)})),n.push(e)})),this.hierarchies=n,this.hierarchies.sort((function(e,t){return e.label.localizedValue.toLowerCase()<t.label.localizedValue.toLowerCase()?-1:e.label.localizedValue.toLowerCase()>t.label.localizedValue.toLowerCase()?1:0}))},e.prototype.updateHierarchy=function(e,t){this.hierarchies.forEach((function(n){n.code===e&&(n.rootGeoObjectTypes=t)}))},e.prototype.processHierarchyNodes=function(e){var t=this;e.label=this.getHierarchyLabel(e.geoObjectType),e.children.forEach((function(e){t.processHierarchyNodes(e)}))},e.prototype.getHierarchyLabel=function(e){var t=null;return this.geoObjectTypes.forEach((function(n){n.code===e&&(t=n.label.localizedValue)})),t},e.prototype.handleOnMenu=function(e,t){this.isOrganizationRA(this.currentHierarchy.organizationCode)?(this.contextMenuService.show.next({contextMenu:null!==e.data.childType?this.nodeMenuComponent:this.leafMenuComponent,event:t,item:e}),t.preventDefault(),t.stopPropagation()):(t.preventDefault(),t.stopPropagation())},e.prototype.treeNodeOnClick=function(e,t){e.treeModel.setFocusedNode(e),e.treeModel.isExpanded(e)?e.collapse():e.treeModel.expandAll()},e.prototype.hierarchyOnClick=function(e,t){var n=this,r=t.code;this.currentHierarchy=t,this.nodes=[],this.getHierarchy(r).rootGeoObjectTypes.length>0&&(this.nodes.push(this.getHierarchy(r).rootGeoObjectTypes[0]),setTimeout((function(){n&&n.tree&&n.tree.treeModel.expandAll()}),1)),this.tree&&this.tree.treeModel.update()},e.prototype.createHierarchy=function(){var e=this;this.bsModalRef=this.modalService.show(o.CreateHierarchyTypeModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"upload-modal"}),this.bsModalRef.content.onHierarchytTypeCreate.subscribe((function(t){e.hierarchies.push(t)}))},e.prototype.deleteHierarchyType=function(e){var t=this;this.bsModalRef=this.modalService.show(c.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+e.label.localizedValue+"]",this.bsModalRef.content.data=e.code,this.bsModalRef.content.type="DANGER",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.onConfirm.subscribe((function(e){t.removeHierarchyType(e)}))},e.prototype.editHierarchyType=function(e,t){var n=this;this.bsModalRef=this.modalService.show(o.CreateHierarchyTypeModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"upload-modal"}),this.bsModalRef.content.edit=!0,this.bsModalRef.content.readOnly=t,this.bsModalRef.content.hierarchyType=e,this.bsModalRef.content.onHierarchytTypeCreate.subscribe((function(e){var t=n.getHierarchyTypePosition(e.code);n.hierarchies[t].label=e.label,n.hierarchies[t].description=e.description}))},e.prototype.removeHierarchyType=function(e){var t=this;this.hierarchyService.deleteHierarchyType(e).then((function(n){var r=t.getHierarchyTypePosition(e);t.hierarchies.splice(r,1)})).catch((function(e){t.error(e)}))},e.prototype.createGeoObjectType=function(){var e=this;this.bsModalRef=this.modalService.show(a.CreateGeoObjTypeModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"upload-modal"}),this.bsModalRef.content.hierarchyType=this.currentHierarchy,this.bsModalRef.content.onGeoObjTypeCreate.subscribe((function(t){e.geoObjectTypes.push(t)}))},e.prototype.deleteGeoObjectType=function(e){var t=this;this.bsModalRef=this.modalService.show(c.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+e.label.localizedValue+"]",this.bsModalRef.content.data=e.code,this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.type=s.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(e){t.removeGeoObjectType(e)}))},e.prototype.removeGeoObjectType=function(e){var t=this;this.registryService.deleteGeoObjectType(e).then((function(n){var r=t.getGeoObjectTypePosition(e);t.geoObjectTypes.splice(r,1),t.refreshAll(t.currentHierarchy)})).catch((function(e){t.error(e)}))},e.prototype.manageGeoObjectType=function(e,t){var n=this;this.bsModalRef=this.modalService.show(l.ManageGeoObjectTypeModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"manage-geoobjecttype-modal"}),e.attributes.sort((function(e,t){return e.label.localizedValue<t.label.localizedValue?-1:e.label.localizedValue>t.label.localizedValue?1:0})),this.bsModalRef.content.geoObjectType=e,this.bsModalRef.content.readOnly=t,this.bsModalRef.content.onGeoObjectTypeSubmitted.subscribe((function(e){var t=n.getGeoObjectTypePosition(e.code);t&&(n.geoObjectTypes[t]=e)}))},e.prototype.getHierarchyTypePosition=function(e){for(var t=0;t<this.hierarchies.length;t++){if(this.hierarchies[t].code===e)return t}},e.prototype.getGeoObjectTypePosition=function(e){for(var t=0;t<this.geoObjectTypes.length;t++){if(this.geoObjectTypes[t].code===e)return t}return null},e.prototype.addChildAndRootToHierarchy=function(){var e=this,t=this;this.bsModalRef=this.modalService.show(i.AddChildToHierarchyModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"upload-modal"}),this.bsModalRef.content.allGeoObjectTypes=this.geoObjectTypes,this.bsModalRef.content.parent="ROOT",this.bsModalRef.content.toRoot=!0,this.bsModalRef.content.hierarchyType=this.currentHierarchy,this.bsModalRef.content.nodes=this.nodes,this.bsModalRef.content.onNodeChange.subscribe((function(n){t.processHierarchyNodes(n.rootGeoObjectTypes[0]),t.updateHierarchy(n.code,n.rootGeoObjectTypes),t.setNodesForHierarchy(n),e.tree&&e.tree.treeModel.update()}))},e.prototype.addChildToHierarchy=function(e){var t=this,n=this;n.current=e,this.bsModalRef=this.modalService.show(i.AddChildToHierarchyModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"upload-modal"}),this.bsModalRef.content.allGeoObjectTypes=this.geoObjectTypes,this.bsModalRef.content.parent=e,this.bsModalRef.content.toRoot=!1,this.bsModalRef.content.hierarchyType=this.currentHierarchy,this.bsModalRef.content.nodes=this.nodes,this.bsModalRef.content.onNodeChange.subscribe((function(e){n.current.data;n.processHierarchyNodes(e.rootGeoObjectTypes[0]),n.updateHierarchy(e.code,e.rootGeoObjectTypes),n.setNodesForHierarchy(e),t.tree&&t.tree.treeModel.update()}))},e.prototype.deleteTreeNode=function(e){var t=this;this.bsModalRef=this.modalService.show(c.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+e.data.label+"]",this.bsModalRef.content.data=e,this.bsModalRef.content.onConfirm.subscribe((function(e){t.removeTreeNode(e)}))},e.prototype.removeTreeNode=function(e){var t=this;this.hierarchyService.removeFromHierarchy(this.currentHierarchy.code,e.parent.data.geoObjectType,e.data.geoObjectType).then((function(n){null==e.parent.data.geoObjectType&&(t.nodes=[]);var r=e.parent,o=r.data.children;r.data.children=o.filter((function(t){return t.id!==e.data.id})),0===r.data.children.length&&(r.data.hasChildren=!1),t.tree.treeModel.update(),t.changeDetectorRef.detectChanges()})).catch((function(e){t.error(e)}))},e.prototype.isActive=function(e){return this.currentHierarchy===e},e.prototype.onDrop=function(e){this.removeTreeNode(e.element)},e.prototype.allowDrop=function(e){return!0},e.prototype.error=function(e){this.bsModalRef=this.modalService.show(c.ErrorModalComponent,{backdrop:!0}),this.bsModalRef.content.message=c.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(d.ɵɵdirectiveInject(p.HierarchyService),d.ɵɵdirectiveInject(m.BsModalService),d.ɵɵdirectiveInject(u.ContextMenuService),d.ɵɵdirectiveInject(d.ChangeDetectorRef),d.ɵɵdirectiveInject(g.LocalizationService),d.ɵɵdirectiveInject(p.RegistryService),d.ɵɵdirectiveInject(g.AuthService))},e.ɵcmp=d.ɵɵdefineComponent({type:e,selectors:[["hierarchies"]],viewQuery:function(e,t){var n;(1&e&&(d.ɵɵviewQuery(r.TreeComponent,!0),d.ɵɵviewQuery(C,!0),d.ɵɵviewQuery(E,!0)),2&e)&&(d.ɵɵqueryRefresh(n=d.ɵɵloadQuery())&&(t.tree=n.first),d.ɵɵqueryRefresh(n=d.ɵɵloadQuery())&&(t.nodeMenuComponent=n.first),d.ɵɵqueryRefresh(n=d.ɵɵloadQuery())&&(t.leafMenuComponent=n.first))},decls:35,vars:7,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],[1,"row"],[1,"col-md-4"],["key","hierarchy.types.management.panel.title"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],["type","submit","class","btn btn-primary",3,"click",4,"ngIf"],["key","hierarchy.management.panel.title"],["class","list-group-item clickable",3,"ngClass","click",4,"ngFor","ngForOf"],["key","hierarchy.current.management.panel.title"],[4,"ngIf"],["class","tree",4,"ngIf"],["nodeMenu",""],["contextMenuItem","",3,"execute"],["leafMenu",""],[1,"list-group-item"],["class","fa fa-leaf","style","font-size:15px;cursor:auto;margin-left:5px;","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fa","fa-leaf",2,"font-size","15px","cursor","auto","margin-left","5px"],["class","fa fa-times delete-btn clickable pull-right",3,"title","click",4,"ngIf"],[1,"fa","fa-pencil","clickable","pull-right",3,"title","click"],[1,"fa","fa-times","delete-btn","clickable","pull-right",3,"title","click"],[1,"fa","fa-eye","clickable","pull-right",3,"title","click"],["type","submit",1,"btn","btn-primary",3,"click"],["key","hierarchy.management.button.create"],[1,"list-group-item","clickable",3,"ngClass","click"],[1,"fa","fa-sitemap"],[1,"fa","fa-pencil","pull-right","clickable",3,"title","click"],[1,"fa","fa-eye","pull-right","clickable",3,"title","click"],[1,"tree"],[3,"nodes","options"],["key","hierarchy.current.management.panel.button.add"],["key","hierarchy.management.button.addRelationship"],["key","hierarchy.management.button.removeTreeNodeFromHierarchy"]],template:function(e,t){1&e&&(d.ɵɵelementStart(0,"div",0),d.ɵɵelement(1,"cgr-header"),d.ɵɵelement(2,"loading-bar"),d.ɵɵelementStart(3,"div",1),d.ɵɵelementStart(4,"div",2),d.ɵɵelementStart(5,"div",3),d.ɵɵelementStart(6,"h3"),d.ɵɵelement(7,"localize",4),d.ɵɵelementEnd(),d.ɵɵelement(8,"hr"),d.ɵɵelementStart(9,"ul",5),d.ɵɵtemplate(10,w,5,4,"li",6),d.ɵɵelementEnd(),d.ɵɵelementStart(11,"div"),d.ɵɵtemplate(12,j,2,0,"button",7),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(13,"div",3),d.ɵɵelementStart(14,"h3"),d.ɵɵelement(15,"localize",8),d.ɵɵelementEnd(),d.ɵɵelement(16,"hr"),d.ɵɵelementStart(17,"ul",5),d.ɵɵtemplate(18,V,5,6,"li",9),d.ɵɵelementEnd(),d.ɵɵelementStart(19,"div"),d.ɵɵtemplate(20,N,2,0,"button",7),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(21,"div",3),d.ɵɵelementStart(22,"h3"),d.ɵɵelement(23,"localize",10),d.ɵɵtemplate(24,R,2,1,"span",11),d.ɵɵelementEnd(),d.ɵɵelement(25,"hr"),d.ɵɵtemplate(26,A,2,2,"div",12),d.ɵɵtemplate(27,L,3,1,"div",11),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementEnd(),d.ɵɵelementStart(28,"context-menu",null,13),d.ɵɵtemplate(30,F,1,0,"ng-template",14),d.ɵɵlistener("execute",(function(e){return t.addChildToHierarchy(e.item)})),d.ɵɵtemplate(31,_,1,0,"ng-template",14),d.ɵɵlistener("execute",(function(e){return t.deleteTreeNode(e.item)})),d.ɵɵelementEnd(),d.ɵɵelementStart(32,"context-menu",null,15),d.ɵɵtemplate(34,G,2,1,"ng-template",14),d.ɵɵlistener("execute",(function(e){return t.deleteTreeNode(e.item)})),d.ɵɵelementEnd(),d.ɵɵelementEnd()),2&e&&(d.ɵɵadvance(10),d.ɵɵproperty("ngForOf",t.geoObjectTypes),d.ɵɵadvance(2),d.ɵɵproperty("ngIf",t.isRA()),d.ɵɵadvance(6),d.ɵɵproperty("ngForOf",t.hierarchies),d.ɵɵadvance(2),d.ɵɵproperty("ngIf",t.isRA()),d.ɵɵadvance(4),d.ɵɵproperty("ngIf",t.currentHierarchy),d.ɵɵadvance(2),d.ɵɵproperty("ngIf",t.nodes.length>0),d.ɵɵadvance(1),d.ɵɵproperty("ngIf",t.currentHierarchy&&0===t.nodes.length))},directives:[f.CgrHeaderComponent,h.LoadingBarComponent,v.LocalizeComponent,b.NgForOf,b.NgIf,u.ContextMenuComponent,u.ɵb,b.NgClass,y.TreeComponent],pipes:[S.LocalizePipe],styles:["li.list-group-item.active[_ngcontent-%COMP%] {\n    background: var(--theme-primary-color-light)\n}"]}),e}();t.HierarchyComponent=$},591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateHierarchyTypeModalComponent=void 0;n(0),n(30);var r=n(37),o=n(174),i=(n(545),n(15),n(0)),a=n(15),l=n(545),c=n(30),s=n(27),d=n(1),p=n(44);function m(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",18),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.message)}}function u(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",3),i.ɵɵelementStart(1,"label",19),i.ɵɵelement(2,"localize",20),i.ɵɵtext(3),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"input",21),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),t.$implicit.value=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=i.ɵɵnextContext();i.ɵɵadvance(3),i.ɵɵtextInterpolate1(" (",r.locale,") "),i.ɵɵadvance(1),i.ɵɵproperty("disabled",o.readOnly)("ngModel",r.value)("name","label-"+r.locale)}}function g(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",3),i.ɵɵelementStart(1,"label",22),i.ɵɵelement(2,"localize",23),i.ɵɵtext(3),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"input",24),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),t.$implicit.value=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=i.ɵɵnextContext();i.ɵɵadvance(3),i.ɵɵtextInterpolate1(" (",r.locale,") "),i.ɵɵadvance(1),i.ɵɵproperty("disabled",o.readOnly)("ngModel",r.value)("name","description-"+r.locale)}}function f(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",27),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵproperty("value",n.code),i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.label.localizedValue)}}function h(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"select",25),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().hierarchyType.organizationCode=e})),i.ɵɵelement(1,"option"),i.ɵɵtemplate(2,f,2,2,"option",26),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵproperty("disabled",r.edit||r.readOnly)("ngModel",r.hierarchyType.organizationCode),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",r.organizations)}}function v(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"span",28),i.ɵɵelementStart(1,"input",29),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().hierarchyType.organizationCode=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵproperty("ngModel",r.hierarchyType.organizationCode)}}function b(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"span",28),i.ɵɵelementStart(1,"input",29),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().hierarchyType.organizationCode=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵproperty("ngModel",r.hierarchyType.organizationCode)}}function y(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"button",30),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext().handleOnSubmit()})),i.ɵɵelement(1,"localize",31),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵproperty("disabled",r.hierarchyType.code.length<1)}}var S=function(){function e(e,t,n,r,o){this.lService=e,this.auth=t,this.registryService=n,this.hierarchyService=r,this.bsModalRef=o,this.organizations=[],this.message=null,this.edit=!1,this.readOnly=!1}return e.prototype.ngOnInit=function(){var e=this;this.onHierarchytTypeCreate=new r.Subject,this.hierarchyType={code:"",label:this.lService.create(),description:this.lService.create(),rootGeoObjectTypes:[],organizationCode:""},this.registryService.getOrganizations().then((function(t){if(e.readOnly)e.organizations=t;else{e.organizations=[];for(var n=0;n<t.length;++n)e.auth.isOrganizationRA(t[n].code)&&e.organizations.push(t[n])}e.edit||1!==e.organizations.length||(e.hierarchyType.organizationCode=e.organizations[0].code)})).catch((function(t){e.error(t)}))},e.prototype.handleOnSubmit=function(){var e=this;this.message=null,this.readOnly?this.bsModalRef.hide():this.edit?this.hierarchyService.updateHierarchyType(JSON.stringify(this.hierarchyType)).then((function(t){e.onHierarchytTypeCreate.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)})):this.hierarchyService.createHierarchyType(JSON.stringify(this.hierarchyType)).then((function(t){e.onHierarchytTypeCreate.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.LocalizationService),i.ɵɵdirectiveInject(a.AuthService),i.ɵɵdirectiveInject(l.RegistryService),i.ɵɵdirectiveInject(l.HierarchyService),i.ɵɵdirectiveInject(c.BsModalRef))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["create-hierarchy-type-modal"]],decls:22,vars:9,consts:[[1,"modal-body"],[1,"modal-form"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"form-group"],["for","codeInput"],["key","data.property.label.code"],["name","code","type","input","id","codeInput","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","form-group",4,"ngFor","ngForOf"],["for","organization"],["key","attribute.organization.label"],["class","select-area","name","organization","required","",3,"disabled","ngModel","ngModelChange",4,"ngIf"],["class","text",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"button-holder"],["type","button",1,"btn","btn-default",2,"padding","4px 18px",3,"click"],["key","modal.button.cancel"],["type","submit","class","btn btn-primary","style","padding: 4px 18px;",3,"disabled","click",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["for","labelInput"],["key","data.property.label.label"],["type","input","required","",1,"form-control",3,"disabled","ngModel","name","ngModelChange"],["for","descriptionInput"],["key","data.property.label.description"],["type","input",1,"form-control",3,"disabled","ngModel","name","ngModelChange"],["name","organization","required","",1,"select-area",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text"],["type","text","name","organization","disabled","","required","",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",2,"padding","4px 18px",3,"disabled","click"],["key","modal.button.ok"]],template:function(e,t){1&e&&(i.ɵɵelementStart(0,"form"),i.ɵɵelementStart(1,"div",0),i.ɵɵelementStart(2,"form",1),i.ɵɵtemplate(3,m,2,1,"div",2),i.ɵɵelementStart(4,"div",3),i.ɵɵelementStart(5,"label",4),i.ɵɵelement(6,"localize",5),i.ɵɵelementEnd(),i.ɵɵelementStart(7,"input",6),i.ɵɵlistener("ngModelChange",(function(e){return t.hierarchyType.code=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(8,u,5,4,"div",7),i.ɵɵtemplate(9,g,5,4,"div",7),i.ɵɵelementStart(10,"div",3),i.ɵɵelementStart(11,"label",8),i.ɵɵelement(12,"localize",9),i.ɵɵelementEnd(),i.ɵɵtemplate(13,h,3,3,"select",10),i.ɵɵtemplate(14,v,2,1,"span",11),i.ɵɵtemplate(15,b,2,1,"span",11),i.ɵɵelementEnd(),i.ɵɵelementStart(16,"div",12),i.ɵɵelementStart(17,"div",13),i.ɵɵelementStart(18,"div",14),i.ɵɵelementStart(19,"button",15),i.ɵɵlistener("click",(function(){return t.bsModalRef.hide()})),i.ɵɵelement(20,"localize",16),i.ɵɵelementEnd(),i.ɵɵtemplate(21,y,2,1,"button",17),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e&&(i.ɵɵadvance(3),i.ɵɵproperty("ngIf",null!=t.message),i.ɵɵadvance(4),i.ɵɵproperty("ngModel",t.hierarchyType.code)("disabled",t.edit||t.readOnly),i.ɵɵadvance(1),i.ɵɵproperty("ngForOf",t.hierarchyType.label.localeValues),i.ɵɵadvance(1),i.ɵɵproperty("ngForOf",t.hierarchyType.description.localeValues),i.ɵɵadvance(4),i.ɵɵproperty("ngIf",!t.edit&&t.organizations.length>1),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",!t.edit&&1==t.organizations.length),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",t.edit),i.ɵɵadvance(6),i.ɵɵproperty("ngIf",!t.readOnly))},directives:[s.ɵangular_packages_forms_forms_y,s.NgControlStatusGroup,s.NgForm,d.NgIf,p.LocalizeComponent,s.DefaultValueAccessor,s.RequiredValidator,s.NgControlStatus,s.NgModel,d.NgForOf,s.SelectControlValueAccessor,s.NgSelectOption,s.ɵangular_packages_forms_forms_x],encapsulation:2}),e}();t.CreateHierarchyTypeModalComponent=S},592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddChildToHierarchyModalComponent=void 0;n(0),n(30);var r=n(37),o=n(174),i=(n(545),n(0)),a=n(545),l=n(30),c=n(27),s=n(1),d=n(44);function p(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",13),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext(2);i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.message)}}function m(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",18),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵpropertyInterpolate("value",n.code),i.ɵɵadvance(1),i.ɵɵtextInterpolate1(" ",n.label.localizedValue," ")}}function u(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"select",14),i.ɵɵlistener("change",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext(2).onSelect(e.target.value)})),i.ɵɵelementStart(1,"option",15),i.ɵɵtext(2,"-- "),i.ɵɵelement(3,"localize",16),i.ɵɵtext(4," --"),i.ɵɵelementEnd(),i.ɵɵelement(5,"option"),i.ɵɵtemplate(6,m,2,2,"option",17),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext(2);i.ɵɵadvance(1),i.ɵɵproperty("value",r.selectUndefinedOptionValue),i.ɵɵadvance(5),i.ɵɵproperty("ngForOf",r.allGeoObjectTypes)}}function g(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",2),i.ɵɵtemplate(1,p,2,1,"div",3),i.ɵɵelementStart(2,"div",4),i.ɵɵelementStart(3,"h1"),i.ɵɵelement(4,"localize",5),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"fieldset"),i.ɵɵelementStart(6,"div",6),i.ɵɵtemplate(7,u,7,2,"select",7),i.ɵɵelementEnd(),i.ɵɵelementStart(8,"div",8),i.ɵɵelementStart(9,"button",9),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext().bsModalRef.hide()})),i.ɵɵelementStart(10,"span"),i.ɵɵelement(11,"localize",10),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(12,"button",11),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext().handleOnSubmit()})),i.ɵɵelementStart(13,"span"),i.ɵɵelement(14,"localize",12),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null!=r.message),i.ɵɵadvance(6),i.ɵɵproperty("ngIf",r.allGeoObjectTypes)}}var f=function(){function e(e,t){this.hierarchyService=e,this.bsModalRef=t,this.toRoot=!1,this.message=null}return e.prototype.ngOnInit=function(){this.onNodeChange=new r.Subject},e.prototype.onSelect=function(e){var t=this;this.allGeoObjectTypes.forEach((function(n){n.code===e&&(t.selectedGeoObjectType=n)}))},e.prototype.handleOnSubmit=function(){var e=this;this.message=null;var t=this.toRoot?"ROOT":this.parent.data.geoObjectType;this.hierarchyService.addChildToHierarchy(this.hierarchyType.code,t,this.selectedGeoObjectType.code).then((function(t){e.onNodeChange.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.HierarchyService),i.ɵɵdirectiveInject(l.BsModalRef))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["add-child-to-hierarchy-modal"]],decls:2,vars:1,consts:[[1,"modal-form"],["class","modal-body",4,"ngIf"],[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading"],["key","hierarchy.management.button.addRelationship"],[1,"form-group"],[3,"change",4,"ngIf"],[1,"button-holder"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit","role","button","aria-disabled","false",1,"btn","btn-primary",3,"click"],["key","modal.button.ok"],["role","alert",1,"alert","alert-danger"],[3,"change"],["disabled","","hidden","",3,"value"],["key","hierarchy.management.create.child.option.label.selectType"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.ɵɵelementStart(0,"form",0),i.ɵɵtemplate(1,g,15,2,"div",1),i.ɵɵelementEnd()),2&e&&(i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null!=t.parent))},directives:[c.ɵangular_packages_forms_forms_y,c.NgControlStatusGroup,c.NgForm,s.NgIf,d.LocalizeComponent,c.NgSelectOption,c.ɵangular_packages_forms_forms_x,s.NgForOf],encapsulation:2}),e}();t.AddChildToHierarchyModalComponent=f},593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateGeoObjTypeModalComponent=void 0;n(0),n(30);var r=n(37),o=n(174),i=(n(545),n(15),n(0)),a=n(15),l=n(545),c=n(30),s=n(27),d=n(1),p=n(44);function m(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",34),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.message)}}function u(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",6),i.ɵɵelementStart(1,"label"),i.ɵɵelement(2,"localize",35),i.ɵɵtext(3),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"input",36),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),t.$implicit.value=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=t.$implicit;i.ɵɵadvance(3),i.ɵɵtextInterpolate1(" (",r.locale,") "),i.ɵɵadvance(1),i.ɵɵproperty("ngModel",r.value)("name","label-"+r.locale)("required","defaultLocale"===r.locale)}}function g(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",6),i.ɵɵelementStart(1,"div"),i.ɵɵelementStart(2,"label"),i.ɵɵelement(3,"localize",37),i.ɵɵtext(4),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"input",38),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),t.$implicit.value=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=t.$implicit;i.ɵɵadvance(4),i.ɵɵtextInterpolate1(" (",r.locale,") "),i.ɵɵadvance(1),i.ɵɵproperty("ngModel",r.value)("name","description-"+r.locale)}}function f(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",41),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵproperty("value",n.code),i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.label.localizedValue)}}function h(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"select",39),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().geoObjectType.organizationCode=e})),i.ɵɵelement(1,"option"),i.ɵɵtemplate(2,f,2,2,"option",40),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵproperty("ngModel",r.geoObjectType.organizationCode),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",r.organizations)}}function v(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"span",42),i.ɵɵelementStart(1,"input",43),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().geoObjectType.organizationCode=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵproperty("ngModel",r.geoObjectType.organizationCode)}}var b=function(e){return{"chk-checked":e}},y=function(){function e(e,t,n,r){this.lService=e,this.auth=t,this.registryService=n,this.bsModalRef=r,this.organizations=[],this.message=null}return e.prototype.ngOnInit=function(){var e=this;this.onGeoObjTypeCreate=new r.Subject,this.geoObjectType={code:"",label:this.lService.create(),description:this.lService.create(),geometryType:"MULTIPOINT",isLeaf:!1,isGeometryEditable:!0,organizationCode:"",attributes:[]},this.registryService.getOrganizations().then((function(t){e.organizations=[];for(var n=0;n<t.length;++n)e.auth.isOrganizationRA(t[n].code)&&e.organizations.push(t[n]);1===e.organizations.length&&(e.geoObjectType.organizationCode=e.organizations[0].code)})).catch((function(t){e.error(t)}))},e.prototype.handleOnSubmit=function(){var e=this;this.message=null,this.registryService.createGeoObjectType(JSON.stringify(this.geoObjectType)).then((function(t){e.onGeoObjTypeCreate.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.toggleIsLeaf=function(){this.geoObjectType.isLeaf=!this.geoObjectType.isLeaf},e.prototype.toggleIsGeometryEditable=function(){this.geoObjectType.isGeometryEditable=!this.geoObjectType.isGeometryEditable},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.LocalizationService),i.ɵɵdirectiveInject(a.AuthService),i.ɵɵdirectiveInject(l.RegistryService),i.ɵɵdirectiveInject(c.BsModalRef))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["create-geoobjtype-modal"]],decls:52,vars:11,consts:[[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["for","codeInput"],["key","data.property.label.code"],["name","code","type","text","id","codeInput","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group",4,"ngFor","ngForOf"],["for","geometryType"],["key","data.property.label.geometryType"],["name","geometryType","required","",1,"select-area",3,"ngModel","ngModelChange"],["value","MULTIPOINT"],["key","georegistry.geometry.point"],["value","MULTILINE"],["key","georegistry.geometry.line"],["value","MULTIPOLYGON"],["key","georegistry.geometry.polygon"],[1,"col-md-12",2,"margin-bottom","15px"],[1,"check-block"],[1,"jcf-unselectable","chk-area",2,"margin","0",3,"ngClass","click"],[1,"checkbox-label"],["key","hierarchy.management.option.label.isGeometryEditable"],["for","organization"],["key","attribute.organization.label"],["class","select-area","name","organization","required","",3,"ngModel","ngModelChange",4,"ngIf"],["class","text",4,"ngIf"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["key","modal.button.ok"],["role","alert",1,"alert","alert-danger"],["key","data.property.label.label"],["type","input",1,"form-control",3,"ngModel","name","required","ngModelChange"],["key","data.property.label.description"],["type","input",1,"form-control",3,"ngModel","name","ngModelChange"],["name","organization","required","",1,"select-area",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text"],["type","text","name","organization","disabled","","required","",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"form",0,1),i.ɵɵlistener("ngSubmit",(function(){return i.ɵɵrestoreView(n),i.ɵɵreference(1).valid&&t.handleOnSubmit()})),i.ɵɵelementStart(2,"div",2),i.ɵɵtemplate(3,m,2,1,"div",3),i.ɵɵelementStart(4,"div",4),i.ɵɵelementStart(5,"div",5),i.ɵɵelementStart(6,"div",6),i.ɵɵelementStart(7,"div"),i.ɵɵelementStart(8,"label",7),i.ɵɵelement(9,"localize",8),i.ɵɵelementEnd(),i.ɵɵelementStart(10,"input",9),i.ɵɵlistener("ngModelChange",(function(e){return t.geoObjectType.code=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(11,"div",4),i.ɵɵelementStart(12,"div",5),i.ɵɵtemplate(13,u,5,4,"div",10),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(14,"div",4),i.ɵɵelementStart(15,"div",5),i.ɵɵtemplate(16,g,6,3,"div",10),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(17,"div",4),i.ɵɵelementStart(18,"div",5),i.ɵɵelementStart(19,"div",6),i.ɵɵelementStart(20,"label",11),i.ɵɵelement(21,"localize",12),i.ɵɵelementEnd(),i.ɵɵelementStart(22,"select",13),i.ɵɵlistener("ngModelChange",(function(e){return t.geoObjectType.geometryType=e})),i.ɵɵelement(23,"option"),i.ɵɵelementStart(24,"option",14),i.ɵɵelement(25,"localize",15),i.ɵɵelementEnd(),i.ɵɵelementStart(26,"option",16),i.ɵɵelement(27,"localize",17),i.ɵɵelementEnd(),i.ɵɵelementStart(28,"option",18),i.ɵɵelement(29,"localize",19),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(30,"div",4),i.ɵɵelementStart(31,"div",20),i.ɵɵelementStart(32,"div",6),i.ɵɵelementStart(33,"div",21),i.ɵɵelementStart(34,"div",22),i.ɵɵlistener("click",(function(){return t.toggleIsGeometryEditable()})),i.ɵɵelement(35,"span"),i.ɵɵelementEnd(),i.ɵɵelementStart(36,"label",23),i.ɵɵelement(37,"localize",24),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(38,"div",4),i.ɵɵelementStart(39,"div",5),i.ɵɵelementStart(40,"div",6),i.ɵɵelementStart(41,"label",25),i.ɵɵelement(42,"localize",26),i.ɵɵelementEnd(),i.ɵɵtemplate(43,h,3,2,"select",27),i.ɵɵtemplate(44,v,2,1,"span",28),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(45,"div",4),i.ɵɵelementStart(46,"div",5),i.ɵɵelementStart(47,"div",29),i.ɵɵelementStart(48,"button",30),i.ɵɵlistener("click",(function(){return t.bsModalRef.hide()})),i.ɵɵelement(49,"localize",31),i.ɵɵelementEnd(),i.ɵɵelementStart(50,"button",32),i.ɵɵelement(51,"localize",33),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵreference(1);i.ɵɵadvance(3),i.ɵɵproperty("ngIf",null!=t.message),i.ɵɵadvance(7),i.ɵɵproperty("ngModel",t.geoObjectType.code),i.ɵɵadvance(3),i.ɵɵproperty("ngForOf",t.geoObjectType.label.localeValues),i.ɵɵadvance(3),i.ɵɵproperty("ngForOf",t.geoObjectType.description.localeValues),i.ɵɵadvance(6),i.ɵɵproperty("ngModel",t.geoObjectType.geometryType),i.ɵɵadvance(12),i.ɵɵproperty("ngClass",i.ɵɵpureFunction1(9,b,t.geoObjectType.isGeometryEditable)),i.ɵɵadvance(9),i.ɵɵproperty("ngIf",t.organizations.length>1),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",1==t.organizations.length),i.ɵɵadvance(6),i.ɵɵproperty("disabled",r.invalid)}},directives:[s.ɵangular_packages_forms_forms_y,s.NgControlStatusGroup,s.NgForm,d.NgIf,p.LocalizeComponent,s.DefaultValueAccessor,s.RequiredValidator,s.NgControlStatus,s.NgModel,d.NgForOf,s.SelectControlValueAccessor,s.NgSelectOption,s.ɵangular_packages_forms_forms_x,d.NgClass],encapsulation:2}),e}();t.CreateGeoObjTypeModalComponent=y},594:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageGeoObjectTypeModalComponent=void 0;n(0),n(30);var r=n(37),o=n(174),i=n(546),a=(n(545),n(0)),l=n(30),c=n(545),s=n(27),d=n(177),p=n(1),m=n(595),u=n(596),g=n(597),f=n(599),h=n(601),v=n(602);function b(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"geoobjecttype-input",4),a.ɵɵlistener("geoObjectTypeChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onGeoObjectTypeChange(e)})),a.ɵɵelementEnd()}if(2&e){var r=a.ɵɵnextContext();a.ɵɵproperty("readOnly",r.readOnly)("geoObjectType",r.geoObjectType)("setGeoObjectType",r.geoObjectType)}}function y(e,t){if(1&e&&a.ɵɵelement(0,"manage-attributes-modal",5),2&e){var n=a.ɵɵnextContext();a.ɵɵproperty("geoObjectType",n.geoObjectType)}}function S(e,t){if(1&e&&a.ɵɵelement(0,"define-attribute-modal-content",5),2&e){var n=a.ɵɵnextContext();a.ɵɵproperty("geoObjectType",n.geoObjectType)}}function C(e,t){if(1&e&&a.ɵɵelement(0,"edit-attribute-modal-content",6),2&e){var n=a.ɵɵnextContext();a.ɵɵproperty("geoObjectType",n.geoObjectType)("attribute",n.modalState.attribute)}}function E(e,t){if(1&e&&a.ɵɵelement(0,"manage-term-options",6),2&e){var n=a.ɵɵnextContext();a.ɵɵproperty("geoObjectType",n.geoObjectType)("attribute",n.modalState.attribute)}}function x(e,t){if(1&e&&a.ɵɵelement(0,"edit-term-option-input",7),2&e){var n=a.ɵɵnextContext();a.ɵɵproperty("geoObjectType",n.geoObjectType)("attribute",n.modalState.attribute)("termOption",n.modalState.termOption)}}var O=function(){function e(e,t,n){var r=this;this.bsModalRef=e,this.confirmBsModalRef=t,this.geoObjectTypeManagementService=n,this.message=null,this.modalState={state:i.GeoObjectTypeModalStates.manageGeoObjectType,attribute:"",termOption:""},this.readOnly=!1,this.modalStateSubscription=n.modalStepChange.subscribe((function(e){r.modalState=e}))}return e.prototype.ngOnInit=function(){this.onGeoObjectTypeSubmitted=new r.Subject},e.prototype.ngOnDestroy=function(){this.modalStateSubscription.unsubscribe()},e.prototype.onModalStateChange=function(e){this.modalState=e},e.prototype.onGeoObjectTypeChange=function(e){this.onGeoObjectTypeSubmitted.next(e)},e.prototype.update=function(){},e.prototype.close=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.BsModalRef),a.ɵɵdirectiveInject(l.BsModalRef),a.ɵɵdirectiveInject(c.GeoObjectTypeManagementService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["manage-geoobjecttype-modal"]],decls:8,vars:6,consts:[[3,"readOnly","geoObjectType","setGeoObjectType","geoObjectTypeChange",4,"ngIf"],[3,"geoObjectType",4,"ngIf"],[3,"geoObjectType","attribute",4,"ngIf"],[3,"geoObjectType","attribute","termOption",4,"ngIf"],[3,"readOnly","geoObjectType","setGeoObjectType","geoObjectTypeChange"],[3,"geoObjectType"],[3,"geoObjectType","attribute"],[3,"geoObjectType","attribute","termOption"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"form"),a.ɵɵelement(1,"modal-step-indicator"),a.ɵɵtemplate(2,b,1,3,"geoobjecttype-input",0),a.ɵɵtemplate(3,y,1,1,"manage-attributes-modal",1),a.ɵɵtemplate(4,S,1,1,"define-attribute-modal-content",1),a.ɵɵtemplate(5,C,1,2,"edit-attribute-modal-content",2),a.ɵɵtemplate(6,E,1,2,"manage-term-options",2),a.ɵɵtemplate(7,x,1,3,"edit-term-option-input",3),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(2),a.ɵɵproperty("ngIf","MANAGE-GEO-OBJECT-TYPE"===t.modalState.state),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","MANAGE-ATTRIBUTES"===t.modalState.state),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","DEFINE-ATTRIBUTE"===t.modalState.state),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","EDIT-ATTRIBUTE"===t.modalState.state),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","MANAGE-TERM-OPTION"===t.modalState.state),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","EDIT-TERM-OPTION"===t.modalState.state))},directives:[s.ɵangular_packages_forms_forms_y,s.NgControlStatusGroup,s.NgForm,d.ModalStepIndicatorComponent,p.NgIf,m.GeoObjectTypeInputComponent,u.ManageAttributesModalComponent,g.DefineAttributeModalContentComponent,f.EditAttributeModalContentComponent,h.ManageTermOptionsComponent,v.EditTermOptionInputComponent],styles:[""]}),e}();t.ManageGeoObjectTypeModalComponent=O},595:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectTypeInputComponent=void 0;var r=n(0),o=(n(30),n(30),n(174)),i=(n(15),n(546)),a=(n(545),n(0)),l=n(545),c=n(30),s=n(15),d=n(1),p=n(27),m=n(44),u=n(553),g=n(565),f=n(335);function h(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",4),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function v(e,t){if(1&e&&(a.ɵɵelementStart(0,"li",40),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.label.localizedValue)}}function b(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"button",41),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext(3).update()})),a.ɵɵelement(1,"localize",42),a.ɵɵelementEnd()}if(2&e){var r=a.ɵɵnextContext(3);a.ɵɵproperty("disabled",!r.isValid())}}function y(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"form",5,6),a.ɵɵlistener("ngSubmit",(function(){return a.ɵɵrestoreView(n),a.ɵɵreference(1).valid})),a.ɵɵelementStart(2,"div",7),a.ɵɵelementStart(3,"h1"),a.ɵɵelement(4,"localize",8),a.ɵɵtext(5),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(6,"fieldset"),a.ɵɵelementStart(7,"div",9),a.ɵɵelementStart(8,"div",10),a.ɵɵelementStart(9,"label"),a.ɵɵelement(10,"localize",11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(11,"div",12),a.ɵɵelementStart(12,"span",13),a.ɵɵelementStart(13,"input",14),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).editGeoObjectType.code=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(14,"localized-input",15),a.ɵɵlistener("valueChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).editGeoObjectType.label=e})),a.ɵɵelementEnd(),a.ɵɵelementStart(15,"localized-text",16),a.ɵɵlistener("valueChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).editGeoObjectType.description=e})),a.ɵɵelementEnd(),a.ɵɵelementStart(16,"div",9),a.ɵɵelementStart(17,"div",10),a.ɵɵelementStart(18,"label"),a.ɵɵelement(19,"localize",17),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(20,"div",12),a.ɵɵelementStart(21,"select",18),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).editGeoObjectType.geometryType=e})),a.ɵɵelement(22,"option"),a.ɵɵelementStart(23,"option",19),a.ɵɵelement(24,"localize",20),a.ɵɵelementEnd(),a.ɵɵelementStart(25,"option",21),a.ɵɵelement(26,"localize",22),a.ɵɵelementEnd(),a.ɵɵelementStart(27,"option",23),a.ɵɵelement(28,"localize",24),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(29,"div",9),a.ɵɵelementStart(30,"div",10),a.ɵɵelementStart(31,"label"),a.ɵɵelement(32,"localize",25),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(33,"div",12),a.ɵɵelementStart(34,"boolean-field",26),a.ɵɵlistener("valueChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).editGeoObjectType.isGeometryEditable=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(35,"div",9),a.ɵɵelementStart(36,"div",10),a.ɵɵelementStart(37,"label"),a.ɵɵelement(38,"localize",27),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(39,"div",12),a.ɵɵelementStart(40,"span",13),a.ɵɵelementStart(41,"input",28),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).editGeoObjectType.organizationCode=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(42,"div",9),a.ɵɵelementStart(43,"div",10),a.ɵɵelementStart(44,"label"),a.ɵɵelement(45,"localize",29),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(46,"div",12),a.ɵɵelementStart(47,"div",30),a.ɵɵelementStart(48,"div",31),a.ɵɵelementStart(49,"ul",32),a.ɵɵtemplate(50,v,2,1,"li",33),a.ɵɵelementEnd(),a.ɵɵelementStart(51,"button",34),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).manageAttributes()})),a.ɵɵelement(52,"localize",35),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(53,"div",9),a.ɵɵelementStart(54,"div",36),a.ɵɵelementStart(55,"button",37),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).close()})),a.ɵɵelement(56,"localize",38),a.ɵɵelementEnd(),a.ɵɵtemplate(57,b,2,1,"button",39),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=a.ɵɵnextContext(2);a.ɵɵadvance(5),a.ɵɵtextInterpolate1(" ",r.editGeoObjectType.label.localizedValue," "),a.ɵɵadvance(8),a.ɵɵproperty("ngModel",r.editGeoObjectType.code),a.ɵɵadvance(1),a.ɵɵproperty("disabled",r.readOnly)("value",r.editGeoObjectType.label),a.ɵɵadvance(1),a.ɵɵproperty("disabled",r.readOnly)("value",r.editGeoObjectType.description),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",r.editGeoObjectType.geometryType),a.ɵɵadvance(13),a.ɵɵproperty("disable",r.readOnly)("value",r.editGeoObjectType.isGeometryEditable)("localizeLabelKey","hierarchy.management.option.label.isGeometryEditable"),a.ɵɵadvance(7),a.ɵɵproperty("ngModel",r.editGeoObjectType.organizationCode),a.ɵɵadvance(9),a.ɵɵproperty("ngForOf",r.editGeoObjectType.attributes),a.ɵɵadvance(1),a.ɵɵproperty("disabled",r.readOnly),a.ɵɵadvance(6),a.ɵɵproperty("ngIf",!r.readOnly)}}function S(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",1),a.ɵɵtemplate(1,h,2,1,"div",2),a.ɵɵtemplate(2,y,58,14,"form",3),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=n.message),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",n.editGeoObjectType)}}var C=function(){function e(e,t,n,o,a,l,c,s){this.hierarchyService=e,this.bsModalRef=t,this.confirmBsModalRef=n,this.modalService=o,this.modalStepIndicatorService=a,this.geoObjectTypeManagementService=l,this.localizationService=c,this.registryService=s,this.readOnly=!1,this.geoObjectTypeChange=new r.EventEmitter,this.message=null,this.modalState={state:i.GeoObjectTypeModalStates.manageGeoObjectType,attribute:"",termOption:""},this.modalStepConfig={steps:[{label:this.localizationService.decode("modal.step.indicator.manage.geoobjecttype"),active:!0,enabled:!0}]}}return Object.defineProperty(e.prototype,"in",{set:function(e){e&&(this.editGeoObjectType=JSON.parse(JSON.stringify(e)))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.modalStepIndicatorService.setStepConfig(this.modalStepConfig),this.geoObjectTypeManagementService.setModalState(this.modalState)},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnDestroy=function(){},e.prototype.manageAttributes=function(){this.geoObjectTypeManagementService.setModalState({state:i.GeoObjectTypeModalStates.manageAttributes,attribute:"",termOption:""})},e.prototype.onModalStateChange=function(e){this.modalState=e},e.prototype.update=function(){var e=this;this.registryService.updateGeoObjectType(this.editGeoObjectType).then((function(t){e.geoObjectTypeChange.emit(t),e.close()})).catch((function(t){e.error(t)}))},e.prototype.close=function(){this.bsModalRef.hide()},e.prototype.isValid=function(){return!0},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.HierarchyService),a.ɵɵdirectiveInject(c.BsModalRef),a.ɵɵdirectiveInject(c.BsModalRef),a.ɵɵdirectiveInject(c.BsModalService),a.ɵɵdirectiveInject(s.ModalStepIndicatorService),a.ɵɵdirectiveInject(l.GeoObjectTypeManagementService),a.ɵɵdirectiveInject(s.LocalizationService),a.ɵɵdirectiveInject(l.RegistryService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["geoobjecttype-input"]],inputs:{readOnly:"readOnly",geoObjectType:"geoObjectType",in:["setGeoObjectType","in"]},outputs:{geoObjectTypeChange:"geoObjectTypeChange"},decls:1,vars:1,consts:[["class","modal-body",4,"ngIf"],[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","modal-form",3,"ngSubmit",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,"heading"],["key","hierarchy.management.manage.editGeoObjectType.title"],[1,"row-holder"],[1,"label-holder"],["key","data.property.label.code"],[1,"holder"],[1,"text"],["type","text","name","code","disabled","","required","",3,"ngModel","ngModelChange"],["key","data.property.label.label",3,"disabled","value","valueChange"],["key","data.property.label.description",3,"disabled","value","valueChange"],["key","data.property.label.geometryType"],["name","geometryType","disabled","",3,"ngModel","ngModelChange"],["value","MULTIPOINT"],["key","georegistry.geometry.point"],["value","MULTILINE"],["key","georegistry.geometry.line"],["value","MULTIPOLYGON"],["key","georegistry.geometry.polygon"],["key","hierarchy.management.option.label.geometryEditable"],[3,"disable","value","localizeLabelKey","valueChange"],["key","attribute.organization.label"],["type","text","name","organization","disabled","","required","",3,"ngModel","ngModelChange"],["key","hierarchy.management.manage.attributes.label.displayAttributes"],[1,"panel","panel-default"],[1,"panel-body"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","full-width",3,"disabled","click"],["key","modal.button.manageAttributes"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"list-group-item"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["key","modal.button.submit"]],template:function(e,t){1&e&&a.ɵɵtemplate(0,S,3,2,"div",0),2&e&&a.ɵɵproperty("ngIf","MANAGE-GEO-OBJECT-TYPE"===t.modalState.state)},directives:[d.NgIf,p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,p.NgForm,m.LocalizeComponent,p.DefaultValueAccessor,p.RequiredValidator,p.NgControlStatus,p.NgModel,u.LocalizedInputComponent,g.LocalizedTextComponent,p.SelectControlValueAccessor,p.NgSelectOption,p.ɵangular_packages_forms_forms_x,f.BooleanFieldComponent,d.NgForOf],styles:[".btn.btn-primary.full-width[_ngcontent-%COMP%] {\n    margin: 0 auto;\n    display: block;\n    width: 100%;\n}\n\n\nli.list-group-item[_ngcontent-%COMP%] {\n    font-size: inherit;\n    color: grey;\n}\nli.list-group-item[_ngcontent-%COMP%]:hover {\n    cursor: default;\n    background: white;\n}"]}),e}();t.GeoObjectTypeInputComponent=C},596:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageAttributesModalComponent=void 0;n(0),n(30),n(30);var r=n(37),o=n(334),i=n(174),a=(n(15),n(546)),l=(n(545),n(0)),c=n(545),s=n(30),d=n(15),p=n(1),m=n(27),u=n(44),g=n(28);function f(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",3),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.message)}}function h(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"a",29),l.ɵɵlistener("click",(function(e){l.ɵɵrestoreView(n);var t=l.ɵɵnextContext().$implicit;return l.ɵɵnextContext(2).editAttribute(t,e)})),l.ɵɵelementEnd()}}function v(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"a",30),l.ɵɵlistener("click",(function(e){l.ɵɵrestoreView(n);var t=l.ɵɵnextContext().$implicit;return l.ɵɵnextContext(2).removeAttributeType(t,e)})),l.ɵɵelementEnd()}}function b(e,t){if(1&e&&(l.ɵɵelementStart(0,"tr"),l.ɵɵelementStart(1,"td"),l.ɵɵtext(2),l.ɵɵelementEnd(),l.ɵɵelementStart(3,"td",26),l.ɵɵtemplate(4,h,1,0,"a",27),l.ɵɵtemplate(5,v,1,0,"a",28),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=t.$implicit;l.ɵɵadvance(2),l.ɵɵtextInterpolate(n.label.localizedValue),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",!n.isDefault&&"keyName"!==n.code),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",!n.isDefault&&"keyName"!==n.code)}}function y(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"form",4,5),l.ɵɵlistener("ngSubmit",(function(){return l.ɵɵrestoreView(n),l.ɵɵreference(1).valid})),l.ɵɵelementStart(2,"div",6),l.ɵɵelementStart(3,"h1"),l.ɵɵelement(4,"localize",7),l.ɵɵtext(5),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(6,"fieldset"),l.ɵɵelementStart(7,"div"),l.ɵɵelementStart(8,"div",8),l.ɵɵelementStart(9,"label"),l.ɵɵelement(10,"localize",9),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(11,"div",10),l.ɵɵelementStart(12,"div",11),l.ɵɵelementStart(13,"table",12),l.ɵɵelementStart(14,"thead"),l.ɵɵelementStart(15,"tr"),l.ɵɵelementStart(16,"th"),l.ɵɵelement(17,"localize",13),l.ɵɵelementEnd(),l.ɵɵelementStart(18,"th",14),l.ɵɵelement(19,"localize",15),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(20,"tbody"),l.ɵɵtemplate(21,b,6,3,"tr",16),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(22,"div",17),l.ɵɵelement(23,"div",8),l.ɵɵelementStart(24,"div",18),l.ɵɵelementStart(25,"i",19),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().defineAttributeModal()})),l.ɵɵelement(26,"localize",20),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(27,"div",21),l.ɵɵelementStart(28,"div",22),l.ɵɵelementStart(29,"div",23),l.ɵɵelementStart(30,"button",24),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().close()})),l.ɵɵelement(31,"localize",25),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var r=l.ɵɵnextContext();l.ɵɵadvance(5),l.ɵɵtextInterpolate1(" ",r.geoObjectType.label.localizedValue,""),l.ɵɵadvance(16),l.ɵɵproperty("ngForOf",r.geoObjectType.attributes)}}var S=function(){function e(e,t,n,r,o,i,l,c){this.hierarchyService=e,this.bsModalRef=t,this.confirmBsModalRef=n,this.modalService=r,this.localizeService=o,this.modalStepIndicatorService=i,this.geoObjectTypeManagementService=l,this.registryService=c,this.message=null,this.modalStepConfig={steps:[{label:this.localizeService.decode("modal.step.indicator.manage.geoobjecttype"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.attributes"),active:!0,enabled:!0}]},this.modalState={state:a.GeoObjectTypeModalStates.manageAttributes,attribute:this.attribute,termOption:""}}return e.prototype.ngOnInit=function(){this.onDeleteAttribute=new r.Subject,this.modalStepIndicatorService.setStepConfig(this.modalStepConfig)},e.prototype.ngOnDestroy=function(){this.onDeleteAttribute.unsubscribe()},e.prototype.defineAttributeModal=function(){this.geoObjectTypeManagementService.setModalState({state:a.GeoObjectTypeModalStates.defineAttribute,attribute:"",termOption:""})},e.prototype.editAttribute=function(e,t){this.geoObjectTypeManagementService.setModalState({state:a.GeoObjectTypeModalStates.editAttribute,attribute:e,termOption:""})},e.prototype.removeAttributeType=function(e,t){var n=this;this.confirmBsModalRef=this.modalService.show(i.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.confirmBsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+"["+e.label.localizedValue+"]",this.confirmBsModalRef.content.data={attributeType:e,geoObjectType:this.geoObjectType},this.confirmBsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.confirmBsModalRef.content.type=o.ModalTypes.danger,this.confirmBsModalRef.content.onConfirm.subscribe((function(e){n.deleteAttributeType(e.geoObjectType.code,e.attributeType)}))},e.prototype.deleteAttributeType=function(e,t){var n=this;this.registryService.deleteAttributeType(e,t.code).then((function(e){n.onDeleteAttribute.next(e),e&&n.geoObjectType.attributes.splice(n.geoObjectType.attributes.indexOf(t),1)})).catch((function(e){n.error(e)}))},e.prototype.close=function(){this.geoObjectTypeManagementService.setModalState({state:a.GeoObjectTypeModalStates.manageGeoObjectType,attribute:this.attribute,termOption:""})},e.prototype.error=function(e){this.message=i.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(c.HierarchyService),l.ɵɵdirectiveInject(s.BsModalRef),l.ɵɵdirectiveInject(s.BsModalRef),l.ɵɵdirectiveInject(s.BsModalService),l.ɵɵdirectiveInject(d.LocalizationService),l.ɵɵdirectiveInject(d.ModalStepIndicatorService),l.ɵɵdirectiveInject(c.GeoObjectTypeManagementService),l.ɵɵdirectiveInject(c.RegistryService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["manage-attributes-modal"]],inputs:{geoObjectType:"geoObjectType",attribute:"attribute"},decls:3,vars:2,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","modal-form",3,"ngSubmit",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,"heading"],["key","hierarchy.management.manage.attributes.title"],[1,"label-holder"],["key","hierarchy.management.manage.attributes.label.displayAttributes"],[1,"holder","dataset-attr-holder"],[1,"table-responsive"],[1,"table"],["key","data.property.label.label"],[1,"button-column-header"],["key","data.property.label.actions"],[4,"ngFor","ngForOf"],[1,"row-holder"],[1,"holder"],["aria-hidden","true",1,"fa","fa-plus","clickable",2,"font-size","20px","margin","10px 0 10px 0",3,"click"],["key","modal.button.add"],[1,"row"],[1,"col-md-12"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.back"],[1,"button-column"],["class","fa fa-pencil ico-edit","title","<localize key='modal.button.edit'></localize>",3,"routerLink","click",4,"ngIf"],["class","fa fa-trash-o ico-remove","title","<localize key='modal.button.remove'></localize>",3,"routerLink","click",4,"ngIf"],["title","<localize key='modal.button.edit'></localize>",1,"fa","fa-pencil","ico-edit",3,"routerLink","click"],["title","<localize key='modal.button.remove'></localize>",1,"fa","fa-trash-o","ico-remove",3,"routerLink","click"]],template:function(e,t){1&e&&(l.ɵɵelementStart(0,"div",0),l.ɵɵtemplate(1,f,2,1,"div",1),l.ɵɵtemplate(2,y,32,2,"form",2),l.ɵɵelementEnd()),2&e&&(l.ɵɵadvance(1),l.ɵɵproperty("ngIf",null!=t.message),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.geoObjectType))},directives:[p.NgIf,m.ɵangular_packages_forms_forms_y,m.NgControlStatusGroup,m.NgForm,u.LocalizeComponent,p.NgForOf,g.RouterLinkWithHref],styles:["li.list-group-item[_ngcontent-%COMP%] {\n    font-size: inherit;\n    color: grey;\n}\n\n.button-column[_ngcontent-%COMP%] {\n    text-align: right;\n}\n.button-column[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    font-size: 25px;\n    \n}\n\n\n.button-column[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    font-size: inherit;\n}\n\n\nth.button-column-header[_ngcontent-%COMP%]{\n    text-align: right;\n}"]}),e}();t.ManageAttributesModalComponent=S},597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefineAttributeModalContentComponent=void 0;n(0),n(30);var r=n(174),o=(n(15),n(546)),i=(n(545),n(551)),a=n(0),l=n(30),c=n(15),s=n(545),d=n(27),p=n(1),m=n(44),u=n(551);function g(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",24),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}var f=function(e){return{active:e}},h=function(){function e(e,t,n,r,i){this.bsModalRef=e,this.modalStepIndicatorService=t,this.geoObjectTypeManagementService=n,this.localizeService=r,this.registryService=i,this.message=null,this.newAttribute=null,this.modalStepConfig={steps:[{label:this.localizeService.decode("modal.step.indicator.manage.geoobjecttype"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.attributes"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.create.attribute"),active:!0,enabled:!0}]},this.modalState={state:o.GeoObjectTypeModalStates.defineAttribute,attribute:"",termOption:""}}return e.prototype.ngOnInit=function(){this.setAttribute("character"),this.modalStepIndicatorService.setStepConfig(this.modalStepConfig)},e.prototype.ngAfterViewInit=function(){this.attributeInputComponent&&this.attributeInputComponent.animate()},e.prototype.ngOnDestroy=function(){},e.prototype.handleOnSubmit=function(){var e=this;this.registryService.addAttributeType(this.geoObjectType.code,this.newAttribute).then((function(t){e.geoObjectType.attributes.push(t),e.geoObjectTypeManagementService.setModalState({state:o.GeoObjectTypeModalStates.manageAttributes,attribute:"",termOption:""})})).catch((function(t){e.error(t)}))},e.prototype.setAttribute=function(e){this.newAttribute="term"===e?new o.AttributeTerm("",e,this.localizeService.create(),this.localizeService.create(),!1,!1,!1,!0):"float"===e?new o.AttributeDecimal("",e,this.localizeService.create(),this.localizeService.create(),!1,!1,!1,!0):new o.Attribute("",e,this.localizeService.create(),this.localizeService.create(),!1,!1,!1,!0)},e.prototype.isFormValid=function(){var e=!1;return this.attributeInputComponent&&(e=this.attributeInputComponent.isValid()),!!e},e.prototype.cancel=function(){this.geoObjectTypeManagementService.setModalState({state:o.GeoObjectTypeModalStates.manageAttributes,attribute:"",termOption:""})},e.prototype.error=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.BsModalRef),a.ɵɵdirectiveInject(c.ModalStepIndicatorService),a.ɵɵdirectiveInject(s.GeoObjectTypeManagementService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(s.RegistryService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["define-attribute-modal-content"]],viewQuery:function(e,t){var n;(1&e&&a.ɵɵviewQuery(i.AttributeInputComponent,!0),2&e)&&(a.ɵɵqueryRefresh(n=a.ɵɵloadQuery())&&(t.attributeInputComponent=n.first))},inputs:{geoObjectType:"geoObjectType"},decls:33,vars:24,consts:[[1,"modal-body"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,""],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading"],["key","hierarchy.management.define.attribute.title"],[1,"row"],[1,"col-md-12",2,"margin-bottom","20px"],[1,"btn-group","define-attribute-btns"],[1,"btn","full-width-radio-button",3,"ngClass","click"],["key","data.type.label.text"],["key","data.type.label.integer"],["key","data.type.label.float"],["key","data.type.label.date"],["key","data.type.label.boolean"],["key","data.type.label.term"],[3,"disableCodeField","excludeDescription","isDecimal","attribute","attributeChange"],[1,"col-md-12"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["key","modal.button.submit"],["role","alert",1,"alert","alert-danger"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵelementStart(1,"form",1,2),a.ɵɵlistener("ngSubmit",(function(){return t.handleOnSubmit()})),a.ɵɵelementStart(3,"div",3),a.ɵɵelementStart(4,"div",3),a.ɵɵtemplate(5,g,2,1,"div",4),a.ɵɵelementStart(6,"div",5),a.ɵɵelementStart(7,"h1"),a.ɵɵelement(8,"localize",6),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(9,"div",7),a.ɵɵelementStart(10,"div",8),a.ɵɵelementStart(11,"div",9),a.ɵɵelementStart(12,"label",10),a.ɵɵlistener("click",(function(){return t.setAttribute("character")})),a.ɵɵelement(13,"localize",11),a.ɵɵelementEnd(),a.ɵɵelementStart(14,"label",10),a.ɵɵlistener("click",(function(){return t.setAttribute("integer")})),a.ɵɵelement(15,"localize",12),a.ɵɵelementEnd(),a.ɵɵelementStart(16,"label",10),a.ɵɵlistener("click",(function(){return t.setAttribute("float")})),a.ɵɵelement(17,"localize",13),a.ɵɵelementEnd(),a.ɵɵelementStart(18,"label",10),a.ɵɵlistener("click",(function(){return t.setAttribute("date")})),a.ɵɵelement(19,"localize",14),a.ɵɵelementEnd(),a.ɵɵelementStart(20,"label",10),a.ɵɵlistener("click",(function(){return t.setAttribute("boolean")})),a.ɵɵelement(21,"localize",15),a.ɵɵelementEnd(),a.ɵɵelementStart(22,"label",10),a.ɵɵlistener("click",(function(){return t.setAttribute("term")})),a.ɵɵelement(23,"localize",16),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(24,"fieldset"),a.ɵɵelementStart(25,"attribute-input",17),a.ɵɵlistener("attributeChange",(function(e){return t.newAttribute=e})),a.ɵɵelementEnd(),a.ɵɵelementStart(26,"div",7),a.ɵɵelementStart(27,"div",18),a.ɵɵelementStart(28,"div",19),a.ɵɵelementStart(29,"button",20),a.ɵɵlistener("click",(function(){return t.cancel()})),a.ɵɵelement(30,"localize",21),a.ɵɵelementEnd(),a.ɵɵelementStart(31,"button",22),a.ɵɵelement(32,"localize",23),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(5),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(7),a.ɵɵproperty("ngClass",a.ɵɵpureFunction1(12,f,"character"===t.newAttribute.type)),a.ɵɵadvance(2),a.ɵɵproperty("ngClass",a.ɵɵpureFunction1(14,f,"integer"===t.newAttribute.type)),a.ɵɵadvance(2),a.ɵɵproperty("ngClass",a.ɵɵpureFunction1(16,f,"float"===t.newAttribute.type)),a.ɵɵadvance(2),a.ɵɵproperty("ngClass",a.ɵɵpureFunction1(18,f,"date"===t.newAttribute.type)),a.ɵɵadvance(2),a.ɵɵproperty("ngClass",a.ɵɵpureFunction1(20,f,"boolean"===t.newAttribute.type)),a.ɵɵadvance(2),a.ɵɵproperty("ngClass",a.ɵɵpureFunction1(22,f,"term"===t.newAttribute.type)),a.ɵɵadvance(3),a.ɵɵproperty("disableCodeField",!1)("excludeDescription",!1)("isDecimal","float"===t.newAttribute.type)("attribute",t.newAttribute),a.ɵɵadvance(6),a.ɵɵproperty("disabled",!t.isFormValid()))},directives:[d.ɵangular_packages_forms_forms_y,d.NgControlStatusGroup,d.NgForm,p.NgIf,m.LocalizeComponent,p.NgClass,u.AttributeInputComponent],styles:[".btn-group.define-attribute-btns[_ngcontent-%COMP%] {\n    \n    margin: 0 auto;\n    display: block;\n    \n}\n.btn-group.define-attribute-btns[_ngcontent-%COMP%]   .btn.full-width-radio-button[_ngcontent-%COMP%] {\n    width: 16.5%;\n    background: white; \n    background: var(--theme-button-color);\n    \n    color: #767676; \n    color: var(--theme-button-text-color);  \n    border-color: var(--theme-button-color-border);\n}\n.btn-group.define-attribute-btns[_ngcontent-%COMP%]   .btn.full-width-radio-button[_ngcontent-%COMP%]:active{\n    background: #edf4e8; \n    background: var(--theme-submit-button-color-light) !important;\n}\n.btn-group.define-attribute-btns[_ngcontent-%COMP%]   .btn.full-width-radio-button.active[_ngcontent-%COMP%], .btn-group.define-attribute-btns[_ngcontent-%COMP%]   .btn.full-width-radio-button[_ngcontent-%COMP%]:focus{\n    color: white !important; \n\n    background-color: #6BA542 !important; \n    background-color: var(--theme-button-color-hover) !important;\n    box-shadow: none;\n}"]}),e}();t.DefineAttributeModalContentComponent=h},598:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectAttributeCodeValidator=void 0;n(0);var r=n(27),o=n(0);var i=function(){function e(){this.validator=function(e){if(e.value)return-1===e.value.indexOf(" ")?null:{geoObjectAttributeCode:{valid:!1}}}}return e.prototype.validate=function(e){return this.validator(e)},e.ɵfac=function(t){return new(t||e)},e.ɵdir=o.ɵɵdefineDirective({type:e,selectors:[["","geoObjectAttributeCode","","ngModel",""]],features:[o.ɵɵProvidersFeature([{provide:r.NG_VALIDATORS,useExisting:e,multi:!0}])]}),e}();t.GeoObjectAttributeCodeValidator=i},599:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditAttributeModalContentComponent=void 0;n(0),n(30);var r=n(546),o=n(174),i=(n(15),n(545),n(551)),a=n(0),l=n(30),c=n(15),s=n(545),d=n(27),p=n(1),m=n(44),u=n(551),g=n(600);function f(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",17),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function h(e,t){1&e&&(a.ɵɵelementStart(0,"h4",18),a.ɵɵelement(1,"localize",19),a.ɵɵtext(2,": "),a.ɵɵelement(3,"localize",20),a.ɵɵelementEnd())}function v(e,t){1&e&&(a.ɵɵelementStart(0,"h4",18),a.ɵɵelement(1,"localize",19),a.ɵɵtext(2,": "),a.ɵɵelement(3,"localize",21),a.ɵɵelementEnd())}function b(e,t){1&e&&(a.ɵɵelementStart(0,"h4",18),a.ɵɵelement(1,"localize",19),a.ɵɵtext(2,": "),a.ɵɵelement(3,"localize",22),a.ɵɵelementEnd())}function y(e,t){1&e&&(a.ɵɵelementStart(0,"h4",18),a.ɵɵelement(1,"localize",19),a.ɵɵtext(2,": "),a.ɵɵelement(3,"localize",23),a.ɵɵelementEnd())}function S(e,t){1&e&&(a.ɵɵelementStart(0,"h4",18),a.ɵɵelement(1,"localize",19),a.ɵɵtext(2,": "),a.ɵɵelement(3,"localize",24),a.ɵɵelementEnd())}function C(e,t){1&e&&(a.ɵɵelementStart(0,"h4",18),a.ɵɵelement(1,"localize",19),a.ɵɵtext(2,": "),a.ɵɵelement(3,"localize",25),a.ɵɵelementEnd())}function E(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"term-option-widget",26),a.ɵɵlistener("attributeChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().attribute=e})),a.ɵɵelementEnd()}if(2&e){var r=a.ɵɵnextContext();a.ɵɵproperty("attribute",r.attribute)("geoObjectType",r.geoObjectType)}}var x=function(){function e(e,t,n,o,i){this.bsModalRef=e,this.modalStepIndicatorService=t,this.geoObjectTypeManagementService=n,this.localizeService=o,this.registryService=i,this.message=null,this.modalState={state:r.GeoObjectTypeModalStates.editAttribute,attribute:this.attribute,termOption:""},this.modalStepConfig={steps:[{label:this.localizeService.decode("modal.step.indicator.manage.geoobjecttype"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.attributes"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.edit.attribute"),active:!0,enabled:!0}]}}return e.prototype.ngOnInit=function(){this.modalStepIndicatorService.setStepConfig(this.modalStepConfig)},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnDestroy=function(){},e.prototype.handleOnSubmit=function(){var e=this;this.registryService.updateAttributeType(this.geoObjectType.code,this.attribute).then((function(t){for(var n=0;n<e.geoObjectType.attributes.length;n++){var o=e.geoObjectType.attributes[n];if(o.code===t.code){Object.assign(o,t);break}}e.geoObjectTypeManagementService.setModalState({state:r.GeoObjectTypeModalStates.manageAttributes,attribute:"",termOption:""})})).catch((function(t){e.error(t)}))},e.prototype.isFormValid=function(){return!0},e.prototype.cancel=function(){this.geoObjectTypeManagementService.setModalState({state:r.GeoObjectTypeModalStates.manageAttributes,attribute:"",termOption:""})},e.prototype.back=function(){this.geoObjectTypeManagementService.setModalState({state:r.GeoObjectTypeModalStates.manageAttributes,attribute:"",termOption:""})},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.BsModalRef),a.ɵɵdirectiveInject(c.ModalStepIndicatorService),a.ɵɵdirectiveInject(s.GeoObjectTypeManagementService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(s.RegistryService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["edit-attribute-modal-content"]],viewQuery:function(e,t){var n;(1&e&&a.ɵɵviewQuery(i.AttributeInputComponent,!0),2&e)&&(a.ɵɵqueryRefresh(n=a.ɵɵloadQuery())&&(t.attributeInputComponent=n.first))},inputs:{geoObjectType:"geoObjectType",attribute:"attribute"},decls:26,vars:14,consts:[[1,"modal-body"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],[1,""],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading"],["key","hierarchy.management.edit.attribute.title"],["class","sub-title",4,"ngIf"],[3,"disableCodeField","excludeDescription","isDecimal","attribute","attributeChange"],[3,"attribute","geoObjectType","attributeChange",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["key","modal.button.submit"],["role","alert",1,"alert","alert-danger"],[1,"sub-title"],["key","hierarchy.management.edit.attribute.subtitle"],["key","data.type.label.text"],["key","data.type.label.integer"],["key","data.type.label.float"],["key","data.type.label.boolean"],["key","data.type.label.date"],["key","data.type.label.term"],[3,"attribute","geoObjectType","attributeChange"]],template:function(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",0),a.ɵɵelementStart(1,"form",1,2),a.ɵɵlistener("ngSubmit",(function(){return a.ɵɵrestoreView(n),a.ɵɵreference(2).valid&&t.handleOnSubmit()})),a.ɵɵelementStart(3,"div",3),a.ɵɵelementStart(4,"div",3),a.ɵɵtemplate(5,f,2,1,"div",4),a.ɵɵelementStart(6,"div",5),a.ɵɵelementStart(7,"h1"),a.ɵɵelement(8,"localize",6),a.ɵɵtext(9),a.ɵɵelementEnd(),a.ɵɵtemplate(10,h,4,0,"h4",7),a.ɵɵtemplate(11,v,4,0,"h4",7),a.ɵɵtemplate(12,b,4,0,"h4",7),a.ɵɵtemplate(13,y,4,0,"h4",7),a.ɵɵtemplate(14,S,4,0,"h4",7),a.ɵɵtemplate(15,C,4,0,"h4",7),a.ɵɵelementEnd(),a.ɵɵelementStart(16,"fieldset"),a.ɵɵelementStart(17,"attribute-input",8),a.ɵɵlistener("attributeChange",(function(e){return t.attribute=e})),a.ɵɵelementEnd(),a.ɵɵtemplate(18,E,1,2,"term-option-widget",9),a.ɵɵelementStart(19,"div",10),a.ɵɵelementStart(20,"div",11),a.ɵɵelementStart(21,"div",12),a.ɵɵelementStart(22,"button",13),a.ɵɵlistener("click",(function(){return t.cancel()})),a.ɵɵelement(23,"localize",14),a.ɵɵelementEnd(),a.ɵɵelementStart(24,"button",15),a.ɵɵelement(25,"localize",16),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}2&e&&(a.ɵɵadvance(5),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(4),a.ɵɵtextInterpolate1(": ",t.attribute.label.localizedValue," "),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","character"===t.attribute.type),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","integer"===t.attribute.type),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","float"===t.attribute.type),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","boolean"===t.attribute.type),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","date"===t.attribute.type),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","term"===t.attribute.type),a.ɵɵadvance(2),a.ɵɵproperty("disableCodeField",!0)("excludeDescription","term"===t.attribute.type)("isDecimal","float"===t.attribute.type)("attribute",t.attribute),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","term"===t.attribute.type&&t.isFormValid()),a.ɵɵadvance(6),a.ɵɵproperty("disabled",!t.isFormValid()))},directives:[d.ɵangular_packages_forms_forms_y,d.NgControlStatusGroup,d.NgForm,p.NgIf,m.LocalizeComponent,u.AttributeInputComponent,g.TermOptionWidgetComponent],styles:['input[type="text"][_ngcontent-%COMP%] {\n    margin: 2px 0 2px 0 !important;\n    float: none !important;\n}\n\nlabel[_ngcontent-%COMP%] {\n    color: #999;\n    font-weight: bold;\n}\n\n.sub-title[_ngcontent-%COMP%] {\n    color: grey;\n}\n\n.btn-group.define-attribute-btns[_ngcontent-%COMP%] {\n    \n    margin: 0 auto;\n    display: block;\n    \n}\n.btn-group.define-attribute-btns[_ngcontent-%COMP%]   .btn.full-width-radio-button[_ngcontent-%COMP%] {\n    width: 16.5%;\n    background: white; \n    background: var(--theme-button-color);\n    \n    color: #767676; \n    color: var(--theme-button-text-color);  \n    border-color: var(--theme-button-color-border);\n}\n.btn-group.define-attribute-btns[_ngcontent-%COMP%]   .btn.full-width-radio-button[_ngcontent-%COMP%]:active{\n    background: #edf4e8; \n    background: var(--theme-submit-button-color-light) !important;\n}\n.btn-group.define-attribute-btns[_ngcontent-%COMP%]   .btn.full-width-radio-button.active[_ngcontent-%COMP%], .btn-group.define-attribute-btns[_ngcontent-%COMP%]   .btn.full-width-radio-button[_ngcontent-%COMP%]:focus{\n    color: white !important; \n\n    background-color: #6BA542 !important; \n    background-color: var(--theme-button-color-hover) !important;\n    box-shadow: none;\n}']}),e}();t.EditAttributeModalContentComponent=x},600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TermOptionWidgetComponent=void 0;var r=n(0),o=n(7),i=(n(30),n(546)),a=(n(550),n(549),n(0)),l=n(550),c=n(30),s=n(549),d=n(44),p=n(1);function m(e,t){if(1&e&&(a.ɵɵelementStart(0,"li",10),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.label.localizedValue)}}var u=function(){function e(e,t,n,o){this.hierarchyService=e,this.bsModalRef=t,this.cdr=n,this.geoObjectTypeManagementService=o,this.attributeChange=new r.EventEmitter,this.message=null,this.state="none",this.modalState={state:i.GeoObjectTypeModalStates.manageTermOption,attribute:this.attribute,termOption:""}}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.state="show",this.cdr.detectChanges()},e.prototype.ngOnDestroy=function(){},e.prototype.handleOnSubmit=function(){},e.prototype.animate=function(){this.state="none"},e.prototype.onAnimationDone=function(e){this.state="show"},e.prototype.openAddTermOptionForm=function(){this.geoObjectTypeManagementService.setModalState({state:i.GeoObjectTypeModalStates.manageTermOption,attribute:this.attribute,termOption:""})},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.HierarchyService),a.ɵɵdirectiveInject(c.BsModalRef),a.ɵɵdirectiveInject(a.ChangeDetectorRef),a.ɵɵdirectiveInject(s.GeoObjectTypeManagementService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["term-option-widget"]],inputs:{geoObjectType:"geoObjectType",attribute:"attribute"},outputs:{attributeChange:"attributeChange"},decls:12,vars:2,consts:[[1,"row-holder"],[1,"label-holder"],["key","hierarchy.management.manage.attributes.label.displayTerms"],[1,"holder"],[1,"panel","panel-default"],[1,"panel-body"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","full-width",3,"click"],["key","modal.button.manageTermOptions"],[1,"list-group-item"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵlistener("@toggleInputs.done",(function(e){return t.onAnimationDone(e)})),a.ɵɵelementStart(1,"div"),a.ɵɵelementStart(2,"div",1),a.ɵɵelementStart(3,"label"),a.ɵɵelement(4,"localize",2),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"div",3),a.ɵɵelementStart(6,"div",4),a.ɵɵelementStart(7,"div",5),a.ɵɵelementStart(8,"ul",6),a.ɵɵtemplate(9,m,2,1,"li",7),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"button",8),a.ɵɵlistener("click",(function(){return t.openAddTermOptionForm()})),a.ɵɵelement(11,"localize",9),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵproperty("@toggleInputs",t.state),a.ɵɵadvance(9),a.ɵɵproperty("ngForOf",t.attribute.rootTerm.children))},directives:[d.LocalizeComponent,p.NgForOf],styles:['input[type="text"][_ngcontent-%COMP%] {\n    margin: 2px 0 2px 0 !important;\n    float: none !important;\n}\n\nbutton[_ngcontent-%COMP%] {\n    margin-top: 5px;\n    float: right;\n}\n\n\n\n.btn.btn-primary.full-width[_ngcontent-%COMP%] {\n    margin: 0 auto;\n    display: block;\n    width: 100%;\n}\n\nlabel[_ngcontent-%COMP%] {\n    color: #999;\n    font-weight: bold;\n}\n\n\nli.list-group-item[_ngcontent-%COMP%] {\n    font-size: inherit;\n    color: grey;\n}\nli.list-group-item[_ngcontent-%COMP%]:hover {\n    cursor: default;\n    background: white;\n}'],data:{animation:[o.trigger("toggleInputs",[o.state("none, void",o.style({opacity:0})),o.state("show",o.style({opacity:1})),o.transition("none => show",o.animate("300ms")),o.transition("show => none",o.animate("100ms"))]),o.trigger("openClose",[o.transition(":enter",[o.style({opacity:0}),o.animate("500ms",o.style({opacity:1}))]),o.transition(":leave",[o.style({opacity:1}),o.animate("0ms",o.style({opacity:0}))])])]}}),e}();t.TermOptionWidgetComponent=u},601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageTermOptionsComponent=void 0;var r=n(0),o=n(7),i=(n(30),n(30),n(334)),a=n(174),l=(n(15),n(545),n(546)),c=n(0),s=n(30),d=n(545),p=n(15),m=n(27),u=n(1),g=n(44),f=n(28);function h(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",24),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.message)}}function v(e,t){if(1&e&&(c.ɵɵelementStart(0,"th"),c.ɵɵelement(1,"localize",25),c.ɵɵtext(2),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵadvance(2),c.ɵɵtextInterpolate1(" (",n.locale,") ")}}function b(e,t){if(1&e&&(c.ɵɵelementStart(0,"td"),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.value)}}function y(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td"),c.ɵɵtext(2),c.ɵɵelementEnd(),c.ɵɵtemplate(3,b,2,1,"td",14),c.ɵɵelementStart(4,"td",18),c.ɵɵelementStart(5,"a",26),c.ɵɵlistener("click",(function(e){c.ɵɵrestoreView(n);var r=t.$implicit;return c.ɵɵnextContext().editTermOption(r,e)})),c.ɵɵelementEnd(),c.ɵɵelementStart(6,"a",27),c.ɵɵlistener("click",(function(e){c.ɵɵrestoreView(n);var r=t.$implicit;return c.ɵɵnextContext().removeTermOption(r,e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=t.$implicit;c.ɵɵadvance(2),c.ɵɵtextInterpolate(r.code),c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",r.label.localeValues)}}function S(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"td"),c.ɵɵelementStart(1,"input",28),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.value=e})),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=c.ɵɵnextContext();c.ɵɵadvance(1),c.ɵɵproperty("ngModel",r.value)("name","termOptionLabel-"+r.locale)("required",!!o.termOption.code||null)}}var C=function(){function e(e,t,n,o,i,a,l){this.bsModalRef=e,this.cdr=t,this.geoObjectTypeManagementService=n,this.modalService=o,this.localizeService=i,this.modalStepIndicatorService=a,this.registryService=l,this.attributeChange=new r.EventEmitter,this.message=null,this.state="none",this.enableTermOptionForm=!1,this.modalStepConfig={steps:[{label:this.localizeService.decode("modal.step.indicator.manage.geoobjecttype"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.attributes"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.edit.attribute"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.term.options"),active:!0,enabled:!0}]}}return e.prototype.ngOnInit=function(){this.modalStepIndicatorService.setStepConfig(this.modalStepConfig),this.termOption=new l.Term("",this.localizeService.create(),this.localizeService.create())},e.prototype.ngAfterViewInit=function(){this.state="show",this.cdr.detectChanges()},e.prototype.ngOnDestroy=function(){},e.prototype.handleOnSubmit=function(){},e.prototype.animate=function(){this.state="none"},e.prototype.onAnimationDone=function(e){this.state="show"},e.prototype.isValid=function(){if(this.termOption.code&&this.termOption.code.length>0){if(-1!==this.termOption.code.indexOf(" "))return!1;for(var e=0;e<this.termOption.label.localeValues.length;e++)if(0===this.termOption.label.localeValues[e].value.replace(/\s/g,"").length)return!1;return!0}return this.termOption.code&&this.termOption.code.indexOf(" "),!1},e.prototype.addTermOption=function(){var e=this;this.registryService.addAttributeTermTypeOption(this.attribute.rootTerm.code,this.termOption).then((function(t){e.attribute.rootTerm.children.push(t),e.attributeChange.emit(e.attribute),e.clearTermOption(),e.enableTermOptionForm=!1})).catch((function(t){e.error(t)}))},e.prototype.deleteTermOption=function(e){var t=this;this.registryService.deleteAttributeTermTypeOption(this.attribute.rootTerm.code,e.code).then((function(n){-1!==t.attribute.rootTerm.children.indexOf(e)&&t.attribute.rootTerm.children.splice(t.attribute.rootTerm.children.indexOf(e),1),t.attributeChange.emit(t.attribute),t.clearTermOption()})).catch((function(e){t.error(e)}))},e.prototype.removeTermOption=function(e){var t=this;this.bsModalRef=this.modalService.show(a.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+"["+e.label+"]",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.type=i.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(n){t.deleteTermOption(e)}))},e.prototype.editTermOption=function(e){var t={state:l.GeoObjectTypeModalStates.editTermOption,attribute:this.attribute,termOption:JSON.parse(JSON.stringify(e))};this.geoObjectTypeManagementService.setModalState(t)},e.prototype.clearTermOption=function(){this.termOption.code="",this.termOption.label=this.localizeService.create(),this.termOption.description=this.localizeService.create()},e.prototype.cancelTermOption=function(){this.clearTermOption(),this.enableTermOptionForm=!1},e.prototype.openAddTermOptionForm=function(){this.enableTermOptionForm=!0},e.prototype.close=function(){this.geoObjectTypeManagementService.setModalState({state:l.GeoObjectTypeModalStates.editAttribute,attribute:this.attribute,termOption:""})},e.prototype.error=function(e){this.message=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(c.ɵɵdirectiveInject(s.BsModalRef),c.ɵɵdirectiveInject(c.ChangeDetectorRef),c.ɵɵdirectiveInject(d.GeoObjectTypeManagementService),c.ɵɵdirectiveInject(s.BsModalService),c.ɵɵdirectiveInject(p.LocalizationService),c.ɵɵdirectiveInject(p.ModalStepIndicatorService),c.ɵɵdirectiveInject(d.RegistryService))},e.ɵcmp=c.ɵɵdefineComponent({type:e,selectors:[["manage-term-options"]],inputs:{geoObjectType:"geoObjectType",attribute:"attribute"},outputs:{attributeChange:"attributeChange"},decls:40,vars:10,consts:[[1,"modal-body"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"heading"],["key","hierarchy.management.edit.term.options.title"],[1,"row-holder"],[1,"label-holder"],["key","term.option.input.label.existingTypes"],[1,"holder"],[1,"text"],[1,"table-responsive"],[1,"table"],["key","data.property.label.code"],[4,"ngFor","ngForOf"],[1,"button-column-header"],["key","data.property.label.actions"],["type","text","name","termOptionCode",3,"ngModel","required","ngModelChange"],[1,"button-column"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["key","modal.button.add"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.done"],["role","alert",1,"alert","alert-danger"],["key","data.property.label.label"],[1,"fa","fa-pencil","ico-edit",3,"routerLink","click"],[1,"fa","fa-trash-o","ico-remove",3,"routerLink","click"],["type","text",3,"ngModel","name","required","ngModelChange"]],template:function(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",0),c.ɵɵelementStart(1,"form",1,2),c.ɵɵlistener("ngSubmit",(function(){return c.ɵɵrestoreView(n),c.ɵɵreference(2).valid})),c.ɵɵelementStart(3,"fieldset"),c.ɵɵtemplate(4,h,2,1,"div",3),c.ɵɵelementStart(5,"div",4),c.ɵɵelementStart(6,"h1"),c.ɵɵelementStart(7,"localize",5),c.ɵɵtext(8),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(9,"div",6),c.ɵɵlistener("@toggleInputs.done",(function(e){return t.onAnimationDone(e)})),c.ɵɵelementStart(10,"div"),c.ɵɵelementStart(11,"div",7),c.ɵɵelementStart(12,"label"),c.ɵɵelement(13,"localize",8),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(14,"div",9),c.ɵɵelementStart(15,"span",10),c.ɵɵelementStart(16,"div",11),c.ɵɵelementStart(17,"table",12),c.ɵɵelementStart(18,"thead"),c.ɵɵelementStart(19,"tr"),c.ɵɵelementStart(20,"th"),c.ɵɵelement(21,"localize",13),c.ɵɵelementEnd(),c.ɵɵtemplate(22,v,3,1,"th",14),c.ɵɵelementStart(23,"th",15),c.ɵɵelement(24,"localize",16),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(25,"tbody"),c.ɵɵtemplate(26,y,7,2,"tr",14),c.ɵɵelementStart(27,"tr"),c.ɵɵelementStart(28,"td"),c.ɵɵelementStart(29,"input",17),c.ɵɵlistener("ngModelChange",(function(e){return t.termOption.code=e})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵtemplate(30,S,2,3,"td",14),c.ɵɵelementStart(31,"td",18),c.ɵɵelementStart(32,"button",19),c.ɵɵlistener("click",(function(){return t.addTermOption()})),c.ɵɵelement(33,"localize",20),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(34,"div",6),c.ɵɵelement(35,"div",7),c.ɵɵelementStart(36,"div",9),c.ɵɵelementStart(37,"div",21),c.ɵɵelementStart(38,"button",22),c.ɵɵlistener("click",(function(){return t.close()})),c.ɵɵelement(39,"localize",23),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}2&e&&(c.ɵɵadvance(4),c.ɵɵproperty("ngIf",null!=t.message),c.ɵɵadvance(4),c.ɵɵtextInterpolate1(": ",t.attribute.label.localizedValue,""),c.ɵɵadvance(1),c.ɵɵproperty("@toggleInputs",t.state),c.ɵɵadvance(1),c.ɵɵproperty("@openClose",void 0),c.ɵɵadvance(12),c.ɵɵproperty("ngForOf",t.termOption.label.localeValues),c.ɵɵadvance(4),c.ɵɵproperty("ngForOf",t.attribute.rootTerm.children),c.ɵɵadvance(3),c.ɵɵproperty("ngModel",t.termOption.code)("required",!!t.termOption.label||null),c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",t.termOption.label.localeValues),c.ɵɵadvance(2),c.ɵɵproperty("disabled",!t.isValid()))},directives:[m.ɵangular_packages_forms_forms_y,m.NgControlStatusGroup,m.NgForm,u.NgIf,g.LocalizeComponent,u.NgForOf,m.DefaultValueAccessor,m.NgControlStatus,m.NgModel,m.RequiredValidator,f.RouterLinkWithHref],styles:[".button-column[_ngcontent-%COMP%] {\n    text-align: right;\n}\n.button-column[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n    font-size: 25px;\n    color:#bababa;\n}\n.button-column[_ngcontent-%COMP%]   .fa.ico-remove[_ngcontent-%COMP%]:hover{\n    color: red;\n}\n.button-column[_ngcontent-%COMP%]   .fa.ico-edit[_ngcontent-%COMP%]:hover{\n    color:#00bfff\n}\n.button-column[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    font-size: inherit;\n    height: 38px;\n}\n\n\nth.button-column-header[_ngcontent-%COMP%]{\n    text-align: right;\n}"],data:{animation:[o.trigger("toggleInputs",[o.state("none, void",o.style({opacity:0})),o.state("show",o.style({opacity:1})),o.transition("none => show",o.animate("300ms")),o.transition("show => none",o.animate("100ms"))]),o.trigger("openClose",[o.transition(":enter",[o.style({opacity:0}),o.animate("500ms",o.style({opacity:1}))]),o.transition(":leave",[o.style({opacity:1}),o.animate("0ms",o.style({opacity:0}))])])]}}),e}();t.ManageTermOptionsComponent=C},602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditTermOptionInputComponent=void 0;n(0);var r=n(7),o=(n(30),n(15),n(174)),i=n(546),a=(n(545),n(0)),l=n(30),c=n(15),s=n(545),d=n(1),p=n(27),m=n(44),u=n(553);function g(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",19),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}var f=function(){function e(e,t,n,r,o){this.bsModalRef=e,this.modalStepIndicatorService=t,this.geoObjectTypeManagementService=n,this.localizeService=r,this.registryService=o,this.message=null,this.modalState={state:i.GeoObjectTypeModalStates.editAttribute,attribute:this.attribute,termOption:""},this.modalStepConfig={steps:[{label:this.localizeService.decode("modal.step.indicator.manage.geoobjecttype"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.attributes"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.edit.attribute"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.manage.term.options"),active:!0,enabled:!1},{label:this.localizeService.decode("modal.step.indicator.edit.term.option"),active:!0,enabled:!0}]}}return e.prototype.ngOnInit=function(){this.modalStepIndicatorService.setStepConfig(this.modalStepConfig)},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnDestroy=function(){},e.prototype.handleOnSubmit=function(){var e=this;this.registryService.updateAttributeTermTypeOption(this.attribute.rootTerm.code,this.termOption).then((function(t){var n=e.attribute.rootTerm.children.findIndex((function(e){return e.code===t.code}));-1!==n&&(e.attribute.rootTerm.children[n]=t),e.geoObjectTypeManagementService.setModalState({state:i.GeoObjectTypeModalStates.manageTermOption,attribute:e.attribute,termOption:null})})).catch((function(t){e.error(t)}))},e.prototype.isFormValid=function(){return!0},e.prototype.cancel=function(){this.geoObjectTypeManagementService.setModalState({state:i.GeoObjectTypeModalStates.manageTermOption,attribute:this.attribute,termOption:null})},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.BsModalRef),a.ɵɵdirectiveInject(c.ModalStepIndicatorService),a.ɵɵdirectiveInject(s.GeoObjectTypeManagementService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(s.RegistryService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["edit-term-option-input"]],inputs:{geoObjectType:"geoObjectType",attribute:"attribute",termOption:"termOption"},decls:26,vars:5,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"modal-form",3,"ngSubmit"],["tForm","ngForm"],[1,""],[1,"heading"],["key","hierarchy.management.edit.term.option.title"],[1,"row-holder"],[1,"label-holder"],["key","data.property.label.code"],[1,"holder"],[1,"text"],["type","text","name","code",3,"disabled","ngModel","ngModelChange"],["key","data.property.label.label",3,"value","valueChange"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["key","modal.button.submit"],["role","alert",1,"alert","alert-danger"]],template:function(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,g,2,1,"div",1),a.ɵɵelementStart(2,"form",2,3),a.ɵɵlistener("ngSubmit",(function(){return a.ɵɵrestoreView(n),!a.ɵɵreference(3).invalid&&t.handleOnSubmit()})),a.ɵɵelementStart(4,"div",4),a.ɵɵelementStart(5,"div",4),a.ɵɵelementStart(6,"div",5),a.ɵɵelementStart(7,"h1"),a.ɵɵelement(8,"localize",6),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(9,"fieldset"),a.ɵɵelementStart(10,"div",7),a.ɵɵelementStart(11,"div",8),a.ɵɵelementStart(12,"label"),a.ɵɵelement(13,"localize",9),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(14,"div",10),a.ɵɵelementStart(15,"span",11),a.ɵɵelementStart(16,"input",12),a.ɵɵlistener("ngModelChange",(function(e){return t.termOption.code=e})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(17,"localized-input",13),a.ɵɵlistener("valueChange",(function(e){return t.termOption.label=e})),a.ɵɵelementEnd(),a.ɵɵelementStart(18,"div",7),a.ɵɵelement(19,"div",8),a.ɵɵelementStart(20,"div",10),a.ɵɵelementStart(21,"div",14),a.ɵɵelementStart(22,"button",15),a.ɵɵlistener("click",(function(){return t.cancel()})),a.ɵɵelement(23,"localize",16),a.ɵɵelementEnd(),a.ɵɵelementStart(24,"button",17),a.ɵɵelement(25,"localize",18),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=a.ɵɵreference(3);a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(15),a.ɵɵproperty("disabled",!0)("ngModel",t.termOption.code),a.ɵɵadvance(1),a.ɵɵproperty("value",t.termOption.label),a.ɵɵadvance(7),a.ɵɵproperty("disabled",r.invalid)}},directives:[d.NgIf,p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,p.NgForm,m.LocalizeComponent,p.DefaultValueAccessor,p.NgControlStatus,p.NgModel,u.LocalizedInputComponent],encapsulation:2,data:{animation:[r.trigger("openClose",[r.transition(":enter",[r.style({opacity:0}),r.animate("500ms",r.style({opacity:1}))]),r.transition(":leave",[r.style({opacity:1}),r.animate("0ms",r.style({opacity:0}))])])]}}),e}();t.EditTermOptionInputComponent=f},603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapefileModalComponent=void 0;n(0),n(30),n(30),n(28),n(15);var r=n(174),o=(n(545),n(0)),i=n(545),a=n(30),l=n(15),c=n(28),s=n(1),d=n(573),p=n(574),m=n(575),u=n(576);function g(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",3),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵtextInterpolate(n.message)}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"attributes-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",r.configuration)}}function h(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"location-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",r.configuration)}}function v(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"location-problem-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",r.configuration)}}function b(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"term-problem-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",r.configuration)}}function y(e,t){if(1&e&&(o.ɵɵelementStart(0,"div"),o.ɵɵtemplate(1,f,2,1,"div",2),o.ɵɵtemplate(2,h,2,1,"div",2),o.ɵɵtemplate(3,v,2,1,"div",2),o.ɵɵtemplate(4,b,2,1,"div",2),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("ngIf","MAP"===n.state),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","LOCATION"===n.state),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","LOCATION-PROBLEM"===n.state),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","TERM-PROBLEM"===n.state)}}var S=function(){function e(e,t,n,r,o){this.service=e,this.bsModalRef=t,this.modalService=n,this.localizeService=r,this.router=o,this.message=null,this.state="MAP"}return e.prototype.ngOnInit=function(){},e.prototype.onStateChange=function(e){"BACK"===e?this.handleBack():"NEXT"===e?this.handleNext():"CANCEL"===e&&this.handleCancel()},e.prototype.handleBack=function(){"LOCATION"===this.state&&(this.state="MAP")},e.prototype.handleNext=function(){"MAP"===this.state?this.configuration.postalCode?this.handleSubmit():this.state="LOCATION":"LOCATION"===this.state?this.handleSubmit():"LOCATION-PROBLEM"===this.state?null!=this.configuration.termProblems?this.state="TERM-PROBLEM":this.handleSubmit():"TERM-PROBLEM"===this.state&&this.handleSubmit()},e.prototype.handleSubmit=function(){var e=this;this.message=null,this.service.importShapefile(this.configuration).then((function(t){null!=t.locationProblems?(e.state="LOCATION-PROBLEM",e.configuration=t):null!=t.termProblems?(e.state="TERM-PROBLEM",e.configuration=t):(e.bsModalRef.hide(),e.bsModalRef=e.modalService.show(r.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),e.bsModalRef.content.message=e.localizeService.decode("data.import.go.to.scheduled.jobs.confirm.message"),e.bsModalRef.content.submitText=e.localizeService.decode("data.import.go.to.scheduled.jobs.button"),e.bsModalRef.content.cancelText=e.localizeService.decode("modal.button.close"),e.bsModalRef.content.onConfirm.subscribe((function(t){e.router.navigate(["/registry/scheduled-jobs"])})))})).catch((function(t){e.error(t)}))},e.prototype.handleCancel=function(){var e=this;this.message=null,this.service.cancelImport(this.configuration).then((function(t){e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.error=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.IOService),o.ɵɵdirectiveInject(a.BsModalRef),o.ɵɵdirectiveInject(a.BsModalService),o.ɵɵdirectiveInject(l.LocalizationService),o.ɵɵdirectiveInject(c.Router))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["shapefile-modal"]],decls:3,vars:2,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[3,"configuration","configurationChange","stateChange"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵtemplate(1,g,2,1,"div",1),o.ɵɵtemplate(2,y,5,4,"div",2),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null!=t.message),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null!=t.configuration&&t.configuration))},directives:[s.NgIf,d.AttributesPageComponent,p.LocationPageComponent,m.LocationProblemPageComponent,u.TermProblemPageComponent],encapsulation:2}),e}();t.ShapefileModalComponent=S},604:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationProblemComponent=void 0;var r=n(0),o=n(37),i=(n(548),n(545),n(0)),a=n(545),l=n(27),c=n(1),s=n(175),d=n(44),p=n(100);function m(e,t){if(1&e&&(i.ɵɵelementStart(0,"li"),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵadvance(1),i.ɵɵtextInterpolate2("",n.label," (",n.type,")")}}function u(e,t){if(1&e&&(i.ɵɵelementStart(0,"ol"),i.ɵɵtemplate(1,m,2,2,"li",5),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵproperty("ngForOf",n.problem.context)}}var g=function(e){return{disabled:e}};function f(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div"),i.ɵɵelementStart(1,"div",2),i.ɵɵelementStart(2,"input",6),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().entityLabel=e}))("typeaheadOnSelect",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().typeaheadOnSelect(e)})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(3,"div",7),i.ɵɵelementStart(4,"i",8),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext().createSynonym()})),i.ɵɵpipe(5,"localize"),i.ɵɵelementEnd(),i.ɵɵelementStart(6,"i",9),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext().ignoreDataAtLocation()})),i.ɵɵpipe(7,"localize"),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(2),i.ɵɵproperty("name",r.index+"-name")("ngModel",r.entityLabel)("typeaheadAsync",!0)("typeahead",r.dataSource)("typeaheadOptionsLimit",7),i.ɵɵadvance(2),i.ɵɵproperty("ngClass",i.ɵɵpureFunction1(12,g,!r.hasSynonym))("title",i.ɵɵpipeBind1(5,8,"dataUploader.createSynonymFromLocationTooltip")),i.ɵɵadvance(2),i.ɵɵproperty("title",i.ɵɵpipeBind1(7,10,"dataUploader.ignoreAtLocationTooltip"))}}function h(e,t){if(1&e&&(i.ɵɵelementStart(0,"li"),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.label)}}function v(e,t){if(1&e&&(i.ɵɵelementStart(0,"span"),i.ɵɵelementStart(1,"ul"),i.ɵɵelement(2,"localize",16),i.ɵɵtemplate(3,h,2,1,"li",5),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext(3);i.ɵɵadvance(3),i.ɵɵproperty("ngForOf",n.problem.action.ancestors)}}function b(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",2),i.ɵɵelementStart(1,"a",12),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext(2).toggle()})),i.ɵɵelement(2,"i",13),i.ɵɵelement(3,"i",14),i.ɵɵelement(4,"localize",15),i.ɵɵtext(5),i.ɵɵelementEnd(),i.ɵɵtemplate(6,v,4,1,"span",3),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext(2);i.ɵɵadvance(5),i.ɵɵtextInterpolate1(" [",r.problem.action.label,"] "),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",r.show)}}function y(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",2),i.ɵɵelement(1,"localize",17),i.ɵɵtext(2),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext(2);i.ɵɵadvance(2),i.ɵɵtextInterpolate1(" [",n.problem.action.label,"] ")}}function S(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div"),i.ɵɵtemplate(1,b,7,2,"div",10),i.ɵɵtemplate(2,y,3,1,"div",10),i.ɵɵelementStart(3,"div",7),i.ɵɵelementStart(4,"i",11),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext().undoAction()})),i.ɵɵpipe(5,"localize"),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵproperty("ngIf","SYNONYM"==r.problem.action.name),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","IGNOREATLOCATION"==r.problem.action.name),i.ɵɵadvance(2),i.ɵɵproperty("title",i.ɵɵpipeBind1(5,3,"dataUploader.undoFixedLocationTooltip"))}}var C=function(){function e(e){var t=this;this.service=e,this.onError=new r.EventEmitter,this.dataSource=o.Observable.create((function(e){t.service.getGeoObjectSuggestions(t.entityLabel,t.problem.type,t.problem.parent,t.configuration.hierarchy).then((function(t){e.next(t)}))}))}return e.prototype.ngOnInit=function(){this.entityLabel=null,this.entityId=null,this.hasSynonym=!1},e.prototype.typeaheadOnSelect=function(e){this.entityId=e.item.id,this.hasSynonym=null!=this.entityId},e.prototype.createSynonym=function(){var e=this;this.hasSynonym&&(this.onError.emit(null),this.service.createGeoObjectSynonym(this.entityId,this.problem.label).then((function(t){e.problem.resolved=!0,e.problem.action={name:"SYNONYM",synonymId:t.synonymId,vOid:t.vOid,label:t.label}})).catch((function(t){e.onError.emit(t.error)})))},e.prototype.ignoreDataAtLocation=function(){var e=this.problem.label;this.problem.type;this.problem.resolved=!0,this.problem.action={name:"IGNOREATLOCATION",label:e}},e.prototype.undoAction=function(){var e=this;this.problem.label,this.problem.type;if(this.problem.resolved){var t=this.problem.action;"IGNOREATLOCATION"==t.name?(this.problem.resolved=!1,this.problem.action=null):"SYNONYM"==t.name&&(this.onError.emit(null),this.service.deleteGeoObjectSynonym(t.synonymId,t.vOid).then((function(t){e.problem.resolved=!1,e.problem.action=null,e.entityLabel=null,e.hasSynonym=null!=e.entityLabel})).catch((function(t){e.onError.emit(t.error)})))}},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.IOService))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["location-problem"]],inputs:{configuration:"configuration",problem:"problem",index:"index"},outputs:{onError:"onError"},decls:9,vars:5,consts:[[1,"row",2,"padding-bottom","10px"],["problemForm","ngForm"],[1,"col-sm-4"],[4,"ngIf"],[1,"col-sm-2","error-message"],[4,"ngFor","ngForOf"],["typeaheadOptionField","name",1,"form-control",3,"name","ngModel","typeaheadAsync","typeahead","typeaheadOptionsLimit","ngModelChange","typeaheadOnSelect"],[1,"col-sm-2"],[1,"fa","fa-2x","fa-compress","clickable",3,"ngClass","title","click"],[1,"fa","fa-2x","fa-times-circle","clickable",3,"title","click"],["class","col-sm-4",4,"ngIf"],[1,"fa","fa-2x","fa-undo","clickable",3,"title","click"],[3,"click"],["aria-hidden","true",1,"fa","fa-caret-right","clickable"],["aria-hidden","true",1,"fa","fa-caret-down",2,"display","none"],["key","dataUploader.resolvedSynonym"],["key","dataUploader.locatedWithin"],["key","dataUploader.resolvedIgnoreAtLocation"]],template:function(e,t){1&e&&(i.ɵɵelementStart(0,"div",0),i.ɵɵelementStart(1,"form",null,1),i.ɵɵelementStart(3,"div",2),i.ɵɵtemplate(4,u,2,1,"ol",3),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"div",4),i.ɵɵtext(6),i.ɵɵelementEnd(),i.ɵɵtemplate(7,f,8,14,"div",3),i.ɵɵtemplate(8,S,6,5,"div",3),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e&&(i.ɵɵadvance(4),i.ɵɵproperty("ngIf",t.problem.context.length>0),i.ɵɵadvance(2),i.ɵɵtextInterpolate2("",t.problem.label," (",t.problem.typeLabel,")"),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",!t.problem.resolved),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",t.problem.resolved))},directives:[l.ɵangular_packages_forms_forms_y,l.NgControlStatusGroup,l.NgForm,c.NgIf,c.NgForOf,l.DefaultValueAccessor,l.NgControlStatus,l.NgModel,s.TypeaheadDirective,c.NgClass,d.LocalizeComponent],pipes:[p.LocalizePipe],encapsulation:2}),e}();t.LocationProblemComponent=C},605:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TermProblemComponent=void 0;var r=n(0),o=n(37),i=n(542),a=(n(548),n(545),n(0)),l=n(545),c=n(27),s=n(1),d=n(175),p=n(44),m=n(100),u=function(e){return{disabled:e}};function g(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div"),a.ɵɵelementStart(1,"div",2),a.ɵɵelementStart(2,"input",5),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().termLabel=e}))("typeaheadOnSelect",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().typeaheadOnSelect(e)})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(3,"div",6),a.ɵɵelementStart(4,"i",7),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().createSynonym()})),a.ɵɵpipe(5,"localize"),a.ɵɵelementEnd(),a.ɵɵelementStart(6,"i",8),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().createOption()})),a.ɵɵpipe(7,"localize"),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"i",9),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().ignoreValue()})),a.ɵɵpipe(9,"localize"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=a.ɵɵnextContext();a.ɵɵadvance(2),a.ɵɵproperty("name",r.index+"-name")("ngModel",r.termLabel)("typeaheadAsync",!0)("typeahead",r.dataSource)("typeaheadOptionsLimit",7),a.ɵɵadvance(2),a.ɵɵproperty("ngClass",a.ɵɵpureFunction1(15,u,!r.hasSynonym))("title",a.ɵɵpipeBind1(5,9,"dataUploader.createSynonymCategoryTooltip")),a.ɵɵadvance(2),a.ɵɵproperty("title",a.ɵɵpipeBind1(7,11,"dataUploader.createNewOptionTooltip")),a.ɵɵadvance(2),a.ɵɵproperty("title",a.ɵɵpipeBind1(9,13,"dataUploader.ignoreCategoryTooltip"))}}function f(e,t){1&e&&(a.ɵɵelementStart(0,"div",2),a.ɵɵelement(1,"localize",12),a.ɵɵelementEnd())}function h(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",2),a.ɵɵelement(1,"localize",13),a.ɵɵtext(2),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" [",n.problem.action.label,"] ")}}function v(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",2),a.ɵɵelement(1,"localize",14),a.ɵɵtext(2),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" [",n.problem.label,"] ")}}function b(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div"),a.ɵɵtemplate(1,f,2,0,"div",10),a.ɵɵtemplate(2,h,3,1,"div",10),a.ɵɵtemplate(3,v,3,1,"div",10),a.ɵɵelementStart(4,"div",6),a.ɵɵelementStart(5,"i",11),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().undoAction()})),a.ɵɵpipe(6,"localize"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("ngIf","OPTION"==r.problem.action.name),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","SYNONYM"==r.problem.action.name),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","IGNORE"==r.problem.action.name),a.ɵɵadvance(2),a.ɵɵproperty("title",a.ɵɵpipeBind1(6,4,"dataUploader.undoFixedCategoryTooltip"))}}var y=function(){function e(e){var t=this;this.service=e,this.onError=new r.EventEmitter,this.dataSource=o.Observable.create((function(e){t.service.getTermSuggestions(t.problem.mdAttributeId,t.termLabel,"20").then((function(t){e.next(t)}))}))}return e.prototype.ngOnInit=function(){this.termLabel=null,this.termId=null,this.hasSynonym=!1},e.prototype.typeaheadOnSelect=function(e){this.termId=e.item.value,this.hasSynonym=null!=this.termId},e.prototype.createSynonym=function(){var e=this;this.hasSynonym&&(this.onError.emit(null),this.service.createTermSynonym(this.termId,this.problem.label).then((function(t){e.problem.resolved=!0,e.problem.action={name:"SYNONYM",synonymId:t.synonymId,label:t.label}})).catch((function(t){e.onError.emit(t.error)})))},e.prototype.createOption=function(){var e=this;this.onError.emit(null),this.service.createTerm(this.problem.label,i.v4(),this.problem.parentCode).then((function(t){e.problem.resolved=!0,e.problem.action={name:"OPTION",term:t}})).catch((function(t){e.onError.emit(t.error)}))},e.prototype.ignoreValue=function(){this.problem.resolved=!0,this.problem.action={name:"IGNORE"}},e.prototype.undoAction=function(){var e=this;if(this.problem.resolved){var t=this.problem.action;"IGNORE"==t.name?(this.problem.resolved=!1,this.problem.action=null):"SYNONYM"==t.name?(this.onError.emit(null),this.service.deleteTermSynonym(t.synonymId).then((function(t){e.problem.resolved=!1,e.problem.action=null})).catch((function(t){e.onError.emit(t.error)}))):"OPTION"==t.name&&(this.onError.emit(null),this.service.removeTerm(this.problem.parentCode,t.term.code).then((function(t){e.problem.resolved=!1,e.problem.action=null})).catch((function(t){e.onError.emit(t.error)})))}},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.IOService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["term-problem"]],inputs:{configuration:"configuration",problem:"problem",index:"index"},outputs:{onError:"onError"},decls:9,vars:4,consts:[[1,"row"],["problemForm","ngForm"],[1,"col-sm-4"],[1,"col-sm-2","error-message"],[4,"ngIf"],["typeaheadOptionField","label",1,"form-control",3,"name","ngModel","typeaheadAsync","typeahead","typeaheadOptionsLimit","ngModelChange","typeaheadOnSelect"],[1,"col-sm-2"],[1,"fa","fa-2x","fa-compress","clickable",3,"ngClass","title","click"],[1,"fa","fa-2x","fa-plus","clickable",3,"title","click"],[1,"fa","fa-2x","fa-times-circle","clickable",3,"title","click"],["class","col-sm-4",4,"ngIf"],[1,"fa","fa-2x","fa-undo","clickable",3,"title","click"],["key","dataUploader.resolvedCategoryOption"],["key","dataUploader.resolvedSynonym"],["key","dataUploader.resolvedIgnoreCategory"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵelementStart(1,"form",null,1),a.ɵɵelementStart(3,"div",2),a.ɵɵtext(4),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"div",3),a.ɵɵtext(6),a.ɵɵelementEnd(),a.ɵɵtemplate(7,g,10,17,"div",4),a.ɵɵtemplate(8,b,7,6,"div",4),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(4),a.ɵɵtextInterpolate(t.problem.attributeLabel),a.ɵɵadvance(2),a.ɵɵtextInterpolate(t.problem.label),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!t.problem.resolved),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.problem.resolved))},directives:[c.ɵangular_packages_forms_forms_y,c.NgControlStatusGroup,c.NgForm,s.NgIf,c.DefaultValueAccessor,c.NgControlStatus,c.NgModel,d.TypeaheadDirective,s.NgClass,p.LocalizeComponent],pipes:[m.LocalizePipe],encapsulation:2}),e}();t.TermProblemComponent=y},606:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpreadsheetModalComponent=void 0;n(0),n(30),n(30),n(28),n(15);var r=n(174),o=(n(545),n(0)),i=n(545),a=n(30),l=n(15),c=n(28),s=n(1),d=n(573),p=n(574),m=n(575),u=n(576);function g(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",3),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵtextInterpolate(n.message)}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"attributes-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",r.configuration)}}function h(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"location-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",r.configuration)}}function v(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"location-problem-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",r.configuration)}}function b(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"term-problem-page",4),o.ɵɵlistener("configurationChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).configuration=e}))("stateChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onStateChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext(2);o.ɵɵadvance(1),o.ɵɵproperty("configuration",r.configuration)}}function y(e,t){if(1&e&&(o.ɵɵelementStart(0,"div"),o.ɵɵtemplate(1,f,2,1,"div",2),o.ɵɵtemplate(2,h,2,1,"div",2),o.ɵɵtemplate(3,v,2,1,"div",2),o.ɵɵtemplate(4,b,2,1,"div",2),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("ngIf","MAP"===n.state),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","LOCATION"===n.state),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","LOCATION-PROBLEM"===n.state),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","TERM-PROBLEM"===n.state)}}var S=function(){function e(e,t,n,r,o){this.service=e,this.bsModalRef=t,this.modalService=n,this.localizeService=r,this.router=o,this.message=null,this.state="MAP"}return e.prototype.ngOnInit=function(){},e.prototype.onStateChange=function(e){"BACK"===e?this.handleBack():"NEXT"===e?this.handleNext():"CANCEL"===e&&this.handleCancel()},e.prototype.handleBack=function(){"LOCATION"===this.state&&(this.state="MAP")},e.prototype.handleNext=function(){"MAP"===this.state?this.configuration.postalCode?this.handleSubmit():this.state="LOCATION":"LOCATION"===this.state?this.handleSubmit():"LOCATION-PROBLEM"===this.state?null!=this.configuration.termProblems?this.state="TERM-PROBLEM":this.handleSubmit():"TERM-PROBLEM"===this.state&&this.handleSubmit()},e.prototype.handleSubmit=function(){var e=this;this.service.importSpreadsheet(this.configuration).then((function(t){null!=t.locationProblems?(e.state="LOCATION-PROBLEM",e.configuration=t):null!=t.termProblems?(e.state="TERM-PROBLEM",e.configuration=t):(e.bsModalRef.hide(),e.bsModalRef=e.modalService.show(r.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),e.bsModalRef.content.message=e.localizeService.decode("data.import.go.to.scheduled.jobs.confirm.message"),e.bsModalRef.content.submitText=e.localizeService.decode("data.import.go.to.scheduled.jobs.button"),e.bsModalRef.content.onConfirm.subscribe((function(t){e.router.navigate(["/registry/scheduled-jobs"])})))})).catch((function(t){e.error(t)}))},e.prototype.handleCancel=function(){var e=this;this.service.cancelImport(this.configuration).then((function(t){e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.error=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.IOService),o.ɵɵdirectiveInject(a.BsModalRef),o.ɵɵdirectiveInject(a.BsModalService),o.ɵɵdirectiveInject(l.LocalizationService),o.ɵɵdirectiveInject(c.Router))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["spreadsheet-modal"]],decls:3,vars:2,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[3,"configuration","configurationChange","stateChange"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵtemplate(1,g,2,1,"div",1),o.ɵɵtemplate(2,y,5,4,"div",2),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null!=t.message),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",null!=t.configuration&&t.configuration))},directives:[s.NgIf,d.AttributesPageComponent,p.LocationPageComponent,m.LocationProblemPageComponent,u.TermProblemPageComponent],encapsulation:2}),e}();t.SpreadsheetModalComponent=S},607:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataPageComponent=void 0;n(0),n(30);var r=n(174),o=(n(15),n(0)),i=n(15),a=n(30),l=n(128),c=n(85),s=n(1),d=n(28),p=n(608),m=function(e){return{active:e}};function u(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"a",9),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().renderContent("SPREADSHEET")})),o.ɵɵtext(1,"Import spreadsheet"),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext();o.ɵɵproperty("ngClass",o.ɵɵpureFunction1(1,m,"SPREADSHEET"===r.content))}}function g(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"a",9),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().renderContent("SHAPEFILE")})),o.ɵɵtext(1,"Import shapefile"),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext();o.ɵɵproperty("ngClass",o.ɵɵpureFunction1(1,m,"SHAPEFILE"===r.content))}}function f(e,t){1&e&&o.ɵɵelement(0,"dataimporter",10),2&e&&o.ɵɵproperty("format","EXCEL")}function h(e,t){1&e&&o.ɵɵelement(0,"dataimporter",10),2&e&&o.ɵɵproperty("format","SHAPEFILE")}var v=function(){function e(e,t,n){this.localizationService=e,this.modalService=t,this.service=n,this.content="SPREADSHEET",this.isAdmin=n.isAdmin(),this.isMaintainer=this.isAdmin||n.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||n.isContributer(),this.isMaintainer?this.renderContent("SPREADSHEET"):this.renderContent("EXPORT")}return e.prototype.ngOnInit=function(){},e.prototype.renderContent=function(e){this.content=e,"SPREADSHEET"===e?this.pageTitle=this.localizationService.decode("spreadsheet.title"):"SHAPEFILE"===e?this.pageTitle=this.localizationService.decode("shapefile.title"):"EXPORT"===e&&(this.pageTitle=this.localizationService.decode("io.export.title"))},e.prototype.error=function(e){this.bsModalRef=this.modalService.show(r.ErrorModalComponent,{backdrop:!0}),this.bsModalRef.content.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.LocalizationService),o.ɵɵdirectiveInject(a.BsModalService),o.ɵɵdirectiveInject(i.AuthService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["data-page"]],decls:17,vars:5,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],[1,"row"],[1,"col-md-1"],[1,"col-md-10",2,"padding-top","30px"],[1,"heading"],["style","margin-right:10px;font-size:20px;",3,"routerLink","ngClass","click",4,"ngIf"],[1,"inner-col-content-wrapper",2,"padding-top","30px","margin-top","10px"],[3,"format",4,"ngIf"],[2,"margin-right","10px","font-size","20px",3,"routerLink","ngClass","click"],[3,"format"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelement(1,"cgr-header"),o.ɵɵelement(2,"loading-bar"),o.ɵɵelementStart(3,"div",1),o.ɵɵelementStart(4,"div",2),o.ɵɵelement(5,"div",3),o.ɵɵelementStart(6,"div",4),o.ɵɵelementStart(7,"div",5),o.ɵɵelementStart(8,"h2"),o.ɵɵtext(9),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(10,"div"),o.ɵɵtemplate(11,u,2,3,"a",6),o.ɵɵtemplate(12,g,2,3,"a",6),o.ɵɵelementEnd(),o.ɵɵelementStart(13,"div",7),o.ɵɵtemplate(14,f,1,1,"dataimporter",8),o.ɵɵtemplate(15,h,1,1,"dataimporter",8),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelement(16,"div",3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(9),o.ɵɵtextInterpolate1(" ",t.pageTitle," "),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",t.isMaintainer),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.isMaintainer),o.ɵɵadvance(2),o.ɵɵproperty("ngIf","SPREADSHEET"===t.content),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","SHAPEFILE"===t.content))},directives:[l.CgrHeaderComponent,c.LoadingBarComponent,s.NgIf,d.RouterLinkWithHref,s.NgClass,p.DataImporterComponent],styles:["a.active[_ngcontent-%COMP%] {\n\tborder-bottom: solid 2px #6BA542;\n}"]}),e}();t.DataPageComponent=v},608:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataImporterComponent=void 0;n(0),n(30);var r=n(247),o=n(174),i=(n(15),n(606)),a=n(603),l=(n(545),n(546)),c=n(0),s=n(545),d=n(15),p=n(30),m=n(1),u=n(44),g=n(27),f=n(247),h=["myFile"],v=function(e){return{active:e}};function b(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"div"),c.ɵɵelementStart(2,"div",1),c.ɵɵelement(3,"div",2),c.ɵɵelementStart(4,"div",3),c.ɵɵelementStart(5,"label",4),c.ɵɵelementStart(6,"input",5),c.ɵɵlistener("change",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().setImportSource(e,"FILE")})),c.ɵɵelementEnd(),c.ɵɵelementStart(7,"span",6),c.ɵɵelement(8,"localize",7),c.ɵɵelementEnd(),c.ɵɵelementStart(9,"p",8),c.ɵɵelement(10,"localize",9),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(11,"label",4),c.ɵɵelementStart(12,"input",5),c.ɵɵlistener("change",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().setImportSource(e,"EXTERNAL")})),c.ɵɵelementEnd(),c.ɵɵelementStart(13,"span",6),c.ɵɵelement(14,"localize",10),c.ɵɵelementEnd(),c.ɵɵelementStart(15,"p",8),c.ɵɵelement(16,"localize",11),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(17,"div",12),c.ɵɵelementStart(18,"button",13),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onNext()})),c.ɵɵelement(19,"localize",14),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(20,"div",15),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵnextContext();c.ɵɵadvance(6),c.ɵɵproperty("value",!0)("checked",!r.isExternal),c.ɵɵadvance(1),c.ɵɵproperty("ngClass",c.ɵɵpureFunction1(6,v,!r.isExternal)),c.ɵɵadvance(5),c.ɵɵproperty("value",!1)("checked",r.isExternal),c.ɵɵadvance(1),c.ɵɵproperty("ngClass",c.ɵɵpureFunction1(8,v,r.isExternal))}}function y(e,t){if(1&e&&(c.ɵɵelementStart(0,"option",42),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵpropertyInterpolate("value",n.oid),c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.label.localizedValue)}}function S(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",18),c.ɵɵelementStart(1,"label",39),c.ɵɵelement(2,"localize",40),c.ɵɵelementEnd(),c.ɵɵelementStart(3,"div",22),c.ɵɵelementStart(4,"select",41),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).externalSystemId=e})),c.ɵɵtemplate(5,y,2,2,"option",24),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(6,"div",25),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵnextContext(2);c.ɵɵadvance(4),c.ɵɵproperty("ngModel",r.externalSystemId),c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",r.externalSystems)}}function C(e,t){if(1&e&&(c.ɵɵelementStart(0,"option",42),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵpropertyInterpolate("value",n.code),c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.label)}}function E(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",18),c.ɵɵelementStart(1,"label",43),c.ɵɵelement(2,"localize",44),c.ɵɵelementEnd(),c.ɵɵelementStart(3,"div",22),c.ɵɵelementStart(4,"select",45),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).code=e})),c.ɵɵelement(5,"option"),c.ɵɵtemplate(6,C,2,2,"option",24),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(7,"div",25),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵnextContext(2);c.ɵɵadvance(4),c.ɵɵproperty("ngModel",r.code),c.ɵɵadvance(2),c.ɵɵproperty("ngForOf",r.types)}}function x(e,t){1&e&&c.ɵɵelement(0,"localize",46)}function O(e,t){1&e&&c.ɵɵelement(0,"localize",47)}function I(e,t){if(1&e&&(c.ɵɵelementStart(0,"option",42),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵpropertyInterpolate("value",n.strategy),c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.label)}}function M(e,t){1&e&&c.ɵɵelement(0,"localize",48)}function w(e,t){1&e&&c.ɵɵelement(0,"localize",49)}function j(e,t){if(1&e&&c.ɵɵelement(0,"input",50,51),2&e){var n=c.ɵɵnextContext(2);c.ɵɵproperty("uploader",n.uploader)}}function k(e,t){if(1&e&&c.ɵɵelement(0,"input",52,51),2&e){var n=c.ɵɵnextContext(2);c.ɵɵproperty("uploader",n.uploader)}}function T(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"div"),c.ɵɵelementStart(2,"form",null,16),c.ɵɵtemplate(4,S,7,2,"div",17),c.ɵɵtemplate(5,E,8,2,"div",17),c.ɵɵelementStart(6,"div",18),c.ɵɵelementStart(7,"label",19),c.ɵɵtemplate(8,x,1,0,"localize",20),c.ɵɵtemplate(9,O,1,0,"localize",21),c.ɵɵelementEnd(),c.ɵɵelementStart(10,"div",22),c.ɵɵelementStart(11,"select",23),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().importStrategy=e})),c.ɵɵtemplate(12,I,2,2,"option",24),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(13,"div",25),c.ɵɵelementEnd(),c.ɵɵelementStart(14,"div",18),c.ɵɵelementStart(15,"label",26),c.ɵɵelement(16,"localize",27),c.ɵɵelementEnd(),c.ɵɵelementStart(17,"div",22),c.ɵɵelementStart(18,"input",28),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext().startDate=e})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(19,"div",25),c.ɵɵelementEnd(),c.ɵɵelementStart(20,"div",18),c.ɵɵelementStart(21,"label",29),c.ɵɵtemplate(22,M,1,0,"localize",30),c.ɵɵtemplate(23,w,1,0,"localize",31),c.ɵɵelementEnd(),c.ɵɵelementStart(24,"div",22),c.ɵɵtemplate(25,j,2,1,"input",32),c.ɵɵtemplate(26,k,2,1,"input",33),c.ɵɵelementEnd(),c.ɵɵelement(27,"div",25),c.ɵɵelementEnd(),c.ɵɵelementStart(28,"div",18),c.ɵɵelement(29,"div",25),c.ɵɵelementStart(30,"div",34),c.ɵɵelementStart(31,"button",35),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onBack()})),c.ɵɵelement(32,"localize",36),c.ɵɵelementEnd(),c.ɵɵelementStart(33,"button",37),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onClick()})),c.ɵɵelement(34,"localize",38),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelement(35,"div",25),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵreference(3),o=c.ɵɵnextContext();c.ɵɵadvance(4),c.ɵɵproperty("ngIf",o.isExternal),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",o.types),c.ɵɵadvance(3),c.ɵɵproperty("ngIf","EXCEL"===o.format),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","SHAPEFILE"===o.format),c.ɵɵadvance(2),c.ɵɵproperty("ngModel",o.importStrategy),c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",o.importStrategies),c.ɵɵadvance(6),c.ɵɵproperty("ngModel",o.startDate),c.ɵɵadvance(4),c.ɵɵproperty("ngIf","EXCEL"===o.format),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","SHAPEFILE"===o.format),c.ɵɵadvance(2),c.ɵɵproperty("ngIf","EXCEL"===o.format),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","SHAPEFILE"===o.format),c.ɵɵadvance(7),c.ɵɵproperty("disabled",r.invalid)}}var P=function(){function e(e,t,n,r,o,i){this.service=e,this.eventService=t,this.modalService=n,this.localizationService=r,this.authService=o,this.sysService=i,this.showImportConfig=!1,this.importStrategies=[{strategy:l.ImportStrategy.NEW_AND_UPDATE,label:this.localizationService.decode("etl.import.ImportStrategy.NEW_AND_UPDATE")},{strategy:l.ImportStrategy.NEW_ONLY,label:this.localizationService.decode("etl.import.ImportStrategy.NEW_ONLY")},{strategy:l.ImportStrategy.UPDATE_ONLY,label:this.localizationService.decode("etl.import.ImportStrategy.UPDATE_ONLY")}],this.code=null,this.startDate=null,this.isExternal=!1,this.isLoading=!0}return e.prototype.ngOnInit=function(){var e=this;this.sysService.getExternalSystems(1,100).then((function(t){e.externalSystems=t.resultSet,0===e.externalSystems.length&&(e.isExternal=!1,e.showImportConfig=!0),e.isLoading=!1})).catch((function(t){e.error(t)})),this.service.listGeoObjectTypes(!0).then((function(t){for(var n=[],r=0;r<t.length;++r){var o=t[r];(e.authService.isOrganizationRA(o.orgCode)||e.authService.isGeoObjectTypeRM(o.orgCode,o.code))&&n.push(t[r])}e.types=n})).catch((function(t){e.error(t)}));var t=acp+"/excel/get-configuration";"SHAPEFILE"===this.format&&(t=acp+"/shapefile/get-shapefile-configuration");var n={queueLimit:1,removeAfterUpload:!0,url:t};this.uploader=new r.FileUploader(n),this.uploader.onBuildItemForm=function(t,n){n.append("type",e.code),null!=e.startDate&&n.append("startDate",e.startDate),e.importStrategy&&n.append("strategy",e.importStrategy)},this.uploader.onBeforeUploadItem=function(t){e.eventService.start()},this.uploader.onCompleteItem=function(t,n,r,o){e.fileRef.nativeElement.value="",e.eventService.complete()},this.uploader.onSuccessItem=function(t,n,r,o){var l=JSON.parse(n);l.isExternal=e.isExternal;for(var c=null,s=0;s<e.externalSystems.length;++s){var d=e.externalSystems[s];d.oid===e.externalSystemId&&(c=d)}l.externalSystemId=e.externalSystemId,l.externalSystem=c,"SHAPEFILE"===e.format?e.bsModalRef=e.modalService.show(a.ShapefileModalComponent,{backdrop:!0}):e.bsModalRef=e.modalService.show(i.SpreadsheetModalComponent,{backdrop:!0,ignoreBackdropClick:!0}),e.bsModalRef.content.configuration=l},this.uploader.onErrorItem=function(t,n,r,o){var i=JSON.parse(n);e.error({error:i})}},e.prototype.onClick=function(){null!=this.uploader.queue&&this.uploader.queue.length>0?this.uploader.uploadAll():this.error({message:this.localizationService.decode("io.missing.file"),error:{}})},e.prototype.setImportSource=function(e,t){this.isExternal="EXTERNAL"===t},e.prototype.onNext=function(){this.showImportConfig=!0},e.prototype.onBack=function(){this.showImportConfig=!1},e.prototype.error=function(e){this.bsModalRef=this.modalService.show(o.ErrorModalComponent,{backdrop:!0}),this.bsModalRef.content.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(c.ɵɵdirectiveInject(s.IOService),c.ɵɵdirectiveInject(d.EventService),c.ɵɵdirectiveInject(p.BsModalService),c.ɵɵdirectiveInject(d.LocalizationService),c.ɵɵdirectiveInject(d.AuthService),c.ɵɵdirectiveInject(d.ExternalSystemService))},e.ɵcmp=c.ɵɵdefineComponent({type:e,selectors:[["dataimporter"]],viewQuery:function(e,t){var n;(1&e&&c.ɵɵviewQuery(h,!0),2&e)&&(c.ɵɵqueryRefresh(n=c.ɵɵloadQuery())&&(t.fileRef=n.first))},inputs:{format:"format"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"row"],[1,"col-xs-1"],[1,"col-xs-9","radio-btn-wrapper"],[1,"radio"],["type","checkbox","name","import-source",3,"value","checked","change"],[3,"ngClass"],["key","importer.import.from-file.label"],[1,"radio-label-description"],["key","importer.import.from-file.description"],["key","importer.import.from-external.label"],["key","importer.import.from-external.description"],[1,"button-holder"],["type","submit",1,"btn","btn-primary",3,"click"],["key","io.next"],[1,"col-xs-2"],["form","ngForm"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],["for","strategy",1,"col-md-2","text-right"],["key","spreadsheet.import.import.strategy",4,"ngIf"],["key","shapefile.import.import.strategy",4,"ngIf"],[1,"col-md-8"],["id","strategy","name","strategy","required","",1,"select-area",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],["for","startDate",1,"col-md-2","text-right"],["key","io.startDate"],["name","startDate","type","date","required","",1,"ghost-input",3,"ngModel","ngModelChange"],["for","file",1,"col-md-2","text-right"],["key","io.spreadsheet",4,"ngIf"],["key","io.shapefile",4,"ngIf"],["class","ghost-input","name","file","type","file","ng2FileSelect","","accept",".xls, .xlsx","required","",3,"uploader",4,"ngIf"],["class","ghost-input","name","file","type","file","ng2FileSelect","","accept",".zip","required","",3,"uploader",4,"ngIf"],[1,"button-holder","col-md-8","text-right"],["type","submit",1,"btn","btn-default",3,"click"],["key","io.back"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["key","io.submit"],["for","externalSystem",1,"col-md-2","text-right"],["key","io.import.externalSystems"],["id","externalSystem","name","externalSystem","required","",1,"select-area",3,"ngModel","ngModelChange"],[3,"value"],["for","code",1,"col-md-2","text-right"],["key","io.geoObjectType"],["id","code","name","code","required","",1,"select-area",3,"ngModel","ngModelChange"],["key","spreadsheet.import.import.strategy"],["key","shapefile.import.import.strategy"],["key","io.spreadsheet"],["key","io.shapefile"],["name","file","type","file","ng2FileSelect","","accept",".xls, .xlsx","required","",1,"ghost-input",3,"uploader"],["myFile",""],["name","file","type","file","ng2FileSelect","","accept",".zip","required","",1,"ghost-input",3,"uploader"]],template:function(e,t){1&e&&(c.ɵɵtemplate(0,b,21,10,"div",0),c.ɵɵtemplate(1,T,36,12,"div",0)),2&e&&(c.ɵɵproperty("ngIf",!t.isLoading&&!t.showImportConfig&&t.externalSystems.length>0),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",!t.isLoading&&null!==t.isExternal&&t.showImportConfig))},directives:[m.NgIf,m.NgClass,u.LocalizeComponent,g.ɵangular_packages_forms_forms_y,g.NgControlStatusGroup,g.NgForm,g.SelectControlValueAccessor,g.RequiredValidator,g.NgControlStatus,g.NgModel,m.NgForOf,g.DefaultValueAccessor,g.NgSelectOption,g.ɵangular_packages_forms_forms_x,f.FileSelectDirective],styles:[".radio-btn-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n\tfont-size: 17px;\n\tfont-weight: normal;\n}\n\n.radio-btn-wrapper[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%] {\n\tcolor: #6BA542;\n\tfont-weight: bold;\n}\n\n.radio-btn-wrapper[_ngcontent-%COMP%]   p.radio-label-description[_ngcontent-%COMP%]{\n\tcolor: #a3a0a0;\n\tmargin-left: 30px;\n}"]}),e}();t.DataImporterComponent=P},609:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MasterListManagerComponent=void 0;n(0),n(28),n(30),n(545);var r=n(552),o=n(174),i=(n(15),n(0)),a=n(545),l=n(30),c=n(28),s=n(15),d=n(128),p=n(85),m=n(44),u=n(1);function g(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",6),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.message)}}function f(e,t){1&e&&(i.ɵɵelementStart(0,"div",7),i.ɵɵelementStart(1,"div",10),i.ɵɵelementStart(2,"div",11),i.ɵɵelementStart(3,"p",17),i.ɵɵelement(4,"localize",18),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd())}function h(e,t){1&e&&(i.ɵɵelementStart(0,"span"),i.ɵɵelement(1,"localize",33),i.ɵɵelementEnd())}function v(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"button",34),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext().$implicit,t=i.ɵɵnextContext(2).$implicit;return i.ɵɵnextContext().onDelete(t,e)})),i.ɵɵelement(1,"localize",35),i.ɵɵelementEnd()}}function b(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"tr",24),i.ɵɵelementStart(1,"td",25),i.ɵɵelementStart(2,"a",26),i.ɵɵtext(3),i.ɵɵtemplate(4,h,2,0,"span",16),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"td",27),i.ɵɵelementStart(6,"button",28),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=t.$implicit;return i.ɵɵnextContext(3).onView(e.oid)})),i.ɵɵelement(7,"localize",29),i.ɵɵelementEnd(),i.ɵɵelementStart(8,"button",30),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=t.$implicit;return i.ɵɵnextContext(3).onEdit(e)})),i.ɵɵelement(9,"localize",31),i.ɵɵelementEnd(),i.ɵɵtemplate(10,v,2,0,"button",32),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=t.$implicit;i.ɵɵadvance(2),i.ɵɵproperty("routerLink","/registry/master-list-view/"+r.oid),i.ɵɵadvance(1),i.ɵɵtextInterpolate1(" ",r.label," "),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",r.isMaster),i.ɵɵadvance(6),i.ɵɵproperty("ngIf",r.write)}}function y(e,t){if(1&e&&(i.ɵɵelementStart(0,"ul",19),i.ɵɵelementStart(1,"table",20),i.ɵɵelementStart(2,"thead"),i.ɵɵelementStart(3,"tr"),i.ɵɵelementStart(4,"th",21),i.ɵɵelement(5,"localize",22),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(6,"tbody"),i.ɵɵtemplate(7,b,11,4,"tr",23),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵadvance(7),i.ɵɵproperty("ngForOf",n.lists)}}function S(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div"),i.ɵɵelementStart(1,"button",28),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext().$implicit;return i.ɵɵnextContext().onCreate(e)})),i.ɵɵelement(2,"localize",36),i.ɵɵelementEnd(),i.ɵɵelementEnd()}}function C(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",7),i.ɵɵelementStart(1,"div",8),i.ɵɵelementStart(2,"div",9),i.ɵɵelementStart(3,"div",10),i.ɵɵelementStart(4,"div",11),i.ɵɵelementStart(5,"h3"),i.ɵɵtext(6),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(7,f,5,0,"div",12),i.ɵɵtemplate(8,y,8,1,"ul",13),i.ɵɵelementStart(9,"div",14),i.ɵɵelementStart(10,"div",15),i.ɵɵtemplate(11,S,3,0,"div",16),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵadvance(6),i.ɵɵtextInterpolate(n.label),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",n.lists&&0===n.lists.length),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",n.lists&&n.lists.length>0),i.ɵɵadvance(3),i.ɵɵproperty("ngIf",n.write)}}var E=function(){function e(e,t,n,r,o){this.service=e,this.modalService=t,this.router=n,this.localizeService=r,this.message=null,this.isAdmin=o.isAdmin(),this.isMaintainer=this.isAdmin||o.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||o.isContributer()}return e.prototype.ngOnInit=function(){var e=this;this.service.getMasterListsByOrg().then((function(t){e.orgs=t.orgs})).catch((function(t){e.error(t)}))},e.prototype.onCreate=function(e){this.bsModalRef=this.modalService.show(r.PublishModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.init(e),this.bsModalRef.content.isNew=!0,this.bsModalRef.content.onMasterListChange.subscribe((function(t){var n={label:t.displayLabel.localizedValue,oid:t.oid,createDate:t.createDate,lastUpdateDate:t.lastUpdateDate,isMaster:t.isMaster,write:t.admin,read:t.admin};e.lists.push(n)}))},e.prototype.onView=function(e){this.router.navigate(["/registry/master-list-view/",e])},e.prototype.onEdit=function(e){var t=this;this.service.getMasterList(e.oid).then((function(n){t.bsModalRef=t.modalService.show(r.PublishModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),t.bsModalRef.content.edit=!0,t.bsModalRef.content.readonly=!n.write,t.bsModalRef.content.master=n,t.bsModalRef.content.isNew=!1,t.bsModalRef.content.onMasterListChange.subscribe((function(t){e.label=t.displayLabel.localizedValue}))})).catch((function(e){t.error(e)}))},e.prototype.onDelete=function(e,t){var n=this;this.bsModalRef=this.modalService.show(o.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+t.label+"]",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.type="danger",this.bsModalRef.content.onConfirm.subscribe((function(r){n.service.deleteMasterList(t.oid).then((function(n){e.lists=e.lists.filter((function(e,n,r){return e.oid!==t.oid}))})).catch((function(e){n.error(e)}))}))},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.RegistryService),i.ɵɵdirectiveInject(l.BsModalService),i.ɵɵdirectiveInject(c.Router),i.ɵɵdirectiveInject(s.LocalizationService),i.ɵɵdirectiveInject(s.AuthService))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["master-list-manager"]],decls:9,vars:2,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],[1,"heading"],["key","masterlists.manager.organizations"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-danger"],[1,"row"],[1,"col-md-12","order-md-1"],[1,"row",2,"margin-top","30px"],[1,"col-md-12"],[1,"py-5"],["class","row",4,"ngIf"],["class","list-group","style","border-bottom: 2px solid lightgrey; margin-top: 30px;",4,"ngIf"],[1,"row",2,"margin-top","30px","margin-bottom","30px"],[1,"col-md-6"],[4,"ngIf"],[1,"inline-message"],["key","masterlists.no.lists.in.org.message"],[1,"list-group",2,"border-bottom","2px solid lightgrey","margin-top","30px"],[1,"table"],[2,"width","70%"],["key","masterlist.menu"],["class","clickable",4,"ngFor","ngForOf"],[1,"clickable"],[2,"width","70%","vertical-align","middle"],["routerLinkActive","active",3,"routerLink"],[2,"width","30%","text-align","right"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","modal.button.view"],["type","submit","role","button",1,"btn","btn-default",3,"click"],["key","masterlist.button.metadata"],["type","submit","class","btn btn-danger","role","button",3,"click",4,"ngIf"],["key","masterlist.master"],["type","submit","role","button",1,"btn","btn-danger",3,"click"],["key","modal.button.delete"],["key","hierarchy.management.button.create"]],template:function(e,t){1&e&&(i.ɵɵelementStart(0,"div",0),i.ɵɵelement(1,"cgr-header"),i.ɵɵelement(2,"loading-bar"),i.ɵɵelementStart(3,"div",1),i.ɵɵelementStart(4,"div",2),i.ɵɵelementStart(5,"h2"),i.ɵɵelement(6,"localize",3),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(7,g,2,1,"div",4),i.ɵɵtemplate(8,C,12,4,"div",5),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e&&(i.ɵɵadvance(7),i.ɵɵproperty("ngIf",null!=t.message),i.ɵɵadvance(1),i.ɵɵproperty("ngForOf",t.orgs))},directives:[d.CgrHeaderComponent,p.LoadingBarComponent,m.LocalizeComponent,u.NgIf,u.NgForOf,c.RouterLinkWithHref,c.RouterLinkActive],styles:[""]}),e}();t.MasterListManagerComponent=E},610:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExportFormatModalComponent=void 0;n(0),n(30);var r=n(37),o=n(0),i=n(30),a=n(44),l=n(27),c=function(){function e(e){this.bsModalRef=e}return e.prototype.ngOnInit=function(){this.onFormat=new r.Subject},e.prototype.confirm=function(){this.bsModalRef.hide(),this.onFormat.next(this.format)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.BsModalRef))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["export-format-modal"]],decls:25,vars:2,consts:[["tabindex","-1","role","dialog",1,"modal-body"],[1,"heading"],["key","export-modal.title"],["name","export-form",1,"modal-form"],[1,"row"],[1,"col-md-12"],["key","export-modal.message"],["id","format","name","format","required","",1,"select-area",3,"ngModel","ngModelChange"],["value","EXCEL"],["key","io.spreadsheet"],["value","SHAPEFILE"],["key","io.shapefile"],[1,"button-holder"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","button","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","modal.button.submit"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelementStart(1,"div",1),o.ɵɵelementStart(2,"h2"),o.ɵɵelement(3,"localize",2),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"form",3),o.ɵɵelementStart(5,"fieldset"),o.ɵɵelementStart(6,"div",4),o.ɵɵelementStart(7,"div",5),o.ɵɵelementStart(8,"label"),o.ɵɵelement(9,"localize",6),o.ɵɵelementEnd(),o.ɵɵelementStart(10,"select",7),o.ɵɵlistener("ngModelChange",(function(e){return t.format=e})),o.ɵɵelement(11,"option"),o.ɵɵelementStart(12,"option",8),o.ɵɵelement(13,"localize",9),o.ɵɵelementEnd(),o.ɵɵelementStart(14,"option",10),o.ɵɵelement(15,"localize",11),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(16,"div",4),o.ɵɵelementStart(17,"div",5),o.ɵɵelementStart(18,"div",12),o.ɵɵelementStart(19,"button",13),o.ɵɵlistener("click",(function(){return t.bsModalRef.hide()})),o.ɵɵelementStart(20,"span"),o.ɵɵelement(21,"localize",14),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(22,"button",15),o.ɵɵlistener("click",(function(){return t.confirm()})),o.ɵɵelementStart(23,"span"),o.ɵɵelement(24,"localize",16),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(10),o.ɵɵproperty("ngModel",t.format),o.ɵɵadvance(12),o.ɵɵproperty("disabled",null==t.format||""==t.format))},directives:[a.LocalizeComponent,l.ɵangular_packages_forms_forms_y,l.NgControlStatusGroup,l.NgForm,l.SelectControlValueAccessor,l.RequiredValidator,l.NgControlStatus,l.NgModel,l.NgSelectOption,l.ɵangular_packages_forms_forms_x],encapsulation:2}),e}();t.ExportFormatModalComponent=c},611:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestTableComponent=void 0;n(0),n(30),n(545),n(15);var r=n(612),o=n(174),i=n(0),a=n(545),l=n(30),c=n(15),s=n(28),d=n(1),p=n(44),m=n(27);function u(e,t){1&e&&i.ɵɵelement(0,"i",62)}function g(e,t){1&e&&i.ɵɵelement(0,"i",63)}function f(e,t){1&e&&i.ɵɵelement(0,"i",64)}function h(e,t){1&e&&i.ɵɵelement(0,"i",65)}function v(e,t){if(1&e&&(i.ɵɵelementStart(0,"ul",66),i.ɵɵelementStart(1,"li"),i.ɵɵtext(2,"Update "),i.ɵɵelementStart(3,"b"),i.ɵɵtext(4),i.ɵɵelementEnd(),i.ɵɵtext(5),i.ɵɵelementEnd(),i.ɵɵelementStart(6,"li"),i.ɵɵtext(7),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵadvance(4),i.ɵɵtextInterpolate(n.geoObjectJson.attributes.displayLabel.values[0].value.localeValues[0].value),i.ɵɵadvance(1),i.ɵɵtextInterpolate1(" [ ",n.geoObjectType.label.localizedValue," ]"),i.ɵɵadvance(2),i.ɵɵtextInterpolate1("on ",n.createActionDate,"")}}function b(e,t){if(1&e&&(i.ɵɵelementStart(0,"ul",66),i.ɵɵelementStart(1,"li"),i.ɵɵtext(2,"Create "),i.ɵɵelementStart(3,"b"),i.ɵɵtext(4),i.ɵɵelementEnd(),i.ɵɵtext(5),i.ɵɵelementEnd(),i.ɵɵelementStart(6,"li"),i.ɵɵtext(7),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵadvance(4),i.ɵɵtextInterpolate(n.geoObjectJson.attributes.displayLabel.values[0].value.localeValues[0].value),i.ɵɵadvance(1),i.ɵɵtextInterpolate1(" [ ",n.geoObjectType.label.localizedValue," ] "),i.ɵɵadvance(2),i.ɵɵtextInterpolate1("on ",n.createActionDate,"")}}function y(e,t){if(1&e&&(i.ɵɵelementStart(0,"ul",66),i.ɵɵelementStart(1,"li"),i.ɵɵtext(2,"Set parents of "),i.ɵɵelementStart(3,"b"),i.ɵɵtext(4),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"li"),i.ɵɵtext(6),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵadvance(4),i.ɵɵtextInterpolate(n.childCode),i.ɵɵadvance(2),i.ɵɵtextInterpolate1("on ",n.createActionDate,"")}}function S(e,t){if(1&e&&(i.ɵɵelementStart(0,"ul",66),i.ɵɵelementStart(1,"li"),i.ɵɵtext(2,"Set "),i.ɵɵelementStart(3,"b"),i.ɵɵtext(4),i.ɵɵelementEnd(),i.ɵɵtext(5," as a child of "),i.ɵɵelementStart(6,"b"),i.ɵɵtext(7),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(8,"li"),i.ɵɵtext(9),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵadvance(4),i.ɵɵtextInterpolate(n.childTypeCode),i.ɵɵadvance(3),i.ɵɵtextInterpolate(n.parentTypeCode),i.ɵɵadvance(2),i.ɵɵtextInterpolate1("on ",n.createActionDate,"")}}function C(e,t){if(1&e&&(i.ɵɵelementStart(0,"ul",66),i.ɵɵelementStart(1,"li"),i.ɵɵtext(2,"Remove "),i.ɵɵelementStart(3,"b"),i.ɵɵtext(4),i.ɵɵelementEnd(),i.ɵɵtext(5," from "),i.ɵɵelementStart(6,"b"),i.ɵɵtext(7),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(8,"li"),i.ɵɵtext(9),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵadvance(4),i.ɵɵtextInterpolate(n.childTypeCode),i.ɵɵadvance(3),i.ɵɵtextInterpolate(n.parentTypeCode),i.ɵɵadvance(2),i.ɵɵtextInterpolate1("on ",n.createActionDate,"")}}var E=function(e,t,n){return{"status-pending":e,"status-accepted":t,"status-rejected":n}};function x(e,t){if(1&e&&(i.ɵɵelementStart(0,"h4",67),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵproperty("ngClass",i.ɵɵpureFunction3(2,E,"PENDING"===n.approvalStatus,"ACCEPTED"===n.approvalStatus,"REJECTED"===n.approvalStatus)),i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.approvalStatus)}}function O(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"button",68),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext().$implicit;return i.ɵɵnextContext(3).setActionStatus(e,"ACCEPTED")})),i.ɵɵelement(1,"localize",69),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext().$implicit;i.ɵɵproperty("disabled","ACCEPTED"===r.approvalStatus)}}function I(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"button",70),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext().$implicit;return i.ɵɵnextContext(3).setActionStatus(e,"REJECTED")})),i.ɵɵelement(1,"localize",71),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext().$implicit;i.ɵɵproperty("disabled","REJECTED"===r.approvalStatus)}}function M(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"button",72),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext().$implicit;return i.ɵɵnextContext(3).setActionStatus(e,"PENDING")})),i.ɵɵelement(1,"localize",73),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext().$implicit;i.ɵɵproperty("disabled","PENDING"===r.approvalStatus)}}var w=function(e,t,n){return{"status-pending-container":e,"status-accepted-container":t,"status-rejected-container":n}};function j(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",35),i.ɵɵelementStart(1,"div",36),i.ɵɵelementStart(2,"div",37),i.ɵɵelement(3,"i",38),i.ɵɵelementStart(4,"h4",39),i.ɵɵtext(5),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(6,"div",40),i.ɵɵtemplate(7,u,1,0,"i",41),i.ɵɵtemplate(8,g,1,0,"i",42),i.ɵɵtemplate(9,f,1,0,"i",43),i.ɵɵtemplate(10,h,1,0,"i",44),i.ɵɵtemplate(11,v,8,3,"ul",45),i.ɵɵtemplate(12,b,8,3,"ul",45),i.ɵɵtemplate(13,y,7,2,"ul",45),i.ɵɵtemplate(14,S,10,3,"ul",45),i.ɵɵtemplate(15,C,10,3,"ul",45),i.ɵɵelementEnd(),i.ɵɵelementStart(16,"div",46),i.ɵɵtemplate(17,x,2,6,"h4",47),i.ɵɵtemplate(18,O,2,1,"button",48),i.ɵɵtemplate(19,I,2,1,"button",49),i.ɵɵtemplate(20,M,2,1,"button",50),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(21,"div",51),i.ɵɵelementStart(22,"div",52),i.ɵɵelementStart(23,"div",53),i.ɵɵelementStart(24,"label",54),i.ɵɵelement(25,"localize",55),i.ɵɵelementEnd(),i.ɵɵelementStart(26,"textarea",56),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),t.$implicit.contributorNotes=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(27,"div",52),i.ɵɵelementStart(28,"div",53),i.ɵɵelementStart(29,"label",54),i.ɵɵelement(30,"localize",57),i.ɵɵelementEnd(),i.ɵɵelementStart(31,"textarea",58),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),t.$implicit.maintainerNotes=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(32,"div",59),i.ɵɵelementStart(33,"button",60),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=t.$implicit;return i.ɵɵnextContext(3).showActionDetail(e)})),i.ɵɵelement(34,"localize",61),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=i.ɵɵnextContext(2).$implicit;i.ɵɵproperty("ngClass",i.ɵɵpureFunction3(23,w,"PENDING"===r.approvalStatus,"ACCEPTED"===r.approvalStatus,"REJECTED"===r.approvalStatus)),i.ɵɵadvance(3),i.ɵɵproperty("ngClass",i.ɵɵpureFunction3(27,E,"PENDING"===r.approvalStatus,"ACCEPTED"===r.approvalStatus,"REJECTED"===r.approvalStatus)),i.ɵɵadvance(2),i.ɵɵtextInterpolate(o.createdBy),i.ɵɵadvance(2),i.ɵɵproperty("ngIf","net.geoprism.registry.action.geoobject.UpdateGeoObjectAction"===r.actionType),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","net.geoprism.registry.action.geoobject.CreateGeoObjectAction"===r.actionType),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","net.geoprism.registry.action.tree.AddChildAction"===r.actionType),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","net.geoprism.registry.action.tree.RemoveChildAction"===r.actionType),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","net.geoprism.registry.action.geoobject.UpdateGeoObjectAction"===r.actionType),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","net.geoprism.registry.action.geoobject.CreateGeoObjectAction"===r.actionType),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","net.geoprism.registry.action.geoobject.SetParentAction"===r.actionType),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","net.geoprism.registry.action.tree.AddChildAction"===r.actionType),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","net.geoprism.registry.action.tree.RemoveChildAction"===r.actionType),i.ɵɵadvance(2),i.ɵɵproperty("ngIf","PENDING"!==o.approvalStatus),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","PENDING"===o.approvalStatus),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","PENDING"===o.approvalStatus),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","PENDING"===o.approvalStatus),i.ɵɵadvance(4),i.ɵɵpropertyInterpolate1("for","contribNotesInput-",o.oid,""),i.ɵɵadvance(2),i.ɵɵpropertyInterpolate1("id","contribNotesInput-",o.oid,""),i.ɵɵproperty("ngModel",r.contributorNotes),i.ɵɵadvance(3),i.ɵɵpropertyInterpolate1("for","maintainerNotesInput-",o.oid,""),i.ɵɵadvance(2),i.ɵɵpropertyInterpolate1("id","maintainerNotesInput-",o.oid,""),i.ɵɵproperty("ngModel",r.maintainerNotes)("readonly","PENDING"!==o.approvalStatus)}}function k(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"tr",25),i.ɵɵelementStart(1,"td",26),i.ɵɵelementStart(2,"div",27),i.ɵɵelementStart(3,"div",1),i.ɵɵtemplate(4,j,35,31,"div",28),i.ɵɵelementStart(5,"div",29),i.ɵɵelementStart(6,"button",30),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext().$implicit;return i.ɵɵnextContext().onApproveAll(e)})),i.ɵɵelement(7,"localize",31),i.ɵɵelementEnd(),i.ɵɵelementStart(8,"button",32),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext().$implicit;return i.ɵɵnextContext().onRejectAll(e)})),i.ɵɵelement(9,"localize",33),i.ɵɵelementEnd(),i.ɵɵelementStart(10,"button",30),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext().$implicit;return i.ɵɵnextContext().onExecute(e)})),i.ɵɵelement(11,"localize",34),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext().$implicit,o=i.ɵɵnextContext();i.ɵɵadvance(4),i.ɵɵproperty("ngForOf",o.actions),i.ɵɵadvance(2),i.ɵɵproperty("disabled","PENDING"!==r.approvalStatus),i.ɵɵadvance(2),i.ɵɵproperty("disabled","PENDING"!==r.approvalStatus),i.ɵɵadvance(2),i.ɵɵproperty("disabled","PENDING"!==r.approvalStatus)}}var T=function(e){return{"row-active":e}};function P(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"tr",17),i.ɵɵlistener("click",(function(e){i.ɵɵrestoreView(n);var r=t.$implicit;return i.ɵɵnextContext().toggle(e,r.oid)})),i.ɵɵelementStart(1,"td",18),i.ɵɵelementStart(2,"h5"),i.ɵɵelementStart(3,"strong"),i.ɵɵtext(4),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"td",19),i.ɵɵtext(6),i.ɵɵelementEnd(),i.ɵɵelementStart(7,"td",20),i.ɵɵelementStart(8,"h5",21),i.ɵɵelementStart(9,"strong"),i.ɵɵtext(10),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(11,"td",22),i.ɵɵelement(12,"i",23),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(13,k,12,4,"tr",24)}if(2&e){var r=t.$implicit,o=i.ɵɵnextContext();i.ɵɵproperty("ngClass",i.ɵɵpureFunction1(6,T,o.toggleId===r.oid)),i.ɵɵadvance(4),i.ɵɵtextInterpolate(r.createdBy),i.ɵɵadvance(2),i.ɵɵtextInterpolate1(" ",r.createDate," "),i.ɵɵadvance(2),i.ɵɵproperty("ngClass",i.ɵɵpureFunction3(8,E,"PENDING"===r.approvalStatus,"ACCEPTED"===r.approvalStatus,"REJECTED"===r.approvalStatus)),i.ɵɵadvance(2),i.ɵɵtextInterpolate(r.approvalStatus),i.ɵɵadvance(3),i.ɵɵproperty("ngIf",o.toggleId===r.oid)}}var z=function(){function e(e,t,n){this.service=e,this.modalService=t,this.localizationService=n,this.objectKeys=Object.keys,this.requests=[],this.columns=[],this.filterCriteria="ALL",this.columns=[{name:n.decode("change.request.user"),prop:"createdBy",sortable:!1},{name:n.decode("change.request.createDate"),prop:"createDate",sortable:!1,width:195},{name:n.decode("change.request.status"),prop:"approvalStatus",sortable:!1}],this.refresh()}return e.prototype.refresh=function(){var e=this;this.service.getAllRequests("ALL").then((function(t){e.requests=t})).catch((function(t){e.error(t)}))},e.prototype.onSelect=function(e){var t=this;this.service.getAllActions(e.selected[0].oid).then((function(e){t.actions=e})).catch((function(e){t.error(e)}))},e.prototype.onExecute=function(e){var t=this;null!=e&&this.service.execute(e.oid).then((function(n){e=n,t.refresh()})).catch((function(e){t.error(e)}))},e.prototype.applyActionStatusProperties=function(e){var t=this;this.service.applyActionStatusProperties(e).then((function(e){})).catch((function(e){t.error(e)}))},e.prototype.onApproveAll=function(e){var t=this;null!=e&&this.service.approveAllActions(e.oid,this.actions).then((function(e){t.actions=e})).catch((function(e){t.error(e)}))},e.prototype.onRejectAll=function(e){var t=this;null!=e&&this.service.rejectAllActions(e.oid,this.actions).then((function(e){t.actions=e})).catch((function(e){t.error(e)}))},e.prototype.error=function(e){this.modalService.show(o.ErrorModalComponent,{backdrop:!0}).content.message=o.ErrorHandler.getMessageFromError(e)},e.prototype.requestTrackBy=function(e,t){return t.oid},e.prototype.toggle=function(e,t){e.target.parentElement.className.includes("btn")||e.target.className.includes("btn")||(this.toggleId===t?this.toggleId=null:(this.toggleId=t,this.onSelect({selected:[{oid:t}]})))},e.prototype.filter=function(e){var t=this;this.service.getAllRequests(e).then((function(e){t.requests=e})).catch((function(e){t.error(e)})),this.filterCriteria=e},e.prototype.setActionStatus=function(e,t){e.approvalStatus=t,this.applyActionStatusProperties(e)},e.prototype.getActiveDetailComponent=function(e){return e.actionType.endsWith("CreateGeoObjectAction")||e.actionType.endsWith("UpdateGeoObjectAction"),e},e.prototype.showActionDetail=function(e){this.bsModalRef=this.modalService.show(r.ActionDetailModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.curAction=e},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.ChangeRequestService),i.ɵɵdirectiveInject(l.BsModalService),i.ɵɵdirectiveInject(c.LocalizationService))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["request-table"]],decls:26,vars:6,consts:[[1,"row"],[1,"col-md-12"],[1,"form-group","button-row"],[3,"routerLink","ngClass","click"],["key","change.request.all.filter.link"],[2,"margin-left","5px",3,"routerLink","ngClass","click"],["key","change.request.pending.filter.link"],["key","change.request.accepted.filter.link"],["key","change.request.rejected.filter.link"],[2,"border-top","solid 3px #6BA542"],[1,"table"],[2,"height","50px","color","grey"],[2,"vertical-align","middle"],["key","change.request.contributor.label"],["key","change.request.date.contributed.label"],["key","change.request.status.label"],["ngFor","",3,"ngForOf","ngForTrackBy"],[1,"clickable",2,"height","50px",3,"ngClass","click"],[1,"col-md-4"],[1,"col-md-2",2,"vertical-align","middle","color","grey"],[1,"col-md-2"],[3,"ngClass"],[1,"col-md-1",2,"vertical-align","middle"],["aria-hidden","true",1,"arrow","arrow-right"],["style","background-color:#f7f7f7;",4,"ngIf"],[2,"background-color","#f7f7f7"],["colspan","5"],[1,"row",2,"margin","0"],["class","action-card","style","margin-bottom:10px; background-color:white;",3,"ngClass",4,"ngFor","ngForOf"],[1,"button-holder"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","change.request.accept.all.btn"],["type","submit","role","button",1,"btn","btn-danger",3,"disabled","click"],["key","change.request.reject.all.btn"],["key","change.request.accept.changes.btn"],[1,"action-card",2,"margin-bottom","10px","background-color","white",3,"ngClass"],[1,"row",2,"margin","0","padding-top","5px","padding-bottom","5px"],[1,"col-md-3",2,"border-right","2px grey solid","height","50px"],["aria-hidden","true",1,"fa","fa-circle",2,"float","left","line-height","50px",3,"ngClass"],[1,"vertical-center",2,"margin","0","float","left","padding-left","20px"],[1,"col-md-5",2,"height","50px"],["class","fa fa-refresh vertical-center","style","float:left; line-height: 50px;","aria-hidden","true",4,"ngIf"],["class","fa fa-plus vertical-center","style","float:left; line-height: 50px;","aria-hidden","true",4,"ngIf"],["class","fa fa-link vertical-center","style","float:left; line-height: 50px;","aria-hidden","true",4,"ngIf"],["class","fa fa-chain-broken vertical-center","style","float:left; line-height: 50px;","aria-hidden","true",4,"ngIf"],["class","vertical-center","style","list-style-type:none; float:left; padding-left:20px;",4,"ngIf"],[1,"col-md-4",2,"height","50px","text-align","center"],["class","vertical-center","style","margin: 0;",3,"ngClass",4,"ngIf"],["type","submit","class","btn btn-primary vertical-center","style","width:30%;","role","button",3,"disabled","click",4,"ngIf"],["type","submit","class","btn btn-danger vertical-center","style","width:30%;","role","button",3,"disabled","click",4,"ngIf"],["type","submit","class","btn btn-warning vertical-center","style","width:30%;","role","button",3,"disabled","click",4,"ngIf"],[1,"row",2,"height","150px","border-top","1px grey solid","margin","0"],[1,"col-md-5"],[1,"form-group"],[3,"for"],["key","change.request.contributor.notes.label"],["readonly","true",1,"form-control",2,"height","90px",3,"id","ngModel","ngModelChange"],["key","change.request.maintainer.notes.label"],[1,"form-control",2,"height","90px",3,"id","ngModel","readonly","ngModelChange"],[1,"col-md-2",2,"height","100%"],["type","submit","role","button",1,"btn","btn-default","vertical-center",2,"width","100%",3,"click"],["key","change.request.action.details.label",2,"text-transform","uppercase"],["aria-hidden","true",1,"fa","fa-refresh","vertical-center",2,"float","left","line-height","50px"],["aria-hidden","true",1,"fa","fa-plus","vertical-center",2,"float","left","line-height","50px"],["aria-hidden","true",1,"fa","fa-link","vertical-center",2,"float","left","line-height","50px"],["aria-hidden","true",1,"fa","fa-chain-broken","vertical-center",2,"float","left","line-height","50px"],[1,"vertical-center",2,"list-style-type","none","float","left","padding-left","20px"],[1,"vertical-center",2,"margin","0",3,"ngClass"],["type","submit","role","button",1,"btn","btn-primary","vertical-center",2,"width","30%",3,"disabled","click"],["key","change.request.accept.btn",2,"text-transform","uppercase"],["type","submit","role","button",1,"btn","btn-danger","vertical-center",2,"width","30%",3,"disabled","click"],["key","change.request.reject.btn",2,"text-transform","uppercase"],["type","submit","role","button",1,"btn","btn-warning","vertical-center",2,"width","30%",3,"disabled","click"],["key","change.request.pending.btn",2,"text-transform","uppercase"]],template:function(e,t){1&e&&(i.ɵɵelementStart(0,"div",0),i.ɵɵelementStart(1,"div",1),i.ɵɵelementStart(2,"div",2),i.ɵɵelementStart(3,"a",3),i.ɵɵlistener("click",(function(){return t.filter("ALL")})),i.ɵɵelement(4,"localize",4),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"a",5),i.ɵɵlistener("click",(function(){return t.filter("PENDING")})),i.ɵɵelement(6,"localize",6),i.ɵɵelementEnd(),i.ɵɵelementStart(7,"a",5),i.ɵɵlistener("click",(function(){return t.filter("ACCEPTED")})),i.ɵɵelement(8,"localize",7),i.ɵɵelementEnd(),i.ɵɵelementStart(9,"a",5),i.ɵɵlistener("click",(function(){return t.filter("REJECTED")})),i.ɵɵelement(10,"localize",8),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelement(11,"hr",9),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(12,"div",0),i.ɵɵelementStart(13,"div",1),i.ɵɵelementStart(14,"table",10),i.ɵɵelementStart(15,"thead"),i.ɵɵelementStart(16,"tr",11),i.ɵɵelementStart(17,"th",12),i.ɵɵelement(18,"localize",13),i.ɵɵelementEnd(),i.ɵɵelementStart(19,"th",12),i.ɵɵelement(20,"localize",14),i.ɵɵelementEnd(),i.ɵɵelementStart(21,"th",12),i.ɵɵelement(22,"localize",15),i.ɵɵelementEnd(),i.ɵɵelement(23,"th"),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(24,"tbody"),i.ɵɵtemplate(25,P,14,12,"ng-template",16),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e&&(i.ɵɵadvance(3),i.ɵɵproperty("ngClass","ALL"===t.filterCriteria?"cr-filter-link-active":""),i.ɵɵadvance(2),i.ɵɵproperty("ngClass","PENDING"===t.filterCriteria?"cr-filter-link-active":""),i.ɵɵadvance(2),i.ɵɵproperty("ngClass","ACCEPTED"===t.filterCriteria?"cr-filter-link-active":""),i.ɵɵadvance(2),i.ɵɵproperty("ngClass","REJECTED"===t.filterCriteria?"cr-filter-link-active":""),i.ɵɵadvance(16),i.ɵɵproperty("ngForOf",t.requests)("ngForTrackBy",t.requestTrackBy))},directives:[s.RouterLinkWithHref,d.NgClass,p.LocalizeComponent,d.NgForOf,d.NgIf,m.DefaultValueAccessor,m.NgControlStatus,m.NgModel],styles:[".vertical-center {\n\tposition: relative;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n}\n\n.status-pending {\n\tcolor: orange;\n}\n\n.status-accepted {\n\tcolor: #6BA542;\n}\n\n.status-rejected {\n\tcolor: #d43f3a;\n}\n\n.status-pending-container {\n\tborder: solid 2px orange;\n}\n.status-accepted-container {\n\tborder: solid 2px #6BA542;\n}\n.status-rejected-container {\n\tborder: solid 2px #d43f3a;\n}\n\n.cr-filter-link-active,\n.cr-filter-link-active:active {\n\t/* border: solid 1px #6BA542; */\n    border-radius: 10px;\n    background: #6BA542;\n    color: white;\n    font-weight: bold;\n    padding: 3px 15px 3px 15px;\n}\n.cr-filter-link-active:hover,\n.cr-filter-link-active:focus {\n\tcolor:white;\n}\n\n/* .btn {\n\tborder: 2px solid; \n}\n.btn:disabled {\n\tborder: none;\n}\n\n.btn.btn-danger {\n\tbackground-color:#ffeeed; \n\tcolor:#d43f3a;\n}\n.btn.btn-danger:hover,\n.btn.btn-danger:active {\n\tcolor:#d43f3a;\n\tbackground-color:#fff7f6; \n\tborder-color: #d43f3a;\n}\n.btn.btn-danger:disabled:hover {\n\tbackground-color:#ffeeed; \n}\n\n.btn.btn-warning {\n\tbackground-color: #ffefd7;\n\tcolor: orange;\n}\n.btn.btn-warning:hover {\n\tbackground-color: #fff4e5;\n\tborder-color: orange;\n}\n.btn.btn-warning:disabled {\n\tbackground-color: #ffefd7;\n}\n\n.clickable:hover {\n\tbackground-color: #f7f7f7;\n\tcursor: pointer;\n}\n.clickable:hover .arrow.arrow-right {\n\ttransform: rotate(45deg);\n    -webkit-transform: rotate(45deg);\n} */\n\ntr.row-active {\n\tbackground-color:#f7f7f7;\n}\n\n\n.arrow {\n  border: solid black;\n  border-width: 0 1px 1px 0;\n  display: inline-block;\n  padding: 5px;\n}\n.arrow-right {\n  transform: rotate(-45deg);\n  -webkit-transform: rotate(-45deg);\n}\n.arrow-down {\n  transform: rotate(45deg);\n  -webkit-transform: rotate(45deg);\n}\n\n.form-group textarea:focus {\n\tborder-color: #edf4e8;\n\t-webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(107,165,66,.6);\n\tbox-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(107,165,66,.6);\n\n}\ntextarea[readonly]:focus {\n\tbox-shadow: none;\n\tborder: 1px solid #ccc;\n\tcursor: not-allowed;\n}\n"],encapsulation:2}),e}();t.RequestTableComponent=z},612:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionDetailModalComponent=void 0;n(0),n(30);var r=n(0),o=n(30),i=["cuDetail"],a=["arDetail"],l=["spDetail"];function c(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"crtable-detail-create-geo-object",7,8),r.ɵɵlistener("actionChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().action=e})),r.ɵɵelementEnd()}if(2&e){var o=r.ɵɵnextContext();r.ɵɵproperty("action",o.action)}}function s(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"crtable-detail-add-remove-child",7,9),r.ɵɵlistener("actionChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().action=e})),r.ɵɵelementEnd()}if(2&e){var o=r.ɵɵnextContext();r.ɵɵproperty("action",o.action)}}function d(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"set-parent-detail",7,10),r.ɵɵlistener("actionChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().action=e})),r.ɵɵelementEnd()}if(2&e){var o=r.ɵɵnextContext();r.ɵɵproperty("action",o.action)}}var p=function(){function e(e){this.bsModalRef=e}return Object.defineProperty(e.prototype,"curAction",{set:function(e){this.action=e},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.cancel=function(){null!=this.cuDetail&&this.cuDetail.endEdit(),null!=this.arDetail&&this.arDetail.endEdit(),null!=this.spDetail&&this.spDetail.endEdit(),this.bsModalRef.hide()},e.prototype.confirm=function(){this.bsModalRef.hide()},e.ɵfac=function(t){return new(t||e)(r.ɵɵdirectiveInject(o.BsModalRef))},e.ɵcmp=r.ɵɵdefineComponent({type:e,selectors:[["action-detail-modal"]],viewQuery:function(e,t){var n;(1&e&&(r.ɵɵviewQuery(i,!0),r.ɵɵviewQuery(a,!0),r.ɵɵviewQuery(l,!0)),2&e)&&(r.ɵɵqueryRefresh(n=r.ɵɵloadQuery())&&(t.cuDetail=n.first),r.ɵɵqueryRefresh(n=r.ɵɵloadQuery())&&(t.arDetail=n.first),r.ɵɵqueryRefresh(n=r.ɵɵloadQuery())&&(t.spDetail=n.first))},inputs:{curAction:"curAction"},decls:13,vars:3,consts:[["tabindex","-1","role","dialog",1,"modal-body"],[1,"row"],[1,"col-md-12"],[3,"action","actionChange",4,"ngIf"],[1,"button-holder","text-right"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",3,"click"],["key","modal.button.close"],[3,"action","actionChange"],["cuDetail",""],["arDetail",""],["spDetail",""]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"div",0),r.ɵɵelementStart(1,"div",1),r.ɵɵelementStart(2,"div",2),r.ɵɵtemplate(3,c,2,1,"crtable-detail-create-geo-object",3),r.ɵɵtemplate(4,s,2,1,"crtable-detail-add-remove-child",3),r.ɵɵtemplate(5,d,2,1,"set-parent-detail",3),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelement(6,"hr"),r.ɵɵelementStart(7,"div",1),r.ɵɵelementStart(8,"div",2),r.ɵɵelementStart(9,"div",4),r.ɵɵelementStart(10,"button",5),r.ɵɵlistener("click",(function(){return t.cancel()})),r.ɵɵelementStart(11,"span"),r.ɵɵelement(12,"localize",6),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(3),r.ɵɵproperty("ngIf",t.action&&(t.action.actionType.endsWith("CreateGeoObjectAction")||t.action.actionType.endsWith("UpdateGeoObjectAction"))),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",t.action&&(t.action.actionType.endsWith("AddChildAction")||t.action.actionType.endsWith("RemoveChildAction"))),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",t.action&&t.action.actionType.endsWith("SetParentAction")))},encapsulation:2}),e}();t.ActionDetailModalComponent=p},613:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageVersionsModalComponent=void 0;n(0),n(30);var r=n(37),o=n(7),i=n(546),a=(n(545),n(174)),l=(n(15),n(614)),c=n(0),s=n(545),d=n(15),p=n(30),m=n(1),u=n(27),g=n(44),f=n(577);function h(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",11),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.message)}}function v(e,t){1&e&&(c.ɵɵelementStart(0,"div",11),c.ɵɵelement(1,"localize",12),c.ɵɵelementEnd())}function b(e,t){1&e&&(c.ɵɵelementStart(0,"h2"),c.ɵɵelement(1,"localize",13),c.ɵɵelementEnd())}function y(e,t){1&e&&(c.ɵɵelementStart(0,"p",38),c.ɵɵtext(1,"Value is required."),c.ɵɵelementEnd())}function S(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td",36),c.ɵɵelementStart(2,"h5"),c.ɵɵtext(3),c.ɵɵelementEnd(),c.ɵɵelementStart(4,"input",37),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.value=e}))("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.value=e})),c.ɵɵelementEnd(),c.ɵɵelementStart(5,"div",32),c.ɵɵtemplate(6,y,2,0,"p",33),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=t.index,i=c.ɵɵnextContext().index;c.ɵɵadvance(3),c.ɵɵtextInterpolate(r.locale),c.ɵɵadvance(1),c.ɵɵproperty("name","loc-val-"+i+"-"+o)("ngModel",r.value)("required","defaultLocale"===r.locale),c.ɵɵadvance(2),c.ɵɵproperty("ngIf","defaultLocale"===r.locale&&!r.value)}}function C(e,t){1&e&&(c.ɵɵelementStart(0,"p",38),c.ɵɵtext(1,"Start date is required."),c.ɵɵelementEnd())}function E(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td"),c.ɵɵelementStart(2,"table",30),c.ɵɵtemplate(3,S,7,5,"tr",29),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(4,"td",22),c.ɵɵelementStart(5,"input",31),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.startDate=e}))("blur",(function(e){c.ɵɵrestoreView(n);var r=t.$implicit;return c.ɵɵnextContext(4).onDateChange(e,r)})),c.ɵɵelementEnd(),c.ɵɵelementStart(6,"div",32),c.ɵɵtemplate(7,C,2,0,"p",33),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(8,"td",25),c.ɵɵelementStart(9,"p",21),c.ɵɵtext(10),c.ɵɵpipe(11,"date"),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(12,"td",34),c.ɵɵelementStart(13,"i",35),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext(4).remove(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=t.index;c.ɵɵadvance(3),c.ɵɵproperty("ngForOf",r.value.localeValues),c.ɵɵadvance(2),c.ɵɵproperty("name","startDate_"+o)("ngModel",r.startDate),c.ɵɵadvance(2),c.ɵɵproperty("ngIf",!r.startDate),c.ɵɵadvance(3),c.ɵɵtextInterpolate1(" ",c.ɵɵpipeBind2(11,5,r.endDate,"MM-dd-yyyy")," ")}}function x(e,t){if(1&e&&(c.ɵɵelementStart(0,"tbody"),c.ɵɵtemplate(1,E,14,8,"tr",29),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(3);c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",n.geoObjectOverTime.attributes[n.attribute.code].values)}}function O(e,t){if(1&e&&(c.ɵɵelementStart(0,"option",43),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵproperty("value",n.code),c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.label.localizedValue)}}function I(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td"),c.ɵɵelementStart(2,"select",39),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.value=e})),c.ɵɵelement(3,"option",40),c.ɵɵtemplate(4,O,2,2,"option",41),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(5,"td"),c.ɵɵelementStart(6,"input",31),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.startDate=e}))("blur",(function(e){c.ɵɵrestoreView(n);var r=t.$implicit;return c.ɵɵnextContext(4).onDateChange(e,r)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(7,"td"),c.ɵɵelementStart(8,"p",21),c.ɵɵtext(9),c.ɵɵpipe(10,"date"),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(11,"td",42),c.ɵɵelementStart(12,"i",35),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext(4).remove(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=t.index,i=c.ɵɵnextContext(4);c.ɵɵadvance(2),c.ɵɵpropertyInterpolate1("id","mod-",i.attribute.code,""),c.ɵɵproperty("name","mod-term-"+o+"-"+i.attribute.code)("ngModel",r.value),c.ɵɵadvance(2),c.ɵɵproperty("ngForOf",i.getGeoObjectTypeTermAttributeOptions(i.attribute.code)),c.ɵɵadvance(2),c.ɵɵproperty("name","startDate-"+o)("ngModel",r.startDate),c.ɵɵadvance(3),c.ɵɵtextInterpolate1(" ",c.ɵɵpipeBind2(10,7,r.endDate,"MM-dd-yyyy")," ")}}function M(e,t){if(1&e&&(c.ɵɵelementStart(0,"tbody"),c.ɵɵtemplate(1,I,13,10,"tr",29),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(3);c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",n.geoObjectOverTime.attributes[n.attribute.code].values)}}function w(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td"),c.ɵɵelementStart(2,"input",44),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.value=e}))("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.value=e})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(3,"td"),c.ɵɵelementStart(4,"input",31),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.startDate=e}))("blur",(function(e){c.ɵɵrestoreView(n);var r=t.$implicit;return c.ɵɵnextContext(4).onDateChange(e,r)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(5,"td"),c.ɵɵelementStart(6,"p",21),c.ɵɵtext(7),c.ɵɵpipe(8,"date"),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(9,"td",42),c.ɵɵelementStart(10,"i",35),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext(4).remove(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=t.index;c.ɵɵadvance(2),c.ɵɵproperty("name","char-val-"+o)("ngModel",r.value),c.ɵɵadvance(2),c.ɵɵproperty("name","startDate-"+o)("ngModel",r.startDate),c.ɵɵadvance(3),c.ɵɵtextInterpolate1(" ",c.ɵɵpipeBind2(8,5,r.endDate,"MM-dd-yyyy")," ")}}function j(e,t){if(1&e&&(c.ɵɵelementStart(0,"tbody"),c.ɵɵtemplate(1,w,11,8,"tr",29),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(3);c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",n.geoObjectOverTime.attributes[n.attribute.code].values)}}function k(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td"),c.ɵɵelementStart(2,"input",45),c.ɵɵlistener("ngModelChange",(function(e){c.ɵɵrestoreView(n);var r=t.$implicit;return c.ɵɵnextContext(4).setDateAttribute(r,e)})),c.ɵɵpipe(3,"date"),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(4,"td"),c.ɵɵelementStart(5,"input",31),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.startDate=e}))("blur",(function(e){c.ɵɵrestoreView(n);var r=t.$implicit;return c.ɵɵnextContext(4).onDateChange(e,r)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(6,"td"),c.ɵɵelementStart(7,"p",21),c.ɵɵtext(8),c.ɵɵpipe(9,"date"),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(10,"td",42),c.ɵɵelementStart(11,"i",35),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext(4).remove(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=t.index;c.ɵɵadvance(2),c.ɵɵproperty("name","char-val-"+o)("ngModel",c.ɵɵpipeBind2(3,5,r.value,"yyyy-MM-dd")),c.ɵɵadvance(3),c.ɵɵproperty("name","startDate-"+o)("ngModel",r.startDate),c.ɵɵadvance(3),c.ɵɵtextInterpolate1(" ",c.ɵɵpipeBind2(9,8,r.endDate,"MM-dd-yyyy")," ")}}function T(e,t){if(1&e&&(c.ɵɵelementStart(0,"tbody"),c.ɵɵtemplate(1,k,12,11,"tr",29),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(3);c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",n.geoObjectOverTime.attributes[n.attribute.code].values)}}function P(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td"),c.ɵɵelementStart(2,"label"),c.ɵɵelementStart(3,"input",46),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.value=e})),c.ɵɵelementEnd(),c.ɵɵelement(4,"localize",47),c.ɵɵelementEnd(),c.ɵɵelementStart(5,"label"),c.ɵɵelementStart(6,"input",46),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.value=e})),c.ɵɵelementEnd(),c.ɵɵelement(7,"localize",48),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(8,"td"),c.ɵɵelementStart(9,"input",31),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.startDate=e}))("blur",(function(e){c.ɵɵrestoreView(n);var r=t.$implicit;return c.ɵɵnextContext(4).onDateChange(e,r)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(10,"td"),c.ɵɵelementStart(11,"p",21),c.ɵɵtext(12),c.ɵɵpipe(13,"date"),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(14,"td",42),c.ɵɵelementStart(15,"i",35),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext(4).remove(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=t.index;c.ɵɵadvance(3),c.ɵɵpropertyInterpolate1("id","mod-",o,"-true"),c.ɵɵpropertyInterpolate1("name","mod-",o,"-true"),c.ɵɵproperty("checked",!0===r.value)("value",!0)("ngModel",r.value),c.ɵɵadvance(3),c.ɵɵpropertyInterpolate1("id","mod-",o,"-false"),c.ɵɵpropertyInterpolate1("name","mod-",o,"-false"),c.ɵɵproperty("checked",!1===r.value)("value",!1)("ngModel",r.value),c.ɵɵadvance(3),c.ɵɵproperty("name","startDate-"+o)("ngModel",r.startDate),c.ɵɵadvance(3),c.ɵɵtextInterpolate1(" ",c.ɵɵpipeBind2(13,13,r.endDate,"MM-dd-yyyy")," ")}}function z(e,t){if(1&e&&(c.ɵɵelementStart(0,"tbody"),c.ɵɵtemplate(1,P,16,16,"tr",29),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(3);c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",n.geoObjectOverTime.attributes[n.attribute.code].values)}}function V(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td"),c.ɵɵelementStart(2,"input",49),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.value=e}))("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.value=e})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(3,"td"),c.ɵɵelementStart(4,"input",31),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.startDate=e}))("blur",(function(e){c.ɵɵrestoreView(n);var r=t.$implicit;return c.ɵɵnextContext(4).onDateChange(e,r)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(5,"td"),c.ɵɵelementStart(6,"p",21),c.ɵɵtext(7),c.ɵɵpipe(8,"date"),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(9,"td",42),c.ɵɵelementStart(10,"i",35),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext(4).remove(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=t.index;c.ɵɵadvance(2),c.ɵɵproperty("name","char-val-"+o)("ngModel",r.value),c.ɵɵadvance(2),c.ɵɵproperty("name","startDate-"+o)("ngModel",r.startDate),c.ɵɵadvance(3),c.ɵɵtextInterpolate1(" ",c.ɵɵpipeBind2(8,5,r.endDate,"MM-dd-yyyy")," ")}}function N(e,t){if(1&e&&(c.ɵɵelementStart(0,"tbody"),c.ɵɵtemplate(1,V,11,8,"tr",29),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(3);c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",n.geoObjectOverTime.attributes[n.attribute.code].values)}}function R(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td"),c.ɵɵelementStart(2,"input",49),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.value=e}))("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.value=e})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(3,"td"),c.ɵɵelementStart(4,"input",31),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.startDate=e}))("blur",(function(e){c.ɵɵrestoreView(n);var r=t.$implicit;return c.ɵɵnextContext(4).onDateChange(e,r)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(5,"td"),c.ɵɵelementStart(6,"p",21),c.ɵɵtext(7),c.ɵɵpipe(8,"date"),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(9,"td",42),c.ɵɵelementStart(10,"i",35),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext(4).remove(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=t.index;c.ɵɵadvance(2),c.ɵɵproperty("name","char-val-"+o)("ngModel",r.value),c.ɵɵadvance(2),c.ɵɵproperty("name","startDate-"+o)("ngModel",r.startDate),c.ɵɵadvance(3),c.ɵɵtextInterpolate1(" ",c.ɵɵpipeBind2(8,5,r.endDate,"MM-dd-yyyy")," ")}}function A(e,t){if(1&e&&(c.ɵɵelementStart(0,"tbody"),c.ɵɵtemplate(1,R,11,8,"tr",29),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(3);c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",n.geoObjectOverTime.attributes[n.attribute.code].values)}}function D(e,t){if(1&e&&(c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"table",20),c.ɵɵelementStart(2,"thead",21),c.ɵɵelementStart(3,"tr"),c.ɵɵelementStart(4,"th",22),c.ɵɵelement(5,"localize",23),c.ɵɵelementEnd(),c.ɵɵelementStart(6,"th",22),c.ɵɵelement(7,"localize",24),c.ɵɵelementEnd(),c.ɵɵelementStart(8,"th",25),c.ɵɵelement(9,"localize",26),c.ɵɵelementEnd(),c.ɵɵelementStart(10,"th",27),c.ɵɵelement(11,"localize",28),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵtemplate(12,x,2,1,"tbody",3),c.ɵɵtemplate(13,M,2,1,"tbody",3),c.ɵɵtemplate(14,j,2,1,"tbody",3),c.ɵɵtemplate(15,T,2,1,"tbody",3),c.ɵɵtemplate(16,z,2,1,"tbody",3),c.ɵɵtemplate(17,N,2,1,"tbody",3),c.ɵɵtemplate(18,A,2,1,"tbody",3),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(2);c.ɵɵadvance(12),c.ɵɵproperty("ngIf","local"===n.attribute.type),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","term"===n.attribute.type),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","character"===n.attribute.type),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","date"===n.attribute.type),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","boolean"===n.attribute.type),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","float"===n.attribute.type),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","integer"===n.attribute.type)}}function L(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"button",56),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=c.ɵɵnextContext().index;return c.ɵɵnextContext(3).editGeometry(e)})),c.ɵɵelement(1,"localize",57),c.ɵɵelementEnd()}}function F(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"geoobject-editor-map",58,59),c.ɵɵlistener("geometryChange",(function(e){c.ɵɵrestoreView(n);var t=c.ɵɵnextContext().$implicit;return c.ɵɵnextContext(3).geometryChange(t,e)})),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵnextContext().$implicit,o=c.ɵɵnextContext(3);c.ɵɵproperty("geometryType",o.geoObjectType.geometryType)("readOnly",!o.geoObjectType.isGeometryEditable)("postGeometry",r.value)("bboxCode",o.geoObjectOverTime.attributes.code)("bboxType",o.geoObjectType.code)("bboxDate",r.startDate)}}function _(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td",42),c.ɵɵtemplate(2,L,2,0,"button",53),c.ɵɵtemplate(3,F,2,6,"geoobject-editor-map",54),c.ɵɵelementEnd(),c.ɵɵelementStart(4,"td",42),c.ɵɵelementStart(5,"input",55),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),t.$implicit.startDate=e}))("blur",(function(e){c.ɵɵrestoreView(n);var r=t.$implicit;return c.ɵɵnextContext(3).onDateChange(e,r)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(6,"td",42),c.ɵɵelementStart(7,"p",21),c.ɵɵtext(8),c.ɵɵpipe(9,"date"),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(10,"td",42),c.ɵɵelementStart(11,"i",35),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext(3).remove(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=t.index,i=c.ɵɵnextContext(3);c.ɵɵadvance(2),c.ɵɵproperty("ngIf",i.editingGeometry!=o),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",i.editingGeometry===o),c.ɵɵadvance(2),c.ɵɵpropertyInterpolate1("name","startDate-",o,""),c.ɵɵproperty("ngModel",r.startDate),c.ɵɵadvance(3),c.ɵɵtextInterpolate1(" ",c.ɵɵpipeBind2(9,5,r.endDate,"MM-dd-yyyy")," ")}}function G(e,t){if(1&e&&(c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"table",20),c.ɵɵelementStart(2,"thead",21),c.ɵɵelementStart(3,"th",50),c.ɵɵelement(4,"localize",23),c.ɵɵelementEnd(),c.ɵɵelementStart(5,"th",25),c.ɵɵelement(6,"localize",24),c.ɵɵelementEnd(),c.ɵɵelementStart(7,"th",51),c.ɵɵelement(8,"localize",26),c.ɵɵelementEnd(),c.ɵɵelementStart(9,"th",51),c.ɵɵelement(10,"localize",28),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(11,"tbody",52),c.ɵɵtemplate(12,_,12,8,"tr",29),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(2);c.ɵɵadvance(12),c.ɵɵproperty("ngForOf",n.geoObjectOverTime.attributes.geometry.values)}}function H(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"div",14),c.ɵɵelementStart(2,"div",15),c.ɵɵelementStart(3,"ul",16),c.ɵɵelementStart(4,"li",17),c.ɵɵtemplate(5,D,19,7,"div",3),c.ɵɵtemplate(6,G,13,1,"div",3),c.ɵɵelementEnd(),c.ɵɵelementStart(7,"li",17),c.ɵɵelementStart(8,"i",18),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onAddNewVersion()})),c.ɵɵelement(9,"localize",19),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵnextContext();c.ɵɵadvance(5),c.ɵɵproperty("ngIf","geometry"!==r.attribute.type),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","geometry"===r.attribute.type)}}function $(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"button",60),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onSubmit()})),c.ɵɵelement(1,"localize",61),c.ɵɵelementEnd()}if(2&e){c.ɵɵnextContext();var r=c.ɵɵreference(6);c.ɵɵproperty("disabled",!r.valid)}}var B=function(){function e(e,t,n,r,o){this.service=e,this.iService=t,this.lService=n,this.bsModalRef=r,this.changeDetectorRef=o,this.message=null,this.readonly=!1,this.isNewGeoObject=!1,this.editingGeometry=-1,this.hasDuplicateDate=!1}return e.prototype.ngOnInit=function(){this.onAttributeVersionChange=new r.Subject},e.prototype.tfInit=function(){"geometry"===this.attribute.code&&1===this.geoObjectOverTime.attributes[this.attribute.code].values.length&&(this.editingGeometry=0)},e.prototype.geometryChange=function(e,t){e.value=t},e.prototype.onDateChange=function(e,t){var n=this.geoObjectOverTime.attributes[this.attribute.code].values;this.snapDates(n)},e.prototype.snapDates=function(e){this.hasDuplicateDate=!1,e.sort((function(e,t){return null==e.startDate||""===e.startDate?1:null==t.startDate||""===t.startDate?-1:new Date(e.startDate)-new Date(t.startDate)}));for(var t=1;t<e.length;t++){var n=e[t-1],r=e[t];r.startDate?n.endDate=l.default.formatDateString(new Date(new Date(r.startDate).getTime()-864e5)):n.endDate=i.PRESENT,n.startDate===r.startDate&&(this.hasDuplicateDate=!0)}e.length>0&&(e[e.length-1].endDate=i.PRESENT)},e.prototype.onAddNewVersion=function(){var e=this.geoObjectOverTime.attributes[this.attribute.code].values,t=new i.ValueOverTime;if(t.startDate=null,t.endDate=null,"local"===this.attribute.type)t.value=this.lService.create();else if("geometry"===this.attribute.type)e.length>0?-1!=this.editingGeometry&&null!=this.editingGeometry?t.value=e[this.editingGeometry].value:t.value=e[0].value:(t.value={type:this.geoObjectType.geometryType,coordinates:[]},"MULTIPOLYGON"===this.geoObjectType.geometryType?t.value.type="MultiPolygon":"POLYGON"===this.geoObjectType.geometryType?t.value.type="Polygon":"POINT"===this.geoObjectType.geometryType?t.value.type="Point":"MULTIPOINT"===this.geoObjectType.geometryType?t.value.type="MultiPoint":"LINE"===this.geoObjectType.geometryType?t.value.type="Line":"MULTILINE"===this.geoObjectType.geometryType&&(t.value.type="MultiLine"));else if("term"===this.attribute.type){var n=this.getGeoObjectTypeTermAttributeOptions(this.attribute.code);n.length>0&&(t.value=n[0].code)}e.push(t),"geometry"===this.attribute.code&&(this.editingGeometry=e.length-1),this.snapDates(e),this.changeDetectorRef.detectChanges()},e.prototype.editGeometry=function(e){this.editingGeometry=e},e.prototype.getVersionData=function(e){var t=[];return this.geoObjectOverTime.attributes[e.code].values.forEach((function(e){e.value.localeValues.forEach((function(e){t.push(e)}))})),t},e.prototype.getDefaultLocaleVal=function(e){var t=null;return e.localeValues.forEach((function(e){"defaultLocale"===e.locale&&(t=e.value)})),t},e.prototype.setDateAttribute=function(e,t){e.value=new Date(t).getTime().toString()},e.prototype.getGeoObjectTypeTermAttributeOptions=function(e){for(var t=0;t<this.geoObjectType.attributes.length;t++){var n=this.geoObjectType.attributes[t];if("term"===n.type&&n.code===e){var r=(n=n).rootTerm.children;if(r.length>0)return"status"===n.code?l.default.removeStatuses(r):r}}return null},e.prototype.remove=function(e){for(var t=this.geoObjectOverTime.attributes[this.attribute.code],n=0;n<t.values.length;n++){t.values[n].startDate===e.startDate&&t.values.splice(n,1)}this.snapDates(t.values)},e.prototype.isChangeOverTime=function(e){var t=this,n=!1;return this.geoObjectType.attributes.forEach((function(r){t.attribute.code===e.code&&(n=e.isChangeOverTime)})),n},e.prototype.onSubmit=function(){this.onAttributeVersionChange.next(this.geoObjectOverTime),this.bsModalRef.hide()},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(c.ɵɵdirectiveInject(s.RegistryService),c.ɵɵdirectiveInject(s.IOService),c.ɵɵdirectiveInject(d.LocalizationService),c.ɵɵdirectiveInject(p.BsModalRef),c.ɵɵdirectiveInject(c.ChangeDetectorRef))},e.ɵcmp=c.ɵɵdefineComponent({type:e,selectors:[["manage-versions-modal"]],hostVars:1,hostBindings:function(e,t){2&e&&c.ɵɵsyntheticHostProperty("@fadeInOut",!0)},inputs:{attribute:"attribute",geoObjectType:"geoObjectType",geoObjectOverTime:"geoObjectOverTime",isNewGeoObject:"isNewGeoObject"},decls:15,vars:5,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"text-center"],[4,"ngIf"],[1,"modal-form"],["versionsform","ngForm"],[1,"row-holder"],[1,"holder",2,"width","100%","border","none"],[1,"holder",2,"border","none","width","100%"],[1,"button-holder","pull-right"],["type","submit","class","btn btn-primary","role","button",3,"disabled","click",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["key","changeovertime.manageVersions.duplicateDate"],["key","changeovertime.manageVersions.widget.title"],[1,"panel",2,"box-shadow","none"],[1,"panel-body"],[1,"list-group"],[1,"list-group-item",2,"text-align","left"],[1,"fa","fa-plus","clickable",3,"click"],["key","changeovertime.manageVersions.newVersion"],[1,"table","table-striped"],[2,"font-size","14px"],[2,"width","35%"],["key","changeovertime.manageVersions.tableHeader.label.value"],["key","changeovertime.manageVersions.tableHeader.label.startDate"],[2,"width","20%"],["key","changeovertime.manageVersions.tableHeader.label.endDate"],[2,"width","10%","text-align","center"],["key","changeovertime.manageVersions.tableHeader.label.actions"],[4,"ngFor","ngForOf"],[2,"width","100%"],["type","date","required","",2,"width","100%",3,"name","ngModel","ngModelChange","blur"],[1,"form-input-validation-error-message-wrapper"],["class","error-message",4,"ngIf"],[2,"vertical-align","middle","width","10%","padding","5px","text-align","center"],[1,"fa","fa-times","clickable","delete-btn",3,"click"],[2,"vertical-align","bottom","width","35%","padding","0","padding-top","5px"],["type","text",1,"form-control",3,"name","ngModel","required","ngModelChange"],[1,"error-message"],[1,"select-area",2,"float","none",3,"id","name","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"vertical-align","middle"],[3,"value"],["type","text","required","",1,"form-control",3,"name","ngModel","ngModelChange"],["type","date","required","",1,"form-control",3,"name","ngModel","ngModelChange"],["type","radio",3,"checked","value","ngModel","id","name","ngModelChange"],["key","change.request.boolean.option.true"],["key","change.request.boolean.option.false"],["type","number","required","",1,"form-control",3,"name","ngModel","ngModelChange"],[2,"width","60%"],[2,"width","10%"],[2,"text-align","center"],["class","btn","role","button",3,"click",4,"ngIf"],[3,"geometryType","readOnly","postGeometry","bboxCode","bboxType","bboxDate","geometryChange",4,"ngIf"],["type","date","required","",3,"name","ngModel","ngModelChange","blur"],["role","button",1,"btn",3,"click"],["key","changeovertime.manageVersions.geometry.edit"],[3,"geometryType","readOnly","postGeometry","bboxCode","bboxType","bboxDate","geometryChange"],["geometryEditor",""],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.ok"]],template:function(e,t){1&e&&(c.ɵɵelementStart(0,"div",0),c.ɵɵtemplate(1,h,2,1,"div",1),c.ɵɵtemplate(2,v,2,0,"div",1),c.ɵɵelementStart(3,"div",2),c.ɵɵtemplate(4,b,2,0,"h2",3),c.ɵɵelementEnd(),c.ɵɵelementStart(5,"form",4,5),c.ɵɵelementStart(7,"fieldset"),c.ɵɵelementStart(8,"div",6),c.ɵɵelementStart(9,"div",7),c.ɵɵtemplate(10,H,10,2,"div",3),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(11,"div",6),c.ɵɵelementStart(12,"div",8),c.ɵɵelementStart(13,"div",9),c.ɵɵtemplate(14,$,2,1,"button",10),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e&&(c.ɵɵadvance(1),c.ɵɵproperty("ngIf",null!=t.message),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",t.hasDuplicateDate),c.ɵɵadvance(2),c.ɵɵproperty("ngIf",!t.readonly),c.ɵɵadvance(6),c.ɵɵproperty("ngIf",t.geoObjectOverTime),c.ɵɵadvance(4),c.ɵɵproperty("ngIf",!t.readonly))},directives:[m.NgIf,u.ɵangular_packages_forms_forms_y,u.NgControlStatusGroup,u.NgForm,g.LocalizeComponent,m.NgForOf,u.DefaultValueAccessor,u.RequiredValidator,u.NgControlStatus,u.NgModel,u.SelectControlValueAccessor,u.NgSelectOption,u.ɵangular_packages_forms_forms_x,u.RadioControlValueAccessor,u.NumberValueAccessor,f.GeoObjectEditorMapComponent],pipes:[m.DatePipe],styles:["td[_ngcontent-%COMP%] {\n    vertical-align: bottom;\n}\n\n.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%] {\n    vertical-align: bottom;\n}"],data:{animation:[[o.trigger("fadeInOut",[o.transition("void => *",[o.style({opacity:0}),o.animate("1000ms")]),o.transition("* => void",[o.style({opacity:0}),o.animate("1000ms")])])]]}}),e}();t.ManageVersionsModalComponent=B},614:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.removeStatuses=function(e){for(var t=[],n=0;n<e.length;++n)"CGR:Status-New"!==e[n].code&&"CGR:Status-Pending"!==e[n].code&&t.push(e[n]);return t},e.formatDateString=function(e){var t=e.getUTCDate(),n=e.getUTCMonth()+1;return e.getUTCFullYear()+"-"+(n<10?"0":"")+n+"-"+(t<10?"0":"")+t},e}();t.default=r},615:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleEditControl=void 0;var r=n(0),o=n(0),i=n(1);function a(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",1),o.ɵɵelementStart(1,"button",2),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().onClick()})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}}var l=function(){function e(e){this.visible=!1,this.editEmitter=new r.EventEmitter,this.elRef=e}return e.prototype.onAdd=function(e){return this.visible=!0,this.elRef.nativeElement},e.prototype.onRemove=function(e){this.elRef.nativeElement.remove()},e.prototype.onClick=function(){this.editEmitter.emit()},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(o.ElementRef))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["simple-edit-control"]],inputs:{visible:"visible"},outputs:{editEmitter:"editEmitter"},decls:1,vars:1,consts:[["class","mapboxgl-ctrl-group mapboxgl-ctrl",4,"ngIf"],[1,"mapboxgl-ctrl-group","mapboxgl-ctrl"],["title","location.management.editing | localize",1,"fa","fa-pencil-square-o",2,"color","black","font-size","18px",3,"click"]],template:function(e,t){1&e&&o.ɵɵtemplate(0,a,2,0,"div",0),2&e&&o.ɵɵproperty("ngIf",t.visible)},directives:[i.NgIf],encapsulation:2}),e}();t.SimpleEditControl=l},616:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectAttributeExcludesPipe=void 0;n(0);var r=n(0),o=function(){function e(){}return e.prototype.transform=function(e,t){return e&&t?e.filter((function(e){return-1===t.indexOf(e.code)})):e},e.ɵfac=function(t){return new(t||e)},e.ɵpipe=r.ɵɵdefinePipe({name:"geoObjectAttributeExcludesFilter",type:e,pure:!0}),e}();t.GeoObjectAttributeExcludesPipe=o},617:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageParentVersionsModalComponent=void 0;n(0),n(30);var r=n(37),o=n(37),i=n(546),a=(n(545),n(15),n(174)),l=n(0),c=n(545),s=n(15),d=n(30),p=n(1),m=n(44),u=n(27),g=n(175);function f(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",15),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.message)}}function h(e,t){1&e&&(l.ɵɵelementStart(0,"div",15),l.ɵɵelement(1,"localize",16),l.ɵɵelementEnd())}function v(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"div",37),l.ɵɵtext(1),l.ɵɵelementStart(2,"input",38),l.ɵɵlistener("ngModelChange",(function(e){l.ɵɵrestoreView(n);var r=t.$implicit;return l.ɵɵnextContext().$implicit.parents[r.code].text=e}))("typeaheadOnSelect",(function(e){l.ɵɵrestoreView(n);var r=t.$implicit,o=l.ɵɵnextContext().$implicit;return l.ɵɵnextContext(2).typeaheadOnSelect(e,r,o,o.startDate)})),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=t.index,i=l.ɵɵnextContext(),a=i.index,c=i.$implicit,s=l.ɵɵnextContext(2);l.ɵɵadvance(1),l.ɵɵtextInterpolate1(" ",r.label," "),l.ɵɵadvance(1),l.ɵɵpropertyInterpolate2("name","",r.code,"-",a,""),l.ɵɵproperty("disabled",null==c.startDate||""===c.startDate)("ngModel",c.parents[r.code].text)("typeaheadAsync",!0)("typeahead",s.getTypeAheadObservable(c.startDate,r,c,o))("typeaheadOptionsLimit",7)("typeaheadMinLength",0)("typeaheadWaitMs",300)}}function b(e,t){if(1&e&&(l.ɵɵelementStart(0,"p",20),l.ɵɵtext(1),l.ɵɵpipe(2,"date"),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext().$implicit;l.ɵɵadvance(1),l.ɵɵtextInterpolate1(" ",l.ɵɵpipeBind2(2,1,n.endDate,"MM-dd-yyyy")," ")}}function y(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"tr"),l.ɵɵelementStart(1,"td"),l.ɵɵtemplate(2,v,3,10,"div",31),l.ɵɵelementEnd(),l.ɵɵelementStart(3,"td",32),l.ɵɵelementStart(4,"input",33),l.ɵɵlistener("ngModelChange",(function(e){return l.ɵɵrestoreView(n),t.$implicit.startDate=e}))("blur",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext(2).snapDates()})),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(5,"td",32),l.ɵɵtemplate(6,b,3,4,"p",34),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"td",35),l.ɵɵelementStart(8,"i",36),l.ɵɵlistener("click",(function(){l.ɵɵrestoreView(n);var e=t.$implicit;return l.ɵɵnextContext(2).remove(e)})),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=t.index,i=l.ɵɵnextContext(2);l.ɵɵadvance(2),l.ɵɵproperty("ngForOf",i.hierarchy.types),l.ɵɵadvance(2),l.ɵɵpropertyInterpolate1("name","startDate-",o,""),l.ɵɵproperty("ngModel",r.startDate),l.ɵɵadvance(2),l.ɵɵproperty("ngIf",null!=r.startDate&&""!==r.startDate)}}function S(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"ul",17),l.ɵɵelementStart(1,"li",18),l.ɵɵelementStart(2,"table",19),l.ɵɵelementStart(3,"thead",20),l.ɵɵelementStart(4,"tr"),l.ɵɵelementStart(5,"th",21),l.ɵɵelement(6,"localize",22),l.ɵɵelementEnd(),l.ɵɵelementStart(7,"th",21),l.ɵɵelement(8,"localize",23),l.ɵɵelementEnd(),l.ɵɵelementStart(9,"th",24),l.ɵɵelement(10,"localize",25),l.ɵɵelementEnd(),l.ɵɵelementStart(11,"th",26),l.ɵɵelement(12,"localize",27),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(13,"tbody"),l.ɵɵtemplate(14,y,9,4,"tr",28),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(15,"li",18),l.ɵɵelementStart(16,"i",29),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().onAddNewVersion()})),l.ɵɵelement(17,"localize",30),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var r=l.ɵɵnextContext();l.ɵɵadvance(14),l.ɵɵproperty("ngForOf",r.hierarchy.entries)}}var C=function(){function e(e,t,n,r){this.service=e,this.iService=t,this.lService=n,this.bsModalRef=r,this.message=null,this.hierarchy=null,this.hasDuplicateDate=!1}return e.prototype.ngOnInit=function(){this.onVersionChange=new r.Subject},e.prototype.init=function(e){this.hierarchy=e},e.prototype.onAddNewVersion=function(){for(var e={},t=0;t<this.hierarchy.types.length;t++){e[this.hierarchy.types[t].code]={}}var n={startDate:null,endDate:null,parents:e};this.hierarchy.entries.push(n)},e.prototype.remove=function(e){for(var t=0;t<this.hierarchy.entries.length;t++){this.hierarchy.entries[t].startDate===e.startDate&&this.hierarchy.entries.splice(t,1)}this.snapDates()},e.prototype.getTypeAheadObservable=function(e,t,n,r){var i=this,a=t.code,l=null,c=null;if(r>0){var s=this.hierarchy.types[r-1],d=n.parents[s.code];null!=d.geoObject&&null!=d.geoObject.properties.code&&(c=this.hierarchy.code,l=d.geoObject.properties.code)}return o.Observable.create((function(r){i.service.getGeoObjectSuggestions(n.parents[t.code].text,a,l,c,e).then((function(e){r.next(e)}))}))},e.prototype.typeaheadOnSelect=function(e,t,n,r){for(var o=this,i=[],a=0;a<this.hierarchy.types.length;a++){var l=this.hierarchy.types[a];if(i.push(l.code),l.code===t.code)break}this.service.getParentGeoObjects(e.item.uid,t.code,i,!0,r).then((function(e){n.parents[t.code].geoObject=e.geoObject,n.parents[t.code].text=e.geoObject.properties.displayLabel.localizedValue;for(var r=0;r<o.hierarchy.types.length;r++){for(var i=o.hierarchy.types[r],a=e;null!=a&&a.geoObject.properties.type!=i.code;)a=a.parents.length>0?a.parents[0]:null;null!=a&&(n.parents[i.code].geoObject=a.geoObject,n.parents[i.code].text=a.geoObject.properties.displayLabel.localizedValue)}})).catch((function(e){o.error(e)}))},e.prototype.onSubmit=function(){this.onVersionChange.next(this.hierarchy),this.bsModalRef.hide()},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.onDateChange=function(e){this.snapDates()},e.prototype.snapDates=function(){this.hasDuplicateDate=!1,this.hierarchy.entries.sort((function(e,t){return null==e.startDate||""===e.startDate?1:null==t.startDate||""===t.startDate?-1:new Date(e.startDate)-new Date(t.startDate)}));for(var e=1;e<this.hierarchy.entries.length;e++){var t=this.hierarchy.entries[e-1],n=this.hierarchy.entries[e];t.endDate=this.formatDateString(new Date(new Date(n.startDate).getTime()-864e5)),t.startDate===n.startDate&&(this.hasDuplicateDate=!0)}this.hierarchy.entries.length>0&&(this.hierarchy.entries[this.hierarchy.entries.length-1].endDate=i.PRESENT)},e.prototype.formatDateString=function(e){var t=e.getUTCDate();return e.getUTCFullYear()+"-"+(e.getUTCMonth()+1)+"-"+(t<10?"0":"")+t},e.prototype.error=function(e){this.message=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(c.RegistryService),l.ɵɵdirectiveInject(c.IOService),l.ɵɵdirectiveInject(s.LocalizationService),l.ɵɵdirectiveInject(d.BsModalRef))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["manage-parent-versions-modal"]],decls:19,vars:4,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"text-center"],["key","changeovertime.manageVersions.widget.title"],[1,"modal-form"],["form","ngForm"],[1,"row-holder"],[1,"holder",2,"width","100%","border","none"],[1,"panel",2,"box-shadow","none"],[1,"panel-body"],["class","list-group",4,"ngIf"],[1,"holder",2,"border","none","width","100%"],[1,"button-holder","pull-right"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","io.ok"],["role","alert",1,"alert","alert-danger"],["key","changeovertime.manageVersions.duplicateDate"],[1,"list-group"],[1,"list-group-item",2,"text-align","left"],[1,"table","table-striped"],[2,"font-size","14px"],[2,"width","35%"],["key","changeovertime.manageVersions.tableHeader.label.value"],["key","changeovertime.manageVersions.tableHeader.label.startDate"],[2,"width","20%"],["key","changeovertime.manageVersions.tableHeader.label.endDate"],[2,"width","10%","text-align","center"],["key","changeovertime.manageVersions.tableHeader.label.actions"],[4,"ngFor","ngForOf"],[1,"fa","fa-plus","clickable",3,"click"],["key","changeovertime.manageVersions.newVersion"],["class","col-sm-12","style","float:left;width:150px;",4,"ngFor","ngForOf"],[2,"vertical-align","bottom"],["type","date","required","",2,"width","100%",3,"name","ngModel","ngModelChange","blur"],["style","font-size: 14px;",4,"ngIf"],[2,"vertical-align","middle","width","10%","padding","5px","text-align","center"],[1,"fa","fa-times","delete-btn",3,"click"],[1,"col-sm-12",2,"float","left","width","150px"],["type","text","autocomplete","off","typeaheadOptionField","name","required","",1,"form-control",2,"width","150px",3,"name","disabled","ngModel","typeaheadAsync","typeahead","typeaheadOptionsLimit","typeaheadMinLength","typeaheadWaitMs","ngModelChange","typeaheadOnSelect"]],template:function(e,t){if(1&e&&(l.ɵɵelementStart(0,"div",0),l.ɵɵtemplate(1,f,2,1,"div",1),l.ɵɵtemplate(2,h,2,0,"div",1),l.ɵɵelementStart(3,"div",2),l.ɵɵelementStart(4,"h2"),l.ɵɵelement(5,"localize",3),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(6,"form",4,5),l.ɵɵelementStart(8,"fieldset"),l.ɵɵelementStart(9,"div",6),l.ɵɵelementStart(10,"div",7),l.ɵɵelementStart(11,"div",8),l.ɵɵelementStart(12,"div",9),l.ɵɵtemplate(13,S,18,1,"ul",10),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(14,"div",6),l.ɵɵelementStart(15,"div",11),l.ɵɵelementStart(16,"div",12),l.ɵɵelementStart(17,"button",13),l.ɵɵlistener("click",(function(){return t.onSubmit()})),l.ɵɵelement(18,"localize",14),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()),2&e){var n=l.ɵɵreference(7);l.ɵɵadvance(1),l.ɵɵproperty("ngIf",null!=t.message),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.hasDuplicateDate),l.ɵɵadvance(11),l.ɵɵproperty("ngIf",null!=t.hierarchy),l.ɵɵadvance(4),l.ɵɵproperty("disabled",n.invalid||t.hasDuplicateDate)}},directives:[p.NgIf,m.LocalizeComponent,u.ɵangular_packages_forms_forms_y,u.NgControlStatusGroup,u.NgForm,p.NgForOf,u.DefaultValueAccessor,u.RequiredValidator,u.NgControlStatus,u.NgModel,g.TypeaheadDirective],pipes:[p.DatePipe],encapsulation:2}),e}();t.ManageParentVersionsModalComponent=C},618:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeRequestPageComponent=void 0;n(0),n(30),n(15);var r=n(174),o=n(0),i=n(15),a=n(30),l=n(128),c=n(85),s=n(1),d=n(28),p=n(580),m=n(611),u=function(e){return{active:e}};function g(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"a",8),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().renderContent("MANAGE")})),o.ɵɵtext(1,"Manage"),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext();o.ɵɵproperty("ngClass",o.ɵɵpureFunction1(1,u,"MANAGE"===r.content))}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"a",8),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().renderContent("SUBMIT")})),o.ɵɵtext(1,"Submit"),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext();o.ɵɵproperty("ngClass",o.ɵɵpureFunction1(1,u,"SUBMIT"===r.content))}}function h(e,t){1&e&&o.ɵɵelement(0,"submit-change-request")}function v(e,t){1&e&&o.ɵɵelement(0,"request-table")}var b=function(){function e(e,t,n){this.localizationService=e,this.modalService=t,this.service=n,this.content="SUBMIT",this.isAdmin=n.isAdmin(),this.isMaintainer=this.isAdmin||n.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||n.isContributer(),this.isMaintainer?this.renderContent("MANAGE"):this.renderContent("SUBMIT")}return e.prototype.ngOnInit=function(){},e.prototype.renderContent=function(e){this.content=e,"SUBMIT"===e?this.pageTitle=this.localizationService.decode("change.request.page.title"):"MANAGE"===e&&(this.pageTitle=this.localizationService.decode("change.request.table.title"))},e.prototype.error=function(e){this.bsModalRef=this.modalService.show(r.ErrorModalComponent,{backdrop:!0}),this.bsModalRef.content.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.LocalizationService),o.ɵɵdirectiveInject(a.BsModalService),o.ɵɵdirectiveInject(i.AuthService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["change-request-page"]],decls:15,vars:5,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"heading"],["style","margin-right:10px;font-size:20px;",3,"routerLink","ngClass","click",4,"ngIf"],[1,"inner-col-content-wrapper",2,"padding-top","30px","margin-top","10px"],[4,"ngIf"],[2,"margin-right","10px","font-size","20px",3,"routerLink","ngClass","click"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelement(1,"cgr-header"),o.ɵɵelement(2,"loading-bar"),o.ɵɵelementStart(3,"div",1),o.ɵɵelementStart(4,"div",2),o.ɵɵelementStart(5,"div",3),o.ɵɵelementStart(6,"div",4),o.ɵɵelementStart(7,"h2"),o.ɵɵtext(8),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(9,"div"),o.ɵɵtemplate(10,g,2,3,"a",5),o.ɵɵtemplate(11,f,2,3,"a",5),o.ɵɵelementEnd(),o.ɵɵelementStart(12,"div",6),o.ɵɵtemplate(13,h,1,0,"submit-change-request",7),o.ɵɵtemplate(14,v,1,0,"request-table",7),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(8),o.ɵɵtextInterpolate1(" ",t.pageTitle," "),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",t.isMaintainer),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.isContributor),o.ɵɵadvance(2),o.ɵɵproperty("ngIf","SUBMIT"===t.content),o.ɵɵadvance(1),o.ɵɵproperty("ngIf","MANAGE"===t.content))},directives:[l.CgrHeaderComponent,c.LoadingBarComponent,s.NgIf,d.RouterLinkWithHref,s.NgClass,p.SubmitChangeRequestComponent,m.RequestTableComponent],styles:["a.active[_ngcontent-%COMP%] {\n\tborder-bottom: solid 2px #6BA542;\n}"]}),e}();t.ChangeRequestPageComponent=b},619:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MasterListComponent=void 0;n(0),n(28),n(30);var r=n(37),o=n(32),i=(n(545),n(610)),a=n(581),l=n(174),c=(n(15),n(0)),s=n(545),d=n(15),p=n(28),m=n(30),u=n(128),g=n(85),f=n(1),h=n(246),v=n(44),b=n(185),y=n(27),S=n(175),C=n(100);function E(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",21),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.message)}}function x(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",7),c.ɵɵelementStart(1,"h2"),c.ɵɵtext(2),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(2),c.ɵɵtextInterpolate1(" ",n.list.displayLabel," ")}}function O(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",6),c.ɵɵelementStart(1,"div",7),c.ɵɵelementStart(2,"h4"),c.ɵɵelement(3,"localize",22),c.ɵɵtext(4),c.ɵɵelementEnd(),c.ɵɵelementStart(5,"h4"),c.ɵɵelement(6,"localize",23),c.ɵɵtext(7),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(4),c.ɵɵtextInterpolate1(" : ",n.list.publishDate," "),c.ɵɵadvance(3),c.ɵɵtextInterpolate1(" : ",n.list.forDate," ")}}function I(e,t){if(1&e&&(c.ɵɵelementStart(0,"li"),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit;c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.label)}}function M(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",6),c.ɵɵelementStart(1,"div",24),c.ɵɵelement(2,"localize",25),c.ɵɵelementStart(3,"ol"),c.ɵɵtemplate(4,I,2,1,"li",26),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(4),c.ɵɵproperty("ngForOf",n.filter)}}var w=function(e){return{"fa fa-refresh clickable":!0,"fa-spin":e}};function j(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"span",10),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onPublish()})),c.ɵɵelement(1,"i",27),c.ɵɵelement(2,"localize",28),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵnextContext();c.ɵɵadvance(1),c.ɵɵproperty("ngClass",c.ɵɵpureFunction1(1,w,r.isRefreshing))}}function k(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"button",17),c.ɵɵlistener("click",(function(){return c.ɵɵrestoreView(n),c.ɵɵnextContext().onNewGeoObject()})),c.ɵɵelement(1,"localize",29),c.ɵɵelementEnd()}}function T(e,t){1&e&&c.ɵɵelement(0,"localize",30)}function P(e,t){1&e&&c.ɵɵelement(0,"localize",31)}function z(e,t){1&e&&(c.ɵɵelementStart(0,"th",33),c.ɵɵelement(1,"localize",38),c.ɵɵelementEnd())}function V(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",46),c.ɵɵelementStart(1,"a",47),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=c.ɵɵnextContext().$implicit;return c.ɵɵnextContext(2).toggleFilter(e)})),c.ɵɵelement(2,"i",48),c.ɵɵpipe(3,"localize"),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵnextContext().$implicit;c.ɵɵadvance(1),c.ɵɵattribute("aria-expanded",!r.isCollapsed),c.ɵɵadvance(1),c.ɵɵproperty("title",c.ɵɵpipeBind1(3,2,"button.filter.helptext"))}}function N(e,t){1&e&&c.ɵɵelement(0,"i",49)}function R(e,t){1&e&&c.ɵɵelement(0,"i",50)}function A(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"input",54),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).$implicit.value=e}))("keyup.enter",(function(){c.ɵɵrestoreView(n);var e=c.ɵɵnextContext(2).$implicit;return c.ɵɵnextContext(2).handleInputChange(e)})),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵnextContext(2).$implicit;c.ɵɵproperty("name",r.name)("ngModel",r.value)}}function D(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"input",55),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).$implicit.value.start=e}))("change",(function(){c.ɵɵrestoreView(n);var e=c.ɵɵnextContext(2).$implicit;return c.ɵɵnextContext(2).handleDateChange(e)})),c.ɵɵelementEnd(),c.ɵɵelementStart(2,"input",55),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).$implicit.value.end=e}))("change",(function(){c.ɵɵrestoreView(n);var e=c.ɵɵnextContext(2).$implicit;return c.ɵɵnextContext(2).handleDateChange(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵnextContext(2).$implicit;c.ɵɵadvance(1),c.ɵɵproperty("name",r.name+"Start")("ngModel",r.value.start),c.ɵɵadvance(1),c.ɵɵproperty("name",r.name+"End")("ngModel",r.value.end)}}function L(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"input",56),c.ɵɵlistener("ngModelChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(2).$implicit.search=e}))("typeaheadOnSelect",(function(e){c.ɵɵrestoreView(n);var t=c.ɵɵnextContext(2).$implicit;return c.ɵɵnextContext(2).handleListChange(e,t)})),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵnextContext(2).$implicit,o=c.ɵɵnextContext(2);c.ɵɵproperty("name",r.name)("ngModel",r.search)("typeaheadAsync",!0)("typeahead",o.getValues(r))("typeaheadOptionsLimit",100)("typeaheadMinLength",0)("typeaheadWaitMs",300)}}function F(e,t){if(1&e&&(c.ɵɵelementStart(0,"div"),c.ɵɵelementStart(1,"div",51),c.ɵɵtemplate(2,A,1,2,"input",52),c.ɵɵtemplate(3,D,3,4,"div",45),c.ɵɵtemplate(4,L,1,7,"input",53),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext().$implicit;c.ɵɵadvance(1),c.ɵɵproperty("collapse",n.isCollapsed),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","input"===n.type),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","date"===n.type),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","list"===n.type)}}function _(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"th",39),c.ɵɵtemplate(1,V,4,4,"div",40),c.ɵɵelementStart(2,"a",41),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext(2).onSort(e)})),c.ɵɵtext(3),c.ɵɵelementEnd(),c.ɵɵelementStart(4,"a",42),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext(2).onSort(e)})),c.ɵɵtemplate(5,N,1,0,"i",43),c.ɵɵtemplate(6,R,1,0,"i",44),c.ɵɵelementEnd(),c.ɵɵtemplate(7,F,5,4,"div",45),c.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=c.ɵɵnextContext(2);c.ɵɵadvance(1),c.ɵɵproperty("ngIf",o.isFilterable(r)),c.ɵɵadvance(2),c.ɵɵtextInterpolate1("",r.label," "),c.ɵɵadvance(2),c.ɵɵproperty("ngIf","ASC"===o.sort.order&&o.sort.attribute===r.name),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","DESC"===o.sort.order&&o.sort.attribute===r.name),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",o.isFilterable(r))}}function G(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"td",33),c.ɵɵelementStart(1,"a",60),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=c.ɵɵnextContext().$implicit;return c.ɵɵnextContext(2).onEdit(e)})),c.ɵɵpipe(2,"localize"),c.ɵɵelementEnd(),c.ɵɵelementEnd()}2&e&&(c.ɵɵadvance(1),c.ɵɵproperty("title",c.ɵɵpipeBind1(2,1,"button.edit.helptext")))}function H(e,t){if(1&e&&(c.ɵɵelementStart(0,"td",39),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=t.$implicit,r=c.ɵɵnextContext().$implicit;c.ɵɵadvance(1),c.ɵɵtextInterpolate(r[n.name])}}function $(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"tr",57),c.ɵɵelementStart(1,"td",58),c.ɵɵelementStart(2,"a",59),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=t.$implicit;return c.ɵɵnextContext(2).onGoto(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵtemplate(3,G,3,3,"td",35),c.ɵɵtemplate(4,H,2,1,"td",36),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵnextContext(2);c.ɵɵadvance(3),c.ɵɵproperty("ngIf",r.isWritable),c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",r.list.attributes)}}var B=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}};function q(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",24),c.ɵɵelementStart(1,"table",32),c.ɵɵelementStart(2,"thead"),c.ɵɵelementStart(3,"tr"),c.ɵɵelementStart(4,"th",33),c.ɵɵelement(5,"localize",34),c.ɵɵelementEnd(),c.ɵɵtemplate(6,z,2,0,"th",35),c.ɵɵtemplate(7,_,8,5,"th",36),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(8,"tbody"),c.ɵɵtemplate(9,$,5,2,"tr",37),c.ɵɵpipe(10,"paginate"),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(6),c.ɵɵproperty("ngIf",n.isWritable),c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",n.list.attributes),c.ɵɵadvance(2),c.ɵɵproperty("ngForOf",c.ɵɵpipeBind2(10,3,n.page.results,c.ɵɵpureFunction3(6,B,n.page.pageSize,n.page.pageNumber,n.page.count)))}}var J=function(){function e(e,t,n,r,o,i,a){this.service=e,this.pService=t,this.route=n,this.router=r,this.modalService=o,this.localizeService=i,this.authService=a,this.message=null,this.list=null,this.p=1,this.current="",this.filter=[],this.selected=[],this.page={count:0,pageNumber:1,pageSize:100,results:[]},this.sort={attribute:"code",order:"ASC"},this.isPublished=!0,this.isRefreshing=!1,this.isWritable=!1,this.searchPlaceholder="",this.searchPlaceholder=i.decode("masterlist.search")}return e.prototype.ngOnInit=function(){var e=this,t=this.route.snapshot.paramMap.get("oid");this.isPublished="true"==this.route.snapshot.paramMap.get("published"),this.service.getMasterListVersion(t).then((function(t){e.list=t,e.list.attributes.forEach((function(e){e.isCollapsed=!0})),e.isWritable=e.authService.isGeoObjectTypeRC(e.list.orgCode,e.list.typeCode),e.onPageChange(1)}))},e.prototype.onPageChange=function(e){var t=this;this.message=null,this.service.data(this.list.oid,e,this.page.pageSize,this.filter,this.sort).then((function(e){t.page=e})).catch((function(e){t.error(e)}))},e.prototype.onSort=function(e){this.sort.attribute===e.name?this.sort.order="ASC"===this.sort.order?"DESC":"ASC":this.sort={attribute:e.name,order:"ASC"},this.onPageChange(1)},e.prototype.clearFilters=function(){this.list.attributes.forEach((function(e){e.search=null})),this.filter=[],this.selected=[],this.onPageChange(1)},e.prototype.toggleFilter=function(e){e.isCollapsed=!e.isCollapsed},e.prototype.getValues=function(e){var t=this;return r.Observable.create((function(n){t.message=null,t.service.values(t.list.oid,e.search,e.name,e.base,t.filter).then((function(e){e.unshift({label:"["+t.localizeService.decode("masterlist.nofilter")+"]",value:null}),n.next(e)})).catch((function(e){t.error(e)}))}))},e.prototype.handleDateChange=function(e){if(e.isCollapsed=!0,this.filter=this.filter.filter((function(t){return t.attribute!==e.base})),this.selected=this.selected.filter((function(t){return t!==e.base})),null!=e.value&&(""!==e.value.start||""!==e.value.end)){var t="["+e.label+"] : [";null!=e.value.start&&(t+=e.value.start),null!=e.value.start&&null!=e.value.end&&(t+=" - "),null!=e.value.end&&(t+=e.value.end),t+="]",this.filter.push({attribute:e.base,value:e.value,label:t}),this.selected.push(e.base)}this.onPageChange(1)},e.prototype.handleInputChange=function(e){if(e.isCollapsed=!0,this.filter=this.filter.filter((function(t){return t.attribute!==e.base})),this.selected=this.selected.filter((function(t){return t!==e.base})),null!=e.value&&""!==e.value){var t="["+e.label+"] : ["+e.value+"]";this.filter.push({attribute:e.base,value:e.value,label:t}),this.selected.push(e.base)}this.onPageChange(1)},e.prototype.handleListChange=function(e,t){if(t.value=e.item,t.isCollapsed=!0,this.filter=this.filter.filter((function(e){return e.attribute!==t.base})),this.selected=this.selected.filter((function(e){return e!==t.base})),this.list.attributes.forEach((function(e){e.base===t.base&&(e.search="")})),null!=t.value.value&&""!==t.value.value){var n="["+t.label+"] : ["+t.value.label+"]";this.filter.push({attribute:t.base,value:e.item.value,label:n}),this.selected.push(t.base),t.search=e.item.label}else t.search="";this.onPageChange(1)},e.prototype.isFilterable=function(e){return"none"!==e.type&&(0===e.dependency.length||-1!==this.selected.indexOf(e.base)||this.selected.filter((function(t){return e.dependency.includes(t)})).length>0)},e.prototype.onEdit=function(e){var t=this,n=this.modalService.show(a.GeoObjectEditorComponent,{backdrop:!0,ignoreBackdropClick:!0});n.content.configureAsExisting(e.code,this.list.typeCode,this.list.forDate,this.list.isGeometryEditable),n.content.setMasterListId(this.list.oid),n.content.setOnSuccessCallback((function(){t.onPageChange(t.page.pageNumber)}))},e.prototype.onGoto=function(e){var t=e.code;null!=t&&t.length>0&&window.open(acp+"/nav/management#/locations/"+t,"_blank")},e.prototype.onPublish=function(){var e=this;this.message=null,this.isRefreshing=!0;var t=r.interval(1e3).subscribe((function(){e.service.progress(e.list.oid).then((function(t){e.pService.progress(t)}))}));this.service.publishMasterList(this.list.oid).pipe(o.finalize((function(){t.unsubscribe(),e.pService.complete()}))).toPromise().then((function(t){e.isRefreshing=!1,e.list=t,e.list.attributes.forEach((function(e){e.isCollapsed=!0})),e.onPageChange(1)})).catch((function(t){e.error(t)})),this.pService.start()},e.prototype.onNewGeoObject=function(){var e=this,t=this.modalService.show(a.GeoObjectEditorComponent,{backdrop:!0,ignoreBackdropClick:!0});t.content.configureAsNew(this.list.typeCode,this.list.forDate,this.list.isGeometryEditable),t.content.setMasterListId(this.list.oid),t.content.setOnSuccessCallback((function(){e.onPageChange(e.page.pageNumber)}))},e.prototype.onExport=function(){var e=this;this.bsModalRef=this.modalService.show(i.ExportFormatModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.onFormat.subscribe((function(t){"SHAPEFILE"==t?window.location.href=acp+"/master-list/export-shapefile?oid="+e.list.oid+"&filter="+encodeURIComponent(JSON.stringify(e.filter)):"EXCEL"==t&&(window.location.href=acp+"/master-list/export-spreadsheet?oid="+e.list.oid+"&filter="+encodeURIComponent(JSON.stringify(e.filter)))}))},e.prototype.error=function(e){this.message=l.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(c.ɵɵdirectiveInject(s.RegistryService),c.ɵɵdirectiveInject(d.ProgressService),c.ɵɵdirectiveInject(p.ActivatedRoute),c.ɵɵdirectiveInject(p.Router),c.ɵɵdirectiveInject(m.BsModalService),c.ɵɵdirectiveInject(d.LocalizationService),c.ɵɵdirectiveInject(d.AuthService))},e.ɵcmp=c.ɵɵdefineComponent({type:e,selectors:[["master-list"]],decls:28,vars:9,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"row"],["class","col-md-12",4,"ngIf"],["class","row form-group",4,"ngIf"],[1,"row","form-group"],[1,"col-md-12"],[2,"position","absolute",3,"pageChange"],[1,"button-holder","pull-right"],[1,"clickable",2,"padding","10px",3,"click"],[1,"fa-stack","fa-md"],[1,"fa","fa-filter","fa-stack-2x",2,"font-size","25px"],[1,"fa","fa-times-circle","fa-stack-1x",2,"font-size","13px","top","4px","left","6px"],["key","masterlist.clearFilters"],["class","clickable","style","padding: 10px;",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary","role","button",3,"click",4,"ngIf"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","io.export.allrows",4,"ngIf"],["key","io.export.filteredrows",4,"ngIf"],["class","col-md-12 table-responsive","style","",4,"ngIf"],["role","alert",1,"alert","alert-danger"],["key","masterlist.publishDate"],["key","masterlist.forDate"],[1,"col-md-12","table-responsive"],["key","masterlist.filters"],[4,"ngFor","ngForOf"],["aria-hidden","true",2,"font-size","24px","vertical-align","middle","padding-right","5px",3,"ngClass"],["key","masterlist.publish"],["key","masterlist.newGeoObject"],["key","io.export.allrows"],["key","io.export.filteredrows"],[1,"list-table","table","table-bordered","table-striped"],[1,"label-column",2,"width","3%"],["key","masterlist.view.column"],["style","width: 3%","class","label-column",4,"ngIf"],["class","label-column",4,"ngFor","ngForOf"],["class","fade-ngRepeat-item",4,"ngFor","ngForOf"],["key","masterlist.edit.column"],[1,"label-column"],["style","display: table-cell; padding-right: 10px; vertical-align: middle;",4,"ngIf"],[2,"display","table-cell","word-break","keep-all","word-wrap","normal",3,"click"],[2,"display","table-cell","vertical-align","middle","padding-left","5px",3,"click"],["class","fa fa-arrow-down","style","font-size: inherit;",4,"ngIf"],["class","fa fa-arrow-up","style","font-size: inherit;",4,"ngIf"],[4,"ngIf"],[2,"display","table-cell","padding-right","10px","vertical-align","middle"],["aria-controls","collapseBasic",1,"",3,"click"],[1,"fa","fa-filter",2,"font-size","20px",3,"title"],[1,"fa","fa-arrow-down",2,"font-size","inherit"],[1,"fa","fa-arrow-up",2,"font-size","inherit"],["id","collapseBasic",3,"collapse"],["type","text","class","form-control search-input",3,"name","ngModel","ngModelChange","keyup.enter",4,"ngIf"],["type","text","typeaheadOptionField","label","class","form-control","autocomplete","off",3,"name","ngModel","typeaheadAsync","typeahead","typeaheadOptionsLimit","typeaheadMinLength","typeaheadWaitMs","ngModelChange","typeaheadOnSelect",4,"ngIf"],["type","text",1,"form-control","search-input",3,"name","ngModel","ngModelChange","keyup.enter"],["type","date",1,"form-control","search-input",3,"name","ngModel","ngModelChange","change"],["type","text","typeaheadOptionField","label","autocomplete","off",1,"form-control",3,"name","ngModel","typeaheadAsync","typeahead","typeaheadOptionsLimit","typeaheadMinLength","typeaheadWaitMs","ngModelChange","typeaheadOnSelect"],[1,"fade-ngRepeat-item"],[1,"label-column",2,"width","3%","text-align","center"],[1,"fa","fa-map-marker",3,"click"],[1,"fa","fa-pencil","ico-edit",3,"title","click"]],template:function(e,t){1&e&&(c.ɵɵelementStart(0,"div",0),c.ɵɵelement(1,"cgr-header"),c.ɵɵelement(2,"loading-bar"),c.ɵɵelementStart(3,"div",1),c.ɵɵtemplate(4,E,2,1,"div",2),c.ɵɵelementStart(5,"div",3),c.ɵɵtemplate(6,x,3,1,"div",4),c.ɵɵelementEnd(),c.ɵɵtemplate(7,O,8,2,"div",5),c.ɵɵtemplate(8,M,5,1,"div",5),c.ɵɵelementStart(9,"div",6),c.ɵɵelementStart(10,"div",7),c.ɵɵelementStart(11,"pagination-controls",8),c.ɵɵlistener("pageChange",(function(e){return t.onPageChange(e)})),c.ɵɵelementEnd(),c.ɵɵelementStart(12,"div",9),c.ɵɵelementStart(13,"span",10),c.ɵɵlistener("click",(function(){return t.clearFilters()})),c.ɵɵelementStart(14,"span",11),c.ɵɵelement(15,"i",12),c.ɵɵelement(16,"i",13),c.ɵɵelementEnd(),c.ɵɵelement(17,"localize",14),c.ɵɵelementEnd(),c.ɵɵtemplate(18,j,3,3,"span",15),c.ɵɵtemplate(19,k,2,0,"button",16),c.ɵɵelementStart(20,"button",17),c.ɵɵlistener("click",(function(){return t.onExport()})),c.ɵɵtemplate(21,T,1,0,"localize",18),c.ɵɵtemplate(22,P,1,0,"localize",19),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(23,"div",6),c.ɵɵtemplate(24,q,11,10,"div",20),c.ɵɵelementEnd(),c.ɵɵelementStart(25,"div",3),c.ɵɵelementStart(26,"div",7),c.ɵɵelementStart(27,"pagination-controls",8),c.ɵɵlistener("pageChange",(function(e){return t.onPageChange(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e&&(c.ɵɵadvance(4),c.ɵɵproperty("ngIf",null!=t.message),c.ɵɵadvance(2),c.ɵɵproperty("ngIf",t.list),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",t.list),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",t.filter.length>0),c.ɵɵadvance(10),c.ɵɵproperty("ngIf",!t.isPublished),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",t.isWritable),c.ɵɵadvance(2),c.ɵɵproperty("ngIf",0===t.filter.length),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",t.filter.length>0),c.ɵɵadvance(2),c.ɵɵproperty("ngIf",t.list))},directives:[u.CgrHeaderComponent,g.LoadingBarComponent,f.NgIf,h.PaginationControlsComponent,v.LocalizeComponent,f.NgForOf,f.NgClass,b.CollapseDirective,y.DefaultValueAccessor,y.NgControlStatus,y.NgModel,S.TypeaheadDirective],pipes:[h.PaginatePipe,C.LocalizePipe],encapsulation:2}),e}();t.MasterListComponent=J},620:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublishedMasterListHistoryComponent=void 0;n(0),n(28),n(30);var r=n(37),o=n(552),i=n(174),a=(n(545),n(15),n(0)),l=n(545),c=n(28),s=n(30),d=n(15),p=n(1),m=n(27),u=n(44),g=n(246),f=n(100);function h(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",5),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function v(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",6),a.ɵɵelementStart(1,"div",7),a.ɵɵelementStart(2,"form",null,8),a.ɵɵelementStart(4,"div",9),a.ɵɵelementStart(5,"button",10),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onPublish()})),a.ɵɵpipe(6,"localize"),a.ɵɵelement(7,"localize",11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=a.ɵɵreference(3);a.ɵɵadvance(5),a.ɵɵproperty("disabled",r.invalid)("title",a.ɵɵpipeBind1(6,2,"masterList.publish.help.text"))}}function b(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"button",27),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=a.ɵɵnextContext().$implicit;return a.ɵɵnextContext(2).onPublishShapefile(e)})),a.ɵɵelement(1,"localize",28),a.ɵɵelementEnd()}}function y(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"button",22),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=a.ɵɵnextContext().$implicit;return a.ɵɵnextContext(2).onDownloadShapefile(e)})),a.ɵɵelement(1,"localize",29),a.ɵɵelementEnd()}}function S(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"button",30),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=a.ɵɵnextContext().$implicit;return a.ɵɵnextContext(2).onDeleteMasterListVersion(e)})),a.ɵɵelement(1,"localize",31),a.ɵɵelementEnd()}}function C(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"tr"),a.ɵɵelementStart(1,"td",20),a.ɵɵelementStart(2,"div",21),a.ɵɵelementStart(3,"button",22),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=t.$implicit;return a.ɵɵnextContext(2).onView(e)})),a.ɵɵelement(4,"localize",23),a.ɵɵelementEnd(),a.ɵɵtemplate(5,b,2,0,"button",24),a.ɵɵtemplate(6,y,2,0,"button",25),a.ɵɵtemplate(7,S,2,0,"button",26),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"td",16),a.ɵɵtext(9),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"td",16),a.ɵɵtext(11),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=a.ɵɵnextContext(2);a.ɵɵadvance(5),a.ɵɵproperty("ngIf",o.list&&o.list.admin),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",r.shapefile),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",o.list&&o.list.admin),a.ɵɵadvance(2),a.ɵɵtextInterpolate(r.forDate),a.ɵɵadvance(2),a.ɵɵtextInterpolate(r.createDate)}}function E(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",12),a.ɵɵelementStart(1,"table",13),a.ɵɵelementStart(2,"thead"),a.ɵɵelementStart(3,"tr"),a.ɵɵelementStart(4,"th",14),a.ɵɵelement(5,"localize",15),a.ɵɵelementEnd(),a.ɵɵelementStart(6,"th",16),a.ɵɵelement(7,"localize",17),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"th",16),a.ɵɵelement(9,"localize",18),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"tbody"),a.ɵɵtemplate(11,C,12,5,"tr",19),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(11),a.ɵɵproperty("ngForOf",n.list.versions)}}function x(e,t){if(1&e&&(a.ɵɵelementStart(0,"span",44),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext().$implicit;a.ɵɵadvance(1),a.ɵɵtextInterpolate1(" ",n.exception.message," ")}}function O(e,t){if(1&e&&(a.ɵɵelementStart(0,"tr"),a.ɵɵelementStart(1,"td",38),a.ɵɵelementStart(2,"div",41),a.ɵɵelement(3,"i",42),a.ɵɵelementStart(4,"p",43),a.ɵɵelementStart(5,"span",44),a.ɵɵtext(6),a.ɵɵelementEnd(),a.ɵɵelementStart(7,"span",44),a.ɵɵtext(8),a.ɵɵelementEnd(),a.ɵɵelementStart(9,"span",44),a.ɵɵtext(10),a.ɵɵelementEnd(),a.ɵɵelementStart(11,"span",44),a.ɵɵtext(12),a.ɵɵelementEnd(),a.ɵɵtemplate(13,x,2,1,"span",45),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵadvance(6),a.ɵɵtextInterpolate1(" ",n.createDate," "),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" ",n.author," "),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" ",n.type," "),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" ",n.status," "),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",n.exception)}}function I(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",46),a.ɵɵelementStart(1,"pagination-controls",47),a.ɵɵlistener("pageChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext(2).onPageChange(e)})),a.ɵɵelementEnd(),a.ɵɵelementEnd()}}var M=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}};function w(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",32),a.ɵɵelementStart(1,"div",33),a.ɵɵelementStart(2,"ul",34),a.ɵɵelementStart(3,"div",35),a.ɵɵelementStart(4,"table",36),a.ɵɵelementStart(5,"thead"),a.ɵɵelementStart(6,"tr",37),a.ɵɵelementStart(7,"th",38),a.ɵɵelement(8,"localize",39),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(9,"tbody"),a.ɵɵtemplate(10,O,14,5,"tr",19),a.ɵɵpipe(11,"paginate"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(12,I,2,0,"div",40),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(10),a.ɵɵproperty("ngForOf",a.ɵɵpipeBind2(11,2,n.page.results,a.ɵɵpureFunction3(5,M,n.page.pageSize,n.page.pageNumber,n.page.count))),a.ɵɵadvance(2),a.ɵɵproperty("ngIf",n.page.results.length>0)}}var j=function(){function e(e,t,n,r,o){this.service=e,this.router=t,this.modalService=n,this.authService=r,this.localizeService=o,this.message=null,this.list=null,this.page={pageSize:10,pageNumber:1,count:1,results:[]},this.isAdmin=r.isAdmin(),this.isSRA=r.isSRA()}return e.prototype.ngOnInit=function(){var e=this;this.service.getMasterListHistory(this.oid,"PUBLISHED").then((function(t){e.list=t,e.onPageChange(1)})),this.pollingData=r.interval(5e3).subscribe((function(){e.onPageChange(e.page.pageNumber)}))},e.prototype.ngOnDestroy=function(){this.pollingData.unsubscribe()},e.prototype.onDeleteMasterListVersion=function(e){var t=this;this.bsModalRef=this.modalService.show(i.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+e.forDate+"]",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.onConfirm.subscribe((function(n){t.service.deleteMasterListVersion(e.oid).then((function(e){t.updateList()})).catch((function(e){t.error(e)}))}))},e.prototype.updateList=function(){var e=this;this.service.getMasterListHistory(this.oid,"PUBLISHED").then((function(t){e.list=t})).catch((function(t){e.error(t)}))},e.prototype.onPublish=function(){var e=this;this.message=null,this.service.publishMasterListVersions(this.list.oid).then((function(t){e.onPageChange(e.page.pageNumber)})).catch((function(t){e.error(t)}))},e.prototype.onPageChange=function(e){var t=this;null!=this.list&&(this.message=null,this.service.getPublishMasterListJobs(this.list.oid,this.page.pageSize,e,"createDate",!0).then((function(e){t.page=e})).catch((function(e){t.error(e)})),this.updateList())},e.prototype.onViewMetadata=function(){this.bsModalRef=this.modalService.show(o.PublishModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.readonly=!0,this.bsModalRef.content.master=this.list,this.bsModalRef.content.isNew=!1},e.prototype.onView=function(e){this.router.navigate(["/registry/master-list/",e.oid,!0])},e.prototype.onPublishShapefile=function(e){var t=this;this.service.publishShapefile(e.oid).then((function(){t.onPageChange(t.page.pageNumber)})).catch((function(e){t.error(e)}))},e.prototype.onDownloadShapefile=function(e){window.location.href=acp+"/master-list/download-shapefile?oid="+e.oid},e.prototype.error=function(e){this.message=i.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.RegistryService),a.ɵɵdirectiveInject(c.Router),a.ɵɵdirectiveInject(s.BsModalService),a.ɵɵdirectiveInject(d.AuthService),a.ɵɵdirectiveInject(d.LocalizationService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["published-master-list-history"]],inputs:{oid:"oid"},decls:6,vars:4,consts:[["class","alert alert-danger","role","alert",4,"ngIf"],["style","margin-bottom: 10px;","class","row",4,"ngIf"],[1,"row","form-group"],["class","col-md-12 table-responsive",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"row",2,"margin-bottom","10px"],[1,"col-md-12"],["myForm","ngForm"],[1,"form-group"],["type","submit","role","button",1,"btn","btn-primary",2,"margin-left","15px",3,"disabled","title","click"],["key","masterlist.publish.versions"],[1,"col-md-12","table-responsive"],[1,"list-table","table",2,"border-bottom","solid lightgrey 3px"],[1,"label-column",2,"width","50%"],["key","masterlist.actions"],[1,"label-column",2,"width","15%"],["key","masterlist.forDate"],["key","masterlist.publishDate"],[4,"ngFor","ngForOf"],[2,"width","70%"],[1,"button-holder"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","modal.button.view"],["type","submit","class","btn btn-default","role","button",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary","role","button",3,"click",4,"ngIf"],["type","submit","class","btn btn-danger","role","button",3,"click",4,"ngIf"],["type","submit","role","button",1,"btn","btn-default",3,"click"],["key","masterlist.publish-shapefile"],["key","masterlist.download"],["type","submit","role","button",1,"btn","btn-danger",3,"click"],["key","modal.button.delete"],[1,"row"],[1,"col-md-12","order-md-1"],[1,"list-group"],[1,"solid-table-wrapper"],[1,"table","table-striped"],[2,"height","56px"],[2,"vertical-align","middle"],["key","masterlist.jobs"],["class","solid-table-footer",4,"ngIf"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","40px"],[2,"padding-left","60px"],[2,"display","block"],["style","display: block;",4,"ngIf"],[1,"solid-table-footer"],[3,"pageChange"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div"),a.ɵɵtemplate(1,h,2,1,"div",0),a.ɵɵtemplate(2,v,8,4,"div",1),a.ɵɵelementStart(3,"div",2),a.ɵɵtemplate(4,E,12,1,"div",3),a.ɵɵelementEnd(),a.ɵɵtemplate(5,w,13,9,"div",4),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.list&&t.list.write),a.ɵɵadvance(2),a.ɵɵproperty("ngIf",t.list),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!t.isSRA))},directives:[p.NgIf,m.ɵangular_packages_forms_forms_y,m.NgControlStatusGroup,m.NgForm,u.LocalizeComponent,p.NgForOf,g.PaginationControlsComponent],pipes:[f.LocalizePipe,g.PaginatePipe],encapsulation:2}),e}();t.PublishedMasterListHistoryComponent=j},621:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MasterListHistoryComponent=void 0;n(0),n(28),n(30);var r=n(174),o=n(552),i=(n(545),n(15),n(0)),a=n(545),l=n(28),c=n(30),s=n(15),d=n(1),p=n(27),m=n(44);function u(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",4),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.message)}}function g(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",5),i.ɵɵelementStart(1,"div",6),i.ɵɵelementStart(2,"form",7,8),i.ɵɵelementStart(4,"div",9),i.ɵɵelementStart(5,"label",10),i.ɵɵelement(6,"localize",11),i.ɵɵelementEnd(),i.ɵɵelementStart(7,"input",12),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().forDate=e})),i.ɵɵelementEnd(),i.ɵɵelementStart(8,"button",13),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext().onPublish()})),i.ɵɵelement(9,"localize",14),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵreference(3),o=i.ɵɵnextContext();i.ɵɵadvance(7),i.ɵɵproperty("ngModel",o.forDate),i.ɵɵadvance(1),i.ɵɵproperty("disabled",r.invalid)}}function f(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"button",28),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext().$implicit;return i.ɵɵnextContext(2).onDelete(e)})),i.ɵɵelement(1,"localize",29),i.ɵɵelementEnd()}}function h(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"tr"),i.ɵɵelementStart(1,"td",23),i.ɵɵelementStart(2,"div",24),i.ɵɵelementStart(3,"button",25),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=t.$implicit;return i.ɵɵnextContext(2).onView(e)})),i.ɵɵelement(4,"localize",26),i.ɵɵelementEnd(),i.ɵɵtemplate(5,f,2,0,"button",27),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(6,"td",19),i.ɵɵtext(7),i.ɵɵelementEnd(),i.ɵɵelementStart(8,"td",19),i.ɵɵtext(9),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=t.$implicit,o=i.ɵɵnextContext(2);i.ɵɵadvance(5),i.ɵɵproperty("ngIf",o.list.delete),i.ɵɵadvance(2),i.ɵɵtextInterpolate(r.forDate),i.ɵɵadvance(2),i.ɵɵtextInterpolate(r.createDate)}}function v(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",15),i.ɵɵelementStart(1,"table",16),i.ɵɵelementStart(2,"thead"),i.ɵɵelementStart(3,"tr"),i.ɵɵelementStart(4,"th",17),i.ɵɵelement(5,"localize",18),i.ɵɵelementEnd(),i.ɵɵelementStart(6,"th",19),i.ɵɵelement(7,"localize",20),i.ɵɵelementEnd(),i.ɵɵelementStart(8,"th",19),i.ɵɵelement(9,"localize",21),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(10,"tbody"),i.ɵɵtemplate(11,h,10,3,"tr",22),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(11),i.ɵɵproperty("ngForOf",n.list.versions)}}var b=function(){function e(e,t,n,r){this.service=e,this.router=t,this.modalService=n,this.localizeService=r,this.message=null,this.list=null,this.forDate=""}return e.prototype.ngOnInit=function(){var e=this;this.service.getMasterListHistory(this.oid,"EXPLORATORY").then((function(t){e.list=t}))},e.prototype.onPublish=function(){var e=this;this.message=null,this.service.createMasterListVersion(this.list.oid,this.forDate).then((function(t){e.list.versions.push(t)})).catch((function(t){e.error(t)}))},e.prototype.onViewMetadata=function(){this.bsModalRef=this.modalService.show(o.PublishModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.readonly=!0,this.bsModalRef.content.master=this.list,this.bsModalRef.content.isNew=!1},e.prototype.onView=function(e){this.router.navigate(["/registry/master-list/",e.oid,!1])},e.prototype.onDelete=function(e){var t=this;this.bsModalRef=this.modalService.show(r.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("confirm.modal.verify.delete")+" ["+e.forDate+"]",this.bsModalRef.content.submitText=this.localizeService.decode("modal.button.delete"),this.bsModalRef.content.onConfirm.subscribe((function(n){t.service.deleteMasterListVersion(e.oid).then((function(n){t.list.versions=t.list.versions.filter((function(t,n,r){return t.oid!==e.oid}))})).catch((function(e){t.error(e)}))}))},e.prototype.error=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.RegistryService),i.ɵɵdirectiveInject(l.Router),i.ɵɵdirectiveInject(c.BsModalService),i.ɵɵdirectiveInject(s.LocalizationService))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["master-list-history"]],inputs:{oid:"oid"},decls:5,vars:3,consts:[["class","alert alert-danger","role","alert",4,"ngIf"],["style","margin-bottom: 10px;","class","row",4,"ngIf"],[1,"row","form-group"],["class","col-md-12 table-responsive",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"row",2,"margin-bottom","10px"],[1,"col-md-12"],[2,"margin-left","10px"],["myForm","ngForm"],[1,"form-group"],["for","forDate",2,"display","block","margin-bottom","0"],["key","masterlist.publishingFor"],["id","forDate","type","date","name","forDate","required","",3,"ngModel","ngModelChange"],["type","submit","role","button",1,"btn","btn-primary",2,"margin-left","15px",3,"disabled","click"],["key","masterlist.publishNewVersion"],[1,"col-md-12","table-responsive"],[1,"list-table","table"],[1,"label-column",2,"width","50%"],["key","masterlist.actions"],[1,"label-column",2,"width","15%"],["key","masterlist.forDate"],["key","masterlist.generatedDate"],[4,"ngFor","ngForOf"],[2,"width","70%"],[1,"button-holder"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","modal.button.view"],["type","submit","class","btn btn-danger","role","button",3,"click",4,"ngIf"],["type","submit","role","button",1,"btn","btn-danger",3,"click"],["key","modal.button.delete"]],template:function(e,t){1&e&&(i.ɵɵelementStart(0,"div"),i.ɵɵtemplate(1,u,2,1,"div",0),i.ɵɵtemplate(2,g,10,2,"div",1),i.ɵɵelementStart(3,"div",2),i.ɵɵtemplate(4,v,12,1,"div",3),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e&&(i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null!=t.message),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",t.list&&t.list.write),i.ɵɵadvance(2),i.ɵɵproperty("ngIf",t.list))},directives:[d.NgIf,p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,p.NgForm,m.LocalizeComponent,p.DefaultValueAccessor,p.RequiredValidator,p.NgControlStatus,p.NgModel,d.NgForOf],encapsulation:2}),e}();t.MasterListHistoryComponent=b},622:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MasterListViewComponent=void 0;n(0),n(28),n(30),n(545);var r=n(552),o=n(0),i=n(545),a=n(30),l=n(28),c=n(128),s=n(85),d=n(1),p=n(44),m=n(620),u=n(621);function g(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",2),o.ɵɵelementStart(1,"div",3),o.ɵɵelementStart(2,"h3"),o.ɵɵtext(3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(3),o.ɵɵtextInterpolate(n.list.displayLabel.localizedValue)}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",2),o.ɵɵelementStart(1,"div",3),o.ɵɵelementStart(2,"h5"),o.ɵɵelementStart(3,"b"),o.ɵɵelementStart(4,"a",9),o.ɵɵlistener("click",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().onViewMetadata(e)})),o.ɵɵelement(5,"localize",10),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}}var h=function(e){return{active:e}};function v(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"a",6),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().renderContent("EXP")})),o.ɵɵtext(1,"Exploratory"),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext();o.ɵɵproperty("ngClass",o.ɵɵpureFunction1(1,h,"EXP"===r.content))}}function b(e,t){if(1&e&&o.ɵɵelement(0,"published-master-list-history",11),2&e){var n=o.ɵɵnextContext();o.ɵɵproperty("oid",n.list.oid)}}function y(e,t){if(1&e&&o.ɵɵelement(0,"master-list-history",11),2&e){var n=o.ɵɵnextContext();o.ɵɵproperty("oid",n.list.oid)}}var S=function(){function e(e,t,n){this.service=e,this.modalService=t,this.route=n,this.content="",this.list=null}return e.prototype.ngOnInit=function(){var e=this,t=this.route.snapshot.paramMap.get("oid");null!=t&&(this.content="PUB"),this.service.getMasterList(t).then((function(t){e.list=t,t.read&&(e.content="EXP")}))},e.prototype.onViewMetadata=function(e){e.preventDefault(),this.bsModalRef=this.modalService.show(r.PublishModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.readonly=!0,this.bsModalRef.content.master=this.list,this.bsModalRef.content.isNew=!1},e.prototype.renderContent=function(e){this.content=e},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.RegistryService),o.ɵɵdirectiveInject(a.BsModalService),o.ɵɵdirectiveInject(l.ActivatedRoute))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["master-list-view"]],decls:15,vars:8,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],[1,"row"],[1,"col-md-12"],["class","row",4,"ngIf"],["style","margin-right: 10px; font-size: 20px;",3,"ngClass","click",4,"ngIf"],[2,"margin-right","10px","font-size","20px",3,"ngClass","click"],[1,"inner-col-content-wrapper",2,"padding-top","30px","margin-top","10px"],[3,"oid",4,"ngIf"],["href","#",3,"click"],["key","masterlist.view"],[3,"oid"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelement(1,"cgr-header"),o.ɵɵelement(2,"loading-bar"),o.ɵɵelementStart(3,"div",1),o.ɵɵelementStart(4,"div",2),o.ɵɵelementStart(5,"div",3),o.ɵɵtemplate(6,g,4,1,"div",4),o.ɵɵtemplate(7,f,6,0,"div",4),o.ɵɵelementStart(8,"div"),o.ɵɵtemplate(9,v,2,3,"a",5),o.ɵɵelementStart(10,"a",6),o.ɵɵlistener("click",(function(){return t.renderContent("PUB")})),o.ɵɵtext(11,"Published"),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(12,"div",7),o.ɵɵtemplate(13,b,1,1,"published-master-list-history",8),o.ɵɵtemplate(14,y,1,1,"master-list-history",8),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(6),o.ɵɵproperty("ngIf",t.list),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.list),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",t.list&&t.list.read),o.ɵɵadvance(1),o.ɵɵproperty("ngClass",o.ɵɵpureFunction1(6,h,"PUB"===t.content)),o.ɵɵadvance(3),o.ɵɵproperty("ngIf",t.list&&"PUB"===t.content),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.list&&"EXP"===t.content))},directives:[c.CgrHeaderComponent,s.LoadingBarComponent,d.NgIf,d.NgClass,p.LocalizeComponent,m.PublishedMasterListHistoryComponent,u.MasterListHistoryComponent],styles:["a.active[_ngcontent-%COMP%] {\n\tborder-bottom: solid 2px #6BA542;\n}"]}),e}();t.MasterListViewComponent=S},623:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduledJobsComponent=void 0;n(0),n(28),n(30);var r=n(37),o=(n(545),n(174)),i=(n(15),n(334)),a=n(0),l=n(545),c=n(30),s=n(28),d=n(15),p=n(128),m=n(85),u=n(1),g=n(44),f=n(582),h=n(246);function v(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",20),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function b(e,t){1&e&&a.ɵɵelement(0,"localize",35)}function y(e,t){1&e&&a.ɵɵelement(0,"localize",36)}function S(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"button",37),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=a.ɵɵnextContext(2).$implicit;return a.ɵɵnextContext().onCancelScheduledJob(e.historyId,e)})),a.ɵɵelement(1,"localize",38),a.ɵɵelementEnd()}}function C(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"button",39),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=a.ɵɵnextContext(2).$implicit;return a.ɵɵnextContext().onResolveScheduledJob(e.historyId,e)})),a.ɵɵelement(1,"localize",40),a.ɵɵelementEnd()}}function E(e,t){if(1&e&&(a.ɵɵelementStart(0,"td",27),a.ɵɵelementStart(1,"div",28),a.ɵɵelementStart(2,"a",29),a.ɵɵelementStart(3,"button",30),a.ɵɵtemplate(4,b,1,0,"localize",31),a.ɵɵtemplate(5,y,1,0,"localize",32),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(6,S,2,0,"button",33),a.ɵɵtemplate(7,C,2,0,"button",34),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext().$implicit;a.ɵɵadvance(2),a.ɵɵproperty("routerLink","/registry/job/"+n.historyId),a.ɵɵadvance(2),a.ɵɵproperty("ngIf","IMPORT_RESOLVE"===n.stage||"VALIDATION_RESOLVE"===n.stage),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","IMPORT_RESOLVE"!=n.stage&&"VALIDATION_RESOLVE"!=n.stage),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","VALIDATION_RESOLVE"===n.stage),a.ɵɵadvance(1),a.ɵɵproperty("ngIf","IMPORT_RESOLVE"===n.stage)}}function x(e,t){if(1&e&&(a.ɵɵelementStart(0,"tr"),a.ɵɵelementStart(1,"td",11),a.ɵɵelementStart(2,"div",21),a.ɵɵelement(3,"i",22),a.ɵɵelementStart(4,"p",23),a.ɵɵelementStart(5,"span",24),a.ɵɵtext(6),a.ɵɵelementEnd(),a.ɵɵelementStart(7,"span",24),a.ɵɵtext(8),a.ɵɵelementEnd(),a.ɵɵelementStart(9,"span",24),a.ɵɵtext(10),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(11,"step-indicator",25),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(12,E,8,5,"td",26),a.ɵɵelementEnd()),2&e){var n=t.$implicit,r=a.ɵɵnextContext();a.ɵɵadvance(6),a.ɵɵtextInterpolate1(" ",n.fileName," "),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" ",n.createDate," "),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" ",r.formatJobStatus(n)," "),a.ɵɵadvance(1),a.ɵɵproperty("steps",n.stepConfig),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",r.isAdmin||r.isMaintainer)}}function O(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",41),a.ɵɵelementStart(1,"pagination-controls",42),a.ɵɵlistener("pageChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onActiveJobsPageChange(e)})),a.ɵɵelementEnd(),a.ɵɵelementEnd()}}function I(e,t){1&e&&(a.ɵɵelementStart(0,"th",43),a.ɵɵelement(1,"localize",44),a.ɵɵelementEnd())}function M(e,t){1&e&&(a.ɵɵelementStart(0,"th",43),a.ɵɵelement(1,"localize",45),a.ɵɵelementEnd())}function w(e,t){1&e&&(a.ɵɵelementStart(0,"th",43),a.ɵɵelement(1,"localize",46),a.ɵɵelementEnd())}function j(e,t){1&e&&(a.ɵɵelementStart(0,"th",43),a.ɵɵelement(1,"localize",47),a.ɵɵelementEnd())}function k(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"th",48),a.ɵɵelementStart(1,"button",49),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onViewAllCompleteJobs()})),a.ɵɵelement(2,"localize",50),a.ɵɵelementEnd(),a.ɵɵelementEnd()}}function T(e,t){1&e&&a.ɵɵelement(0,"th",51)}function P(e,t){1&e&&a.ɵɵelement(0,"td",58)}function z(e,t){if(1&e&&(a.ɵɵelementStart(0,"tr"),a.ɵɵelementStart(1,"td",52),a.ɵɵelementStart(2,"div",21),a.ɵɵelement(3,"i",53),a.ɵɵelementStart(4,"p",54),a.ɵɵtext(5),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(6,"td",55),a.ɵɵelementStart(7,"p",56),a.ɵɵtext(8),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(9,"td",55),a.ɵɵelementStart(10,"p",56),a.ɵɵtext(11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(12,"td",55),a.ɵɵelementStart(13,"p",56),a.ɵɵtext(14),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(15,"td",55),a.ɵɵelementStart(16,"p",56),a.ɵɵtext(17),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(18,P,1,0,"td",57),a.ɵɵelementEnd()),2&e){var n=t.$implicit,r=a.ɵɵnextContext();a.ɵɵadvance(5),a.ɵɵtextInterpolate(n.fileName),a.ɵɵadvance(3),a.ɵɵtextInterpolate(r.formatJobStatus(n)),a.ɵɵadvance(3),a.ɵɵtextInterpolate(n.importedRecords),a.ɵɵadvance(3),a.ɵɵtextInterpolate(n.createDate),a.ɵɵadvance(3),a.ɵɵtextInterpolate(n.lastUpdateDate),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",r.isAdmin||r.isMaintainer)}}function V(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",41),a.ɵɵelementStart(1,"pagination-controls",59),a.ɵɵlistener("pageChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onCompleteJobsPageChange(e)})),a.ɵɵelementEnd(),a.ɵɵelementEnd()}}var N=function(e,t,n){return{id:"activeJobs",itemsPerPage:e,currentPage:t,totalItems:n}},R=function(e,t,n){return{id:"completeJobs",itemsPerPage:e,currentPage:t,totalItems:n}},A=function(){function e(e,t,n,r,o,i){this.service=e,this.modalService=t,this.router=n,this.localizeService=r,this.ioService=i,this.message=null,this.activeJobsPage={count:0,pageNumber:1,pageSize:10,results:[]},this.completeJobsPage={count:0,pageNumber:1,pageSize:10,results:[]},this.activeTimeCounter=0,this.completeTimeCounter=0,this.isViewAllOpen=!1,this.isAdmin=o.isAdmin(),this.isMaintainer=this.isAdmin||o.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||o.isContributer()}return e.prototype.ngOnInit=function(){var e=this;this.onActiveJobsPageChange(1),this.pollingData=r.interval(1e3).subscribe((function(){e.activeTimeCounter++,e.completeTimeCounter++,e.isViewAllOpen?(e.activeTimeCounter>=4&&(e.onActiveJobsPageChange(e.activeJobsPage.pageNumber),e.activeTimeCounter=0),e.completeTimeCounter>=7&&(e.onCompleteJobsPageChange(e.completeJobsPage.pageNumber),e.completeTimeCounter=0)):e.activeTimeCounter>=2&&(e.onActiveJobsPageChange(e.activeJobsPage.pageNumber),e.activeTimeCounter=0)}))},e.prototype.ngOnDestroy=function(){this.pollingData.unsubscribe()},e.prototype.formatJobStatus=function(e){return"FEEDBACK"===e.status?this.localizeService.decode("etl.JobStatus.FEEDBACK"):"RUNNING"===e.status||"NEW"===e.status?this.localizeService.decode("etl.JobStatus.RUNNING"):"QUEUED"===e.status?this.localizeService.decode("etl.JobStatus.QUEUED"):"SUCCESS"===e.status?this.localizeService.decode("etl.JobStatus.SUCCESS"):"CANCELED"===e.status?this.localizeService.decode("etl.JobStatus.CANCELED"):"FAILURE"===e.status?this.localizeService.decode("etl.JobStatus.FAILURE"):this.localizeService.decode("etl.JobStatus.RUNNING")},e.prototype.formatStepConfig=function(e){var t=this;e.results.forEach((function(e){var n={steps:[{label:"File Import",status:"COMPLETE"},{label:"Staging",status:"NEW"===e.stage?t.getJobStatus(e):t.getCompletedStatus(e.stage,"NEW")},{label:"Validation",status:"VALIDATE"===e.stage||"VALIDATION_RESOLVE"===e.stage?t.getJobStatus(e):t.getCompletedStatus(e.stage,"VALIDATE")},{label:"Database Import",status:"IMPORT"===e.stage||"IMPORT_RESOLVE"===e.stage||"RESUME_IMPORT"===e.stage?t.getJobStatus(e):""}]};(e=e).stepConfig=n}))},e.prototype.getCompletedStatus=function(e,t){var n=["NEW","VALIDATE","VALIDATION_RESOLVE","IMPORT","IMPORT_RESOLVE","RESUME_IMPORT"],r=n.indexOf(e);return n.indexOf(t)<r?"COMPLETE":""},e.prototype.getJobStatus=function(e){return"QUEUED"===e.status||"RUNNING"===e.status?"WORKING":"FEEDBACK"===e.status?"STUCK":""},e.prototype.onViewAllCompleteJobs=function(){this.onCompleteJobsPageChange(1),this.isViewAllOpen=!0},e.prototype.onView=function(e){this.router.navigate(["/registry/master-list-history/",e])},e.prototype.onActiveJobsPageChange=function(e){var t=this;this.message=null,this.service.getScheduledJobs(this.activeJobsPage.pageSize,e,"createDate",!1).then((function(e){t.activeJobsPage=e,t.formatStepConfig(t.activeJobsPage)})).catch((function(e){t.error(e)}))},e.prototype.onCompleteJobsPageChange=function(e){var t=this;this.message=null,this.service.getCompletedScheduledJobs(this.completeJobsPage.pageSize,e,"createDate",!1).then((function(e){t.completeJobsPage=e,t.formatStepConfig(t.completeJobsPage)})).catch((function(e){t.error(e)}))},e.prototype.onCancelScheduledJob=function(e,t){var n=this;this.bsModalRef=this.modalService.show(o.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("etl.import.cancel.modal.description"),this.bsModalRef.content.submitText=this.localizeService.decode("etl.import.cancel.modal.button"),this.bsModalRef.content.type=i.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(e){n.ioService.cancelImport(t.configuration).then((function(e){n.bsModalRef.hide();for(var r=0;r<n.activeJobsPage.results.length;++r){if(n.activeJobsPage.results[r].jobId===t.jobId){n.activeJobsPage.results.splice(r,1);break}}n.onViewAllCompleteJobs()})).catch((function(e){n.error(e)}))}))},e.prototype.onResolveScheduledJob=function(e,t){var n=this;this.bsModalRef=this.modalService.show(o.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("etl.import.resume.modal.importDescription"),this.bsModalRef.content.submitText=this.localizeService.decode("etl.import.resume.modal.importButton"),this.bsModalRef.content.type=i.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(r){n.service.resolveScheduledJob(e).then((function(e){n.bsModalRef.hide();for(var r=0;r<n.activeJobsPage.results.length;++r){if(n.activeJobsPage.results[r].jobId===t.jobId){n.activeJobsPage.results.splice(r,1);break}}n.onViewAllCompleteJobs()})).catch((function(e){n.error(e)}))}))},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.RegistryService),a.ɵɵdirectiveInject(c.BsModalService),a.ɵɵdirectiveInject(s.Router),a.ɵɵdirectiveInject(d.LocalizationService),a.ɵɵdirectiveInject(d.AuthService),a.ɵɵdirectiveInject(l.IOService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["scheduled-jobs"]],decls:37,vars:25,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"py-5"],["key","scheduledjobs.title"],[1,"row"],[1,"col-md-12","order-md-1"],[1,"list-group"],[1,"solid-table-wrapper"],[1,"table","table-striped"],[2,"height","56px"],[2,"vertical-align","middle"],["key","scheduledjobs.jobs.table.header"],[4,"ngFor","ngForOf"],["class","solid-table-footer",4,"ngIf"],[2,"width","40%","border-bottom","none"],["key","scheduledjobs.completedjobs.table.header",2,"line-height","40px"],["style","width:15%;border-bottom: none;",4,"ngIf"],["style","border-bottom: none; width:15%",4,"ngIf"],["style","border-bottom: none; width:0%",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","40px"],[2,"padding-left","60px"],[2,"display","block"],[3,"steps"],["style","text-align: right;vertical-align: middle;",4,"ngIf"],[2,"text-align","right","vertical-align","middle"],[1,"button-holder",2,"float","right"],["routerLinkActive","active",3,"routerLink"],["role","button",1,"btn","btn-primary"],["key","scheduledjobs.fix.problems.button",4,"ngIf"],["key","scheduledjobs.detail.button",4,"ngIf"],["type","button","class","btn btn-danger","role","button",3,"click",4,"ngIf"],["type","submit","class","btn btn-danger","role","button",3,"click",4,"ngIf"],["key","scheduledjobs.fix.problems.button"],["key","scheduledjobs.detail.button"],["type","button","role","button",1,"btn","btn-danger",3,"click"],["key","etl.import.cancel.openModal"],["type","submit","role","button",1,"btn","btn-danger",3,"click"],["key","scheduledjobs.complete.import.button"],[1,"solid-table-footer"],["id","activeJobs",3,"pageChange"],[2,"width","15%","border-bottom","none"],["key","scheduledjobs.status",2,"line-height","40px"],["key","scheduledjobs.importedRecords",2,"line-height","40px"],["key","scheduledjobs.importStartDate",2,"line-height","40px"],["key","scheduledjobs.importEndDate",2,"line-height","40px"],[2,"border-bottom","none","width","15%"],["type","submit","role","button",1,"btn","btn-default","pull-right",3,"click"],["key","scheduledjobs.view.completed.jobs.button"],[2,"border-bottom","none","width","0%"],[2,"width","40%","vertical-align","middle"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute"],[2,"padding-left","30px","margin","0"],[2,"width","15%","vertical-align","middle"],[2,"padding-left","0px","margin","0"],["style","width:15%;text-align: right;vertical-align: middle;",4,"ngIf"],[2,"width","15%","text-align","right","vertical-align","middle"],["id","completeJobs",3,"pageChange"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵelement(1,"cgr-header"),a.ɵɵelement(2,"loading-bar"),a.ɵɵelementStart(3,"div",1),a.ɵɵtemplate(4,v,2,1,"div",2),a.ɵɵelementStart(5,"div",3),a.ɵɵelementStart(6,"h2"),a.ɵɵelement(7,"localize",4),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"div",5),a.ɵɵelementStart(9,"div",6),a.ɵɵelementStart(10,"ul",7),a.ɵɵelementStart(11,"div",8),a.ɵɵelementStart(12,"table",9),a.ɵɵelementStart(13,"thead"),a.ɵɵelementStart(14,"tr",10),a.ɵɵelementStart(15,"th",11),a.ɵɵelement(16,"localize",12),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(17,"tbody"),a.ɵɵtemplate(18,x,13,5,"tr",13),a.ɵɵpipe(19,"paginate"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(20,O,2,0,"div",14),a.ɵɵelementEnd(),a.ɵɵelementStart(21,"div",8),a.ɵɵelementStart(22,"table",9),a.ɵɵelementStart(23,"thead"),a.ɵɵelementStart(24,"tr"),a.ɵɵelementStart(25,"th",15),a.ɵɵelement(26,"localize",16),a.ɵɵelementEnd(),a.ɵɵtemplate(27,I,2,0,"th",17),a.ɵɵtemplate(28,M,2,0,"th",17),a.ɵɵtemplate(29,w,2,0,"th",17),a.ɵɵtemplate(30,j,2,0,"th",17),a.ɵɵtemplate(31,k,3,0,"th",18),a.ɵɵtemplate(32,T,1,0,"th",19),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(33,"tbody"),a.ɵɵtemplate(34,z,19,6,"tr",13),a.ɵɵpipe(35,"paginate"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵtemplate(36,V,2,0,"div",14),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(4),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(14),a.ɵɵproperty("ngForOf",a.ɵɵpipeBind2(19,11,t.activeJobsPage.results,a.ɵɵpureFunction3(17,N,t.activeJobsPage.pageSize,t.activeJobsPage.pageNumber,t.activeJobsPage.count))),a.ɵɵadvance(2),a.ɵɵproperty("ngIf",t.activeJobsPage.results.length>0),a.ɵɵadvance(7),a.ɵɵproperty("ngIf",t.completeJobsPage.results.length>0),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.completeJobsPage.results.length>0),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.completeJobsPage.results.length>0),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.completeJobsPage.results.length>0),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.completeJobsPage.results.length<1),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.completeJobsPage.results.length>0),a.ɵɵadvance(2),a.ɵɵproperty("ngForOf",a.ɵɵpipeBind2(35,14,t.completeJobsPage.results,a.ɵɵpureFunction3(21,R,t.completeJobsPage.pageSize,t.completeJobsPage.pageNumber,t.completeJobsPage.count))),a.ɵɵadvance(2),a.ɵɵproperty("ngIf",t.completeJobsPage.results.length>0))},directives:[p.CgrHeaderComponent,m.LoadingBarComponent,u.NgIf,g.LocalizeComponent,u.NgForOf,f.StepIndicatorComponent,s.RouterLinkWithHref,s.RouterLinkActive,h.PaginationControlsComponent],pipes:[h.PaginatePipe],styles:[".new-admin-design-main[_ngcontent-%COMP%] {\n    \n}\n\n\n.solid-table-wrapper[_ngcontent-%COMP%] {\n    background: #F4F4F4;\n    border-radius: 15px;\n    margin-bottom: 20px;\n}\n.solid-table-footer[_ngcontent-%COMP%] {\n    \n    border-radius: 0 0 15px 15px;\n    padding: 0 0 10px 10px;\n}\n\n\n\n.wrapper[_ngcontent-%COMP%] {\n    padding: 10px;\n}"]}),e}();t.ScheduledJobsComponent=A},624:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobComponent=void 0;n(0),n(28),n(30);var r=n(37),o=n(625),i=n(630),a=(n(545),n(174)),l=(n(15),n(334)),c=n(0),s=n(545),d=n(30),p=n(28),m=n(15),u=n(128),g=n(85),f=n(1),h=n(44),v=n(246);function b(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",7),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.message)}}function y(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",25),c.ɵɵelementStart(1,"span",26),c.ɵɵelement(2,"localize",27),c.ɵɵelementEnd(),c.ɵɵelementStart(3,"button",28),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=c.ɵɵnextContext(2);return e.onResolveScheduledJob(e.job.historyId)})),c.ɵɵelement(4,"localize",29),c.ɵɵelementEnd(),c.ɵɵelementEnd()}}function S(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",25),c.ɵɵelementStart(1,"span",26),c.ɵɵelement(2,"localize",30),c.ɵɵelementEnd(),c.ɵɵelementStart(3,"button",28),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=c.ɵɵnextContext(2);return e.onResolveScheduledJob(e.job.historyId)})),c.ɵɵelement(4,"localize",31),c.ɵɵelementEnd(),c.ɵɵelementEnd()}}function C(e,t){1&e&&c.ɵɵelement(0,"localize",35)}function E(e,t){1&e&&(c.ɵɵelementStart(0,"span"),c.ɵɵelement(1,"localize",31),c.ɵɵelementEnd())}function x(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",32),c.ɵɵelementStart(1,"button",28),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=c.ɵɵnextContext(2);return e.onResolveScheduledJob(e.job.historyId)})),c.ɵɵtemplate(2,C,1,0,"localize",33),c.ɵɵtemplate(3,E,2,0,"span",34),c.ɵɵelementEnd(),c.ɵɵelementEnd()}if(2&e){var r=c.ɵɵnextContext(2);c.ɵɵadvance(2),c.ɵɵproperty("ngIf",r.job&&"VALIDATION_RESOLVE"===r.job.stage),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",r.job&&"IMPORT_RESOLVE"===r.job.stage)}}function O(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",36),c.ɵɵelementStart(1,"button",28),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=c.ɵɵnextContext(2);return e.onReuploadAndResume(e.job.historyId)})),c.ɵɵelementStart(2,"span"),c.ɵɵelement(3,"localize",37),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()}}function I(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",8),c.ɵɵelementStart(1,"div",9),c.ɵɵelementStart(2,"div",10),c.ɵɵelement(3,"i",11),c.ɵɵelementStart(4,"p",12),c.ɵɵelementStart(5,"span",13),c.ɵɵelementStart(6,"strong"),c.ɵɵtext(7),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(8,"span",13),c.ɵɵelement(9,"localize",14),c.ɵɵtext(10),c.ɵɵelementEnd(),c.ɵɵelementStart(11,"span",13),c.ɵɵelement(12,"localize",15),c.ɵɵtext(13),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(14,"div",16),c.ɵɵelementStart(15,"div"),c.ɵɵelementStart(16,"h5"),c.ɵɵelementStart(17,"b"),c.ɵɵtext(18),c.ɵɵelement(19,"localize",17),c.ɵɵtext(20),c.ɵɵelement(21,"localize",18),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(22,"h5"),c.ɵɵtext(23),c.ɵɵelement(24,"localize",19),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(25,"div",20),c.ɵɵtemplate(26,y,5,0,"div",21),c.ɵɵtemplate(27,S,5,0,"div",22),c.ɵɵtemplate(28,x,4,2,"div",23),c.ɵɵtemplate(29,O,4,0,"div",24),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(7),c.ɵɵtextInterpolate(n.job.fileName),c.ɵɵadvance(3),c.ɵɵtextInterpolate1(" ",n.job.author," "),c.ɵɵadvance(3),c.ɵɵtextInterpolate1(" ",n.job.createDate," "),c.ɵɵadvance(5),c.ɵɵtextInterpolate1("",n.job.importedRecords," "),c.ɵɵadvance(2),c.ɵɵtextInterpolate1(" ",n.job.workTotal," "),c.ɵɵadvance(3),c.ɵɵtextInterpolate1("",n.job.workTotal-n.job.importedRecords," "),c.ɵɵadvance(3),c.ɵɵproperty("ngIf",0==n.page.results.length&&n.job&&"VALIDATION_RESOLVE"===n.job.stage),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",0==n.page.results.length&&n.job&&"IMPORT_RESOLVE"===n.job.stage),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",n.page&&null!=n.page.results&&n.page.results.length>0&&!n.hasRowValidationProblem),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",n.hasRowValidationProblem)}}function M(e,t){1&e&&(c.ɵɵelementStart(0,"thead"),c.ɵɵelementStart(1,"tr"),c.ɵɵelementStart(2,"th",45),c.ɵɵelement(3,"localize",46),c.ɵɵelementEnd(),c.ɵɵelementStart(4,"th",45),c.ɵɵelement(5,"localize",47),c.ɵɵelementEnd(),c.ɵɵelementStart(6,"th",45),c.ɵɵelement(7,"localize",48),c.ɵɵelementEnd(),c.ɵɵelement(8,"th",45),c.ɵɵelementEnd(),c.ɵɵelementEnd())}function w(e,t){1&e&&(c.ɵɵelementStart(0,"thead"),c.ɵɵelementStart(1,"tr"),c.ɵɵelementStart(2,"th",45),c.ɵɵelement(3,"localize",49),c.ɵɵelementEnd(),c.ɵɵelementStart(4,"th",45),c.ɵɵelement(5,"localize",50),c.ɵɵelementEnd(),c.ɵɵelementStart(6,"th",45),c.ɵɵelement(7,"localize",51),c.ɵɵelementEnd(),c.ɵɵelement(8,"th",45),c.ɵɵelementEnd(),c.ɵɵelementEnd())}function j(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"td",55),c.ɵɵelementStart(1,"button",56),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=c.ɵɵnextContext().$implicit;return c.ɵɵnextContext(4).onEdit(e)})),c.ɵɵelement(2,"localize",57),c.ɵɵelementEnd(),c.ɵɵelementEnd()}}function k(e,t){if(1&e&&(c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td",53),c.ɵɵelementStart(2,"p"),c.ɵɵtext(3),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(4,"td",53),c.ɵɵelementStart(5,"p"),c.ɵɵtext(6),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(7,"td",53),c.ɵɵelementStart(8,"p"),c.ɵɵtext(9),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵtemplate(10,j,3,0,"td",54),c.ɵɵelementEnd()),2&e){var n=t.$implicit,r=c.ɵɵnextContext(4);c.ɵɵadvance(3),c.ɵɵtextInterpolate(r.getFriendlyProblemType(n.exception.type)),c.ɵɵadvance(3),c.ɵɵtextInterpolate(n.exception.message),c.ɵɵadvance(3),c.ɵɵtextInterpolate(n.rowNum),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",r.isAdmin||r.isMaintainer)}}var T=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}};function P(e,t){if(1&e&&(c.ɵɵelementStart(0,"tbody"),c.ɵɵtemplate(1,k,11,4,"tr",52),c.ɵɵpipe(2,"paginate"),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(3);c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",c.ɵɵpipeBind2(2,1,n.page.results,c.ɵɵpureFunction3(4,T,n.page.pageSize,n.page.pageNumber,n.page.count)))}}function z(e,t){if(1&e&&(c.ɵɵelementStart(0,"p"),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext().$implicit;c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.exception.message)}}function V(e,t){if(1&e&&(c.ɵɵelementStart(0,"p"),c.ɵɵtext(1),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext().$implicit;c.ɵɵadvance(1),c.ɵɵtextInterpolate(n.label)}}function N(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"td",55),c.ɵɵelementStart(1,"button",56),c.ɵɵlistener("click",(function(){c.ɵɵrestoreView(n);var e=c.ɵɵnextContext().$implicit;return c.ɵɵnextContext(4).onEdit(e)})),c.ɵɵelement(2,"localize",57),c.ɵɵelementEnd(),c.ɵɵelementEnd()}}function R(e,t){if(1&e&&(c.ɵɵelementStart(0,"tr"),c.ɵɵelementStart(1,"td",53),c.ɵɵelementStart(2,"p"),c.ɵɵtext(3),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementStart(4,"td",53),c.ɵɵtemplate(5,z,2,1,"p",34),c.ɵɵtemplate(6,V,2,1,"p",34),c.ɵɵelementEnd(),c.ɵɵelementStart(7,"td",53),c.ɵɵelementStart(8,"p"),c.ɵɵtext(9),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵtemplate(10,N,3,0,"td",54),c.ɵɵelementEnd()),2&e){var n=t.$implicit,r=c.ɵɵnextContext(4);c.ɵɵadvance(3),c.ɵɵtextInterpolate(n.type),c.ɵɵadvance(2),c.ɵɵproperty("ngIf","RowValidationProblem"===n.type),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","ParentReferenceProblem"===n.type||"TermReferenceProblem"===n.type),c.ɵɵadvance(3),c.ɵɵtextInterpolate(r.formatAffectedRows(n.affectedRows)),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",r.isAdmin||r.isMaintainer)}}function A(e,t){if(1&e&&(c.ɵɵelementStart(0,"tbody"),c.ɵɵtemplate(1,R,11,5,"tr",52),c.ɵɵpipe(2,"paginate"),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(3);c.ɵɵadvance(1),c.ɵɵproperty("ngForOf",c.ɵɵpipeBind2(2,1,n.page.results,c.ɵɵpureFunction3(4,T,n.page.pageSize,n.page.pageNumber,n.page.count)))}}function D(e,t){if(1&e){var n=c.ɵɵgetCurrentView();c.ɵɵelementStart(0,"div",43),c.ɵɵelementStart(1,"pagination-controls",58),c.ɵɵlistener("pageChange",(function(e){return c.ɵɵrestoreView(n),c.ɵɵnextContext(3).onPageChange(e)})),c.ɵɵelementEnd(),c.ɵɵelementEnd()}}function L(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",40),c.ɵɵelementStart(1,"ul",41),c.ɵɵelementStart(2,"table",42),c.ɵɵtemplate(3,M,9,0,"thead",34),c.ɵɵtemplate(4,w,9,0,"thead",34),c.ɵɵtemplate(5,P,3,8,"tbody",34),c.ɵɵtemplate(6,A,3,8,"tbody",34),c.ɵɵelementEnd(),c.ɵɵelementStart(7,"div",43),c.ɵɵtemplate(8,D,2,0,"div",44),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext(2);c.ɵɵadvance(3),c.ɵɵproperty("ngIf","IMPORT_RESOLVE"===n.job.stage),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","VALIDATION_RESOLVE"===n.job.stage),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","IMPORT_RESOLVE"===n.job.stage),c.ɵɵadvance(1),c.ɵɵproperty("ngIf","VALIDATION_RESOLVE"===n.job.stage),c.ɵɵadvance(2),c.ɵɵproperty("ngIf",n.page.results.length>0)}}function F(e,t){if(1&e&&(c.ɵɵelementStart(0,"div",38),c.ɵɵtemplate(1,L,9,5,"div",39),c.ɵɵelementEnd()),2&e){var n=c.ɵɵnextContext();c.ɵɵadvance(1),c.ɵɵproperty("ngIf",n.job)}}var _=function(){function e(e,t,n,r,o,i,a){this.service=e,this.modalService=t,this.router=n,this.route=r,this.localizeService=o,this.ioService=a,this.message=null,this.allSelected=!1,this.historyId="",this.page={count:0,pageNumber:1,pageSize:10,results:[]},this.timeCounter=0,this.isPolling=!1,this.hasRowValidationProblem=!1,this.isAdmin=i.isAdmin(),this.isMaintainer=this.isAdmin||i.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||i.isContributer()}return e.prototype.ngOnInit=function(){this.historyId=this.route.snapshot.params.oid,this.onPageChange(1)},e.prototype.ngOnDestroy=function(){this.stopPolling()},e.prototype.formatAffectedRows=function(e){return e.replace(/,/g,", ")},e.prototype.formatValidationResolve=function(e){return JSON.stringify(e)},e.prototype.onProblemResolved=function(e){for(var t=0;t<this.page.results.length;++t){this.page.results[t].id===e.id&&this.page.results.splice(t,1)}},e.prototype.getFriendlyProblemType=function(e){return"net.geoprism.registry.io.ParentCodeException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.parent.lookup"):"net.geoprism.registry.io.PostalCodeLocationException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.postal.code.lookup"):"net.geoprism.registry.io.AmbiguousParentException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.multi.parent.lookup"):"net.geoprism.registry.io.InvalidGeometryException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.invalid.geom.lookup"):"net.geoprism.registry.DataNotFoundException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.datanotfound"):"net.geoprism.registry.roles.CreateGeoObjectPermissionException"===e||"net.geoprism.registry.roles.WriteGeoObjectPermissionException"===e||"net.geoprism.registry.roles.DeleteGeoObjectPermissionException"===e||"net.geoprism.registry.roles.ReadGeoObjectPermissionException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.permission"):"com.runwaysdk.dataaccess.DuplicateDataException"===e||"net.geoprism.registry.DuplicateGeoObjectException"===e||"net.geoprism.registry.DuplicateGeoObjectCodeException"===e?this.localizeService.decode("scheduledjobs.job.problem.type.duplicate.data.lookup"):e},e.prototype.onEdit=function(e){var t=this;this.bsModalRef=this.modalService.show(o.JobConflictModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.problem=e,this.bsModalRef.content.job=this.job,this.bsModalRef.content.onConflictAction.subscribe((function(e){"RESOLVED"===e.action&&t.onProblemResolved(e.data)}))},e.prototype.onPageChange=function(e){var t=this;this.message=null,this.service.getScheduledJob(this.historyId,this.page.pageSize,e,!0).then((function(e){if(t.job=e,"IMPORT_RESOLVE"===t.job.stage)t.page=t.job.importErrors;else if("VALIDATION_RESOLVE"===t.job.stage){t.page=t.job.problems;for(var n=0;n<t.page.results.length;++n){"RowValidationProblem"===t.page.results[n].type&&(t.hasRowValidationProblem=!0)}}t.isPolling||"RUNNING"!==t.job.status?t.isPolling&&"RUNNING"!=t.job.status&&t.stopPolling():t.startPolling()})).catch((function(e){t.error(e)}))},e.prototype.stopPolling=function(){this.isPolling&&null!=this.pollingData&&this.pollingData.unsubscribe()},e.prototype.startPolling=function(){var e=this;this.timeCounter=0,this.pollingData=r.interval(1e3).subscribe((function(){e.timeCounter++,e.timeCounter>=2&&(e.onPageChange(e.page.pageNumber),e.timeCounter=0)})),this.isPolling=!0},e.prototype.onViewAllActiveJobs=function(){},e.prototype.onViewAllCompleteJobs=function(){},e.prototype.toggleAll=function(){var e=this;this.allSelected=!this.allSelected,this.job.importErrors.results.forEach((function(t){t.selected=e.allSelected}))},e.prototype.onReuploadAndResume=function(e){var t=this;this.bsModalRef=this.modalService.show(i.ReuploadModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.job=this.job,this.bsModalRef.content.onConfirm.subscribe((function(e){t.router.navigate(["/registry/scheduled-jobs"])}))},e.prototype.onResolveScheduledJob=function(e){var t=this;0==this.page.results.length?this.service.resolveScheduledJob(e).then((function(e){t.router.navigate(["/registry/scheduled-jobs"])})).catch((function(e){t.error(e)})):(this.bsModalRef=this.modalService.show(a.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),"VALIDATION_RESOLVE"===this.job.stage?(this.bsModalRef.content.message=this.localizeService.decode("etl.import.resume.modal.validationDescription"),this.bsModalRef.content.submitText=this.localizeService.decode("etl.import.resume.modal.validationButton")):(this.bsModalRef.content.message=this.localizeService.decode("etl.import.resume.modal.importDescription"),this.bsModalRef.content.submitText=this.localizeService.decode("etl.import.resume.modal.importButton")),this.bsModalRef.content.type=l.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(n){t.service.resolveScheduledJob(e).then((function(e){t.router.navigate(["/registry/scheduled-jobs"])})).catch((function(e){t.error(e)}))})))},e.prototype.onCancelScheduledJob=function(e){var t=this;this.bsModalRef=this.modalService.show(a.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.localizeService.decode("etl.import.cancel.modal.description"),this.bsModalRef.content.submitText=this.localizeService.decode("etl.import.cancel.modal.button"),this.bsModalRef.content.type=l.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(e){t.ioService.cancelImport(t.job.configuration).then((function(e){t.router.navigate(["/registry/scheduled-jobs"])})).catch((function(e){t.error(e)}))}))},e.prototype.error=function(e){this.message=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(c.ɵɵdirectiveInject(s.RegistryService),c.ɵɵdirectiveInject(d.BsModalService),c.ɵɵdirectiveInject(p.Router),c.ɵɵdirectiveInject(p.ActivatedRoute),c.ɵɵdirectiveInject(m.LocalizationService),c.ɵɵdirectiveInject(m.AuthService),c.ɵɵdirectiveInject(s.IOService))},e.ɵcmp=c.ɵɵdefineComponent({type:e,selectors:[["job"]],decls:10,vars:3,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"py-5"],["key","scheduledjobs.details.title"],["class","row","style","background: #F4F4F4;\n                                border-radius: 15px;\n                                margin-bottom: 20px;\n                                margin-top: 20px;\n                                padding: 10px;",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"row",2,"background","#F4F4F4","border-radius","15px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-4","order-md-1"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"],["key","scheduledjobs.job.uploaded.by.label"],["key","scheduledjobs.job.started.label"],[1,"col-md-3","order-md-1"],["key","scheduledjobs.job.imported.out.of.label"],["key","scheduledjobs.job.imported.total.label"],["key","scheduledjobs.job.remaining.label"],[1,"col-md-5","order-md-1"],["style","display:block; margin: 10px;text-align: right;",4,"ngIf"],["style","display:block; margin:10px;text-align: right;",4,"ngIf"],["class","button-holder","style","display:block; margin:10px;text-align: right;",4,"ngIf"],["class","button-holder","style","display:block; margin:10px;",4,"ngIf"],[2,"display","block","margin","10px","text-align","right"],[2,"display","block","margin-bottom","10px"],["key","scheduledjobs.validation.problems.complete.msg"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","scheduledjobs.reimport.button"],["key","scheduledjobs.import.problems.complete.msg"],["key","scheduledjobs.complete.import.button"],[1,"button-holder",2,"display","block","margin","10px","text-align","right"],["key","etl.import.resume.openModal",4,"ngIf"],[4,"ngIf"],["key","etl.import.resume.openModal"],[1,"button-holder",2,"display","block","margin","10px"],["key","scheduledjobs.reupload.resume.button"],[1,"row"],["class","col-md-12 order-md-1",4,"ngIf"],[1,"col-md-12","order-md-1"],[1,"list-group"],[1,"list-table","table","table-bordered","table-striped"],[1,"solid-table-footer"],["class","solid-table-footer",4,"ngIf"],[1,"label-column"],["key","scheduledjobs.import.table.problem.type.header"],["key","scheduledjobs.import.table.message.header"],["key","scheduledjobs.import.table.row.number.header"],["key","scheduledjobs.validation.table.problem.type.header"],["key","scheduledjobs.validation.table.label.header"],["key","scheduledjobs.validation.table.affected.rows.header"],[4,"ngFor","ngForOf"],[1,"label-column",2,"vertical-align","middle"],["class","label-column","style","text-align: right;",4,"ngIf"],[1,"label-column",2,"text-align","right"],["type","submit","role","button",1,"btn","btn-link",3,"click"],["key","scheduledjobs.fix.problem.button"],[3,"pageChange"]],template:function(e,t){1&e&&(c.ɵɵelementStart(0,"div",0),c.ɵɵelement(1,"cgr-header"),c.ɵɵelement(2,"loading-bar"),c.ɵɵelementStart(3,"div",1),c.ɵɵtemplate(4,b,2,1,"div",2),c.ɵɵelementStart(5,"div",3),c.ɵɵelementStart(6,"h2"),c.ɵɵelement(7,"localize",4),c.ɵɵelementEnd(),c.ɵɵelementEnd(),c.ɵɵtemplate(8,I,30,10,"div",5),c.ɵɵtemplate(9,F,2,1,"div",6),c.ɵɵelementEnd(),c.ɵɵelementEnd()),2&e&&(c.ɵɵadvance(4),c.ɵɵproperty("ngIf",null!=t.message),c.ɵɵadvance(4),c.ɵɵproperty("ngIf",t.job),c.ɵɵadvance(1),c.ɵɵproperty("ngIf",t.page&&t.page.results.length>0))},directives:[u.CgrHeaderComponent,g.LoadingBarComponent,f.NgIf,h.LocalizeComponent,f.NgForOf,v.PaginationControlsComponent],pipes:[v.PaginatePipe],styles:[".new-admin-design-main[_ngcontent-%COMP%] {\n    \n}\n\n\n.solid-table-wrapper[_ngcontent-%COMP%] {\n    background: #F4F4F4;\n    border-radius: 15px;\n    margin-bottom: 20px;\n}\n.solid-table-footer[_ngcontent-%COMP%] {\n    \n    border-radius: 0 0 15px 15px;\n    padding: 0 0 10px 10px;\n}\n\n\n\n.wrapper[_ngcontent-%COMP%] {\n    padding: 10px;\n}"]}),e}();t.JobComponent=_},625:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobConflictModalComponent=void 0;n(0),n(30);var r=n(37),o=(n(545),n(174)),i=(n(15),n(0)),a=n(545),l=n(15),c=n(30),s=n(1),d=n(44),p=n(27),m=n(626),u=n(627),g=n(628),f=n(629);function h(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",12),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.message)}}function v(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div"),i.ɵɵelementStart(1,"import-problem-widget",13),i.ɵɵlistener("onProblemResolved",(function(e){i.ɵɵrestoreView(n);var t=i.ɵɵnextContext();return t.onProblemResolvedListener(e,t.problem)})),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵproperty("problem",r.problem)("job",r.job)}}function b(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"parent-reference-problem-widget",13),i.ɵɵlistener("onProblemResolved",(function(e){i.ɵɵrestoreView(n);var t=i.ɵɵnextContext(2);return t.onProblemResolvedListener(e,t.problem)})),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext(2);i.ɵɵproperty("problem",r.problem)("job",r.job)}}function y(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"term-reference-problem-widget",13),i.ɵɵlistener("onProblemResolved",(function(e){i.ɵɵrestoreView(n);var t=i.ɵɵnextContext(2);return t.onProblemResolvedListener(e,t.problem)})),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext(2);i.ɵɵproperty("problem",r.problem)("job",r.job)}}function S(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"row-validation-problem-widget",13),i.ɵɵlistener("onProblemResolved",(function(e){i.ɵɵrestoreView(n);var t=i.ɵɵnextContext(2);return t.onProblemResolvedListener(e,t.problem)})),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext(2);i.ɵɵproperty("problem",r.problem)("job",r.job)}}function C(e,t){if(1&e&&(i.ɵɵelementStart(0,"div"),i.ɵɵtemplate(1,b,1,2,"parent-reference-problem-widget",14),i.ɵɵtemplate(2,y,1,2,"term-reference-problem-widget",14),i.ɵɵtemplate(3,S,1,2,"row-validation-problem-widget",14),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵproperty("ngIf","ParentReferenceProblem"===n.problem.type),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","TermReferenceProblem"===n.problem.type),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","RowValidationProblem"===n.problem.type)}}var E=function(){function e(e,t,n,o){this.service=e,this.iService=t,this.lService=n,this.bsModalRef=o,this.message=null,this.readonly=!1,this.edit=!1,this.onConflictAction=new r.Subject}return e.prototype.ngOnInit=function(){},e.prototype.onProblemResolvedListener=function(e){this.onConflictAction.next({action:"RESOLVED",data:e})},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.RegistryService),i.ɵɵdirectiveInject(a.IOService),i.ɵɵdirectiveInject(l.LocalizationService),i.ɵɵdirectiveInject(c.BsModalRef))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["job-conflict-modal"]],decls:15,vars:3,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"text-center"],["key","scheduledjobs.problemdetail.modal.title"],[1,"modal-form"],["form","ngForm"],[4,"ngIf"],[1,"row-holder"],[1,""],[1,"button-holder"],["type","button","role","button",1,"btn","btn-default",3,"click"],["key","io.back"],["role","alert",1,"alert","alert-danger"],[3,"problem","job","onProblemResolved"],[3,"problem","job","onProblemResolved",4,"ngIf"]],template:function(e,t){1&e&&(i.ɵɵelementStart(0,"div",0),i.ɵɵtemplate(1,h,2,1,"div",1),i.ɵɵelementStart(2,"div",2),i.ɵɵelementStart(3,"h2"),i.ɵɵelement(4,"localize",3),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"form",4,5),i.ɵɵelementStart(7,"fieldset"),i.ɵɵtemplate(8,v,2,2,"div",6),i.ɵɵtemplate(9,C,4,3,"div",6),i.ɵɵelementStart(10,"div",7),i.ɵɵelementStart(11,"div",8),i.ɵɵelementStart(12,"div",9),i.ɵɵelementStart(13,"button",10),i.ɵɵlistener("click",(function(){return t.onCancel()})),i.ɵɵelement(14,"localize",11),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e&&(i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null!=t.message),i.ɵɵadvance(7),i.ɵɵproperty("ngIf",t.problem&&t.job&&"IMPORT_RESOLVE"===t.job.stage),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",t.problem&&t.job&&"VALIDATION_RESOLVE"===t.job.stage))},directives:[s.NgIf,d.LocalizeComponent,p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,p.NgForm,m.ImportProblemWidgetComponent,u.ParentReferenceProblemWidgetComponent,g.TermReferenceProblemWidgetComponent,f.RowValidationProblemWidgetComponent],encapsulation:2}),e}();t.JobConflictModalComponent=E},626:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportProblemWidgetComponent=void 0;var r=n(0),o=(n(30),n(30),n(546),n(581)),i=(n(545),n(174)),a=(n(15),n(0)),l=n(545),c=n(15),s=n(30),d=n(1),p=n(44);function m(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",15),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function u(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",16),a.ɵɵelementStart(2,"div",17),a.ɵɵelement(3,"i",18),a.ɵɵelementStart(4,"p",19),a.ɵɵelementStart(5,"span",20),a.ɵɵelementStart(6,"strong"),a.ɵɵtext(7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"span",20),a.ɵɵtext(9),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"span",20),a.ɵɵtext(11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(12,"div",16),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(7),a.ɵɵtextInterpolate(n.job.fileName),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" Uploaded by: ",n.job.author," "),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" Started: ",n.job.createDate," ")}}var g=function(){function e(e,t,n,o,i){this.service=e,this.iService=t,this.lService=n,this.bsModalRef=o,this.modalService=i,this.message=null,this.onProblemResolved=new r.EventEmitter,this.readonly=!1,this.edit=!1}return e.prototype.ngOnInit=function(){},e.prototype.onEditGeoObject=function(){var e=this,t=this.modalService.show(o.GeoObjectEditorComponent,{backdrop:!0,ignoreBackdropClick:!0});t.content.configureFromImportError(this.problem,this.job.historyId,this.job.configuration.startDate,!0),t.content.setMasterListId(null),t.content.setOnSuccessCallback((function(){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()}))},e.prototype.getFriendlyProblemType=function(e){return"net.geoprism.registry.io.ParentCodeException"===e?this.lService.decode("scheduledjobs.job.problem.type.parent.lookup"):"net.geoprism.registry.io.PostalCodeLocationException"===e?this.lService.decode("scheduledjobs.job.problem.type.postal.code.lookup"):"net.geoprism.registry.io.AmbiguousParentException"===e?this.lService.decode("scheduledjobs.job.problem.type.multi.parent.lookup"):"net.geoprism.registry.io.InvalidGeometryException"===e?this.lService.decode("scheduledjobs.job.problem.type.invalid.geom.lookup"):"net.geoprism.registry.DataNotFoundException"===e?this.lService.decode("scheduledjobs.job.problem.type.datanotfound"):"net.geoprism.registry.roles.CreateGeoObjectPermissionException"===e||"net.geoprism.registry.roles.WriteGeoObjectPermissionException"===e||"net.geoprism.registry.roles.DeleteGeoObjectPermissionException"===e||"net.geoprism.registry.roles.ReadGeoObjectPermissionException"===e?this.lService.decode("scheduledjobs.job.problem.type.permission"):"com.runwaysdk.dataaccess.DuplicateDataException"===e||"net.geoprism.registry.DuplicateGeoObjectException"===e||"net.geoprism.registry.DuplicateGeoObjectCodeException"===e?this.lService.decode("scheduledjobs.job.problem.type.duplicate.data.lookup"):e},e.prototype.onSubmit=function(){},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=i.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.RegistryService),a.ɵɵdirectiveInject(l.IOService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(s.BsModalRef),a.ɵɵdirectiveInject(s.BsModalService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["import-problem-widget"]],inputs:{problem:"problem",job:"job"},outputs:{onProblemResolved:"onProblemResolved"},decls:22,vars:4,consts:[[1,""],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row","style","background: #F4F4F4;\n                                        border-radius: 10px;\n                                        margin-bottom: 20px;\n                                        margin-top: 20px;\n                                        padding: 10px;",4,"ngIf"],[1,"row",2,"background","#F4F4F4","border-radius","10px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-12"],[1,"row","equal",2,"display","flex","display","-webkit-flex","flex-wrap","wrap"],[1,"col-md-6",2,"padding-right","5px"],[2,"background","white","border-radius","10px","padding","10px","height","100%"],["key","etl.problem.header.problem"],[2,"font-style","italic"],["key","etl.problem.header.message"],[1,"col-md-6",2,"padding-left","5px"],[2,"background","white","border-radius","10px","padding","10px","height","100%","text-align","center"],["type","submit","role","button",1,"btn","btn-primary",2,"width","90%",3,"click"],["key","scheduledjobs.editGeoObject"],["role","alert",1,"alert","alert-danger"],[1,"col-md-6"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,m,2,1,"div",1),a.ɵɵtemplate(2,u,13,3,"div",2),a.ɵɵelementStart(3,"div",3),a.ɵɵelementStart(4,"div",4),a.ɵɵelementStart(5,"div",5),a.ɵɵelementStart(6,"div",6),a.ɵɵelementStart(7,"div",7),a.ɵɵelementStart(8,"h4"),a.ɵɵelementStart(9,"strong"),a.ɵɵelement(10,"localize",8),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(11,"p",9),a.ɵɵtext(12),a.ɵɵelementEnd(),a.ɵɵelementStart(13,"h4"),a.ɵɵelementStart(14,"strong"),a.ɵɵelement(15,"localize",10),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(16,"p",9),a.ɵɵtext(17),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(18,"div",11),a.ɵɵelementStart(19,"div",12),a.ɵɵelementStart(20,"button",13),a.ɵɵlistener("click",(function(){return t.onEditGeoObject()})),a.ɵɵelement(21,"localize",14),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.problem&&t.job),a.ɵɵadvance(10),a.ɵɵtextInterpolate(t.getFriendlyProblemType(t.problem.exception.type)),a.ɵɵadvance(5),a.ɵɵtextInterpolate(t.problem.exception.message))},directives:[d.NgIf,p.LocalizeComponent],encapsulation:2}),e}();t.ImportProblemWidgetComponent=g},627:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParentReferenceProblemWidgetComponent=void 0;var r=n(0),o=(n(30),n(30),n(37)),i=(n(546),n(545),n(174)),a=(n(15),n(0)),l=n(545),c=n(15),s=n(30),d=n(1),p=n(44),m=n(27),u=n(175);function g(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",30),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function f(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",31),a.ɵɵelementStart(2,"div",32),a.ɵɵelement(3,"i",33),a.ɵɵelementStart(4,"p",34),a.ɵɵelementStart(5,"span",35),a.ɵɵelementStart(6,"strong"),a.ɵɵtext(7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"span",35),a.ɵɵtext(9),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"span",35),a.ɵɵtext(11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(12,"div",31),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(7),a.ɵɵtextInterpolate(n.job.fileName),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" Uploaded by: ",n.job.author," "),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" Started: ",n.job.createDate," ")}}function h(e,t){if(1&e&&(a.ɵɵelementStart(0,"ol"),a.ɵɵelementStart(1,"li"),a.ɵɵtext(2),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵadvance(2),a.ɵɵtextInterpolate2("",n.label," (",n.type,")")}}function v(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",36),a.ɵɵtemplate(1,h,3,2,"ol",37),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",n.problem.context)}}var b=function(){function e(e,t,n,o,i){this.service=e,this.iService=t,this.lService=n,this.bsModalRef=o,this.modalService=i,this.message=null,this.onProblemResolved=new r.EventEmitter,this.readonly=!1,this.edit=!1}return e.prototype.ngOnInit=function(){this.problem.parent=null,this.searchLabel=""},e.prototype.getString=function(e){return JSON.stringify(e)},e.prototype.getValidationProblemDisplayLabel=function(e){return e.type},e.prototype.getTypeAheadObservable=function(e,t){var n=this,r=this.job.configuration.hierarchy;return o.Observable.create((function(t){n.service.getGeoObjectSuggestions(n.searchLabel,e,null,r,n.job.startDate).then((function(e){t.next(e)}))}))},e.prototype.typeaheadOnSelect=function(e,t){var n=this;this.service.getParentGeoObjects(e.item.uid,t.typeCode,[],!1,this.job.startDate).then((function(e){t.parent=e.geoObject,n.searchLabel=e.geoObject.properties.displayLabel.localizedValue})).catch((function(e){n.error(e)}))},e.prototype.onIgnore=function(){var e=this,t={resolution:"IGNORE",validationProblemId:this.problem.id};this.service.submitValidationResolve(t).then((function(t){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCreateSynonym=function(){var e=this,t={validationProblemId:this.problem.id,resolution:"SYNONYM",code:this.problem.parent.properties.code,typeCode:this.problem.parent.properties.type,label:this.problem.label};this.service.submitValidationResolve(t).then((function(t){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=i.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.RegistryService),a.ɵɵdirectiveInject(l.IOService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(s.BsModalRef),a.ɵɵdirectiveInject(s.BsModalService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["parent-reference-problem-widget"]],inputs:{problem:"problem",job:"job"},outputs:{onProblemResolved:"onProblemResolved"},decls:55,vars:12,consts:[[1,"container"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row","style","background: #F4F4F4;\n                                        border-radius: 10px;\n                                        margin-bottom: 20px;\n                                        margin-top: 20px;\n                                        padding: 10px;",4,"ngIf"],[1,"row",2,"background","#F4F4F4","border-radius","10px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-12"],[1,"row"],[1,"col-md-6",2,"background","white","border-radius","10px","width","41%","margin-right","7px"],["key","etl.problem.header.problem"],[2,"font-style","italic"],["key","etl.problem.header.message"],["key","etl.parentProblem.message"],["key","etl.problem.header.toResolve"],["key","etl.parentProblem.toResolve"],[1,"com-md-6",2,"background","white","border-radius","10px","width","41%","float","left","height","250px"],[1,"row-holder"],[1,"label-holder",2,"width","100px"],[1,"text"],["key","etl.problem.parent.context"],[1,"holder",2,"width","300px"],["style","margin-top:10px;",4,"ngIf"],["key","etl.problem.parent.label"],[1,"text",2,"margin-top","10px"],[1,"row-holder",2,"overflow","visible"],["key","etl.problem.parent.synonym"],["type","text","autocomplete","off","name","parentSearch","typeaheadOptionField","name",1,"form-control",2,"width","150px",3,"ngModel","typeaheadAsync","typeahead","typeaheadOptionsLimit","typeaheadMinLength","typeaheadWaitMs","ngModelChange","typeaheadOnSelect"],["key","etl.problem.parent.actions"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","etl.problem.reference.createSynonym"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","etl.problem.reference.ignore"],["role","alert",1,"alert","alert-danger"],[1,"col-md-6"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"],[2,"margin-top","10px"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,g,2,1,"div",1),a.ɵɵtemplate(2,f,13,3,"div",2),a.ɵɵelementStart(3,"div",3),a.ɵɵelementStart(4,"div",4),a.ɵɵelementStart(5,"div",5),a.ɵɵelementStart(6,"div",6),a.ɵɵelementStart(7,"h4"),a.ɵɵelementStart(8,"strong"),a.ɵɵelement(9,"localize",7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"p",8),a.ɵɵtext(11),a.ɵɵelementEnd(),a.ɵɵelementStart(12,"h4"),a.ɵɵelementStart(13,"strong"),a.ɵɵelement(14,"localize",9),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(15,"p",8),a.ɵɵelement(16,"localize",10),a.ɵɵelementEnd(),a.ɵɵelementStart(17,"h4"),a.ɵɵelementStart(18,"strong"),a.ɵɵelement(19,"localize",11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(20,"p"),a.ɵɵelement(21,"localize",12),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(22,"div",13),a.ɵɵelementStart(23,"div",14),a.ɵɵelementStart(24,"div",15),a.ɵɵelementStart(25,"label"),a.ɵɵelementStart(26,"span",16),a.ɵɵelement(27,"localize",17),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(28,"div",18),a.ɵɵtemplate(29,v,2,1,"div",19),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(30,"div",14),a.ɵɵelementStart(31,"div",15),a.ɵɵelementStart(32,"label"),a.ɵɵelementStart(33,"span",16),a.ɵɵelement(34,"localize",20),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(35,"div",18),a.ɵɵelementStart(36,"span",21),a.ɵɵtext(37),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(38,"div",22),a.ɵɵelementStart(39,"div",15),a.ɵɵelementStart(40,"label"),a.ɵɵelementStart(41,"span",16),a.ɵɵelement(42,"localize",23),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(43,"div",18),a.ɵɵelementStart(44,"input",24),a.ɵɵlistener("ngModelChange",(function(e){return t.searchLabel=e}))("typeaheadOnSelect",(function(e){return t.typeaheadOnSelect(e,t.problem)})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(45,"div",14),a.ɵɵelementStart(46,"div",15),a.ɵɵelementStart(47,"label"),a.ɵɵelementStart(48,"span",16),a.ɵɵelement(49,"localize",25),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(50,"div",18),a.ɵɵelementStart(51,"button",26),a.ɵɵlistener("click",(function(){return t.onCreateSynonym()})),a.ɵɵelement(52,"localize",27),a.ɵɵelementEnd(),a.ɵɵelementStart(53,"button",28),a.ɵɵlistener("click",(function(){return t.onIgnore()})),a.ɵɵelement(54,"localize",29),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.problem&&t.job),a.ɵɵadvance(9),a.ɵɵtextInterpolate(t.getValidationProblemDisplayLabel(t.problem)),a.ɵɵadvance(18),a.ɵɵproperty("ngIf",t.problem.context.length>0),a.ɵɵadvance(8),a.ɵɵtextInterpolate(t.problem.label),a.ɵɵadvance(7),a.ɵɵproperty("ngModel",t.searchLabel)("typeaheadAsync",!0)("typeahead",t.getTypeAheadObservable(t.problem.typeCode,t.problem))("typeaheadOptionsLimit",7)("typeaheadMinLength",0)("typeaheadWaitMs",300),a.ɵɵadvance(7),a.ɵɵproperty("disabled",null==t.problem.parent))},directives:[d.NgIf,p.LocalizeComponent,m.DefaultValueAccessor,m.NgControlStatus,m.NgModel,u.TypeaheadDirective,d.NgForOf],encapsulation:2}),e}();t.ParentReferenceProblemWidgetComponent=b},628:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TermReferenceProblemWidgetComponent=void 0;var r=n(0),o=(n(30),n(30),n(37)),i=(n(546),n(545),n(15),n(174)),a=n(0),l=n(545),c=n(15),s=n(30),d=n(1),p=n(44),m=n(27),u=n(175);function g(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",6),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function f(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",7),a.ɵɵelementStart(2,"div",8),a.ɵɵelement(3,"i",9),a.ɵɵelementStart(4,"p",10),a.ɵɵelementStart(5,"span",11),a.ɵɵelementStart(6,"strong"),a.ɵɵtext(7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"span",11),a.ɵɵtext(9),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"span",11),a.ɵɵtext(11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(12,"div",7),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(7),a.ɵɵtextInterpolate(n.job.fileName),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" Uploaded by: ",n.job.author," "),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" Started: ",n.job.createDate," ")}}function h(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",12),a.ɵɵelementStart(1,"div",13),a.ɵɵelementStart(2,"h4"),a.ɵɵelementStart(3,"strong"),a.ɵɵelement(4,"localize",14),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(5,"p",15),a.ɵɵtext(6),a.ɵɵelementEnd(),a.ɵɵelementStart(7,"h4"),a.ɵɵelementStart(8,"strong"),a.ɵɵelement(9,"localize",16),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"p",15),a.ɵɵelement(11,"localize",17),a.ɵɵelementEnd(),a.ɵɵelementStart(12,"h4"),a.ɵɵelementStart(13,"strong"),a.ɵɵelement(14,"localize",18),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(15,"p"),a.ɵɵelement(16,"localize",19),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(17,"div",20),a.ɵɵelementStart(18,"div",21),a.ɵɵelementStart(19,"div",22),a.ɵɵelementStart(20,"label"),a.ɵɵelementStart(21,"span",23),a.ɵɵelement(22,"localize",24),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(23,"div",25),a.ɵɵelementStart(24,"span",26),a.ɵɵtext(25),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(26,"div",21),a.ɵɵelementStart(27,"div",22),a.ɵɵelementStart(28,"label"),a.ɵɵelementStart(29,"span",23),a.ɵɵelement(30,"localize",27),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(31,"div",25),a.ɵɵelementStart(32,"span",26),a.ɵɵtext(33),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(34,"div",28),a.ɵɵelementStart(35,"div",22),a.ɵɵelementStart(36,"label"),a.ɵɵelementStart(37,"span",23),a.ɵɵelement(38,"localize",29),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(39,"div",25),a.ɵɵelementStart(40,"input",30),a.ɵɵlistener("ngModelChange",(function(e){return a.ɵɵrestoreView(n),a.ɵɵnextContext().searchLabel=e}))("typeaheadOnSelect",(function(e){a.ɵɵrestoreView(n);var t=a.ɵɵnextContext();return t.typeaheadOnSelect(e,t.problem)})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(41,"div",21),a.ɵɵelementStart(42,"div",22),a.ɵɵelementStart(43,"label"),a.ɵɵelementStart(44,"span",23),a.ɵɵelement(45,"localize",31),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(46,"div",25),a.ɵɵelementStart(47,"button",32),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onCreateSynonym()})),a.ɵɵelement(48,"localize",33),a.ɵɵelementEnd(),a.ɵɵelementStart(49,"button",34),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().onIgnore()})),a.ɵɵelement(50,"localize",35),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=a.ɵɵnextContext();a.ɵɵadvance(6),a.ɵɵtextInterpolate(r.getValidationProblemDisplayLabel(r.problem)),a.ɵɵadvance(19),a.ɵɵtextInterpolate(r.problem.attributeLabel),a.ɵɵadvance(8),a.ɵɵtextInterpolate(r.problem.label),a.ɵɵadvance(7),a.ɵɵproperty("ngModel",r.searchLabel)("typeaheadAsync",!0)("typeahead",r.getTypeAheadObservable(r.problem))("typeaheadOptionsLimit",7)("typeaheadMinLength",0)("typeaheadWaitMs",300),a.ɵɵadvance(7),a.ɵɵproperty("disabled",null==r.termId)}}var v=function(){function e(e,t,n,o,i){this.service=e,this.iService=t,this.lService=n,this.bsModalRef=o,this.modalService=i,this.message=null,this.onProblemResolved=new r.EventEmitter,this.termId=null,this.readonly=!1,this.edit=!1}return e.prototype.ngOnInit=function(){this.problem.parent=null,this.searchLabel=""},e.prototype.getValidationProblemDisplayLabel=function(e){return e.type},e.prototype.getTypeAheadObservable=function(e){var t=this;return o.Observable.create((function(n){t.iService.getTermSuggestions(e.mdAttributeId,t.searchLabel,"20").then((function(e){n.next(e)}))}))},e.prototype.typeaheadOnSelect=function(e){this.termId=e.item.value},e.prototype.onIgnore=function(){var e=this,t={resolution:"IGNORE",validationProblemId:this.problem.id};this.service.submitValidationResolve(t).then((function(t){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCreateSynonym=function(){var e=this,t={validationProblemId:this.problem.id,resolution:"SYNONYM",classifierId:this.termId,label:this.problem.label};this.service.submitValidationResolve(t).then((function(t){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=i.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.RegistryService),a.ɵɵdirectiveInject(l.IOService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(s.BsModalRef),a.ɵɵdirectiveInject(s.BsModalService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["term-reference-problem-widget"]],inputs:{problem:"problem",job:"job"},outputs:{onProblemResolved:"onProblemResolved"},decls:6,vars:3,consts:[[1,"container"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row","style","background: #F4F4F4;\n                                        border-radius: 10px;\n                                        margin-bottom: 20px;\n                                        margin-top: 20px;\n                                        padding: 10px;",4,"ngIf"],[1,"row",2,"background","#F4F4F4","border-radius","10px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-12"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"col-md-6"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"],[1,"row"],[1,"col-md-6",2,"background","white","border-radius","10px","width","41%","margin-right","7px"],["key","etl.problem.header.problem"],[2,"font-style","italic"],["key","etl.problem.header.message"],["key","etl.problem.termReference.message"],["key","etl.problem.header.toResolve"],["key","etl.problem.termReference.toResolve"],[1,"com-md-6",2,"background","white","border-radius","10px","width","41%","float","left","height","250px"],[1,"row-holder"],[1,"label-holder",2,"width","100px"],[1,"text"],["key","etl.problem.termReference.attributeLabel"],[1,"holder",2,"width","300px"],[1,"text",2,"margin-top","10px"],["key","etl.problem.termReference.label"],[1,"row-holder",2,"overflow","visible"],["key","etl.problem.termReference.synonym"],["type","text","autocomplete","off","name","termSearch","typeaheadOptionField","label",1,"form-control",2,"width","150px",3,"ngModel","typeaheadAsync","typeahead","typeaheadOptionsLimit","typeaheadMinLength","typeaheadWaitMs","ngModelChange","typeaheadOnSelect"],["key","etl.problem.termReference.actions"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled","click"],["key","etl.problem.reference.createSynonym"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","etl.problem.reference.ignore"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,g,2,1,"div",1),a.ɵɵtemplate(2,f,13,3,"div",2),a.ɵɵelementStart(3,"div",3),a.ɵɵelementStart(4,"div",4),a.ɵɵtemplate(5,h,51,10,"div",5),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.problem&&t.job),a.ɵɵadvance(3),a.ɵɵproperty("ngIf",t.problem))},directives:[d.NgIf,p.LocalizeComponent,m.DefaultValueAccessor,m.NgControlStatus,m.NgModel,u.TypeaheadDirective],encapsulation:2}),e}();t.TermReferenceProblemWidgetComponent=v},629:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RowValidationProblemWidgetComponent=void 0;var r=n(0),o=(n(30),n(30),n(37)),i=(n(546),n(545),n(174)),a=(n(15),n(0)),l=n(545),c=n(15),s=n(30),d=n(1),p=n(44);function m(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",20),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.message)}}function u(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",3),a.ɵɵelementStart(1,"div",21),a.ɵɵelementStart(2,"div",22),a.ɵɵelement(3,"i",23),a.ɵɵelementStart(4,"p",24),a.ɵɵelementStart(5,"span",25),a.ɵɵelementStart(6,"strong"),a.ɵɵtext(7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(8,"span",25),a.ɵɵtext(9),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"span",25),a.ɵɵtext(11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(12,"div",21),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext();a.ɵɵadvance(7),a.ɵɵtextInterpolate(n.job.fileName),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" Uploaded by: ",n.job.author," "),a.ɵɵadvance(2),a.ɵɵtextInterpolate1(" Started: ",n.job.createDate," ")}}var g=function(){function e(e,t,n,o,i){this.service=e,this.iService=t,this.lService=n,this.bsModalRef=o,this.modalService=i,this.message=null,this.onProblemResolved=new r.EventEmitter,this.readonly=!1,this.edit=!1}return e.prototype.ngOnInit=function(){this.problem.parent=null,this.searchLabel=""},e.prototype.getString=function(e){return JSON.stringify(e)},e.prototype.getValidationProblemDisplayLabel=function(e){return e.type},e.prototype.getTypeAheadObservable=function(e,t){var n=this,r=this.job.configuration.hierarchy;return o.Observable.create((function(t){n.service.getGeoObjectSuggestions(n.searchLabel,e,null,r,n.job.startDate).then((function(e){t.next(e)}))}))},e.prototype.typeaheadOnSelect=function(e,t){var n=this;this.service.getParentGeoObjects(e.item.uid,t.typeCode,[],!1,this.job.startDate).then((function(e){t.parent=e.geoObject,n.searchLabel=e.geoObject.properties.displayLabel.localizedValue})).catch((function(e){n.error(e)}))},e.prototype.onIgnore=function(){var e=this,t={resolution:"IGNORE",validationProblemId:this.problem.id};this.service.submitValidationResolve(t).then((function(t){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.formatAffectedRows=function(e){return e.replace(/,/g,", ")},e.prototype.onCreateSynonym=function(){var e=this,t={validationProblemId:this.problem.id,resolution:"SYNONYM",code:this.problem.parent.properties.code,typeCode:this.problem.parent.properties.type,label:this.problem.label};this.service.submitValidationResolve(t).then((function(t){e.onProblemResolved.emit(e.problem),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.onCancel=function(){this.bsModalRef.hide()},e.prototype.error=function(e){this.message=i.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.RegistryService),a.ɵɵdirectiveInject(l.IOService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(s.BsModalRef),a.ɵɵdirectiveInject(s.BsModalService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["row-validation-problem-widget"]],inputs:{problem:"problem",job:"job"},outputs:{onProblemResolved:"onProblemResolved"},decls:39,vars:5,consts:[[1,"container"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row","style","background: #F4F4F4;\n                                        border-radius: 10px;\n                                        margin-bottom: 20px;\n                                        margin-top: 20px;\n                                        padding: 10px;",4,"ngIf"],[1,"row",2,"background","#F4F4F4","border-radius","10px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-12"],[1,"row"],[1,"col-md-6",2,"background","white","border-radius","10px","width","41%","margin-right","7px"],["key","etl.problem.header.problem"],[2,"font-style","italic"],["key","etl.problem.header.message"],["key","etl.problem.rowValidation.message"],["key","etl.problem.header.toResolve"],["key","etl.problem.rowValidation.toResolve"],[1,"com-md-6",2,"background","white","border-radius","10px","width","41%","float","left","height","250px"],[1,"row-holder"],[1,"label-holder",2,"width","100px"],[1,"text"],["key","scheduledjobs.validation.table.affected.rows.header"],[1,"holder",2,"width","300px"],[1,"text",2,"margin-top","10px"],["role","alert",1,"alert","alert-danger"],[1,"col-md-6"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵtemplate(1,m,2,1,"div",1),a.ɵɵtemplate(2,u,13,3,"div",2),a.ɵɵelementStart(3,"div",3),a.ɵɵelementStart(4,"div",4),a.ɵɵelementStart(5,"div",5),a.ɵɵelementStart(6,"div",6),a.ɵɵelementStart(7,"h4"),a.ɵɵelementStart(8,"strong"),a.ɵɵelement(9,"localize",7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(10,"p",8),a.ɵɵtext(11),a.ɵɵelementEnd(),a.ɵɵelementStart(12,"h4"),a.ɵɵelementStart(13,"strong"),a.ɵɵelement(14,"localize",9),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(15,"p",8),a.ɵɵelement(16,"localize",10),a.ɵɵelementEnd(),a.ɵɵelementStart(17,"h4"),a.ɵɵelementStart(18,"strong"),a.ɵɵelement(19,"localize",11),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(20,"p"),a.ɵɵelement(21,"localize",12),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(22,"div",13),a.ɵɵelementStart(23,"div",14),a.ɵɵelementStart(24,"div",15),a.ɵɵelementStart(25,"label"),a.ɵɵelementStart(26,"span",16),a.ɵɵelement(27,"localize",17),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(28,"div",18),a.ɵɵelementStart(29,"span",19),a.ɵɵtext(30),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(31,"div",14),a.ɵɵelementStart(32,"div",15),a.ɵɵelementStart(33,"label"),a.ɵɵelementStart(34,"span",16),a.ɵɵelement(35,"localize",10),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(36,"div",18),a.ɵɵelementStart(37,"span",19),a.ɵɵtext(38),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(1),a.ɵɵproperty("ngIf",null!=t.message),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.problem&&t.job),a.ɵɵadvance(9),a.ɵɵtextInterpolate(t.getValidationProblemDisplayLabel(t.problem)),a.ɵɵadvance(19),a.ɵɵtextInterpolate(t.formatAffectedRows(t.problem.affectedRows)),a.ɵɵadvance(8),a.ɵɵtextInterpolate(t.problem.exception.message))},directives:[d.NgIf,p.LocalizeComponent],encapsulation:2}),e}();t.RowValidationProblemWidgetComponent=g},630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReuploadModalComponent=void 0;n(0),n(30);var r=n(37),o=n(247),i=n(334),a=(n(15),n(174)),l=(n(546),n(0)),c=n(30),s=n(15),d=n(1),p=n(27),m=n(44),u=n(247),g=["myFile"];function f(e,t){if(1&e&&(l.ɵɵelementStart(0,"span"),l.ɵɵtext(1),l.ɵɵelementEnd()),2&e){var n=l.ɵɵnextContext();l.ɵɵadvance(1),l.ɵɵtextInterpolate(n.errorMessage)}}function h(e,t){1&e&&l.ɵɵelement(0,"localize",17)}function v(e,t){1&e&&l.ɵɵelement(0,"localize",18)}function b(e,t){if(1&e&&l.ɵɵelement(0,"input",19,20),2&e){var n=l.ɵɵnextContext(2);l.ɵɵproperty("uploader",n.uploader)}}function y(e,t){if(1&e&&l.ɵɵelement(0,"input",21,20),2&e){var n=l.ɵɵnextContext(2);l.ɵɵproperty("uploader",n.uploader)}}function S(e,t){if(1&e){var n=l.ɵɵgetCurrentView();l.ɵɵelementStart(0,"form",4,5),l.ɵɵelementStart(2,"div",6),l.ɵɵelementStart(3,"label",7),l.ɵɵtemplate(4,h,1,0,"localize",8),l.ɵɵtemplate(5,v,1,0,"localize",9),l.ɵɵelementEnd(),l.ɵɵelementStart(6,"div",10),l.ɵɵtemplate(7,b,2,1,"input",11),l.ɵɵtemplate(8,y,2,1,"input",12),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(9,"div",13),l.ɵɵelementStart(10,"div",14),l.ɵɵelementStart(11,"button",15),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().bsModalRef.hide()})),l.ɵɵelementStart(12,"span"),l.ɵɵtext(13),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementStart(14,"button",16),l.ɵɵlistener("click",(function(){return l.ɵɵrestoreView(n),l.ɵɵnextContext().confirm()})),l.ɵɵelementStart(15,"span"),l.ɵɵtext(16),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵelementEnd()}if(2&e){var r=l.ɵɵnextContext();l.ɵɵadvance(4),l.ɵɵproperty("ngIf","SHAPEFILE"===r.job.configuration.formatType),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","EXCEL"===r.job.configuration.formatType),l.ɵɵadvance(2),l.ɵɵproperty("ngIf","SHAPEFILE"===r.job.configuration.formatType),l.ɵɵadvance(1),l.ɵɵproperty("ngIf","EXCEL"===r.job.configuration.formatType),l.ɵɵadvance(5),l.ɵɵtextInterpolate(r.cancelText),l.ɵɵadvance(1),l.ɵɵproperty("ngClass","DANGER"===r.type.toUpperCase()?"btn-danger":"btn-primary"),l.ɵɵadvance(2),l.ɵɵtextInterpolate(r.submitText)}}var C=function(){function e(e,t,n){this.bsModalRef=e,this.localizeService=t,this.eventService=n,this.title=this.localizeService.decode("reuploadmodal.title"),this.message=this.localizeService.decode("reuploadmodal.message"),this.submitText=this.localizeService.decode("reuploadmodal.import"),this.cancelText=this.localizeService.decode("modal.button.cancel"),this.type=i.ModalTypes.warning}return e.prototype.ngOnInit=function(){var e=this;this.onConfirm=new r.Subject;var t={queueLimit:1,removeAfterUpload:!0,url:acp+"/etl/reimport"};this.uploader=new o.FileUploader(t),this.uploader.onBuildItemForm=function(t,n){n.append("json",JSON.stringify(e.job.configuration))},this.uploader.onBeforeUploadItem=function(t){e.eventService.start()},this.uploader.onCompleteItem=function(t,n,r,o){e.fileRef.nativeElement.value="",e.eventService.complete()},this.uploader.onSuccessItem=function(t,n,r,o){e.onConfirm.next(e.data),e.bsModalRef.hide()},this.uploader.onErrorItem=function(t,n,r,o){e.error(JSON.parse(n))}},e.prototype.toString=function(e){return JSON.stringify(e)},e.prototype.confirm=function(){null!=this.uploader.queue&&this.uploader.queue.length>0?this.uploader.uploadAll():this.error({message:this.localizeService.decode("io.missing.file"),error:{}})},e.prototype.error=function(e){this.errorMessage=a.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(l.ɵɵdirectiveInject(c.BsModalRef),l.ɵɵdirectiveInject(s.LocalizationService),l.ɵɵdirectiveInject(s.EventService))},e.ɵcmp=l.ɵɵdefineComponent({type:e,selectors:[["reupload-modal"]],viewQuery:function(e,t){var n;(1&e&&l.ɵɵviewQuery(g,!0),2&e)&&(l.ɵɵqueryRefresh(n=l.ɵɵloadQuery())&&(t.fileRef=n.first))},inputs:{title:"title",message:"message",data:"data",submitText:"submitText",cancelText:"cancelText",type:"type",job:"job"},decls:8,vars:4,consts:[[1,"modal-body"],[1,"heading"],[4,"ngIf"],["style","margin-top: 30px;",4,"ngIf"],[2,"margin-top","30px"],["form","ngForm"],[1,"form-group","row"],["for","file",1,"col-md-3","text-right"],["key","io.shapefile",4,"ngIf"],["key","io.spreadsheet",4,"ngIf"],[1,"col-md-9"],["class","ghost-input","name","file","type","file","ng2FileSelect","","accept",".zip","required","",3,"uploader",4,"ngIf"],["class","ghost-input","name","file","type","file","ng2FileSelect","","accept",".xlsx,.zip","required","",3,"uploader",4,"ngIf"],[1,"modal-footer"],[1,"button-holder"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",2,"padding","4px 18px",3,"click"],["type","button","role","button","aria-disabled","false",1,"btn",2,"padding","4px 18px",3,"ngClass","click"],["key","io.shapefile"],["key","io.spreadsheet"],["name","file","type","file","ng2FileSelect","","accept",".zip","required","",1,"ghost-input",3,"uploader"],["myFile",""],["name","file","type","file","ng2FileSelect","","accept",".xlsx,.zip","required","",1,"ghost-input",3,"uploader"]],template:function(e,t){1&e&&(l.ɵɵelementStart(0,"div",0),l.ɵɵelementStart(1,"div",1),l.ɵɵelementStart(2,"h3"),l.ɵɵtext(3),l.ɵɵelementEnd(),l.ɵɵelementEnd(),l.ɵɵtemplate(4,f,2,1,"span",2),l.ɵɵelementStart(5,"span"),l.ɵɵtext(6),l.ɵɵelementEnd(),l.ɵɵtemplate(7,S,17,7,"form",3),l.ɵɵelementEnd()),2&e&&(l.ɵɵadvance(3),l.ɵɵtextInterpolate(t.title),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.errorMessage),l.ɵɵadvance(2),l.ɵɵtextInterpolate(t.message),l.ɵɵadvance(1),l.ɵɵproperty("ngIf",t.job))},directives:[d.NgIf,p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,p.NgForm,d.NgClass,m.LocalizeComponent,u.FileSelectDirective],encapsulation:2}),e}();t.ReuploadModalComponent=C},631:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskViewerComponent=void 0;n(0);var r=n(1),o=(n(545),n(546),n(0)),i=n(545),a=n(128),l=n(86),c=n(44),s=n(1),d=n(246);function p(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",14),o.ɵɵelementStart(1,"div",15),o.ɵɵelementStart(2,"h4"),o.ɵɵtext(3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"div",16),o.ɵɵelementStart(5,"div",4),o.ɵɵelementStart(6,"div",5),o.ɵɵelementStart(7,"label"),o.ɵɵelement(8,"localize",17),o.ɵɵelementEnd(),o.ɵɵelementStart(9,"p",18),o.ɵɵtext(10),o.ɵɵelementEnd(),o.ɵɵelementStart(11,"label",19),o.ɵɵelement(12,"localize",20),o.ɵɵelementEnd(),o.ɵɵelementStart(13,"span"),o.ɵɵtext(14),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(15,"div",21),o.ɵɵelementStart(16,"label",22),o.ɵɵelement(17,"input",23),o.ɵɵelementStart(18,"span"),o.ɵɵelement(19,"localize",24),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(20,"label",22),o.ɵɵelementStart(21,"input",25),o.ɵɵlistener("click",(function(){o.ɵɵrestoreView(n);var e=t.$implicit;return o.ɵɵnextContext(2).onCompleteTask(e)})),o.ɵɵelementEnd(),o.ɵɵelementStart(22,"span"),o.ɵɵelement(23,"localize",26),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=t.$implicit,i=o.ɵɵnextContext(2);o.ɵɵadvance(3),o.ɵɵtextInterpolate(i.upper(r.title)),o.ɵɵadvance(7),o.ɵɵtextInterpolate(r.msg),o.ɵɵadvance(4),o.ɵɵtextInterpolate(r.createDate),o.ɵɵadvance(3),o.ɵɵpropertyInterpolate1("id","",r.id,"-inProgress"),o.ɵɵpropertyInterpolate1("name","",r.id,"-inProgress"),o.ɵɵadvance(4),o.ɵɵpropertyInterpolate1("id","",r.id,"-completed"),o.ɵɵpropertyInterpolate1("name","",r.id,"-completed")}}function m(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",27),o.ɵɵelementStart(1,"pagination-controls",28),o.ɵɵlistener("pageChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onInProgressTasksPageChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}}var u=function(e,t,n){return{id:"inProgressTasks",itemsPerPage:e,currentPage:t,totalItems:n}};function g(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",4),o.ɵɵelementStart(1,"div",9),o.ɵɵelementStart(2,"div",11),o.ɵɵtemplate(3,p,24,7,"div",12),o.ɵɵpipe(4,"paginate"),o.ɵɵtemplate(5,m,2,0,"div",13),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(3),o.ɵɵproperty("ngForOf",o.ɵɵpipeBind2(4,2,n.inProgressTasks.results,o.ɵɵpureFunction3(5,u,n.inProgressTasks.pageSize,n.inProgressTasks.pageNumber,n.inProgressTasks.count))),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",n.inProgressTasks.results.length>0)}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",14),o.ɵɵelementStart(1,"div",15),o.ɵɵelementStart(2,"h4"),o.ɵɵtext(3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"div",16),o.ɵɵelementStart(5,"div",4),o.ɵɵelementStart(6,"div",5),o.ɵɵelementStart(7,"label"),o.ɵɵelement(8,"localize",17),o.ɵɵelementEnd(),o.ɵɵelementStart(9,"p",18),o.ɵɵtext(10),o.ɵɵelementEnd(),o.ɵɵelementStart(11,"label",19),o.ɵɵelement(12,"localize",20),o.ɵɵelementEnd(),o.ɵɵelementStart(13,"span",29),o.ɵɵtext(14),o.ɵɵelementEnd(),o.ɵɵelementStart(15,"label",19),o.ɵɵelement(16,"localize",30),o.ɵɵelementEnd(),o.ɵɵelementStart(17,"span"),o.ɵɵtext(18),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(19,"div",21),o.ɵɵelementStart(20,"label",22),o.ɵɵelementStart(21,"input",31),o.ɵɵlistener("click",(function(){o.ɵɵrestoreView(n);var e=t.$implicit;return o.ɵɵnextContext(2).onMoveTaskToInProgress(e)})),o.ɵɵelementEnd(),o.ɵɵelementStart(22,"span"),o.ɵɵelement(23,"localize",24),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(24,"label",22),o.ɵɵelement(25,"input",32),o.ɵɵelementStart(26,"span"),o.ɵɵelement(27,"localize",26),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=t.$implicit,i=o.ɵɵnextContext(2);o.ɵɵadvance(3),o.ɵɵtextInterpolate(i.upper(r.title)),o.ɵɵadvance(7),o.ɵɵtextInterpolate(r.msg),o.ɵɵadvance(4),o.ɵɵtextInterpolate(r.createDate),o.ɵɵadvance(4),o.ɵɵtextInterpolate(r.completedDate),o.ɵɵadvance(3),o.ɵɵpropertyInterpolate1("id","",r.id,"-inProgress"),o.ɵɵpropertyInterpolate1("name","",r.id,"-inProgress"),o.ɵɵadvance(4),o.ɵɵpropertyInterpolate1("id","",r.id,"-completed"),o.ɵɵpropertyInterpolate1("name","",r.id,"-completed")}}function h(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",27),o.ɵɵelementStart(1,"pagination-controls",33),o.ɵɵlistener("pageChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).onCompletedTasksPageChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}}var v=function(e,t,n){return{id:"completedTasks",itemsPerPage:e,currentPage:t,totalItems:n}};function b(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",11),o.ɵɵtemplate(1,f,28,8,"div",12),o.ɵɵpipe(2,"paginate"),o.ɵɵtemplate(3,h,2,0,"div",13),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("ngForOf",o.ɵɵpipeBind2(2,2,n.completedTasks.results,o.ɵɵpureFunction3(5,v,n.completedTasks.pageSize,n.completedTasks.pageNumber,n.completedTasks.count))),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",n.completedTasks.results.length>0)}}function y(e,t){1&e&&(o.ɵɵelementStart(0,"div",11),o.ɵɵelementStart(1,"p",34),o.ɵɵelement(2,"localize",35),o.ɵɵelementEnd(),o.ɵɵelementEnd())}var S=function(){function e(e){this.taskService=e,this.inProgressTasks={count:0,pageNumber:1,pageSize:10,results:[]},this.completedTasks={count:0,pageNumber:1,pageSize:10,results:[]},this.isViewAllOpen=!1,this.activeTimeCounter=0,this.completeTimeCounter=0}return e.prototype.ngOnInit=function(){this.onInProgressTasksPageChange(1)},e.prototype.upper=function(e){return null!=e?e.toUpperCase():""},e.prototype.onInProgressTasksPageChange=function(e){var t=this;this.taskService.getMyTasks(e,this.inProgressTasks.pageSize,"UNRESOLVED").then((function(e){t.inProgressTasks=e}))},e.prototype.onCompletedTasksPageChange=function(e){var t=this;this.taskService.getMyTasks(e,this.completedTasks.pageSize,"RESOLVED").then((function(e){t.completedTasks=e}))},e.prototype.onCompleteTask=function(e){var t=this;this.taskService.completeTask(e.id).then((function(){var n=t.inProgressTasks.results.findIndex((function(t){return t.id===e.id}));-1!==n&&t.inProgressTasks.results.splice(n,1),t.completedTasks.results.push(e)}))},e.prototype.onMoveTaskToInProgress=function(e){var t=this;this.isViewAllOpen=!0,this.taskService.setTaskStatus(e.id,"UNRESOLVED").then((function(){var n=t.completedTasks.results.findIndex((function(t){return t.id===e.id}));-1!==n&&t.completedTasks.results.splice(n,1),t.completedTasks.results.splice(n,1),t.inProgressTasks.results.push(e)}))},e.prototype.onViewAllCompletedTasks=function(){this.isViewAllOpen=!0,this.onCompletedTasksPageChange(1)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.TaskService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["task-viewer"]],inputs:{geoObjectType:"geoObjectType"},features:[o.ɵɵProvidersFeature([r.DatePipe])],decls:18,vars:3,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container"],["key","tasks.openTasksTitle"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-9"],["key","tasks.completedTasksTitle"],["type","submit","role","button",1,"btn","btn-default","pull-right",2,"margin-top","20px",3,"click"],["key","tasks.viewCompletedTasksButton"],[1,"col-md-12"],["class","content-wrapper",4,"ngIf"],[1,"content-wrapper"],["class","panel panel-default",4,"ngFor","ngForOf"],["class","solid-table-footer",4,"ngIf"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-body"],["key","tasks.taskMessage"],[2,"margin-bottom","20px"],[2,"margin-right","20px"],["key","tasks.createDateLabel"],[1,"col-md-3",2,"min-height","90px","display","flex","align-items","center"],[1,"radio-inline","radio"],["type","radio","checked","","value","true",1,"inline-radio-input",2,"height","auto",3,"id","name"],["key","tasks.open"],["type","radio","value","false",1,"inline-radio-input",2,"margin-left","15px","height","auto",3,"id","name","click"],["key","tasks.complete"],[1,"solid-table-footer"],["id","inProgressTasks",3,"pageChange"],[2,"margin-right","30px"],["key","tasks.completeDateLabel"],["type","radio","value","true",1,"inline-radio-input",2,"height","auto",3,"id","name","click"],["checked","","type","radio","value","false",1,"inline-radio-input",2,"margin-left","15px","height","auto",3,"id","name"],["id","completedTasks",3,"pageChange"],[2,"font-style","italic","color","grey"],["key","tasks.no.completed.tasks.message"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelement(1,"cgr-header"),o.ɵɵelementStart(2,"div",1),o.ɵɵelement(3,"message"),o.ɵɵelementStart(4,"h2"),o.ɵɵelement(5,"localize",2),o.ɵɵelementEnd(),o.ɵɵelement(6,"hr"),o.ɵɵtemplate(7,g,6,9,"div",3),o.ɵɵelementStart(8,"div",4),o.ɵɵelementStart(9,"h2",5),o.ɵɵelement(10,"localize",6),o.ɵɵelementEnd(),o.ɵɵelementStart(11,"button",7),o.ɵɵlistener("click",(function(){return t.onViewAllCompletedTasks()})),o.ɵɵelement(12,"localize",8),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelement(13,"hr"),o.ɵɵelementStart(14,"div",4),o.ɵɵelementStart(15,"div",9),o.ɵɵtemplate(16,b,4,9,"div",10),o.ɵɵtemplate(17,y,3,0,"div",10),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(7),o.ɵɵproperty("ngIf",t.inProgressTasks.results.length>0),o.ɵɵadvance(9),o.ɵɵproperty("ngIf",t.isViewAllOpen&&t.completedTasks.results.length>0),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",0===t.completedTasks.results.length&&t.isViewAllOpen))},directives:[a.CgrHeaderComponent,l.MessageComponent,c.LocalizeComponent,s.NgIf,s.NgForOf,d.PaginationControlsComponent],pipes:[d.PaginatePipe],styles:['.modal-content[_ngcontent-%COMP%] {\n    overflow-y: visible !important;\n}\n\n.modal-form[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   input[type="text"][_ngcontent-%COMP%]:disabled {\n    background: #eee;\n}\n\nli.list-group-item[_ngcontent-%COMP%] {\n    font-size: 18px;\n}\n\n.warning-text[_ngcontent-%COMP%]{\n    color: orange;\n}\n\n\n\n.btn-group.geobject-editor-tab-holder[_ngcontent-%COMP%]   label.btn.full-width-radio-button.disabled[_ngcontent-%COMP%] {\n    border-color: #a7a7a7 !important;\n    font-weight: normal;\n    color: #a7a7a7;\n}\n.btn-group.geobject-editor-tab-holder[_ngcontent-%COMP%]   .btn.full-width-radio-button.disabled[_ngcontent-%COMP%]:active, .btn-group.geobject-editor-tab-holder[_ngcontent-%COMP%]   .btn.full-width-radio-button.disabled[_ngcontent-%COMP%]:focus {\n    background: white !important;\n    background: var(--theme-button-color) !important;\n    outline: 0px !important;\n}\n\n\nlabel.btn.full-width-radio-button.error[_ngcontent-%COMP%] {\n    border-color: #8c0000;\n}']}),e}();t.TaskViewerComponent=S},632:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronizationConfigManagerComponent=void 0;n(0),n(28),n(30),n(15);var r=n(334),o=n(174),i=(n(545),n(633)),a=n(0),l=n(545),c=n(15),s=n(28),d=n(30),p=n(128),m=n(85),u=n(44),g=n(1),f=n(246);function h(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"tr",15),a.ɵɵelementStart(1,"td",16),a.ɵɵelementStart(2,"a",17),a.ɵɵtext(3),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(4,"td",18),a.ɵɵelementStart(5,"button",13),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=t.$implicit;return a.ɵɵnextContext().onView(e)})),a.ɵɵelement(6,"localize",19),a.ɵɵelementEnd(),a.ɵɵelementStart(7,"button",20),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=t.$implicit;return a.ɵɵnextContext().onEdit(e)})),a.ɵɵelement(8,"localize",21),a.ɵɵelementEnd(),a.ɵɵelementStart(9,"button",22),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=t.$implicit;return a.ɵɵnextContext().onRemove(e)})),a.ɵɵelement(10,"localize",23),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=t.$implicit;a.ɵɵadvance(2),a.ɵɵproperty("routerLink","/registry/synchronization-config/"+r.oid),a.ɵɵadvance(1),a.ɵɵtextInterpolate1(" ",r.label.localizedValue," ")}}var v=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}},b=function(){function e(e,t,n,r){this.service=e,this.lService=t,this.router=n,this.modalService=r,this.message=null,this.page={resultSet:[],count:0,pageNumber:1,pageSize:20}}return e.prototype.ngOnInit=function(){this.onPageChange(1)},e.prototype.onPageChange=function(e){var t=this;this.service.getPage(e,this.page.pageSize).then((function(e){t.page=e})).catch((function(e){t.error(e)}))},e.prototype.create=function(){var e=this;this.service.edit(null).then((function(t){var n=e.modalService.show(i.SynchronizationConfigModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});n.content.init(null,t.orgs),n.content.onSuccess.subscribe((function(){e.onPageChange(e.page.pageNumber)}))}))},e.prototype.onEdit=function(e){var t=this;this.service.edit(e.oid).then((function(e){var n=t.modalService.show(i.SynchronizationConfigModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0});n.content.init(e.config,e.orgs),n.content.onSuccess.subscribe((function(){t.onPageChange(t.page.pageNumber)}))}))},e.prototype.onRemove=function(e){var t=this;this.bsModalRef=this.modalService.show(o.ConfirmModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0}),this.bsModalRef.content.message=this.lService.decode("confirm.modal.verify.delete")+" ["+e.label.localizedValue+"]",this.bsModalRef.content.submitText=this.lService.decode("modal.button.delete"),this.bsModalRef.content.type=r.ModalTypes.danger,this.bsModalRef.content.onConfirm.subscribe((function(){t.service.remove(e.oid).then((function(){t.onPageChange(t.page.pageNumber)})).catch((function(e){t.error(e)}))}))},e.prototype.onView=function(e){this.router.navigate(["/registry/synchronization-config/",e.oid])},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.SynchronizationConfigService),a.ɵɵdirectiveInject(c.LocalizationService),a.ɵɵdirectiveInject(s.Router),a.ɵɵdirectiveInject(d.BsModalService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["synchronization-config-manager"]],decls:22,vars:8,consts:[[1,"new-admin-design-main"],[1,"container-fluid"],[1,"heading"],["key","synchronization.config.manager"],[1,"row"],[1,"col-md-12","order-md-1"],[1,"table"],[2,"width","70%"],["key","synchronization.config.label"],["class","clickable",4,"ngFor","ngForOf"],[3,"pageChange"],[1,"row",2,"margin-top","30px","margin-bottom","30px"],[1,"col-md-6"],["type","submit","role","button",1,"btn","btn-primary",3,"click"],["key","hierarchy.management.button.create"],[1,"clickable"],[2,"width","70%","vertical-align","middle"],["routerLinkActive","active",3,"routerLink"],[2,"width","30%","text-align","right"],["key","modal.button.view"],["type","submit","role","button",1,"btn","btn-default",2,"margin-left","5px",3,"click"],["key","modal.button.edit"],["type","submit","role","button",1,"btn","btn-danger",2,"margin-left","5px",3,"click"],["key","modal.button.delete"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵelement(1,"cgr-header"),a.ɵɵelement(2,"loading-bar"),a.ɵɵelementStart(3,"div",1),a.ɵɵelementStart(4,"div",2),a.ɵɵelementStart(5,"h2"),a.ɵɵelement(6,"localize",3),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(7,"div",4),a.ɵɵelementStart(8,"div",5),a.ɵɵelementStart(9,"table",6),a.ɵɵelementStart(10,"thead"),a.ɵɵelementStart(11,"tr"),a.ɵɵelementStart(12,"th",7),a.ɵɵelement(13,"localize",8),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(14,"tbody"),a.ɵɵtemplate(15,h,11,2,"tr",9),a.ɵɵpipe(16,"paginate"),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(17,"pagination-controls",10),a.ɵɵlistener("pageChange",(function(e){return t.onPageChange(e)})),a.ɵɵelementEnd(),a.ɵɵelementStart(18,"div",11),a.ɵɵelementStart(19,"div",12),a.ɵɵelementStart(20,"button",13),a.ɵɵlistener("click",(function(){return t.create()})),a.ɵɵelement(21,"localize",14),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(15),a.ɵɵproperty("ngForOf",a.ɵɵpipeBind2(16,1,t.page.resultSet,a.ɵɵpureFunction3(4,v,t.page.pageSize,t.page.pageNumber,t.page.count))))},directives:[p.CgrHeaderComponent,m.LoadingBarComponent,u.LocalizeComponent,g.NgForOf,f.PaginationControlsComponent,s.RouterLinkWithHref,s.RouterLinkActive],pipes:[f.PaginatePipe],encapsulation:2}),e}();t.SynchronizationConfigManagerComponent=b},633:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronizationConfigModalComponent=void 0;n(0),n(30);var r=n(37),o=(n(15),n(174)),i=(n(545),n(0)),a=n(545),l=n(15),c=n(30),s=n(1),d=n(44),p=n(27),m=n(100),u=["form"];function g(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",18),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.message)}}function f(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",7),i.ɵɵelementStart(1,"div",8),i.ɵɵelementStart(2,"label"),i.ɵɵelement(3,"localize",19),i.ɵɵtext(4),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"div",10),i.ɵɵelementStart(6,"input",20),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),t.$implicit.value=e})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=t.$implicit;i.ɵɵadvance(4),i.ɵɵtextInterpolate1(" (",r.locale,") "),i.ɵɵadvance(2),i.ɵɵproperty("ngModel",r.value)("name","label-"+r.locale)("required","defaultLocale"===r.locale)}}function h(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",21),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵproperty("value",n.code),i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.label)}}function v(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",21),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵproperty("value",n.code),i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.label)}}function b(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",7),i.ɵɵelementStart(1,"div",8),i.ɵɵelementStart(2,"label"),i.ɵɵelement(3,"localize",22),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"div",10),i.ɵɵelementStart(5,"span",11),i.ɵɵelementStart(6,"select",23),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().config.hierarchy=e})),i.ɵɵelement(7,"option"),i.ɵɵtemplate(8,v,2,2,"option",13),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(6),i.ɵɵproperty("ngModel",r.config.hierarchy)("disabled",null!=r.config.oid),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",r.cOrg.hierarchies)}}function y(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",21),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵproperty("value",n.oid),i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.label)}}function S(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",7),i.ɵɵelementStart(1,"div",8),i.ɵɵelementStart(2,"label"),i.ɵɵelement(3,"localize",24),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"div",10),i.ɵɵelementStart(5,"span",11),i.ɵɵelementStart(6,"select",25),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().config.system=e}))("change",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext().onChangeExternalSystem()})),i.ɵɵelement(7,"option"),i.ɵɵtemplate(8,y,2,2,"option",13),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(6),i.ɵɵproperty("ngModel",r.config.system)("disabled",null!=r.config.oid),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",r.cOrg.systems)}}function C(e,t){if(1&e&&(i.ɵɵelementStart(0,"td",29),i.ɵɵelementStart(1,"label",45),i.ɵɵelement(2,"localize",46),i.ɵɵtext(3),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵadvance(3),i.ɵɵtextInterpolate1(" ",n.levelNum+1,"")}}function E(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",21),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵproperty("value",n.code),i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.label.localizedValue)}}function x(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"td",31),i.ɵɵelementStart(1,"select",47),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().$implicit.level.geoObjectType=e}))("change",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext(),t=e.$implicit,r=e.index;return i.ɵɵnextContext(2).onSelectGeoObjectType(t.level.geoObjectType,r)})),i.ɵɵelement(2,"option"),i.ɵɵtemplate(3,E,2,2,"option",13),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext().$implicit,o=i.ɵɵnextContext(2);i.ɵɵadvance(1),i.ɵɵproperty("ngModel",r.level.geoObjectType)("name","geoObjectType"+r.levelNum),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",o.types)}}function O(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"td",31),i.ɵɵelementStart(1,"select",48),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().$implicit.level.type=e})),i.ɵɵelement(2,"option"),i.ɵɵelementStart(3,"option",49),i.ɵɵelement(4,"localize",26),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"option",50),i.ɵɵelement(6,"localize",51),i.ɵɵelementEnd(),i.ɵɵelementStart(7,"option",52),i.ɵɵelement(8,"localize",53),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext().$implicit;i.ɵɵadvance(1),i.ɵɵproperty("ngModel",r.level.type)("name","type"+r.levelNum)}}function I(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",21),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵproperty("value",n.id),i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.name)}}function M(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"td",34),i.ɵɵelementStart(1,"select",54),i.ɵɵlistener("ngModelChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext().$implicit.level.orgUnitGroupId=e})),i.ɵɵelement(2,"option"),i.ɵɵtemplate(3,I,2,2,"option",13),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext().$implicit,o=i.ɵɵnextContext(2);i.ɵɵadvance(1),i.ɵɵproperty("ngModel",r.level.orgUnitGroupId)("name","group"+r.levelNum),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",o.orgUnitGroups)}}function w(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"a",55),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext(2).$implicit;return i.ɵɵnextContext(2).configureAttributes(e)})),i.ɵɵpipe(1,"localize"),i.ɵɵelement(2,"icon",60),i.ɵɵelementStart(3,"label",61),i.ɵɵelement(4,"localize",62),i.ɵɵelementEnd(),i.ɵɵelementEnd()}2&e&&i.ɵɵproperty("title",i.ɵɵpipeBind1(1,1,"sync.attr.configureAttributes.helptext"))}function j(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"td",31),i.ɵɵelementStart(1,"div"),i.ɵɵelementStart(2,"a",55),i.ɵɵlistener("click",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext(),t=e.$implicit,r=e.index;return i.ɵɵnextContext(2).removeLevel(t.levelNum,r)})),i.ɵɵpipe(3,"localize"),i.ɵɵelement(4,"icon",56),i.ɵɵelementStart(5,"label",57),i.ɵɵelement(6,"localize",58),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(7,"div"),i.ɵɵtemplate(8,w,5,3,"a",59),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext().$implicit;i.ɵɵadvance(2),i.ɵɵproperty("title",i.ɵɵpipeBind1(3,2,"button.delete.helptext")),i.ɵɵadvance(6),i.ɵɵproperty("ngIf",r.hasAttributes)}}function k(e,t){1&e&&(i.ɵɵelementStart(0,"label"),i.ɵɵelement(1,"localize",76),i.ɵɵelementEnd())}function T(e,t){1&e&&i.ɵɵelement(0,"localize",77)}function P(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"select",80),i.ɵɵlistener("ngModelChange",(function(e){i.ɵɵrestoreView(n);var t=i.ɵɵnextContext(2).$implicit,r=i.ɵɵnextContext(2).index;return i.ɵɵnextContext(2).levelRows[r-1].level.attributes[t.name].isOrgUnitGroup=e}))("change",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext(2).$implicit,t=i.ɵɵnextContext(2).index,r=i.ɵɵnextContext(2);return r.onChangeTargetType(r.levelRows[t-1].level.attributes[e.name])})),i.ɵɵelementStart(1,"option",81),i.ɵɵtext(2),i.ɵɵelementEnd(),i.ɵɵelementStart(3,"option",81),i.ɵɵelement(4,"localize",82),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext(2).$implicit,o=i.ɵɵnextContext(2).index,a=i.ɵɵnextContext(2);i.ɵɵproperty("ngModel",a.levelRows[o-1].level.attributes[r.name].isOrgUnitGroup)("name","isOrgUnitGroup"+o+r.name),i.ɵɵadvance(1),i.ɵɵproperty("ngValue",!1),i.ɵɵadvance(1),i.ɵɵtextInterpolate(r.typeLabel),i.ɵɵadvance(1),i.ɵɵproperty("ngValue",!0)}}function z(e,t){if(1&e&&(i.ɵɵelementStart(0,"td",78),i.ɵɵtemplate(1,P,5,5,"select",79),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵadvance(1),i.ɵɵproperty("ngIf","term"===n.type)}}function V(e,t){1&e&&(i.ɵɵelementStart(0,"td",83),i.ɵɵelementStart(1,"label",71),i.ɵɵelement(2,"localize",84),i.ɵɵelementEnd(),i.ɵɵelementEnd())}function N(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",21),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵproperty("value",n.dhis2Id),i.ɵɵadvance(1),i.ɵɵtextInterpolate1(" ",n.name," ")}}var R=function(){return{standalone:!0}};function A(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"select",85),i.ɵɵlistener("ngModelChange",(function(e){i.ɵɵrestoreView(n);var t=i.ɵɵnextContext().$implicit,r=i.ɵɵnextContext(2).index;return i.ɵɵnextContext(2).levelRows[r-1].level.attributes[t.name].externalId=e}))("change",(function(){i.ɵɵrestoreView(n);var e=i.ɵɵnextContext().$implicit,t=i.ɵɵnextContext(2),r=t.index,o=t.$implicit,a=i.ɵɵnextContext(2);return a.onChangeAttrMapping(a.levelRows[r-1].level.attributes[e.name],a.levelRows[r-1].level.attributes[e.name].externalId,o)})),i.ɵɵelementStart(1,"option",81),i.ɵɵelement(2,"localize",86),i.ɵɵelementEnd(),i.ɵɵtemplate(3,N,2,2,"option",13),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext().$implicit,o=i.ɵɵnextContext(2).index,a=i.ɵɵnextContext(2);i.ɵɵproperty("ngModel",a.levelRows[o-1].level.attributes[r.name].externalId)("ngModelOptions",i.ɵɵpureFunction0(4,R)),i.ɵɵadvance(1),i.ɵɵproperty("ngValue",null),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",r.dhis2Attrs)}}function D(e,t){1&e&&(i.ɵɵelementStart(0,"label",71),i.ɵɵelement(1,"localize",87),i.ɵɵelementEnd())}function L(e,t){1&e&&i.ɵɵelement(0,"localize",95)}function F(e,t){1&e&&i.ɵɵelement(0,"localize",96)}function _(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",21),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵproperty("value",n.code),i.ɵɵadvance(1),i.ɵɵtextInterpolate1(" ",n.name," ")}}function G(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"select",97),i.ɵɵlistener("ngModelChange",(function(e){i.ɵɵrestoreView(n);var t=i.ɵɵnextContext().$implicit,r=i.ɵɵnextContext(2).$implicit,o=i.ɵɵnextContext(2).index;return i.ɵɵnextContext(2).levelRows[o-1].level.attributes[r.name].terms[t.code]=e})),i.ɵɵelementStart(1,"option",81),i.ɵɵelement(2,"localize",86),i.ɵɵelementEnd(),i.ɵɵtemplate(3,_,2,2,"option",13),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext().$implicit,o=i.ɵɵnextContext(2).$implicit,a=i.ɵɵnextContext(2).index,l=i.ɵɵnextContext(2);i.ɵɵproperty("ngModel",l.levelRows[a-1].level.attributes[o.name].terms[r.code])("ngModelOptions",i.ɵɵpureFunction0(4,R)),i.ɵɵadvance(1),i.ɵɵproperty("ngValue",null),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",l.getTermOptions(o,l.levelRows[a-1].level.attributes[o.name].externalId))}}function H(e,t){if(1&e&&(i.ɵɵelementStart(0,"option",21),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=t.$implicit;i.ɵɵproperty("value",n.id),i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.name)}}function $(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"select",98),i.ɵɵlistener("ngModelChange",(function(e){i.ɵɵrestoreView(n);var t=i.ɵɵnextContext().$implicit,r=i.ɵɵnextContext(2).$implicit,o=i.ɵɵnextContext(2).index;return i.ɵɵnextContext(2).levelRows[o-1].level.attributes[r.name].terms[t.code]=e})),i.ɵɵelementStart(1,"option",81),i.ɵɵelement(2,"localize",86),i.ɵɵelementEnd(),i.ɵɵtemplate(3,H,2,2,"option",13),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext().$implicit,o=i.ɵɵnextContext(2).$implicit,a=i.ɵɵnextContext(2).index,l=i.ɵɵnextContext(2);i.ɵɵproperty("ngModel",l.levelRows[a-1].level.attributes[o.name].terms[r.code])("ngModelOptions",i.ɵɵpureFunction0(4,R)),i.ɵɵadvance(1),i.ɵɵproperty("ngValue",null),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",l.orgUnitGroups)}}function B(e,t){if(1&e&&(i.ɵɵelementStart(0,"table",89),i.ɵɵelementStart(1,"thead"),i.ɵɵelementStart(2,"tr"),i.ɵɵelement(3,"th",31),i.ɵɵelementStart(4,"th",31),i.ɵɵelementStart(5,"label"),i.ɵɵelement(6,"localize",90),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelement(7,"th",31),i.ɵɵelementStart(8,"th",31),i.ɵɵelementStart(9,"label"),i.ɵɵtemplate(10,L,1,0,"localize",91),i.ɵɵtemplate(11,F,1,0,"localize",92),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(12,"tbody"),i.ɵɵelementStart(13,"tr"),i.ɵɵelement(14,"td"),i.ɵɵelementStart(15,"td"),i.ɵɵelementStart(16,"label",71),i.ɵɵtext(17),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(18,"td",83),i.ɵɵelementStart(19,"label",71),i.ɵɵelement(20,"localize",84),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(21,"td"),i.ɵɵtemplate(22,G,4,5,"select",93),i.ɵɵtemplate(23,$,4,5,"select",94),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=t.$implicit,r=i.ɵɵnextContext(2).$implicit,o=i.ɵɵnextContext(2).index,a=i.ɵɵnextContext(2);i.ɵɵadvance(10),i.ɵɵproperty("ngIf",!a.levelRows[o-1].level.attributes[r.name].isOrgUnitGroup),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",a.levelRows[o-1].level.attributes[r.name].isOrgUnitGroup),i.ɵɵadvance(6),i.ɵɵtextInterpolate(n.label),i.ɵɵadvance(5),i.ɵɵproperty("ngIf",!a.levelRows[o-1].level.attributes[r.name].isOrgUnitGroup),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",a.levelRows[o-1].level.attributes[r.name].isOrgUnitGroup)}}function q(e,t){if(1&e&&(i.ɵɵelementStart(0,"div"),i.ɵɵtemplate(1,B,24,5,"table",88),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵadvance(1),i.ɵɵproperty("ngForOf",n.terms)}}function J(e,t){if(1&e&&(i.ɵɵelementStart(0,"tr"),i.ɵɵelementStart(1,"td",7),i.ɵɵelementStart(2,"table",66),i.ɵɵelementStart(3,"thead"),i.ɵɵelementStart(4,"tr"),i.ɵɵelementStart(5,"th",31),i.ɵɵelementStart(6,"label"),i.ɵɵelement(7,"localize",67),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(8,"th",31),i.ɵɵelementStart(9,"label"),i.ɵɵelement(10,"localize",68),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(11,"th",31),i.ɵɵtemplate(12,k,2,0,"label",69),i.ɵɵelementEnd(),i.ɵɵelementStart(13,"th",31),i.ɵɵelementStart(14,"label"),i.ɵɵtemplate(15,T,1,0,"localize",70),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(16,"tbody"),i.ɵɵelementStart(17,"tr"),i.ɵɵelementStart(18,"td"),i.ɵɵelementStart(19,"label",71),i.ɵɵtext(20),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(21,"td"),i.ɵɵelementStart(22,"label",71),i.ɵɵtext(23),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(24,z,2,1,"td",72),i.ɵɵtemplate(25,V,3,0,"td",73),i.ɵɵelementStart(26,"td"),i.ɵɵtemplate(27,A,4,5,"select",74),i.ɵɵtemplate(28,D,2,0,"label",75),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(29,q,2,1,"div",69),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=t.$implicit,r=i.ɵɵnextContext(2).index,o=i.ɵɵnextContext(2);i.ɵɵadvance(12),i.ɵɵproperty("ngIf","term"===n.type),i.ɵɵadvance(3),i.ɵɵproperty("ngIf",!o.levelRows[r-1].level.attributes[n.name].isOrgUnitGroup),i.ɵɵadvance(5),i.ɵɵtextInterpolate(n.label),i.ɵɵadvance(3),i.ɵɵtextInterpolate(n.typeLabel),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","term"===n.type),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","term"!==n.type),i.ɵɵadvance(2),i.ɵɵproperty("ngIf",n.dhis2Attrs.length>0&&!o.levelRows[r-1].level.attributes[n.name].isOrgUnitGroup),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",0==n.dhis2Attrs.length&&!o.levelRows[r-1].level.attributes[n.name].isOrgUnitGroup),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null!=o.levelRows[r-1].level.attributes[n.name].externalId&&o.levelRows[r-1].level.attributes[n.name].externalId.length>0||o.levelRows[r-1].level.attributes[n.name].isOrgUnitGroup)}}function U(e,t){if(1&e&&(i.ɵɵelementStart(0,"td",63),i.ɵɵelementStart(1,"h4"),i.ɵɵtext(2,"Attributes"),i.ɵɵelementEnd(),i.ɵɵelementStart(3,"table",64),i.ɵɵelementStart(4,"thead"),i.ɵɵelementStart(5,"tr"),i.ɵɵelement(6,"th"),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(7,"tbody"),i.ɵɵtemplate(8,J,30,9,"tr",65),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵadvance(8),i.ɵɵproperty("ngForOf",n.attrCfg.attrs)}}function W(e,t){if(1&e&&(i.ɵɵelementStart(0,"tr"),i.ɵɵtemplate(1,C,4,1,"td",41),i.ɵɵtemplate(2,x,4,3,"td",42),i.ɵɵtemplate(3,O,9,2,"td",42),i.ɵɵtemplate(4,M,4,3,"td",43),i.ɵɵtemplate(5,j,9,4,"td",42),i.ɵɵtemplate(6,U,9,1,"td",44),i.ɵɵelementEnd()),2&e){var n=t.$implicit,r=i.ɵɵnextContext(2);i.ɵɵstyleProp("background-color",!1===n.isAttributeEditor?"#F7F7F7":""),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",!1===n.isAttributeEditor),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",!1===n.isAttributeEditor),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",!1===n.isAttributeEditor),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",!1===n.isAttributeEditor&&r.orgUnitGroups.length>0),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",!1===n.isAttributeEditor),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",!0===n.isAttributeEditor)}}function Q(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",7),i.ɵɵelementStart(1,"div",8),i.ɵɵelementStart(2,"label"),i.ɵɵelement(3,"localize",26),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"div",10),i.ɵɵelementStart(5,"div",27),i.ɵɵelementStart(6,"table",28),i.ɵɵelementStart(7,"thead"),i.ɵɵelementStart(8,"tr"),i.ɵɵelementStart(9,"th",29),i.ɵɵelement(10,"localize",30),i.ɵɵelementEnd(),i.ɵɵelementStart(11,"th",31),i.ɵɵelement(12,"localize",32),i.ɵɵelementEnd(),i.ɵɵelementStart(13,"th",31),i.ɵɵelement(14,"localize",33),i.ɵɵelementEnd(),i.ɵɵelementStart(15,"th",34),i.ɵɵelement(16,"localize",35),i.ɵɵelementEnd(),i.ɵɵelementStart(17,"th",36),i.ɵɵelement(18,"localize",37),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(19,"tbody"),i.ɵɵtemplate(20,W,7,8,"tr",38),i.ɵɵelementStart(21,"tr"),i.ɵɵelementStart(22,"td",39),i.ɵɵelementStart(23,"a",40),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext().addLevel()})),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵnextContext();i.ɵɵadvance(20),i.ɵɵproperty("ngForOf",r.levelRows)}}var Y=function(){function e(e,t,n,r){this.service=e,this.registryService=t,this.lService=n,this.bsModalRef=r,this.message=null,this.config={organization:null,system:null,hierarchy:null,label:this.lService.create(),configuration:{}},this.organizations=[],this.cOrg=null,this.cSystem=null,this.types=[],this.levelRows=[],this.orgUnitGroups=[]}return e.prototype.ngOnInit=function(){this.onSuccess=new r.Subject},e.prototype.init=function(e,t){var n=this;if(this.organizations=t,null!=e){this.config=e;var r=this.organizations.findIndex((function(e){return e.code===n.config.organization}));-1!==r&&(this.cOrg=this.organizations[r]);var o=this.cOrg.systems.findIndex((function(e){return e.oid===n.config.system}));-1!==o&&(this.cSystem=this.cOrg.systems[o]),null!=this.cSystem&&"DHIS2ExternalSystem"===this.cSystem.type&&this.service.getConfigForES(this.config.system,this.config.hierarchy).then((function(e){n.types=e.types,n.orgUnitGroups=e.orgUnitGroups})).catch((function(e){n.error(e)})),this.levelRows=[];for(var i=0;i<this.config.configuration.levels.length;++i){var a=this.config.configuration.levels[i],l={level:a,levelNum:i,isAttributeEditor:!1};null!=a.attributes&&Object.keys(a.attributes).length>0&&(l.hasAttributes=!0),this.levelRows.push(l)}}},e.prototype.onOrganizationSelected=function(){var e=this,t=this.organizations.findIndex((function(t){return t.code===e.config.organization}));-1!==t?this.cOrg=this.organizations[t]:(this.cOrg=null,this.cSystem=null)},e.prototype.onChangeExternalSystem=function(){var e=this,t=this.cOrg.systems.findIndex((function(t){return t.oid===e.config.system}));if(this.cSystem=-1!==t?this.cOrg.systems[t]:null,null!=this.cSystem&&"DHIS2ExternalSystem"===this.cSystem.type){if(this.service.getConfigForES(this.config.system,this.config.hierarchy).then((function(t){e.types=t.types,e.orgUnitGroups=t.orgUnitGroups})).catch((function(t){e.error(t)})),null==this.config.configuration.levels){var n={type:null,geoObjectType:null,level:0};this.config.configuration.levels=[n],this.levelRows.push({level:n,levelNum:0,isAttributeEditor:!1})}}else this.types=[]},e.prototype.addLevel=function(){var e={type:null,geoObjectType:null,level:this.config.configuration.levels.length},t=this.config.configuration.levels.push(e);this.levelRows.push({level:e,levelNum:t-1,isAttributeEditor:!1})},e.prototype.removeLevel=function(e,t){if(e<this.config.configuration.levels.length){var n=this.getEditorIndex();n===t+1&&this.levelRows.splice(n,1),this.levelRows.splice(t,1);for(var r=0,o=0;o<this.levelRows.length;++o){var i=this.levelRows[o];i.levelNum=r,i.isAttributeEditor||(r+=1)}this.config.configuration.levels.splice(e,1)}},e.prototype.getEditorIndex=function(){for(var e=0;e<this.levelRows.length;++e){if(this.levelRows[e].isAttributeEditor)return e}return-1},e.prototype.configureAttributes=function(e){var t=this.getEditorIndex();-1!=t&&(this.levelRows.splice(t,1),t==e.levelNum+1)||this.onSelectGeoObjectType(e.level.geoObjectType,e.levelNum,!1)},e.prototype.getTermOptions=function(e,t){for(var n=0;n<e.dhis2Attrs.length;++n){var r=e.dhis2Attrs[n];if(r.dhis2Id===t)return r.options}},e.prototype.onChangeAttrMapping=function(e,t,n){if(null!=t&&""!==t){for(var r=0;r<n.attrCfg.attrs.length;r++)if(n.attrCfg.attrs[r].name===e.name){var o=n.attrCfg.attrs[r];if(null!=o.terms){e.terms={};for(var i=0;i<o.terms.length;++i){var a=o.terms[i];e.terms[a.code]=null}}return}}else null!=e.terms&&(e.terms={})},e.prototype.onSelectGeoObjectType=function(e,t,n){var r=this;if(void 0===n&&(n=!0),""===e||null==e){var o=this.levelRows[t];return o.hasAttributes=!1,o.attrCfg=null,o.level.attributes={},void(-1!=(i=this.getEditorIndex())&&i===t+1&&this.levelRows.splice(i,1))}var i,a=this.levelRows[t].attrCfg;null!=a&&a.geoObjectTypeCode===e?(-1!=(i=this.getEditorIndex())&&i!==t+1&&(this.levelRows.splice(i,1),i<t&&(t-=1)),this.levelRows.splice(t+1,0,{isAttributeEditor:!0,attrCfg:a})):this.service.getCustomAttrCfg(e,this.config.system).then((function(o){var i=r.getEditorIndex(),a=r.levelRows[t],l=a.level;if(n&&(l.attributes={}),a.attrCfg={geoObjectTypeCode:e,attrs:o},-1!=i&&(i===t+1||o.length>0)&&(r.levelRows.splice(i,1),i<t&&(t-=1)),o.length>0){a.hasAttributes=!0;for(var c=0;c<o.length;++c){var s=o[c];if((n||null==l.attributes[s.name])&&(l.attributes[s.name]={name:s.name,externalId:null,isOrgUnitGroup:!1},null!=s.terms&&s.terms.length>0)){l.attributes[s.name].terms={};for(var d=0;d<s.terms.length;++d){var p=s.terms[d];l.attributes[s.name].terms[p.code]=null}}}r.levelRows.splice(t+1,0,{isAttributeEditor:!0,attrCfg:{geoObjectTypeCode:e,attrs:o}})}else a.hasAttributes=!1})).catch((function(e){r.error(e)}))},e.prototype.onChangeTargetType=function(e){for(var t in e.externalId=null,e.terms)e.terms.hasOwnProperty(t)&&(e.terms[t]=null)},e.prototype.onSubmit=function(){var e=this;this.service.apply(this.config).then((function(t){e.onSuccess.next(t),e.bsModalRef.hide()})).catch((function(t){e.error(t)}))},e.prototype.cancel=function(){var e=this;null!=this.config.oid?this.service.unlock(this.config.oid).then((function(){e.bsModalRef.hide()})).catch((function(t){e.error(t)})):this.bsModalRef.hide()},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.SynchronizationConfigService),i.ɵɵdirectiveInject(a.RegistryService),i.ɵɵdirectiveInject(l.LocalizationService),i.ɵɵdirectiveInject(c.BsModalRef))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["synchronization-config-modal"]],viewQuery:function(e,t){var n;(1&e&&i.ɵɵviewQuery(u,!0),2&e)&&(i.ɵɵqueryRefresh(n=i.ɵɵloadQuery())&&(t.form=n.first))},decls:29,vars:15,consts:[[1,"modal-body"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"text-center"],["key","synchronization.config.title"],[1,"modal-form",3,"ngSubmit"],["form","ngForm"],["class","row-holder",4,"ngFor","ngForOf"],[1,"row-holder"],[1,"label-holder"],["key","synchronization.config.organization"],[1,"holder"],[1,"select"],["type","text","name","organization","required","",3,"ngModel","disabled","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","row-holder",4,"ngIf"],[1,"button-holder"],["type","button",1,"btn","btn-default",3,"value","click"],["type","submit",1,"btn","btn-primary",3,"value","disabled"],["role","alert",1,"alert","alert-danger"],["key","synchronization.config.label"],["type","text",1,"form-control",3,"ngModel","name","required","ngModelChange"],[3,"value"],["key","synchronization.config.hierarchy"],["type","text","name","hierarchy","required","",3,"ngModel","disabled","ngModelChange"],["key","synchronization.config.system"],["type","text","name","system","required","",3,"ngModel","disabled","ngModelChange","change"],["key","synchronization.config.units"],[1,"list-table-wrapper"],["id","manage-systems-table",1,"list-table","table","table-bordered"],[2,"width","3%"],["key","settings.external.synchronization.level.label"],[2,"width","25%"],["key","settings.external.synchronization.geoobjecttype.label"],["key","settings.external.synchronization.dhis2.synch.type.label"],[2,"width","17%"],["key","synchronization.config.orgUnitGroup"],[2,"width","25%","text-align","center"],["key","settings.external.synchronization.actions.label"],[3,"background-color",4,"ngFor","ngForOf"],[1,"button-column"],[1,"fa","fa-plus",3,"click"],["style","width:3%",4,"ngIf"],["style","width:25%",4,"ngIf"],["style","width:17%",4,"ngIf"],["colspan","4",4,"ngIf"],[2,"padding","10px 0","margin","0"],["key","sync.level.label"],["type","text","required","",3,"ngModel","name","ngModelChange","change"],["type","text","required","",3,"ngModel","name","ngModelChange"],["value","ORG_UNITS"],["value","RELATIONSHIPS"],["key","synchronization.config.relationships"],["value","ALL"],["key","synchronization.config.all"],["type","text",3,"ngModel","name","ngModelChange"],[2,"padding","10px",3,"title","click"],[1,"fa","fa-trash-o","ico-remove"],[2,"cursor","pointer","margin-left","9px"],["key","sync.level.delete"],["style","padding: 10px;",3,"title","click",4,"ngIf"],[1,"fa","fa-edit"],[2,"cursor","pointer","margin-left","3px"],["key","sync.attr.configureAttributes"],["colspan","4"],[1,"table"],[4,"ngFor","ngForOf"],[1,"row",2,"width","80%","margin-left","80px","margin-top","15px","margin-bottom","10px"],["key","sync.attr.sourceAttribute"],["key","sync.attr.type"],[4,"ngIf"],["key","sync.attr.targetAttribute",4,"ngIf"],[2,"color","#999"],["style","margin-right:20px;",4,"ngIf"],["style","float:right; margin-right:20px;",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange","change",4,"ngIf"],["style","color:#999;",4,"ngIf"],["key","sync.attr.targetTypeHeader"],["key","sync.attr.targetAttribute"],[2,"margin-right","20px"],["style","width:95%",3,"ngModel","name","ngModelChange","change",4,"ngIf"],[2,"width","95%",3,"ngModel","name","ngModelChange","change"],[3,"ngValue"],["key","sync.attr.targetTypeOrgUnitGroup"],[2,"float","right","margin-right","20px"],["key","sync.attr.to"],[3,"ngModel","ngModelOptions","ngModelChange","change"],["key","sync.notMapped"],["key","sync.noValid"],["class","row","style","width:80%; margin-left:80px;",4,"ngFor","ngForOf"],[1,"row",2,"width","80%","margin-left","80px"],["key","sync.attr.term.cgrTerm"],["key","sync.attr.term.dhis2Option",4,"ngIf"],["key","sync.attr.term.targetOrgUnitGroup",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["type","text",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],["key","sync.attr.term.dhis2Option"],["key","sync.attr.term.targetOrgUnitGroup"],[3,"ngModel","ngModelOptions","ngModelChange"],["type","text",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",0),i.ɵɵtemplate(1,g,2,1,"div",1),i.ɵɵelementStart(2,"div",2),i.ɵɵelementStart(3,"h2"),i.ɵɵelement(4,"localize",3),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"form",4,5),i.ɵɵlistener("ngSubmit",(function(){return i.ɵɵrestoreView(n),i.ɵɵreference(6).valid&&t.onSubmit()})),i.ɵɵelementStart(7,"fieldset"),i.ɵɵtemplate(8,f,7,4,"div",6),i.ɵɵelementStart(9,"div",7),i.ɵɵelementStart(10,"div",8),i.ɵɵelementStart(11,"label"),i.ɵɵelement(12,"localize",9),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(13,"div",10),i.ɵɵelementStart(14,"span",11),i.ɵɵelementStart(15,"select",12),i.ɵɵlistener("ngModelChange",(function(e){return t.config.organization=e}))("change",(function(){return t.onOrganizationSelected()})),i.ɵɵelement(16,"option"),i.ɵɵtemplate(17,h,2,2,"option",13),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(18,b,9,3,"div",14),i.ɵɵtemplate(19,S,9,3,"div",14),i.ɵɵtemplate(20,Q,24,1,"div",14),i.ɵɵelementStart(21,"div",7),i.ɵɵelement(22,"div",8),i.ɵɵelementStart(23,"div",10),i.ɵɵelementStart(24,"div",15),i.ɵɵelementStart(25,"input",16),i.ɵɵlistener("click",(function(){return t.cancel()})),i.ɵɵpipe(26,"localize"),i.ɵɵelementEnd(),i.ɵɵelement(27,"input",17),i.ɵɵpipe(28,"localize"),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵreference(6);i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null!=t.message),i.ɵɵadvance(7),i.ɵɵproperty("ngForOf",t.config.label.localeValues),i.ɵɵadvance(7),i.ɵɵproperty("ngModel",t.config.organization)("disabled",null!=t.config.oid),i.ɵɵadvance(2),i.ɵɵproperty("ngForOf",t.organizations),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null!=t.cOrg),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null!=t.config.hierarchy),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null!=t.cSystem&&"DHIS2ExternalSystem"===t.cSystem.type),i.ɵɵadvance(5),i.ɵɵproperty("value",i.ɵɵpipeBind1(26,11,"dataset.cancel")),i.ɵɵadvance(2),i.ɵɵproperty("value",i.ɵɵpipeBind1(28,13,"dataset.submit"))("disabled",!r.valid)}},directives:[s.NgIf,d.LocalizeComponent,p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,p.NgForm,s.NgForOf,p.SelectControlValueAccessor,p.RequiredValidator,p.NgControlStatus,p.NgModel,p.NgSelectOption,p.ɵangular_packages_forms_forms_x,p.DefaultValueAccessor],pipes:[m.LocalizePipe],encapsulation:2}),e}();t.SynchronizationConfigModalComponent=Y},634:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronizationConfigComponent=void 0;n(0),n(28);var r=n(37),o=(n(15),n(545),n(249)),i=n(0),a=n(545),l=n(15),c=n(28),s=n(128),d=n(85),p=n(1),m=n(27),u=n(44),g=n(582),f=n(246),h=n(100);function v(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",5),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.message)}}function b(e,t){1&e&&i.ɵɵelement(0,"localize",25)}function y(e,t){1&e&&i.ɵɵelement(0,"localize",34)}function S(e,t){1&e&&i.ɵɵelement(0,"localize",35)}function C(e,t){if(1&e&&(i.ɵɵelementStart(0,"tr"),i.ɵɵelementStart(1,"td",9),i.ɵɵelement(2,"localize",27),i.ɵɵtext(3),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"td"),i.ɵɵtext(5),i.ɵɵelementEnd(),i.ɵɵelementStart(6,"td",29),i.ɵɵtemplate(7,b,1,0,"localize",31),i.ɵɵtemplate(8,y,1,0,"localize",32),i.ɵɵtemplate(9,S,1,0,"localize",33),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=t.$implicit,r=t.index;i.ɵɵadvance(3),i.ɵɵtextInterpolate1(" ",r+1," "),i.ɵɵadvance(2),i.ɵɵtextInterpolate1(" ",n.geoObjectType," "),i.ɵɵadvance(2),i.ɵɵproperty("ngIf","ORG_UNITS"===n.type),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","RELATIONSHIPS"===n.type),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","ALL"===n.type)}}function E(e,t){if(1&e&&(i.ɵɵelementStart(0,"div",3),i.ɵɵelementStart(1,"div",6),i.ɵɵelementStart(2,"h4"),i.ɵɵelement(3,"localize",25),i.ɵɵelementEnd(),i.ɵɵelementStart(4,"table",26),i.ɵɵelementStart(5,"thead"),i.ɵɵelementStart(6,"tr"),i.ɵɵelementStart(7,"th"),i.ɵɵelement(8,"localize",27),i.ɵɵelementEnd(),i.ɵɵelementStart(9,"th"),i.ɵɵelement(10,"localize",28),i.ɵɵelementEnd(),i.ɵɵelementStart(11,"th",29),i.ɵɵelement(12,"localize",30),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(13,"tbody"),i.ɵɵtemplate(14,C,10,5,"tr",23),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext(2);i.ɵɵadvance(14),i.ɵɵproperty("ngForOf",n.config.configuration.levels)}}function x(e,t){if(1&e&&(i.ɵɵelementStart(0,"span",39),i.ɵɵtext(1),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵadvance(1),i.ɵɵtextInterpolate1(" ",n.exception.message," ")}}function O(e,t){if(1&e&&i.ɵɵelement(0,"step-indicator",45),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵproperty("steps",n.stepConfig)}}function I(e,t){if(1&e&&(i.ɵɵelementStart(0,"a",46),i.ɵɵelementStart(1,"button",47),i.ɵɵelement(2,"localize",48),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=i.ɵɵnextContext().$implicit;i.ɵɵproperty("routerLink","/registry/sync/details/"+n.historyId)}}function M(e,t){if(1&e&&(i.ɵɵelementStart(0,"tr"),i.ɵɵelementStart(1,"td",9),i.ɵɵelementStart(2,"div",36),i.ɵɵelement(3,"i",37),i.ɵɵelementStart(4,"p",38),i.ɵɵelementStart(5,"span",39),i.ɵɵtext(6),i.ɵɵelementEnd(),i.ɵɵelementStart(7,"span",39),i.ɵɵtext(8),i.ɵɵelementEnd(),i.ɵɵelementStart(9,"span",39),i.ɵɵtext(10),i.ɵɵelementEnd(),i.ɵɵtemplate(11,x,2,1,"span",40),i.ɵɵelementEnd(),i.ɵɵtemplate(12,O,1,1,"step-indicator",41),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(13,"td",42),i.ɵɵelementStart(14,"div",43),i.ɵɵtemplate(15,I,3,1,"a",44),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e){var n=t.$implicit,r=i.ɵɵnextContext(2);i.ɵɵadvance(6),i.ɵɵtextInterpolate1(" ",n.fileName," "),i.ɵɵadvance(2),i.ɵɵtextInterpolate1(" ",n.createDate," "),i.ɵɵadvance(2),i.ɵɵtextInterpolate1(" ",r.formatJobStatus(n)," "),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",null!=n.exception&&"java.lang.RuntimeException"!=n.exception.type),i.ɵɵadvance(1),i.ɵɵproperty("ngIf","SUCCESS"!==n.status&&"FAILURE"!==n.status&&"CANCELED"!==n.status),i.ɵɵadvance(3),i.ɵɵproperty("ngIf","FAILURE"===n.status)}}function w(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",49),i.ɵɵelementStart(1,"pagination-controls",50),i.ɵɵlistener("pageChange",(function(e){return i.ɵɵrestoreView(n),i.ɵɵnextContext(2).onPageChange(e)})),i.ɵɵelementEnd(),i.ɵɵelementEnd()}}var j=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}};function k(e,t){if(1&e){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"div",6),i.ɵɵelementStart(1,"div",3),i.ɵɵelementStart(2,"div",6),i.ɵɵelementStart(3,"h3"),i.ɵɵtext(4),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(5,"div",7),i.ɵɵelementStart(6,"div",3),i.ɵɵelementStart(7,"div",8),i.ɵɵelementStart(8,"label",9),i.ɵɵtext(9,"CGR"),i.ɵɵelementEnd(),i.ɵɵelement(10,"i",10),i.ɵɵelementStart(11,"label",9),i.ɵɵtext(12),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(13,"div",11),i.ɵɵelementStart(14,"form",null,12),i.ɵɵelementStart(16,"div",13),i.ɵɵelementStart(17,"button",14),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext().onRun()})),i.ɵɵpipe(18,"localize"),i.ɵɵelement(19,"localize",15),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(20,E,15,1,"div",16),i.ɵɵelementStart(21,"div",3),i.ɵɵelementStart(22,"div",17),i.ɵɵelementStart(23,"ul",18),i.ɵɵelementStart(24,"div",19),i.ɵɵelementStart(25,"table",20),i.ɵɵelementStart(26,"thead"),i.ɵɵelementStart(27,"tr",21),i.ɵɵelementStart(28,"th",9),i.ɵɵelement(29,"localize",22),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementStart(30,"tbody"),i.ɵɵtemplate(31,M,16,6,"tr",23),i.ɵɵpipe(32,"paginate"),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵtemplate(33,w,2,0,"div",24),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&e){var r=i.ɵɵreference(15),o=i.ɵɵnextContext();i.ɵɵadvance(4),i.ɵɵtextInterpolate(o.config.label.localizedValue),i.ɵɵadvance(8),i.ɵɵtextInterpolate(o.config.systemLabel),i.ɵɵadvance(5),i.ɵɵproperty("disabled",r.invalid)("title",i.ɵɵpipeBind1(18,7,"synchronization.config.run")),i.ɵɵadvance(3),i.ɵɵproperty("ngIf",null!=o.config&&"DHIS2ExternalSystem"===o.config.type),i.ɵɵadvance(11),i.ɵɵproperty("ngForOf",i.ɵɵpipeBind2(32,9,o.page.resultSet,i.ɵɵpureFunction3(12,j,o.page.pageSize,o.page.pageNumber,o.page.count))),i.ɵɵadvance(2),i.ɵɵproperty("ngIf",o.page.resultSet.length>0)}}var T=function(){function e(e,t,n){this.service=e,this.lService=t,this.route=n,this.message=null,this.config=null,this.page={pageSize:10,pageNumber:1,count:1,resultSet:[]}}return e.prototype.ngOnInit=function(){var e=this,t=this.route.snapshot.paramMap.get("oid");this.service.get(t).then((function(t){e.config=t,e.onPageChange(1)})),this.pollingData=r.interval(1e4).subscribe((function(){e.onPageChange(e.page.pageNumber)}))},e.prototype.ngOnDestroy=function(){null!=this.pollingData&&this.pollingData.unsubscribe()},e.prototype.onRun=function(){var e=this;this.message=null,this.service.run(this.config.oid).then((function(){e.onPageChange(e.page.pageNumber)})).catch((function(t){e.error(t)}))},e.prototype.onPageChange=function(e){var t=this;null!=this.config&&(this.message=null,this.service.getJobs(this.config.oid,e,this.page.pageSize).then((function(e){t.formatStepConfig(e),t.page=e})).catch((function(e){t.error(e)})))},e.prototype.formatJobStatus=function(e){return"FEEDBACK"===e.status?this.lService.decode("etl.JobStatus.FEEDBACK"):"RUNNING"===e.status||"NEW"===e.status?this.lService.decode("etl.JobStatus.RUNNING"):"QUEUED"===e.status?this.lService.decode("etl.JobStatus.QUEUED"):"SUCCESS"===e.status?this.lService.decode("etl.JobStatus.SUCCESS"):"CANCELED"===e.status?this.lService.decode("etl.JobStatus.CANCELED"):"FAILURE"===e.status?this.lService.decode("etl.JobStatus.FAILURE"):this.lService.decode("etl.JobStatus.RUNNING")},e.prototype.formatStepConfig=function(e){var t=this;e.resultSet.forEach((function(e){e.stepConfig={steps:[{label:"Queued",status:"NEW"===e.stage?t.getJobStatus(e):t.getCompletedStatus(e.stage,"NEW")},{label:"Connecting",status:"CONNECTING"===e.stage||"CONNECTION_FAILED"===e.stage?t.getJobStatus(e):t.getCompletedStatus(e.stage,"CONNECTION_FAILED")},{label:"Database Export",status:"EXPORT"===e.stage||"EXPORT_RESOLVE"===e.stage||"RESUME_EXPORT"===e.stage?t.getJobStatus(e):""}]}}))},e.prototype.getCompletedStatus=function(e,t){var n=["CONNECTING","CONNECTION_FAILED","EXPORT","EXPORT_RESOLVE","RESUME_EXPORT"],r=n.indexOf(e);return n.indexOf(t)<r?"COMPLETE":""},e.prototype.getJobStatus=function(e){return"QUEUED"===e.status||"RUNNING"===e.status?"WORKING":"FEEDBACK"===e.status||"FAILURE"===e.status?"STUCK":""},e.prototype.error=function(e){this.message=o.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(i.ɵɵdirectiveInject(a.SynchronizationConfigService),i.ɵɵdirectiveInject(l.LocalizationService),i.ɵɵdirectiveInject(c.ActivatedRoute))},e.ɵcmp=i.ɵɵdefineComponent({type:e,selectors:[["synchronization-config"]],decls:7,vars:2,consts:[[1,"new-admin-design-main"],[1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"row"],["class","col-md-12",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"col-md-12"],[1,"inner-col-content-wrapper",2,"padding-top","30px","margin-top","10px"],[1,"col-md-8"],[2,"vertical-align","middle"],["aria-hidden","true",1,"fa","fa-long-arrow-right",2,"font-size","23px","padding","0 7px","vertical-align","middle","color","#bdbdbd","margin-bottom","4px"],[1,"col-md-4"],["myForm","ngForm"],[1,"form-group","text-right",2,"margin","0"],["type","submit","role","button",1,"btn","btn-primary",2,"margin-left","15px",3,"disabled","title","click"],["key","synchronization.config.run"],["class","row",4,"ngIf"],[1,"col-md-12","order-md-1"],[1,"list-group"],[1,"solid-table-wrapper"],[1,"table","table-striped"],[2,"height","56px"],["key","masterlist.jobs"],[4,"ngFor","ngForOf"],["class","solid-table-footer",4,"ngIf"],["key","synchronization.config.units"],[1,"table"],["key","settings.external.synchronization.level.label"],["key","settings.external.synchronization.geoobjecttype.label"],[2,"text-align","right"],["key","settings.external.synchronization.dhis2.synch.type.label"],["key","synchronization.config.units",4,"ngIf"],["key","synchronization.config.relationships",4,"ngIf"],["key","synchronization.config.all",4,"ngIf"],["key","synchronization.config.relationships"],["key","synchronization.config.all"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","40px"],[2,"padding-left","60px"],[2,"display","block"],["style","display: block;",4,"ngIf"],[3,"steps",4,"ngIf"],[2,"text-align","right","vertical-align","middle"],[1,"button-holder",2,"float","right"],["routerLinkActive","active",3,"routerLink",4,"ngIf"],[3,"steps"],["routerLinkActive","active",3,"routerLink"],["role","button",1,"btn","btn-primary"],["key","scheduledjobs.detail.button"],[1,"solid-table-footer"],[3,"pageChange"]],template:function(e,t){1&e&&(i.ɵɵelementStart(0,"div",0),i.ɵɵelement(1,"cgr-header"),i.ɵɵelement(2,"loading-bar"),i.ɵɵelementStart(3,"div",1),i.ɵɵtemplate(4,v,2,1,"div",2),i.ɵɵelementStart(5,"div",3),i.ɵɵtemplate(6,k,34,16,"div",4),i.ɵɵelementEnd(),i.ɵɵelementEnd(),i.ɵɵelementEnd()),2&e&&(i.ɵɵadvance(4),i.ɵɵproperty("ngIf",null!=t.message),i.ɵɵadvance(2),i.ɵɵproperty("ngIf",null!=t.config))},directives:[s.CgrHeaderComponent,d.LoadingBarComponent,p.NgIf,m.ɵangular_packages_forms_forms_y,m.NgControlStatusGroup,m.NgForm,u.LocalizeComponent,p.NgForOf,g.StepIndicatorComponent,c.RouterLinkWithHref,c.RouterLinkActive,f.PaginationControlsComponent],pipes:[h.LocalizePipe,f.PaginatePipe],encapsulation:2}),e}();t.SynchronizationConfigComponent=T},635:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncDetailsComponent=void 0;n(0),n(28),n(15);var r=n(174),o=(n(545),n(0)),i=n(545),a=n(28),l=n(15),c=n(128),s=n(85),d=n(1),p=n(44),m=n(246);function u(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",7),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵtextInterpolate(n.message)}}function g(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",8),o.ɵɵelementStart(1,"div",9),o.ɵɵelementStart(2,"div",10),o.ɵɵelement(3,"i",11),o.ɵɵelementStart(4,"p",12),o.ɵɵelementStart(5,"span",13),o.ɵɵelement(6,"localize",14),o.ɵɵtext(7),o.ɵɵelementEnd(),o.ɵɵelementStart(8,"span",13),o.ɵɵelement(9,"localize",15),o.ɵɵtext(10),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(11,"div",16),o.ɵɵelementStart(12,"div"),o.ɵɵelementStart(13,"h5"),o.ɵɵelementStart(14,"b"),o.ɵɵtext(15),o.ɵɵelement(16,"localize",17),o.ɵɵtext(17),o.ɵɵelement(18,"localize",18),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(19,"h5"),o.ɵɵtext(20),o.ɵɵelement(21,"localize",19),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(7),o.ɵɵtextInterpolate1(" ",n.job.author," "),o.ɵɵadvance(3),o.ɵɵtextInterpolate1(" ",n.job.createDate," "),o.ɵɵadvance(5),o.ɵɵtextInterpolate1("",n.job.exportedRecords," "),o.ɵɵadvance(2),o.ɵɵtextInterpolate1(" ",n.job.workTotal," "),o.ɵɵadvance(3),o.ɵɵtextInterpolate1("",n.job.workTotal-n.job.exportedRecords," ")}}function f(e,t){if(1&e&&(o.ɵɵelementStart(0,"tr"),o.ɵɵelementStart(1,"td",33),o.ɵɵelementStart(2,"p"),o.ɵɵtext(3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"td",33),o.ɵɵelementStart(5,"p"),o.ɵɵtext(6),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(7,"td",33),o.ɵɵelementStart(8,"p"),o.ɵɵtext(9),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵadvance(3),o.ɵɵtextInterpolate(n.code),o.ɵɵadvance(3),o.ɵɵtextInterpolate(n.message),o.ɵɵadvance(3),o.ɵɵtextInterpolate(n.rowNum)}}function h(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",31),o.ɵɵelementStart(1,"pagination-controls",34),o.ɵɵlistener("pageChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(3).onPageChange(e)})),o.ɵɵelementEnd(),o.ɵɵelementEnd()}}var v=function(e,t,n){return{itemsPerPage:e,currentPage:t,totalItems:n}};function b(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",22),o.ɵɵelementStart(1,"ul",23),o.ɵɵelementStart(2,"table",24),o.ɵɵelementStart(3,"thead"),o.ɵɵelementStart(4,"tr"),o.ɵɵelementStart(5,"th",25),o.ɵɵelement(6,"localize",26),o.ɵɵtext(7," "),o.ɵɵelement(8,"localize",27),o.ɵɵelementEnd(),o.ɵɵelementStart(9,"th",25),o.ɵɵelement(10,"localize",28),o.ɵɵelementEnd(),o.ɵɵelementStart(11,"th",25),o.ɵɵelement(12,"localize",29),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(13,"tbody"),o.ɵɵtemplate(14,f,10,3,"tr",30),o.ɵɵpipe(15,"paginate"),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(16,"div",31),o.ɵɵtemplate(17,h,2,0,"div",32),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext(2);o.ɵɵadvance(14),o.ɵɵproperty("ngForOf",o.ɵɵpipeBind2(15,2,n.page.results,o.ɵɵpureFunction3(5,v,n.page.pageSize,n.page.pageNumber,n.page.count))),o.ɵɵadvance(3),o.ɵɵproperty("ngIf",n.page.results.length>0)}}function y(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",20),o.ɵɵtemplate(1,b,18,9,"div",21),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("ngIf",n.job)}}var S=function(){function e(e,t,n,r,o,i){this.service=e,this.router=t,this.route=n,this.localizeService=r,this.ioService=i,this.message=null,this.historyId="",this.page={count:0,pageNumber:1,pageSize:10,results:[]},this.isAdmin=o.isAdmin(),this.isMaintainer=this.isAdmin||o.isMaintainer(),this.isContributor=this.isAdmin||this.isMaintainer||o.isContributer()}return e.prototype.ngOnInit=function(){this.historyId=this.route.snapshot.params.oid,this.onPageChange(1)},e.prototype.ngOnDestroy=function(){},e.prototype.formatAffectedRows=function(e){return e.replace(/,/g,", ")},e.prototype.formatValidationResolve=function(e){return JSON.stringify(e)},e.prototype.onPageChange=function(e){var t=this;this.message=null,this.service.getExportDetails(this.historyId,this.page.pageSize,e).then((function(e){t.job=e,t.page=t.job.exportErrors})).catch((function(e){t.error(e)}))},e.prototype.error=function(e){this.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.RegistryService),o.ɵɵdirectiveInject(a.Router),o.ɵɵdirectiveInject(a.ActivatedRoute),o.ɵɵdirectiveInject(l.LocalizationService),o.ɵɵdirectiveInject(l.AuthService),o.ɵɵdirectiveInject(i.IOService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["job"]],decls:10,vars:3,consts:[[1,"new-admin-design-main"],["id","app-container",1,"container-fluid"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"py-5"],["key","scheduledjobs.details.title"],["class","row","style","background: #F4F4F4;\n                                border-radius: 15px;\n                                margin-bottom: 20px;\n                                margin-top: 20px;\n                                padding: 10px;",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"row",2,"background","#F4F4F4","border-radius","15px","margin-bottom","20px","margin-top","20px","padding","10px"],[1,"col-md-4","order-md-1"],[1,"wrapper"],["aria-hidden","true",1,"fa","fa-file",2,"position","absolute","font-size","55px"],[2,"padding-left","60px"],[2,"display","block"],["key","scheduledjobs.job.uploaded.by.label"],["key","scheduledjobs.job.started.label"],[1,"col-md-3","order-md-1"],["key","scheduledjobs.job.imported.out.of.label"],["key","scheduledjobs.job.imported.total.label"],["key","scheduledjobs.job.remaining.label"],[1,"row"],["class","col-md-12 order-md-1",4,"ngIf"],[1,"col-md-12","order-md-1"],[1,"list-group"],[1,"list-table","table","table-bordered","table-striped"],[1,"label-column"],["key","geoObject.label"],["key","geoObjectType.attr.code"],["key","scheduledjobs.import.table.message.header"],["key","scheduledjobs.import.table.row.number.header"],[4,"ngFor","ngForOf"],[1,"solid-table-footer"],["class","solid-table-footer",4,"ngIf"],[1,"label-column",2,"vertical-align","middle"],[3,"pageChange"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelement(1,"cgr-header"),o.ɵɵelement(2,"loading-bar"),o.ɵɵelementStart(3,"div",1),o.ɵɵtemplate(4,u,2,1,"div",2),o.ɵɵelementStart(5,"div",3),o.ɵɵelementStart(6,"h2"),o.ɵɵelement(7,"localize",4),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵtemplate(8,g,22,5,"div",5),o.ɵɵtemplate(9,y,2,1,"div",6),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(4),o.ɵɵproperty("ngIf",null!=t.message),o.ɵɵadvance(4),o.ɵɵproperty("ngIf",t.job),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.page&&t.page.results.length>0))},directives:[c.CgrHeaderComponent,s.LoadingBarComponent,d.NgIf,p.LocalizeComponent,d.NgForOf,m.PaginationControlsComponent],pipes:[m.PaginatePipe],styles:[".new-admin-design-main[_ngcontent-%COMP%] {\n    \n}\n\n\n.solid-table-wrapper[_ngcontent-%COMP%] {\n    background: #F4F4F4;\n    border-radius: 15px;\n    margin-bottom: 20px;\n}\n.solid-table-footer[_ngcontent-%COMP%] {\n    \n    border-radius: 0 0 15px 15px;\n    padding: 0 0 10px 10px;\n}\n\n\n\n.wrapper[_ngcontent-%COMP%] {\n    padding: 10px;\n}"]}),e}();t.SyncDetailsComponent=S},636:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationManagerComponent=void 0;n(0);var r=n(541),o=(n(30),n(544)),i=n(637),a=(n(545),n(0)),l=n(30),c=n(545),s=n(128),d=n(85),p=n(1),m=n(44),u=n(27);function g(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"li"),a.ɵɵelementStart(1,"a",25),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().back(null)})),a.ɵɵelement(2,"localize",26),a.ɵɵelementEnd(),a.ɵɵelementEnd()}}function f(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"a",25),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=a.ɵɵnextContext().$implicit;return a.ɵɵnextContext().back(e)})),a.ɵɵtext(1),a.ɵɵelementEnd()}if(2&e){var r=a.ɵɵnextContext().$implicit;a.ɵɵadvance(1),a.ɵɵtextInterpolate1(" ",r.properties.displayLabel.localizedValue,"")}}function h(e,t){if(1&e&&(a.ɵɵelementStart(0,"span"),a.ɵɵelementStart(1,"b"),a.ɵɵtext(2),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext().$implicit;a.ɵɵadvance(2),a.ɵɵtextInterpolate(n.properties.displayLabel.localizedValue)}}var v=function(e){return{active:e}};function b(e,t){if(1&e&&(a.ɵɵelementStart(0,"li",27),a.ɵɵtemplate(1,f,2,1,"a",28),a.ɵɵtemplate(2,h,3,1,"span",7),a.ɵɵelementEnd()),2&e){var n=t.last;a.ɵɵproperty("ngClass",a.ɵɵpureFunction1(3,v,n)),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",!n),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",n)}}function y(e,t){if(1&e&&(a.ɵɵelementStart(0,"option",29),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵproperty("value",n.code),a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.label.localizedValue)}}function S(e,t){if(1&e&&(a.ɵɵelementStart(0,"option",29),a.ɵɵtext(1),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵproperty("value",n.code),a.ɵɵadvance(1),a.ɵɵtextInterpolate(n.label.localizedValue)}}function C(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",30),a.ɵɵelementStart(1,"div",31),a.ɵɵlistener("click",(function(e){a.ɵɵrestoreView(n);var r=t.$implicit;return a.ɵɵnextContext().zoomToFeature(r,e)})),a.ɵɵelementStart(2,"div",32),a.ɵɵelementStart(3,"i",33),a.ɵɵlistener("click",(function(e){a.ɵɵrestoreView(n);var r=t.$implicit;return a.ɵɵnextContext().select(r,e)})),a.ɵɵelementEnd(),a.ɵɵelementStart(4,"h4",34),a.ɵɵtext(5),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=t.$implicit;a.ɵɵadvance(5),a.ɵɵtextInterpolate2("",r.properties.code," - ",r.properties.displayLabel.localizedValue,"")}}function E(e,t){1&e&&a.ɵɵelement(0,"i",35)}function x(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",40),a.ɵɵelementStart(1,"input",41),a.ɵɵlistener("change",(function(){a.ɵɵrestoreView(n);var e=t.$implicit;return a.ɵɵnextContext(2).handleBasemapStyle(e)})),a.ɵɵelementEnd(),a.ɵɵelementStart(2,"label",42),a.ɵɵtext(3),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=t.$implicit;a.ɵɵadvance(1),a.ɵɵproperty("value",r.id)("checked",r.selected),a.ɵɵadvance(2),a.ɵɵtextInterpolate(r.label)}}function O(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div",46),a.ɵɵelementStart(1,"input",47),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=a.ɵɵnextContext().$implicit;return a.ɵɵnextContext(5).toggleContextLayer(e.oid)})),a.ɵɵelementEnd(),a.ɵɵtext(2),a.ɵɵelementStart(3,"i",48),a.ɵɵlistener("click",(function(){a.ɵɵrestoreView(n);var e=a.ɵɵnextContext().$implicit;return a.ɵɵnextContext(5).removeContextLayer(e)})),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=a.ɵɵnextContext().$implicit;a.ɵɵadvance(1),a.ɵɵproperty("checked",r.active),a.ɵɵadvance(1),a.ɵɵtextInterpolate1(" ",r.displayLabel," ")}}function I(e,t){if(1&e&&(a.ɵɵelementStart(0,"div"),a.ɵɵtemplate(1,O,4,2,"div",45),a.ɵɵelementEnd()),2&e){var n=t.$implicit;a.ɵɵadvance(1),a.ɵɵproperty("ngIf",n.enabled)}}function M(e,t){if(1&e&&(a.ɵɵelementStart(0,"div",46),a.ɵɵelementStart(1,"label"),a.ɵɵtext(2),a.ɵɵelementEnd(),a.ɵɵelementStart(3,"div",18),a.ɵɵtemplate(4,I,2,1,"div",44),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext().$implicit;a.ɵɵadvance(2),a.ɵɵtextInterpolate(n.displayLabel),a.ɵɵadvance(2),a.ɵɵproperty("ngForOf",n.contextLayers)}}function w(e,t){if(1&e&&(a.ɵɵelementStart(0,"div"),a.ɵɵtemplate(1,M,5,2,"div",45),a.ɵɵelementEnd()),2&e){var n=t.$implicit,r=a.ɵɵnextContext(3);a.ɵɵadvance(1),a.ɵɵproperty("ngIf",r.groupHasEnabledContextLayers(n.oid))}}function j(e,t){if(1&e&&(a.ɵɵelementStart(0,"div"),a.ɵɵelementStart(1,"h4"),a.ɵɵelement(2,"localize",43),a.ɵɵelementEnd(),a.ɵɵelementStart(3,"div",18),a.ɵɵtemplate(4,w,2,1,"div",44),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e){var n=a.ɵɵnextContext(2);a.ɵɵadvance(4),a.ɵɵproperty("ngForOf",n.contextLayerGroups)}}function k(e,t){if(1&e){var n=a.ɵɵgetCurrentView();a.ɵɵelementStart(0,"div"),a.ɵɵelementStart(1,"div",36),a.ɵɵelementStart(2,"h4"),a.ɵɵelement(3,"localize",37),a.ɵɵelementEnd(),a.ɵɵtemplate(4,x,4,3,"div",38),a.ɵɵelementEnd(),a.ɵɵtemplate(5,j,5,1,"div",7),a.ɵɵelementStart(6,"button",39),a.ɵɵlistener("click",(function(){return a.ɵɵrestoreView(n),a.ɵɵnextContext().addContextLayerModal()})),a.ɵɵtext(7,"+ Add Context Layer"),a.ɵɵelementEnd(),a.ɵɵelementEnd()}if(2&e){var r=a.ɵɵnextContext();a.ɵɵadvance(4),a.ɵɵproperty("ngForOf",r.baseLayers),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",r.hasEnabledContextLayers())}}var T=function(){function e(e,t,n){this.modalService=e,this.mapService=t,this.service=n,this.data={types:[],hierarchies:[],geojson:{type:"MultiPolygon",features:[]}},this.childType=null,this.hierarchy=null,this.dateStr=null,this.breadcrumbs=[],this.active=!1,this.vectorLayers=[],this.contextLayerGroups=[],this.lists=[],this.baseLayers=[{name:"Satellite",label:"Satellite",id:"satellite-v9",sprite:"mapbox://sprites/mapbox/satellite-v9",url:"mapbox://mapbox.satellite",selected:!0}],this.baselayerIconHover=!1,this.preventSingleClick=!1}return e.prototype.ngOnInit=function(){var e=this;this.service.getAllMasterListVersions().then((function(t){e.lists=t,e.convertListsToContextLayers(t)}))},e.prototype.ngOnDestroy=function(){this.map.remove()},e.prototype.ngAfterViewInit=function(){var e=this,t=this.baseLayers[0];this.map=new r.Map({container:"map",style:{version:8,name:t.name,metadata:{"mapbox:autocomposite":!0},sources:{mapbox:{type:"raster",url:t.url,tileSize:256}},sprite:t.sprite,glyphs:window.location.protocol+"//"+window.location.host+acp+"/glyphs/{fontstack}/{range}.pbf",layers:[{id:t.id,type:"raster",source:"mapbox"}]},zoom:2,attributionControl:!1,center:[-78.880453,42.897852]}),this.map.on("load",(function(){e.initMap()}))},e.prototype.convertListsToContextLayers=function(e){var t=this;e.forEach((function(e){var n={oid:e.oid,displayLabel:e.displayLabel.localizedValue,contextLayers:[]};t.contextLayerGroups.push(n),e.versions.forEach((function(e){var t={oid:e.oid,displayLabel:e.forDate,active:!1,enabled:!1};n.contextLayers.push(t)}))}))},e.prototype.handleDateChange=function(){this.back(null)},e.prototype.initMap=function(){var e=this;this.map.on("style.load",(function(){e.addLayers(),e.refresh()})),this.addLayers(),this.refresh(),this.map.addControl(new r.NavigationControl({visualizePitch:!0})),this.map.addControl(new r.AttributionControl({compact:!0}),"bottom-right"),this.map.on("dblclick","children-points",(function(t){e.handleMapClickEvent(t)})),this.map.on("dblclick","children-polygon",(function(t){e.handleMapClickEvent(t)}))},e.prototype.addLayers=function(){var e=this,t="children";this.map.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:t+"-points",type:"circle",source:t,paint:{"circle-radius":10,"circle-color":"#a6611a","circle-stroke-width":2,"circle-stroke-color":"#FFFFFF"},filter:["all",["match",["geometry-type"],["Point","MultiPont"],!0,!1]]}),this.map.addLayer({id:t+"-polygon",type:"fill",source:t,layout:{},paint:{"fill-color":"#a6611a","fill-opacity":.8,"fill-outline-color":"black"},filter:["all",["match",["geometry-type"],["Polygon","MultiPolygon"],!0,!1]]}),this.map.addLayer({id:t+"-label",source:t,type:"symbol",paint:{"text-color":"black","text-halo-color":"#fff","text-halo-width":2},layout:{"text-field":["get","localizedValue",["get","displayLabel"]],"text-font":["NotoSansRegular"],"text-offset":[0,.6],"text-anchor":"top","text-size":12}}),this.contextLayerGroups.forEach((function(t){t.contextLayers.forEach((function(t){t.enabled&&e.addVectorLayer(t.oid)}))}))},e.prototype.refresh=function(){var e=this;null==this.current?this.mapService.roots(this.childType,this.hierarchy,this.dateStr).then((function(t){e.map.getSource("children").setData(t.geojson),e.setData(t)})):this.mapService.select(this.current.properties.code,this.current.properties.type,this.childType,this.hierarchy,this.dateStr).then((function(t){e.map.getSource("children").setData(t.geojson),e.setData(t)})),this.hierarchy=null,this.childType=null},e.prototype.handleBasemapStyle=function(e){this.baseLayers.forEach((function(e){e.selected=!1})),e.selected=!0,this.map.setStyle({version:8,name:e.name,metadata:{"mapbox:autocomposite":!0},sources:{mapbox:{type:"raster",url:e.url,tileSize:256}},sprite:e.sprite,glyphs:window.location.protocol+"//"+window.location.host+acp+"/glyphs/{fontstack}/{range}.pbf",layers:[{id:e.id,type:"raster",source:"mapbox"}]})},e.prototype.addContextLayerModal=function(){this.bsModalRef=this.modalService.show(i.ContextLayerModalComponent,{animated:!0,backdrop:!0,ignoreBackdropClick:!0,class:"context-layer-modal"}),this.bsModalRef.content.contextLayerGroups=this.contextLayerGroups,this.bsModalRef.content.onSubmit.subscribe((function(e){}))},e.prototype.highlightMapFeature=function(e){},e.prototype.clearHighlightMapFeature=function(){},e.prototype.onListEntityHover=function(e,t){null==this.current&&this.highlightMapFeature(t.properties.code)},e.prototype.onListEntityHoverOff=function(){this.clearHighlightMapFeature()},e.prototype.zoomToFeature=function(e,t){var n=this;null!=t&&t.stopPropagation(),this.preventSingleClick=!1;this.timer=setTimeout((function(){if(!n.preventSingleClick&&null!=e.geometry){var t=o.default(e);n.map.fitBounds(t)}}),200)},e.prototype.select=function(e,t){null!=t&&t.stopPropagation(),this.preventSingleClick=!0,clearTimeout(this.timer),this.drillDown(e)},e.prototype.handleMapClickEvent=function(e){if(null!=e.features&&e.features.length>0){var t=e.features[0],n=this.data.geojson.features.findIndex((function(e){return e.properties.code===t.properties.code}));-1!==n&&this.drillDown(this.data.geojson.features[n])}},e.prototype.drillDown=function(e){var t=this;this.mapService.select(e.properties.code,e.properties.type,null,this.hierarchy,this.dateStr).then((function(n){t.current=e,t.addBreadcrumb(e),t.map.getSource("children").setData(n.geojson),t.setData(n)})),this.hierarchy=null,this.childType=null},e.prototype.addBreadcrumb=function(e){0!=this.breadcrumbs.length&&this.breadcrumbs[this.breadcrumbs.length-1].properties.code===e.properties.code||this.breadcrumbs.push(e)},e.prototype.back=function(e){var t=this;null!=e?this.mapService.select(e.properties.code,e.properties.type,null,this.hierarchy,this.dateStr).then((function(n){var r=t.breadcrumbs.findIndex((function(t){return t.properties.code===e.properties.code}));t.current=e,t.breadcrumbs.splice(r+1),t.map.getSource("children").setData(n.geojson),t.setData(n)})):this.breadcrumbs.length>0&&this.mapService.roots(null,null,this.dateStr).then((function(e){t.map.getSource("children").setData(e.geojson),t.setData(e),t.current=null,t.breadcrumbs=[]})),this.hierarchy=null,this.childType=null},e.prototype.expand=function(e){this.current=e},e.prototype.setNodes=function(e){var t=this;this.data.geojson.features=[],e.forEach((function(e){t.data.geojson.features.push(e)}))},e.prototype.setData=function(e){this.data=e,this.hierarchy=e.hierarchy,this.childType=e.childType},e.prototype.groupHasEnabledContextLayers=function(e){var t=!1;return this.contextLayerGroups.forEach((function(n){n.oid===e&&n.contextLayers.forEach((function(e){e.enabled&&(t=!0)}))})),t},e.prototype.hasEnabledContextLayers=function(){var e=!1;return this.contextLayerGroups.forEach((function(t){t.contextLayers.forEach((function(t){t.enabled&&(e=!0)}))})),e},e.prototype.removeContextLayer=function(e){e.active&&(this.map.removeLayer(e.oid+"-points"),this.map.removeLayer(e.oid+"-polygon"),this.map.removeLayer(e.oid+"-label"),this.map.removeSource(e.oid),e.active=!1),e.enabled=!1},e.prototype.toggleContextLayer=function(e){var t=this;this.contextLayerGroups.forEach((function(n){n.contextLayers.forEach((function(n){n.oid===e&&(n.active?(t.map.removeLayer(e+"-points"),t.map.removeLayer(e+"-polygon"),t.map.removeLayer(e+"-label"),t.map.removeSource(e),n.active=!1):(t.addVectorLayer(e),n.active=!0))}))}))},e.prototype.addVectorLayer=function(e){var t=window.location.protocol,n=window.location.host;this.map.addSource(e,{type:"vector",tiles:[t+"//"+n+acp+"/master-list/tile?x={x}&y={y}&z={z}&config="+encodeURIComponent(JSON.stringify({oid:e}))]}),this.map.addLayer({id:e+"-points",type:"circle",source:e,"source-layer":"context",paint:{"circle-radius":10,"circle-color":"#800000","circle-stroke-width":2,"circle-stroke-color":"#FFFFFF"},filter:["all",["match",["geometry-type"],["Point","MultiPont"],!0,!1]]},"children-points"),this.map.addLayer({id:e+"-polygon",type:"fill",source:e,"source-layer":"context",layout:{},paint:{"fill-color":"#80cdc1","fill-opacity":.8,"fill-outline-color":"black"},filter:["all",["match",["geometry-type"],["Polygon","MultiPolygon"],!0,!1]]},"children-points"),this.map.addLayer({id:e+"-label",source:e,"source-layer":"context",type:"symbol",paint:{"text-color":"black","text-halo-color":"#fff","text-halo-width":2},layout:{"text-field":["case",["has","displayLabel_"+navigator.language.toLowerCase()],["coalesce",["string",["get","displayLabel_"+navigator.language.toLowerCase()]],["string",["get","displayLabel"]]],["string",["get","displayLabel"]]],"text-font":["NotoSansRegular"],"text-offset":[0,.6],"text-anchor":"top","text-size":12}},"children-points")},e.ɵfac=function(t){return new(t||e)(a.ɵɵdirectiveInject(l.BsModalService),a.ɵɵdirectiveInject(c.MapService),a.ɵɵdirectiveInject(c.RegistryService))},e.ɵcmp=a.ɵɵdefineComponent({type:e,selectors:[["location-manager"]],decls:47,vars:10,consts:[[1,""],["id","app-container",1,"container-fluid"],[1,"row"],["id","navigator-left-sidebar",1,"col-md-3","lw-inner-col"],[1,"col-md-12"],[1,"col-md-12",2,"height","56px","overflow","auto"],[1,"breadcrumb"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"location-management-widget-section"],["key","explorer.date.label"],["type","date","name","dateStr",2,"width","100%",3,"ngModel","ngModelChange","change"],["key","explorer.hierarchy.label"],["id","hierarchy","name","hierarchy","required","",1,"select-area",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["key","explorer.hierarchy.branch.label"],["id","typeCode","name","typeCode","required","",1,"select-area",3,"ngModel","ngModelChange","change"],["id","hierarchy-tree-container",1,"location-management-widget-section","location-management-list-container"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],["id","site-explorer-map",1,"col-md-9"],[1,"base-layer-panel"],[1,"layer-toggle",3,"mouseenter","mouseleave"],["class","fa fa-bars","style","vertical-align: middle; font-size: 18px; color: black;",4,"ngIf"],["id","map",1,"map-view-port"],[2,"color","#007276",3,"click"],["key","explorer.root.label"],[3,"ngClass"],["style","color: #007276;",3,"click",4,"ngIf"],[3,"value"],[1,"list-group-item"],[1,"card","card-default",3,"click"],[1,"card-body"],["aria-hidden","true","title","Drill into location",1,"fa","fa-level-down","clickable",2,"float","right",3,"click"],["title","Zoom to location",1,"clickable",2,"word-break","break-all"],[1,"fa","fa-bars",2,"vertical-align","middle","font-size","18px","color","black"],[2,"margin-bottom","10px"],["key","explorer.base.layers.label"],["class","row-form",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"row-form"],["type","radio","name","rtoggle",1,"layer-toggle-input",3,"value","checked","change"],[1,"layer-toggle-label"],["key","explorer.context.layers.label"],[4,"ngFor","ngForOf"],["class","list-group-item","style","border:none;",4,"ngIf"],[1,"list-group-item",2,"border","none"],["type","checkbox",3,"checked","click"],["aria-hidden","true",1,"fa","fa-times","delete-btn","clickable",3,"click"]],template:function(e,t){1&e&&(a.ɵɵelementStart(0,"div",0),a.ɵɵelement(1,"cgr-header"),a.ɵɵelement(2,"loading-bar"),a.ɵɵelementStart(3,"div",1),a.ɵɵelementStart(4,"div",2),a.ɵɵelementStart(5,"div",3),a.ɵɵelementStart(6,"div",2),a.ɵɵelementStart(7,"div",4),a.ɵɵelementStart(8,"div",2),a.ɵɵelementStart(9,"div",5),a.ɵɵelementStart(10,"ul",6),a.ɵɵtemplate(11,g,3,0,"li",7),a.ɵɵtemplate(12,b,3,5,"li",8),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(13,"div",2),a.ɵɵelementStart(14,"div",4),a.ɵɵelementStart(15,"div",9),a.ɵɵelementStart(16,"label"),a.ɵɵelement(17,"localize",10),a.ɵɵelementEnd(),a.ɵɵelementStart(18,"input",11),a.ɵɵlistener("ngModelChange",(function(e){return t.dateStr=e}))("change",(function(){return t.handleDateChange()})),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(19,"div",2),a.ɵɵelementStart(20,"div",4),a.ɵɵelementStart(21,"div",9),a.ɵɵelementStart(22,"label"),a.ɵɵelement(23,"localize",12),a.ɵɵelementEnd(),a.ɵɵelementStart(24,"select",13),a.ɵɵlistener("ngModelChange",(function(e){return t.hierarchy=e}))("change",(function(){return t.refresh()})),a.ɵɵelement(25,"option"),a.ɵɵtemplate(26,y,2,2,"option",14),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(27,"div",2),a.ɵɵelementStart(28,"div",4),a.ɵɵelementStart(29,"div",9),a.ɵɵelementStart(30,"label"),a.ɵɵelement(31,"localize",15),a.ɵɵelementEnd(),a.ɵɵelementStart(32,"select",16),a.ɵɵlistener("ngModelChange",(function(e){return t.childType=e}))("change",(function(){return t.refresh()})),a.ɵɵelement(33,"option"),a.ɵɵtemplate(34,S,2,2,"option",14),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(35,"div",2),a.ɵɵelementStart(36,"div",4),a.ɵɵelementStart(37,"div",17),a.ɵɵelementStart(38,"div",18),a.ɵɵtemplate(39,C,6,2,"div",19),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementStart(40,"div",20),a.ɵɵelementStart(41,"div",2),a.ɵɵelementStart(42,"article",21),a.ɵɵelementStart(43,"div",22),a.ɵɵlistener("mouseenter",(function(){return t.baselayerIconHover=!0}))("mouseleave",(function(){return t.baselayerIconHover=!1})),a.ɵɵtemplate(44,E,1,0,"i",23),a.ɵɵtemplate(45,k,8,2,"div",7),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelement(46,"div",24),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd(),a.ɵɵelementEnd()),2&e&&(a.ɵɵadvance(11),a.ɵɵproperty("ngIf",null!=t.current),a.ɵɵadvance(1),a.ɵɵproperty("ngForOf",t.breadcrumbs),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",t.dateStr),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",t.hierarchy),a.ɵɵadvance(2),a.ɵɵproperty("ngForOf",t.data.hierarchies),a.ɵɵadvance(6),a.ɵɵproperty("ngModel",t.childType),a.ɵɵadvance(2),a.ɵɵproperty("ngForOf",t.data.types),a.ɵɵadvance(5),a.ɵɵproperty("ngForOf",t.data.geojson.features),a.ɵɵadvance(5),a.ɵɵproperty("ngIf",!t.baselayerIconHover),a.ɵɵadvance(1),a.ɵɵproperty("ngIf",t.baselayerIconHover))},directives:[s.CgrHeaderComponent,d.LoadingBarComponent,p.NgIf,p.NgForOf,m.LocalizeComponent,u.DefaultValueAccessor,u.NgControlStatus,u.NgModel,u.SelectControlValueAccessor,u.RequiredValidator,u.NgSelectOption,u.ɵangular_packages_forms_forms_x,p.NgClass],styles:["#hierarchy-tree-container[_ngcontent-%COMP%] {\n\theight: calc(100vh - 429px);\n    overflow-y: auto;\n}\n\n.location-management-widget-section[_ngcontent-%COMP%] {\n\tmargin: 5px 0;\n}\n.location-management-widget-section[_ngcontent-%COMP%]    > select[_ngcontent-%COMP%] {\n\tfloat: none !important;\n}\n\n.list-group-item[_ngcontent-%COMP%] {\n\tborder: none;\n\tborder-bottom: 1px solid #ddd;\n\tmargin-bottom: 0;\n}\n.list-group-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n\n.breadcrumb[_ngcontent-%COMP%]{\n\tpadding: 10px 0;\n\tbackground-color: white;\n\tmargin:0;\n}\n\n.layer-toggle[_ngcontent-%COMP%] {\n\tcursor: pointer; \n\tbackground: #fff; \n\tpadding: 8px; \n\tborder-radius: 4px;\n}\n\n.layer-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n.layer-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n\tmargin-left: 5px;\n}"]}),e}();t.LocationManagerComponent=T},637:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextLayerModalComponent=void 0;n(0),n(30);var r=n(37),o=n(0),i=n(30),a=n(44),l=n(27),c=n(1);function s(e,t){if(1&e&&(o.ɵɵelementStart(0,"div"),o.ɵɵelementStart(1,"input",15),o.ɵɵlistener("change",(function(){var e=t.$implicit;return e.enabled=!e.enabled})),o.ɵɵelementEnd(),o.ɵɵtext(2),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵadvance(1),o.ɵɵproperty("checked",n.enabled),o.ɵɵadvance(1),o.ɵɵtextInterpolate1(" ",n.displayLabel," ")}}function d(e,t){if(1&e&&(o.ɵɵelementStart(0,"div",14),o.ɵɵelementStart(1,"h4"),o.ɵɵtext(2),o.ɵɵelementEnd(),o.ɵɵelementStart(3,"div",6),o.ɵɵtemplate(4,s,3,2,"div",7),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e){var n=o.ɵɵnextContext().$implicit;o.ɵɵadvance(2),o.ɵɵtextInterpolate(n.displayLabel),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",n.contextLayers)}}function p(e,t){if(1&e&&(o.ɵɵelementStart(0,"div"),o.ɵɵtemplate(1,d,5,2,"div",13),o.ɵɵelementEnd()),2&e){var n=t.$implicit,r=o.ɵɵnextContext();o.ɵɵadvance(1),o.ɵɵproperty("ngIf",r.groupHasContextLayers(n.oid))}}var m=function(){function e(e){this.bsModalRef=e}return e.prototype.ngOnInit=function(){this.onSubmit=new r.Subject},e.prototype.groupHasContextLayers=function(e){var t=!1;return this.contextLayerGroups.forEach((function(n){n.oid===e&&n.contextLayers.length>0&&(t=!0)})),t},e.prototype.confirm=function(){this.onSubmit.next(this.contextLayerGroups),this.bsModalRef.hide()},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.BsModalRef))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["context-layer-modal"]],decls:19,vars:1,consts:[[1,"modal-body"],[1,"heading"],["key","explorer.add.context.layers.modal.title"],["name","export-form",1,"modal-form"],[1,"row"],[1,"col-md-12"],[1,"list-group"],[4,"ngFor","ngForOf"],[1,"button-holder"],["type","button","role","button","aria-disabled","false",1,"btn","btn-default",3,"click"],["key","modal.button.cancel"],["type","button","role","button",1,"btn","btn-primary",3,"click"],["key","modal.button.submit"],["class","list-group-item","style","border: none;",4,"ngIf"],[1,"list-group-item",2,"border","none"],["type","checkbox",2,"margin-left","10px",3,"checked","change"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelementStart(1,"div",1),o.ɵɵelementStart(2,"h2"),o.ɵɵelement(3,"localize",2),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"form",3),o.ɵɵelementStart(5,"fieldset"),o.ɵɵelementStart(6,"div",4),o.ɵɵelementStart(7,"div",5),o.ɵɵelementStart(8,"div",6),o.ɵɵtemplate(9,p,2,1,"div",7),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(10,"div",4),o.ɵɵelementStart(11,"div",5),o.ɵɵelementStart(12,"div",8),o.ɵɵelementStart(13,"button",9),o.ɵɵlistener("click",(function(){return t.bsModalRef.hide()})),o.ɵɵelementStart(14,"span"),o.ɵɵelement(15,"localize",10),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(16,"button",11),o.ɵɵlistener("click",(function(){return t.confirm()})),o.ɵɵelementStart(17,"span"),o.ɵɵelement(18,"localize",12),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(9),o.ɵɵproperty("ngForOf",t.contextLayerGroups))},directives:[a.LocalizeComponent,l.ɵangular_packages_forms_forms_y,l.NgControlStatusGroup,l.NgForm,c.NgForOf,c.NgIf],styles:["#hierarchy-tree-container[_ngcontent-%COMP%] {\n\theight: calc(100vh - 429px);\n    overflow-y: auto;\n}\n\n.location-management-widget-section[_ngcontent-%COMP%] {\n\tmargin: 5px 0;\n}\n.location-management-widget-section[_ngcontent-%COMP%]    > select[_ngcontent-%COMP%] {\n\tfloat: none !important;\n}\n\n.list-group-item[_ngcontent-%COMP%] {\n\tborder: none;\n\tborder-bottom: 1px solid #ddd;\n\tmargin-bottom: 0;\n}\n.list-group-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n\n.breadcrumb[_ngcontent-%COMP%]{\n\tpadding: 10px 0;\n\tbackground-color: white;\n\tmargin:0;\n}\n\n.layer-toggle[_ngcontent-%COMP%] {\n\tcursor: pointer; \n\tbackground: #fff; \n\tpadding: 8px; \n\tborder-radius: 4px;\n}\n\n.layer-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n\theight: auto;\n}\n.layer-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n\tmargin-left: 5px;\n}"]}),e}();t.ContextLayerModalComponent=m},641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateUpdateGeoObjectDetailComponent=void 0;n(0),n(28),n(30),n(545);var r=n(174),o=n(0),i=n(28),a=n(545),l=n(30),c=n(44),s=n(27),d=n(1),p=n(554),m=["attributeEditor"],u=["geometryEditor"];function g(e,t){if(1&e&&o.ɵɵelement(0,"geoobject-shared-attribute-editor",15,16),2&e){var n=o.ɵɵnextContext();o.ɵɵproperty("readOnly",n.readOnly)("geoObjectType",n.geoObjectType)("postGeoObject",n.postGeoObject)("preGeoObject",n.preGeoObject)("forDate",n.forDate)("isGeometryInlined",!0)}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"button",17),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().startEdit()})),o.ɵɵelement(1,"localize",18),o.ɵɵelementEnd()}}function h(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"button",17),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().applyAction()})),o.ɵɵelement(1,"localize",19),o.ɵɵelementEnd()}}function v(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"button",20),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().endEdit()})),o.ɵɵelement(1,"localize",21),o.ɵɵelementEnd()}}var b=function(){function e(e,t,n,r){this.router=e,this.changeRequestService=t,this.modalService=n,this.registryService=r,this.preGeoObject=null,this.postGeoObject=null,this.geoObjectType=null,this.readOnly=!0,this.dateStr=null,this.forDate=null,this.forDate=new Date;var o=this.forDate.getUTCDate();this.dateStr=this.forDate.getUTCFullYear()+"-"+(this.forDate.getUTCMonth()+1)+"-"+(o<10?"0":"")+o}return e.prototype.ngOnInit=function(){this.postGeoObject=this.action.geoObjectJson,this.geoObjectType=this.action.geoObjectType,this.isNew()&&(this.preGeoObject=this.postGeoObject),this.onSelect(this.action)},e.prototype.isNew=function(){return"net.geoprism.registry.action.geoobject.CreateGeoObjectAction"===this.action.actionType},e.prototype.handleDateChange=function(){this.forDate=new Date(Date.parse(this.dateStr))},e.prototype.applyAction=function(){var e=this,t=JSON.parse(JSON.stringify(this.action));t.geoObjectJson=this.attributeEditor.getGeoObject(),null!=this.geometryEditor&&(t.geoObjectJson.geometry=this.geometryEditor.saveDraw().geometry),this.changeRequestService.applyAction(t).then((function(t){e.endEdit()})).catch((function(t){e.error(t)}))},e.prototype.onSelect=function(e){var t=this;"net.geoprism.registry.action.geoobject.UpdateGeoObjectAction"===this.action.actionType&&this.registryService.getGeoObjectOverTime(this.postGeoObject.attributes.code,this.geoObjectType.code).then((function(e){t.preGeoObject=e})).catch((function(e){console.log("Error",e),t.error(e)}))},e.prototype.canDeactivate=function(){return!!this.readOnly},e.prototype.afterDeactivate=function(e){e&&!this.readOnly&&this.unlockActionSync()},e.prototype.startEdit=function(){this.lockAction()},e.prototype.endEdit=function(){this.unlockAction()},e.prototype.lockAction=function(){var e=this;this.changeRequestService.lockAction(this.action.oid).then((function(t){e.readOnly=!1,null!=e.geometryEditor&&e.geometryEditor.enableEditing(!0)})).catch((function(t){e.error(t)}))},e.prototype.unlockAction=function(){var e=this;this.changeRequestService.unlockAction(this.action.oid).then((function(t){e.readOnly=!0,null!=e.geometryEditor&&e.geometryEditor.enableEditing(!1)})).catch((function(t){e.error(t)}))},e.prototype.unlockActionSync=function(){$.ajax({url:acp+"/changerequest/unlockAction",method:"POST",data:{actionId:this.action.oid},success:function(e){},async:!1})},e.prototype.error=function(e){this.bsModalRef=this.modalService.show(r.ErrorModalComponent,{backdrop:!0}),this.bsModalRef.content.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.Router),o.ɵɵdirectiveInject(a.ChangeRequestService),o.ɵɵdirectiveInject(l.BsModalService),o.ɵɵdirectiveInject(a.RegistryService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["crtable-detail-create-geo-object"]],viewQuery:function(e,t){var n;(1&e&&(o.ɵɵviewQuery(m,!0),o.ɵɵviewQuery(u,!0)),2&e)&&(o.ɵɵqueryRefresh(n=o.ɵɵloadQuery())&&(t.attributeEditor=n.first),o.ɵɵqueryRefresh(n=o.ɵɵloadQuery())&&(t.geometryEditor=n.first))},hostBindings:function(e,t){1&e&&o.ɵɵlistener("beforeunload",(function(){return t.canDeactivate()}),!1,o.ɵɵresolveWindow)},inputs:{action:"action"},decls:28,vars:11,consts:[[1,"crtable-detail-container"],[1,"heading"],[1,"action-detail-header"],[1,"detail-content"],[1,"detail-label"],[1,"detail-value"],["key","changeOverTime.forDate"],["type","date","name","dateStr",3,"ngModel","ngModelChange","change"],[3,"readOnly","geoObjectType","postGeoObject","preGeoObject","forDate","isGeometryInlined",4,"ngIf"],["key","change.request.action.detail.contributorNotes"],[1,"detail-value",2,"width","100%","border-radius","8px","height","70px",3,"disabled","ngModel","ngModelChange"],["key","change.request.action.detail.maintainerNotes"],[1,"button-holder"],["class","btn btn-primary detail-accept",3,"click",4,"ngIf"],["class","btn btn-default detail-reject",3,"click",4,"ngIf"],[3,"readOnly","geoObjectType","postGeoObject","preGeoObject","forDate","isGeometryInlined"],["attributeEditor",""],[1,"btn","btn-primary","detail-accept",3,"click"],["key","modal.button.edit"],["key","modal.button.submit"],[1,"btn","btn-default","detail-reject",3,"click"],["key","modal.button.cancel"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelementStart(1,"div",1),o.ɵɵelementStart(2,"h3",2),o.ɵɵtext(3),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(4,"div",3),o.ɵɵelementStart(5,"div"),o.ɵɵelementStart(6,"label",4),o.ɵɵtext(7,"GeoObjectType : "),o.ɵɵelementEnd(),o.ɵɵelementStart(8,"label",5),o.ɵɵtext(9),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(10,"div"),o.ɵɵelement(11,"localize",6),o.ɵɵelementStart(12,"input",7),o.ɵɵlistener("ngModelChange",(function(e){return t.dateStr=e}))("change",(function(){return t.handleDateChange()})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵtemplate(13,g,2,6,"geoobject-shared-attribute-editor",8),o.ɵɵelementStart(14,"div"),o.ɵɵelementStart(15,"label",4),o.ɵɵelement(16,"localize",9),o.ɵɵtext(17," : "),o.ɵɵelementEnd(),o.ɵɵelementStart(18,"textarea",10),o.ɵɵlistener("ngModelChange",(function(e){return t.action.contributorNotes=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(19,"div"),o.ɵɵelementStart(20,"label",4),o.ɵɵelement(21,"localize",11),o.ɵɵtext(22," : "),o.ɵɵelementEnd(),o.ɵɵelementStart(23,"textarea",10),o.ɵɵlistener("ngModelChange",(function(e){return t.action.maintainerNotes=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(24,"div",12),o.ɵɵtemplate(25,f,2,0,"button",13),o.ɵɵtemplate(26,h,2,0,"button",13),o.ɵɵtemplate(27,v,2,0,"button",14),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(3),o.ɵɵtextInterpolate(t.action.actionLabel),o.ɵɵadvance(6),o.ɵɵtextInterpolate(t.action.geoObjectType.code),o.ɵɵadvance(3),o.ɵɵproperty("ngModel",t.dateStr),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.preGeoObject),o.ɵɵadvance(5),o.ɵɵproperty("disabled",t.readOnly)("ngModel",t.action.contributorNotes),o.ɵɵadvance(5),o.ɵɵproperty("disabled",t.readOnly)("ngModel",t.action.maintainerNotes),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",t.readOnly),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",!t.readOnly),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",!t.readOnly))},directives:[c.LocalizeComponent,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel,d.NgIf,p.GeoObjectSharedAttributeEditorComponent],styles:["/* \n   WARNING viewencapsulation on the detail.component.tx was set to none to set these css\n   values to be globally scoped \n*/\n.crtable-detail-container .modal-form .label-holder {\n    display: none;\n}\n\n.crtable-detail-container .modal-form .holder {\n    border-left: 0;\n    width: 100%;\n    padding: 0;\n}\n\n.crtable-detail-container .modal-form .holder .panel .panel-body {\n    padding: 0;\n}"],encapsulation:2}),e}();t.CreateUpdateGeoObjectDetailComponent=b},642:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddRemoveChildDetailComponent=void 0;n(0),n(28),n(30),n(643),n(545);var r=n(174),o=n(0),i=n(28),a=n(545),l=n(30),c=n(27),s=n(44),d=n(1);function p(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"button",19),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().startEdit()})),o.ɵɵelement(1,"localize",20),o.ɵɵelementEnd()}}function m(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"button",19),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().applyAction()})),o.ɵɵelement(1,"localize",21),o.ɵɵelementEnd()}}function u(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"button",22),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().endEdit()})),o.ɵɵelement(1,"localize",23),o.ɵɵelementEnd()}}var g=function(e,t,n){return{"status-rejected":e,"status-accepted":t,"status-pending":n}},f=function(){function e(e,t,n){this.router=e,this.changeRequestService=t,this.modalService=n,this.readOnly=!0}return e.prototype.ngOnInit=function(){this.original=Object.assign({},this.action)},e.prototype.applyAction=function(){var e=this;this.changeRequestService.applyAction(this.action).then((function(t){e.original=Object.assign({},e.action),e.unlockAction()})).catch((function(t){e.error(t)}))},e.prototype.canDeactivate=function(){return!!this.readOnly},e.prototype.afterDeactivate=function(e){e&&!this.readOnly&&this.unlockActionSync()},e.prototype.startEdit=function(){this.lockAction()},e.prototype.endEdit=function(){this.unlockAction()},e.prototype.lockAction=function(){var e=this;this.changeRequestService.lockAction(this.action.oid).then((function(t){e.readOnly=!1})).catch((function(t){e.error(t)}))},e.prototype.unlockAction=function(){var e=this;this.changeRequestService.unlockAction(this.action.oid).then((function(t){e.readOnly=!0,e.action=e.original})).catch((function(t){e.error(t)}))},e.prototype.unlockActionSync=function(){$.ajax({url:acp+"/changerequest/unlockAction",method:"POST",data:{actionId:this.action.oid},success:function(e){},async:!1})},e.prototype.onSelect=function(e){this.action=e},e.prototype.error=function(e){this.bsModalRef=this.modalService.show(r.ErrorModalComponent,{backdrop:!0}),this.bsModalRef.content.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.Router),o.ɵɵdirectiveInject(a.ChangeRequestService),o.ɵɵdirectiveInject(l.BsModalService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["crtable-detail-add-remove-child"]],hostBindings:function(e,t){1&e&&o.ɵɵlistener("beforeunload",(function(){return t.canDeactivate()}),!1,o.ɵɵresolveWindow)},inputs:{action:"action"},decls:43,vars:25,consts:[[1,"crtable-detail-container"],[1,"action-detail-header"],[1,"detail-content"],[1,"detail-label"],["type","text",1,"detail-value",3,"ngModel","disabled","ngModelChange"],["key","change.request.status"],[2,"float","none",3,"ngClass","ngModel","disabled","ngModelChange"],["value","REJECTED"],["key","change.request.status.rejected"],["value","ACCEPTED"],["key","change.request.status.accepted"],["value","PENDING"],["key","change.request.status.pending"],["key","change.request.action.detail.contributorNotes"],[1,"detail-value",2,"width","100%","border-radius","8px","height","70px",3,"ngModel","disabled","ngModelChange"],["key","change.request.action.detail.maintainerNotes"],[1,"button-holder"],["class","btn btn-primary detail-accept",3,"click",4,"ngIf"],["class","btn btn-default detail-reject",3,"click",4,"ngIf"],[1,"btn","btn-primary","detail-accept",3,"click"],["key","modal.button.edit"],["key","modal.button.submit"],[1,"btn","btn-default","detail-reject",3,"click"],["key","modal.button.cancel"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelementStart(1,"h3",1),o.ɵɵtext(2),o.ɵɵelementEnd(),o.ɵɵelementStart(3,"div",2),o.ɵɵelementStart(4,"label",3),o.ɵɵtext(5,"Child UID : "),o.ɵɵelementEnd(),o.ɵɵelementStart(6,"input",4),o.ɵɵlistener("ngModelChange",(function(e){return t.action.childId=e})),o.ɵɵelementEnd(),o.ɵɵelementStart(7,"label",3),o.ɵɵtext(8,"Child TypeCode : "),o.ɵɵelementEnd(),o.ɵɵelementStart(9,"input",4),o.ɵɵlistener("ngModelChange",(function(e){return t.action.childTypeCode=e})),o.ɵɵelementEnd(),o.ɵɵelementStart(10,"label",3),o.ɵɵtext(11,"Parent UID : "),o.ɵɵelementEnd(),o.ɵɵelementStart(12,"input",4),o.ɵɵlistener("ngModelChange",(function(e){return t.action.parentId=e})),o.ɵɵelementEnd(),o.ɵɵelementStart(13,"label",3),o.ɵɵtext(14,"Parent TypeCode : "),o.ɵɵelementEnd(),o.ɵɵelementStart(15,"input",4),o.ɵɵlistener("ngModelChange",(function(e){return t.action.parentTypeCode=e})),o.ɵɵelementEnd(),o.ɵɵelementStart(16,"label",3),o.ɵɵtext(17,"Hierarchy Code : "),o.ɵɵelementEnd(),o.ɵɵelementStart(18,"input",4),o.ɵɵlistener("ngModelChange",(function(e){return t.action.hierarchyTypeCode=e})),o.ɵɵelementEnd(),o.ɵɵelementStart(19,"label",3),o.ɵɵelement(20,"localize",5),o.ɵɵtext(21," : "),o.ɵɵelementEnd(),o.ɵɵelementStart(22,"select",6),o.ɵɵlistener("ngModelChange",(function(e){return t.action.approvalStatus=e})),o.ɵɵelementStart(23,"option",7),o.ɵɵelement(24,"localize",8),o.ɵɵelementEnd(),o.ɵɵelementStart(25,"option",9),o.ɵɵelement(26,"localize",10),o.ɵɵelementEnd(),o.ɵɵelementStart(27,"option",11),o.ɵɵelement(28,"localize",12),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(29,"div"),o.ɵɵelementStart(30,"label",3),o.ɵɵelement(31,"localize",13),o.ɵɵtext(32," : "),o.ɵɵelementEnd(),o.ɵɵelementStart(33,"textarea",14),o.ɵɵlistener("ngModelChange",(function(e){return t.action.contributorNotes=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(34,"div"),o.ɵɵelementStart(35,"label",3),o.ɵɵelement(36,"localize",15),o.ɵɵtext(37," : "),o.ɵɵelementEnd(),o.ɵɵelementStart(38,"textarea",14),o.ɵɵlistener("ngModelChange",(function(e){return t.action.maintainerNotes=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(39,"div",16),o.ɵɵtemplate(40,p,2,0,"button",17),o.ɵɵtemplate(41,m,2,0,"button",17),o.ɵɵtemplate(42,u,2,0,"button",18),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(2),o.ɵɵtextInterpolate(t.action.actionLabel),o.ɵɵadvance(4),o.ɵɵproperty("ngModel",t.action.childId)("disabled",t.readOnly),o.ɵɵadvance(3),o.ɵɵproperty("ngModel",t.action.childTypeCode)("disabled",t.readOnly),o.ɵɵadvance(3),o.ɵɵproperty("ngModel",t.action.parentId)("disabled",t.readOnly),o.ɵɵadvance(3),o.ɵɵproperty("ngModel",t.action.parentTypeCode)("disabled",t.readOnly),o.ɵɵadvance(3),o.ɵɵproperty("ngModel",t.action.hierarchyTypeCode)("disabled",t.readOnly),o.ɵɵadvance(4),o.ɵɵproperty("ngClass",o.ɵɵpureFunction3(21,g,"REJECTED"===t.action.approvalStatus,"ACCEPTED"===t.action.approvalStatus,"PENDING"===t.action.approvalStatus))("ngModel",t.action.approvalStatus)("disabled",t.readOnly),o.ɵɵadvance(11),o.ɵɵproperty("ngModel",t.action.contributorNotes)("disabled",t.readOnly),o.ɵɵadvance(5),o.ɵɵproperty("ngModel",t.action.maintainerNotes)("disabled",t.readOnly),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",t.readOnly),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",!t.readOnly),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",!t.readOnly))},directives:[c.DefaultValueAccessor,c.NgControlStatus,c.NgModel,s.LocalizeComponent,c.SelectControlValueAccessor,d.NgClass,c.NgSelectOption,c.ɵangular_packages_forms_forms_x,d.NgIf],encapsulation:2}),e}();t.AddRemoveChildDetailComponent=f},643:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SetParentAction=t.PageEvent=t.GovernanceStatus=t.RemoveChildAction=t.AddChildAction=t.CreateGeoObjectAction=t.UpdateGeoObjectAction=t.AbstractAction=t.ChangeRequest=void 0;var i=function(){};t.ChangeRequest=i;var a=function(){};t.AbstractAction=a;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(a);t.UpdateGeoObjectAction=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(a);t.CreateGeoObjectAction=c;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(a);t.AddChildAction=s;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(a);t.RemoveChildAction=d;var p=function(){};t.GovernanceStatus=p;var m=function(){};t.PageEvent=m;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(a);t.SetParentAction=u},644:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetParentDetailComponent=void 0;n(0),n(28),n(30),n(545);var r=n(174),o=n(0),i=n(28),a=n(545),l=n(30),c=n(44),s=n(27),d=n(579),p=n(1);function m(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"button",22),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().startEdit()})),o.ɵɵelement(1,"localize",23),o.ɵɵelementEnd()}}function u(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"button",22),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().applyAction()})),o.ɵɵelement(1,"localize",24),o.ɵɵelementEnd()}}function g(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"button",25),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().endEdit()})),o.ɵɵelement(1,"localize",26),o.ɵɵelementEnd()}}var f=function(e,t,n){return{"status-rejected":e,"status-accepted":t,"status-pending":n}},h=function(){function e(e,t,n,r){this.router=e,this.changeRequestService=t,this.modalService=n,this.registryService=r,this.hierarchies=[],this.readOnly=!0,this.dateStr=null,this.forDate=null,this.forDate=new Date;var o=this.forDate.getUTCDate();this.dateStr=this.forDate.getUTCFullYear()+"-"+(this.forDate.getUTCMonth()+1)+"-"+(o<10?"0":"")+o}return e.prototype.ngOnInit=function(){this.hierarchies=this.action.json,this.onSelect(this.action)},e.prototype.applyAction=function(){var e=this,t=JSON.parse(JSON.stringify(this.action));this.changeRequestService.applyAction(t).then((function(t){e.endEdit()})).catch((function(t){e.error(t)}))},e.prototype.handleDateChange=function(){this.forDate=new Date(Date.parse(this.dateStr))},e.prototype.onSelect=function(e){},e.prototype.canDeactivate=function(){return!!this.readOnly},e.prototype.afterDeactivate=function(e){e&&!this.readOnly&&this.unlockActionSync()},e.prototype.startEdit=function(){this.lockAction()},e.prototype.endEdit=function(){this.unlockAction()},e.prototype.lockAction=function(){var e=this;this.changeRequestService.lockAction(this.action.oid).then((function(t){e.readOnly=!1})).catch((function(t){e.error(t)}))},e.prototype.unlockAction=function(){var e=this;this.changeRequestService.unlockAction(this.action.oid).then((function(t){e.readOnly=!0})).catch((function(t){e.error(t)}))},e.prototype.unlockActionSync=function(){$.ajax({url:acp+"/changerequest/unlockAction",method:"POST",data:{actionId:this.action.oid},success:function(e){},async:!1})},e.prototype.error=function(e){this.bsModalRef=this.modalService.show(r.ErrorModalComponent,{backdrop:!0}),this.bsModalRef.content.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.Router),o.ɵɵdirectiveInject(a.ChangeRequestService),o.ɵɵdirectiveInject(l.BsModalService),o.ɵɵdirectiveInject(a.RegistryService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["set-parent-detail"]],hostBindings:function(e,t){1&e&&o.ɵɵlistener("beforeunload",(function(){return t.canDeactivate()}),!1,o.ɵɵresolveWindow)},inputs:{action:"action"},decls:34,vars:18,consts:[[1,"crtable-detail-container"],[1,"action-detail-header"],[1,"detail-content"],["key","changeOverTime.forDate"],["type","date","name","dateStr",3,"ngModel","ngModelChange","change"],[3,"hierarchies","forDate"],["parentSelector",""],[1,"detail-label"],["key","change.request.status"],[2,"float","none",3,"disabled","ngClass","ngModel","ngModelChange"],["value","REJECTED"],["key","change.request.status.rejected"],["value","ACCEPTED"],["key","change.request.status.accepted"],["value","PENDING"],["key","change.request.status.pending"],["key","change.request.action.detail.contributorNotes"],[1,"detail-value",2,"width","100%","border-radius","8px","height","70px",3,"disabled","ngModel","ngModelChange"],["key","change.request.action.detail.maintainerNotes"],[1,"button-holder"],["class","btn btn-primary detail-accept",3,"click",4,"ngIf"],["class","btn btn-default detail-reject",3,"click",4,"ngIf"],[1,"btn","btn-primary","detail-accept",3,"click"],["key","modal.button.edit"],["key","modal.button.submit"],[1,"btn","btn-default","detail-reject",3,"click"],["key","modal.button.cancel"]],template:function(e,t){1&e&&(o.ɵɵelementStart(0,"div",0),o.ɵɵelementStart(1,"h3",1),o.ɵɵtext(2),o.ɵɵelementEnd(),o.ɵɵelementStart(3,"div",2),o.ɵɵelementStart(4,"div"),o.ɵɵelement(5,"localize",3),o.ɵɵelementStart(6,"input",4),o.ɵɵlistener("ngModelChange",(function(e){return t.dateStr=e}))("change",(function(){return t.handleDateChange()})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelement(7,"cascading-geo-selector",5,6),o.ɵɵelementStart(9,"div"),o.ɵɵelementStart(10,"label",7),o.ɵɵelement(11,"localize",8),o.ɵɵtext(12," : "),o.ɵɵelementEnd(),o.ɵɵelementStart(13,"select",9),o.ɵɵlistener("ngModelChange",(function(e){return t.action.approvalStatus=e})),o.ɵɵelementStart(14,"option",10),o.ɵɵelement(15,"localize",11),o.ɵɵelementEnd(),o.ɵɵelementStart(16,"option",12),o.ɵɵelement(17,"localize",13),o.ɵɵelementEnd(),o.ɵɵelementStart(18,"option",14),o.ɵɵelement(19,"localize",15),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(20,"div"),o.ɵɵelementStart(21,"label",7),o.ɵɵelement(22,"localize",16),o.ɵɵtext(23," : "),o.ɵɵelementEnd(),o.ɵɵelementStart(24,"textarea",17),o.ɵɵlistener("ngModelChange",(function(e){return t.action.contributorNotes=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(25,"div"),o.ɵɵelementStart(26,"label",7),o.ɵɵelement(27,"localize",18),o.ɵɵtext(28," : "),o.ɵɵelementEnd(),o.ɵɵelementStart(29,"textarea",17),o.ɵɵlistener("ngModelChange",(function(e){return t.action.maintainerNotes=e})),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(30,"div",19),o.ɵɵtemplate(31,m,2,0,"button",20),o.ɵɵtemplate(32,u,2,0,"button",20),o.ɵɵtemplate(33,g,2,0,"button",21),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()),2&e&&(o.ɵɵadvance(2),o.ɵɵtextInterpolate(t.action.actionLabel),o.ɵɵadvance(4),o.ɵɵproperty("ngModel",t.dateStr),o.ɵɵadvance(1),o.ɵɵproperty("hierarchies",t.hierarchies)("forDate",t.forDate),o.ɵɵadvance(6),o.ɵɵproperty("disabled",t.readOnly)("ngClass",o.ɵɵpureFunction3(14,f,"REJECTED"===t.action.approvalStatus,"ACCEPTED"===t.action.approvalStatus,"PENDING"===t.action.approvalStatus))("ngModel",t.action.approvalStatus),o.ɵɵadvance(11),o.ɵɵproperty("disabled",t.readOnly)("ngModel",t.action.contributorNotes),o.ɵɵadvance(5),o.ɵɵproperty("disabled",t.readOnly)("ngModel",t.action.maintainerNotes),o.ɵɵadvance(2),o.ɵɵproperty("ngIf",t.readOnly),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",!t.readOnly),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",!t.readOnly))},directives:[c.LocalizeComponent,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel,d.CascadingGeoSelector,s.SelectControlValueAccessor,p.NgClass,s.NgSelectOption,s.ɵangular_packages_forms_forms_x,p.NgIf],encapsulation:2}),e}();t.SetParentDetailComponent=h},645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataExportComponent=void 0;n(0),n(30);var r=n(174),o=(n(545),n(15),n(0)),i=n(545),a=n(30),l=n(15),c=n(85),s=n(1),d=n(27),p=n(44);function m(e,t){if(1&e&&(o.ɵɵelementStart(0,"option",19),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵproperty("value",n.code),o.ɵɵadvance(1),o.ɵɵtextInterpolate(n.label)}}function u(e,t){if(1&e&&(o.ɵɵelementStart(0,"option",19),o.ɵɵtext(1),o.ɵɵelementEnd()),2&e){var n=t.$implicit;o.ɵɵproperty("value",n.code),o.ɵɵadvance(1),o.ɵɵtextInterpolate(n.label)}}function g(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"div",2),o.ɵɵelementStart(1,"label",20),o.ɵɵelement(2,"localize",21),o.ɵɵelementEnd(),o.ɵɵelementStart(3,"div",5),o.ɵɵelementStart(4,"select",22),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext(2).hierarchy=e})),o.ɵɵelement(5,"option"),o.ɵɵtemplate(6,u,2,2,"option",7),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵnextContext(2);o.ɵɵadvance(4),o.ɵɵproperty("ngModel",r.hierarchy),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",r.hierarchies)}}function f(e,t){if(1&e){var n=o.ɵɵgetCurrentView();o.ɵɵelementStart(0,"form",null,1),o.ɵɵelementStart(2,"div",2),o.ɵɵelementStart(3,"label",3),o.ɵɵelement(4,"localize",4),o.ɵɵelementEnd(),o.ɵɵelementStart(5,"div",5),o.ɵɵelementStart(6,"select",6),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().code=e}))("change",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().onChange(e.target.value)})),o.ɵɵelement(7,"option"),o.ɵɵtemplate(8,m,2,2,"option",7),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵtemplate(9,g,7,2,"div",8),o.ɵɵelementStart(10,"div",2),o.ɵɵelementStart(11,"label",9),o.ɵɵelement(12,"localize",10),o.ɵɵelementEnd(),o.ɵɵelementStart(13,"div",5),o.ɵɵelementStart(14,"select",11),o.ɵɵlistener("ngModelChange",(function(e){return o.ɵɵrestoreView(n),o.ɵɵnextContext().format=e})),o.ɵɵelement(15,"option"),o.ɵɵelementStart(16,"option",12),o.ɵɵelement(17,"localize",13),o.ɵɵelementEnd(),o.ɵɵelementStart(18,"option",14),o.ɵɵelement(19,"localize",15),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementStart(20,"div",2),o.ɵɵelementStart(21,"div",16),o.ɵɵelementStart(22,"button",17),o.ɵɵlistener("click",(function(){return o.ɵɵrestoreView(n),o.ɵɵnextContext().onExport()})),o.ɵɵelement(23,"localize",18),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd(),o.ɵɵelementEnd()}if(2&e){var r=o.ɵɵreference(1),i=o.ɵɵnextContext();o.ɵɵadvance(6),o.ɵɵproperty("ngModel",i.code),o.ɵɵadvance(2),o.ɵɵproperty("ngForOf",i.types),o.ɵɵadvance(1),o.ɵɵproperty("ngIf",i.hierarchies.length>0),o.ɵɵadvance(5),o.ɵɵproperty("ngModel",i.format),o.ɵɵadvance(8),o.ɵɵproperty("disabled",r.invalid)}}var h=function(){function e(e,t,n){this.service=e,this.modalService=t,this.authService=n,this.code=null,this.hierarchies=[],this.hierarchy=null,this.format=null}return e.prototype.ngOnInit=function(){var e=this;this.service.listGeoObjectTypes(!1).then((function(t){for(var n=[],r=0;r<t.length;++r)e.authService.isOrganizationRA(t[r].orgCode)&&n.push(t[r]);e.types=n})).catch((function(t){e.error(t)}))},e.prototype.onChange=function(e){var t=this;null!=e&&e.length>0?this.service.getHierarchiesForType(e,!1).then((function(e){t.hierarchies=e,t.hierarchy=null})).catch((function(e){t.error(e)})):(this.hierarchies=[],this.hierarchy=null)},e.prototype.onExport=function(){"SHAPEFILE"==this.format?window.location.href=acp+"/shapefile/export-shapefile?type="+this.code+"&hierarchyType="+this.hierarchy:"EXCEL"==this.format&&(window.location.href=acp+"/excel/export-spreadsheet?type="+this.code+"&hierarchyType="+this.hierarchy)},e.prototype.error=function(e){this.bsModalRef=this.modalService.show(r.ErrorModalComponent,{backdrop:!0}),this.bsModalRef.content.message=r.ErrorHandler.getMessageFromError(e)},e.ɵfac=function(t){return new(t||e)(o.ɵɵdirectiveInject(i.IOService),o.ɵɵdirectiveInject(a.BsModalService),o.ɵɵdirectiveInject(l.AuthService))},e.ɵcmp=o.ɵɵdefineComponent({type:e,selectors:[["data-export"]],decls:2,vars:1,consts:[[4,"ngIf"],["form","ngForm"],[1,"form-group","row"],["for","code",1,"col-md-3","text-right"],["key","io.geoObjectType"],[1,"col-md-9"],["id","code","name","code","required","",1,"select-area",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","form-group row",4,"ngIf"],["for","format",1,"col-md-3","text-right"],["key","io.format"],["id","format","name","format","required","",1,"select-area",3,"ngModel","ngModelChange"],["value","EXCEL"],["key","io.spreadsheet"],["value","SHAPEFILE"],["key","io.shapefile"],[1,"col-md-12","text-right"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["key","io.export"],[3,"value"],[1,"col-sm-3","text-right"],["key","io.modal.hierarchy"],["name","hierarchy","required","",1,"select-area",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(o.ɵɵelement(0,"loading-bar"),o.ɵɵtemplate(1,f,24,5,"form",0)),2&e&&(o.ɵɵadvance(1),o.ɵɵproperty("ngIf",t.types))},directives:[c.LoadingBarComponent,s.NgIf,d.ɵangular_packages_forms_forms_y,d.NgControlStatusGroup,d.NgForm,p.LocalizeComponent,d.SelectControlValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,d.NgSelectOption,d.ɵangular_packages_forms_forms_x,s.NgForOf],encapsulation:2}),e}();t.DataExportComponent=h},646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoObjectTypePipe=void 0;n(0);var r=n(0),o=function(){function e(){}return e.prototype.transform=function(e,t){if(!e||!t)return e;var n=[];return this.buildUnassignedGeoObjTypes(t,n),e.filter((function(e){return-1===n.indexOf(e.code)}))},e.prototype.buildUnassignedGeoObjTypes=function(e,t){var n=this;e.forEach((function(e){n.processHierarchyNodes(e,t)}))},e.prototype.processHierarchyNodes=function(e,t){var n=this;t.push(e.geoObjectType),e.children.forEach((function(e){n.processHierarchyNodes(e,t)}))},e.ɵfac=function(t){return new(t||e)},e.ɵpipe=r.ɵɵdefinePipe({name:"geoobjecttype",type:e,pure:!1}),e}();t.GeoObjectTypePipe=o},647:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistryRoutingModule=void 0;n(0);var r=n(1),o=n(28),i=n(590),a=n(580),l=n(609),c=n(619),s=n(622),d=n(607),p=n(618),m=n(623),u=n(624),g=n(631),f=n(632),h=n(634),v=n(635),b=n(636),y=n(129),S=n(0),C=n(28),E=[{path:"",component:i.HierarchyComponent,canActivate:[y.AuthGuard]},{path:"hierarchies",component:i.HierarchyComponent,canActivate:[y.AuthGuard]},{path:"data",component:d.DataPageComponent,canActivate:[y.MaintainerGuard]},{path:"change-requests",component:p.ChangeRequestPageComponent,canActivate:[y.ContributerGuard]},{path:"master-lists",component:l.MasterListManagerComponent,canActivate:[y.AuthGuard]},{path:"scheduled-jobs",component:m.ScheduledJobsComponent,canActivate:[y.MaintainerGuard]},{path:"job/:oid",component:u.JobComponent,canActivate:[y.MaintainerGuard]},{path:"master-list/:oid/:published",component:c.MasterListComponent,canActivate:[y.AuthGuard]},{path:"master-list-view/:oid",component:s.MasterListViewComponent,canActivate:[y.AuthGuard]},{path:"change-request",component:a.SubmitChangeRequestComponent,canActivate:[y.ContributerGuard]},{path:"tasks",component:g.TaskViewerComponent,canActivate:[y.MaintainerGuard]},{path:"synchronization-configs",component:f.SynchronizationConfigManagerComponent,canActivate:[y.AuthGuard]},{path:"synchronization-config/:oid",component:h.SynchronizationConfigComponent,canActivate:[y.AuthGuard]},{path:"location-manager",component:b.LocationManagerComponent,canActivate:[y.AuthGuard]},{path:"sync/details/:oid",component:v.SyncDetailsComponent,canActivate:[y.MaintainerGuard]}],x=function(){function e(){}return e.ɵmod=S.ɵɵdefineNgModule({type:e}),e.ɵinj=S.ɵɵdefineInjector({factory:function(t){return new(t||e)},providers:[{provide:r.LocationStrategy,useClass:r.HashLocationStrategy}],imports:[[o.RouterModule.forChild(E)],o.RouterModule]}),e}();t.RegistryRoutingModule=x,("undefined"==typeof ngJitMode||ngJitMode)&&S.ɵɵsetNgModuleScope(x,{imports:[C.RouterModule],exports:[o.RouterModule]})}}]);
//# sourceMappingURL=1.chunk.js.map