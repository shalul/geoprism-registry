<div class="new-admin-design-main">
    <cgr-header></cgr-header>
    <loading-bar></loading-bar>

    <div id="app-container" class="container-fluid">
        <div *ngIf="message != null" class="alert alert-danger" role="alert">{{message}}</div>

        <div class="py-5">
            <h2>
                <localize key="scheduledjobs.title"></localize>
            </h2>
        </div>
        <div class="row">
            <div class="col-md-12 order-md-1">
                <ul class="list-group">
                    <div class="solid-table-wrapper">
                        <table class="table table-striped"> 
                            <thead> 
                                <tr> 
                                    <th style="">
                                        <localize key="scheduledjobs.jobs.table.header"></localize>                                      
                                    </th> 
                                </tr> 
                            </thead> 
                            <tbody> 
                                <tr *ngFor="let job of jobs; let i = index;"> 
                                    <td style="vertical-align: middle;">
                                        <div class="wrapper">
                                            <i style="position: absolute;font-size: 40px;" class="fa fa-file" aria-hidden="true"></i>
                                            <p style="padding-left: 60px;">
                                                <span style="display: block;">
                                                    {{job.fileName}}
                                                </span>
                                                <span style="display: block;">
                                                    Stage 3: Needs Resolution
                                                </span>
                                            </p>

                                            <step-indicator [steps]="job.steps"></step-indicator>

                                        </div>
                                    </td> 
                                    <td *ngIf="isAdmin || isMaintainer" style="text-align: right;">  
                                        <a [routerLink]="'/registry/job/' + job.oid" routerLinkActive="active">
                                            <button class="btn btn-primary" role="button">
                                                <localize key="scheduledjobs.detail.button"></localize>
                                            </button>
                                        </a>
                                        <!-- <button type="submit" (click)="onDelete(job)" class="btn btn-danger" role="button"><localize key="modal.button.delete"></localize></button> -->
                                    </td> 
                                </tr> 

                            </tbody> 
                        </table>
                        <div class="solid-table-footer">
                            <a (click)="onViewAllActiveJobs()" ><localize key="scheduledjobs.view.more.button"></localize></a>
                        </div>
                    </div>

                    <div class="solid-table-wrapper">
                        <table class="table table-striped"> 
                            <thead> 
                                <tr> 
                                    <th style="width:70%;border-bottom: none;">
                                        <localize style="line-height: 40px;" key="scheduledjobs.completedjobs.table.header"></localize>                                      
                                        <button type="submit" (click)="onViewAllCompleteJobs()" class="btn btn-default pull-right" role="button">
                                            <localize key="scheduledjobs.view.completed.jobs.button"></localize>
                                        </button>
                                    </th> 
                                </tr> 
                            </thead> 
                            <tbody> 
                                <tr *ngFor="let job of completedJobs; let i = index;"> 
                                    <td style="width:70%; vertical-align: middle;">
                                        <i class="fa fa-file" aria-hidden="true"></i>
                                        <p>{{job.fileName}}</p>
                                    </td> 
                                    <td *ngIf="isAdmin || isMaintainer" style="width:30%;text-align: right;">                                
                                        <button type="submit" (click)="onView(job.oid)" class="btn btn-primary" role="button"><localize key="scheduledjobs.detail.button"></localize></button>
                                        <!-- <button type="submit" (click)="onDelete(job)" class="btn btn-danger" role="button"><localize key="modal.button.delete"></localize></button> -->
                                    </td> 
                                </tr> 
                            </tbody> 
                        </table>
                    </div>
                </ul>

            </div>
        </div>
    </div>
</div>