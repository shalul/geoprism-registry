<div class="row">
  <!-- <div class="label-holder"></div> -->
  <div class="col-md-12">
    <div class="btn-group geobject-editor-tab-holder">
      <label class="btn full-width-radio-button" [ngClass]="{active: tabIndex === 0}" (click)="changePage(0);"> 
        <span class="errorSpan"><span *ngIf="hasErrors(0)" class="tabHasErrors"></span></span>
        <span style="display:inline-block; width:90%;"><localize key="geoobject.editor.tabZero"></localize></span>
        <span class="changeSpan"><span *ngIf="hasChanges(0)" class="tabHasChanges"></span></span>
      </label> 
      <label class="btn full-width-radio-button" [ngClass]="{active: tabIndex === 1}" (click)="changePage(1);"> 
        <span class="errorSpan"><span *ngIf="hasErrors(1)" class="tabHasErrors"></span></span>
        <span style="display:inline-block; width:90%;"><localize key="geoobject.editor.tabOne"></localize></span>
        <span class="changeSpan"><span *ngIf="hasChanges(1)" class="tabHasChanges"></span></span>
      </label> 
      <label class="btn full-width-radio-button" [ngClass]="{active: tabIndex === 2}" (click)="changePage(2);"> 
        <span class="errorSpan"><span *ngIf="hasErrors(2)" class="tabHasErrors"></span></span>
        <span style="display:inline-block; width:90%;"><localize key="geoobject.editor.tabTwo"></localize></span>
        <span class="changeSpan"><span *ngIf="hasChanges(2)" class="tabHasChanges"></span></span>
      </label>
      <label class="btn full-width-radio-button settings" [ngClass]="{active: tabIndex === 3}" (click)="changePage(3);"> 
        <span class="errorSpan"><span *ngIf="hasErrors(3)" class="tabHasErrors"></span></span>
        <span style="display:inline-block; width:90%;"><i class="fa fa-cog"></i></span>
        <span class="changeSpan"><span *ngIf="hasChanges(3)" class="tabHasChanges"></span></span>
      </label>
    </div>
  </div>
</div>

<form class="modal-form" name="geobject-shared-attribute-editor" #attributeForm="ngForm">
  <fieldset>
    <!-- <div class="col-md-12"> -->
    <div *ngIf="postGeoObject">
      <div *ngIf="tabIndex === 0" class="row">
        <!-- <div class="label-holder">
                        <label>
                            <localize key="change.request.geoobject.update.form.label"></localize>
                        </label>
                    </div> -->
                    
        <div class="col-md-12">

<!--           <div class="row"> -->
<!--             <div class="col-md-12"> -->
<!--               <boolean-field [(value)]="showAllInstances" [label]="'Show all instances'" [disable]="false"></boolean-field> -->
<!--             </div> -->
<!--           </div> -->

          <span class="text"></span>
          <ul class="list-group">
            <li *ngFor="let attr of geoObjectType.attributes | geoObjectAttributeExcludesFilter:geoObjectAttributeExcludes; let i = index" class="list-group-item" style="text-align:left;border:none;padding:0;">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h4 style="margin:0;">
                    <span *ngIf="attr.code === 'code'"> 
                      <localize key="geoobject.code.alternate.label"></localize>
                    </span> 
                    <span *ngIf="attr.code === 'displayLabel'"> 
                      <localize key="geoobject.displayLabel.alternate.label"></localize>
                    </span> 
                    <span *ngIf="attr.code !== 'code' && attr.code !== 'displayLabel'"> {{attr.label.localizedValue}} </span> 
                  </h4>
                </div>

                <div class="panel-body">
                  <div *ngIf="attr.code !== 'code' && attr.isChangeOverTime">
                    <manage-versions
                        [geoObjectType]="geoObjectType" [attributeData]="{'attributeType':attr, 'changeRequest':changeRequest, 'editor': this, 'geoObject':postGeoObject}"
                        [readonly]="readOnly" (isValidChange)="onIsValidChange($event, attr)" [isNew]="isNew" >
                    </manage-versions>
                  </div>

                  <div *ngIf="!attr.isChangeOverTime">
                    <input *ngIf="postGeoObject && attr.code === 'code'" type="text" [(ngModel)]="postGeoObject.attributes[attr.code]" id="mod-{{attr.code}}" 
                        (change)="onNonChangeOverTimeAttributeChange(attr)" name="mod-{{attr.code}}" [disabled]="readOnly || (attr.code === 'code' && !isNew)" [style]="(readOnly || (attr.code === 'code' && !isNew)) ? '' : 'color:#333'" required>

                    <div *ngIf="attr.code !== 'code'">
                        <standard-attribute-editor [geoObjectType]="geoObjectType" [changeRequest]="changeRequest" [attributeType]="attr" [geoObject]="postGeoObject"
                          [readonly]="readOnly" (isValidChange)="onIsValidChange($event, attr)" [isNew]="isNew"></standard-attribute-editor>
                    </div>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <div *ngIf="tabIndex === 1" class="row">
        <ul class="list-group">
	        <li *ngFor="let hierarchy of hierarchies" class="list-group-item" style="text-align:left;border:none;padding:0;">
	          <div class="panel panel-default">
              <div class="panel-heading">
                <h4 style="margin:0;">
                  <span> {{hierarchy.label}} </span> 
                </h4>
              </div>
			      
			        <div class="panel-body">
			          <manage-versions [geoObjectType]="geoObjectType" [attributeData]="{'attributeType':parentAttributeType, 'changeRequest':changeRequest, 'editor': this, 'geoObject':postGeoObject}"
                        [readonly]="readOnly" (isValidChange)="onIsValidChange($event, parentAttributeType)" [isNew]="isNew" [hierarchy]="hierarchy"></manage-versions>
			        </div>
		        </div>
	        </li>
        </ul>
      </div>
      
      <div *ngIf="tabIndex === 2">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 style="margin:0;">
              <span> <localize key="shared.attributes.attribute.geometry.label"></localize> </span> 
            </h4>
          </div>
            
          <div class="panel-body">
            <manage-versions [geoObjectType]="geoObjectType" [attributeData]="{'attributeType':geometryAttributeType, 'changeRequest':changeRequest, 'editor': this, 'geoObject':postGeoObject}"
              [readonly]="readOnly" (isValidChange)="onIsValidChange($event, geometryAttributeType)" [isNew]="isNew" [isGeometryInlined]="isGeometryInlined"></manage-versions>
          </div>
        </div>
      </div>
      
      <div *ngIf="tabIndex === 3">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 style="margin:0;">
              <span>{{getAttribute('exists').label.localizedValue}}</span> 
            </h4>
          </div>
            
          <div class="panel-body">
            <manage-versions [geoObjectType]="geoObjectType" [attributeData]="{'attributeType':getAttribute('exists'), 'changeRequest':changeRequest, 'editor': this, 'geoObject':postGeoObject}"
              [readonly]="readOnly" (isValidChange)="onIsValidChange($event, getAttribute('exists'))" [isNew]="isNew" [isGeometryInlined]="isGeometryInlined"></manage-versions>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 style="margin:0;">
              <span>{{getAttribute('invalid').label.localizedValue}}</span> 
            </h4>
          </div>
            
          <div class="panel-body">
            <standard-attribute-editor [geoObjectType]="geoObjectType" [changeRequest]="changeRequest" [attributeType]="getAttribute('invalid')" [geoObject]="postGeoObject"
              [readonly]="readOnly" (isValidChange)="onIsValidChange($event, getAttribute('invalid'))" [isNew]="isNew"></standard-attribute-editor>
          </div>
        </div>
      </div>
    </div>
    <!-- </div> -->
  </fieldset>
</form>
