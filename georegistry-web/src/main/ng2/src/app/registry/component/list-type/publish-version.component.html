<ng-template #metadataDetail let-metadata='metadata' let-list="list" let-type="type">
    <div class="row-holder">
        <div class="label-holder">
            <label>
                <localize key="masterlist.ismaster"></localize>
            </label>
        </div>
        <div class="holder">
            <boolean-field [disable]="readonly" [(value)]="metadata.master" label=""></boolean-field>
        </div>
    </div>
    <div class="row-holder">
        <div class="label-holder">
            <label>
                <localize key="masterlist.visibility"></localize>
            </label>
        </div>
        <div class="holder">
            <select class="select-area" name="visibility" [(ngModel)]="metadata.visibility" [disabled]="readonly"
                required>
                <option value="PRIVATE">
                    <localize key="masterlist.private"></localize>
                </option>
                <option *ngIf="!list.typePrivate" value="PUBLIC">
                    <localize key="masterlist.public"></localize>
                </option>
            </select>
        </div>
    </div>
    <div class="row-holder" *ngFor="let localeValue of metadata.label.localeValues">
        <div class="label-holder">
            <label>
                <localize key="masterlist.label"></localize>
                <span style="color: #BABABA">&nbsp;(<convert-key-label [key]="localeValue.locale">
                    </convert-key-label>)</span>
            </label>
        </div>
        <div class="holder">
            <input [(ngModel)]="localeValue.value" [name]="'metadata-displayLabel-' + localeValue.locale" type="text"
                class="form-control" [disabled]="readonly" [required]="false" />
        </div>
    </div>
    <div class="row-holder">
        <div class="label-holder">
            <label>
                <localize key="list.type.originator"></localize>
            </label>
        </div>
        <div class="holder">
            <input [(ngModel)]="metadata.originator" name="originator" type="text" class="form-control"
                [disabled]="readonly" />
        </div>
    </div>
    <div class="row-holder">
        <div class="label-holder">
            <label>
                <localize key="list.type.collection.date"></localize>
            </label>
        </div>
        <div class="holder">
            <date-field [(value)]="metadata.collectionDate" [classNames]="['form-control']" label=""
                [inputName]="'collectionDate'" [allowFutureDates]="false" name="collectionDate" [disable]="readonly">
            </date-field>
        </div>
    </div>
    <div class="row-holder" *ngFor="let localeValue of metadata.description.localeValues">
        <div class="label-holder">
            <label>
                <localize key="masterlist.listAbstract"></localize>
                <span style="color: #BABABA">&nbsp;(<convert-key-label [key]="localeValue.locale">
                    </convert-key-label>)</span>
            </label>
        </div>
        <div class="holder">
            <textarea [(ngModel)]="localeValue.value" name="'description-' + localeValue.locale" class="form-control"
                [disabled]="readonly" [required]="false"></textarea>
        </div>
    </div>
    <div class="row-holder" *ngFor="let localeValue of metadata.process.localeValues">
        <div class="label-holder">
            <label>
                <localize key="masterlist.process"></localize>
                <span style="color: #BABABA">&nbsp;(<convert-key-label [key]="localeValue.locale">
                    </convert-key-label>)</span>
            </label>
        </div>
        <div class="holder">
            <textarea [(ngModel)]="localeValue.value" name="'process-' + localeValue.locale" class="form-control"
                [disabled]="readonly" [required]="false"></textarea>
        </div>
    </div>
    <div class="row-holder" *ngFor="let localeValue of metadata.progress.localeValues">
        <div class="label-holder">
            <label>
                <localize key="masterlist.progress"></localize>
                <span style="color: #BABABA">&nbsp;(<convert-key-label [key]="localeValue.locale">
                    </convert-key-label>)</span>
            </label>
        </div>
        <div class="holder">
            <input [(ngModel)]="localeValue.value" [name]="'progress-' + localeValue.locale" type="text"
                class="form-control" [disabled]="readonly" [required]="false" />
        </div>
    </div>
    <div class="row-holder" *ngFor="let localeValue of metadata.accessConstraints.localeValues">
        <div class="label-holder">
            <label>
                <localize key="masterlist.accessConstraints"></localize>
                <span style="color: #BABABA">&nbsp;(<convert-key-label [key]="localeValue.locale">
                    </convert-key-label>)</span>
            </label>
        </div>
        <div class="holder">
            <input [(ngModel)]="localeValue.value" [name]="'accessConstraints-' + localeValue.locale" type="text"
                class="form-control" [disabled]="readonly" [required]="false" />
        </div>
    </div>
    <div class="row-holder" *ngFor="let localeValue of metadata.useConstraints.localeValues">
        <div class="label-holder">
            <label>
                <localize key="masterlist.useConstraints"></localize>
                <span style="color: #BABABA">&nbsp;(<convert-key-label [key]="localeValue.locale">
                    </convert-key-label>)</span>
            </label>
        </div>
        <div class="holder">
            <input [(ngModel)]="localeValue.value" [name]="'useConstraints-' + localeValue.locale" type="text"
                class="form-control" [disabled]="readonly" [required]="false" />
        </div>
    </div>
    <div class="row-holder" *ngFor="let localeValue of metadata.acknowledgements.localeValues">
        <div class="label-holder">
            <label>
                <localize key="masterlist.acknowledgements"></localize>
                <span style="color: #BABABA">&nbsp;(<convert-key-label [key]="localeValue.locale">
                    </convert-key-label>)</span>
            </label>
        </div>
        <div class="holder">
            <textarea [(ngModel)]="localeValue.value" name="'acknowledgements-' + localeValue.locale"
                class="form-control" [disabled]="readonly" [required]="false"></textarea>
        </div>
    </div>
    <div class="row-holder" *ngFor="let localeValue of metadata.disclaimer.localeValues">
        <div class="label-holder">
            <label>
                <localize key="masterlist.disclaimer"></localize>
                <span style="color: #BABABA">&nbsp;(<convert-key-label [key]="localeValue.locale">
                    </convert-key-label>)</span>
            </label>
        </div>
        <div class="holder">
            <textarea [(ngModel)]="localeValue.value" name="'disclaimer-' + localeValue.locale" class="form-control"
                [disabled]="readonly" [required]="false"></textarea>
        </div>
    </div>
    <ng-container *ngIf="type === 'geospatial'">
        <div class="row-holder">
            <div class="label-holder">
                <label>
                    <localize key="list.type.topicCategories"></localize>
                </label>
            </div>
            <div class="holder">
                <input [(ngModel)]="metadata.topicCategories" name="topicCategories" class="form-control"
                    [disabled]="readonly" />
            </div>
        </div>
        <div class="row-holder">
            <div class="label-holder">
                <label>
                    <localize key="list.type.placeKeywords"></localize>
                </label>
            </div>
            <div class="holder">
                <input [(ngModel)]="metadata.placeKeywords" name="placeKeywords" class="form-control"
                    [disabled]="readonly" />
            </div>
        </div>
        <div class="row-holder">
            <div class="label-holder">
                <label>
                    <localize key="list.type.updateFrequency"></localize>
                </label>
            </div>
            <div class="holder">
                <input [(ngModel)]="metadata.updateFrequency" name="updateFrequency" class="form-control"
                    [disabled]="readonly" />
            </div>
        </div>
        <div class="row-holder">
            <div class="label-holder">
                <label>
                    <localize key="list.type.lineage"></localize>
                </label>
            </div>
            <div class="holder">
                <input [(ngModel)]="metadata.lineage" name="lineage" class="form-control" [disabled]="readonly" />
            </div>
        </div>
        <div class="row-holder">
            <div class="label-holder">
                <label>
                    <localize key="list.type.languages"></localize>
                </label>
            </div>
            <div class="holder">
                <input [(ngModel)]="metadata.languages" name="languages" class="form-control" [disabled]="readonly" />
            </div>
        </div>
        <div class="row-holder">
            <div class="label-holder">
                <label>
                    <localize key="list.type.scaleResolution"></localize>
                </label>
            </div>
            <div class="holder">
                <input [(ngModel)]="metadata.scaleResolution" name="scaleResolution" class="form-control"
                    [disabled]="readonly" />
            </div>
        </div>
        <div class="row-holder">
            <div class="label-holder">
                <label>
                    <localize key="list.type.spatialRepresentation"></localize>
                </label>
            </div>
            <div class="holder">
                <select class="select-area" name="spatialRepresentation" [(ngModel)]="metadata.spatialRepresentation"
                    [disabled]="true">
                    <!-- <option></option> -->
                    <option value="vector">
                        <localize key="list.type.vector"></localize>
                    </option>
                </select>

            </div>
        </div>
        <div class="row-holder">
            <div class="label-holder">
                <label>
                    <localize key="list.type.referenceSystem"></localize>
                </label>
            </div>
            <div class="holder">
                <select class="select-area" name="referenceSystem" [(ngModel)]="metadata.referenceSystem"
                    [disabled]="true">
                    <!-- <option></option> -->
                    <option value="EPSG4326">
                        <localize key="list.type.epsg4326"></localize>
                    </option>
                </select>
            </div>
        </div>
        <div class="row-holder">
            <div class="label-holder">
                <label>
                    <localize key="list.type.reportSpecification"></localize>
                </label>
            </div>
            <div class="holder">
                <input [(ngModel)]="metadata.reportSpecification" name="reportSpecification" type="reportSpecification"
                    class="form-control" [disabled]="readonly" />
            </div>
        </div>
        <div class="row-holder">
            <div class="label-holder">
                <label>
                    <localize key="list.type.distributionFormat"></localize>
                </label>
            </div>
            <div class="holder">
                <select class="select-area" name="distributionFormat" [(ngModel)]="metadata.distributionFormat"
                    [disabled]="true">
                    <option></option>
                    <option value="SHAPEFILE">
                        <localize key="io.shapefile"></localize>
                    </option>
                </select>
            </div>
        </div>

    </ng-container>


    <div class="row-holder">
        <div class="label-holder"></div>
        <div class="holder">
            <localize key="masterlist.contact"></localize>
        </div>
    </div>

    <div class="row-holder">
        <div class="label-holder">
            <label>
                <localize key="masterlist.contactName"></localize>
            </label>
        </div>
        <div class="holder">
            <input [(ngModel)]="metadata.contactName" name="contactName" type="text" class="form-control"
                [disabled]="readonly" />
        </div>
    </div>
    <div class="row-holder">
        <div class="label-holder">
            <label>
                <localize key="masterlist.telephoneNumber"></localize>
            </label>
        </div>
        <div class="holder">
            <input [(ngModel)]="metadata.telephoneNumber" name="telephoneNumber" type="text" class="form-control"
                [disabled]="readonly" />
        </div>
    </div>
    <div class="row-holder">
        <div class="label-holder">
            <label>
                <localize key="masterlist.email"></localize>
            </label>
        </div>
        <div class="holder">
            <input [(ngModel)]="metadata.email" name="email" type="email" class="form-control" [disabled]="readonly" />
        </div>
    </div>

</ng-template>

<div class="modal-body">
    <ng-container *ngIf="metadata != null">
        <div *ngIf="message != null" class="alert alert-danger" role="alert">{{message}}</div>

        <div class="heading text-center">
            <h1>
                <localize key="list.type.versionMetadata"></localize>
            </h1>
        </div>
        <!-- <div class="col-md-12 order-md-1"> -->
        <form #form="ngForm" class="modal-form" autocomplete="off">

            <fieldset>

                <div class="inner-col-content-wrapper" style="padding-top: 30px; margin-top: 10px;">

                    <div class="row">
                        <div class="col-md-12">
                            <div class="label-holder"></div>
                        
                            <div class="holder">
                              <div class="form-group" style="text-align: center;">

<!--                                 <a [routerLink]="" (click)="handleTab('LIST')" -->
<!--                                     [ngClass]="tab === 'LIST' ? 'cr-filter-link-active' : ''" -->
<!--                                     style="border-bottom: 1px solid;"> -->
<!--                                     <localize key="list.type.list"></localize> -->
<!--                                 </a> -->
<!--                                 <a [routerLink]="" (click)="handleTab('GEOSPATIAL')" -->
<!--                                     [ngClass]="tab === 'GEOSPATIAL' ? 'cr-filter-link-active' : ''" -->
<!--                                     style="margin-left: 5px;border-bottom:1px solid;"> -->
<!--                                     <localize key="list.type.geospatial"></localize> -->
<!--                                 </a> -->
                                
                                <div class="btn-group geobject-editor-tab-holder">
                                    <label class="btn full-width-radio-button" style="width:50%;" [ngClass]="tab === 'LIST' ? 'active' : ''" (click)="handleTab('LIST')"> 
                                      <span style="display:inline-block; width:90%;"><localize key="list.type.list"></localize></span>
                                    </label> 
                                    <label class="btn full-width-radio-button" style="width:50%;" [ngClass]="tab === 'GEOSPATIAL' ? 'active' : ''" (click)="handleTab('GEOSPATIAL')"> 
                                      <span style="display:inline-block; width:90%;"><localize key="list.type.geospatial"></localize></span>
                                    </label> 
                                  </div>
                                  
                                </div>
                              </div>

                            <hr style="border-top:solid 3px #6BA542" />

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <ng-container *ngIf="tab === 'LIST'" [ngTemplateOutlet]="metadataDetail"
                                [ngTemplateOutletContext]="{metadata:metadata.listMetadata, list:list, type:'list'}">
                            </ng-container>
                            <ng-container *ngIf="tab === 'GEOSPATIAL'" [ngTemplateOutlet]="metadataDetail"
                                [ngTemplateOutletContext]="{metadata:metadata.geospatialMetadata, list:list, type:'geospatial'}">
                            </ng-container>

                        </div>
                    </div>
                </div>

                <div class="row-holder">
                    <div class="label-holder"></div>
                    <div class="holder">
                        <div class="button-holder">
                            <button type="button" (click)="onCancel()" class="btn btn-default" role="button">
                                <localize [key]="readonly ? 'io.back' : 'io.cancel'"></localize>
                            </button>
                            <button *ngIf="!readonly" type="submit" (click)="onSubmit()" class="btn btn-primary"
                                role="button" [disabled]="!form.valid || !metadata.visibility">
                                <localize key="io.submit"></localize>
                            </button>
                        </div>
                    </div>
                </div>

            </fieldset>
        </form>
    </ng-container>
</div>