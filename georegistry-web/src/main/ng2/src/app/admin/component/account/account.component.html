<div>
  <!-- <header></header> -->

  <message></message>

  <loading-bar></loading-bar>

  <div class="heading text-center">
    <h1>
      Account
    </h1>
  </div>

  <form *ngIf="account" #form="ngForm" class="modal-form" (ngSubmit)="form.valid && onSubmit()" [mustMatch]="['password', 'certainPassword']">
    <!-- <div class="modal-dialog" style="height: 100%;"> -->
    <!-- <div *ngIf="account" class="modal-content" style="height: 100%;overflow-y: auto;"> -->
    <fieldset>

      <div class="modal-body">
        <div *ngIf="message != null" class="alert alert-danger" role="alert">{{message}}</div>

        <div class="heading">
          <h4 class="modal-title">
            <localize key="account.user.heading"></localize>
          </h4>
        </div>
        <div class="row-holder">
          <div class="label-holder">
            <label>
              <localize key="account.firstname"></localize>
            </label>
          </div>
          <div class="holder">
            <span class="text">
              <input type="text" [(ngModel)]="account.user.firstName" name="firstname" required>
            </span>
          </div>
        </div>
        <div class="row-holder">
          <div class="label-holder">
            <label>
              <localize key="account.lastname"></localize>
            </label>
          </div>
          <div class="holder">
            <span class="text">
              <input type="text" [(ngModel)]="account.user.lastName" name="lastname" required>
            </span>
          </div>
        </div>
        <div class="row-holder">
          <div class="label-holder">
            <label>
              <localize key="account.altFirstname"></localize>
            </label>
          </div>
          <div class="holder">
            <span class="text">
              <input type="text" [(ngModel)]="account.user.altFirstName" name="altFirstname">
            </span>
          </div>
        </div>        
        <div class="row-holder">
          <div class="label-holder">
            <label>
              <localize key="account.altLastname"></localize>
            </label>
          </div>
          <div class="holder">
            <span class="text">
              <input type="text" [(ngModel)]="account.user.altLastName" name="altLastname">
            </span>
          </div>
        </div>
        <div class="row-holder">
          <div class="label-holder">
            <label>
              <localize key="account.phonenumber"></localize>
            </label>
          </div>
          <div class="holder">
            <span class="text">
              <input type="text" [(ngModel)]="account.user.phoneNumber" name="phoneNumber">
            </span>
          </div>
        </div>
        <div class="row-holder">
          <div class="label-holder">
            <label>
              <localize key="account.altPhonenumber"></localize>
            </label>
          </div>
          <div class="holder">
            <span class="text">
              <input type="text" [(ngModel)]="account.user.altPhoneNumber" name="altPhoneNumber">
            </span>
          </div>
        </div>
        <div class="row-holder">
          <div class="label-holder">
            <label>
              <localize key="account.email"></localize>
            </label>
          </div>
          <div class="holder">
            <span class="text">
              <input type="email" [(ngModel)]="account.user.email" name="email" required #aemail="ngModel" required email>
            </span>
            <div *ngIf="aemail.errors?.email && account.user.email && account.user.email.length > 0" class="inline-error-message">
              <localize key="account.email.validation"></localize>
            </div>
          </div>
        </div>
        <div class="row-holder">
          <div class="label-holder">
            <label>
              <localize key="account.position"></localize>
            </label>
          </div>
          <div class="holder">
            <span class="text">
              <input type="text" [(ngModel)]="account.user.position" name="position">
            </span>
          </div>
        </div>
        <div class="row-holder">
          <div class="label-holder">
            <label>
              <localize key="account.department"></localize>
            </label>
          </div>
          <div class="holder">
            <span class="text">
              <input type="text" [(ngModel)]="account.user.department" name="department">
            </span>
          </div>
        </div>


        <!-- <div class="heading">
          <h4>
            <localize key="account.info.heading"></localize>
          </h4>
        </div> -->
        <div class="row-holder">
          <div class="label-holder">
            <label>
              <localize key="account.username"></localize>
            </label>
          </div>
          <div class="holder">
            <span class="text">
              <input type="text" [disabled]="!account.user.newInstance && account.user.username === 'admin'" [(ngModel)]="account.user.username" name="username" required>
            </span>
          </div>
        </div>


        <div *ngIf="!account.user.newInstance" class="heading">
          <h4>
            <localize key="account.user.password"></localize>
          </h4>
        </div>
        <div *ngIf="!account.user.newInstance" class="row-holder">
          <div class="button-holder" style="text-align: left;">
            <input type="button" *ngIf="!account.changePassword" [value]="'account.user.change.password.button' | localize" class="btn btn-primary"
              (click)="onChangePassword()" />
            <input type="button" *ngIf="account.changePassword" [value]="'dataset.cancel' | localize" class="btn btn-default"
              (click)="onChangePassword()" />
          </div>
        </div>
        <div *ngIf="account.changePassword || account.user.newInstance">
          <div class="row-holder">
            <div class="label-holder">
              <label>
                <localize key="account.password"></localize>
              </label>
            </div>
            <div class="holder">
              <span class="text">
                <input type="password" [(ngModel)]="account.user.password" name="password" #password="ngModel" required
                  minlength="5" maxlength="50">
                <password-strength-bar [passwordToCheck]="account.user.password"></password-strength-bar>
              </span>
            </div>
          </div>
          <div class="row-holder">
            <div class="label-holder">
              <label>
                <localize key="account.certainPassword"></localize>
              </label>
            </div>
            <div class="holder">
              <span class="text">
                <input type="password" [ngModel]="certainPassword" name="certainPassword" #certainPassword="ngModel" required />
              </span>
              <div *ngIf="certainPassword.errors?.mustMatch" class="inline-error-message">
                <localize key="account.certainPassword.validation"></localize>
              </div>
            </div>
          </div>
        </div>


        <div class="heading">
          <h4>
            <localize key="account.user.status"></localize>
          </h4>
        </div>
        <div *ngIf="!(!account.user.newInstance && account.user.username === 'admin')">
          <div class="row-holder">
            <label class="radio radio-inline">
              <input class="inline-radio-input" type="radio" name="userActive" [value]="false"
                [(ngModel)]="account.user.inactive">
              <span><localize key="account.user.status.active"></localize></span>
            </label>
            <label class="radio radio-inline">
              <input class="inline-radio-input" type="radio" name="userActive" [value]="true"
                [(ngModel)]="account.user.inactive">
              <span><localize key="account.user.status.inactive"></localize></span>
            </label>
          </div>
        </div>

        <role-management *ngIf="account.roles" [newInstance]="account.user.newInstance" [roles]="account.roles" (onRoleIdsUpdate)="onRoleIdsUpdate($event)"></role-management>
        
        <div class="row">
            <div class="col-md-12">
              <div class="button-holder">
                <input type="button" [value]="'dataset.cancel' | localize" class="btn btn-default" (click)="cancel()" />
                <input type="submit" [value]="'dataset.submit' | localize" class="btn btn-primary" [disabled]="!(form.valid)" />
              </div>
            </div>
        </div>

      </div> <!-- End modal-body -->

    </fieldset>
    <!-- </div> -->
    <!-- </div> -->
  </form>
</div>